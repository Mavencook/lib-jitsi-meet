{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f6fcd4e468e6da561d55","webpack:///./node_modules/jitsi-meet-logger/lib/index.js","webpack:///./modules/browser/index.js","webpack:///./node_modules/strophe.js/strophe.js","webpack:///./modules/statistics/statistics.js","webpack:///./service/RTC/MediaType.js","webpack:///./modules/util/GlobalOnErrorHandler.js","webpack:///./service/statistics/AnalyticsEvents.js","webpack:///./JitsiConferenceEvents.js","webpack:///./service/xmpp/XMPPEvents.js","webpack:///./service/RTC/RTCEvents.js","webpack:///./modules/util/Listenable.js","webpack:///./node_modules/webrtc-adapter/src/js/utils.js","webpack:///./JitsiTrackError.js","webpack:///./service/RTC/VideoType.js","webpack:///./modules/xmpp/SDPUtil.js","webpack:///./node_modules/sdp-transform/lib/index.js","webpack:///./node_modules/events/events.js","webpack:///./JitsiTrackErrors.js","webpack:///./JitsiTrackEvents.js","webpack:///./modules/util/RandomUtil.js","webpack:///(webpack)/buildin/global.js","webpack:///./modules/xmpp/ConnectionPlugin.js","webpack:///./modules/RTC/RTCUtils.js","webpack:///./modules/settings/Settings.js","webpack:///./JitsiConnectionEvents.js","webpack:///./modules/RTC/RTC.js","webpack:///./modules/xmpp/SdpTransformUtil.js","webpack:///./modules/videosipgw/VideoSIPGWConstants.js","webpack:///./service/connectivity/ConnectionQualityEvents.js","webpack:///./JitsiConferenceErrors.js","webpack:///./service/RTC/Resolutions.js","webpack:///./modules/connectivity/ParticipantConnectionStatus.js","webpack:///./service/e2eping/E2ePingEvents.js","webpack:///./node_modules/jitsi-meet-logger/lib/Logger.js","webpack:///./node_modules/js-utils/index.js","webpack:///./node_modules/js-utils/browser-detection/index.js","webpack:///./node_modules/js-utils/browser-detection/browsers.js","webpack:///./modules/statistics/LocalStatsCollector.js","webpack:///./service/statistics/Events.js","webpack:///./modules/util/ScriptUtil.js","webpack:///./modules/xmpp/xmpp.js","webpack:///./JitsiConnectionErrors.js","webpack:///./modules/xmpp/ChatRoom.js","webpack:///./JitsiTranscriptionStatus.js","webpack:///./service/authentication/AuthenticationEvents.js","webpack:///./node_modules/process/browser.js","webpack:///./modules/xmpp/JingleSessionState.js","webpack:///./modules/xmpp/SDP.js","webpack:///./service/RTC/SignalingEvents.js","webpack:///./modules/RTC/JitsiTrack.js","webpack:///./service/RTC/CameraFacingMode.js","webpack:///./node_modules/sdp-transform/lib/grammar.js","webpack:///./node_modules/sdp/sdp.js","webpack:///./modules/transcription/audioRecorder.js","webpack:///./modules/recording/recordingXMLUtils.js","webpack:///./JitsiMediaDevicesEvents.js","webpack:///./index.js","webpack:///./JitsiMeetJS.js","webpack:///./modules/util/AuthUtil.js","webpack:///./JitsiConnection.js","webpack:///./JitsiConference.js","webpack:///./modules/statistics/AvgRTPStatsReporter.js","webpack:///./node_modules/jitsi-meet-logger/lib/LogCollector.js","webpack:///./modules/browser/BrowserCapabilities.js","webpack:///./node_modules/js-utils/browser-capabilities/index.js","webpack:///./node_modules/js-utils/browser-capabilities/BrowserCapabilities.js","webpack:///./node_modules/js-utils/browser-detection/BrowserDetection.js","webpack:///./node_modules/bowser/src/bowser.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///./modules/statistics/AnalyticsAdapter.js","webpack:///./modules/util/UsernameGenerator.js","webpack:///./modules/statistics/CallStats.js","webpack:///./node_modules/react-native-callstats/callstats.js","webpack:///./modules/statistics/RTPStatsCollector.js","webpack:///./node_modules/current-executing-script/dist/currentExecutingScript.js","webpack:///./service/statistics/constants.js","webpack:///./modules/version/ComponentsVersions.js","webpack:///./modules/connectivity/ConnectionQuality.js","webpack:///./modules/e2eping/e2eping.js","webpack:///./authenticateAndUpgradeRole.js","webpack:///./node_modules/strophejs-plugin-disco/lib/strophe.disco.js","webpack:///./modules/xmpp/strophe.emuc.js","webpack:///./modules/xmpp/moderator.js","webpack:///./modules/xmpp/strophe.jingle.js","webpack:///./modules/xmpp/JingleSessionPC.js","webpack:///./node_modules/async/lib/async.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./modules/util/StringUtils.js","webpack:///./modules/xmpp/JingleSession.js","webpack:///./modules/xmpp/SDPDiffer.js","webpack:///./modules/xmpp/SignalingLayerImpl.js","webpack:///./service/RTC/SignalingLayer.js","webpack:///./modules/xmpp/strophe.util.js","webpack:///./modules/xmpp/strophe.ping.js","webpack:///./modules/xmpp/strophe.rayo.js","webpack:///./modules/xmpp/strophe.logger.js","webpack:///./modules/xmpp/Caps.js","webpack:///./JitsiConferenceEventManager.js","webpack:///./modules/util/EventEmitterForwarder.js","webpack:///./modules/DTMF/JitsiDTMFManager.js","webpack:///./JitsiParticipant.js","webpack:///./modules/event/Jvb121EventGenerator.js","webpack:///./modules/P2PDominantSpeakerDetection.js","webpack:///./modules/RTC/BridgeChannel.js","webpack:///./modules/RTC/JitsiLocalTrack.js","webpack:///./modules/RTC/ortc/RTCPeerConnection.js","webpack:///./node_modules/yaeti/index.js","webpack:///./node_modules/yaeti/lib/EventTarget.js","webpack:///./node_modules/yaeti/lib/Event.browser.js","webpack:///./modules/RTC/ortc/RTCSessionDescription.js","webpack:///./node_modules/sdp-transform/lib/parser.js","webpack:///./node_modules/sdp-transform/lib/writer.js","webpack:///./modules/RTC/ortc/utils.js","webpack:///./modules/RTC/ortc/errors.js","webpack:///./modules/RTC/ScreenObtainer.js","webpack:///./node_modules/webrtc-adapter/src/js/adapter_core.js","webpack:///./node_modules/webrtc-adapter/src/js/adapter_factory.js","webpack:///./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack:///./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","webpack:///./node_modules/webrtc-adapter/src/js/edge/edge_shim.js","webpack:///./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js","webpack:///./node_modules/webrtc-adapter/src/js/edge/getusermedia.js","webpack:///./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack:///./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","webpack:///./node_modules/webrtc-adapter/src/js/safari/safari_shim.js","webpack:///./node_modules/webrtc-adapter/src/js/common_shim.js","webpack:///./modules/util/MathUtil.js","webpack:///./modules/RTC/TraceablePeerConnection.js","webpack:///./modules/RTC/JitsiRemoteTrack.js","webpack:///./modules/RTC/LocalSdpMunger.js","webpack:///./modules/xmpp/RtxModifier.js","webpack:///./modules/xmpp/SdpConsistency.js","webpack:///./node_modules/@jitsi/sdp-interop/lib/index.js","webpack:///./node_modules/@jitsi/sdp-interop/lib/interop.js","webpack:///./node_modules/@jitsi/sdp-interop/lib/transform.js","webpack:///./node_modules/@jitsi/sdp-interop/lib/array-equals.js","webpack:///./node_modules/@jitsi/sdp-simulcast/lib/index.js","webpack:///./node_modules/@jitsi/sdp-simulcast/lib/transform-utils.js","webpack:///./modules/TalkMutedDetection.js","webpack:///./modules/transcription/transcriber.js","webpack:///./modules/transcription/recordingResult.js","webpack:///./modules/transcription/transcriptionServices/SphinxTranscriptionService.js","webpack:///./modules/transcription/transcriptionServices/AbstractTranscriptionService.js","webpack:///./modules/transcription/word.js","webpack:///./modules/recording/RecordingManager.js","webpack:///./modules/recording/JibriSession.js","webpack:///./modules/videosipgw/VideoSIPGW.js","webpack:///./modules/videosipgw/JitsiVideoSIPGWSession.js","webpack:///./modules/rttmonitor/rttmonitor.js","webpack:///./modules/statistics/SpeakerStatsCollector.js","webpack:///./modules/statistics/SpeakerStats.js","webpack:///./JitsiMediaDevices.js","webpack:///./modules/recording/recordingConstants.js"],"names":["logger","require","getLogger","__filename","_instances","isCallstatsLoaded","loadCallStatsAPI","options","ScriptUtil","loadScript","customScriptUrl","undefined","_initCallStatsBackend","CallStats","isBackendInitialized","userName","Settings","callStatsUserName","initBackend","callStatsID","callStatsSecret","swapUserNameAndAlias","callStatsAliasName","aliasName","applicationName","getWiFiStatsMethod","error","formatJitsiTrackErrorForCallStats","err","Error","stack","name","gum","constraintName","constraints","JSON","stringify","message","Statistics","init","audioLevelsEnabled","disableAudioLevels","audioLevelsInterval","disableThirdPartyRequests","xmpp","rtpStatsMap","Map","eventEmitter","callStatsIntegrationEnabled","browser","isReactNative","callStatsConfIDNamespace","warn","callsStatsInstances","instances","add","analytics","Object","defineProperty","get","Set","prototype","startRemoteStats","peerconnection","stopRemoteStats","rtpStats","start","set","id","e","localStats","startLocalStats","stream","callback","push","addAudioLevelListener","listener","on","removeAudioLevelListener","removeListener","addBeforeDisposedListener","removeBeforeDisposedListener","addConnectionStatsListener","removeConnectionStatsListener","addByteSentStatsListener","removeByteSentStatsListener","dispose","size","emit","values","callStats","stopCallStats","tpc","keys","tpcId","_stopRemoteStats","removeAllListeners","delete","stopLocalStats","i","length","splice","stop","startCallStats","remoteUserID","has","info","newInstance","confID","_getCallStatsConfID","_getAllCallStatsInstances","csInstances","statistics","cs","roomName","callStatsInstance","sendTerminateEvent","isCallstatsEnabled","sendConnectionResumeOrHoldEvent","isResume","instance","sendResumeOrHoldEvent","sendIceConnectionFailedEvent","sendMuteEvent","muted","type","sendScreenSharingEvent","ssrc","sendDominantSpeakerEvent","sendActiveDeviceListEvent","devicesData","globalSet","associateStreamWithVideoTag","isLocal","userId","usageLabel","containerId","sendGetUserMediaFailed","sendCreateOfferFailed","sendCreateAnswerFailed","sendSetLocalDescFailed","sendSetRemoteDescFailed","sendAddIceCandidateFailed","sendLog","m","globalSubSet","stats","next","value","csPerStats","sendApplicationLog","sendFeedback","overall","comment","sendEvent","rating","LOCAL_JID","reportGlobalError","sendAnalyticsAndLog","event","properties","eventToLog","log","sendAnalytics","eventName","AUDIO","VIDEO","handlers","oldOnErrorHandler","window","onerror","JitsiGlobalErrorHandler","args","forEach","handler","oldOnUnhandledRejection","onunhandledrejection","JitsiGlobalUnhandledRejection","reason","GlobalOnErrorHandler","addHandler","callErrorHandler","errHandler","callUnhandledRejectionHandler","module","exports","TYPE_OPERATIONAL","TYPE_PAGE","TYPE_TRACK","TYPE_UI","ACTION_JINGLE_RESTART","ACTION_JINGLE_SA_TIMEOUT","ACTION_JINGLE_SI_RECEIVED","ACTION_JINGLE_SI_TIMEOUT","ACTION_JINGLE_TERMINATE","ACTION_JINGLE_TR_RECEIVED","ACTION_JINGLE_TR_SUCCESS","ACTION_P2P_ESTABLISHED","ACTION_P2P_FAILED","ACTION_P2P_SWITCH_TO_JVB","AVAILABLE_DEVICE","CONNECTION_DISCONNECTED","FEEDBACK","ICE_DURATION","ICE_ESTABLISHMENT_DURATION_DIFF","ICE_STATE_CHANGED","TRACK_UNMUTED","createBridgeDownEvent","bridgeDown","action","actionSubject","createConnectionFailedEvent","errorType","errorMessage","details","attributes","createConnectionStageReachedEvent","stage","source","createE2eRttEvent","participantId","region","rtt","createFocusLeftEvent","createGetUserMediaEvent","createJingleEvent","createNoDataFromSourceEvent","mediaType","createP2PEvent","createRemotelyMutedEvent","createRtpStatsEvent","createRttByRegionEvent","createTtfmEvent","AUTH_STATUS_CHANGED","AVAILABLE_DEVICES_CHANGED","AVATAR_CHANGED","BEFORE_STATISTICS_DISPOSED","CONFERENCE_ERROR","CONFERENCE_FAILED","CONFERENCE_JOINED","CONFERENCE_LEFT","CONNECTION_ESTABLISHED","CONNECTION_INTERRUPTED","CONNECTION_RESTORED","DATA_CHANNEL_OPENED","DISPLAY_NAME_CHANGED","DOMINANT_SPEAKER_CHANGED","DTMF_SUPPORT_CHANGED","ENDPOINT_MESSAGE_RECEIVED","JVB121_STATUS","KICKED","LAST_N_ENDPOINTS_CHANGED","LOCK_STATE_CHANGED","MESSAGE_RECEIVED","PRIVATE_MESSAGE_RECEIVED","PARTICIPANT_CONN_STATUS_CHANGED","PARTCIPANT_FEATURES_CHANGED","PARTICIPANT_PROPERTY_CHANGED","P2P_STATUS","PHONE_NUMBER_CHANGED","RECORDER_STATE_CHANGED","VIDEO_SIP_GW_AVAILABILITY_CHANGED","VIDEO_SIP_GW_SESSION_STATE_CHANGED","START_MUTED_POLICY_CHANGED","STARTED_MUTED","SUBJECT_CHANGED","SUSPEND_DETECTED","TALK_WHILE_MUTED","TRACK_ADDED","TRACK_AUDIO_LEVEL_CHANGED","TRACK_MUTE_CHANGED","TRACK_REMOVED","TRANSCRIPTION_STATUS_CHANGED","USER_JOINED","USER_LEFT","USER_ROLE_CHANGED","USER_STATUS_CHANGED","BOT_TYPE_CHANGED","XMPPEvents","ADD_ICE_CANDIDATE_FAILED","AUDIO_MUTED_BY_FOCUS","AUTHENTICATION_REQUIRED","BRIDGE_DOWN","CALL_ACCEPTED","CALL_INCOMING","CALL_ENDED","CHAT_ERROR_RECEIVED","CONFERENCE_SETUP_FAILED","CONNECTION_FAILED","CONNECTION_ICE_FAILED","EMUC_ROOM_ADDED","EMUC_ROOM_REMOVED","ETHERPAD","FOCUS_DISCONNECTED","FOCUS_LEFT","GRACEFUL_SHUTDOWN","ICE_RESTARTING","JINGLE_ERROR","JINGLE_FATAL_ERROR","LOCAL_ROLE_CHANGED","MUC_MEMBER_BOT_TYPE_CHANGED","MUC_DESTROYED","MUC_JOINED","MUC_MEMBER_JOINED","MUC_MEMBER_LEFT","MUC_LEFT","MUC_ROLE_CHANGED","MUC_LOCK_CHANGED","PARTICIPANT_AUDIO_MUTED","PARTICIPANT_VIDEO_MUTED","PARTICIPANT_VIDEO_TYPE_CHANGED","PASSWORD_REQUIRED","PEERCONNECTION_READY","PRESENCE_RECEIVED","PRESENCE_STATUS","PROMPT_FOR_LOGIN","READY_TO_JOIN","REMOTE_STATS","RESERVATION_ERROR","ROOM_CONNECT_ERROR","ROOM_CONNECT_NOT_ALLOWED_ERROR","ROOM_JOIN_ERROR","ROOM_MAX_USERS_ERROR","SENDING_CHAT_MESSAGE","SENDING_PRIVATE_CHAT_MESSAGE","SESSION_ACCEPT_TIMEOUT","START_MUTED_FROM_FOCUS","TRANSPORT_INFO","ICE_CONNECTION_STATE_CHANGED","JSON_MESSAGE_RECEIVED","RTCEvents","CREATE_ANSWER_FAILED","CREATE_OFFER_FAILED","DATA_CHANNEL_OPEN","ENDPOINT_CONN_STATUS_CHANGED","LASTN_ENDPOINT_CHANGED","IS_SELECTED_CHANGED","LASTN_VALUE_CHANGED","LOCAL_TRACK_SSRC_UPDATED","TRACK_ATTACHED","REMOTE_TRACK_ADDED","REMOTE_TRACK_MUTE","REMOTE_TRACK_REMOVED","REMOTE_TRACK_UNMUTE","SET_LOCAL_DESCRIPTION_FAILED","SET_REMOTE_DESCRIPTION_FAILED","AUDIO_OUTPUT_DEVICE_CHANGED","DEVICE_LIST_CHANGED","DEVICE_LIST_AVAILABLE","LOCAL_UFRAG_CHANGED","REMOTE_UFRAG_CHANGED","Listenable","addEventListener","addListener","removeEventListener","off","TRACK_ERROR_TO_MESSAGE_MAP","JitsiTrackError","devices","Array","isArray","slice","join","constraint","video","indexOf","getResolutionFromFailedConstraint","create","constructor","failedConstraintName","mandatory","minWidth","minHeight","VideoType","CAMERA","DESKTOP","SDPUtil","filterSpecialChars","text","replace","iceparams","mediadesc","sessiondesc","data","pwd","ufrag","findLine","parseICEUfrag","parseICEPwd","line","substring","buildICEUfrag","frag","buildICEPwd","parseMID","parseMLine","parts","split","media","shift","port","proto","pop","fmt","buildMLine","mline","parseRTPMap","clockrate","channels","parseSCTPMap","sctpPort","protocol","streamCount","buildRTPMap","el","getAttribute","parseCrypto","tag","parseFingerprint","hash","fingerprint","parseFmtp","key","parseICECandidate","candidate","elems","foundation","component","toLowerCase","priority","ip","generation","tcptype","network","Math","random","toString","substr","buildICECandidate","cand","hasOwnAttribute","parseSSRC","desc","lines","parseRTCPFB","pt","params","parseExtmap","direction","uri","haystack","needle","sessionpart","j","findLines","needles","candidateToJingle","candidateFromJingle","isFirefox","parsePrimaryVideoSsrc","videoMLine","numSsrcs","ssrcs","map","ssrcInfo","filter","index","array","numGroups","ssrcGroups","primarySsrc","fidGroup","find","group","semantics","simGroup","generateSsrc","RandomUtil","randomInt","getSsrcAttribute","mLine","attributeName","ssrcLine","attribute","parseGroupSsrcs","ssrcGroup","parseInt","ssrcStr","getMedia","sdp","getUfrag","ufragLines","startsWith","preferVideoCodec","codecName","payloadType","rtp","codec","payload","payloadTypes","payloads","p","payloadIndex","unshift","stripVideoCodec","removePts","rtxApts","item","rtxPts","fmtp","config","allPts","Number","keepPts","rtcpFb","CHROME_EXTENSION_GENERIC_ERROR","CHROME_EXTENSION_INSTALLATION_ERROR","CHROME_EXTENSION_USER_GESTURE_REQUIRED","CHROME_EXTENSION_USER_CANCELED","CONSTRAINT_FAILED","ELECTRON_DESKTOP_PICKER_ERROR","ELECTRON_DESKTOP_PICKER_NOT_FOUND","FIREFOX_EXTENSION_NEEDED","GENERAL","NOT_FOUND","PERMISSION_DENIED","TRACK_IS_DISPOSED","TRACK_NO_STREAM_FOUND","UNSUPPORTED_RESOLUTION","NO_DATA_FROM_SOURCE","LOCAL_TRACK_STOPPED","TRACK_AUDIO_OUTPUT_CHANGED","TRACK_VIDEOTYPE_CHANGED","ALPHANUM","HEX_DIGITS","min","max","floor","randomElement","arr","randomAlphanumStr","result","randomHexDigit","randomHexString","len","ret","getConnectionPluginDefinition","base","connection","ConnectionPluginListenable","usesAdapter","AVAILABLE_DEVICES_POLL_INTERVAL_TIME","OLD_GUM_DEFAULT_RESOLUTION","OLD_GUM_DEFAULT_DEVICES","DEFAULT_CONSTRAINTS","aspectRatio","height","ideal","audio","SS_DEFAULT_FRAME_RATE","audioOutputDeviceId","audioOutputChanged","disableAP","disableAEC","disableNS","disableAGC","disableHPF","featureDetectionAudioEl","document","createElement","isAudioOutputDeviceChangeAvailable","setSinkId","availableDevices","availableDevicesPollTimer","initEnumerateDevicesWithCallback","navigator","mediaDevices","enumerateDevices","then","setResolutionConstraints","isNewStyleConstraintsSupported","resolution","Resolutions","width","maxWidth","maxHeight","getConstraints","um","isEdge","optional","cameraDeviceId","deviceId","sourceId","facingMode","CameraFacingMode","USER","minFps","maxFps","fps","minFrameRate","maxFrameRate","micDeviceId","echoCancellation","googEchoCancellation","googAutoGainControl","googNoiseSuppression","googHighpassFilter","googNoiseSuppression2","googEchoCancellation2","googAutoGainControl2","isChrome","getSSConstraints","mozMediaSource","mediaSource","frameRate","errmsg","bandwidth","firefox_fake_device","fake","newGetConstraints","parse","desktopStream","chromeMediaSource","screen","chromeMediaSourceId","getTrackSSConstraints","desktopSharingFrameRate","setAvailableDevices","audioTracksReceived","getAudioTracks","videoTracksReceived","getVideoTracks","compareAvailableMediaDevices","newDevices","mediaDeviceInfoToJSON","sort","kind","groupId","label","facing","sendDeviceListToAnalytics","deviceList","audioInputDeviceCount","d","audioOutputDeviceCount","videoInputDeviceCount","videoOutputDeviceCount","device","onMediaDevicesListChanged","devicesReceived","videoInputDevices","audioInputDevices","videoInputDevicesWithEmptyLabels","audioInputDevicesWithEmptyLabels","handleLocalStream","streams","audioStream","videoStream","res","audioVideo","audioTracks","MediaStream","addTrack","videoTracks","desktop","sourceType","track","videoType","defaultSetVideoSrc","element","srcObjectPropertyName","src","jitsiObjectURL","URL","createObjectURL","RTCUtils","clearInterval","usesNewGumFlow","RTCPeerConnectionType","RTCPeerConnection","attachMediaStream","wrapAttachMediaStream","srcObject","getStreamID","getTrackID","isOpera","isNWJS","isElectron","jitsiRemoteId","_initPCConstraints","screenObtainer","getUserMediaWithConstraints","bind","isDeviceListAvailable","ds","debug","updateKnownDevices","pds","supportsDeviceChangeEvent","setInterval","pcConstraints","googHighStartBitrate","googPayloadPadding","googScreencastMinBitrate","googCpuOveruseDetection","googCpuOveruseEncodeUsage","googCpuUnderuseThreshold","googCpuOveruseThreshold","useIPv6","googIPv6","p2pPcConstraints","disableSuspendVideo","googSuspendBelowMinBitrate","Promise","resolve","reject","getUserMedia","catch","umDevices","isSupported","supportsVideo","desktopSharingExtensionExternalInstallation","desktopSharingSources","gumOptions","obtainStream","trackOptions","requestingDesktop","includes","gumPromise","supportsMediaStreamConstructor","_getAudioAndVideoStreams","_getAudioAndVideoStreamsSeparately","missingTracks","_getMissingTracks","avStream","stopMediaStream","_parseDesktopSharingOptions","requestedDevices","missingDevices","audioDeviceRequested","videoDeviceRequested","deviceGUM","obtainDevices","successCallback","errorCallback","mediaStreamsMetaData","maybeRequestDesktopDevice","isDesktopDeviceRequsted","_newGetDesktopMedia","maybeCreateAndAddDesktopTrack","maybeRequestCaptureDevices","requestedCaptureDevices","_newGetUserMediaWithConstraints","maybeCreateAndAddAVTracks","Boolean","deviceType","mediaStream","getTracks","release","url","revokeObjectURL","isDeviceChangeAvailable","deviceData","enable","c","hasOwnProperty","rtcUtils","origAttachMediaStream","apply","arguments","getAudioOutputDevice","ex","promise","_callStatsUserName","_machineId","localStorage","getLocalStorage","getItem","generateCallStatsUserName","setItem","machineId","generateJitsiMeetId","sessionId","removeItem","username","UsernameGenerator","generateUsername","jitsiMeetId","generateUniqueId","storage","_p8","WRONG_STATE","peerConnectionIdCounter","rtcTrackIdCounter","createLocalTracks","tracksInfo","newTracks","trackInfo","safeCounterIncrement","localTrack","rtcId","_newCreateLocalTracks","mediaStreamMetaData","metaData","getSettings","RTC","conference","peerConnections","localTracks","_channel","_channelOpen","_lastN","_lastNEndpoints","_maxFrameHeight","_pinnedEndpoint","_selectedEndpoints","_lastNChangeListener","_onLastNChanged","_updateAudioOutputForAudioTracks","wsUrl","_channelOpenListener","sendPinnedEndpointMessage","sendSelectedEndpointsMessage","sendReceiverVideoConstraintMessage","_selectedEndpoint","sendSetLastNMessage","lastNEndpoints","oldLastNEndpoints","leavingLastNEndpoints","enteringLastNEndpoints","isInLastN","mode","close","maxFrameHeight","ids","signaling","iceConfig","isP2P","getPCConstraints","abtestSuspendVideo","setSuspendVideo","addPermanentProperties","newConnection","traceablePeerConnection","localVideo","getLocalTracks","localAudio","tracks","getType","remoteTracks","pcRemoteTracks","getRemoteTracks","concat","mutePromises","audioTrack","mute","unmute","all","pos","owner","removedTracks","pcRemovedTracks","removeRemoteTracks","audioLevel","getTrackBySSRC","isAudioTrack","setAudioLevel","to","sendMessage","remoteAudioTracks","setAudioOutput","obtainMediaPromise","newObtainAudioAndVideoPermissions","obtainAudioAndVideoPermissions","some","_isReceivingData","eventType","getDeviceAvailability","elSelector","getCurrentlyAvailableMediaDevices","getEventDataForActiveDevice","setAudioOutputDevice","isUserStreamById","streamId","isDesktopSharingEnabled","parsePrimarySSRC","parseSecondarySSRC","_getSSRCCount","MLineWrap","ssrcNumber","attrName","ssrcObj","ssrcNum","primarySSRC","msid","findGroup","fecGroup","findGroupByPrimarySSRC","videoSSRCs","getSSRCs","ssrcGroupInfo","secondarySsrc","groupInfo","oldSSRC","newSSRC","SdpTransformWrap","rawSDP","parsedSDP","selectedMLine","STATUS_AVAILABLE","STATUS_UNDEFINED","STATUS_BUSY","STATE_ON","STATE_OFF","STATE_PENDING","STATE_RETRYING","STATE_FAILED","ERROR_NO_CONNECTION","ERROR_SESSION_EXISTS","LOCAL_STATS_UPDATED","REMOTE_STATS_UPDATED","CHAT_ERROR","CONFERENCE_DESTROYED","CONFERENCE_MAX_USERS","CONNECTION_ERROR","NOT_ALLOWED_ERROR","INCOMPATIBLE_SERVER_VERSIONS","PASSWORD_NOT_SUPPORTED","SETUP_FAILED","VIDEOBRIDGE_NOT_AVAILABLE","order","DEFAULT_NOT_IN_LAST_N_TIMEOUT","DEFAULT_RTC_MUTE_TIMEOUT","DEFAULT_RESTORING_TIMEOUT","ParticipantConnectionStatus","ACTIVE","INACTIVE","INTERRUPTED","RESTORING","ParticipantConnectionStatusHandler","isConnectionActiveByJvb","isRestoringTimedout","isVideoMuted","isVideoTrackFrozen","supportsVideoMuteOnConnInterrupted","rtc","trackTimers","connStatusFromJvb","outOfLastNTimeout","rtcMuteTimeout","rtcMutedTimestamp","enteredLastNTimestamp","restoringTimers","_onEndpointConnStatusChanged","onEndpointConnStatusChanged","_onP2PStatus","refreshConnectionStatusForAll","_onTrackRtcMuted","onTrackRtcMuted","_onTrackRtcUnmuted","onTrackRtcUnmuted","_onRemoteTrackAdded","onRemoteTrackAdded","_onRemoteTrackRemoved","onRemoteTrackRemoved","_onSignallingMuteChanged","onSignallingMuteChanged","_onLastNValueChanged","participantIds","clearTimeout","clearRtcMutedTimestamp","endpointId","isActive","Date","now","myUserId","figureOutConnectionStatus","participant","newStatus","getConnectionStatus","getId","_setConnectionStatus","status","remoteTrack","getParticipantId","hasAnyVideoRTCMuted","hasAnyVideoTrackWebRTCMuted","timeout","_getVideoFrozenTimeout","participants","getParticipants","getParticipantById","inP2PMode","isP2PActive","isRestoringTimedOut","_isRestoringTimedout","audioOnlyMode","getLastN","isConnActiveByJvb","newState","_getNewStateForP2PMode","_getNewStateForJvbMode","_clearRestoringTimer","_changeConnectionStatus","leavingLastN","enteringLastN","rTimer","setTimeout","isMuted","E2E_RTT_CHANGED","CHROME","OPERA","FIREFOX","INTERNET_EXPLORER","EDGE","SAFARI","NWJS","ELECTRON","REACT_NATIVE","UNKNOWN","WEBAUDIO_ANALYZER_FFT_SIZE","WEBAUDIO_ANALYZER_SMOOTING_TIME","AudioContext","webkitAudioContext","context","suspend","timeDomainDataToAudioLevel","samples","maxVolume","parseFloat","toFixed","animateLevel","newLevel","lastLevel","diff","LocalStatsCollector","interval","intervalId","intervalMilis","isLocalStatsSupported","resume","analyser","createAnalyser","smoothingTimeConstant","fftSize","createMediaStreamSource","connect","self","Uint8Array","frequencyBinCount","getByteTimeDomainData","AUDIO_LEVEL","BEFORE_DISPOSED","BYTE_SENT_STATS","CONNECTION_STATS","currentExecutingScript","async","prepend","relativeURL","loadCallback","tagName","script","referenceNode","getElementsByTagName","scriptEl","scriptSrc","baseScriptSrc","lastIndexOf","onload","parentNode","insertBefore","appendChild","createConnection","token","bosh","conn","Strophe","Connection","maxRetries","XMPP","disconnectInProgress","connectionTimes","authenticatedUser","_initStrophePlugins","caps","clientNode","initFeaturesList","$","disconnect","addFeature","disableRtx","supportsRtx","enableLipSync","rayo","credentials","msg","performance","statusStr","getStatusString","Status","CONNECTED","ATTACHED","useStunTurn","p2p","jingle","getStunAndTurnCredentials","jid","pingJid","domain","ping","hasPingSupport","hasPing","startInterval","password","connected","getResourceFromJid","CONNFAIL","anonymousConnectionFailed","connectionFailed","lastErrorMsg","DISCONNECTED","stopInterval","wasIntentionalDisconnect","errMsg","_getConnectionFailedReasonDetails","lastErrorStatus","getLastErrorStatus","AUTHFAIL","connectionHandler","attaching","attach","sid","rid","hosts","anonymousdomain","configDomain","location","search","hostname","_connect","mucNickname","getNodeFromJid","roomjid","muc","cfgNickname","useNicks","nick","emuc","createRoom","getLog","dial","moderate","setMute","eject","sessions","ev","flush","evType","sync","jvb","iceServers","defaultStunServers","urls","p2pStunServers","stunServers","iceTransportPolicy","initEmuc","initJingle","initStropheUtil","initPing","initRayo","initStropheLogger","deploymentInfo","shard","_proto","lastResponseHeaders","headersArr","trim","headers","header","shard_changed","suspend_time","getPingSuspendTime","CONNECTION_DROPPED_ERROR","OTHER_ERROR","SERVER_ERROR","parser","packet2JSON","xmlElement","nodes","from","children","child","node","attr","getText","xmlunescape","json2packet","packet","t","up","filterNodeFromPresenceJSON","pres","nodeName","JITSI_MEET_MUC_TYPE","tryParseJSONAndVerify","jsonString","json","ChatRoom","getBareJidFromJid","myroomjid","members","presMap","presHandlers","joined","role","focusMucJid","noBridgeAvailable","moderator","initPresenceMap","lastPresences","phoneNumber","phonePin","participantPropertyListener","locked","transcriptionStatus","xns","userAgent","xmlns","enableStatsID","addVideoInfoToPresence","userRegion","allocateConferenceFocus","sendPresence","fromJoin","$pres","send","getInfo","$iq","NS","DISCO_INFO","sendIQ","getForm","form","formSubmit","member","statusEl","textContent","hasStatusUpdate","xElement","getElementsByTagNameNS","mucUserItem","affiliation","isFocus","getFocusUserJid","isHiddenDomain","hiddenDomain","fromHiddenDomain","presence","xEl","querySelector","remove","extractIdentityInformation","identity","userInfo","user","botType","statsID","newRole","_initFocus","memberOfThis","displayName","displayJids","att","phone","pin","processNode","mucJid","tagHandlers","elementName","nickname","$msg","subject","skipEvents","onMucMemberLeft","reasonSelect","doLeave","isSelfPresence","isKick","membersKeys","onParticipantLeft","txt","subjectText","stamp","dateParts","match","discoRoomInfo","jsonMessage","parsedJson","toDomain","getDomainFromJid","kickIQ","onSuccess","onError","onNotSupported","formsubmit","removeFromPresence","handlerIdx","peerJid","sendVideoInfoPresence","sendAudioInfoPresence","addToPresence","addAudioInfoToPresence","mutedNode","videoTypeNode","isSipGatewayEnabled","number","hangup","iqToFocus","iq","onMucLeft","doReject","ON","OFF","AuthenticationEvents","IDENTITY_UPDATED","PENDING","ENDED","SDP","mediaI","session","raw","failICE","removeTcpCandidates","removeUdpCandidates","getMediaSsrcMap","mediaSSRCs","tmp","mediaindex","mid","linessrc","idx","containsSSRC","medias","mangle","newdesc","rtpmap","removeSessionLines","prefix","removeMediaLines","toJingle","elem","thecreator","k","assrcline","creator","amidline","attrs","afmtpline","rtcpFbToJingle","crypto","required","ssrcMap","availableSsrc","ssrcParameters","ssrcSdpLine","kv","v","ssrcGroupLines","s","ridLines","rids","ridLine","ridInfo","unifiedSimulcast","senders","transportToJingle","sctpmap","sctpAttrs","fingerprints","setup","payloadtype","rtcpFbFromJingle","each","fromJingle","groups","contents","_","content","jingle2media","sctp","setAttribute","PEER_MUTED_CHANGED","PEER_VIDEO_TYPE_CHANGED","trackHandler2Prop","addMediaStreamInactiveHandler","oninactive","JitsiTrack","streamInactiveHandler","trackMediaType","containers","disposed","_streamInactiveHandler","_setStream","videoTrack","_setHandler","container","_onTrackAttach","_maybeFireTrackAttached","_attachTTFMTracker","active","getStreamId","trackId","getTrackId","isVideoTrack","ENVIRONMENT","RecordingResult","AUDIO_WEBM","AUDIO_OGG","TrackRecorder","recorder","startTime","startRecorder","trackRecorder","stopRecorder","determineCorrectFileType","MediaRecorder","isTypeSupported","AudioRecorder","jitsiConference","recorders","fileType","isRecording","instantiateTrackRecorder","updateNames","originalStream","getOriginalStream","createEmptyStream","mimeType","ondataavailable","dataEvent","removeTrack","recorderToRemove","newName","getDisplayName","console","download","blob","Blob","a","body","style","href","click","getRecordingResults","getFileType","getFocusRecordingUpdate","jibriStatus","recordingMode","sessionID","getHiddenDomainUpdate","liveStreamViewURLContainer","liveStreamViewURL","modeContainer","sessionIDContainer","getSessionIdFromIq","response","jibri","getSessionId","sessionIdContainer","isFromFocus","PERMISSION_PROMPT_IS_SHOWN","default","Logger","USER_MEDIA_PERMISSION_PROMPT_TIMEOUT","getLowerResolution","resName","r","getAnalyticsAttributesFromOptions","video_requested","_mergeNamespaceAndModule","JitsiMeetJS","assign","version","JitsiConnection","constants","participantConnectionStatus","recording","sipVideoGW","JitsiTranscriptionStatus","events","connectionQuality","e2eping","E2ePingEvents","errors","JitsiTrackErrors","errorTypes","logLevels","levels","enableAnalyticsLogging","enableWindowOnErrorHandler","getGlobalOnErrorHandler","aprops","logObject","isWebRtcSupported","setLogLevel","level","setLogLevelById","addGlobalLogTransport","globalTransport","addGlobalTransport","removeGlobalLogTransport","removeGlobalTransport","firePermissionPromptIsShownEvent","originalOptions","promiseFulfilled","JitsiMediaDevices","emitEvent","getName","mStream","currentlyAvailableMediaDevices","_setRealDeviceIdFromDeviceList","oldResolution","newResolution","isMultipleAudioInputSupported","isCollectingLocalStats","lineno","colno","util","AuthUtil","getTokenAuthUrl","urlPattern","roleUpgrade","appID","errType","setToken","initJitsiConference","getConnectionTimes","feature","submit","removeFeature","JINGLE_SI_TIMEOUT","JitsiConference","eventManager","_init","componentsVersions","jvbJingleSession","lastDominantSpeaker","dtmfManager","somebodySupportsDTMF","authEnabled","startAudioMuted","startVideoMuted","startMutedPolicy","isMutedByFocus","wasStopped","avgRtpStatsReporter","avgRtpStatsN","isJvbConnectionInterrupted","speakerStatsCollector","deferredStartP2PTask","delay","backToP2PDelay","isNaN","isP2PConnectionInterrupted","p2pJingleSession","videoSIPGWHandler","room","recordingManager","setupXMPPListeners","_onIceConnectionInterrupted","_onIceConnectionRestored","_onIceConnectionEstablished","updateDeviceAvailability","rttMonitor","setupRTCListeners","_peerConnStatusRtcMuteTimeout","_peerConnStatusOutOfLastNTimeout","windowLocation","enableDisplayNameInStats","callStatsCustomScriptUrl","setupChatRoomListeners","setupStatisticsListeners","enableTalkWhileMuted","setLastN","channelLastN","jvb121Status","p2pDominantSpeakerDetection","setLocalParticipantProperty","_maybeSetSITimeout","authenticateAndUpgradeRole","isJoined","isP2PEnabled","enabled","isP2PTestModeEnabled","testing","p2pTestMode","leave","onLocalTrackRemoved","closeBridgeChannel","onMemberLeft","getJid","getConnection","isAuthEnabled","isLoggedIn","authIdentity","getAuthLogin","isExternalAuthEnabled","getExternalAuthUrl","urlForPopup","getPopupLoginUrl","getLoginUrl","getLocalAudioTrack","getLocalVideoTrack","eventId","addCommandListener","command","addPresenceListener","removeCommandListener","removePresenceListener","sendTextMessage","sendPrivateTextMessage","sendPrivateMessage","sendCommand","sendCommandOnce","removeCommand","setDisplayName","setSubject","isModerator","getTranscriber","transcriber","localAudioTracks","getTranscriptionStatus","localVideoTrack","replaceTrack","_fireAudioLevelChangeEvent","activeTpc","getActivePeerConnection","_fireMuteChangeEvent","muteParticipant","_setConference","removeLocalTrack","muteHandler","audioLevelHandler","oldTrack","newTrack","_doReplaceTrack","_setupNewTrack","replaceTrackPromises","getTrack","addLocalTrack","setAudioMute","setVideoMute","_addLocalTrackAsUnmute","addAsUnmutePromises","addTrackAsUnmute","_removeLocalTrackAsMute","removeAsMutePromises","removeTrackAsMute","getRole","lock","lockRoom","unlock","selectParticipant","selectParticipants","selectEndpoints","pinParticipant","pinEndpoint","lastN","isInteger","n","RangeError","isVideoActive","setMediaTransferActive","getParticipantCount","countHidden","isHidden","kickParticipant","kick","_maybeClearSITimeout","_sessionInitiateTimeout","onMemberJoined","_role","_botType","getFeatures","_supportsDTMF","features","updateDTMFSupport","_maybeStartOrStopP2P","_onMemberBotTypeChanged","peers","botParticipant","onLocalRoleChanged","onUserRoleChanged","onDisplayNameChanged","_displayName","_tracks","emitter","activeTPC","onCallAccepted","answer","setAnswer","onTransportInfo","transportInfo","addIceCandidates","removedTrack","_onIncomingCallP2P","jingleSession","jingleOffer","rejectReason","getMemberRole","remoteJid","reasonDescription","errorMsg","supportsP2P","_rejectIncomingCall","_acceptP2PIncomingCall","onIncomingCall","description","_acceptJvbIncomingCall","initialize","_setBridgeChannel","acceptOffer","_suspendMediaTransferForJvbConnection","offerIq","pc","webSocket","first","bridgeChannelType","openBridgeChannel","supportsDataChannels","initializeBridgeChannel","terminate","sendSessionTerminate","onCallEnded","reasonCondition","reasonText","forceJvb121","p2pFailed","_stopP2PSession","onSuspendDetected","supportsDTMF","isDTMFSupported","sendTones","tones","duration","pause","peerConnection","startRecording","stopRecording","isSIPCallingSupported","startTranscriber","stopTranscriber","getPhoneNumber","getPhonePin","getConnectionState","setStartMutedPolicy","policy","getStartMutedPolicy","isStartAudioMuted","isStartVideoMuted","getLogs","getJingleLog","metadata","time","ua","getXmppLog","removeLocalParticipantProperty","getLocalParticipantProperty","property","prop","overallFeedback","detailedFeedback","remoteUserId","getLocalSSRC","getSSRC","getUsageLabel","_isFocus","_fireIncompatibleVersionsEvent","sendEndpointMessage","sendChannelMessage","broadcastEndpointMessage","sendThroughVideobridge","messageType","messageToSend","isConnectionInterrupted","_onIceConnectionFailed","initiator","isInitiator","remoteID","getStatsID","_addRemoteJVBTracks","_addRemoteTracks","_addRemoteP2PTracks","logName","p2pEstablishmentDuration","establishmentDuration","jvbEstablishmentDuration","done","forceJVB121Ratio","establishmentDurationDiff","_setP2PStatus","_removeRemoteJVBTracks","_maybeClearDeferredStartP2P","_removeRemoteTracks","_removeRemoteP2PTracks","sessionNickname","_resumeMediaTransferForJvbConnection","_startP2PSession","newP2PJingleSession","invite","userLeftEvent","peerCount","hasBotPeer","shouldBeInP2P","peer","myId","peersId","wasP2PEstablished","getP2PConnectionState","startP2PSession","stopP2PSession","getSpeakerStats","getStats","setReceiverVideoConstraint","createVideoSIPGWSession","sipAddress","AverageStatReport","count","sum","nextValue","report","calculate","ConnectionAvgStats","_n","_sampleIdx","_avgRTT","_avgRemoteRTTMap","_avgRtpStatsReporter","_avgEnd2EndRTT","_onConnectionStats","_calculateAvgStats","_conference","_onUserLeft","_onRemoteStatsUpdated","_processRemoteStats","supportsRTTStatistics","transport","addNext","batchReport","localCandidateType","remoteCandidateType","appendReport","jvbEnd2EndRTT","jvbStatsMonitor","avgRemoteRTT","_calculateAvgRemoteRTT","avgLocalRTT","_resetAvgStats","remoteAvg","avg","reset","validData","jvbRTT","rttAvg","clear","AvgRTPStatsReporter","_avgAudioBitrateUp","_avgAudioBitrateDown","_avgVideoBitrateUp","_avgVideoBitrateDown","_avgBandwidthUp","_avgBandwidthDown","_avgPacketLossTotal","_avgPacketLossUp","_avgPacketLossDown","_avgRemoteFPS","_avgRemoteScreenFPS","_avgLocalFPS","_avgLocalScreenFPS","_avgRemoteCameraPixels","_avgRemoteScreenPixels","_avgLocalCameraPixels","_avgLocalScreenPixels","_avgCQ","_onLocalStatsUpdated","_onP2PStatusChanged","p2pStatsMonitor","_onJvb121StatusChanged","oldStatus","_resetAvgJvbStats","confSize","bitrate","packetLoss","framerate","upload","supportsBandwidthStatistics","total","_calculateAvgVideoFps","_calculateAvgVideoPixels","peerResolutions","peerPixelsSum","myID","peerID","videosResolution","peerAvgPixels","_calculatePeerAvgVideoPixels","videos","getTracksByMediaType","peerSsrcCount","peerSsrcPixels","peerFpsSum","videosFps","peerAvgFPS","_calculatePeerAvgVideoFps","peerSsrcFps","BrowserCapabilities","getVersion","isSafariWithWebrtc","isSafari","isVersionLessThan","ondevicechange","usesUnifiedPlan","getDisplayMedia","capabilitiesDB","isUsingIFrame","browserInfo","capabilitiesByVersion","browserCapabilities","capabilities","isVersionGreaterThan","_capabilities","iframeCapabilities","audioIn","audioOut","screenSharing","videoIn","videoOut","bowserNameToJitsiName","_detectElectron","_detectNWJS","_detectReactNative","product","_detect","detectors","BrowserDetection","detectedBrowserInfo","_name","_version","bowser","compareVersions","String","compareVersion","MAX_CACHE_SIZE","AnalyticsAdapter","analyticsHandlers","cache","permanentProperties","conferenceName","setAnalyticsHandlers","_sendEvent","_verifyRequiredFields","objectType","containerType","objectId","_maybeCacheEvent","_appendPermanentProperties","names","suffix","wrtcFuncNames","createOffer","createAnswer","setLocalDescription","setRemoteDescription","addIceCandidate","iceConnectionFailure","signalingError","applicationLog","fabricEvent","fabricHold","fabricResume","audioMute","audioUnmute","videoPause","videoResume","fabricUsageEvent","fabricStats","fabricTerminated","screenShareStart","screenShareStop","dominantSpeaker","activeDeviceList","DEFAULT_REMOTE_USER","reportType","ERROR","EVENT","MST_WITH_USERID","_fabrics","backend","backendInitialized","atLeastOneFabric","defaultInstance","fabrics","hasFabric","_addNewFabric","_emptyReportQueue","csInstance","defaultConfID","defaultPC","reportsQueue","errorData","_reportError","eventData","sendFabricEvent","associateMstWithUserID","callStatsId","_error","reportError","theBackend","tryCatchMethods","methodName","originalMethod","theArguments","debugMethods","originalReportError","call","exception","CallStatsBackend","callstats","_traceAndCatchBackendCalls","userID","configParams","applicationVersion","_initCallback","attachWifiStatsHandler","addresses","_reportEvent","conferenceID","sendUserFeedback","fabricAttributes","remoteEndpointType","endpointType","server","addNewFabric","fabricUsage","multiplex","_addNewFabricCallback","success","streamEndpointId","KEYS_BY_BROWSER_TYPE","browsers","calculatePacketLoss","lostPackets","totalPackets","round","SsrcStats","loss","setLoss","setResolution","addBitrate","resetBitrate","setFramerate","ConferenceStats","StatsCollector","statsInterval","_browserType","_usesPromiseGetStats","_getStatValue","_defineNewGetStatValueMethod","_defineGetStatValueMethod","baselineAudioLevelsReport","currentAudioLevelsReport","currentStatsReport","previousStatsReport","audioLevelsIntervalId","conferenceStats","audioLevelsIntervalMilis","statsIntervalId","statsIntervalMilis","ssrc2stats","startAudioLevelStats","results","processNewAudioLevelReport","processAudioLevelReport","supportsRtpStatistics","processNewStatsReport","processStatsReport","keyFromName","itemStatByKey","stat","pair","getNonNegativeStat","getStatValue","byteSentStats","receiveBandwidth","sendBandwidth","localip","conferenceStatsTransport","state","selected","local","localCandidateId","remote","remoteCandidateId","ipAddress","portNumber","candidateType","msType","remoteAddress","localAddress","before","ssrcIds","isRemote","remoteSource","ssrcStats","isDownloadStream","packetsNow","packetsBefore","packetsDiff","packetsLostNow","packetsLostBefore","packetsLostDiff","packetsTotal","packetsLost","bytesReceivedNow","bytesReceivedBefore","bytesReceived","bytesSent","nowBytesTransmitted","timeMs","timestamp","bitrateReceivedKbps","bitrateSentKbps","_processAndEmitReport","bitrateDownload","bitrateUpload","resolutions","framerates","audioBitrateDownload","audioBitrateUpload","videoBitrateDownload","videoBitrateUpload","userResolutions","userFramerates","pow","getNonNegativeValue","_calculateBitrate","fieldName","bytesNow","bytesBefore","bytesProcessed","bitrateKbps","nominated","availableIncomingBitrate","availableOutgoingBitrate","remoteUsedCandidate","localUsedCandidate","remoteIpAddress","remotePort","localIpAddress","localPort","localIp","networkType","currentRoundTripTime","framerateMean","frameHeight","frameWidth","framesPerSecond","framesSent","numberOfFramesSinceBefore","trackIdentifier","getSsrcByTrackId","Constants","ComponentsVersions","FOCUS_COMPONENT","VIDEOBRIDGE_COMPONENT","XMPP_SERVER_COMPONENT","versions","processPresence","mucResource","componentName","getComponentVersion","STATS_MESSAGE_TYPE","kSimulcastFormats","layers","target","MAX_TARGET_BITRATE","startBitrate","videoBitrateCap","getTarget","simulcast","millisSinceStart","simulcastFormat","f","targetHeight","pixels","rampUp","MAX_SAFE_INTEGER","ConnectionQuality","_localStats","_lastConnectionQualityUpdate","_remoteStats","_timeIceConnected","_timeVideoUnmuted","_timeLastBwCapRemoved","_updateLocalConnectionQuality","_broadcastLocalStats","_updateRemoteStats","_updateLocalStats","_maybeUpdateUnmuteTime","resolutionName","quality","isSimulcastOn","newVideoBitrateCap","bandwidthLimiter","getBandwidthLimit","maxIncreasePerSecond","prevConnectionQuality","diffSeconds","updateLocalConnectionQuality","_calculateConnectionQuality","E2E_PING_REQUEST","E2E_PING_RESPONSE","ParticipantWrapper","requests","lastRequestId","clearIntervals","sendRequest","handleResponse","maybeSendAnalytics","isDataChannelOpen","pingInterval","pingIntervalMs","analyticsInterval","analyticsIntervalMs","requestId","requestMessage","timeSent","request","Infinity","getProperty","E2ePing","participantJoined","participantLeft","messageReceived","dataChannelOpened","participantWrapper","handleRequest","onLoginSuccessful","roomPassword","canceled","rejectPromise","process","authenticate","authenticationError","connectionError","cancel","MucConnectionPlugin","rooms","onPresence","onPresenceUnavailable","onPresenceError","onMessage","onMute","roomJid","createNonAnonymousRoom","addConnectionPlugin","createExpBackoffTimer","step","Moderator","xmppService","getNextTimeout","getNextErrorTimeout","externalAuthEnabled","sipGatewayEnabled","call_control","origin","attachEvent","resource","setFocusUserJid","focusJid","focusUserJid","getFocusComponent","focusComponent","focus","createConferenceIq","machineUID","enforcedBridge","enableTcc","enableRemb","minParticipants","audioPacketDelay","minBitrate","octo","probability","openSctp","stereo","useRoomAsSharedDocumentName","parseSessionId","resultIq","parseConfigOptions","authenticationEnabled","_allocateConferenceFocusSuccess","_allocateConferenceFocusError","invalidSession","reservationErr","errorCode","errorTextNode","waitMs","retrySec","errorIq","urlCallback","failureCallback","_getLoginUrl","popup","urlCb","failureCb","str","decodeURIComponent","logout","logoutUrl","JingleConnectionPlugin","jvbIceConfig","p2pIceConfig","mediaConstraints","offerToReceiveAudio","offerToReceiveVideo","onJingle","fromJid","ack","sess","startMuted","audioMuted","videoMuted","modifyContents","replaceTransport","successTime","sendTransportReject","addRemoteStream","removeRemoteStream","me","onTerminated","iceservers","dict","credential","updateLog","IQ_TIMEOUT","DEFAULT_MAX_STATS","JingleSessionPC","jingleContents","videoContents","localJid","_iceCheckingStartedTimestamp","_gatheringStartedTimestamp","_localVideoActive","_remoteVideoActive","_gatheringReported","lasticecandidate","closed","signalingLayer","modificationQueue","queue","_processQueueTasks","wasConnected","actionName","isReconnect","wasstable","webrtcIceUdpDisable","webrtcIceTcpDisable","pcOptions","gatherStats","maxstats","disableSimulcast","disableH264","preferH264","_abtestSuspendVideoEnabled","enableFirefoxSimulcast","enableLayerSuspension","createPeerConnection","onicecandidate","phase","sendIceCandidate","onsignalingstatechange","signalingState","connectionState","oniceconnectionstatechange","_assertNotEnded","iceConnectionState","reconnect","iceStarted","onnegotiationneeded","setChatRoom","setIsSelected","isSelected","_renegotiate","finishedCallback","localSDP","localDescription","ice","sdpMLineIndex","jcand","errorMesssage","usedrip","dripContainer","sendIceCandidates","candidates","initiatorJid","cands","sdpMid","fingerprintLine","newJingleErrorHandler","iceCandidates","rtcCandidate","RTCIceCandidate","outerHTML","workFunction","iceCandidate","ssrcElement","setSSRCOwner","i3","ssrcInfoElement","generateRecvonlySsrc","failure","setOfferAnswerCycle","sendSessionAccept","offerSdp","sendSessionInitiate","tree","jingleAnswer","jingleOfferAnswerIq","newRemoteSdp","_processNewJingleOfferIq","oldLocalSdp","sendContentModify","newLocalSdp","notifyMySSRCUpdate","_onJingleFatalError","jingleOfferElem","originalOffer","clone","sendTransportAccept","accept","responder","responderJid","videoTransferActive","newSendersValue","sessionModify","transportAccept","medialines","transportReject","sessionTerminate","sourceAddElem","currentRemoteSdp","addSsrcInfo","i1","i2","_addOrRemoveRemoteStream","isAdd","logPrefix","readSsrcInfo","remoteDescription","addOrRemoveSsrcInfo","_parseSsrcInfoFromSourceAdd","_parseSsrcInfoFromSourceRemove","_processRemoteAddSource","_processRemoteRemoveSource","task","remoteSdp","removeSsrcInfo","optionalRemoteSdp","RTCSessionDescription","_initiatorRenegotiate","_responderRenegotiate","offer","clearRecvonlySsrc","shouldRenegotiate","newLocalSDP","sourceRemoveElem","ssrcLines","operationName","oldSDP","currentLocalSDP","sdpDiff","addedMedia","getNewMedia","removedMedia","_addRemoveTrackAsMuteUnmute","isMute","oldLocalSDP","tpcOperation","removeTrackMute","addTrackUnmute","_verifyNoSSRCChanged","audioActive","videoActive","logAudioStr","logVideoStr","isSessionActive","audioActiveChanged","setAudioTransferActive","pcVideoActiveChanged","setVideoTransferActive","newVideoSenders","parseVideoSenders","_modifyRemoteVideoActive","remoteVideoSenders","isRemoteVideoActive","newSDP","sdpDiffer","removedAnySSRCs","containsNewSSRCs","errorElSel","errResponse","code","errorReasonSel","errorMsgSel","abTesting","enableSuspendVideoTest","_getInitiatorJid","integerHash","string","char","charCodeAt","abs","JingleSession","doInitialize","arrayEquals","array1","array2","l","equals","SDPDiffer","mySDP","otherSDP","myMedias","othersMedias","newMedia","myMedia","othersMediaIdx","othersMedia","myContainMsid","newContainMsid","matched","mySsrcGroup","otherSsrcGroup","modify","sdpMediaSsrcs","modified","mediaSsrc","nv","SignalingLayerImpl","ssrcOwners","chatRoom","oldChatRoom","_audioMuteHandler","_videoMuteHandler","_videoTypeHandler","getMediaPresenceInfo","TypeError","SignalingLayer","resetLastErrorStatusRegExpr","lastErrorStatusRegExpr","trace","LogLevel","WARN","DEBUG","test","errStatusCapture","exec","FATAL","CONNECTING","AUTHENTICATING","DISCONNECTING","PING_INTERVAL","PING_TIMEOUT","PING_THRESHOLD","PING_TIMESTAMPS_TO_KEEP","PingConnectionPlugin","failedPings","pingExecIntervals","addNamespace","_addPingExecutionTimestamp","PING","getTime","pingIntervals","maxInterval","previousTS","currentInterval","RAYO_XMLNS","RayoConnectionPlugin","onRayo","roomPass","req","callResource","StropheLogger","rawInput","logIncoming","rawOutput","logOutgoing","stanza","IDENTITY_PROPERTIES","IDENTITY_PROPERTIES_FOR_COMPARE","HASH","compareIdentities","b","Caps","disco","versionToCapabilities","jidToVersion","_addChatRoom","_removeChatRoom","CAPS","_handleCaps","_onMucMemberLeft","_removeJidToVersionEntry","_generateVersion","_fixChatRoomPresenceMap","ver","identities","_identities","reduce","accumulatedValue","_features","b64_sha1","_notifyVersionChanged","oldVersion","JitsiConferenceEventManager","chatRoomForwarder","forward","setParticipantPropertyListener","setProperty","recorderSession","getError","getStatus","myJid","ts","_status","updated","isAudioAvailable","isVideoAvailable","_availableDevices","ignoreStartMuted","_onByteSentStatsReceived","EventEmitterForwarder","dest","srcEvent","Function","JitsiDTMFManager","dtmfSender","createDTMFSender","insertDTMF","JitsiParticipant","hidden","_jid","_id","_hidden","_statsID","_connectionStatus","_properties","jitsiTrack","isWebRTCTrackMuted","oldValue","_isMediaTypeMuted","Jvb121EventGenerator","_jvb121","evaluateStatus","SPEECH_DETECT_THRESHOLD","P2PDominantSpeakerDetection","_audioLevel","myUserID","BridgeChannel","_eventEmitter","_mode","ondatachannel","datachannel","channel","_handleChannel","ws","WebSocket","readyState","OPEN","_send","colibriClass","msgPayload","jsonObject","pinnedEndpoint","endpointIds","selectedEndpoints","maxFrameHeightPixels","onopen","onmessage","obj","dominantSpeakerEndpoint","endpoint","onclose","isOpen","JitsiLocalTrack","_constraints","_prevSetMuted","_facingMode","_trackEnded","_hasSentData","_testDataSent","_realDeviceId","_noDataFromSourceTimeout","_onDeviceListChanged","_onAudioOutputDeviceChanged","_initNoDataFromSourceHandlers","_onNoDataFromSourceError","_checkForCameraIssues","_clearNoDataFromSourceMuteResources","_fireNoDataFromSourceEvent","isReceivingData","storedMSID","getMSID","_queueSetMuted","setMuted","_setMuted","logMuteInfo","doesVideoMuteByStreamRemove","_removeStreamFromConferenceAsMute","_unregisterHandlers","_stopStream","streamOptions","getDeviceId","getCameraFacingMode","streamInfo","streamsInfo","cont","_addStreamToConferenceAsUnmute","_sendMuteStatus","detach","_bytesSent","trackSettings","_stopStreamInProgress","_switchCamera","RTCSignalingState","stable","haveLocalOffer","haveRemoteOffer","RTCIceGatheringState","new","gathering","complete","CNAME","ortcRTCPeerConnection","pcConfig","_bufferedIceCandidates","_closed","_dtlsTransport","_iceGatherer","_iceGatheringState","_resolveLocalIceGatheringPromise","_iceGatheringCompletePromise","_iceTransport","_localCapabilities","_localDescription","_localTrackInfos","_mids","_remoteDescription","_remoteStreams","_remoteTrackInfos","_sdpGlobalFields","_signalingState","_setIceGatherer","_setIceTransport","_setDtlsTransport","rtpSender","RTCRtpSender","getTrackById","_emitNegotiationNeeded","_updateAndEmitSignalingStateChange","rtpReceiver","_createLocalDescription","hasAttemptedOffer","getCapabilities","usePromise","selector","errback","_getStats","_setLocalDescription","_setRemoteDescription","sdpObject","localIceParameters","getLocalParameters","localIceCandidates","getLocalCandidates","localDtlsParameters","remoteDtlsParameters","getRemoteParameters","localCapabilities","localTrackInfos","address","ipVer","netType","sessionVersion","timing","msidSemantic","semantic","mids","algorithm","hasVideoRtx","codecs","addMediaSection","_sdpObject","mediaObject","iceUfrag","usernameFragment","icePwd","candidateObject","tcpType","endOfCandidates","preferredPayloadType","rtpObject","rate","clockRate","numChannels","encoding","parameters","paramFmtp","rtcpFeedback","fb","subtype","parameter","enableRtx","rtxSsrc","ext","headerExtensions","extension","preferredId","rtcpMux","rtcpRsize","yaeti","Event","dispatchEvent","sdpCandidate","sdpMIndex","sdpAttribute","relatedAddress","relatedPort","cname","degradationPreference","encodings","muxId","rtcp","compound","mux","reducedSize","codecPayloadType","codecCapability","maxptime","ptime","rtx","encrypt","preferredEncrypt","iceGatherer","iceTransport","rtpSenders","rtpReceivers","promises","sending","msGetStats","isAudio","datas","remoteCapabilities","_startIceAndDtls","currentRemoteSsrcs","newRemoteTrackInfos","addedRemoteStreams","addedRemoteTracks","removedRemoteTracks","streamRemoteId","trackRemoteId","isNewStream","RTCRtpReceiver","_getParametersForRtpReceiver","receive","_emitAddStream","_emitRemoveStream","_getParametersForRtpSender","dtlsTransport","RTCDtlsTransport","onstatechange","_emitConnectionStateChange","ondtlsstatechange","iceGatherOptions","gatherPolicy","RTCIceGatherer","_updateAndEmitIceGatheringStateChange","onlocalcandidate","_emitIceCandidate","errorText","gather","RTCIceTransport","_emitIceConnectionStateChange","onicestatechange","getNominatedCandidatePair","oncandidatepairchange","isLocalInitialAnswer","_handleLocalInitialAnswer","_handleLocalReAnswer","_emitBufferedIceCandidates","_sendMedia","_receiveMedia","isRemoteInitialOffer","_handleRemoteInitialOffer","_handleRemoteReOffer","remoteIceParameters","remoteIceCandidates","addRemoteCandidate","iceGatheringState","EventTarget","_sdp","_type","sdpTransform","write","extractCapabilities","codecsMap","parseFmtpConfig","headerExtension","duplicated","savedHeaderExtension","fecMechanisms","extractDtlsParameters","getFirstActiveMediaSection","extractIceCandidates","extractIceParameters","icelite","extractMids","midToKind","extractTrackInfos","infos","rtxMap","rtxSet","ssrcObject","getLocalCapabilities","filterWithCapabilities","localFullCapabilities","remoteRtxMap","remoteCodec","remoteCodecName","apt","localCodec","remoteParamName","remoteParamValue","localParamName","localParamValue","remoteFb","localFb","rtxCodec","remoteExtension","localExtension","remoteFecMechanism","localFecMechanism","fec","createErrorClass","klass","InvalidStateError","chromeExtInstalled","chromeExtUpdateRequired","gumFunction","CHROME_EXTENSION_POPUP_ERROR","CHROME_EXTENSION_IFRAME_ERROR","CHROME_EXTENSION_INLINE_ERROR","CHROME_EXTENSION_INLINE_NOT_SUPPORTED_ERROR","CHROME_NO_EXTENSION_ERROR_MSG","CHROME_USER_GESTURE_REQ_ERROR","CHROME_USER_CANCEL_EXTENSION_INSTALL","ScreenObtainer","intChromeExtPromise","desktopSharingChromeDisabled","desktopSharingChromeExtId","desktopSharingFirefoxDisabled","_createObtainStreamMethod","onFailure","JitsiMeetNW","obtainDesktopStream","jitsiError","obtainScreenOnElectron","supportsGetDisplayMedia","obtainScreenFromGetDisplayMedia","initChromeExtension","obtainScreenFromExtension","obtainScreenOnFirefox","obtainWebRTCScreen","JitsiMeetScreenObtainer","openDesktopPicker","desktopSharingChromeSources","streamType","onGetStreamResponse","streamCallback","failCallback","doGetStreamFromExtensionOptions","doGetStreamFromExtension","alert","handleExternalInstall","chrome","webstore","install","getWebStoreInstallUrl","arg","waitForExtensionAfterInstall","handleExtensionInstallationError","webStoreInstallUrl","checkForChromeExtensionOnInterval","checkAgain","applyConstraintsPromise","applyConstraints","isUpdateRequired","minVersion","extVersion","s1","s2","n1","n2","checkChromeExtInstalled","runtime","lastError","updateRequired","desktopSharingChromeMinExtVersion","getStream","sources","initInlineInstalls","append","installed","waitInterval","retries","currentRetries","SIMULCAST_LAYERS","SIM_LAYER_1_RID","SIM_LAYER_2_RID","SIM_LAYER_3_RID","SIM_LAYER_RIDS","TraceablePeerConnection","audioTransferActive","_addedStreams","localSSRCs","localUfrag","remoteUfrag","_peerVideoTypeChanged","_peerMutedChanged","statsinterval","Interop","interop","Simulcast","numOfLayers","explodeRemoteSimulcast","sdpConsistency","localSdpMunger","rtxModifier","what","onaddstream","_remoteStreamAdded","onremovestream","_remoteStreamRemoved","_processStat","statValue","endTime","times","dumpSDP","_getDesiredMediaDirection","mediaTransferActive","hasAnyTracksOfType","supportsSimulcast","_setVideoType","endpoints","endpointTrackMap","mediaTrack","findTrackById","onaddtrack","_remoteTrackAdded","onremovetrack","_remoteTrackRemoved","streamAudioTracks","streamVideoTracks","remoteSDP","mediaLines","mls","trackSsrc","ownerEndpointId","getSSRCOwner","peerMediaInfo","getPeerMediaInfo","_createRemoteTrack","remoteTracksMap","isUserStream","_removeRemoteTrackById","_getRemoteTrackById","removedAudioTrack","removedVideoTrack","_removeRemoteTrack","toBeRemoved","extractSSRCMap","groupsMap","transform","groupSSRCs","normalizePlanB","firstSsrcs","newSsrcLines","resStr","enforceSendRecv","transformer","audioMedia","selectMedia","changed","videoMedia","toRawSDP","_getSSRC","_injectSsrcGroupForUnifiedSimulcast","simulcast_03","getters","toPlanB","maybeAddMutedLocalVideoTracksToSDP","transformStreamIdentifiers","webrtcStream","_addStream","generateNewStreamSSRCInfo","setPrimarySsrc","setSsrcCache","fidGroups","rtxSsrcMapping","_assertTrackBelongs","webRtcStream","addStream","_removeStream","_handleFirefoxRemoveStream","removeStream","doesBelong","isMediaStreamInPc","findSenderByStream","getSenders","sender","extractPrimarySSRC","createDataChannel","opts","_ensureSimulcastGroupIsLast","localSdp","sdpStr","videoStartIndex","simStartIndex","otherStartIndex","simEndIndex","simStr","otherEndIndex","sdpHead","simStrTrimmed","sdpTail","_adjustLocalMediaDirection","modifiedDirection","desiredAudioDirection","desiredVideoDirection","parsedSdp","toUnifiedPlan","_insertUnifiedPlanSimulcastReceive","mungeRemoteDescription","stripRtx","_injectH264IfNotPresent","payloadsArray","dummyPayloadType","clearVideoSsrcCache","peerTracks","_removePeerConnection","_fixAnswerRFC4145Setup","supportsRtpSender","videoSender","simParams","scaleResolutionDownBy","setParameters","_createOfferOrAnswer","isOffer","handleSuccess","resultSdp","resolveFn","rejectFn","hasPrimarySsrcCached","makeVideoPrimarySsrcsConsistent","mungeLocalDescription","modifyRtxSsrcs","_processLocalSSRCsMap","handleFailure","oaPromise","trackMSID","newSSRCNum","oldSSRCNum","currNumSsrcs","handleLayerSuspension","getParameters","simIndex","ttfmTrackerAudioAttached","ttfmTrackerVideoAttached","JitsiRemoteTrack","hasBeenMuted","_bindMuteHandlers","_onTrackMute","_onTrackUnmute","gumStart","gumEnd","gumDuration","ttfm","_playCallback","LocalSdpMunger","localVideos","isInPeerConnection","shouldFakeSdp","requiredSSRCs","ssrcCache","cachedPrimarySsrc","primaryCname","removeSSRC","addSSRCAttribute","addSSRCGroup","modifyRtxSsrcs2","mediaSection","pcId","streamAndTrackIDs","_addMutedLocalVideoTracksToSDP","sessionDesc","audioMLine","_transformMediaIdentifiers","updateAssociatedRtxStream","primarySsrcInfo","primarySsrcMsid","primarySsrcCname","previousRtxSSRC","getRtxSSRC","dumpSSRCGroups","removeGroupsWithSSRC","RtxModifier","correspondingRtxSsrcs","ssrcMapping","sdpTransformer","getSSRCCount","primaryVideoSsrcs","getPrimaryVideoSSRCs","getSSRCAttrValue","correspondingRtxSsrc","previousAssociatedRtxStream","containsAnySSRCGroups","findGroups","removeGroupsBySemantics","SdpConsistency","injectRecvOnly","newPrimarySsrc","getPrimaryVideoSsrc","replaceSSRC","TalkMutedDetection","_callback","_eventFired","_trackMuteChanged","_trackAdded","_isLocalAudioTrack","SphinxService","BEFORE_STATE","RECORDING_STATE","TRANSCRIBING_STATE","FINISHED_STATE","MAXIMUM_SENTENCE_LENGTH","Transcriber","audioRecorder","transcriptionService","counter","transcription","lineLength","callBack","blobCallBack","recordingResult","wordArray","offset","getUTCMilliseconds","wordObject","begin","end","word","maybeMerge","merge","arrays","potentialWords","hasPopulatedArrays","pushWordToSortedArray","lowestWordArray","wordToAdd","updateTranscription","foundSmaller","wordToCompare","twoDimensionalArray","getTranscription","getState","TranscriptionService","Word","getURL","audioFileBlob","XMLHttpRequest","onreadystatechange","DONE","responseText","open","setRequestHeader","formatResponse","objects","filler","verify","sphinxURL","toReturn","audioBlob","getWord","getBeginTime","getEndTime","RecordingManager","_sessions","_chatRoom","recordingXMLUtils","_handleFocusPresence","_handleJibriPresence","appData","broadcastId","getSession","getID","_addSession","_emitSessionUpdate","_createSession","setStatus","setError","setLiveStreamViewURL","JibriSession","_connection","_setSessionID","_sessionID","_liveStreamViewURL","_createIQ","_setErrorFromIq","VideoSIPGW","sessionStateChangeListener","sessionStateChanged","handleJibriSIPState","sipaddress","setState","failure_reason","addStateListener","removeStateListener","STATE_CHANGED","JitsiVideoSIPGWSession","_sendJibriIQ","failureReason","oldState","displayname","nodeTree","offerOptions","stunKeepAliveIntervalMs","PCMonitor","getStatsIntervalMs","getStatsInterval","rtts","stopped","startStatsInterval","handleCandidateRtt","rttTotal","candidateKey","responsesReceived","requestsSent","NaN","rttTotalDiff","responsesReceivedDiff","requestsResponsesDiff","RttMonitor","supportsLocalCandidateRttStatistics","pcMonitors","startPCMonitors","initialDelay","SpeakerStatsCollector","users","dominantSpeakerId","_onDominantSpeaker","_onUserJoin","_onUserLeave","_onDisplayNameChange","oldDominantSpeaker","newDominantSpaker","setIsDominantSpeaker","savedUser","markAsHasLeft","SpeakerStats","isLocalStats","_userId","_isLocalStats","totalDominantSpeakerTime","_dominantSpeakerStart","_hasLeft","_isDominantSpeaker","isNowDominantSpeaker","timeElapsed","logOutputDevice","deviceID","isDevicePermissionGranted","permissions","BUSY","RESOURCE_CONSTRAINT","SERVICE_UNAVAILABLE","FILE","STREAM"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mBAAO,CAAC,EAAU;AAC/B,mBAAmB,mBAAO,CAAC,EAAgB;;AAE3C;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA,cAAc,WAAW,gCAAgC,0BAA0B;AACnF,cAAc,WAAW,gCAAgC,0BAA0B;AACnF,cAAc,WAAW,+BAA+B,yBAAyB;AACjF,cAAc,WAAW,8BAA8B,wBAAwB;AAC/E,cAAc,WAAW,+BAA+B,yBAAyB;AACjF,cAAc,WAAW,gCAAgC,0BAA0B;AACnF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA,mBAAmB,sBAAsB;AACzC,yDAAyD,aAAa;AACtE,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA,KAAK;AACL;AACA,sBAAsB,sBAAsB;AAC5C;AACA,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,cAAc;AACpC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;;AAEA;AACA;AACA,sBAAsB,cAAc;AACpC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1HA;AAAA;;AAEe,6DAAI,qEAAJ,EAAf,E;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,IAA0C;AAClD;AACA;AACA;AACA;AACA,QAAQ,iCAAO,EAAE,oCAAE,OAAO;AAAA;AAAA;AAAA,oGAAC;AAC3B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB,mBAAmB;AACnB,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,sCAAsC,OAAO;AAC7C;;AAEA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb,0CAA0C;AAC1C;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB,uFAAuF;AACvF;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED,oDAAoD;;AAEpD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,UAAU,IAA2B;AAC1C;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,QAAQ;AACvB;AACA,mBAAmB,iBAAiB;AACpC,YAAY,oDAAoD;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C,eAAe,kBAAkB;AACjC,eAAe,oCAAoC;AACnD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAwC;;AAEjE;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA,iDAAiD,YAAY;AAC7D,YAAY,gDAAgD;AAC5D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAyC,4CAA4C,EAAE;AACvF,kCAAkC,sDAAsD,EAAE;AAC1F;AACA;AACA,yCAAyC,4CAA4C,EAAE;AACvF,kCAAkC,sDAAsD,EAAE;AAC1F;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,UAAU,IAA2B;AAC1C;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB,oBAAoB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qBAAqB;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,yBAAyB;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,cAAc;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,UAAU,IAA2B;AAC1C;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD,kDAAkD;AAClD,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,WAAW,IAA2B;AAC3C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,yCAAyC;;AAEvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,8CAA8C;;AAEpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,yCAAyC;;AAE9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,+CAA+C;;AAEtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,+BAA+B;AAC1D;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,0CAA0C;AACzE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,2BAA2B,8BAA8B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,eAAe,KAAK,aAAa;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,aAAa;;AAEjC;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA,uBAAuB,UAAU;AACjC;AACA;AACA;AACA,aAAa;AACb;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,wCAAwC;AACxC,wCAAwC;AACxC,0CAA0C;AAC1C,0CAA0C;AAC1C;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,iCAAiC;AACjC,iCAAiC;AACjC,mCAAmC;AACnC,mCAAmC;AACnC;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,aAAa;;AAEjC;AACA;AACA;AACA;;AAEA,uBAAuB,4BAA4B;AACnD;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,4BAA4B;AACnD;AACA;AACA;;AAEA,uBAAuB,4BAA4B;AACnD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA,8BAA8B,0CAA0C;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD,sCAAsC,qBAAqB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA,+BAA+B,4BAA4B;AAC3D;AACA;AACA,iBAAiB,WAAW;AAC5B;AACA;AACA,aAAa;AACb;AACA,2BAA2B,4BAA4B;AACvD;AACA;AACA;AACA,SAAS;AACT;AACA,uBAAuB,4BAA4B;AACnD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,aAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,aAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,aAAa;AAChD;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,aAAa;AACxC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,aAAa;;AAEjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,4BAA4B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,qBAAqB;AACrB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,gCAAgC,qBAAqB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,yCAAyC;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,uDAAuD;AACxE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,gBAAgB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,WAAW;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,SAAS;AACrC;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,uBAAuB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,QAAQ;;AAEpC;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;;AAGL;AACA;AACA;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,oCAAoC,SAAS;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;;AAEhC;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,cAAc,uBAAuB;AACtD,iCAAiC;AACjC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,2BAA2B;AACjD,yBAAyB,uBAAuB;AAChD,6BAA6B;AAC7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;;AAEhC;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,+BAA+B,gCAAgC;AAC/D,sCAAsC,uBAAuB;AAC7D,2CAA2C;AAC3C,aAAa;AACb,+BAA+B,gCAAgC;AAC/D,sCAAsC,uBAAuB;AAC7D;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mCAAmC,mCAAmC;AACtE,iDAAiD,0BAA0B;AAC3E;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,+BAA+B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAe,UAAU;AACzB;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,OAAO;AACtB;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,mCAAmC;AACnC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,UAAU,IAA2B;AAC1C;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,UAAU;AACnC;AACA;AACA;AACA;AACA,yBAAyB,UAAU;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,+DAA+D;AAC/D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,aAAa;AACb;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB;AACnB;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kCAAkC;AACrD;AACA,mBAAmB,gCAAgC;AACnD;AACA,mBAAmB,gCAAgC;AACnD;AACA,yBAAyB,4CAA4C;AACrE,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8EAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,QAAQ;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,sCAAsC,SAAS;AAC/C;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,kBAAkB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,UAAU,IAA2B;AAC1C;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB,6BAA6B;AACpD;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS,kDAAkD;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,8BAA8B;AACvE;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,SAAS,aAAa;AACtB;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,wCAAwC;;AAExC;AACA;AACA;AACA,qCAAqC;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;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kC,CAAC,CAA3C;AAAA,aADa,CAAjB;AAEAtC,uBAAWiD,IAAX,GAAkBjD,WAAWiD,IAAX,CAAgB5C,MAAhB,CACd;AAAA,uBAAQgD,QAAQpJ,OAAR,CAAgB8I,KAAKT,OAArB,MAAkC,CAAC,CAA3C;AAAA,aADc,CAAlB;AAEA,gBAAItC,WAAWsD,MAAf,EAAuB;AACnBtD,2BAAWsD,MAAX,GAAoBtD,WAAWsD,MAAX,CAAkBjD,MAAlB,CAChB;AAAA,2BAAQgD,QAAQpJ,OAAR,CAAgB8I,KAAKT,OAArB,MAAkC,CAAC,CAA3C;AAAA,iBADgB,CAApB;AAEH;AACJ;AACJ;AAtpBW,CAAhB;;AAypBe,yDAAA1H,OAAf,E;;;;;;;AC/pBA,aAAa,mBAAO,CAAC,GAAU;AAC/B,aAAa,mBAAO,CAAC,GAAU;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AA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AAKC,GAAL,EADpD;;AAGA,iBAAKL,YAAL,CAAkB7uB,aAAlB;AACA,iBAAK8uB,sBAAL,CAA4B9uB,aAA5B;;AAEA,iBAAKovB,yBAAL,CAA+BpvB,aAA/B;AACH;;AAED;;;;;;;;;gDAMwB8b,K,EAAO;AAC3B,gBAAM9b,gBAAgB8b,MAAM8T,gBAAN,EAAtB;;AAEAx9B,mBAAOurB,KAAP,iDACkD3d,aADlD,EAEI8b,MAAMsV,OAAN,EAFJ;;AAIA,iBAAKhC,yBAAL,CAA+BpvB,aAA/B;AACH;;;;;;AAprBgB,yDAAA+sB,kC;;;;;;;;AC5ErB;AAAA;AAAA;;;AAGO,IAAMsE,kBAAkB,yBAAxB,C;;;;;;ACHP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,eAAe,sBAAsB;AACrC,qDAAqD,aAAa;AAClE,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,sBAAsB;AACxC;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC5KA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AAEO,IAAMC,SAAS,QAAf;;AAEA,IAAMC,QAAQ,OAAd;;AAEA,IAAMC,UAAU,SAAhB;;AAEA,IAAMC,oBAAoB,WAA1B;;AAEA,IAAMC,OAAO,MAAb;;AAEA,IAAMC,SAAS,QAAf;;AAEA,IAAMC,OAAO,MAAb;;AAEA,IAAMC,WAAW,UAAjB;;AAEA,IAAMC,eAAe,cAArB;;AAEA,IAAMC,UAAU,SAAhB,C;;;;;;;ACtBP;AAAA;;;;AAIA;;;;AAIA,IAAMC,6BAA6B,IAAnC;;AAEA;;;;AAIA,IAAMC,kCAAkC,GAAxC;;AAEAp1B,OAAOq1B,YAAP,GAAsBr1B,OAAOq1B,YAAP,IAAuBr1B,OAAOs1B,kBAApD;;AAEA,IAAIC,UAAU,IAAd;;AAEA,IAAIv1B,OAAOq1B,YAAX,EAAyB;AACrBE,cAAU,IAAIF,YAAJ,EAAV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAE,YAAQC,OAAR,IAAmBD,QAAQC,OAAR,EAAnB;AACH;;AAED;;;;;AAKA,SAASC,0BAAT,CAAoCC,OAApC,EAA6C;;AAEzC,QAAIC,YAAY,CAAhB;;AAEA,QAAMh6B,SAAS+5B,QAAQ/5B,MAAvB;;AAEA,SAAK,IAAID,IAAI,CAAb,EAAgBA,IAAIC,MAApB,EAA4BD,GAA5B,EAAiC;AAC7B,YAAIi6B,YAAYD,QAAQh6B,CAAR,CAAhB,EAA4B;AACxBi6B,wBAAYD,QAAQh6B,CAAR,CAAZ;AACH;AACJ;;AAED,WAAOk6B,WAAW,CAAC,CAACD,YAAY,GAAb,IAAoB,GAArB,EAA0BE,OAA1B,CAAkC,CAAlC,CAAX,CAAP;AACH;;AAED;;;;;;AAMA,SAASC,YAAT,CAAsBC,QAAtB,EAAgCC,SAAhC,EAA2C;AACvC,QAAIr3B,QAAQ,CAAZ;AACA,QAAMs3B,OAAOD,YAAYD,QAAzB;;AAEA,QAAIE,OAAO,GAAX,EAAgB;AACZt3B,gBAAQq3B,YAAY,GAApB;AACH,KAFD,MAEO,IAAIC,OAAO,CAAC,GAAZ,EAAiB;AACpBt3B,gBAAQq3B,YAAY,GAApB;AACH,KAFM,MAEA;AACHr3B,gBAAQo3B,QAAR;AACH;;AAED,WAAOH,WAAWj3B,MAAMk3B,OAAN,CAAc,CAAd,CAAX,CAAP;AACH;;AAGD;;;;;;;;AAQe,SAASK,mBAAT,CAA6Bn8B,MAA7B,EAAqCo8B,QAArC,EAA+Cn8B,QAA/C,EAAyD;AACpE,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKq8B,UAAL,GAAkB,IAAlB;AACA,SAAKC,aAAL,GAAqBF,QAArB;AACA,SAAK7K,UAAL,GAAkB,CAAlB;AACA,SAAKtxB,QAAL,GAAgBA,QAAhB;AACH;;AAED;;;AAGAk8B,oBAAoB98B,SAApB,CAA8BK,KAA9B,GAAsC,YAAW;AAC7C,QAAI,CAACy8B,oBAAoBI,qBAApB,EAAL,EAAkD;AAC9C;AACH;AACDf,YAAQgB,MAAR;AACA,QAAMC,WAAWjB,QAAQkB,cAAR,EAAjB;;AAEAD,aAASE,qBAAT,GAAiCtB,+BAAjC;AACAoB,aAASG,OAAT,GAAmBxB,0BAAnB;;AAEA,QAAMlyB,SAASsyB,QAAQqB,uBAAR,CAAgC,KAAK78B,MAArC,CAAf;;AAEAkJ,WAAO4zB,OAAP,CAAeL,QAAf;;AAGA,QAAMM,OAAO,IAAb;;AAEA,SAAKV,UAAL,GAAkBlV,YACd,YAAM;AACF,YAAMxO,QAAQ,IAAIqkB,UAAJ,CAAeP,SAASQ,iBAAxB,CAAd;;AAEAR,iBAASS,qBAAT,CAA+BvkB,KAA/B;AACA,YAAM4Y,aAAamK,2BAA2B/iB,KAA3B,CAAnB;;AAEA,YAAI4Y,eAAewL,KAAKxL,UAAxB,EAAoC;AAChCwL,iBAAKxL,UAAL,GAAkBwK,aAAaxK,UAAb,EAAyBwL,KAAKxL,UAA9B,CAAlB;AACAwL,iBAAK98B,QAAL,CAAc88B,KAAKxL,UAAnB;AACH;AACJ,KAXa,EAYd,KAAK+K,aAZS,CAAlB;AAcH,CA/BD;;AAiCA;;;AAGAH,oBAAoB98B,SAApB,CAA8ByC,IAA9B,GAAqC,YAAW;AAC5C,QAAI,KAAKu6B,UAAT,EAAqB;AACjBzW,sBAAc,KAAKyW,UAAnB;AACA,aAAKA,UAAL,GAAkB,IAAlB;AACH;AACJ,CALD;;AAOA;;;;;;AAMAF,oBAAoBI,qBAApB,GAA4C,YAAW;AACnD,WAAO7R,QAAQ8Q,OAAR,CAAP;AACH,CAFD,C;;;;;;;AChJA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;AAUO,IAAM2B,cAAc,uBAApB;;AAEP;;;;;AAKO,IAAMC,kBAAkB,4BAAxB;;AAEP;;;AAGO,IAAMC,kBAAkB,4BAAxB;;AAEP;;;;;;;AAOO,IAAMC,mBAAmB,4BAAzB,C;;;;;;AC/BP,IAAMC,yBAAyB,mBAAO9hC,CAAC,EAAR,CAA/B;;AAEA;;AAEA;;;;AAIA,IAAMO,aAAa;AACf;;;;;;;;;;;;;;;AAeAC,cAhBe,sBAiBPspB,GAjBO,EAkBPiY,KAlBO,EAmBPC,OAnBO,EAoBPC,WApBO,EAqBPC,YArBO,EAsBP3T,aAtBO,EAsBQ;AACnB,YAAMrG,IAAI3E,QAAV;AACA,YAAM4e,UAAU,QAAhB;AACA,YAAMC,SAASla,EAAE1E,aAAF,CAAgB2e,OAAhB,CAAf;AACA,YAAME,gBAAgBna,EAAEoa,oBAAF,CAAuBH,OAAvB,EAAgC,CAAhC,CAAtB;;AAEAC,eAAOL,KAAP,GAAeA,KAAf;;AAEA,YAAIE,WAAJ,EAAiB;AACb;AACA;AACA,gBAAMM,WAAWT,wBAAjB;;AAEA,gBAAIS,QAAJ,EAAc;AACV,oBAAMC,YAAYD,SAASzY,GAA3B;AACA,oBAAM2Y,gBACAD,UAAUnqB,SAAV,CAAoB,CAApB,EAAuBmqB,UAAUE,WAAV,CAAsB,GAAtB,IAA6B,CAApD,CADN;;AAGA,oBAAIF,aAAaC,aAAjB,EAAgC;AAC5B;AACA3Y,0BAAM2Y,gBAAgB3Y,GAAtB;AACH;AACJ;AACJ;;AAED,YAAIoY,YAAJ,EAAkB;AACdE,mBAAOO,MAAP,GAAgBT,YAAhB;AACH;AACD,YAAI3T,aAAJ,EAAmB;AACf6T,mBAAO33B,OAAP,GAAiB8jB,aAAjB;AACH;;AAED6T,eAAOtY,GAAP,GAAaA,GAAb;AACA,YAAIkY,OAAJ,EAAa;AACTK,0BAAcO,UAAd,CAAyBC,YAAzB,CAAsCT,MAAtC,EAA8CC,aAA9C;AACH,SAFD,MAEO;AACHA,0BAAcO,UAAd,CAAyBE,WAAzB,CAAqCV,MAArC;AACH;AACJ;AA5Dc,CAAnB;;AA+DA;;AAEA72B,OAAOC,OAAP,GAAiBjL,UAAjB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMR,SAAS,oEAASE,CAACC,UAAV,CAAf;;AAEA;;;;;AAKA,SAAS6iC,gBAAT,CAA0BC,KAA1B,EAAsD;AAAA,QAArBC,IAAqB,uEAAd,YAAc;;AAClD;AACA,QAAID,KAAJ,EAAW;AACP;AACAC,iBAAWA,KAAKrsB,OAAL,CAAa,GAAb,MAAsB,CAAC,CAAvB,GAA2B,GAA3B,GAAiC,GAA5C,eAAwDosB,KAAxD;AACH;;AAED,QAAME,OAAO,IAAI,mDAAOC,CAACC,UAAZ,CAAuBH,IAAvB,CAAb;;AAEA;AACAC,SAAKG,UAAL,GAAkB,CAAlB;;AAEA,WAAOH,IAAP;AACH;;AAED;;;;IAGqBI,I;;;AACjB;;;;;;;AAOA,kBAAYhjC,OAAZ,EAAqB0iC,KAArB,EAA4B;AAAA;;AAAA;;AAExB,cAAK7gB,UAAL,GAAkB,IAAlB;AACA,cAAKohB,oBAAL,GAA4B,KAA5B;AACA,cAAKC,eAAL,GAAuB,EAAvB;AACA,cAAKljC,OAAL,GAAeA,OAAf;AACA,cAAK0iC,KAAL,GAAaA,KAAb;AACA,cAAKS,iBAAL,GAAyB,KAAzB;AACA,cAAKC,mBAAL;;AAEA,cAAKvhB,UAAL,GAAkB4gB,iBAAiBC,KAAjB,EAAwB1iC,QAAQ2iC,IAAhC,CAAlB;;AAEA,cAAKU,IAAL,GAAY,IAAI,uDAAJ,CAAS,MAAKxhB,UAAd,EAA0B,MAAK7hB,OAAL,CAAasjC,UAAvC,CAAZ;;AAEA;AACA,cAAKC,gBAAL;;AAEA;AACA;AACA;AACA;AACA;AACAC,UAAEt5B,MAAF,EAAU5F,EAAV,CAAa,qBAAb,EAAoC,MAAKm/B,UAAL,CAAgB5Y,IAAhB,OAApC;AAtBwB;AAuB3B;;AAED;;;;;;;;2CAImB;AACf;AACA;AACA,iBAAKwY,IAAL,CAAUK,UAAV,CAAqB,mBAArB;AACA,iBAAKL,IAAL,CAAUK,UAAV,CAAqB,4BAArB;AACA,iBAAKL,IAAL,CAAUK,UAAV,CAAqB,sCAArB;AACA,iBAAKL,IAAL,CAAUK,UAAV,CAAqB,6BAArB;AACA,iBAAKL,IAAL,CAAUK,UAAV,CAAqB,wCAArB;AACA,iBAAKL,IAAL,CAAUK,UAAV,CAAqB,gCAArB;AACA,iBAAKL,IAAL,CAAUK,UAAV,CAAqB,gCAArB;;AAEA,gBAAI,CAAC,KAAK1jC,OAAL,CAAa2jC,UAAd,IAA4B,yDAAOjhC,CAACkhC,WAAR,EAAhC,EAAuD;AACnD,qBAAKP,IAAL,CAAUK,UAAV,CAAqB,mBAArB;AACH;;AAED;AACA;AACA;AACA;AACA;;AAEA,iBAAKL,IAAL,CAAUK,UAAV,CAAqB,mBAArB,EArBe,CAqB4B;AAC3C,iBAAKL,IAAL,CAAUK,UAAV,CAAqB,mBAArB,EAtBe,CAsB4B;;AAE3C;;AAEA;AACA,gBAAI,yDAAOhhC,CAACijB,QAAR,MAAsB,KAAK3lB,OAAL,CAAa6jC,aAAb,KAA+B,KAAzD,EAAgE;AAC5DpkC,uBAAO0G,IAAP,CAAY,oBAAZ;AACA,qBAAKk9B,IAAL,CAAUK,UAAV,CAAqB,+BAArB;AACH;;AAED,gBAAI,KAAK7hB,UAAL,CAAgBiiB,IAApB,EAA0B;AACtB,qBAAKT,IAAL,CAAUK,UAAV,CAAqB,wBAArB;AACH;AACJ;;AAED;;;;;;wCAGgB;AACZ,mBAAO,KAAK7hB,UAAZ;AACH;;AAED;;;;;;;;;;;;;;4CAWiD;AAAA,gBAA/BkiB,WAA+B,uEAAjB,EAAiB;;AAAA;;AAAA,gBAAbhH,MAAa;AAAA,gBAALiH,GAAK;;AAC7C,gBAAMzH,MAAMryB,OAAO+5B,WAAP,CAAmB1H,GAAnB,EAAZ;AACA,gBAAM2H,YAAY,mDAAOrB,CAACsB,eAAR,CAAwBpH,MAAxB,EAAgC1iB,WAAhC,EAAlB;;AAEA,iBAAK6oB,eAAL,CAAqBgB,SAArB,IAAkC3H,GAAlC;AACA98B,mBAAOkK,GAAP,qBACsBu6B,SADtB,IACkCF,YAAUA,GAAV,SAAmB,EADrD,WAEIzH,GAFJ;AAGA,gBAAIQ,WAAW,mDAAO8F,CAACuB,MAAR,CAAeC,SAA1B,IACGtH,WAAW,mDAAO8F,CAACuB,MAAR,CAAeE,QADjC,EAC2C;AACvC,oBAAI,KAAKtkC,OAAL,CAAaukC,WAAb,IACI,KAAKvkC,OAAL,CAAawkC,GAAb,IAAoB,KAAKxkC,OAAL,CAAawkC,GAAb,CAAiBD,WAD7C,EAC2D;AACvD,yBAAK1iB,UAAL,CAAgB4iB,MAAhB,CAAuBC,yBAAvB;AACH;;AAEDjlC,uBAAO0G,IAAP,oBAA6B,KAAK0b,UAAL,CAAgB8iB,GAA7C;;AAEA;AACA,oBAAMC,UAAU,KAAK/iB,UAAL,CAAgBgjB,MAAhC;;AAEA,qBAAKhjB,UAAL,CAAgBijB,IAAhB,CAAqBC,cAArB,CACIH,OADJ,EAEI,mBAAW;AACP,wBAAII,OAAJ,EAAa;AACT,+BAAKnjB,UAAL,CAAgBijB,IAAhB,CAAqBG,aAArB,CAAmCL,OAAnC;AACH,qBAFD,MAEO;AACHnlC,+BAAOoD,IAAP,4BAAqC+hC,OAArC;AACH;AACJ,iBARL;;AAUA,oBAAIb,YAAYmB,QAAhB,EAA0B;AACtB,yBAAK/B,iBAAL,GAAyB,IAAzB;AACH;AACD,oBAAI,KAAKthB,UAAL,IAAmB,KAAKA,UAAL,CAAgBsjB,SAAnC,IACO,mDAAOtC,CAACuC,kBAAR,CAA2B,KAAKvjB,UAAL,CAAgB8iB,GAA3C,CADX,EAC4D;AACxD;AACA;AACA,yBAAKniC,YAAL,CAAkByC,IAAlB,CACI,8EADJ,EAEI,mDAAO49B,CAACuC,kBAAR,CAA2B,KAAKvjB,UAAL,CAAgB8iB,GAA3C,CAFJ;AAGH;AACJ,aAjCD,MAiCO,IAAI5H,WAAW,mDAAO8F,CAACuB,MAAR,CAAeiB,QAA9B,EAAwC;AAC3C,oBAAIrB,QAAQ,4BAAZ,EAA0C;AACtC,yBAAKsB,yBAAL,GAAiC,IAAjC;AACH,iBAFD,MAEO;AACH,yBAAKC,gBAAL,GAAwB,IAAxB;AACH;AACD,qBAAKC,YAAL,GAAoBxB,GAApB;AACA,oBAAIA,QAAQ,WAAZ,EAAyB;AACrB,yBAAKxhC,YAAL,CAAkByC,IAAlB,CACI,yEADJ,EAEI,mEAFJ,EAEuC++B,GAFvC;AAGH;AACJ,aAZM,MAYA,IAAIjH,WAAW,mDAAO8F,CAACuB,MAAR,CAAeqB,YAA9B,EAA4C;AAC/C;AACA,qBAAK5jB,UAAL,CAAgBijB,IAAhB,CAAqBY,YAArB;AACA,oBAAMC,2BAA2B,KAAK1C,oBAAtC;AACA,oBAAM2C,SAAS5B,OAAO,KAAKwB,YAA3B;;AAEA,qBAAKvC,oBAAL,GAA4B,KAA5B;AACA,oBAAI,KAAKqC,yBAAT,EAAoC;AAChC;AACA,yBAAK9iC,YAAL,CAAkByC,IAAlB,CACI,yEADJ,EAEI,yEAFJ;AAGH,iBALD,MAKO,IAAI,KAAKsgC,gBAAT,EAA2B;AAC9B,yBAAK/iC,YAAL,CAAkByC,IAAlB,CACI,yEADJ,EAEI,mEAFJ,EAGI2gC,MAHJ,EAIIxlC,SAJJ,EAIe;AACX,yBAAKylC,iCAAL,EALJ;AAMH,iBAPM,MAOA,IAAIF,wBAAJ,EAA8B;AACjC,yBAAKnjC,YAAL,CAAkByC,IAAlB,CACI,+EADJ,EACmD2gC,MADnD;AAEH,iBAHM,MAGA;AACH;AACA;AACA;AACA;AACA;AACAnmC,2BAAO0B,KAAP,CAAa,0BAAb;;AAEA;AACA;AACA,wBAAM2kC,kBAAkB,mDAAOjD,CAACkD,kBAAR,EAAxB;;AAEA,wBAAID,mBAAmB,GAAnB,IAA0BA,kBAAkB,GAAhD,EAAqD;AACjD,6BAAKtjC,YAAL,CAAkByC,IAAlB,CACI,yEADJ,EAEI,oEAFJ,EAGI2gC,UAAU,cAHd;AAIH,qBALD,MAKO;AACH,6BAAKpjC,YAAL,CAAkByC,IAAlB,CACI,yEADJ,EAEI,gFAFJ,EAGI2gC,UAAU,0BAHd;AAIH;AACJ;AACJ,aA9CM,MA8CA,IAAI7I,WAAW,mDAAO8F,CAACuB,MAAR,CAAe4B,QAA9B,EAAwC;AAC3C;AACA,qBAAKxjC,YAAL,CAAkByC,IAAlB,CACI,yEADJ,EAEI,yEAFJ,EAGI++B,GAHJ,EAIID,WAJJ;AAKH;AACJ;;AAED;;;;;;;;iCAKSY,G,EAAKO,Q,EAAU;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAKI,yBAAL,GAAiC,KAAjC;AACA,iBAAKC,gBAAL,GAAwB,KAAxB;AACA,iBAAKC,YAAL,GAAoBplC,SAApB;AACA,iBAAKyhB,UAAL,CAAgBkf,OAAhB,CACI4D,GADJ,EAEIO,QAFJ,EAGI,KAAKe,iBAAL,CAAuBpb,IAAvB,CAA4B,IAA5B,EAAkC;AAC9B8Z,wBAD8B;AAE9BO;AAF8B,aAAlC,CAHJ;AAOH;;AAED;;;;;;;;;;+BAOOllC,O,EAAS;AACZ,gBAAMu8B,MAAM,KAAK2G,eAAL,CAAqBgD,SAArB,GAAiCh8B,OAAO+5B,WAAP,CAAmB1H,GAAnB,EAA7C;;AAEA98B,mBAAOkK,GAAP,iCAAyC4yB,GAAzC;AACA,iBAAK1a,UAAL,CAAgBskB,MAAhB,CAAuBnmC,QAAQ2kC,GAA/B,EAAoC3kC,QAAQomC,GAA5C,EACIroB,SAAS/d,QAAQqmC,GAAjB,EAAsB,EAAtB,IAA4B,CADhC,EAEI,KAAKJ,iBAAL,CAAuBpb,IAAvB,CAA4B,IAA5B,EAAkC;AAC9B8Z,qBAAK3kC,QAAQ2kC,GADiB;AAE9BO,0BAAUllC,QAAQklC;AAFY,aAAlC,CAFJ;AAMH;;AAED;;;;;;;;gCAKQP,G,EAAKO,Q,EAAU;AACnB,gBAAI,CAACP,GAAL,EAAU;AAAA,qCAC8B,KAAK3kC,OAAL,CAAasmC,KAD3C;AAAA,oBACEC,eADF,kBACEA,eADF;AAAA,oBACmB1B,MADnB,kBACmBA,MADnB;;AAEN,oBAAI2B,eAAeD,mBAAmB1B,MAAtC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AAVM,8BAWe36B,MAXf;AAAA,oBAWEu8B,QAXF,WAWEA,QAXF;;;AAaN,oBAAIF,eAAJ,EAAqB;AACjB,wBAAMG,SAASD,YAAYA,SAASC,MAApC;;AAEA,wBAAKA,UAAUA,OAAOpwB,OAAP,CAAe,YAAf,MAAiC,CAAC,CAA7C,IACO,KAAKosB,KADhB,EACuB;AACnB8D,uCAAe3B,MAAf;AACH;AACJ;;AAED;AACAF,sBAAM6B,gBAAiBC,YAAYA,SAASE,QAA5C;AACH;;AAED,mBAAO,KAAKC,QAAL,CAAcjC,GAAd,EAAmBO,QAAnB,CAAP;AACH;;AAED;;;;;;;;mCAKWv+B,Q,EAAU3G,O,EAAS;AAC1B;AACA,gBAAI6mC,cAAc,mDAAOhE,CAACiE,cAAR,CAAuB,KAAKjlB,UAAL,CAAgB8iB,GAAvC,CAAlB;AACA,gBAAIoC,UAAapgC,QAAb,SAAyB,KAAK3G,OAAL,CAAasmC,KAAb,CAAmBU,GAA5C,MAAJ;AACA,gBAAMC,cACAjnC,QAAQknC,QAAR,IAAoBlnC,QAAQmnC,IAA5B,GAAmCnnC,QAAQmnC,IAA3C,GAAkD,IADxD;;AAGA,gBAAIF,WAAJ,EAAiB;AACb;AACAJ,8BAAc7mC,QAAQmnC,IAAtB;AACH,aAHD,MAGO,IAAI,CAAC,KAAKhE,iBAAV,EAA6B;AAChC;AACA0D,8BAAcA,YAAY/rB,MAAZ,CAAmB,CAAnB,EAAsB,CAAtB,CAAd;AACH;;AAED;AACA;AACA,gBAAI,KAAKqoB,iBAAL,IAA0B8D,gBAAgB,IAA9C,EAAoD;AAChDJ,qCAAmB,wDAAUvpB,CAACkE,eAAX,CAA2B,CAA3B,CAAnB;AACH;;AAEDulB,uBAAWF,WAAX;;AAEA,mBAAO,KAAKhlB,UAAL,CAAgBulB,IAAhB,CAAqBC,UAArB,CAAgCN,OAAhC,EAAyC,IAAzC,EAA+C/mC,OAA/C,CAAP;AACH;;AAED;;;;;;;uCAIe;AACX,gBAAMykC,SAAS,KAAK5iB,UAAL,CAAgB4iB,MAA/B;;AAGA,mBAAOA,SAASA,OAAO6C,MAAP,EAAT,GAA2B,EAAlC;AACH;;AAED;;;;;;qCAGa;AACT,mBAAO,CAAC,KAAKzlB,UAAL,CAAgBpiB,MAAhB,IAA0B,EAA3B,EAA+BkK,GAA/B,IAAsC,IAA7C;AACH;;AAED;;;;;;+BAGc;AAAA;;AACV,qCAAKkY,UAAL,CAAgBiiB,IAAhB,EAAqByD,IAArB;AACH;;AAED;;;;;;;;gCAKQ5C,G,EAAK3P,I,EAAM;AACf,iBAAKnT,UAAL,CAAgB2lB,QAAhB,CAAyBC,OAAzB,CAAiC9C,GAAjC,EAAsC3P,IAAtC;AACH;;AAED;;;;;;;8BAIM2P,G,EAAK;AACP,iBAAK9iB,UAAL,CAAgB2lB,QAAhB,CAAyBE,KAAzB,CAA+B/C,GAA/B;AACH;;AAED;;;;;;sCAGc;AACV,mBAAO,KAAK9iB,UAAL,CAAgB4iB,MAAhB,CAAuBkD,QAA9B;AACH;;AAED;;;;;;;;;mCAMWC,E,EAAI;AACX,gBAAI,KAAK3E,oBAAL,IAA6B,CAAC,KAAKphB,UAAvC,EAAmD;AAC/C,qBAAKrf,YAAL,CAAkByC,IAAlB,CAAuB,mEAAvB;;AAEA;AACH;;AAED,iBAAKg+B,oBAAL,GAA4B,IAA5B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAKphB,UAAL,CAAgBgmB,KAAhB;;AAEA,gBAAID,OAAO,IAAP,IAAe,OAAOA,EAAP,KAAc,WAAjC,EAA8C;AAC1C,oBAAME,SAASF,GAAGtgC,IAAlB;;AAEA,oBAAIwgC,WAAW,cAAX,IAA6BA,WAAW,QAA5C,EAAsD;AAClD;AACA;AACA;AACA;AACA;AACA,yBAAKjmB,UAAL,CAAgB7hB,OAAhB,CAAwB+nC,IAAxB,GAA+B,IAA/B;AACH;AACJ;;AAED,iBAAKlmB,UAAL,CAAgB4hB,UAAhB;;AAEA,gBAAI,KAAK5hB,UAAL,CAAgB7hB,OAAhB,CAAwB+nC,IAAxB,KAAiC,IAArC,EAA2C;AACvC,qBAAKlmB,UAAL,CAAgBgmB,KAAhB;AACH;AACJ;;AAED;;;;;;8CAGsB;AAClB,gBAAMhU,YAAY;AACdmU,qBAAK,EAAEC,YAAY,EAAd,EADS;AAEdzD,qBAAK,EAAEyD,YAAY,EAAd;AAFS,aAAlB;;AAKA;AACA,gBAAMC,qBAAqB,CACvB,EAAEC,MAAM,8BAAR,EADuB,EAEvB,EAAEA,MAAM,+BAAR,EAFuB,EAGvB,EAAEA,MAAM,+BAAR,EAHuB,CAA3B;;AAMA,gBAAMC,iBAAkB,KAAKpoC,OAAL,CAAawkC,GAAb,IACjB,KAAKxkC,OAAL,CAAawkC,GAAb,CAAiB6D,WADD,IACiBH,kBADxC;;AAGA,gBAAIlyB,MAAMC,OAAN,CAAcmyB,cAAd,CAAJ,EAAmC;AAC/B3oC,uBAAO0G,IAAP,CAAY,oBAAZ,EAAkCiiC,cAAlC;AACAvU,0BAAU2Q,GAAV,CAAcyD,UAAd,GAA2BG,cAA3B;AACH;;AAED,gBAAI,KAAKpoC,OAAL,CAAawkC,GAAb,IAAoB,KAAKxkC,OAAL,CAAawkC,GAAb,CAAiB8D,kBAAzC,EAA6D;AACzD7oC,uBAAO0G,IAAP,CAAY,4BAAZ,EACI,KAAKnG,OAAL,CAAawkC,GAAb,CAAiB8D,kBADrB;;AAGAzU,0BAAU2Q,GAAV,CAAc8D,kBAAd,GACM,KAAKtoC,OAAL,CAAawkC,GAAb,CAAiB8D,kBADvB;AAEH;;AAEDC,YAAA,sEAAQA,CAAC,IAAT;AACAC,YAAA,wEAAUA,CAAC,IAAX,EAAiB,KAAKhmC,YAAtB,EAAoCqxB,SAApC;AACA4U,YAAA,sEAAeA;AACfC,YAAA,uEAAQA,CAAC,IAAT;AACAC,YAAA,uEAAQA;AACRC,YAAA,yEAAiBA;AACpB;;AAED;;;;;;;;;4DAMoC;AAChC,gBAAM77B,UAAU,EAAhB;;AAEA;AACA,gBAAI,KAAK/M,OAAL,CAAa6oC,cAAb,IACG,KAAK7oC,OAAL,CAAa6oC,cAAb,CAA4BC,KAD/B,IAEG,KAAKjnB,UAAL,CAAgBknB,MAFnB,IAGG,KAAKlnB,UAAL,CAAgBknB,MAAhB,CAAuBC,mBAH9B,EAGmD;;AAE/C;AACA,oBAAMC,aAAa,KAAKpnB,UAAL,CAAgBknB,MAAhB,CAAuBC,mBAAvB,CACdE,IADc,GACP5wB,KADO,CACD,SADC,CAAnB;AAEA,oBAAM6wB,UAAU,EAAhB;;AAEAF,2BAAW3+B,OAAX,CAAmB,gBAAQ;AACvB,wBAAM+N,QAAQP,KAAKQ,KAAL,CAAW,IAAX,CAAd;AACA,wBAAM8wB,SAAS/wB,MAAMG,KAAN,EAAf;AACA,wBAAM3P,QAAQwP,MAAMlC,IAAN,CAAW,IAAX,CAAd;;AAEAgzB,4BAAQC,MAAR,IAAkBvgC,KAAlB;AACH,iBAND;;AAQA;AACAkE,wBAAQs8B,aAAR,GACM,KAAKrpC,OAAL,CAAa6oC,cAAb,CAA4BC,KAA5B,KACMK,QAAQ,eAAR,CAFZ;AAGA;AACH;;AAED;AACA;AACAp8B,oBAAQu8B,YAAR,GAAuB,KAAKznB,UAAL,CAAgBijB,IAAhB,CAAqByE,kBAArB,EAAvB;AACA;;AAEA,mBAAOx8B,OAAP;AACH;;;;EA9f6B,kE;;AAAb,yDAAAi2B,I;;;;;;;;AC5CrB;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAIA;;;;;;;;;;;AAWO,IAAMwG,2BAA2B,yBAAjC;;AAEP;;;AAGO,IAAMC,cAAc,uBAApB;;AAEP;;;AAGO,IAAMz2B,oBAAoB,6BAA1B;;AAEP;;;;AAIO,IAAM02B,eAAe,wBAArB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,IAAMjqC,SAAS,oEAASE,CAACC,UAAV,CAAf;;AAEO,IAAM+pC,SAAS;AAClBC,eADkB,uBACNC,UADM,EACMC,KADN,EACa;AAAA;AAAA;AAAA;;AAAA;AAC3B,iCAAoB9zB,MAAM+zB,IAAN,CAAWF,WAAWG,QAAtB,CAApB,8HAAqD;AAAA,oBAA1CC,KAA0C;;AACjD,oBAAMC,OAAO;AACTl9B,gCAAY,EADH;AAETg9B,8BAAU,EAFD;AAGTnI,6BAASoI,MAAMpI;AAHN,iBAAb;;AADiD;AAAA;AAAA;;AAAA;AAOjD,0CAAmB7rB,MAAM+zB,IAAN,CAAWE,MAAMj9B,UAAjB,CAAnB,mIAAiD;AAAA,4BAAtCm9B,IAAsC;;AAC7CD,6BAAKl9B,UAAL,CAAgBm9B,KAAK3oC,IAArB,IAA6B2oC,KAAKthC,KAAlC;AACH;AATgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAUjD,oBAAMsO,OAAO,mDAAO0rB,CAACuH,OAAR,CAAgBH,KAAhB,CAAb;;AAEA,oBAAI9yB,IAAJ,EAAU;AACN;AACA;AACA;AACA+yB,yBAAKrhC,KAAL,GAAa,mDAAOg6B,CAACwH,WAAR,CAAoBlzB,IAApB,CAAb;AACH;AACD2yB,sBAAM3lC,IAAN,CAAW+lC,IAAX;AACA,qBAAKN,WAAL,CAAiBK,KAAjB,EAAwBC,KAAKF,QAA7B;AACH;AArB0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsB9B,KAvBiB;AAwBlBM,eAxBkB,uBAwBNR,KAxBM,EAwBCS,MAxBD,EAwBS;AACvB,aAAK,IAAI3kC,IAAI,CAAb,EAAgBA,IAAIkkC,MAAMjkC,MAA1B,EAAkCD,GAAlC,EAAuC;AACnC,gBAAMskC,OAAOJ,MAAMlkC,CAAN,CAAb;;AAEA,gBAAIskC,IAAJ,EAAU;AACNK,uBAAOlb,CAAP,CAAS6a,KAAKrI,OAAd,EAAuBqI,KAAKl9B,UAA5B;AACA,oBAAIk9B,KAAKrhC,KAAT,EAAgB;AACZ0hC,2BAAOC,CAAP,CAASN,KAAKrhC,KAAd;AACH;AACD,oBAAIqhC,KAAKF,QAAT,EAAmB;AACf,yBAAKM,WAAL,CAAiBJ,KAAKF,QAAtB,EAAgCO,MAAhC;AACH;AACDA,uBAAOE,EAAP;AACH;AACJ;;AAED;AACH;AAzCiB,CAAf;;AA4CP;;;;;;AAMA,SAASC,0BAAT,CAAoCC,IAApC,EAA0CC,QAA1C,EAAoD;AAChD,QAAMjiB,MAAM,EAAZ;;AAEA,SAAK,IAAI/iB,IAAI,CAAb,EAAgBA,IAAI+kC,KAAK9kC,MAAzB,EAAiCD,GAAjC,EAAsC;AAClC,YAAI+kC,KAAK/kC,CAAL,EAAQi8B,OAAR,KAAoB+I,QAAxB,EAAkC;AAC9BjiB,gBAAIxkB,IAAJ,CAASwmC,KAAK/kC,CAAL,CAAT;AACH;AACJ;;AAED,WAAO+iB,GAAP;AACH;;AAED;;;;;;AAMO,IAAMkiB,sBAAsB,MAA5B;;AAEP;;;;;;;;;AASA,SAASC,qBAAT,CAA+BC,UAA/B,EAA2C;AACvC,QAAI;AACA,YAAMC,OAAOppC,KAAKykB,KAAL,CAAW0kB,UAAX,CAAb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAIC,QAAQ,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAA5B,EAAsC;AAClC,gBAAM1jC,OAAO0jC,KAAKH,mBAAL,CAAb;;AAEA,gBAAI,OAAOvjC,IAAP,KAAgB,WAApB,EAAiC;AAC7B,uBAAO0jC,IAAP;AACH;;AAEDvrC,mBAAOurB,KAAP,CAAa,kDACP,WADN,EACmB,SADnB,EAC8B1jB,IAD9B;AAEH;AACJ,KApBD,CAoBE,OAAOxD,CAAP,EAAU;;AAER,eAAO,KAAP;AACH;;AAED,WAAO,KAAP;AACH;;AAED;AACA;AACA;;AAEA;;;;IAGqBmnC,Q;;;AAEjB;;AAEA;;;;;;;;AAQA,sBAAYppB,UAAZ,EAAwB8iB,GAAxB,EAA6BO,QAA7B,EAAuClC,IAAvC,EAA6ChjC,OAA7C,EAAsD;AAAA;;AAAA;;AAElD,cAAKqC,IAAL,GAAY2gC,IAAZ;AACA,cAAKnhB,UAAL,GAAkBA,UAAlB;AACA,cAAKklB,OAAL,GAAe,mDAAOlE,CAACqI,iBAAR,CAA0BvG,GAA1B,CAAf;AACA,cAAKwG,SAAL,GAAiBxG,GAAjB;AACA,cAAKO,QAAL,GAAgBA,QAAhB;AACAzlC,eAAO0G,IAAP,oBAA6B,MAAKglC,SAAlC;AACA,cAAKC,OAAL,GAAe,EAAf;AACA,cAAKC,OAAL,GAAe,EAAf;AACA,cAAKC,YAAL,GAAoB,EAApB;AACA,cAAKC,MAAL,GAAc,KAAd;AACA,cAAKC,IAAL,GAAY,IAAZ;AACA,cAAKC,WAAL,GAAmB,IAAnB;AACA,cAAKC,iBAAL,GAAyB,KAAzB;AACA,cAAK1rC,OAAL,GAAeA,WAAW,EAA1B;AACA,cAAK2rC,SAAL,GACM,IAAI,2DAAJ,CAAc,MAAK5E,OAAnB,EAA4B,MAAK1kC,IAAjC,EAAuC,MAAKG,YAA5C,EAA0D;AACxDqf,wBAAY,MAAKxf,IAAL,CAAUrC,OADkC;AAExD+xB,wBAAY,MAAK/xB;AAFuC,SAA1D,CADN;AAKA,cAAK4rC,eAAL,CAAqB5rC,OAArB;AACA,cAAK6rC,aAAL,GAAqB,EAArB;AACA,cAAKC,WAAL,GAAmB,IAAnB;AACA,cAAKC,QAAL,GAAgB,IAAhB;AACA,cAAK7I,eAAL,GAAuB,EAAvB;AACA,cAAK8I,2BAAL,GAAmC,IAAnC;;AAEA,cAAKC,MAAL,GAAc,KAAd;AACA,cAAKC,mBAAL,GAA2B,8DAA3B;AA7BkD;AA8BrD;;AAED;;AAEA;;;;;;;0CAG8B;AAAA,gBAAdlsC,OAAc,uEAAJ,EAAI;;AAC1B,iBAAKqrC,OAAL,CAAazV,EAAb,GAAkB,KAAKuV,SAAvB;AACA,iBAAKE,OAAL,CAAac,GAAb,GAAmB,gCAAnB;AACA,iBAAKd,OAAL,CAAavB,KAAb,GAAqB,EAArB;AACA,iBAAKuB,OAAL,CAAavB,KAAb,CAAmB3lC,IAAnB,CAAwB;AACpB,2BAAW,YADS;AAEpB,yBAASqf,UAAU4oB,SAFC;AAGpB,8BAAc,EAAEC,OAAO,qCAAT;AAHM,aAAxB;;AAMA,gBAAIrsC,QAAQssC,aAAZ,EAA2B;AACvB,qBAAKjB,OAAL,CAAavB,KAAb,CAAmB3lC,IAAnB,CAAwB;AACpB,+BAAW,UADS;AAEpB,6BAAS,mEAAQ1D,CAACC;AAFE,iBAAxB;AAIH;;AAED;AACA;AACA;AACA,iBAAK6rC,sBAAL,CAA4B,KAA5B;;AAEA,gBAAIvsC,QAAQ6oC,cAAR,IAA0B7oC,QAAQ6oC,cAAR,CAAuB2D,UAArD,EAAiE;AAC7D,qBAAKnB,OAAL,CAAavB,KAAb,CAAmB3lC,IAAnB,CAAwB;AACpB,+BAAW,QADS;AAEpB,kCAAc;AACVN,4BAAI7D,QAAQ6oC,cAAR,CAAuB2D,UADjB;AAEVH,+BAAO;AAFG;AAFM,iBAAxB;AAOH;AACJ;;AAED;;;;;;;iDAIyBt2B,O,EAAS;AAC9B,iBAAKs1B,OAAL,CAAavB,KAAb,CAAmB3lC,IAAnB,CAAwB;AACpB,2BAAW,SADS;AAEpB,4BAAY,CACR;AACI,+BAAW,OADf;AAEI,6BAAS4R,QAAQwM;AAFrB,iBADQ,EAKR;AACI,+BAAW,OADf;AAEI,6BAASxM,QAAQM;AAFrB,iBALQ;AAFQ,aAAxB;AAaH;;AAED;;;;;;;;;6BAMK6uB,Q,EAAU;AAAA;;AACX,iBAAKA,QAAL,GAAgBA,QAAhB;;AAEA,mBAAO,IAAIhZ,OAAJ,CAAY,mBAAW;AAC1B,uBAAKyf,SAAL,CAAec,uBAAf,CAAuC,YAAM;AACzC,2BAAKC,YAAL,CAAkB,IAAlB;AACAvgB;AACH,iBAHD;AAIH,aALM,CAAP;AAMH;;AAED;;;;;;;qCAIawgB,Q,EAAU;AACnB,gBAAM/W,KAAK,KAAKyV,OAAL,CAAazV,EAAxB;;AAEA,gBAAI,CAACA,EAAD,IAAQ,CAAC,KAAK2V,MAAN,IAAgB,CAACoB,QAA7B,EAAwC;AACpC;AACA;AACH;;AAED,gBAAMhC,OAAO,yDAAKiC,CAAC,EAAEhX,MAAF,EAAN,CAAb;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAI+W,QAAJ,EAAc;AACVhC,qBAAKtb,CAAL,CAAO,GAAP,EAAY,EAAEgd,OAAO,KAAKhB,OAAL,CAAac,GAAtB,EAAZ;;AAEA,oBAAI,KAAKjH,QAAT,EAAmB;AACfyF,yBAAKtb,CAAL,CAAO,UAAP,EAAmBmb,CAAnB,CAAqB,KAAKtF,QAA1B,EAAoCuF,EAApC;AACH;AACDE,qBAAKF,EAAL;AACH;;AAEDd,mBAAOW,WAAP,CAAmB,KAAKe,OAAL,CAAavB,KAAhC,EAAuCa,IAAvC;AACA,iBAAK9oB,UAAL,CAAgBgrB,IAAhB,CAAqBlC,IAArB;AACA,gBAAIgC,QAAJ,EAAc;AACV;AACA;AACA;AACA;AACA,qBAAK9qB,UAAL,CAAgBgmB,KAAhB;AACH;AACJ;;AAED;;;;;;;kCAIU;AACNpoC,mBAAOkK,GAAP,CAAW,UAAX,EAAuB,KAAKwhC,SAA5B;AACA,gBAAMR,OAAO,yDAAKiC,CAAC,EAAEhX,IAAI,KAAKuV,SAAX;AACf7jC,sBAAM,aADS,EAAN,CAAb;;AAGA,iBAAK+jC,OAAL,CAAaxlC,MAAb,GAAsB,CAAtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAKgc,UAAL,CAAgBgmB,KAAhB;AACA,iBAAKhmB,UAAL,CAAgBgrB,IAAhB,CAAqBlC,IAArB;AACA,iBAAK9oB,UAAL,CAAgBgmB,KAAhB;AACH;;AAED;;;;;;wCAGgB;AAAA;;AACZ;;AAEA,gBAAMiF,UACA,uDAAGC,CAAC;AACFzlC,sBAAM,KADJ;AAEFsuB,oBAAI,KAAKmR;AAFP,aAAJ,EAIG1X,CAJH,CAIK,OAJL,EAIc,EAAEgd,OAAO,mDAAOxJ,CAACmK,EAAR,CAAWC,UAApB,EAJd,CADN;;AAOA,iBAAKprB,UAAL,CAAgBqrB,MAAhB,CAAuBJ,OAAvB,EAAgC,kBAAU;AACtC,oBAAMb,SACAzI,EAAEliB,MAAF,EAAUrE,IAAV,CAAe,6CAAf,EACGpX,MADH,KAEM,CAHZ;;AAKA,oBAAIomC,WAAW,OAAKA,MAApB,EAA4B;AACxB,2BAAKzpC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAAC6B,gBAAlC,EAAoDq5B,MAApD;AACA,2BAAKA,MAAL,GAAcA,MAAd;AACH;AACJ,aAVD,EAUG,iBAAS;AACRrhC,gBAAA,kEAAoBA,CAACE,gBAArB,CAAsC3J,KAAtC;AACA1B,uBAAO0B,KAAP,CAAa,2BAAb,EAA0CA,KAA1C;AACH,aAbD;AAcH;;AAED;;;;;;iDAGyB;AACrB;;AAEA,gBAAMgsC,UAAU,uDAAGJ,CAAC,EAAEzlC,MAAM,KAAR;AAChBsuB,oBAAI,KAAKmR,OADO,EAAJ,EAEX1X,CAFW,CAET,OAFS,EAEA,EAAEgd,OAAO,sCAAT,EAFA,EAGXhd,CAHW,CAGT,GAHS,EAGJ,EAAEgd,OAAO,eAAT;AACJ/kC,sBAAM,QADF,EAHI,CAAhB;;AAMA,gBAAM05B,OAAO,IAAb;;AAEA,iBAAKnf,UAAL,CAAgBqrB,MAAhB,CAAuBC,OAAvB,EAAgC,gBAAQ;AACpC,oBAAI,CAAC3J,EAAE4J,IAAF,EAAQnwB,IAAR,CACG,oCACE,oCAFL,EAE2CpX,MAFhD,EAEwD;AACpD,wBAAMmgB,SAAS,mCAAf;;AAEApb,oBAAA,kEAAoBA,CAACE,gBAArB,CAAsC,IAAIxJ,KAAJ,CAAU0kB,MAAV,CAAtC;AACAvmB,2BAAO0B,KAAP,CAAa6kB,MAAb;;AAEA;AACH;;AAED,oBAAMqnB,aAAa,uDAAGN,CAAC,EAAEnX,IAAIoL,KAAK+F,OAAX;AACnBz/B,0BAAM,KADa,EAAJ,EAEd+nB,CAFc,CAEZ,OAFY,EAEH,EAAEgd,OAAO,sCAAT,EAFG,CAAnB;;AAIAgB,2BAAWhe,CAAX,CAAa,GAAb,EAAkB,EAAEgd,OAAO,eAAT;AACd/kC,0BAAM,QADQ,EAAlB;;AAGA+lC,2BAAWhe,CAAX,CAAa,OAAb,EAAsB,EAAE,OAAO,WAAT,EAAtB,EACKA,CADL,CACO,OADP,EAEKmb,CAFL,CAEO,2CAFP,EAEoDC,EAFpD,GAEyDA,EAFzD;;AAIA4C,2BAAWhe,CAAX,CAAa,OAAb,EAAsB,EAAE,OAAO,sBAAT,EAAtB,EACKA,CADL,CACO,OADP,EACgBmb,CADhB,CACkB,QADlB,EAC4BC,EAD5B,GACiCA,EADjC;;AAGAzJ,qBAAKnf,UAAL,CAAgBqrB,MAAhB,CAAuBG,UAAvB;AAEH,aA5BD,EA4BG,iBAAS;AACRziC,gBAAA,kEAAoBA,CAACE,gBAArB,CAAsC3J,KAAtC;AACA1B,uBAAO0B,KAAP,CAAa,yCAAb,EAAwDA,KAAxD;AACH,aA/BD;AAgCH;;AAED;;;;;;;mCAIWwpC,I,EAAM;AACb,gBAAMZ,OAAOY,KAAKnxB,YAAL,CAAkB,MAAlB,CAAb;AACA,gBAAM8zB,SAAS,EAAf;AACA,gBAAMC,WAAW5C,KAAK3I,oBAAL,CAA0B,QAA1B,EAAoC,CAApC,CAAjB;;AAEA,gBAAIuL,QAAJ,EAAc;AACVD,uBAAOvQ,MAAP,GAAgBwQ,SAASC,WAAT,IAAwB,EAAxC;AACH;AACD,gBAAIC,kBAAkB,KAAtB;AACA,gBAAMC,WACA/C,KAAKgD,sBAAL,CACE,qCADF,EACyC,GADzC,EAC8C,CAD9C,CADN;AAGA,gBAAMC,cACAF,YAAYA,SAAS1L,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CADlB;;AAGAsL,mBAAOO,WAAP,GACMD,eAAeA,YAAYp0B,YAAZ,CAAyB,aAAzB,CADrB;AAEA8zB,mBAAO9B,IAAP,GAAcoC,eAAeA,YAAYp0B,YAAZ,CAAyB,MAAzB,CAA7B;;AAEA;AACA,gBAAMmrB,MAAMiJ,eAAeA,YAAYp0B,YAAZ,CAAyB,KAAzB,CAA3B;;AAEA8zB,mBAAO3I,GAAP,GAAaA,GAAb;AACA2I,mBAAOQ,OAAP,GACMnJ,OAAOA,IAAIruB,OAAJ,CAAe,KAAKq1B,SAAL,CAAeoC,eAAf,EAAf,YAAwD,CADrE;AAEAT,mBAAOU,cAAP,GACMrJ,OAAOA,IAAIruB,OAAJ,CAAY,GAAZ,IAAmB,CAA1B,IACK,KAAKtW,OAAL,CAAaiuC,YAAb,KACKtJ,IAAI5sB,SAAJ,CAAc4sB,IAAIruB,OAAJ,CAAY,GAAZ,IAAmB,CAAjC,EAAoCquB,IAAIruB,OAAJ,CAAY,GAAZ,CAApC,CAHhB;;AAKA,iBAAK9T,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACmC,iBAAlC,EAAqD;AACjDg7B,kCAAkBZ,OAAOU,cADwB;AAEjDG,0BAAUxD;AAFuC,aAArD;;AAKA,gBAAMyD,MAAMzD,KAAK0D,aAAL,CAAmB,GAAnB,CAAZ;;AAEA,gBAAID,GAAJ,EAAS;AACLA,oBAAIE,MAAJ;AACH;;AAED,gBAAMxE,QAAQ,EAAd;;AAEAH,mBAAOC,WAAP,CAAmBe,IAAnB,EAAyBb,KAAzB;AACA,iBAAK+B,aAAL,CAAmB9B,IAAnB,IAA2BD,KAA3B;;AAEA;AACA;AACA,gBAAMyE,6BAA6B,SAA7BA,0BAA6B,OAAQ;AACvC,oBAAMC,WAAW,EAAjB;AACA,oBAAMC,WAAWvE,KAAKF,QAAL,CAAc/sB,IAAd,CAAmB;AAAA,2BAAKoS,EAAEwS,OAAF,KAAc,MAAnB;AAAA,iBAAnB,CAAjB;;AAEA,oBAAI4M,QAAJ,EAAc;AACVD,6BAASE,IAAT,GAAgB,EAAhB;;AADU,+CAECh1B,GAFD;AAGN,4BAAMuwB,QACAwE,SAASzE,QAAT,CAAkB/sB,IAAlB,CAAuB;AAAA,mCAAKoS,EAAEwS,OAAF,KAAcnoB,GAAnB;AAAA,yBAAvB,CADN;;AAGA,4BAAIuwB,KAAJ,EAAW;AACPuE,qCAASE,IAAT,CAAch1B,GAAd,IAAqBuwB,MAAMphC,KAA3B;AACH;AARK;;AAAA,+BAEQ,CAAE,IAAF,EAAQ,MAAR,EAAgB,QAAhB,CAFR;AAEV,6DAA8C;AAAzC,4BAAM6Q,cAAN;AAAyC,8BAAnCA,GAAmC;AAO7C;AACJ;AACD,oBAAMqe,YAAYmS,KAAKF,QAAL,CAAc/sB,IAAd,CAAmB;AAAA,2BAAKoS,EAAEwS,OAAF,KAAc,OAAnB;AAAA,iBAAnB,CAAlB;;AAEA,oBAAI9J,SAAJ,EAAe;AACXyW,6BAAStxB,KAAT,GAAiB6a,UAAUlvB,KAA3B;AACH;;AAED,uBAAO2lC,QAAP;AACH,aAtBD;;AAwBA,iBAAK,IAAI5oC,IAAI,CAAb,EAAgBA,IAAIkkC,MAAMjkC,MAA1B,EAAkCD,GAAlC,EAAuC;AACnC,oBAAMskC,OAAOJ,MAAMlkC,CAAN,CAAb;;AAEA,wBAAQskC,KAAKrI,OAAb;AACA,yBAAK,KAAL;AAAY;AAAA,gCACA70B,UADA,GACek9B,IADf,CACAl9B,UADA;;;AAGR,gCAAI,CAACA,UAAL,EAAiB;AACb;AACH;AALO,gCAMA1F,IANA,GAMS0F,UANT,CAMA1F,IANA;;;AAQRgmC,mCAAOqB,OAAP,GAAiBrnC,IAAjB;AACA;AACH;AACD,yBAAK,MAAL;AACIgmC,+BAAOnG,IAAP,GAAc+C,KAAKrhC,KAAnB;AACA;AACJ,yBAAK,QAAL;AACIykC,+BAAOzpC,EAAP,GAAYqmC,KAAKrhC,KAAjB;AACA;AACJ,yBAAK,UAAL;AACIykC,+BAAOsB,OAAP,GAAiB1E,KAAKrhC,KAAtB;AACA;AACJ,yBAAK,UAAL;AACIykC,+BAAOkB,QAAP,GAAkBD,2BAA2BrE,IAA3B,CAAlB;AACA;AAvBJ;AAyBH;;AAED,gBAAIH,SAAS,KAAKoB,SAAlB,EAA6B;AACzB,oBAAM0D,UACAvB,OAAOO,WAAP,KAAuB,OAAvB,GAAiCP,OAAO9B,IAAxC,GAA+C,MADrD;;AAGA,oBAAI,KAAKA,IAAL,KAAcqD,OAAlB,EAA2B;AACvB,yBAAKrD,IAAL,GAAYqD,OAAZ;AACA,yBAAKrsC,YAAL,CAAkByC,IAAlB,CACI,gEAAU8L,CAACqB,kBADf,EAEI,KAAKo5B,IAFT;AAGH;AACD,oBAAI,CAAC,KAAKD,MAAV,EAAkB;AACd,yBAAKA,MAAL,GAAc,IAAd;AACA,wBAAMhP,MAAM,KAAK2G,eAAL,CAAqB,YAArB,IACNh5B,OAAO+5B,WAAP,CAAmB1H,GAAnB,EADN;;AAGA98B,2BAAOkK,GAAP,CAAW,sBAAX,EAAmC4yB,GAAnC;;AAEA;AACA,wBAAI,KAAK2I,QAAT,EAAmB;AACf,6BAAK+G,MAAL,GAAc,IAAd;AACH;;AAED,yBAAKzpC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACwB,UAAlC;AACH;AACJ,aAxBD,MAwBO,IAAI,KAAK64B,OAAL,CAAarB,IAAb,MAAuB3pC,SAA3B,EAAsC;AACzC;AACA,qBAAKgrC,OAAL,CAAarB,IAAb,IAAqBuD,MAArB;AACA7tC,uBAAOkK,GAAP,CAAW,SAAX,EAAsBogC,IAAtB,EAA4BuD,MAA5B;AACAG,kCAAkBH,OAAOvQ,MAAP,KAAkB38B,SAApC;AACA,oBAAIktC,OAAOQ,OAAX,EAAoB;AAChB,yBAAKgB,UAAL,CAAgB/E,IAAhB,EAAsBpF,GAAtB;AACH,iBAFD,MAEO;AACH;AACA;AACA;AACA,yBAAKniC,YAAL,CAAkByC,IAAlB,CACI,gEAAU8L,CAACyB,iBADf,EAEIu3B,IAFJ,EAGIuD,OAAOnG,IAHX,EAIImG,OAAO9B,IAJX,EAKI8B,OAAOU,cALX,EAMIV,OAAOsB,OANX,EAOItB,OAAOvQ,MAPX,EAQIuQ,OAAOkB,QARX,EASIlB,OAAOqB,OATX;;AAWA;AACA;AACAlB,sCAAkB,KAAlB;AACH;AACJ,aA1BM,MA0BA;AACH;AACA;AACA,oBAAMsB,eAAe,KAAK3D,OAAL,CAAarB,IAAb,CAArB;;AAEA,oBAAIgF,aAAavD,IAAb,KAAsB8B,OAAO9B,IAAjC,EAAuC;AACnCuD,iCAAavD,IAAb,GAAoB8B,OAAO9B,IAA3B;AACA,yBAAKhpC,YAAL,CAAkByC,IAAlB,CACI,gEAAU8L,CAAC4B,gBADf,EACiCo3B,IADjC,EACuCuD,OAAO9B,IAD9C;AAEH;;AAED;AACA,oBAAIuD,aAAaJ,OAAb,KAAyBrB,OAAOqB,OAApC,EAA6C;AACzCI,iCAAaJ,OAAb,GAAuBrB,OAAOqB,OAA9B;AACA,yBAAKnsC,YAAL,CAAkByC,IAAlB,CACI,gEAAU8L,CAACsB,2BADf,EAEI03B,IAFJ,EAGIuD,OAAOqB,OAHX;AAIH;;AAED,oBAAIrB,OAAOQ,OAAX,EAAoB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAiB,iCAAajB,OAAb,GAAuB,IAAvB;AACA,yBAAKgB,UAAL,CAAgB/E,IAAhB,EAAsBpF,GAAtB;AACH;;AAED;AACA,oBAAI2I,OAAO0B,WAAX,EAAwB;AACpBD,iCAAaC,WAAb,GAA2B1B,OAAO0B,WAAlC;AACH;;AAED;AACA,oBAAID,aAAahS,MAAb,KAAwBuQ,OAAOvQ,MAAnC,EAA2C;AACvC0Q,sCAAkB,IAAlB;AACAsB,iCAAahS,MAAb,GAAsBuQ,OAAOvQ,MAA7B;AACH;AACJ;;AAED;AACA;AACA,iBAAK,IAAIn3B,MAAI,CAAb,EAAgBA,MAAIkkC,MAAMjkC,MAA1B,EAAkCD,KAAlC,EAAuC;AACnC,oBAAMskC,QAAOJ,MAAMlkC,GAAN,CAAb;;AAEA,wBAAQskC,MAAKrI,OAAb;AACA,yBAAK,MAAL;AACI,4BAAI,CAACyL,OAAOQ,OAAZ,EAAqB;AACjB,gCAAMkB,cACA,KAAK3sC,IAAL,CAAUrC,OAAV,CAAkBivC,WAAlB,GACI,mDAAOpM,CAACuC,kBAAR,CAA2B2E,IAA3B,CADJ,GAEIuD,OAAOnG,IAHjB;;AAKA,gCAAI6H,eAAeA,YAAYnpC,MAAZ,GAAqB,CAAxC,EAA2C;AACvC,qCAAKrD,YAAL,CAAkByC,IAAlB,CACI,gEAAU8L,CAACjC,oBADf,EAEIi7B,IAFJ,EAGIiF,WAHJ;AAIH;AACJ;AACD;AACJ,yBAAK,oBAAL;AACI,4BAAI1B,OAAOQ,OAAP,IAAkB,CAAC,KAAKpC,iBAA5B,EAA+C;AAC3C,iCAAKA,iBAAL,GAAyB,IAAzB;AACA,iCAAKlpC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACI,WAAlC;AACH;AACD;AACJ,yBAAK,uBAAL;AACI,4BAAIm8B,OAAOQ,OAAX,EAAoB;AAChB,iCAAK,IAAIhyB,IAAI,CAAb,EAAgBA,IAAIouB,MAAKF,QAAL,CAAcnkC,MAAlC,EAA0CiW,GAA1C,EAA+C;AAAA,oCACnC9O,WADmC,GACpBk9B,MAAKF,QAAL,CAAcluB,CAAd,CADoB,CACnC9O,UADmC;;;AAG3C,oCAAI,CAACA,WAAL,EAAiB;AACb;AACH;;AAL0C,oCAOnC+M,GAPmC,GAOpB/M,WAPoB,CAOnC+M,GAPmC;AAAA,oCAO9BlR,KAP8B,GAOpBmE,WAPoB,CAO9BnE,KAP8B;;AAS3C;;AACA,wCAAQkR,GAAR;;AAEA;AACA;AACA,yCAAK,cAAL;;AAEA;AACA,yCAAK,YAAL;AACA,yCAAK,cAAL;AACIhY,wCAAA,uEAAUA,CAACkB,SAAX,CAAqBixB,sBAArB,qBACKna,IAAI3C,OAAJ,CAAY,GAAZ,EAAiB,GAAjB,CADL,EAC6BvO,KAD7B;AAGA;AAZJ;AAcA;AACH;AACJ;AACD;AACJ,yBAAK,sBAAL;AAA6B;AAAA,gCACjBmE,YADiB,GACFk9B,KADE,CACjBl9B,UADiB;;;AAGzB,gCAAI,CAACA,YAAL,EAAiB;AACb;AACH;;AALwB,gCAOjB+vB,MAPiB,GAON/vB,YAPM,CAOjB+vB,MAPiB;;;AASzB,gCAAIA,UAAUA,WAAW,KAAKmP,mBAA9B,EAAmD;AAC/C,qCAAKA,mBAAL,GAA2BnP,MAA3B;AACA,qCAAKv6B,YAAL,CAAkByC,IAAlB,CACI,gEAAU8L,CAACN,4BADf,EAEIssB,MAFJ;AAIH;;AAGD;AACH;AACD,yBAAK,cAAL;AAAqB;AACjB,gCAAMmS,MAAMhF,MAAKl9B,UAAjB;;AAEA,gCAAI,CAACkiC,GAAL,EAAU;AACN;AACH;AACD,iCAAKpD,WAAL,GAAmBoD,IAAIC,KAAJ,IAAa,IAAhC;AACA,iCAAKpD,QAAL,GAAgBmD,IAAIE,GAAJ,IAAW,IAA3B;AACA,iCAAK5sC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACnB,oBAAlC;AACA;AACH;AACD;AACI,6BAAKy/B,WAAL,CAAiBnF,KAAjB,EAAuBH,IAAvB;AApFJ;AAsFH;;AAED;AACA,gBAAI0D,eAAJ,EAAqB;AACjB,qBAAKjrC,YAAL,CAAkByC,IAAlB,CACI,gEAAU8L,CAACoC,eADf,EAEI42B,IAFJ,EAGIuD,OAAOvQ,MAHX;AAIH;AACJ;;AAED;;;;;;;;mCAKWgN,I,EAAMuF,M,EAAQ;AACrB,iBAAK7D,WAAL,GAAmB1B,IAAnB;;AAEAtqC,mBAAO0G,IAAP,oBAA6B4jC,IAA7B,oBAAgDuF,MAAhD;AACH;;AAED;;;;;;;uDAI+BjrC,Q,EAAU;AACrC,iBAAK2nC,2BAAL,GAAmC3nC,QAAnC;AACH;;AAED;;;;;;;;oCAKY6lC,I,EAAMH,I,EAAM;AACpB;AACA;AACA,gBAAI;AACA,oBAAIwF,cAAc,KAAKjE,YAAL,CAAkBpB,KAAKrI,OAAvB,CAAlB;;AAEA,oBAAIqI,KAAKrI,OAAL,CAAaxjB,UAAb,CAAwB,oBAAxB,CAAJ,EAAmD;AAC/CkxB,kCAAc,CAAE,KAAKvD,2BAAP,CAAd;AACH;;AAED,oBAAIuD,WAAJ,EAAiB;AACbA,gCAAYjlC,OAAZ,CAAoB,mBAAW;AAC3BC,gCAAQ2/B,IAAR,EAAc,mDAAOrH,CAACuC,kBAAR,CAA2B2E,IAA3B,CAAd,EAAgDA,IAAhD;AACH,qBAFD;AAGH;AACJ,aAZD,CAYE,OAAOjmC,CAAP,EAAU;AACR8G,gBAAA,kEAAoBA,CAACE,gBAArB,CAAsChH,CAAtC;AACArE,uBAAO0B,KAAP,uBAAiC+oC,KAAKrI,OAAtC,aAAuD/9B,CAAvD;AACH;AACJ;;AAED;;;;;;;;;oCAMYhC,O,EAAS0tC,W,EAAaC,Q,EAAU;AACxC,gBAAMzL,MAAM,wDAAI0L,CAAC,EAAE9Z,IAAI,KAAKmR,OAAX;AACbz/B,sBAAM,WADO,EAAL,CAAZ;;AAGA;AACA;AACA;AACA,gBAAIkoC,gBAAgB,MAApB,EAA4B;AACxBxL,oBAAI3U,CAAJ,CAAMmgB,WAAN,EAAmB1tC,OAAnB,EAA4B2oC,EAA5B;AACH,aAFD,MAEO;AACHzG,oBAAI3U,CAAJ,CAAMmgB,WAAN,EAAmB,EAAEnD,OAAO,0BAAT,EAAnB,EAA0DvqC,OAA1D,EACK2oC,EADL;AAEH;AACD,gBAAIgF,QAAJ,EAAc;AACVzL,oBAAI3U,CAAJ,CAAM,MAAN,EAAc,EAAEgd,OAAO,iCAAT,EAAd,EACK7B,CADL,CACOiF,QADP,EAEKhF,EAFL,GAGKA,EAHL;AAIH;AACD,iBAAK5oB,UAAL,CAAgBgrB,IAAhB,CAAqB7I,GAArB;AACA,iBAAKxhC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAAC6C,oBAAlC,EAAwD9R,OAAxD;AACH;;AAED;AACA;;;;;;;;;;2CAOmB+B,E,EAAI/B,O,EAAS0tC,W,EAAaC,Q,EAAU;AACnD,gBAAMzL,MAAM,wDAAI0L,CAAC,EAAE9Z,IAAO,KAAKmR,OAAZ,SAAuBljC,EAAzB;AACbyD,sBAAM,MADO,EAAL,CAAZ;;AAGA;AACA;AACA;AACA,gBAAIkoC,gBAAgB,MAApB,EAA4B;AACxBxL,oBAAI3U,CAAJ,CAAMmgB,WAAN,EAAmB1tC,OAAnB,EAA4B2oC,EAA5B;AACH,aAFD,MAEO;AACHzG,oBAAI3U,CAAJ,CAAMmgB,WAAN,EAAmB,EAAEnD,OAAO,0BAAT,EAAnB,EAA0DvqC,OAA1D,EACK2oC,EADL;AAEH;AACD,gBAAIgF,QAAJ,EAAc;AACVzL,oBAAI3U,CAAJ,CAAM,MAAN,EAAc,EAAEgd,OAAO,iCAAT,EAAd,EACK7B,CADL,CACOiF,QADP,EAEKhF,EAFL,GAGKA,EAHL;AAIH;;AAED,iBAAK5oB,UAAL,CAAgBgrB,IAAhB,CAAqB7I,GAArB;AACA,iBAAKxhC,YAAL,CAAkByC,IAAlB,CACI,gEAAU8L,CAAC8C,4BADf,EAC6C/R,OAD7C;AAEH;AACD;;AAEA;;;;;;;mCAIW6tC,O,EAAS;AAChB,gBAAM3L,MAAM,wDAAI0L,CAAC,EAAE9Z,IAAI,KAAKmR,OAAX;AACbz/B,sBAAM,WADO,EAAL,CAAZ;;AAGA08B,gBAAI3U,CAAJ,CAAM,SAAN,EAAiBsgB,OAAjB;AACA,iBAAK9tB,UAAL,CAAgBgrB,IAAhB,CAAqB7I,GAArB;AACH;;AAED;;;;;;;;;0CAMkBW,G,EAAKiL,U,EAAY;AAC/B,mBAAO,KAAK/D,aAAL,CAAmBlH,GAAnB,CAAP;;AAEA,gBAAIiL,UAAJ,EAAgB;AACZ;AACH;;AAED,iBAAKptC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAAC0B,eAAlC,EAAmDkyB,GAAnD;;AAEA,iBAAKgH,SAAL,CAAekE,eAAf,CAA+BlL,GAA/B;AACH;;AAED;;;;;;;;8CAKsBgG,I,EAAMZ,I,EAAM;AAAA;;AAC9B;AACA,gBAAIvG,EAAEmH,IAAF,EAAQ1tB,IAAR,CAAa,4CAAb,EAA2DpX,MAA/D,EAAuE;AACnE,uBAAO,IAAP;AACH;;AAED;AACA,gBAAI29B,EAAEmH,IAAF,EAAQ1tB,IAAR,CAAa,oDACX,UADF,EACcpX,MADlB,EAC0B;AACtB,oBAAI8E,eAAJ;AACA,oBAAMmlC,eACAtM,EAAEmH,IAAF,EAAQ1tB,IAAR,CACE,oDACM,iBAFR,CADN;;AAKA,oBAAI6yB,aAAajqC,MAAjB,EAAyB;AACrB8E,6BAASmlC,aAAa34B,IAAb,EAAT;AACH;;AAED,qBAAK3U,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACuB,aAAlC,EAAiD3H,MAAjD;AACA,qBAAKkX,UAAL,CAAgBulB,IAAhB,CAAqB2I,OAArB,CAA6B,KAAKhJ,OAAlC;;AAEA,uBAAO,IAAP;AACH;;AAED;AACA,gBAAMiJ,iBACAxM,EAAEmH,IAAF,EACG1tB,IADH,CAEM,qDACM,oBAHZ,EAIGpX,MALT;AAMA,gBAAMoqC,SACAzM,EAAEmH,IAAF,EACG1tB,IADH,CAEM,oDACM,qBAHZ,EAIGpX,MALT;AAMA,gBAAMqqC,cAAchtC,OAAOoC,IAAP,CAAY,KAAK8lC,OAAjB,CAApB;;AAEA,gBAAI,CAAC4E,cAAL,EAAqB;AACjB,uBAAO,KAAK5E,OAAL,CAAarB,IAAb,CAAP;AACA,qBAAKoG,iBAAL,CAAuBpG,IAAvB,EAA6B,KAA7B;AACH,aAHD,MAGO,IAAImG,YAAYrqC,MAAZ,GAAqB,CAAzB,EAA4B;AAC/B;AACA;AACA;AACAqqC,4BAAY5lC,OAAZ,CAAoB,eAAO;AACvB,wBAAMgjC,SAAS,OAAKlC,OAAL,CAAazG,GAAb,CAAf;;AAEA,2BAAO,OAAKyG,OAAL,CAAazG,GAAb,CAAP;AACA,2BAAKwL,iBAAL,CAAuBxL,GAAvB,EAA4B2I,OAAOQ,OAAnC;AACH,iBALD;AAMA,qBAAKjsB,UAAL,CAAgBulB,IAAhB,CAAqB2I,OAArB,CAA6B,KAAKhJ,OAAlC;;AAEA;AACA;AACA,oBAAI,CAACkJ,MAAL,EAAa;AACT,yBAAKztC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAAC2B,QAAlC;AACH;AACJ;;AAED,gBAAIu9B,UAAU,KAAK9E,SAAL,KAAmBpB,IAAjC,EAAuC;AACnC,qBAAKvnC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAAC5B,MAAlC;AACH;AACJ;;AAED;;;;;;;;kCAKU60B,G,EAAK+F,I,EAAM;AACjB,gBAAM5C,OACA3D,EAAEQ,GAAF,EAAO/mB,IAAP,CAAY,gDAAZ,EACG9F,IADH,MAEC,mDAAO0rB,CAACuC,kBAAR,CAA2B2E,IAA3B,CAHP;;AAKA,gBAAMqG,MAAM5M,EAAEQ,GAAF,EAAO/mB,IAAP,CAAY,OAAZ,EAAqB9F,IAArB,EAAZ;AACA,gBAAM7P,OAAO08B,IAAIxqB,YAAJ,CAAiB,MAAjB,CAAb;;AAEA,gBAAIlS,SAAS,OAAb,EAAsB;AAClB,qBAAK9E,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACQ,mBAAlC,EACIiyB,EAAEQ,GAAF,EAAO/mB,IAAP,CAAY,OAAZ,EAAqB9F,IAArB,EADJ,EACiCi5B,GADjC;;AAGA,uBAAO,IAAP;AACH;;AAED,gBAAMT,UAAUnM,EAAEQ,GAAF,EAAO/mB,IAAP,CAAY,UAAZ,CAAhB;;AAEA,gBAAI0yB,QAAQ9pC,MAAZ,EAAoB;AAChB,oBAAMwqC,cAAcV,QAAQx4B,IAAR,EAApB;;AAEA,oBAAIk5B,eAAeA,gBAAgB,EAAnC,EAAuC;AACnC,yBAAK7tC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACb,eAAlC,EAAmDmgC,WAAnD;AACA5wC,2BAAOkK,GAAP,4BAAoC0mC,WAApC;AACH;AACJ;;AAED;AACA,gBAAIC,QAAQ9M,EAAEQ,GAAF,EAAO/mB,IAAP,CAAY,QAAZ,EAAsBktB,IAAtB,CAA2B,OAA3B,CAAZ;;AAEA,gBAAI,CAACmG,KAAL,EAAY;AACR;AACAA,wBAAQ9M,EAAEQ,GAAF,EAAO/mB,IAAP,CAAY,2BAAZ,EAAyCktB,IAAzC,CAA8C,OAA9C,CAAR;;AAEA,oBAAImG,KAAJ,EAAW;AACP;AACA,wBAAMC,YACAD,MAAME,KAAN,CAAY,yCAAZ,CADN;;AAGAF,4BAAWC,UAAU,CAAV,CAAX,SAA2BA,UAAU,CAAV,CAA3B,SAA2CA,UAAU,CAAV,CAA3C;AACH;AACJ;;AAED,gBAAIxG,SAAS,KAAKhD,OAAd,IACOvD,EAAEQ,GAAF,EACE/mB,IADF,CAEK,oDACM,qBAHX,EAIEpX,MALb,EAKqB;AACjB,qBAAK4qC,aAAL;AACH;AACD,gBAAMC,cAAclN,EAAEQ,GAAF,EAAO/mB,IAAP,CAAY,eAAZ,EAA6B9F,IAA7B,EAApB;AACA,gBAAMw5B,aAAa7F,sBAAsB4F,WAAtB,CAAnB;;AAEA;AACA;AACA;AACA,gBAAIC,cAAcL,UAAUlwC,SAA5B,EAAuC;AACnC,qBAAKoC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACmD,qBAAlC,EACI61B,IADJ,EACU4G,UADV;;AAGA;AACH;;AAED,gBAAIP,GAAJ,EAAS;AACL,oBAAI9oC,SAAS,MAAb,EAAqB;AACjB,yBAAK9E,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACxB,wBAAlC,EACQw6B,IADR,EACc5C,IADd,EACoBiJ,GADpB,EACyB,KAAKjF,SAD9B,EACyCmF,KADzC;AAEH,iBAHD,MAGO,IAAIhpC,SAAS,WAAb,EAA0B;AAC7B,yBAAK9E,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACzB,gBAAlC,EACQy6B,IADR,EACc5C,IADd,EACoBiJ,GADpB,EACyB,KAAKjF,SAD9B,EACyCmF,KADzC;AAEH;AACJ;AACJ;;AAED;;;;;;;;wCAKgB3F,I,EAAMZ,I,EAAM;AACxB,gBAAIvG,EAAEmH,IAAF,EACK1tB,IADL,CAEQ,wBACM,kBADN,GAEM,8CAJd,EAKKpX,MALT,EAKiB;AACbpG,uBAAOkK,GAAP,CAAW,sBAAX,EAAmCogC,IAAnC;AACA,qBAAKvnC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACiC,iBAAlC;AACH,aARD,MAQO,IAAIwwB,EAAEmH,IAAF,EACF1tB,IADE,CAEC,0BACM,eADN,GAEM,8CAJP,EAKFpX,MALF,EAKU;AACb,oBAAM+qC,WAAW,mDAAO/N,CAACgO,gBAAR,CAAyBlG,KAAKnxB,YAAL,CAAkB,IAAlB,CAAzB,CAAjB;;AAEA,oBAAIo3B,aAAa,KAAKvuC,IAAL,CAAUrC,OAAV,CAAkBsmC,KAAlB,CAAwBC,eAAzC,EAA0D;AACtD;AACA;AACA;AACA;AACA,yBAAK/jC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAAC2C,eAAlC;AAEH,iBAPD,MAOO;AACHjU,2BAAOoD,IAAP,CAAY,cAAZ,EAA4B8nC,IAA5B;AACA,yBAAKnoC,YAAL,CAAkByC,IAAlB,CACI,gEAAU8L,CAAC0C,8BADf;AAEH;AACJ,aApBM,MAoBA,IAAI+vB,EAAEmH,IAAF,EAAQ1tB,IAAR,CAAa,4BAAb,EAA2CpX,MAA/C,EAAuD;AAC1DpG,uBAAOoD,IAAP,CAAY,mDAAZ,EACI8nC,IADJ;AAEA,qBAAKnoC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAAC4C,oBAAlC;AACH,aAJM,MAIA;AACHlU,uBAAOoD,IAAP,CAAY,cAAZ,EAA4B8nC,IAA5B;AACA,qBAAKnoC,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACyC,kBAAlC;AACH;AACJ;;AAED;;;;;;;6BAIKmxB,G,EAAK;AACN,gBAAMmM,SAAS,uDAAG/D,CAAC,EAAEnX,IAAI,KAAKmR,OAAX;AACfz/B,sBAAM,KADS,EAAJ,EAEV+nB,CAFU,CAER,OAFQ,EAEC,EAAEgd,OAAO,sCAAT,EAFD,EAGVhd,CAHU,CAGR,MAHQ,EAGA,EAAE8X,MAAM,mDAAOtE,CAACuC,kBAAR,CAA2BT,GAA3B,CAAR;AACP6G,sBAAM,MADC,EAHA,EAKVnc,CALU,CAKR,QALQ,EAKEmb,CALF,CAKI,uBALJ,EAK6BC,EAL7B,GAKkCA,EALlC,GAKuCA,EALvC,EAAf;;AAOA,iBAAK5oB,UAAL,CAAgBqrB,MAAhB,CACI4D,MADJ,EAEI;AAAA,uBAAUrxC,OAAOkK,GAAP,CAAW,6BAAX,EAA0Cg7B,GAA1C,EAA+CrjB,MAA/C,CAAV;AAAA,aAFJ,EAGI;AAAA,uBAAS7hB,OAAOkK,GAAP,CAAW,0BAAX,EAAuCxI,KAAvC,CAAT;AAAA,aAHJ;AAIH;;AAED;;AAEA;;;;;;;;;;iCAOS4Y,G,EAAKg3B,S,EAAWC,O,EAASC,c,EAAgB;AAAA;;AAC9C;AACA,iBAAKpvB,UAAL,CAAgBqrB,MAAhB,CACI,uDAAGH,CAAC;AACAnX,oBAAI,KAAKmR,OADT;AAEAz/B,sBAAM;AAFN,aAAJ,EAIK+nB,CAJL,CAIO,OAJP,EAIgB,EAAEgd,OAAO,sCAAT,EAJhB,CADJ,EAMI,eAAO;AACH,oBAAI7I,EAAE7a,GAAF,EACK1L,IADL,CAEQ,oCACM,yCAHd,EAIKpX,MAJT,EAIiB;AACb,wBAAMqrC,aACA,uDAAGnE,CAAC;AACFnX,4BAAI,OAAKmR,OADP;AAEFz/B,8BAAM;AAFJ,qBAAJ,EAIG+nB,CAJH,CAIK,OAJL,EAIc;AACRgd,+BAAO;AADC,qBAJd,CADN;;AASA6E,+BAAW7hB,CAAX,CAAa,GAAb,EAAkB;AACdgd,+BAAO,eADO;AAEd/kC,8BAAM;AAFQ,qBAAlB;AAIA4pC,+BACK7hB,CADL,CACO,OADP,EACgB,EAAE,OAAO,WAAT,EADhB,EAEKA,CAFL,CAEO,OAFP,EAGKmb,CAHL,CAGO,2CAHP,EAIKC,EAJL,GAKKA,EALL;AAMAyG,+BACK7hB,CADL,CACO,OADP,EACgB,EAAE,OAAO,2BAAT,EADhB,EAEKA,CAFL,CAEO,OAFP,EAGKmb,CAHL,CAGOzwB,GAHP,EAIK0wB,EAJL,GAKKA,EALL;;AAOA;AACA;AACAyG,+BACK7hB,CADL,CACO,OADP,EACgB,EAAE,OAAO,sBAAT,EADhB,EAEKA,CAFL,CAEO,OAFP,EAGKmb,CAHL,CAGO,QAHP,EAIKC,EAJL,GAKKA,EALL;;AAOA;AACA,2BAAK5oB,UAAL,CAAgBqrB,MAAhB,CAAuBgE,UAAvB,EAAmCH,SAAnC,EAA8CC,OAA9C;AACH,iBA1CD,MA0CO;AACHC;AACH;AACJ,aApDL,EAqDID,OArDJ;AAsDH;;AAED;;AAEA;;;;;;;;sCAKcj3B,G,EAAK7U,M,EAAQ;AACvBA,mBAAO28B,OAAP,GAAiB9nB,GAAjB;AACA,iBAAKo3B,kBAAL,CAAwBp3B,GAAxB;AACA,iBAAKsxB,OAAL,CAAavB,KAAb,CAAmB3lC,IAAnB,CAAwBe,MAAxB;AACH;;AAED;;;;;;;2CAImB6U,G,EAAK;AACpB,gBAAM+vB,QAAQ,KAAKuB,OAAL,CAAavB,KAAb,CAAmBptB,MAAnB,CAA0B;AAAA,uBAAQ3C,QAAQmwB,KAAKrI,OAArB;AAAA,aAA1B,CAAd;;AAEA,iBAAKwJ,OAAL,CAAavB,KAAb,GAAqBA,KAArB;AACH;;AAED;;;;;;;;4CAKoBtoC,I,EAAM+I,O,EAAS;AAC/B,gBAAI,OAAOA,OAAP,KAAmB,UAAvB,EAAmC;AAC/B,sBAAM,IAAIjJ,KAAJ,CAAU,6BAAV,CAAN;AACH;AACD,gBAAIiuC,cAAc,KAAKjE,YAAL,CAAkB9pC,IAAlB,CAAlB;;AAEA,gBAAI,CAAC+tC,WAAL,EAAkB;AACd,qBAAKjE,YAAL,CAAkB9pC,IAAlB,IAA0B+tC,cAAc,EAAxC;AACH;AACD,gBAAIA,YAAYj5B,OAAZ,CAAoB/L,OAApB,MAAiC,CAAC,CAAtC,EAAyC;AACrCglC,4BAAYprC,IAAZ,CAAiBoG,OAAjB;AACH,aAFD,MAEO;AACH9K,uBAAOoD,IAAP,yDAC0DrB,IAD1D;AAEH;AACJ;;AAED;;;;;;;;+CAKuBA,I,EAAM+I,O,EAAS;AAClC,gBAAMglC,cAAc,KAAKjE,YAAL,CAAkB9pC,IAAlB,CAApB;AACA,gBAAM4vC,aAAa7B,cAAcA,YAAYj5B,OAAZ,CAAoB/L,OAApB,CAAd,GAA6C,CAAC,CAAjE;;AAEA;AACA,gBAAI6mC,eAAe,CAAC,CAApB,EAAuB;AACnB7B,4BAAYzpC,MAAZ,CAAmBsrC,UAAnB,EAA+B,CAA/B;AACH,aAFD,MAEO;AACH3xC,uBAAOoD,IAAP,mBAA4BrB,IAA5B;AACH;AACJ;;AAED;;;;;;;;;;;gCAQQ8tC,M,EAAQ;AACZ,gBAAMhC,SAAS,KAAKlC,OAAL,CAAakE,MAAb,CAAf;;AAEA,gBAAIhC,MAAJ,EAAY;AACR,uBAAOA,OAAOQ,OAAd;AACH;;AAED,mBAAO,IAAP;AACH;;AAED;;;;;;sCAGc;AACV,mBAAO,KAAKtC,IAAL,KAAc,WAArB;AACH;;AAED;;;;;;;sCAIc6F,O,EAAS;AACnB,gBAAI,KAAKjG,OAAL,CAAaiG,OAAb,CAAJ,EAA2B;AACvB,uBAAO,KAAKjG,OAAL,CAAaiG,OAAb,EAAsB7F,IAA7B;AACH;;AAED,mBAAO,IAAP;AACH;;AAED;;;;;;;;qCAKaxW,I,EAAM9wB,Q,EAAU;AACzB,iBAAKotC,qBAAL,CAA2Btc,IAA3B;AACA,gBAAI9wB,QAAJ,EAAc;AACVA,yBAAS8wB,IAAT;AACH;AACJ;;AAED;;;;;;;;qCAKaA,I,EAAM9wB,Q,EAAU;AACzB,mBAAO,KAAKqtC,qBAAL,CAA2Bvc,IAA3B,EAAiC9wB,QAAjC,CAAP;AACH;;AAED;;;;;;;+CAIuB8wB,I,EAAM;AACzB,iBAAKmc,kBAAL,CAAwB,YAAxB;AACA,iBAAKK,aAAL,CACI,YADJ,EAEI;AACIxkC,4BAAY,EAAE,SAAS,gCAAX,EADhB;AAEInE,uBAAOmsB,KAAKna,QAAL;AAFX,aAFJ;AAMH;;AAED;;;;;;;;8CAKsBma,I,EAAM9wB,Q,EAAU;AAClC,iBAAKutC,sBAAL,CAA4Bzc,IAA5B;AACA,gBAAI,KAAKnT,UAAT,EAAqB;AACjB,qBAAK6qB,YAAL;AACH;AACD,gBAAIxoC,QAAJ,EAAc;AACVA;AACH;AACJ;;AAED;;;;;;;+CAIuB8wB,I,EAAM;AACzB,iBAAKmc,kBAAL,CAAwB,YAAxB;AACA,iBAAKK,aAAL,CACI,YADJ,EAEI;AACIxkC,4BAAY,EAAE,SAAS,gCAAX,EADhB;AAEInE,uBAAOmsB,KAAKna,QAAL;AAFX,aAFJ;AAMH;;AAED;;;;;;;8CAIsBma,I,EAAM;AACxB,iBAAKuX,sBAAL,CAA4BvX,IAA5B;AACA,gBAAI,CAAC,KAAKnT,UAAV,EAAsB;AAClB;AACH;AACD,iBAAK6qB,YAAL;AACH;;AAED;;;;;;;;;;;;;;6CAWqBtQ,U,EAAYxuB,S,EAAW;AACxC;AACA,gBAAM+8B,OAAO,KAAKkB,aAAL,CAAsB,KAAK9E,OAA3B,SAAsC3K,UAAtC,CAAb;;AAEA,gBAAI,CAACuO,IAAL,EAAW;AACP;AACA,uBAAO,IAAP;AACH;AACD,gBAAMnzB,OAAO;AACTnQ,uBAAO,KADE,EACK;AACd+hB,2BAAWhpB,SAFF,CAEY;AAFZ,aAAb;AAIA,gBAAIsxC,YAAY,IAAhB;;AAEA,gBAAI9jC,cAAc,qEAAlB,EAAmC;AAC/B8jC,4BAAYhH,2BAA2BC,IAA3B,EAAiC,YAAjC,CAAZ;AACH,aAFD,MAEO,IAAI/8B,cAAc,qEAAlB,EAAmC;AACtC8jC,4BAAYhH,2BAA2BC,IAA3B,EAAiC,YAAjC,CAAZ;AACA,oBAAMgH,gBAAgBjH,2BAA2BC,IAA3B,EAAiC,WAAjC,CAAtB;;AAEA,oBAAIgH,cAAc9rC,MAAd,GAAuB,CAA3B,EAA8B;AAC1B2R,yBAAK4R,SAAL,GAAiBuoB,cAAc,CAAd,EAAiB9oC,KAAlC;AACH;AACJ,aAPM,MAOA;AACHpJ,uBAAO0B,KAAP,8BAAwCyM,SAAxC;;AAEA,uBAAO,IAAP;AACH;;AAED4J,iBAAKnQ,KAAL,GAAaqqC,UAAU7rC,MAAV,GAAmB,CAAnB,IAAwB6rC,UAAU,CAAV,EAAa7oC,KAAb,KAAuB,MAA5D;;AAEA,mBAAO2O,IAAP;AACH;;AAED;;;;;;gDAGwB;AACpB,gBAAI,KAAKm0B,SAAT,EAAoB;AAChB,uBAAO,KAAKA,SAAL,CAAeiG,mBAAf,EAAP;AACH;;AAED,mBAAO,KAAP;AACH;;AAED;;;;;;;6BAIKC,M,EAAQ;AACT,mBAAO,KAAKhwB,UAAL,CAAgBiiB,IAAhB,CAAqByD,IAArB,CAA0BsK,MAA1B,EAAkC,YAAlC,EACH,mDAAOhP,CAACqI,iBAAR,CAA0B,KAAKC,SAA/B,CADG,EACwC,KAAKjG,QAD7C,EAEH,KAAKuG,WAFF,CAAP;AAGH;;AAED;;;;;;iCAGS;AACL,mBAAO,KAAK5pB,UAAL,CAAgBiiB,IAAhB,CAAqBgO,MAArB,EAAP;AACH;;AAED;;;;;;yCAGiB;AACb,mBAAO,KAAKhG,WAAZ;AACH;;AAED;;;;;;sCAGc;AACV,mBAAO,KAAKC,QAAZ;AACH;;AAED;;;;;;;;wCAKgBpH,G,EAAK3P,I,EAAM;AACvBv1B,mBAAO0G,IAAP,CAAY,UAAZ,EAAwB6uB,IAAxB;AACA,gBAAM+c,YAAY,uDAAGhF,CACjB,EAAEnX,IAAI,KAAK6V,WAAX;AACInkC,sBAAM,KADV,EADc,EAGb+nB,CAHa,CAGX,MAHW,EAGH;AACPgd,uBAAO,gCADA;AAEP1H;AAFO,aAHG,EAOb6F,CAPa,CAOXxV,KAAKna,QAAL,EAPW,EAQb4vB,EARa,EAAlB;;AAUA,iBAAK5oB,UAAL,CAAgBqrB,MAAhB,CACI6E,SADJ,EAEI;AAAA,uBAAUtyC,OAAOkK,GAAP,CAAW,UAAX,EAAuB2X,MAAvB,CAAV;AAAA,aAFJ,EAGI;AAAA,uBAAS7hB,OAAOkK,GAAP,CAAW,gBAAX,EAA6BxI,KAA7B,CAAT;AAAA,aAHJ;AAIH;;AAED;;;;;;;+BAIO6wC,E,EAAI;AACP,gBAAMjI,OAAOiI,GAAGx4B,YAAH,CAAgB,MAAhB,CAAb;;AAEA,gBAAIuwB,SAAS,KAAK0B,WAAlB,EAA+B;AAC3BhsC,uBAAOoD,IAAP,CAAY,kCAAZ;;AAEA;AACH;AACD,gBAAMmyB,OAAOwO,EAAEwO,EAAF,EAAM/0B,IAAN,CAAW,MAAX,CAAb;;AAEA,gBAAI+X,KAAKnvB,MAAL,IAAemvB,KAAK7d,IAAL,OAAgB,MAAnC,EAA2C;AACvC,qBAAK3U,YAAL,CAAkByC,IAAlB,CAAuB,gEAAU8L,CAACE,oBAAlC;AACH,aAFD,MAEO;AACH;AACA;AACA;AACAxR,uBAAOoD,IAAP,CAAY,uDACN,kCADN;AAEH;AACJ;;AAED;;;;;;;;;gCAMQ;AAAA;;AACJ,mBAAO,IAAIqpB,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,oBAAMgR,UAAUoB,WAAW;AAAA,2BAAMyT,UAAU,IAAV,CAAN;AAAA,iBAAX,EAAkC,IAAlC,CAAhB;AACA,oBAAMzvC,eAAe,OAAKA,YAA1B;;AAEA;;;;AAIA,yBAASyvC,SAAT,GAAqC;AAAA,wBAAlBC,QAAkB,uEAAP,KAAO;;AACjC1vC,iCAAagC,cAAb,CAA4B,gEAAUuM,CAAC2B,QAAvC,EAAiDu/B,SAAjD;AACA/V,iCAAakB,OAAb;AACA,wBAAI8U,QAAJ,EAAc;AACV;AACA9lB,+BAAO,IAAI9qB,KAAJ,CAAU,4CACX,2BADC,CAAP;AAEH,qBAJD,MAIO;AACH6qB;AACH;AACJ;AACD3pB,6BAAa8B,EAAb,CAAgB,gEAAUyM,CAAC2B,QAA3B,EAAqCu/B,SAArC;AACA,uBAAKlC,OAAL;AACH,aArBM,CAAP;AAsBH;;;;EA9yCiC,iE;;AAizCtC;;;AAjzCqB,yDAAA9E,Q;;;;;;;;ACpIrB;AAAA;AAAA;AAAA;;;;;AAKO,IAAMkH,KAAK,IAAX;;AAEP;;;;;AAKO,IAAMC,MAAM,KAAZ,C;;;;;;ACZP,IAAMC,uBAAuB;AACzB;;;;;;;;AAQAC,oBAAkB;AATO,CAA7B;;AAYArnC,OAAOC,OAAP,GAAiBmnC,oBAAjB,C;;;;;;ACZA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;ACvLtC;AAAA;AAAA;AAAA;;;;;;AAMO,IAAME,UAAU,SAAhB;;AAEP;;;;;;AAMO,IAAMvY,SAAS,QAAf;;AAEP;;;;;AAKO,IAAMwY,QAAQ,OAAd,C;;;;;;;;;;;ACrBP;;AAEA;;AAEA;;;;AAIe,SAASC,GAAT,CAAav0B,GAAb,EAAkB;AAC7B,QAAM3F,QAAQ2F,IAAI5F,KAAJ,CAAU,QAAV,CAAd;;AAEA,SAAK,IAAI1S,IAAI,CAAR,EAAWC,SAAS0S,MAAM1S,MAA/B,EAAuCD,IAAIC,MAA3C,EAAmDD,GAAnD,EAAwD;AACpD,YAAI8sC,gBAAcn6B,MAAM3S,CAAN,CAAlB;;AAEA,YAAIA,MAAMC,SAAS,CAAnB,EAAsB;AAClB6sC,sBAAU,MAAV;AACH;AACDn6B,cAAM3S,CAAN,IAAW8sC,MAAX;AACH;AACD,QAAMC,UAAap6B,MAAMC,KAAN,EAAb,SAAN;;AAEA,SAAKD,KAAL,GAAaA,KAAb;AACA,SAAKq6B,GAAL,GAAWD,UAAUp6B,MAAMpC,IAAN,CAAW,EAAX,CAArB;AACA,SAAKw8B,OAAL,GAAeA,OAAf;AACH;;AAED;;;;;;AAMAF,IAAInvC,SAAJ,CAAcuvC,OAAd,GAAwB,KAAxB;;AAEA;;;;AAIAJ,IAAInvC,SAAJ,CAAcwvC,mBAAd,GAAoC,KAApC;;AAEA;;;;AAIAL,IAAInvC,SAAJ,CAAcyvC,mBAAd,GAAoC,KAApC;;AAEA;;;AAGAN,IAAInvC,SAAJ,CAAc0vC,eAAd,GAAgC,YAAW;AACvC,QAAMhS,OAAO,IAAb;AACA,QAAMiS,aAAa,EAAnB;AACA,QAAIC,YAAJ;;AAHuC,+BAK9BC,UAL8B;AAMnCD,cAAM,yDAAOj8B,CAAC8E,SAAR,CAAkBilB,KAAKzoB,KAAL,CAAW46B,UAAX,CAAlB,EAA0C,SAA1C,CAAN;AACA,YAAMC,MACA,yDAAOn8B,CAACkB,QAAR,CACE,yDAAOlB,CAACU,QAAR,CAAiBqpB,KAAKzoB,KAAL,CAAW46B,UAAX,CAAjB,EAAyC,QAAzC,CADF,CADN;AAGA,YAAM56B,QAAQ;AACV46B,kCADU;AAEVC,oBAFU;AAGV72B,mBAAO,EAHG;AAIVO,wBAAY;AAJF,SAAd;;AAOAm2B,mBAAWE,UAAX,IAAyB56B,KAAzB;AACA26B,YAAI5oC,OAAJ,CAAY,gBAAQ;AAChB,gBAAM+oC,WAAWv7B,KAAKC,SAAL,CAAe,CAAf,EAAkBO,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAjB;;AAEA;;AAEA,gBAAI,CAACC,MAAMgE,KAAN,CAAY82B,QAAZ,CAAL,EAA4B;AACxB96B,sBAAMgE,KAAN,CAAY82B,QAAZ,IAAwB;AACpB7rC,0BAAM6rC,QADc;AAEpBj4B,2BAAO;AAFa,iBAAxB;AAIH;AACD7C,kBAAMgE,KAAN,CAAY82B,QAAZ,EAAsBj4B,KAAtB,CAA4BjX,IAA5B,CAAiC2T,IAAjC;AACH,SAZD;AAaAo7B,cAAM,yDAAOj8B,CAAC8E,SAAR,CAAkBilB,KAAKzoB,KAAL,CAAW46B,UAAX,CAAlB,EAA0C,eAA1C,CAAN;AACAD,YAAI5oC,OAAJ,CAAY,gBAAQ;AAChB,gBAAMgpC,MAAMx7B,KAAKxB,OAAL,CAAa,GAAb,CAAZ;AACA,gBAAM6G,YAAYrF,KAAKgD,MAAL,CAAY,CAAZ,EAAew4B,GAAf,EAAoBx4B,MAApB,CAA2B,EAA3B,CAAlB;AACA,gBAAMyB,QAAQzE,KAAKgD,MAAL,CAAY,KAAKqC,UAAUtX,MAA3B,EAAmCyS,KAAnC,CAAyC,GAAzC,CAAd;;AAEA,gBAAIiE,MAAM1W,MAAV,EAAkB;AACd0S,sBAAMuE,UAAN,CAAiB3Y,IAAjB,CAAsB;AAClBgZ,wCADkB;AAElBZ;AAFkB,iBAAtB;AAIH;AACJ,SAXD;AAhCmC;;AAKvC,SAAK,IAAI42B,aAAa,CAAtB,EAAyBA,aAAanS,KAAKzoB,KAAL,CAAW1S,MAAjD,EAAyDstC,YAAzD,EAAuE;AAAA,cAA9DA,UAA8D;AAuCtE;;AAED,WAAOF,UAAP;AACH,CA/CD;;AAiDA;;;;;AAKAR,IAAInvC,SAAJ,CAAciwC,YAAd,GAA6B,UAAS/rC,IAAT,EAAe;AACxC;AACA,QAAMgsC,SAAS,KAAKR,eAAL,EAAf;AACA,QAAI1xB,SAAS,KAAb;;AAEApe,WAAOoC,IAAP,CAAYkuC,MAAZ,EAAoBlpC,OAApB,CAA4B,sBAAc;AACtC,YAAIgX,MAAJ,EAAY;AACR;AACH;AACD,YAAIkyB,OAAOL,UAAP,EAAmB52B,KAAnB,CAAyB/U,IAAzB,CAAJ,EAAoC;AAChC8Z,qBAAS,IAAT;AACH;AACJ,KAPD;;AASA,WAAOA,MAAP;AACH,CAfD;;AAiBA;AACAmxB,IAAInvC,SAAJ,CAAcmwC,MAAd,GAAuB,YAAW;AAC9B,QAAI7tC,UAAJ;AAAA,QAAOkW,UAAP;AAAA,QAAUV,cAAV;AAAA,QAAiBtC,cAAjB;AAAA,QAAwB46B,gBAAxB;AAAA,QAAiCC,eAAjC;;AAEA,SAAK/tC,IAAI,CAAT,EAAYA,IAAI,KAAK2S,KAAL,CAAW1S,MAA3B,EAAmCD,GAAnC,EAAwC;AACpCwV,gBAAQ,KAAK7C,KAAL,CAAW3S,CAAX,EAAc0S,KAAd,CAAoB,MAApB,CAAR;AACA8C,cAAMzC,GAAN,GAFoC,CAEvB;AACbG,gBAAQ,yDAAO7B,CAACmB,UAAR,CAAmBgD,MAAM5C,KAAN,EAAnB,CAAR;AACA,YAAIM,MAAMP,KAAN,KAAgB,OAApB,EAA6B;AACzB,qBADyB,CACf;AACb;AACDm7B,kBAAU,EAAV;AACA56B,cAAMF,GAAN,CAAU/S,MAAV,GAAmB,CAAnB;AACA,aAAKiW,IAAI,CAAT,EAAYA,IAAIV,MAAMvV,MAAtB,EAA8BiW,GAA9B,EAAmC;AAC/B,gBAAIV,MAAMU,CAAN,EAAShB,MAAT,CAAgB,CAAhB,EAAmB,CAAnB,MAA0B,WAA9B,EAA2C;AACvC64B,yBAAS,yDAAO18B,CAAC8B,WAAR,CAAoBqC,MAAMU,CAAN,CAApB,CAAT;AACA,oBAAI63B,OAAOnyC,IAAP,KAAgB,IAAhB,IAAwBmyC,OAAOnyC,IAAP,KAAgB,MAA5C,EAAoD;AAChD,6BADgD,CACtC;AACb;AACDsX,sBAAMF,GAAN,CAAUzU,IAAV,CAAewvC,OAAO9vC,EAAtB;AACH;AACD6vC,uBAAct4B,MAAMU,CAAN,CAAd;AACH;AACD,aAAKvD,KAAL,CAAW3S,CAAX,IAAmB,yDAAOqR,CAAC4B,UAAR,CAAmBC,KAAnB,CAAnB,YAAmD46B,OAAnD;AACH;AACD,SAAKd,GAAL,GAAW,KAAKD,OAAL,GAAe,KAAKp6B,KAAL,CAAWpC,IAAX,CAAgB,EAAhB,CAA1B;AACH,CAzBD;;AA2BA;AACAs8B,IAAInvC,SAAJ,CAAcswC,kBAAd,GAAmC,UAASC,MAAT,EAAiB;AAChD,QAAM7S,OAAO,IAAb;AACA,QAAM5lB,QAAQ,yDAAOnE,CAAC8E,SAAR,CAAkB,KAAK42B,OAAvB,EAAgCkB,MAAhC,CAAd;;AAEAz4B,UAAM9Q,OAAN,CAAc,gBAAQ;AAClB02B,aAAK2R,OAAL,GAAe3R,KAAK2R,OAAL,CAAav7B,OAAb,CAAwBU,IAAxB,WAAoC,EAApC,CAAf;AACH,KAFD;AAGA,SAAK86B,GAAL,GAAW,KAAKD,OAAL,GAAe,KAAKp6B,KAAL,CAAWpC,IAAX,CAAgB,EAAhB,CAA1B;;AAEA,WAAOiF,KAAP;AACH,CAVD;;AAYA;AACA;AACAq3B,IAAInvC,SAAJ,CAAcwwC,gBAAd,GAAiC,UAASX,UAAT,EAAqBU,MAArB,EAA6B;AAC1D,QAAM7S,OAAO,IAAb;AACA,QAAM5lB,QAAQ,yDAAOnE,CAAC8E,SAAR,CAAkB,KAAKxD,KAAL,CAAW46B,UAAX,CAAlB,EAA0CU,MAA1C,CAAd;;AAEAz4B,UAAM9Q,OAAN,CAAc,gBAAQ;AAClB02B,aAAKzoB,KAAL,CAAW46B,UAAX,IACMnS,KAAKzoB,KAAL,CAAW46B,UAAX,EAAuB/7B,OAAvB,CAAkCU,IAAlC,WAA8C,EAA9C,CADN;AAEH,KAHD;AAIA,SAAK86B,GAAL,GAAW,KAAKD,OAAL,GAAe,KAAKp6B,KAAL,CAAWpC,IAAX,CAAgB,EAAhB,CAA1B;;AAEA,WAAOiF,KAAP;AACH,CAXD;;AAaA;AACAq3B,IAAInvC,SAAJ,CAAcywC,QAAd,GAAyB,UAASC,IAAT,EAAeC,UAAf,EAA2B;AAChD,QAAIruC,UAAJ;AAAA,QAAOkW,UAAP;AAAA,QAAUo4B,UAAV;AAAA,QAAa94B,cAAb;AAAA,QAAoBtC,cAApB;AAAA,QAA2B66B,eAA3B;AAAA,QAAmCnsC,aAAnC;AAAA,QAAyC0rC,YAAzC;;AAEA;;AAEA93B,YAAQ,yDAAOnE,CAAC8E,SAAR,CAAkB,KAAK42B,OAAvB,EAAgC,UAAhC,CAAR;AACA,QAAIv3B,MAAMvV,MAAV,EAAkB;AACd,aAAKD,IAAI,CAAT,EAAYA,IAAIwV,MAAMvV,MAAtB,EAA8BD,GAA9B,EAAmC;AAC/BstC,kBAAM93B,MAAMxV,CAAN,EAAS0S,KAAT,CAAe,GAAf,CAAN;AACA,gBAAM6E,YAAY+1B,IAAI16B,KAAJ,GAAYsC,MAAZ,CAAmB,CAAnB,CAAlB;;AAEAk5B,iBAAK3kB,CAAL,CAAO,OAAP,EAAgB,EAAEgd,OAAO,iCAAT;AACZlvB,oCADY,EAAhB;AAEA,iBAAKrB,IAAI,CAAT,EAAYA,IAAIo3B,IAAIrtC,MAApB,EAA4BiW,GAA5B,EAAiC;AAC7Bk4B,qBAAK3kB,CAAL,CAAO,SAAP,EAAkB,EAAE7tB,MAAM0xC,IAAIp3B,CAAJ,CAAR,EAAlB,EAAoC2uB,EAApC;AACH;AACDuJ,iBAAKvJ,EAAL;AACH;AACJ;AACD,SAAK7kC,IAAI,CAAT,EAAYA,IAAI,KAAK2S,KAAL,CAAW1S,MAA3B,EAAmCD,GAAnC,EAAwC;AACpCkT,gBAAQ,yDAAO7B,CAACmB,UAAR,CAAmB,KAAKG,KAAL,CAAW3S,CAAX,EAAc0S,KAAd,CAAoB,MAApB,EAA4B,CAA5B,CAAnB,CAAR;AACA,YAAI,EAAEQ,MAAMP,KAAN,KAAgB,OAAhB,IACGO,MAAMP,KAAN,KAAgB,OADnB,IAEGO,MAAMP,KAAN,KAAgB,aAFrB,CAAJ,EAEyC;AACrC,qBADqC,CAC3B;AACb;AACD,YAAM47B,YAAY,yDAAOl9B,CAACU,QAAR,CAAiB,KAAKY,KAAL,CAAW3S,CAAX,CAAjB,EAAgC,SAAhC,CAAlB;;AAEA,YAAIuuC,SAAJ,EAAe;AACX3sC,mBAAO2sC,UAAUp8B,SAAV,CAAoB,CAApB,EAAuBO,KAAvB,CAA6B,GAA7B,EAAkC,CAAlC,CAAP,CADW,CACkC;AAChD,SAFD,MAEO;AACH9Q,mBAAO,KAAP;AACH;;AAEDwsC,aAAK3kB,CAAL,CAAO,SAAP,EAAkB,EAAE+kB,SAASH,UAAX;AACdzyC,kBAAMsX,MAAMP,KADE,EAAlB;AAEA,YAAM87B,WAAW,yDAAOp9B,CAACU,QAAR,CAAiB,KAAKY,KAAL,CAAW3S,CAAX,CAAjB,EAAgC,QAAhC,CAAjB;;AAEA,YAAIyuC,QAAJ,EAAc;AACV;AACA,gBAAMjB,MAAM,yDAAOn8B,CAACkB,QAAR,CAAiBk8B,QAAjB,CAAZ;;AAEAL,iBAAKM,KAAL,CAAW,EAAE9yC,MAAM4xC,GAAR,EAAX;AACH;;AAED,YAAI,yDAAOn8B,CAACU,QAAR,CAAiB,KAAKY,KAAL,CAAW3S,CAAX,CAAjB,EAAgC,WAAhC,EAA6CC,MAAjD,EAAyD;AACrDmuC,iBAAK3kB,CAAL,CAAO,aAAP,EACI,EAAEgd,OAAO,4BAAT;AACI9zB,uBAAOO,MAAMP,KADjB,EADJ;AAGA,gBAAI/Q,IAAJ,EAAU;AACNwsC,qBAAKM,KAAL,CAAW,EAAE9sC,UAAF,EAAX;AACH;AACD,iBAAKsU,IAAI,CAAT,EAAYA,IAAIhD,MAAMF,GAAN,CAAU/S,MAA1B,EAAkCiW,GAAlC,EAAuC;AACnC63B,yBACM,yDAAO18B,CAACU,QAAR,CACE,KAAKY,KAAL,CAAW3S,CAAX,CADF,gBAEckT,MAAMF,GAAN,CAAUkD,CAAV,CAFd,CADN;AAIAk4B,qBAAK3kB,CAAL,CAAO,cAAP,EAAuB,yDAAOpY,CAAC8B,WAAR,CAAoB46B,MAApB,CAAvB;;AAEA;AACA;AACA,oBAAMY,YACA,yDAAOt9B,CAACU,QAAR,CACE,KAAKY,KAAL,CAAW3S,CAAX,CADF,cAEYkT,MAAMF,GAAN,CAAUkD,CAAV,CAFZ,CADN;;AAKA,oBAAIy4B,SAAJ,EAAe;AACXrB,0BAAM,yDAAOj8B,CAAC6C,SAAR,CAAkBy6B,SAAlB,CAAN;;AAEA;AACA,yBAAKL,IAAI,CAAT,EAAYA,IAAIhB,IAAIrtC,MAApB,EAA4BquC,GAA5B,EAAiC;AAC7BF,6BAAK3kB,CAAL,CAAO,WAAP,EAAoB6jB,IAAIgB,CAAJ,CAApB,EAA4BzJ,EAA5B;AACH;AACJ;;AAED;AACA,qBAAK+J,cAAL,CAAoB5uC,CAApB,EAAuBouC,IAAvB,EAA6Bl7B,MAAMF,GAAN,CAAUkD,CAAV,CAA7B;;AAEAk4B,qBAAKvJ,EAAL;AACH;AACD,gBAAMgK,SACA,yDAAOx9B,CAAC8E,SAAR,CAAkB,KAAKxD,KAAL,CAAW3S,CAAX,CAAlB,EAAiC,WAAjC,EAA8C,KAAK+sC,OAAnD,CADN;;AAGA,gBAAI8B,OAAO5uC,MAAX,EAAmB;AACfmuC,qBAAK3kB,CAAL,CAAO,YAAP,EAAqB,EAAEqlB,UAAU,CAAZ,EAArB;AACAD,uBAAOnqC,OAAP,CACI;AAAA,2BAAQ0pC,KAAK3kB,CAAL,CAAO,QAAP,EAAiB,yDAAOpY,CAACwC,WAAR,CAAoB3B,IAApB,CAAjB,EAA4C2yB,EAA5C,EAAR;AAAA,iBADJ;AAEAuJ,qBAAKvJ,EAAL,GAJe,CAIJ;AACd;;AAED,gBAAIjjC,IAAJ,EAAU;AACN,oBAAMmtC,UAAU,yDAAO19B,CAACiE,SAAR,CAAkB,KAAK3C,KAAL,CAAW3S,CAAX,CAAlB,CAAhB;;AADM;AAAA;AAAA;;AAAA;AAGN,yCAAgD+uC,OAAhD,8HAAyD;AAAA;;AAAA;;AAAA,4BAA5CC,aAA4C;AAAA,4BAA7BC,cAA6B;;AACrDb,6BAAK3kB,CAAL,CAAO,QAAP,EAAiB;AACb7nB,kCAAMotC,aADO;AAEbvI,mCAAO;AAFM,yBAAjB;;AAKAwI,uCAAevqC,OAAf,CAAuB,uBAAe;AAClC;AACA,gCAAMgpC,MAAMwB,YAAYx+B,OAAZ,CAAoB,GAApB,CAAZ;AACA,gCAAMy+B,KAAKD,YAAYh6B,MAAZ,CAAmBw4B,MAAM,CAAzB,CAAX;;AAEAU,iCAAK3kB,CAAL,CAAO,WAAP;AACA,gCAAI0lB,GAAGz+B,OAAH,CAAW,GAAX,MAAoB,CAAC,CAAzB,EAA4B;AACxB09B,qCAAKM,KAAL,CAAW,EAAE9yC,MAAMuzC,EAAR,EAAX;AACH,6BAFD,MAEO;AACH,oCAAMvzC,OAAOuzC,GAAGz8B,KAAH,CAAS,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAb;;AAEA07B,qCAAKM,KAAL,CAAW,EAAE9yC,UAAF,EAAX;;AAEA,oCAAIwzC,IAAID,GAAGz8B,KAAH,CAAS,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAR;;AAEA08B,oCAAI,yDAAO/9B,CAACC,kBAAR,CAA2B89B,CAA3B,CAAJ;AACAhB,qCAAKM,KAAL,CAAW,EAAEzrC,OAAOmsC,CAAT,EAAX;AACH;AACDhB,iCAAKvJ,EAAL;AACH,yBAnBD;;AAqBAuJ,6BAAKvJ,EAAL;AACH;;AAED;AAjCM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkCN,oBAAMwK,iBACA,yDAAOh+B,CAAC8E,SAAR,CAAkB,KAAKxD,KAAL,CAAW3S,CAAX,CAAlB,EAAiC,eAAjC,CADN;;AAGAqvC,+BAAe3qC,OAAf,CAAuB,gBAAQ;AAC3B,wBAAMgpC,MAAMx7B,KAAKxB,OAAL,CAAa,GAAb,CAAZ;AACA,wBAAM6G,YAAYrF,KAAKgD,MAAL,CAAY,CAAZ,EAAew4B,GAAf,EAAoBx4B,MAApB,CAA2B,EAA3B,CAAlB;AACA,wBAAMyB,QAAQzE,KAAKgD,MAAL,CAAY,KAAKqC,UAAUtX,MAA3B,EAAmCyS,KAAnC,CAAyC,GAAzC,CAAd;;AAEA,wBAAIiE,MAAM1W,MAAV,EAAkB;AACdmuC,6BAAK3kB,CAAL,CAAO,YAAP,EAAqB,EAAElS,oBAAF;AACjBkvB,mCAAO,iCADU,EAArB;AAEA9vB,8BAAMjS,OAAN,CAAc;AAAA,mCAAK0pC,KAAK3kB,CAAL,CAAO,QAAP,EAAiB,EAAE7nB,MAAM0tC,CAAR,EAAjB,EAA8BzK,EAA9B,EAAL;AAAA,yBAAd;AACAuJ,6BAAKvJ,EAAL;AACH;AACJ,iBAXD;AAYH;;AAED,gBAAM0K,WAAW,yDAAOl+B,CAAC8E,SAAR,CAAkB,KAAKxD,KAAL,CAAW3S,CAAX,CAAlB,EAAiC,OAAjC,CAAjB;;AAEA,gBAAIuvC,SAAStvC,MAAb,EAAqB;AACjB;AACA;AACA,oBAAMuvC,OAAOD,SACR34B,GADQ,CACJ;AAAA,2BAAW64B,QAAQ/8B,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAX;AAAA,iBADI,EAERkE,GAFQ,CAEJ;AAAA,2BAAW84B,QAAQh9B,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAX;AAAA,iBAFI,CAAb;;AAIA88B,qBAAK9qC,OAAL,CAAa,eAAO;AAChB0pC,yBAAK3kB,CAAL,CAAO,QAAP,EAAiB;AACbgX,gCADa;AAEbgG,+BAAO;AAFM,qBAAjB;AAIA2H,yBAAKvJ,EAAL;AACH,iBAND;AAOA,oBAAM8K,mBACA,yDAAOt+B,CAACU,QAAR,CAAiB,KAAKY,KAAL,CAAW3S,CAAX,CAAjB,EAAgC,aAAhC,CADN;;AAGA,oBAAI2vC,gBAAJ,EAAsB;AAClBvB,yBAAK3kB,CAAL,CAAO,WAAP,EAAoB;AAChBlS,mCAAW,KADK;AAEhBkvB,+BAAO;AAFS,qBAApB;AAIA+I,yBAAK9qC,OAAL,CAAa,eAAO;AAChB0pC,6BAAK3kB,CAAL,CAAO,QAAP,EAAiB,EAAEgX,QAAF,EAAjB,EAA0BoE,EAA1B;AACH,qBAFD;AAGAuJ,yBAAKvJ,EAAL;AACH;AACJ;;AAED,gBAAI,yDAAOxzB,CAACU,QAAR,CAAiB,KAAKY,KAAL,CAAW3S,CAAX,CAAjB,EAAgC,YAAhC,CAAJ,EAAmD;AAC/CouC,qBAAK3kB,CAAL,CAAO,UAAP,EAAmBob,EAAnB;AACH;;AAED;AACA,iBAAK+J,cAAL,CAAoB5uC,CAApB,EAAuBouC,IAAvB,EAA6B,GAA7B;;AAEA;AACA54B,oBAAQ,yDAAOnE,CAAC8E,SAAR,CAAkB,KAAKxD,KAAL,CAAW3S,CAAX,CAAlB,EAAiC,WAAjC,CAAR;AACA,gBAAIwV,MAAMvV,MAAV,EAAkB;AACd,qBAAKiW,IAAI,CAAT,EAAYA,IAAIV,MAAMvV,MAAtB,EAA8BiW,GAA9B,EAAmC;AAC/Bo3B,0BAAM,yDAAOj8B,CAACuE,WAAR,CAAoBJ,MAAMU,CAAN,CAApB,CAAN;AACAk4B,yBAAK3kB,CAAL,CAAO,YAAP,EAAqB;AACjBgd,+BAAO,uCADU;AAEjB3wB,6BAAKw3B,IAAIx3B,GAFQ;AAGjB7X,4BAAIqvC,IAAIrqC;AAHS,qBAArB;;AAMA;AACA,wBAAIqqC,IAAI5jB,cAAJ,CAAmB,WAAnB,CAAJ,EAAqC;;AAEjC;AACA,gCAAQ4jB,IAAIz3B,SAAZ;AACA,iCAAK,UAAL;AACIu4B,qCAAKM,KAAL,CAAW,EAAEkB,SAAS,WAAX,EAAX;AACA;AACJ,iCAAK,UAAL;AACIxB,qCAAKM,KAAL,CAAW,EAAEkB,SAAS,WAAX,EAAX;AACA;AACJ,iCAAK,UAAL;AACIxB,qCAAKM,KAAL,CAAW,EAAEkB,SAAS,MAAX,EAAX;AACA;AACJ,iCAAK,UAAL;AACIxB,qCAAKM,KAAL,CAAW,EAAEkB,SAAS,MAAX,EAAX;AACA;AAZJ;AAcH;;AAED;AACAxB,yBAAKvJ,EAAL;AACH;AACJ;AACDuJ,iBAAKvJ,EAAL,GAzKqD,CAyK1C;AACd;;AAED;AACA,aAAKgL,iBAAL,CAAuB7vC,CAAvB,EAA0BouC,IAA1B;;AAEA,YAAMvrC,IAAI,KAAK8P,KAAL,CAAW3S,CAAX,CAAV;;AAEA,YAAI,yDAAOqR,CAACU,QAAR,CAAiBlP,CAAjB,EAAoB,YAApB,EAAkC,KAAKkqC,OAAvC,CAAJ,EAAqD;AACjDqB,iBAAKM,KAAL,CAAW,EAAEkB,SAAS,MAAX,EAAX;AACH,SAFD,MAEO,IAAI,yDAAOv+B,CAACU,QAAR,CAAiBlP,CAAjB,EAAoB,YAApB,EAAkC,KAAKkqC,OAAvC,CAAJ,EAAqD;AACxDqB,iBAAKM,KAAL,CAAW,EAAEkB,SAAS,WAAX,EAAX;AACH,SAFM,MAEA,IAAI,yDAAOv+B,CAACU,QAAR,CAAiBlP,CAAjB,EAAoB,YAApB,EAAkC,KAAKkqC,OAAvC,CAAJ,EAAqD;AACxDqB,iBAAKM,KAAL,CAAW,EAAEkB,SAAS,WAAX,EAAX;AACH,SAFM,MAEA,IAAI,yDAAOv+B,CAACU,QAAR,CAAiBlP,CAAjB,EAAoB,YAApB,EAAkC,KAAKkqC,OAAvC,CAAJ,EAAqD;AACxDqB,iBAAKM,KAAL,CAAW,EAAEkB,SAAS,MAAX,EAAX;AACH;AACD,YAAI18B,MAAML,IAAN,KAAe,GAAnB,EAAwB;AACpB;AACAu7B,iBAAKM,KAAL,CAAW,EAAEkB,SAAS,UAAX,EAAX;AACH;AACDxB,aAAKvJ,EAAL,GAxNoC,CAwNzB;AACd;AACDuJ,SAAKvJ,EAAL;;AAEA,WAAOuJ,IAAP;AACH,CAhPD;;AAkPAvB,IAAInvC,SAAJ,CAAcmyC,iBAAd,GAAkC,UAAStC,UAAT,EAAqBa,IAArB,EAA2B;AACzD,QAAId,YAAJ;AACA,QAAMlS,OAAO,IAAb;;AAEAgT,SAAK3kB,CAAL,CAAO,WAAP;;AAEA;AACA,QAAMqmB,UACA,yDAAOz+B,CAACU,QAAR,CAAiB,KAAKY,KAAL,CAAW46B,UAAX,CAAjB,EAAyC,YAAzC,EAAuDnS,KAAK2R,OAA5D,CADN;;AAGA,QAAI+C,OAAJ,EAAa;AACT,YAAMC,YAAY,yDAAO1+B,CAACiC,YAAR,CAAqBw8B,OAArB,CAAlB;;AAEA1B,aAAK3kB,CAAL,CAAO,SAAP,EAAkB;AACdgd,mBAAO,wCADO;AAEdwF,oBAAQ8D,UAAU,CAAV,CAFM,EAEQ;AACtBv8B,sBAAUu8B,UAAU,CAAV,CAHI,CAGS;AAHT,SAAlB;;AAMA;AACA,YAAIA,UAAU9vC,MAAV,GAAmB,CAAvB,EAA0B;AACtBmuC,iBAAKM,KAAL,CAAW,EAAE9rB,SAASmtB,UAAU,CAAV,CAAX,EAAX;AACH;AACD3B,aAAKvJ,EAAL;AACH;;AAED;AACA,QAAMmL,eACA,yDAAO3+B,CAAC8E,SAAR,CACE,KAAKxD,KAAL,CAAW46B,UAAX,CADF,EAEE,gBAFF,EAGE,KAAKR,OAHP,CADN;;AAMAiD,iBAAatrC,OAAb,CAAqB,gBAAQ;AACzB4oC,cAAM,yDAAOj8B,CAAC0C,gBAAR,CAAyB7B,IAAzB,CAAN;AACAo7B,YAAI7G,KAAJ,GAAY,6BAAZ;AACA2H,aAAK3kB,CAAL,CAAO,aAAP,EAAsBmb,CAAtB,CAAwB0I,IAAIr5B,WAA5B;AACA,eAAOq5B,IAAIr5B,WAAX;;AAEA;AACA/B,eACM,yDAAOb,CAACU,QAAR,CACEqpB,KAAKzoB,KAAL,CAAW46B,UAAX,CADF,EAEE,UAFF,EAGEnS,KAAK2R,OAHP,CADN;AAKA,YAAI76B,IAAJ,EAAU;AACNo7B,gBAAI2C,KAAJ,GAAY/9B,KAAKgD,MAAL,CAAY,CAAZ,CAAZ;AACH;AACDk5B,aAAKM,KAAL,CAAWpB,GAAX;AACAc,aAAKvJ,EAAL,GAhByB,CAgBd;AACd,KAjBD;AAkBAyI,UAAM,yDAAOj8B,CAACI,SAAR,CAAkB,KAAKkB,KAAL,CAAW46B,UAAX,CAAlB,EAA0C,KAAKR,OAA/C,CAAN;AACA,QAAIO,GAAJ,EAAS;AACLA,YAAI7G,KAAJ,GAAY,sCAAZ;AACA2H,aAAKM,KAAL,CAAWpB,GAAX;;AAEA;AACA,YAAM93B,QACA,yDAAOnE,CAAC8E,SAAR,CACE,KAAKxD,KAAL,CAAW46B,UAAX,CADF,EAEE,cAFF,EAGE,KAAKR,OAHP,CADN;;AAMA,YAAIv3B,MAAMvV,MAAV,EAAkB;AAAE;AAChBuV,kBAAM9Q,OAAN,CAAc,gBAAQ;AAClB,oBAAM2P,YAAY,yDAAOhD,CAACgF,iBAAR,CAA0BnE,IAA1B,CAAlB;;AAEA,oBAAIkpB,KAAK6R,OAAT,EAAkB;AACd54B,8BAAUM,EAAV,GAAe,SAAf;AACH;AACD,oBAAMnB,WACAa,aAAa,OAAOA,UAAUb,QAAjB,KAA8B,QAA3C,GACIa,UAAUb,QAAV,CAAmBiB,WAAnB,EADJ,GAEI,EAHV;;AAKA,oBAAK2mB,KAAK8R,mBAAL,KACO15B,aAAa,KAAb,IAAsBA,aAAa,QAD1C,CAAD,IAEI4nB,KAAK+R,mBAAL,IAA4B35B,aAAa,KAFjD,EAEyD;AACrD;AACH;AACD46B,qBAAK3kB,CAAL,CAAO,WAAP,EAAoBpV,SAApB,EAA+BwwB,EAA/B;AACH,aAjBD;AAkBH;AACJ;AACDuJ,SAAKvJ,EAAL,GApFyD,CAoF9C;AACd,CArFD;;AAuFA;AACAgI,IAAInvC,SAAJ,CAAckxC,cAAd,GAA+B,UAASrB,UAAT,EAAqBa,IAArB,EAA2B8B,WAA3B,EAAwC;AACnE,QAAM16B,QACA,yDAAOnE,CAAC8E,SAAR,CACE,KAAKxD,KAAL,CAAW46B,UAAX,CADF,iBAEe2C,WAFf,CADN;;AAKA16B,UAAM9Q,OAAN,CAAc,gBAAQ;AAClB,YAAM4oC,MAAM,yDAAOj8B,CAACoE,WAAR,CAAoBvD,IAApB,CAAZ;;AAEA,YAAIo7B,IAAI5rC,IAAJ,KAAa,SAAjB,EAA4B;AACxB0sC,iBAAK3kB,CAAL,CAAO,iBAAP,EAA0B;AACtBgd,uBAAO,oCADe;AAEtBxjC,uBAAOqqC,IAAI33B,MAAJ,CAAW,CAAX;AAFe,aAA1B;AAIAy4B,iBAAKvJ,EAAL;AACH,SAND,MAMO;AACHuJ,iBAAK3kB,CAAL,CAAO,SAAP,EAAkB;AACdgd,uBAAO,oCADO;AAEd/kC,sBAAM4rC,IAAI5rC;AAFI,aAAlB;AAIA,gBAAI4rC,IAAI33B,MAAJ,CAAW1V,MAAX,GAAoB,CAAxB,EAA2B;AACvBmuC,qBAAKM,KAAL,CAAW,EAAE,WAAWpB,IAAI33B,MAAJ,CAAW,CAAX,CAAb,EAAX;AACH;AACDy4B,iBAAKvJ,EAAL;AACH;AACJ,KAnBD;AAoBH,CA1BD;;AA4BAgI,IAAInvC,SAAJ,CAAcyyC,gBAAd,GAAiC,UAAS/B,IAAT,EAAe8B,WAAf,EAA4B;AAAE;AAC3D,QAAIv9B,QAAQ,EAAZ;AACA,QAAI26B,MACEc,KAAK/2B,IAAL,CACE,8DADF,CADN;;AAIA,QAAIi2B,IAAIrtC,MAAR,EAAgB;AACZ0S,iBAAS,sBAAT;AACA,YAAI26B,IAAI/I,IAAJ,CAAS,OAAT,CAAJ,EAAuB;AACnB5xB,qBAAS26B,IAAI/I,IAAJ,CAAS,OAAT,CAAT;AACH,SAFD,MAEO;AACH5xB,qBAAS,GAAT;AACH;AACDA,iBAAS,MAAT;AACH;AACD26B,UAAMc,KAAK/2B,IAAL,CAAU,sDAAV,CAAN;AACAi2B,QAAI8C,IAAJ,CAAS,YAAW;AAChB;AACAz9B,gCAAsBu9B,WAAtB,SAAqCtS,EAAE,IAAF,EAAQ2G,IAAR,CAAa,MAAb,CAArC;AACA,YAAI3G,EAAE,IAAF,EAAQ2G,IAAR,CAAa,SAAb,CAAJ,EAA6B;AACzB5xB,2BAAairB,EAAE,IAAF,EAAQ2G,IAAR,CAAa,SAAb,CAAb;AACH;AACD5xB,iBAAS,MAAT;;AAEA;AACH,KATD;;AAWA,WAAOA,KAAP;AACH,CA5BD;;AA8BA;AACAk6B,IAAInvC,SAAJ,CAAc2yC,UAAd,GAA2B,UAASxR,MAAT,EAAiB;AACxC,QAAMzD,OAAO,IAAb;;AAEA,SAAK4R,GAAL,GAAW,YACL,qCADK,CACgC;AADhC,MAEL,SAFK,GAGL,WAHN;;AAKA;AACA;AACA,QAAMsD,SACA1S,EAAEiB,MAAF,EAAUxnB,IAAV,CAAe,iDAAf,CADN;;AAGA,QAAIi5B,OAAOrwC,MAAX,EAAmB;AACfqwC,eAAOF,IAAP,CAAY,UAAC1C,GAAD,EAAMp2B,KAAN,EAAgB;AACxB,gBAAMi5B,WACA3S,EAAEtmB,KAAF,EACGD,IADH,CACQ,UADR,EAEGT,GAFH,CAEO,UAAC45B,CAAD,EAAIC,OAAJ;AAAA,uBAAgBA,QAAQ78B,YAAR,CAAqB,MAArB,CAAhB;AAAA,aAFP,EAGGpW,GAHH,EADN;;AAMA,gBAAI+yC,SAAStwC,MAAT,GAAkB,CAAtB,EAAyB;AACrBm7B,qBAAK4R,GAAL,kBAEQ11B,MAAM1D,YAAN,CAAmB,WAAnB,KACO0D,MAAM1D,YAAN,CAAmB,MAAnB,CAHf,UAIQ28B,SAAShgC,IAAT,CAAc,GAAd,CAJR;AAKH;AACJ,SAdD;AAeH;;AAED,SAAKw8B,OAAL,GAAe,KAAKC,GAApB;AACAnO,WAAOxnB,IAAP,CAAY,UAAZ,EAAwB+4B,IAAxB,CAA6B,YAAW;AACpC;AACA,YAAMvtC,IAAIu4B,KAAKsV,YAAL,CAAkB9S,EAAE,IAAF,CAAlB,CAAV;;AAEAxC,aAAKzoB,KAAL,CAAWpU,IAAX,CAAgBsE,CAAhB;AACH,KALD;;AAOA;AACA;;;;;;;AAOA,SAAKmqC,GAAL,GAAW,KAAKD,OAAL,GAAe,KAAKp6B,KAAL,CAAWpC,IAAX,CAAgB,EAAhB,CAA1B;AACH,CAhDD;;AAkDA;AACAs8B,IAAInvC,SAAJ,CAAcgzC,YAAd,GAA6B,UAASD,OAAT,EAAkB;AAC3C,QAAMl7B,OAAOk7B,QAAQp5B,IAAR,CAAa,aAAb,CAAb;AACA,QAAI1E,QAAQ,EAAZ;AACA,QAAMyoB,OAAO,IAAb;AACA,QAAMuV,OAAOF,QAAQp5B,IAAR,CACT,oEADS,CAAb;;AAGA,QAAIi2B,MAAM,EAAE36B,OAAO4C,KAAKgvB,IAAL,CAAU,OAAV,CAAT,EAAV;;AAEA+I,QAAIz6B,IAAJ,GAAW,GAAX;AACA,QAAI49B,QAAQlM,IAAR,CAAa,SAAb,MAA4B,UAAhC,EAA4C;AACxC;AACA+I,YAAIz6B,IAAJ,GAAW,GAAX;AACH;AACD,QAAI49B,QAAQp5B,IAAR,CAAa,wBAAb,EAAuCpX,MAAvC,IACOsV,KAAK8B,IAAL,CAAU,YAAV,EAAwBpX,MADnC,EAC2C;AACvCqtC,YAAIx6B,KAAJ,GAAY69B,KAAK1wC,MAAL,GAAc,WAAd,GAA4B,WAAxC;AACH,KAHD,MAGO;AACHqtC,YAAIx6B,KAAJ,GAAY,UAAZ;AACH;AACD,QAAI69B,KAAK1wC,MAAT,EAAiB;AACb0S,oCAA0B26B,IAAIz6B,IAA9B,mBACI89B,KAAKpM,IAAL,CAAU,QAAV,CADJ;AAEA5xB,gCAAsBg+B,KAAKpM,IAAL,CAAU,QAAV,CAAtB,SAA6CoM,KAAKpM,IAAL,CAAU,UAAV,CAA7C;;AAEA,YAAM9wB,cAAck9B,KAAKpM,IAAL,CAAU,SAAV,CAApB;;AAEA,YAAI9wB,WAAJ,EAAiB;AACbd,2BAAac,WAAb;AACH,SAFD,MAEO;AACHd,qBAAS,MAAT;AACH;AACJ,KAZD,MAYO;AACH26B,YAAIt6B,GAAJ,GACMuC,KACG8B,IADH,CACQ,cADR,EAEGT,GAFH,CAEO,YAAW;AACZ;AACA,mBAAO,KAAKhD,YAAL,CAAkB,IAAlB,CAAP;AACH,SALH,EAMGpW,GANH,EADN;AAQAmV,iBAAY,yDAAOtB,CAAC4B,UAAR,CAAmBq6B,GAAnB,CAAZ;AACH;;AAED36B,aAAS,sBAAT;AACA,QAAI,CAACg+B,KAAK1wC,MAAV,EAAkB;AACd0S,iBAAS,6BAAT;AACH;AACD26B,UACMmD,QAAQp5B,IAAR,CACE,0DADF,CADN;AAGA,QAAIi2B,IAAIrtC,MAAR,EAAgB;AACZ,YAAIqtC,IAAI/I,IAAJ,CAAS,OAAT,CAAJ,EAAuB;AACnB5xB,qBAAY,yDAAOtB,CAACe,aAAR,CAAsBk7B,IAAI/I,IAAJ,CAAS,OAAT,CAAtB,CAAZ;AACH;AACD,YAAI+I,IAAI/I,IAAJ,CAAS,KAAT,CAAJ,EAAqB;AACjB5xB,qBAAY,yDAAOtB,CAACiB,WAAR,CAAoBg7B,IAAI/I,IAAJ,CAAS,KAAT,CAApB,CAAZ;AACH;AACD+I,YAAIj2B,IAAJ,CAAS,cAAT,EAAyB+4B,IAAzB,CAA8B,YAAW;AACrC;AACA;AACAz9B,wCAA0B,KAAKiB,YAAL,CAAkB,MAAlB,CAA1B;AACAjB,2BAAairB,EAAE,IAAF,EAAQrsB,IAAR,EAAb;AACAoB,qBAAS,MAAT;AACA,gBAAI,KAAKiB,YAAL,CAAkB,OAAlB,CAAJ,EAAgC;AAC5BjB,sCAAoB,KAAKiB,YAAL,CAAkB,OAAlB,CAApB;AACH;;AAED;AACH,SAXD;AAYH;AACD,YAAQ68B,QAAQlM,IAAR,CAAa,SAAb,CAAR;AACA,aAAK,WAAL;AACI5xB,qBAAS,gBAAT;AACA;AACJ,aAAK,WAAL;AACIA,qBAAS,gBAAT;AACA;AACJ,aAAK,MAAL;AACIA,qBAAS,gBAAT;AACA;AACJ,aAAK,MAAL;AACIA,qBAAS,gBAAT;AACA;AAZJ;AAcAA,wBAAkB89B,QAAQlM,IAAR,CAAa,MAAb,CAAlB;;AAEA;AACA;AACA;AACA;AACA,QAAIhvB,KAAK8B,IAAL,CAAU,UAAV,EAAsBpX,MAA1B,EAAkC;AAC9B0S,iBAAS,gBAAT;AACH;;AAED,QAAI4C,KAAK8B,IAAL,CAAU,YAAV,EAAwBpX,MAA5B,EAAoC;AAChCsV,aAAK8B,IAAL,CAAU,mBAAV,EAA+B+4B,IAA/B,CAAoC,YAAW;AAC3C;AACAz9B,mCAAqB,KAAKiB,YAAL,CAAkB,KAAlB,CAArB;AACAjB,2BAAa,KAAKiB,YAAL,CAAkB,cAAlB,CAAb;AACAjB,2BAAa,KAAKiB,YAAL,CAAkB,YAAlB,CAAb;AACA,gBAAI,KAAKA,YAAL,CAAkB,gBAAlB,CAAJ,EAAyC;AACrCjB,+BAAa,KAAKiB,YAAL,CAAkB,gBAAlB,CAAb;AACH;AACDjB,qBAAS,MAAT;;AAEA;AACH,SAXD;AAYH;AACD4C,SAAK8B,IAAL,CAAU,cAAV,EAA0B+4B,IAA1B,CAA+B,YAAW;AACtC;AACAz9B,iBAAY,yDAAOtB,CAACqC,WAAR,CAAoB,IAApB,CAAZ;AACA,YAAIkqB,EAAE,IAAF,EAAQvmB,IAAR,CAAa,YAAb,EAA2BpX,MAA/B,EAAuC;AACnC0S,iCAAmB,KAAKiB,YAAL,CAAkB,IAAlB,CAAnB;AACAjB,qBACOirB,EAAE,IAAF,EACEvmB,IADF,CACO,WADP,EAEET,GAFF,CAEM,YAAW;AACZ,oBAAMhb,OAAO,KAAKgY,YAAL,CAAkB,MAAlB,CAAb;;AAEA,uBACI,CAAChY,OAAUA,IAAV,SAAoB,EAArB,IACM,KAAKgY,YAAL,CAAkB,OAAlB,CAFV;AAGH,aARF,EASEpW,GATF,GAUE+S,IAVF,CAUO,IAVP,CADP;AAYAoC,qBAAS,MAAT;AACH;;AAED;AACAA,iBAASyoB,KAAK+U,gBAAL,CAAsBvS,EAAE,IAAF,CAAtB,EAA+B,KAAKhqB,YAAL,CAAkB,IAAlB,CAA/B,CAAT;;AAEA;AACH,KAxBD;;AA0BA;AACAjB,aAASyoB,KAAK+U,gBAAL,CAAsB56B,IAAtB,EAA4B,GAA5B,CAAT;;AAEA;AACA+3B,UACM/3B,KAAK8B,IAAL,CACE,4DADF,CADN;AAGAi2B,QAAI8C,IAAJ,CAAS,YAAW;AAChB;AACAz9B,+BACmB,KAAKiB,YAAL,CAAkB,IAAlB,CADnB,SAEQ,KAAKA,YAAL,CAAkB,KAAlB,CAFR;;AAIA;AACH,KAPD;;AASA68B,YACKp5B,IADL,CAEQ,6DACM,YAHd,EAIK+4B,IAJL,CAIU,YAAW;AACb;AACA,YAAI58B,WAAW,KAAKI,YAAL,CAAkB,UAAlB,CAAf;;AAEAJ,mBACM,OAAOA,QAAP,KAAoB,QAApB,GAA+BA,SAASiB,WAAT,EAA/B,GAAwD,EAD9D;;AAGA,YAAK2mB,KAAK8R,mBAAL,KACO15B,aAAa,KAAb,IAAsBA,aAAa,QAD1C,CAAD,IAEI4nB,KAAK+R,mBAAL,IAA4B35B,aAAa,KAFjD,EAEyD;AACrD;AACH,SAJD,MAIO,IAAI4nB,KAAK6R,OAAT,EAAkB;AACrB,iBAAK2D,YAAL,CAAkB,IAAlB,EAAwB,SAAxB;AACH;;AAEDj+B,iBAAS,yDAAOtB,CAACiF,mBAAR,CAA4B,IAA5B,CAAT;;AAEA;AACH,KAtBL;;AAwBA;AACAm6B,YACKp5B,IADL,CACU,iEADV,EAEK+4B,IAFL,CAEU,YAAW;AACb;AACA,YAAM74B,YAAY,KAAK3D,YAAL,CAAkB,WAAlB,CAAlB;AACA,YAAM+C,QACAinB,EAAE,IAAF,EACGvmB,IADH,CACQ,SADR,EAEGT,GAFH,CAEO,YAAW;AACZ,mBAAO,KAAKhD,YAAL,CAAkB,MAAlB,CAAP;AACH,SAJH,EAKGpW,GALH,EADN;;AAQA,YAAImZ,MAAM1W,MAAV,EAAkB;AACd0S,uCAAyB4E,SAAzB,SAAsCZ,MAAMpG,IAAN,CAAW,GAAX,CAAtC;AACH;;AAED;AACH,KAlBL;;AAoBA+8B,UACMmD,QAAQp5B,IAAR,CACE,6DADF,CADN;AAGAi2B,QAAI8C,IAAJ,CAAS,YAAW;AAChB;AACA,YAAMxuC,OAAO,KAAKgS,YAAL,CAAkB,MAAlB,CAAb;;AAEA;AACAgqB,UAAE,IAAF,EAAQvmB,IAAR,CAAa,YAAb,EAA2B+4B,IAA3B,CAAgC,YAAW;AACvC,gBAAMx0C,OAAO,KAAKgY,YAAL,CAAkB,MAAlB,CAAb;AACA,gBAAI3Q,QAAQ,KAAK2Q,YAAL,CAAkB,OAAlB,CAAZ;;AAEA3Q,oBAAQ,yDAAOoO,CAACC,kBAAR,CAA2BrO,KAA3B,CAAR;AACA0P,iCAAmB/Q,IAAnB,SAA2BhG,IAA3B;AACA,gBAAIqH,SAASA,MAAMhD,MAAnB,EAA2B;AACvB0S,+BAAa1P,KAAb;AACH;AACD0P,qBAAS,MAAT;AACH,SAVD;;AAYA;AACH,KAlBD;;AAoBA,WAAOA,KAAP;AACH,CA5ND,C;;;;;;;ACzmBA;AAAA;AAAA;;;;;;AAMO,IAAMk+B,qBAAqB,qBAA3B;;AAEP;;;;;AAKO,IAAMC,0BAA0B,yBAAhC,C;;;;;;;;;;;;;;;;;;;;;;ACbP;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMj3C,SAAS,oEAASE,CAACC,UAAV,CAAf;;AAEA;;;AAGA,IAAM+2C,oBAAoB;AACtB,kBAAc,QADQ,EACE;AACxB,oBAAgB,UAFM;AAGtB,mBAAe;AAHO,CAA1B;;AAMA;;;;;AAKA,SAASC,6BAAT,CAAuC/nB,WAAvC,EAAoDtkB,OAApD,EAA6D;AACzDskB,gBAAYgoB,UAAZ,GAAyBtsC,OAAzB;AACH;;AAED;;;;IAGqBusC,U;;;AACjB;AACA;;;;;;;;;;;;AAYA,wBACQ/kB,UADR,EAEQ9tB,MAFR,EAGQklB,KAHR,EAIQ4tB,qBAJR,EAKQC,cALR,EAMQ5tB,SANR,EAMmB;AAAA;;AAGf;AAHe;;AAIf,cAAK3T,gBAAL,GAAwB,MAAKC,WAA7B;AACA,cAAKC,mBAAL,GAA2B,MAAKC,GAAL,GAAW,MAAKpR,cAA3C;;AAEA;;;;AAIA,cAAKyyC,UAAL,GAAkB,EAAlB;AACA,cAAKllB,UAAL,GAAkBA,UAAlB;AACA,cAAKyD,UAAL,GAAkB,CAAC,CAAnB;AACA,cAAKluB,IAAL,GAAY0vC,cAAZ;AACA,cAAK7tB,KAAL,GAAaA,KAAb;AACA,cAAKC,SAAL,GAAiBA,SAAjB;AACA,cAAKpf,QAAL,GAAgB,IAAIzH,GAAJ,EAAhB;;AAEA;;;;;;;AAOA,cAAK20C,QAAL,GAAgB,KAAhB;;AAEA;;;;;;;AAOA,cAAKC,sBAAL,GAA8BJ,qBAA9B;;AAEA,cAAKK,UAAL,CAAgBnzC,MAAhB;AArCe;AAsClB;;AAED;;AAEA;;;;;;;;;;oCAMYqD,I,EAAMiD,O,EAAS;AACvB,gBAAI,CAACosC,kBAAkBrnB,cAAlB,CAAiChoB,IAAjC,CAAL,EAA6C;AACzC7H,uBAAO0B,KAAP,2BAAqCmG,IAArC;;AAEA;AACH;AACD,gBAAIiD,OAAJ,EAAa;AACT,qBAAKP,QAAL,CAAcpG,GAAd,CAAkB0D,IAAlB,EAAwBiD,OAAxB;AACH,aAFD,MAEO;AACH,qBAAKP,QAAL,CAActE,MAAd,CAAqB4B,IAArB;AACH;;AAED,gBAAI,KAAKrD,MAAT,EAAiB;AACb;AADa;AAAA;AAAA;;AAAA;AAEb,yCAAoB,KAAKA,MAAL,CAAY+iB,cAAZ,EAApB,8HAAkD;AAAA,4BAAvCmC,KAAuC;;AAC9CA,8BAAMwtB,kBAAkBrvC,IAAlB,CAAN,IAAiCiD,OAAjC;AACH;AAJY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKhB;AACJ;;AAED;;;;;;;8CAIsB;AAClB,gBAAI,CAAC,KAAKtG,MAAV,EAAkB;AACdxE,uBAAOoD,IAAP,CACO,IADP;;AAGA;AACH;;AANiB;AAAA;AAAA;;AAAA;AAQlB,sCAAmB,KAAKmH,QAAL,CAAc1E,IAAd,EAAnB,mIAAyC;AAAA,wBAA9BgC,IAA8B;;AACrC;AADqC;AAAA;AAAA;;AAAA;AAErC,8CAAyB,KAAKrD,MAAL,CAAY+iB,cAAZ,EAAzB,mIAAuD;AAAA,gCAA5CqwB,UAA4C;;AACnDA,uCAAWV,kBAAkBrvC,IAAlB,CAAX,IAAsClH,SAAtC;AACH;AAJoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKxC;AAbiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAclB,gBAAI,KAAK+2C,sBAAT,EAAiC;AAC7BP,8CAA8B,KAAK3yC,MAAnC,EAA2C7D,SAA3C;AACH;AACJ;;AAED;;;;;;;;;;mCAOW6D,M,EAAQ;AACf,gBAAI,KAAKA,MAAL,KAAgBA,MAApB,EAA4B;AACxB;AACH;;AAED,iBAAKA,MAAL,GAAcA,MAAd;;AAEA;AACA;AACA;AACA;AACA,gBAAI,KAAKA,MAAT,EAAiB;AAAA;AAAA;AAAA;;AAAA;AACb,0CAAmB,KAAK+F,QAAL,CAAc1E,IAAd,EAAnB,mIAAyC;AAAA,4BAA9BgC,IAA8B;;AACrC,6BAAKgwC,WAAL,CAAiBhwC,IAAjB,EAAuB,KAAK0C,QAAL,CAAc5G,GAAd,CAAkBkE,IAAlB,CAAvB;AACH;AAHY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAIb,oBAAI,KAAK6vC,sBAAT,EAAiC;AAC7BP,kDACI,KAAK3yC,MADT,EACiB,KAAKkzC,sBADtB;AAEH;AACJ;AACJ;;AAED;;;;;;kCAGU;AACN,mBAAO,KAAK7vC,IAAZ;AACH;;AAED;;;;;;uCAGe;AACX,mBAAO,KAAKmtB,OAAL,OAAmB,qEAA1B;AACH;;AAED;;;;;;;;;6CAMqB;AACjB,mBAAO,KAAKtL,KAAL,IAAc,KAAKA,KAAL,CAAW9hB,KAAhC;AACH;;AAED;;;;;;uCAGe;AACX,mBAAO,KAAKotB,OAAL,OAAmB,qEAA1B;AACH;;AAED;;;;;;;;kCAKU;AACN,kBAAM,IAAInzB,KAAJ,CAAU,6BAAV,CAAN;AACH;;AAED;;;;;;4CAGoB;AAChB,mBAAO,KAAK2C,MAAZ;AACH;;AAED;;;;;;;sCAIc;AACV,mBAAO,KAAKA,MAAL,GAAc,KAAKA,MAAL,CAAYJ,EAA1B,GAA+B,IAAtC;AACH;;AAED;;;;;;;mCAIW;AACP,mBAAO,KAAKslB,KAAZ;AACH;;AAED;;;;;;;qCAIa;AACT,mBAAO,KAAKA,KAAL,GAAa,KAAKA,KAAL,CAAWtlB,EAAxB,GAA6B,IAApC;AACH;;AAED;;;;;;;;wCAKgB;AACZ,gBAAI,KAAK6xB,YAAL,EAAJ,EAAyB;AACrB,uBAAO,KAAP;AACH;;AAED,mBAAO,KAAKtM,SAAL,GAAiB,KAAKA,SAAtB,GAAkC,SAAzC;AACH;;AAED;;;;;;;;;gDAMwBmuB,S,EAAW;AAC/B,gBAAI,KAAKxlB,UAAL,IAAmBwlB,SAAvB,EAAkC;AAC9B,qBAAKxlB,UAAL,CAAgBylB,cAAhB,CAA+B,IAA/B,EAAqCD,SAArC;AACH;AACJ;;AAED;;;;;;;;;;;;;+BAUOA,S,EAAW;AACd,gBAAI,KAAKtzC,MAAT,EAAiB;AACb2lB,gBAAA,0DAAQA,CAACK,iBAAT,CAA2BstB,SAA3B,EAAsC,KAAKtzC,MAA3C;AACH;AACD,iBAAKgzC,UAAL,CAAgB9yC,IAAhB,CAAqBozC,SAArB;AACA,iBAAKE,uBAAL,CAA6BF,SAA7B;AACA,iBAAKG,kBAAL,CAAwBH,SAAxB;AACH;;AAED;;;;;;;;;;;+BAQOA,S,EAAW;AACd,iBAAK,IAAI7wC,KAAK,KAAKuwC,UAAd,EAA0BrxC,IAAIc,GAAGb,MAAH,GAAY,CAA/C,EAAkDD,KAAK,CAAvD,EAA0D,EAAEA,CAA5D,EAA+D;AAC3D,oBAAMypB,IAAI3oB,GAAGd,CAAH,CAAV;;AAEA,oBAAI,CAAC2xC,SAAL,EAAgB;AACZ3tB,oBAAA,0DAAQA,CAACK,iBAAT,CAA2BoF,CAA3B,EAA8B,IAA9B;AACH;AACD,oBAAI,CAACkoB,SAAD,IAAcloB,MAAMkoB,SAAxB,EAAmC;AAC/B7wC,uBAAGZ,MAAH,CAAUF,CAAV,EAAa,CAAb;AACH;AACJ;;AAED,gBAAI2xC,SAAJ,EAAe;AACX3tB,gBAAA,0DAAQA,CAACK,iBAAT,CAA2BstB,SAA3B,EAAsC,IAAtC;AACH;AACJ;;AAED;;;;;;;;;;;2CAQmBA,S,EAAW,CAE7B,C,CAF+B;AAC5B;;;AAGJ;;;;;;;;kCAKU;AACN,iBAAK9xC,kBAAL;;AAEA,iBAAKyxC,QAAL,GAAgB,IAAhB;;AAEA,mBAAOhrB,QAAQC,OAAR,EAAP;AACH;;AAED;;;;;;;0CAIkB,CAEjB;AADG;;;AAGJ;;;;;;;gCAIQ;AACJ,gBAAI,KAAKloB,MAAT,EAAiB;AACb,uBAAO,0DAAQ2lB,CAACQ,WAAT,CAAqB,KAAKnmB,MAA1B,CAAP;AACH;;AAED,mBAAO,IAAP;AACH;;AAED;;;;;;;;;mCAMW;AACP,gBAAI,OAAO,KAAKA,MAAL,CAAY0zC,MAAnB,KAA8B,WAAlC,EAA+C;AAC3C,uBAAO,KAAK1zC,MAAL,CAAY0zC,MAAnB;AACH;;AAED,mBAAO,IAAP;AACH;;AAED;;;;;;;;;;;sCAQcniB,U,EAAYnwB,G,EAAK;AAC3B,gBAAI,KAAKmwB,UAAL,KAAoBA,UAAxB,EAAoC;AAChC,qBAAKA,UAAL,GAAkBA,UAAlB;AACA,qBAAKvwB,IAAL,CACI,4EADJ,EAEIuwB,UAFJ,EAGInwB,GAHJ;AAIH;AACJ;;AAED;;;;;;;kCAIU;AACN,gBAAMuxB,WAAW,KAAKghB,WAAL,EAAjB;AACA,gBAAMC,UAAU,KAAKC,UAAL,EAAhB;;AAEA,mBAAOlhB,YAAYihB,OAAZ,GAAyBjhB,QAAzB,SAAqCihB,OAArC,GAAiD,IAAxD;AACH;;AAED;;;;;;;;;;;uCAQep1B,mB,EAAqB;AAAA;;AAChC,gBAAI,CAAC,0DAAQmH,CAACsF,uBAAT,CAAiC,QAAjC,CAAL,EAAiD;AAC7C,uBAAOhD,QAAQE,MAAR,CACH,IAAI9qB,KAAJ,CAAU,6CAAV,CADG,CAAP;AAEH;;AAED;AACA;AACA,gBAAI,KAAKy2C,YAAL,EAAJ,EAAyB;AACrB,uBAAO7rB,QAAQC,OAAR,EAAP;AACH;;AAED,mBACID,QAAQgJ,GAAR,CACI,KAAK+hB,UAAL,CAAgBz6B,GAAhB,CACI;AAAA,uBACI8M,QAAQlG,SAAR,CAAkBX,mBAAlB,EACK6J,KADL,CACW,iBAAS;AACZ7sB,2BAAOoD,IAAP,CACI,4CACM,qCADN,GAEM,oCAHV,EAIIymB,OAJJ,EAKInoB,KALJ;AAMA,0BAAMA,KAAN;AACH,iBATL,CADJ;AAAA,aADJ,CADJ,EAcKwiB,IAdL,CAcU,YAAM;AACR,uBAAK1e,IAAL,CACI,6EADJ,EAEIwd,mBAFJ;AAGH,aAlBL,CADJ;AAoBH;;;;EAxZmC,8C;;AAAnB,yDAAAq0B,U;;;;;;;AC9BrB;;;;;;;;;AASA,IAAMnyB,mBAAmB;AACrB;;;AAGAqzB,eAAa,aAJQ;;AAMrB;;;AAGApzB,QAAM;AATe,CAAzB;;AAYA3Z,OAAOC,OAAP,GAAiByZ,gBAAjB,C;;;;;;ACrBA;AACA;AACA;AACA;AACA,GAAG;AACH,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,OAAO,eAAe;AACtB,OAAO,sBAAsB;AAC7B,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,kBAAkB;AACzB,UAAU;AACV,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK,kCAAkC,UAAU;AACjD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK,+BAA+B,eAAe,WAAW;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK,0BAA0B,aAAa;AAC5C,2BAA2B,WAAW;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB,sCAAsC;AACtC,yBAAyB;AACzB,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA,gCAAgC;AAChC,gCAAgC,EAAE;AAClC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;;ACnVD;AACa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB;AACpB,0BAA0B;AAC1B;AACA;AACA;AACA,yDAAyD;AACzD,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL,iDAAiD;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB,OAAO;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,IAA0B;AAC9B;AACA;;;;;;;ACtsBA;;AAEA,IAAMszB,kBAAkB,mBAAOv4C,CAAC,GAAR,CAAxB;;AAEA;;;AAGA,IAAMw4C,aAAa,YAAnB,C,CAAiC;AACjC,IAAMC,YAAY,WAAlB,C,CAA+B;;AAE/B;;;;;AAKA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B,KAA5B;AACA,iBAAKqB,qBAAL,CAA2BrB,KAA3B;AACA,iBAAKsB,qBAAL,CAA2BtB,KAA3B;;AAEA,iBAAKuB,MAAL,CAAYvB,KAAZ;;AAEA,iBAAK1B,UAAL,GAAkB,CAAlB;AACH;;AAED;;;;;;kCAGU;AACN,iBAAKO,WAAL,CAAiB/8C,GAAjB,CACI,kEADJ,EAEI,KAAK2/C,mBAFT;AAGA,iBAAK5C,WAAL,CAAiB/8C,GAAjB,CACI,kGADJ,EAEI,KAAK0/C,oBAFT;AAGA,iBAAK3C,WAAL,CAAiB/8C,GAAjB,CACI,qEADJ,EAEI,KAAK6/C,sBAFT;AAGA,iBAAKlC,eAAL,CAAqBxuD,OAArB;AACA,iBAAKywD,eAAL,CAAqBzwD,OAArB;AACH;;;;;;AA7oBgB,yDAAAovD,mB;;;;;;;ACzUrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mBAAO,CAAC,EAAa;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,0BAA0B;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,OAAO;AACb,MAAM,OAAO;AACb;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,QAAQ,0BAA0B;AAClC,cAAc;AACd;AACA;AACA;AACA,iEAAiE,YAAY;AAC7E,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA,4BAA4B,uBAAuB;AACnD;AACA,mDAAmD;AACnD;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;AC9RA;AACA;;AAEA,IAAM10D,SAAS,oEAASE,CAACC,UAAV,CAAf;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;IAGqBy3D,mB;;;AACjB;;;AAGA,mCAAc;AAAA;;AAAA;;AAEV53D,eAAO0G,IAAP,yBAC0B,MAAKo4C,OAAL,EAD1B,eACkD,MAAK+Y,UAAL,EADlD;AAFU;AAIb;;AAED;;;;;;;;;;;sDAO8B;AAC1B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ACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA,mBAAmB,wBAAwB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,MAAM;AACpB,cAAc,SAAS;AACvB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD,kDAAkD;AAClD,kDAAkD;AAClD;AACA,cAAc,cAAc;AAC5B,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,cAAc,OAAO;AACrB,cAAc,QAAQ;AACtB,cAAc,OAAO;AACrB,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,QAAQ;AACtB,cAAc,OAAO;AACrB,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;AC3mBD;AACA;AACA;;;;;;;;;;;;;;;;;;;ACFA;AAMA;AACA;AACA;;AAEA,IAAMQ,iBAAiB,GAAvB;;AAEA;AACA,IAAMj6D,SAAS,oEAASE,CAACC,UAAV,CAAf;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA0CM+5D,gB;AACF;;;AAGA,gCAAc;AAAA;;AACV;;;;;;AAMA,aAAKziB,QAAL,GAAgB,KAAhB;;AAEA;;;;AAIA,aAAK0iB,iBAAL,GAAyB,IAAIv2D,GAAJ,EAAzB;;AAEA;;;;;AAKA,aAAKw2D,KAAL,GAAa,EAAb;;AAEA;;;;AAIA,aAAKC,mBAAL,GAA2B,EAA3B;;AA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B;AAC7B;AACA;AACA;AACA,gFAAgF,cAAc;AAC9F;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B,KAAK;AAClC;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA,kCAAkC,eAAe;AACjD;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6CAA6C;AAC7C;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,oBAAoB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B,iEAAiE,cAAc,sCAAsC;AACrH;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,cAAc;AACpE;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA,yCAAyC;AACzC,qEAAqE,cAAc;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,0CAA0C;AACxH;AACA;AACA,6BAA6B,2DAA2D;AACxF;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,6BAA6B,mFAAmF;AAChH;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kHAAkH;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G,QAAQ;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,cAAc;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,8EAA8E;AAChJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,kBAAkB;AACjE;AACA;AACA;AACA,+CAA+C,cAAc;AAC7D;AACA;AACA;AACA,yDAAyD,cAAc;AACvE,4GAA4G,QAAQ;AACpH;AACA;AACA;AACA,mDAAmD,QAAQ;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,cAAc;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,6FAA6F,cAAc;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,6GAA6G;AAC7G;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2HAA2H,cAAc;AACzI;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,cAAc;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA,0FAA0F;AAC1F;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC;AACA;AACA,6BAA6B,uCAAuC,2CAA2C;AAC/G,oFAAoF,gDAAgD;AACpI,yEAAyE,oDAAoD;AAC7H;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,2DAA2D,kBAAkB,cAAc;AAC3F;AACA,uDAAuD,QAAQ;AAC/D;AACA;AACA;AACA,mDAAmD,OAAO;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,QAAQ;AAC1F;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,gGAAgG,cAAc;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,6KAA6K,cAAc;AAC3L;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,2CAA2C,iBAAiB;AAC5D,qIAAqI,cAAc;AACnJ;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,sCAAsC,uBAAuB,iBAAiB;AAC9E;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,2CAA2C,WAAW;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,+CAA+C,cAAc;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mCAAmC;AAChE;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,4FAA4F,oCAAoC;AAChI;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,sFAAsF,OAAO;AAC7F;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,cAAc;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B,QAAQ;AACrC;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,iDAAiD,QAAQ,QAAQ;AACjE;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,+CAA+C,WAAW;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,iCAAiC;AACjC;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B,yCAAyC;AACtE;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,0HAA0H;AAC1H;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA,qCAAqC,yDAAyD,yDAAyD;AACvJ;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,qCAAqC;AACrC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,kDAAkD,kBAAkB;AACpE;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,+CAA+C,OAAO;AACtD;AACA;AACA;AACA,6BAA6B;AAC7B,+CAA+C,OAAO;AACtD;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B,wBAAwB;AACrD;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,oFAAoF,OAAO;AAC3F;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA,mFAAmF,qBAAqB,cAAc;AACtH;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,cAAc;AAC7D;AACA,wFAAwF,cAAc;AACtG;AACA;AACA;AACA,mFAAmF,cAAc;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,4GAA4G,OAAO;AACnH;AACA,4EAA4E;AAC5E;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,cAAc;AACzF;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qFAAqF;AACrF;AACA;AACA,mDAAmD,OAAO;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,kFAAkF,OAAO;AACzF;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;AACA,yEAAyE;AACzE;AACA,6FAA6F,OAAO;AACpG;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,OAAO;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B,mCAAmC;AAChE;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6FAA6F,MAAM;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,4EAA4E,yBAAyB;AACrG;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF;AACvF;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B,gEAAgE,OAAO;AACvE;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,OAAO;AACpE;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA,wEAAwE,cAAc;AACtF;AACA,mDAAmD,cAAc;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,OAAO;AACpE;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE,6DAA6D;AAC7D,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,yBAAyB;AACzB;AACA,+CAA+C,cAAc;AAC7D;AACA;AACA;AACA;AACA;AACA,6EAA6E,oBAAoB;AACjG;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA,uDAAuD,cAAc;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,gFAAgF;AAChF,mDAAmD,cAAc;AACjE;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,6EAA6E,sBAAsB;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB,iBAAiB,IAAI;AACrB,aAAa;AACb,SAAS,kJAAkJ;AAC3J,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6HAA6H,0GAA0G;AACvO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,gFAAgF;AACrG;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,0CAA0C,sBAAsB;AAChE;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,8DAA8D,sBAAsB;AACpF;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,yFAAyF,iBAAiB;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qFAAqF,cAAc;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,gCAAgC;AAC3E;AACA,yFAAyF,8BAA8B;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,8BAA8B;AACzE;AACA;AACA;AACA;AACA;AACA,2CAA2C,gCAAgC;AAC3E;AACA,4EAA4E,8BAA8B;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uGAAuG;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,6BAA6B,eAAe;AAC5C,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA,yBAAyB,eAAe;AACxC,qBAAqB;AACrB;AACA,qBAAqB,eAAe;AACpC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB,gBAAgB,EAAE;AACvC;AACA;AACA,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;AACA;AACA,qBAAqB,GAAG;AACxB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,cAAc;AACjD;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,0CAA0C,cAAc;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,wFAAwF,cAAc,6BAA6B;AACnI;AACA,uCAAuC,qBAAqB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B;AAC9B,2EAA2E,OAAO;AAClF,uCAAuC,cAAc;AACrD;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iFAAiF;AACjF;AACA,ufAAuf;AACvf;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,GAAG;AACzC,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,qDAAqD,sBAAsB;AAC3E;AACA,SAAS;AACT;AACA,SAAS,iDAAiD;AAC1D,uBAAuB;AACvB;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA,qHAAqH;AACrH;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa,qDAAqD;AAClE;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,qBAAqB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,KAAyC,GAAG,iCAAoB,EAAE,oCAAE,CAAC;AAAA;AAAA;AAAA,oGAAC;AACtF;AACA,aAAa;AACb,SAAS,mIAAmI;AAC5I,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,oDAAoD,cAAc;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,oDAAoD,YAAY;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,sCAAsC,kBAAkB;AACxD;AACA;AACA,aAAa;AACb;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iEAAiE,YAAY;AAC7E;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,yHAAyH,qEAAqE,qEAAqE;AACnQ,wDAAwD,uBAAuB;AAC/E;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO;AAC3D;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,mEAAmE,OAAO;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mCAAmC,uBAAuB;AAC1D;AACA;AACA,mCAAmC,0BAA0B;AAC7D;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,uFAAuF,OAAO;AAC9F;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,OAAO;AAC9F;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,8BAA8B,8DAA8D;AAC5F;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,mCAAmC,8BAA8B;AACjE;AACA;AACA,mCAAmC,yBAAyB;AAC5D;AACA;AACA,mCAAmC,+BAA+B;AAClE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,2DAA2D,yBAAyB;AACpF;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG,OAAO;AAC9G;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,OAAO;AAC9F;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,4BAA4B;AAC5B;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB,QAAQ,uBAAuB;AACxD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,4CAA4C,qBAAqB;AACjE;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,mEAAmE,cAAc;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA,oFAAoF,OAAO;AAC3F;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,6DAA6D,cAAc;AAC3E;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,cAAc;AACzD;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,+FAA+F;AAC/F;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,SAAS,cAAc;AAC5C;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,6BAA6B;AACnG;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mCAAmC,cAAc;AACjD;AACA;AACA,2CAA2C,qBAAqB;AAChE;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,sDAAsD;AACtD;AACA,qBAAqB,EAAE;AACvB;AACA;AACA,aAAa;AACb;AACA;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,cAAc;AACjD;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,0CAA0C,cAAc;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,QAAQ;AACtC;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,sDAAsD,cAAc;AACpE;AACA,qBAAqB;AACrB;AACA,uCAAuC,qBAAqB;AAC5D;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B;AAC9B,2EAA2E,OAAO;AAClF;AACA,qBAAqB;AACrB,sHAAsH;AACtH;AACA,4dAA4d;AAC5d;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,4FAA4F,OAAO;AACnG;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,wFAAwF,OAAO;AAC/F;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mCAAmC,gBAAgB,cAAc;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,qBAAqB;AAClE;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,yBAAyB;AACzB;AACA,8DAA8D,0BAA0B;AACxF;AACA;AACA,uCAAuC,qBAAqB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,kEAAkE;AAClE,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,mKAAmK,sEAAsE;AACzO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA,gGAAgG,cAAc;AAC9G;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,cAAc;AACvE;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,uFAAuF;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,6EAA6E,cAAc;AAC3F;AACA;AACA,+DAA+D,cAAc,6BAA6B;AAC1G;AACA,2CAA2C,qBAAqB;AAChE;AACA;AACA;AACA,2CAA2C,qBAAqB;AAChE;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,+GAA+G;AAC/G;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yDAAyD;AACzD,0CAA0C;AAC1C,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,2EAA2E,EAAE;AAC7E;AACA;AACA;AACA,qJAAqJ;AACrJ;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,yDAAyD,4BAA4B;AACrF;AACA;AACA,sFAAsF,kEAAkE,4EAA4E;AACpO;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,EAAE;AACjE;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,cAAc;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS,wCAAwC,yCAAyC;AAC1F;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS,iCAAiC,mCAAmC,kCAAkC;AAC/G,yCAAyC,wCAAwC,uCAAuC;AACxH;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS,wCAAwC,kCAAkC,oCAAoC;AACvH;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS,uCAAuC;AAChD;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,kBAAkB;AACtF;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kEAAkE,cAAc;AACrG;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oMAAoM,OAAO;AAC3M;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,+DAA+D,cAAc;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,mFAAmF,OAAO;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA,2BAA2B,cAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,kDAAkD,sBAAsB;AACxE;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT,CAAC,IAAI;;;;;;;;;;;;;;;;ACxlbL;AACA;;AAEA;AACA;;AAEA,IAAM3zD,uBAAuB,mBAAOlL,CAAC,CAAR,CAA7B;AACA,IAAMD,SAAS,mBAAOC,CAAC,CAAR,EAA6BC,SAA7B,CAAuCC,UAAvC,CAAf;;AAEA;;;;AAIA,IAAM8/D,uBAAuB,EAA7B;;AAEAA,qBAAqB,0DAAQC,CAAC9gC,OAA9B,IAAyC;AACrC,YAAQ,MAD6B;AAErC,uBAAmB,iBAFkB;AAGrC,mBAAe,aAHsB;AAIrC,mBAAe,aAJsB;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AACA;;AAEA;;AAEA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kEAAkE;AAClE;AACA;AACA;AACA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA,yJAAyJ;;AAEzJ;AACA,4DAA4D;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iCAAiC,EAAE;AAChF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iCAAiC,EAAE;AAChF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAyC,iCAAiC,EAAE;AAC5E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;AC3dA,IAAMu/D,YAAY;AACdh+D,eAAW;AADG,CAAlB;;AAIA4B,OAAOC,OAAP,GAAiBm8D,SAAjB,C;;;;;;;ACJA;AAAA;AAAA;;AAEA,IAAM5nE,SAAS,mBAAOC,CAAC,CAAR,EAA6BC,SAA7B,CAAuCC,UAAvC,CAAf;;AAEA;;;;AAIA0nE,mBAAmBC,eAAnB,GAAqC,OAArC;;AAEA;;;;AAIAD,mBAAmBE,qBAAnB,GAA2C,aAA3C;;AAEA;;;;AAIAF,mBAAmBG,qBAAnB,GAA2C,MAA3C;;AAEA;;;;;;;;AAQe,SAASH,kBAAT,CAA4Bv1C,UAA5B,EAAwC;;AAEnD,SAAK21C,QAAL,GAAgB,EAAhB;;AAEA,SAAK31C,UAAL,GAAkBA,UAAlB;AACA,SAAKA,UAAL,CAAgByyB,kBAAhB,CACI,UADJ,EACgB,KAAKmjB,eAAL,CAAqB98C,IAArB,CAA0B,IAA1B,CADhB;AAEH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SAArBA,KAAqB;AAAA,oBAAdW,OAAc,SAAdA,OAAc;;AAC3BO,qBAAKohC,UAAL;;AAEArX,uBAAO;AACHmgD,yCAAqBprE,KADlB;AAEHW;AAFG,iBAAP;AAIH,aAtBL;AAuBH,SArCL;AAsCAO,aAAKqT,WAAL,CACI,yEADJ,EAEI,UAAC82D,eAAD,EAAkB1qE,OAAlB,EAA2BiiC,WAA3B,EAA2C;AACvC3X,mBAAO;AACHogD,gDADG;AAEHzoC,wCAFG;AAGHjiC;AAHG,aAAP;AAKAO,mBAAOjC,SAAP;AACH,SATL;;AAWA+rE,oBAAY9pE,KAAK0+B,OAAL,CAAal9B,EAAb,EAAiBqhC,QAAjB,CAAZ;AACH,KA9De,CAAhB;;AAgEA;;;;;;;AAOAmnC,YAAQI,MAAR,GAAiB,YAAM;AACnBN,mBAAW,IAAX;AACAC,sBAAc,EAAd;AACA/pE,gBAAQA,KAAKohC,UAAL,EAAR;AACH,KAJD;;AAMA,WAAO4oC,OAAP;AACH;;AAED,mC;;;;;;AC3JA;AACA,CAAC,KAA4D,WAAW,mBAAO,CAAC,CAAY;AAC5F;AACA;AACA,CAAC,+BAA+B;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,uDAAuD;AACtF;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,yBAAyB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,yBAAyB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uDAAuD;AACjF;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA,mCAAmC;AACnC,4CAA4C;AAC5C;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA,oCAAoC;AACpC,4CAA4C;AAC5C;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,uBAAuB;;AAE9D;AACA,4BAA4B,SAAS;AACrC;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,yBAAyB;AAC1C;AACA,mCAAmC,wBAAwB;AAC3D;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,CAAC;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;ACzOA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,IAAM5sE,SAAS,oEAASE,CAACC,UAAV,CAAf;;AAEA;;;;IAGM8sE,mB;;;AACF;;;;AAIA,iCAAYrqE,IAAZ,EAAkB;AAAA;;AAAA;;AAEd,cAAKA,IAAL,GAAYA,IAAZ;AACA,cAAKsqE,KAAL,GAAa,EAAb;AAHc;AAIjB;;AAED;;;;;;;;6BAIK9qD,U,EAAY;AACb,2IAAWA,UAAX;;AAEA;AACA,iBAAKA,UAAL,CAAgBhX,UAAhB,CAA2B,KAAK+hE,UAAL,CAAgB/hD,IAAh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E,cAAL,CAAoBixE,eAApB,KAAwC,QAJvD,KAKO,KAAKjxE,cAAL,CAAoBiwB,KAApB,EALP;AAMH;;AAED;;;;;;;mCAIW;AACP,mBAAO,yBAAuB,KAAKK,KAA5B,yBACoB,KAAKu7B,WADzB,aAC4C,KAAKjpB,GADjD,OAAP;AAEH;;AAED;;;;;;;;;yDAM0C;AAAA,gBAAby2C,SAAa,QAAbA,SAAa;;AACtC,gBAAI,CAACA,SAAD,IAAc,CAACA,UAAUC,sBAA7B,EAAqD;AACjD;AACH;;AAED;AACA;AACA;AACA,gBAAMn4C,MAAM,KAAKo4C,gBAAL,EAAZ;;AAEA,mBAAO,sEAAWC,CAACr4C,GAAZ,IAAmB,CAAnB,KAAyB,CAAhC;AACH;;;;EA/mEwC,+D;;AAAxB,yDAAA0tC,e;;;;;;;AClErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,6BAA6B;AACjE;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,yBAAyB;AACvF,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,aAAa;AACb;AACA;;AAEA;AACA,mBAAmB,mCAAmC;AACtD;;AAEA;AACA,mBAAmB,iDAAiD;AACpE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,wCAAwC,QAAQ;AAChD;AACA;AACA,aAAa;AACb;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,OAAO;AACxD;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,IAA2C;AACxD,QAAQ,iCAAO,EAAE,mCAAE;AACnB;AACA,SAAS;AAAA,oGAAC;AACV;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;AClmCD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,mBAAO,CAAC,EAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC9DA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBA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KAAb,CAAmBnI,GAAnB,CAAlB;AACH,aAFD,CAEE,OAAO/c,KAAP,EAAc;AACZ,sBAAM,IAAIG,KAAJ,mBAA0BH,KAA1B,CAAN;AACH;;AAED,iBAAKs0F,IAAL,GAAYv3E,GAAZ;AACH;;AAED;;;;;;;;4BAKgB;AACZ,mBAAO,KAAK2wE,UAAZ;AACH;;AAED;;;;;;;4BAIW;AACP,mBAAO,KAAK6G,KAAZ;AACH;;;;;;AAvFgB,yDAAA3b,qB;;;;;;ACLrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,+CAA+C;;AAE/C;;AAEA;AACA;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,EAAW;AACjC;;AAEA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC,uCAAuC;AACvC;;AAEA,mBAAmB,kCAAkC;AACrD;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,wBAAwB;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,6BAA6B;AACnD;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,8EAA8E;AAC9E,GAAG;AACH;;AAEA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;;;;;;ACzHA,cAAc,mBAAO,CAAC,EAAW;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,sBA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A;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,mBAAO,CAAC,GAAsB;AACjD,iBAAiB,mBAAO,CAAC,GAAkB;AAC3C,oBAAoB,mBAAO,CAAC,GAAwB;AACpD,mBAAmB,mBAAO,CAAC,GAAsB;AACjD,mBAAmB,mBAAO,CAAC,GAAe;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACb,YAAY,mBAAO,CAAC,EAAa;AACjC;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;AACf,4BAA4B;AAC5B;;AAEA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;AACf,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA,+DAA+D;AAC/D;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mBAAO,CAAC,GAAgB;AAC5C;;;;;;;;AChqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACb,YAAY,mBAAO,CAAC,EAAa;AACjC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,YAAY;AACvE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA,gDAAgD;AAChD;AACA;AACA,yDAAyD,oBAAoB;AAC7E,yDAAyD;AACzD;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC/OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEb,YAAY,mBAAO,CAAC,EAAU;AAC9B,4BAA4B,mBAAO,CAAC,GAAwB;;AAE5D;AACA,oBAAoB,mBAAO,CAAC,GAAgB;AAC5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEb,eAAe,mBAAO,CAAC,EAAK;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,sCAAsC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,aAAa;AACtB;;AAEA;AACA;AACA;AACA,SAAS,aAAa;AACtB;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mDAAmD;;AAEnD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,+CAA+C,OAAO;AACtD;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,+BAA+B;;AAE/B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA,mBAAmB,8BAA8B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,gCAAgC;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,aAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,uBAAuB,4BAA4B;AACnD;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,yBAAyB,4BAA4B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;;AAEH;AACA;;;;;;;;AC3zDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEb;AACA;AACA;;AAEA;AACA;AACA,aAAa,yCAAyC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEb,YAAY,mBAAO,CAAC,EAAU;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,mCAAmC;AACnC;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,gCAAgC;AAC3D;AACA;AACA,+BAA+B,wBAAwB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,iBAAiB;AACjB,eAAe;AACf;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mBAAO,CAAC,GAAgB;AAC5C;;;;;;;;AC/MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEb,YAAY,mBAAO,CAAC,EAAU;AAC9B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,8BAA8B;AAC9B,oCAAoC,EAAE;AACtC,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,gEAAgE;AAC7E,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChNA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACb,YAAY,mBAAO,CAAC,EAAU;;AAE9B;AACA;;AAEA;AACA;AACA,qCAAqC,EAAE;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gCAAgC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACnTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEb,eAAe,mBAAO,CAAC,EAAK;AAC5B,YAAY,mBAAO,CAAC,EAAS;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL,GAAG;;AAEH;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ACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,cAAc;;AAEd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,yBAAyB;AAChD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,0BAA0B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,mBAAO,CAAC,EAAe;;AAEvC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,gBAAgB,KAAK,KAAK;AAC1B;AACA;AACA;AACA;AACA;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,mBAAO,CAAC,EAAe;AACvC,qBAAqB,mBAAO,CAAC,GAAmB;AAChD;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,oCAAoC,6BAA6B,EAAE;AACnE,oCAAoC,6CAA6C,EAAE;AACnF,iCAAiC,uBAAuB,EAAE;AAC1D;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,uBAAuB,2BAA2B;;AAElD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,uBAAuB,2BAA2B;;AAElD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,aAAa;AACb;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0BAA0B,gDAAgD;AAC1E,4BAA4B,oCAAoC;AAChE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,kCAAkC,EAAE;AACnF;AACA;AACA;AACA,oCAAoC,2BAA2B;AAC/D,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,wBAAwB;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,2DAA2D,EAAE;AAC7F;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,kCAAkC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,oBAAoB,EAAE;AACvD;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,gEAAgE,kCAAkC,EAAE;AACpG;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;;;;;;;AChfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA;AACA,4BAA4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","file":"lib-jitsi-meet.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"JitsiMeetJS\"] = factory();\n\telse\n\t\troot[\"JitsiMeetJS\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 56);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f6fcd4e468e6da561d55","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Logger = require(\"./Logger\");\nvar LogCollector = require(\"./LogCollector\");\n\n/**\n * Definition of the log method\n * @name log_method\n * @function\n * @param {...*} log_args the arguments to be logged\n */\n/**\n * The logger's transport type definition.\n *\n * @typedef {object} LoggerTransport\n *\n * @property {log_method} trace method called to log on {@link Logger.levels.TRACE} logging level\n * @property {log_method} debug method called to log on {@link Logger.levels.DEBUG} logging level\n * @property {log_method} info method called to log on {@link Logger.levels.INFO} logging level\n * @property {log_method} log method called to log on {@link Logger.levels.LOG} logging level\n * @property {log_method} warn method called to log on {@link Logger.levels.WARN} logging level\n * @property {log_method} error method called to log on {@link Logger.levels.ERROR} logging level\n */\n\n/**\n * Map with the created loggers with ID.\n */\nvar idLoggers = {};\n\n/**\n * Array with the loggers without id.\n */\nvar loggers = [];\n\n/**\n * Log level for the lbrary.\n */\nvar curLevel = Logger.levels.TRACE;\n\n\nmodule.exports = {\n    /**\n     * Adds given {@link LoggerTransport} instance to the list of global\n     * transports which means that it'll be used by all {@link Logger}s\n     * @param {LoggerTransport} transport\n     */\n    addGlobalTransport: function(transport) {\n        Logger.addGlobalTransport(transport);\n    },\n    /**\n     * Removes given {@link LoggerTransport} instance from the list of global\n     * transports\n     * @param {LoggerTransport} transport\n     */\n    removeGlobalTransport: function(transport) {\n        Logger.removeGlobalTransport(transport);\n    },\n    /**\n     * Creates new logger.\n     * @arguments the same as Logger constructor\n     */\n    getLogger: function(id, transports, format) {\n        var logger = new Logger(curLevel, id, transports, format);\n        if(id) {\n            idLoggers[id] = idLoggers[id] || [];\n            idLoggers[id].push(logger);\n        } else {\n            loggers.push(logger);\n        }\n        return logger;\n    },\n    /**\n     * Changes the log level for the existing loggers by id.\n     * @param level the new log level.\n     * @param id if specified the level will be changed only for loggers with the\n     * same id. Otherwise the operation will affect all loggers that don't\n     * have id.\n     */\n    setLogLevelById: function(level, id) {\n        var l = id? (idLoggers[id] || []) : loggers;\n        for(var i = 0; i < l.length; i++) {\n            l[i].setLevel(level);\n        }\n    },\n    /**\n     * Changes the log level for all existing loggers.\n     * @param level the new log level.\n     */\n    setLogLevel: function (level) {\n        curLevel = level;\n        var i = 0;\n        for(; i < loggers.length; i++) {\n            loggers[i].setLevel(level);\n        }\n\n        for(var id in idLoggers) {\n            var l = idLoggers[id] || [];\n            for(i = 0; i < l.length; i++) {\n                l[i].setLevel(level);\n            }\n        }\n    },\n    /**\n     * The supported log levels.\n     */\n    levels: Logger.levels,\n    /**\n     * Exports the <tt>LogCollector</tt>.\n     */\n    LogCollector: LogCollector\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/jitsi-meet-logger/lib/index.js\n// module id = 0\n// module chunks = 0","import BrowserCapabilities from './BrowserCapabilities';\n\nexport default new BrowserCapabilities();\n\n\n\n// WEBPACK FOOTER //\n// ./modules/browser/index.js","/** File: strophe.js\n *  A JavaScript library for writing XMPP clients.\n *\n *  This library uses either Bidirectional-streams Over Synchronous HTTP (BOSH)\n *  to emulate a persistent, stateful, two-way connection to an XMPP server or\n *  alternatively WebSockets.\n *\n *  More information on BOSH can be found in XEP 124.\n *  For more information on XMPP-over WebSocket see this RFC:\n *  http://tools.ietf.org/html/rfc7395\n */\n\n/* All of the Strophe globals are defined in this special function below so\n * that references to the globals become closures.  This will ensure that\n * on page reload, these references will still be available to callbacks\n * that are still executing.\n */\n\n/* jshint ignore:start */\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        //Allow using this built library as an AMD module\n        //in another project. That other project will only\n        //see this AMD call, not the internal modules in\n        //the closure below.\n        define([], factory);\n    } else {\n        //Browser globals case.\n        var wrapper = factory();\n        root.Strophe        = wrapper.Strophe;\n        root.$build         = wrapper.$build;\n        root.$iq            = wrapper.$iq;\n        root.$msg           = wrapper.$msg;\n        root.$pres          = wrapper.$pres;\n        root.SHA1           = wrapper.SHA1;\n        root.MD5            = wrapper.MD5;\n        root.b64_hmac_sha1  = wrapper.b64_hmac_sha1;\n        root.b64_sha1       = wrapper.b64_sha1;\n        root.str_hmac_sha1  = wrapper.str_hmac_sha1;\n        root.str_sha1       = wrapper.str_sha1;\n    }\n}(this, function () {\n    //almond, and your modules will be inlined here\n/* jshint ignore:end */\n/**\n * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.\n * Released under MIT license, http://github.com/requirejs/almond/LICENSE\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice,\n        jsSuffixRegExp = /\\.js$/;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\n            foundI, foundStarMap, starI, i, j, part, normalizedBaseParts,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name) {\n            name = name.split('/');\n            lastIndex = name.length - 1;\n\n            // If wanting node ID compatibility, strip .js from end\n            // of IDs. Have to do this here, and not in nameToUrl\n            // because node allows either .js or non .js to map\n            // to same file.\n            if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n            }\n\n            // Starts with a '.' so need the baseName\n            if (name[0].charAt(0) === '.' && baseParts) {\n                //Convert baseName to array, and lop off the last part,\n                //so that . matches that 'directory' and not name of the baseName's\n                //module. For instance, baseName of 'one/two/three', maps to\n                //'one/two/three.js', but we want the directory, 'one/two' for\n                //this normalization.\n                normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\n                name = normalizedBaseParts.concat(name);\n            }\n\n            //start trimDots\n            for (i = 0; i < name.length; i++) {\n                part = name[i];\n                if (part === '.') {\n                    name.splice(i, 1);\n                    i -= 1;\n                } else if (part === '..') {\n                    // If at the start, or previous value is still ..,\n                    // keep them so that when converted to a path it may\n                    // still work when converted to a path, even though\n                    // as an ID it is less than ideal. In larger point\n                    // releases, may be better to just kick out an error.\n                    if (i === 0 || (i === 1 && name[2] === '..') || name[i - 1] === '..') {\n                        continue;\n                    } else if (i > 0) {\n                        name.splice(i - 1, 2);\n                        i -= 2;\n                    }\n                }\n            }\n            //end trimDots\n\n            name = name.join('/');\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            var args = aps.call(arguments, 0);\n\n            //If first arg is not require('string'), and there is only\n            //one arg, it is the array form without a callback. Insert\n            //a null so that the following concat is correct.\n            if (typeof args[0] !== 'string' && args.length === 1) {\n                args.push(null);\n            }\n            return req.apply(undef, args.concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    //Creates a parts array for a relName where first part is plugin ID,\n    //second part is resource ID. Assumes relName has already been normalized.\n    function makeRelParts(relName) {\n        return relName ? splitPrefix(relName) : [];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relParts) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0],\n            relResourceName = relParts[1];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relResourceName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relResourceName));\n            } else {\n                name = normalize(name, relResourceName);\n            }\n        } else {\n            name = normalize(name, relResourceName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i, relParts,\n            args = [],\n            callbackType = typeof callback,\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n        relParts = makeRelParts(relName);\n\n        //Call the callback to define the module, if necessary.\n        if (callbackType === 'undefined' || callbackType === 'function') {\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relParts);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback ? callback.apply(defined[name], args) : undefined;\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, makeRelParts(callback)).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (config.deps) {\n                req(config.deps, config.callback);\n            }\n            if (!callback) {\n                return;\n            }\n\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        return req(cfg);\n    };\n\n    /**\n     * Expose module registry for debugging and tooling\n     */\n    requirejs._defined = defined;\n\n    define = function (name, deps, callback) {\n        if (typeof name !== 'string') {\n            throw new Error('See almond README: incorrect module build, no module name');\n        }\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\ndefine(\"node_modules/almond/almond.js\", function(){});\n\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/* global define */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-polyfill',[], function () {\n            return factory(root);\n        });\n    } else {\n        // Browser globals\n        return factory(root);\n    }\n}(this, function (root) {\n\n/** Function: Function.prototype.bind\n *  Bind a function to an instance.\n *\n *  This Function object extension method creates a bound method similar\n *  to those in Python.  This means that the 'this' object will point\n *  to the instance you want.  See <MDC's bind() documentation at https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind>\n *  and <Bound Functions and Function Imports in JavaScript at http://benjamin.smedbergs.us/blog/2007-01-03/bound-functions-and-function-imports-in-javascript/>\n *  for a complete explanation.\n *\n *  This extension already exists in some browsers (namely, Firefox 3), but\n *  we provide it to support those that don't.\n *\n *  Parameters:\n *    (Object) obj - The object that will become 'this' in the bound function.\n *    (Object) argN - An option argument that will be prepended to the\n *      arguments given for the function call\n *\n *  Returns:\n *    The bound function.\n */\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function (obj /*, arg1, arg2, ... */) {\n        var func = this;\n        var _slice = Array.prototype.slice;\n        var _concat = Array.prototype.concat;\n        var _args = _slice.call(arguments, 1);\n        return function () {\n            return func.apply(obj ? obj : this, _concat.call(_args, _slice.call(arguments, 0)));\n        };\n    };\n}\n\n/** Function: Array.isArray\n *  This is a polyfill for the ES5 Array.isArray method.\n */\nif (!Array.isArray) {\n    Array.isArray = function(arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n}\n\n/** Function: Array.prototype.indexOf\n *  Return the index of an object in an array.\n *\n *  This function is not supplied by some JavaScript implementations, so\n *  we provide it if it is missing.  This code is from:\n *  http://developer.mozilla.org/En/Core_JavaScript_1.5_Reference:Objects:Array:indexOf\n *\n *  Parameters:\n *    (Object) elt - The object to look for.\n *    (Integer) from - The index from which to start looking. (optional).\n *\n *  Returns:\n *    The index of elt in the array or -1 if not found.\n */\nif (!Array.prototype.indexOf) {\n    Array.prototype.indexOf = function(elt /*, from*/) {\n        var len = this.length;\n        var from = Number(arguments[1]) || 0;\n        from = (from < 0) ? Math.ceil(from) : Math.floor(from);\n        if (from < 0) {\n            from += len;\n        }\n\n        for (; from < len; from++) {\n            if (from in this && this[from] === elt) {\n                return from;\n            }\n        }\n        return -1;\n    };\n}\n\n/** Function: Array.prototype.forEach\n *\n *  This function is not available in IE < 9\n *\n *  See <forEach on developer.mozilla.org at https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach>\n */\nif (!Array.prototype.forEach) {\n    Array.prototype.forEach = function(callback, thisArg) {\n        var T, k;\n        if (this === null) {\n            throw new TypeError(' this is null or not defined');\n        }\n        // 1. Let O be the result of calling toObject() passing the\n        // |this| value as the argument.\n        var O = Object(this);\n        // 2. Let lenValue be the result of calling the Get() internal\n        // method of O with the argument \"length\".\n        // 3. Let len be toUint32(lenValue).\n        var len = O.length >>> 0;\n        // 4. If isCallable(callback) is false, throw a TypeError exception.\n        // See: http://es5.github.com/#x9.11\n        if (typeof callback !== \"function\") {\n            throw new TypeError(callback + ' is not a function');\n        }\n        // 5. If thisArg was supplied, let T be thisArg; else let\n        // T be undefined.\n        if (arguments.length > 1) {\n            T = thisArg;\n        }\n        // 6. Let k be 0\n        k = 0;\n        // 7. Repeat, while k < len\n        while (k < len) {\n            var kValue;\n            // a. Let Pk be ToString(k).\n            //        This is implicit for LHS operands of the in operator\n            // b. Let kPresent be the result of calling the HasProperty\n            //        internal method of O with argument Pk.\n            //        This step can be combined with c\n            // c. If kPresent is true, then\n            if (k in O) {\n                // i. Let kValue be the result of calling the Get internal\n                // method of O with argument Pk.\n                kValue = O[k];\n                // ii. Call the Call internal method of callback with T as\n                // the this value and argument list containing kValue, k, and O.\n                callback.call(T, kValue, k, O);\n            }\n            // d. Increase k by 1.\n            k++;\n        }\n        // 8. return undefined\n    };\n}\n\n// This code was written by Tyler Akins and has been placed in the\n// public domain.  It would be nice if you left this header intact.\n// Base64 code from Tyler Akins -- http://rumkin.com\nvar keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nif (!root.btoa) {\n    root.btoa = function (input) {\n        /**\n         * Encodes a string in base64\n         * @param {String} input The string to encode in base64.\n         */\n        var output = \"\";\n        var chr1, chr2, chr3;\n        var enc1, enc2, enc3, enc4;\n        var i = 0;\n        do {\n            chr1 = input.charCodeAt(i++);\n            chr2 = input.charCodeAt(i++);\n            chr3 = input.charCodeAt(i++);\n\n            enc1 = chr1 >> 2;\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            enc4 = chr3 & 63;\n\n            if (isNaN(chr2)) {\n                enc2 = ((chr1 & 3) << 4);\n                enc3 = enc4 = 64;\n            } else if (isNaN(chr3)) {\n                enc4 = 64;\n            }\n            output = output + keyStr.charAt(enc1) + keyStr.charAt(enc2) +\n                keyStr.charAt(enc3) + keyStr.charAt(enc4);\n        } while (i < input.length);\n        return output;\n    };\n}\n\nif (!root.atob) {\n    root.atob = function (input) {\n        /**\n         * Decodes a base64 string.\n         * @param {String} input The string to decode.\n         */\n        var output = \"\";\n        var chr1, chr2, chr3;\n        var enc1, enc2, enc3, enc4;\n        var i = 0;\n        // remove all characters that are not A-Z, a-z, 0-9, +, /, or =\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n        do {\n            enc1 = keyStr.indexOf(input.charAt(i++));\n            enc2 = keyStr.indexOf(input.charAt(i++));\n            enc3 = keyStr.indexOf(input.charAt(i++));\n            enc4 = keyStr.indexOf(input.charAt(i++));\n\n            chr1 = (enc1 << 2) | (enc2 >> 4);\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            chr3 = ((enc3 & 3) << 6) | enc4;\n\n            output = output + String.fromCharCode(chr1);\n\n            if (enc3 !== 64) {\n                output = output + String.fromCharCode(chr2);\n            }\n            if (enc4 !== 64) {\n                output = output + String.fromCharCode(chr3);\n            }\n        } while (i < input.length);\n        return output;\n    };\n}\n}));\n\n/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: false */\n/* global define */\n\n/* Some functions and variables have been stripped for use with Strophe */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-sha1', [],function () {\n            return factory();\n        });\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        // Browser globals\n        root.SHA1 = factory();\n    }\n}(this, function () {\n\n/*\n * Calculate the SHA-1 of an array of big-endian words, and a bit length\n */\nfunction core_sha1(x, len)\n{\n  /* append padding */\n  x[len >> 5] |= 0x80 << (24 - len % 32);\n  x[((len + 64 >> 9) << 4) + 15] = len;\n\n  var w = new Array(80);\n  var a =  1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d =  271733878;\n  var e = -1009589776;\n\n  var i, j, t, olda, oldb, oldc, oldd, olde;\n  for (i = 0; i < x.length; i += 16)\n  {\n    olda = a;\n    oldb = b;\n    oldc = c;\n    oldd = d;\n    olde = e;\n\n    for (j = 0; j < 80; j++)\n    {\n      if (j < 16) { w[j] = x[i + j]; }\n      else { w[j] = rol(w[j-3] ^ w[j-8] ^ w[j-14] ^ w[j-16], 1); }\n      t = safe_add(safe_add(rol(a, 5), sha1_ft(j, b, c, d)),\n                       safe_add(safe_add(e, w[j]), sha1_kt(j)));\n      e = d;\n      d = c;\n      c = rol(b, 30);\n      b = a;\n      a = t;\n    }\n\n    a = safe_add(a, olda);\n    b = safe_add(b, oldb);\n    c = safe_add(c, oldc);\n    d = safe_add(d, oldd);\n    e = safe_add(e, olde);\n  }\n  return [a, b, c, d, e];\n}\n\n/*\n * Perform the appropriate triplet combination function for the current\n * iteration\n */\nfunction sha1_ft(t, b, c, d)\n{\n  if (t < 20) { return (b & c) | ((~b) & d); }\n  if (t < 40) { return b ^ c ^ d; }\n  if (t < 60) { return (b & c) | (b & d) | (c & d); }\n  return b ^ c ^ d;\n}\n\n/*\n * Determine the appropriate additive constant for the current iteration\n */\nfunction sha1_kt(t)\n{\n  return (t < 20) ?  1518500249 : (t < 40) ?  1859775393 :\n         (t < 60) ? -1894007588 : -899497514;\n}\n\n/*\n * Calculate the HMAC-SHA1 of a key and some data\n */\nfunction core_hmac_sha1(key, data)\n{\n  var bkey = str2binb(key);\n  if (bkey.length > 16) { bkey = core_sha1(bkey, key.length * 8); }\n\n  var ipad = new Array(16), opad = new Array(16);\n  for (var i = 0; i < 16; i++)\n  {\n    ipad[i] = bkey[i] ^ 0x36363636;\n    opad[i] = bkey[i] ^ 0x5C5C5C5C;\n  }\n\n  var hash = core_sha1(ipad.concat(str2binb(data)), 512 + data.length * 8);\n  return core_sha1(opad.concat(hash), 512 + 160);\n}\n\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\nfunction safe_add(x, y)\n{\n  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return (msw << 16) | (lsw & 0xFFFF);\n}\n\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\nfunction rol(num, cnt)\n{\n  return (num << cnt) | (num >>> (32 - cnt));\n}\n\n/*\n * Convert an 8-bit or 16-bit string to an array of big-endian words\n * In 8-bit function, characters >255 have their hi-byte silently ignored.\n */\nfunction str2binb(str)\n{\n  var bin = [];\n  var mask = 255;\n  for (var i = 0; i < str.length * 8; i += 8)\n  {\n    bin[i>>5] |= (str.charCodeAt(i / 8) & mask) << (24 - i%32);\n  }\n  return bin;\n}\n\n/*\n * Convert an array of big-endian words to a string\n */\nfunction binb2str(bin)\n{\n  var str = \"\";\n  var mask = 255;\n  for (var i = 0; i < bin.length * 32; i += 8)\n  {\n    str += String.fromCharCode((bin[i>>5] >>> (24 - i%32)) & mask);\n  }\n  return str;\n}\n\n/*\n * Convert an array of big-endian words to a base-64 string\n */\nfunction binb2b64(binarray)\n{\n  var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  var str = \"\";\n  var triplet, j;\n  for (var i = 0; i < binarray.length * 4; i += 3)\n  {\n    triplet = (((binarray[i   >> 2] >> 8 * (3 -  i   %4)) & 0xFF) << 16) |\n              (((binarray[i+1 >> 2] >> 8 * (3 - (i+1)%4)) & 0xFF) << 8 ) |\n               ((binarray[i+2 >> 2] >> 8 * (3 - (i+2)%4)) & 0xFF);\n    for (j = 0; j < 4; j++)\n    {\n      if (i * 8 + j * 6 > binarray.length * 32) { str += \"=\"; }\n      else { str += tab.charAt((triplet >> 6*(3-j)) & 0x3F); }\n    }\n  }\n  return str;\n}\n\n/*\n * These are the functions you'll usually want to call\n * They take string arguments and return either hex or base-64 encoded strings\n */\nreturn {\n    b64_hmac_sha1:  function (key, data){ return binb2b64(core_hmac_sha1(key, data)); },\n    b64_sha1:       function (s) { return binb2b64(core_sha1(str2binb(s),s.length * 8)); },\n    binb2str:       binb2str,\n    core_hmac_sha1: core_hmac_sha1,\n    str_hmac_sha1:  function (key, data){ return binb2str(core_hmac_sha1(key, data)); },\n    str_sha1:       function (s) { return binb2str(core_sha1(str2binb(s),s.length * 8)); },\n};\n}));\n\n/*\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.1 Copyright (C) Paul Johnston 1999 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n/*\n * Everything that isn't used by Strophe has been stripped here!\n */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-md5',[], function () {\n            return factory();\n        });\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        // Browser globals\n        root.MD5 = factory();\n    }\n}(this, function () {\n    /*\n     * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n     * to work around bugs in some JS interpreters.\n     */\n    var safe_add = function (x, y) {\n        var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n        var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n        return (msw << 16) | (lsw & 0xFFFF);\n    };\n\n    /*\n     * Bitwise rotate a 32-bit number to the left.\n     */\n    var bit_rol = function (num, cnt) {\n        return (num << cnt) | (num >>> (32 - cnt));\n    };\n\n    /*\n     * Convert a string to an array of little-endian words\n     */\n    var str2binl = function (str) {\n        var bin = [];\n        for(var i = 0; i < str.length * 8; i += 8)\n        {\n            bin[i>>5] |= (str.charCodeAt(i / 8) & 255) << (i%32);\n        }\n        return bin;\n    };\n\n    /*\n     * Convert an array of little-endian words to a string\n     */\n    var binl2str = function (bin) {\n        var str = \"\";\n        for(var i = 0; i < bin.length * 32; i += 8)\n        {\n            str += String.fromCharCode((bin[i>>5] >>> (i % 32)) & 255);\n        }\n        return str;\n    };\n\n    /*\n     * Convert an array of little-endian words to a hex string.\n     */\n    var binl2hex = function (binarray) {\n        var hex_tab = \"0123456789abcdef\";\n        var str = \"\";\n        for(var i = 0; i < binarray.length * 4; i++)\n        {\n            str += hex_tab.charAt((binarray[i>>2] >> ((i%4)*8+4)) & 0xF) +\n                hex_tab.charAt((binarray[i>>2] >> ((i%4)*8  )) & 0xF);\n        }\n        return str;\n    };\n\n    /*\n     * These functions implement the four basic operations the algorithm uses.\n     */\n    var md5_cmn = function (q, a, b, x, s, t) {\n        return safe_add(bit_rol(safe_add(safe_add(a, q),safe_add(x, t)), s),b);\n    };\n\n    var md5_ff = function (a, b, c, d, x, s, t) {\n        return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n    };\n\n    var md5_gg = function (a, b, c, d, x, s, t) {\n        return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n    };\n\n    var md5_hh = function (a, b, c, d, x, s, t) {\n        return md5_cmn(b ^ c ^ d, a, b, x, s, t);\n    };\n\n    var md5_ii = function (a, b, c, d, x, s, t) {\n        return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n    };\n\n    /*\n     * Calculate the MD5 of an array of little-endian words, and a bit length\n     */\n    var core_md5 = function (x, len) {\n        /* append padding */\n        x[len >> 5] |= 0x80 << ((len) % 32);\n        x[(((len + 64) >>> 9) << 4) + 14] = len;\n\n        var a =  1732584193;\n        var b = -271733879;\n        var c = -1732584194;\n        var d =  271733878;\n\n        var olda, oldb, oldc, oldd;\n        for (var i = 0; i < x.length; i += 16)\n        {\n            olda = a;\n            oldb = b;\n            oldc = c;\n            oldd = d;\n\n            a = md5_ff(a, b, c, d, x[i+ 0], 7 , -680876936);\n            d = md5_ff(d, a, b, c, x[i+ 1], 12, -389564586);\n            c = md5_ff(c, d, a, b, x[i+ 2], 17,  606105819);\n            b = md5_ff(b, c, d, a, x[i+ 3], 22, -1044525330);\n            a = md5_ff(a, b, c, d, x[i+ 4], 7 , -176418897);\n            d = md5_ff(d, a, b, c, x[i+ 5], 12,  1200080426);\n            c = md5_ff(c, d, a, b, x[i+ 6], 17, -1473231341);\n            b = md5_ff(b, c, d, a, x[i+ 7], 22, -45705983);\n            a = md5_ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);\n            d = md5_ff(d, a, b, c, x[i+ 9], 12, -1958414417);\n            c = md5_ff(c, d, a, b, x[i+10], 17, -42063);\n            b = md5_ff(b, c, d, a, x[i+11], 22, -1990404162);\n            a = md5_ff(a, b, c, d, x[i+12], 7 ,  1804603682);\n            d = md5_ff(d, a, b, c, x[i+13], 12, -40341101);\n            c = md5_ff(c, d, a, b, x[i+14], 17, -1502002290);\n            b = md5_ff(b, c, d, a, x[i+15], 22,  1236535329);\n\n            a = md5_gg(a, b, c, d, x[i+ 1], 5 , -165796510);\n            d = md5_gg(d, a, b, c, x[i+ 6], 9 , -1069501632);\n            c = md5_gg(c, d, a, b, x[i+11], 14,  643717713);\n            b = md5_gg(b, c, d, a, x[i+ 0], 20, -373897302);\n            a = md5_gg(a, b, c, d, x[i+ 5], 5 , -701558691);\n            d = md5_gg(d, a, b, c, x[i+10], 9 ,  38016083);\n            c = md5_gg(c, d, a, b, x[i+15], 14, -660478335);\n            b = md5_gg(b, c, d, a, x[i+ 4], 20, -405537848);\n            a = md5_gg(a, b, c, d, x[i+ 9], 5 ,  568446438);\n            d = md5_gg(d, a, b, c, x[i+14], 9 , -1019803690);\n            c = md5_gg(c, d, a, b, x[i+ 3], 14, -187363961);\n            b = md5_gg(b, c, d, a, x[i+ 8], 20,  1163531501);\n            a = md5_gg(a, b, c, d, x[i+13], 5 , -1444681467);\n            d = md5_gg(d, a, b, c, x[i+ 2], 9 , -51403784);\n            c = md5_gg(c, d, a, b, x[i+ 7], 14,  1735328473);\n            b = md5_gg(b, c, d, a, x[i+12], 20, -1926607734);\n\n            a = md5_hh(a, b, c, d, x[i+ 5], 4 , -378558);\n            d = md5_hh(d, a, b, c, x[i+ 8], 11, -2022574463);\n            c = md5_hh(c, d, a, b, x[i+11], 16,  1839030562);\n            b = md5_hh(b, c, d, a, x[i+14], 23, -35309556);\n            a = md5_hh(a, b, c, d, x[i+ 1], 4 , -1530992060);\n            d = md5_hh(d, a, b, c, x[i+ 4], 11,  1272893353);\n            c = md5_hh(c, d, a, b, x[i+ 7], 16, -155497632);\n            b = md5_hh(b, c, d, a, x[i+10], 23, -1094730640);\n            a = md5_hh(a, b, c, d, x[i+13], 4 ,  681279174);\n            d = md5_hh(d, a, b, c, x[i+ 0], 11, -358537222);\n            c = md5_hh(c, d, a, b, x[i+ 3], 16, -722521979);\n            b = md5_hh(b, c, d, a, x[i+ 6], 23,  76029189);\n            a = md5_hh(a, b, c, d, x[i+ 9], 4 , -640364487);\n            d = md5_hh(d, a, b, c, x[i+12], 11, -421815835);\n            c = md5_hh(c, d, a, b, x[i+15], 16,  530742520);\n            b = md5_hh(b, c, d, a, x[i+ 2], 23, -995338651);\n\n            a = md5_ii(a, b, c, d, x[i+ 0], 6 , -198630844);\n            d = md5_ii(d, a, b, c, x[i+ 7], 10,  1126891415);\n            c = md5_ii(c, d, a, b, x[i+14], 15, -1416354905);\n            b = md5_ii(b, c, d, a, x[i+ 5], 21, -57434055);\n            a = md5_ii(a, b, c, d, x[i+12], 6 ,  1700485571);\n            d = md5_ii(d, a, b, c, x[i+ 3], 10, -1894986606);\n            c = md5_ii(c, d, a, b, x[i+10], 15, -1051523);\n            b = md5_ii(b, c, d, a, x[i+ 1], 21, -2054922799);\n            a = md5_ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);\n            d = md5_ii(d, a, b, c, x[i+15], 10, -30611744);\n            c = md5_ii(c, d, a, b, x[i+ 6], 15, -1560198380);\n            b = md5_ii(b, c, d, a, x[i+13], 21,  1309151649);\n            a = md5_ii(a, b, c, d, x[i+ 4], 6 , -145523070);\n            d = md5_ii(d, a, b, c, x[i+11], 10, -1120210379);\n            c = md5_ii(c, d, a, b, x[i+ 2], 15,  718787259);\n            b = md5_ii(b, c, d, a, x[i+ 9], 21, -343485551);\n\n            a = safe_add(a, olda);\n            b = safe_add(b, oldb);\n            c = safe_add(c, oldc);\n            d = safe_add(d, oldd);\n        }\n        return [a, b, c, d];\n    };\n\n    var obj = {\n        /*\n         * These are the functions you'll usually want to call.\n         * They take string arguments and return either hex or base-64 encoded\n         * strings.\n         */\n        hexdigest: function (s) {\n            return binl2hex(core_md5(str2binl(s), s.length * 8));\n        },\n\n        hash: function (s) {\n            return binl2str(core_md5(str2binl(s), s.length * 8));\n        }\n    };\n    return obj;\n}));\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-utils',[], function () {\n            return factory();\n        });\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        // Browser globals\n        root.stropheUtils = factory();\n    }\n}(this, function () {\n\n    var utils = {\n\n        utf16to8: function (str) {\n            var i, c;\n            var out = \"\";\n            var len = str.length;\n            for (i = 0; i < len; i++) {\n                c = str.charCodeAt(i);\n                if ((c >= 0x0000) && (c <= 0x007F)) {\n                    out += str.charAt(i);\n                } else if (c > 0x07FF) {\n                    out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));\n                    out += String.fromCharCode(0x80 | ((c >>  6) & 0x3F));\n                    out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));\n                } else {\n                    out += String.fromCharCode(0xC0 | ((c >>  6) & 0x1F));\n                    out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));\n                }\n            }\n            return out;\n        },\n\n        addCookies: function (cookies) {\n            /* Parameters:\n             *  (Object) cookies - either a map of cookie names\n             *    to string values or to maps of cookie values.\n             *\n             * For example:\n             * { \"myCookie\": \"1234\" }\n             *\n             * or:\n             * { \"myCookie\": {\n             *      \"value\": \"1234\",\n             *      \"domain\": \".example.org\",\n             *      \"path\": \"/\",\n             *      \"expires\": expirationDate\n             *      }\n             *  }\n             *\n             *  These values get passed to Strophe.Connection via\n             *   options.cookies\n             */\n            var cookieName, cookieObj, isObj, cookieValue, expires, domain, path;\n            for (cookieName in (cookies || {})) {\n                expires = '';\n                domain = '';\n                path = '';\n                cookieObj = cookies[cookieName];\n                isObj = typeof cookieObj === \"object\";\n                cookieValue = escape(unescape(isObj ? cookieObj.value : cookieObj));\n                if (isObj) {\n                    expires = cookieObj.expires ? \";expires=\"+cookieObj.expires : '';\n                    domain = cookieObj.domain ? \";domain=\"+cookieObj.domain : '';\n                    path = cookieObj.path ? \";path=\"+cookieObj.path : '';\n                }\n                document.cookie =\n                    cookieName+'='+cookieValue + expires + domain + path;\n            }\n        }\n    };\n    return utils;\n}));\n\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/*global define, document, sessionStorage, setTimeout, clearTimeout, ActiveXObject, DOMParser, btoa, atob */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-core',[\n            'strophe-sha1',\n            'strophe-md5',\n            'strophe-utils'\n        ], function () {\n            return factory.apply(this, arguments);\n        });\n    }  else if (typeof exports === 'object') {\n        module.exports = factory(\n            require('./sha1'),\n            require('./md5'),\n            require('./utils')\n        );\n    } else {\n        // Browser globals\n        var o = factory(root.SHA1, root.MD5, root.stropheUtils);\n        root.Strophe =        o.Strophe;\n        root.$build =         o.$build;\n        root.$iq =            o.$iq;\n        root.$msg =           o.$msg;\n        root.$pres =          o.$pres;\n        root.SHA1 =           o.SHA1;\n        root.MD5 =            o.MD5;\n        root.b64_hmac_sha1 =  o.SHA1.b64_hmac_sha1;\n        root.b64_sha1 =       o.SHA1.b64_sha1;\n        root.str_hmac_sha1 =  o.SHA1.str_hmac_sha1;\n        root.str_sha1 =       o.SHA1.str_sha1;\n    }\n}(this, function (SHA1, MD5, utils) {\n\nvar Strophe;\n\n/** Function: $build\n *  Create a Strophe.Builder.\n *  This is an alias for 'new Strophe.Builder(name, attrs)'.\n *\n *  Parameters:\n *    (String) name - The root element name.\n *    (Object) attrs - The attributes for the root element in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $build(name, attrs) { return new Strophe.Builder(name, attrs); }\n\n/** Function: $msg\n *  Create a Strophe.Builder with a <message/> element as the root.\n *\n *  Parameters:\n *    (Object) attrs - The <message/> element attributes in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $msg(attrs) { return new Strophe.Builder(\"message\", attrs); }\n\n/** Function: $iq\n *  Create a Strophe.Builder with an <iq/> element as the root.\n *\n *  Parameters:\n *    (Object) attrs - The <iq/> element attributes in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $iq(attrs) { return new Strophe.Builder(\"iq\", attrs); }\n\n/** Function: $pres\n *  Create a Strophe.Builder with a <presence/> element as the root.\n *\n *  Parameters:\n *    (Object) attrs - The <presence/> element attributes in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $pres(attrs) { return new Strophe.Builder(\"presence\", attrs); }\n\n/** Class: Strophe\n *  An object container for all Strophe library functions.\n *\n *  This class is just a container for all the objects and constants\n *  used in the library.  It is not meant to be instantiated, but to\n *  provide a namespace for library objects, constants, and functions.\n */\nStrophe = {\n    /** Constant: VERSION */\n    VERSION: \"1.2.15\",\n\n    /** Constants: XMPP Namespace Constants\n     *  Common namespace constants from the XMPP RFCs and XEPs.\n     *\n     *  NS.HTTPBIND - HTTP BIND namespace from XEP 124.\n     *  NS.BOSH - BOSH namespace from XEP 206.\n     *  NS.CLIENT - Main XMPP client namespace.\n     *  NS.AUTH - Legacy authentication namespace.\n     *  NS.ROSTER - Roster operations namespace.\n     *  NS.PROFILE - Profile namespace.\n     *  NS.DISCO_INFO - Service discovery info namespace from XEP 30.\n     *  NS.DISCO_ITEMS - Service discovery items namespace from XEP 30.\n     *  NS.MUC - Multi-User Chat namespace from XEP 45.\n     *  NS.SASL - XMPP SASL namespace from RFC 3920.\n     *  NS.STREAM - XMPP Streams namespace from RFC 3920.\n     *  NS.BIND - XMPP Binding namespace from RFC 3920.\n     *  NS.SESSION - XMPP Session namespace from RFC 3920.\n     *  NS.XHTML_IM - XHTML-IM namespace from XEP 71.\n     *  NS.XHTML - XHTML body namespace from XEP 71.\n     */\n    NS: {\n        HTTPBIND: \"http://jabber.org/protocol/httpbind\",\n        BOSH: \"urn:xmpp:xbosh\",\n        CLIENT: \"jabber:client\",\n        AUTH: \"jabber:iq:auth\",\n        ROSTER: \"jabber:iq:roster\",\n        PROFILE: \"jabber:iq:profile\",\n        DISCO_INFO: \"http://jabber.org/protocol/disco#info\",\n        DISCO_ITEMS: \"http://jabber.org/protocol/disco#items\",\n        MUC: \"http://jabber.org/protocol/muc\",\n        SASL: \"urn:ietf:params:xml:ns:xmpp-sasl\",\n        STREAM: \"http://etherx.jabber.org/streams\",\n        FRAMING: \"urn:ietf:params:xml:ns:xmpp-framing\",\n        BIND: \"urn:ietf:params:xml:ns:xmpp-bind\",\n        SESSION: \"urn:ietf:params:xml:ns:xmpp-session\",\n        VERSION: \"jabber:iq:version\",\n        STANZAS: \"urn:ietf:params:xml:ns:xmpp-stanzas\",\n        XHTML_IM: \"http://jabber.org/protocol/xhtml-im\",\n        XHTML: \"http://www.w3.org/1999/xhtml\"\n    },\n\n    /** Constants: XHTML_IM Namespace\n     *  contains allowed tags, tag attributes, and css properties.\n     *  Used in the createHtml function to filter incoming html into the allowed XHTML-IM subset.\n     *  See http://xmpp.org/extensions/xep-0071.html#profile-summary for the list of recommended\n     *  allowed tags and their attributes.\n     */\n    XHTML: {\n        tags: ['a','blockquote','br','cite','em','img','li','ol','p','span','strong','ul','body'],\n        attributes: {\n            'a':          ['href'],\n            'blockquote': ['style'],\n            'br':         [],\n            'cite':       ['style'],\n            'em':         [],\n            'img':        ['src', 'alt', 'style', 'height', 'width'],\n            'li':         ['style'],\n            'ol':         ['style'],\n            'p':          ['style'],\n            'span':       ['style'],\n            'strong':     [],\n            'ul':         ['style'],\n            'body':       []\n        },\n        css: ['background-color','color','font-family','font-size','font-style','font-weight','margin-left','margin-right','text-align','text-decoration'],\n        /** Function: XHTML.validTag\n         *\n         * Utility method to determine whether a tag is allowed\n         * in the XHTML_IM namespace.\n         *\n         * XHTML tag names are case sensitive and must be lower case.\n         */\n        validTag: function(tag) {\n            for (var i = 0; i < Strophe.XHTML.tags.length; i++) {\n                if (tag === Strophe.XHTML.tags[i]) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        /** Function: XHTML.validAttribute\n         *\n         * Utility method to determine whether an attribute is allowed\n         * as recommended per XEP-0071\n         *\n         * XHTML attribute names are case sensitive and must be lower case.\n         */\n        validAttribute: function(tag, attribute) {\n            if (typeof Strophe.XHTML.attributes[tag] !== 'undefined' && Strophe.XHTML.attributes[tag].length > 0) {\n                for (var i = 0; i < Strophe.XHTML.attributes[tag].length; i++) {\n                    if (attribute === Strophe.XHTML.attributes[tag][i]) {\n                        return true;\n                    }\n                }\n            }\n        return false;\n        },\n        validCSS: function(style) {\n            for (var i = 0; i < Strophe.XHTML.css.length; i++) {\n                if (style === Strophe.XHTML.css[i]) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n\n    /** Constants: Connection Status Constants\n     *  Connection status constants for use by the connection handler\n     *  callback.\n     *\n     *  Status.ERROR - An error has occurred\n     *  Status.CONNECTING - The connection is currently being made\n     *  Status.CONNFAIL - The connection attempt failed\n     *  Status.AUTHENTICATING - The connection is authenticating\n     *  Status.AUTHFAIL - The authentication attempt failed\n     *  Status.CONNECTED - The connection has succeeded\n     *  Status.DISCONNECTED - The connection has been terminated\n     *  Status.DISCONNECTING - The connection is currently being terminated\n     *  Status.ATTACHED - The connection has been attached\n     *  Status.REDIRECT - The connection has been redirected\n     *  Status.CONNTIMEOUT - The connection has timed out\n     */\n    Status: {\n        ERROR: 0,\n        CONNECTING: 1,\n        CONNFAIL: 2,\n        AUTHENTICATING: 3,\n        AUTHFAIL: 4,\n        CONNECTED: 5,\n        DISCONNECTED: 6,\n        DISCONNECTING: 7,\n        ATTACHED: 8,\n        REDIRECT: 9,\n        CONNTIMEOUT: 10\n    },\n\n    ErrorCondition: {\n        BAD_FORMAT: \"bad-format\",\n        CONFLICT: \"conflict\",\n        MISSING_JID_NODE: \"x-strophe-bad-non-anon-jid\",\n        NO_AUTH_MECH: \"no-auth-mech\",\n        UNKNOWN_REASON: \"unknown\",\n    },\n\n    /** Constants: Log Level Constants\n     *  Logging level indicators.\n     *\n     *  LogLevel.DEBUG - Debug output\n     *  LogLevel.INFO - Informational output\n     *  LogLevel.WARN - Warnings\n     *  LogLevel.ERROR - Errors\n     *  LogLevel.FATAL - Fatal errors\n     */\n    LogLevel: {\n        DEBUG: 0,\n        INFO: 1,\n        WARN: 2,\n        ERROR: 3,\n        FATAL: 4\n    },\n\n    /** PrivateConstants: DOM Element Type Constants\n     *  DOM element types.\n     *\n     *  ElementType.NORMAL - Normal element.\n     *  ElementType.TEXT - Text data element.\n     *  ElementType.FRAGMENT - XHTML fragment element.\n     */\n    ElementType: {\n        NORMAL: 1,\n        TEXT: 3,\n        CDATA: 4,\n        FRAGMENT: 11\n    },\n\n    /** PrivateConstants: Timeout Values\n     *  Timeout values for error states.  These values are in seconds.\n     *  These should not be changed unless you know exactly what you are\n     *  doing.\n     *\n     *  TIMEOUT - Timeout multiplier. A waiting request will be considered\n     *      failed after Math.floor(TIMEOUT * wait) seconds have elapsed.\n     *      This defaults to 1.1, and with default wait, 66 seconds.\n     *  SECONDARY_TIMEOUT - Secondary timeout multiplier. In cases where\n     *      Strophe can detect early failure, it will consider the request\n     *      failed if it doesn't return after\n     *      Math.floor(SECONDARY_TIMEOUT * wait) seconds have elapsed.\n     *      This defaults to 0.1, and with default wait, 6 seconds.\n     */\n    TIMEOUT: 1.1,\n    SECONDARY_TIMEOUT: 0.1,\n\n    /** Function: addNamespace\n     *  This function is used to extend the current namespaces in\n     *  Strophe.NS.  It takes a key and a value with the key being the\n     *  name of the new namespace, with its actual value.\n     *  For example:\n     *  Strophe.addNamespace('PUBSUB', \"http://jabber.org/protocol/pubsub\");\n     *\n     *  Parameters:\n     *    (String) name - The name under which the namespace will be\n     *      referenced under Strophe.NS\n     *    (String) value - The actual namespace.\n     */\n    addNamespace: function (name, value) {\n        Strophe.NS[name] = value;\n    },\n\n    /** Function: forEachChild\n     *  Map a function over some or all child elements of a given element.\n     *\n     *  This is a small convenience function for mapping a function over\n     *  some or all of the children of an element.  If elemName is null, all\n     *  children will be passed to the function, otherwise only children\n     *  whose tag names match elemName will be passed.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The element to operate on.\n     *    (String) elemName - The child element tag name filter.\n     *    (Function) func - The function to apply to each child.  This\n     *      function should take a single argument, a DOM element.\n     */\n    forEachChild: function (elem, elemName, func) {\n        var i, childNode;\n        for (i = 0; i < elem.childNodes.length; i++) {\n            childNode = elem.childNodes[i];\n            if (childNode.nodeType === Strophe.ElementType.NORMAL &&\n                (!elemName || this.isTagEqual(childNode, elemName))) {\n                func(childNode);\n            }\n        }\n    },\n\n    /** Function: isTagEqual\n     *  Compare an element's tag name with a string.\n     *\n     *  This function is case sensitive.\n     *\n     *  Parameters:\n     *    (XMLElement) el - A DOM element.\n     *    (String) name - The element name.\n     *\n     *  Returns:\n     *    true if the element's tag name matches _el_, and false\n     *    otherwise.\n     */\n    isTagEqual: function (el, name) {\n        return el.tagName === name;\n    },\n\n    /** PrivateVariable: _xmlGenerator\n     *  _Private_ variable that caches a DOM document to\n     *  generate elements.\n     */\n    _xmlGenerator: null,\n\n    /** PrivateFunction: _makeGenerator\n     *  _Private_ function that creates a dummy XML DOM document to serve as\n     *  an element and text node generator.\n     */\n    _makeGenerator: function () {\n        var doc;\n        // IE9 does implement createDocument(); however, using it will cause the browser to leak memory on page unload.\n        // Here, we test for presence of createDocument() plus IE's proprietary documentMode attribute, which would be\n                // less than 10 in the case of IE9 and below.\n        if (document.implementation.createDocument === undefined ||\n                        document.implementation.createDocument && document.documentMode && document.documentMode < 10) {\n            doc = this._getIEXmlDom();\n            doc.appendChild(doc.createElement('strophe'));\n        } else {\n            doc = document.implementation\n                .createDocument('jabber:client', 'strophe', null);\n        }\n        return doc;\n    },\n\n    /** Function: xmlGenerator\n     *  Get the DOM document to generate elements.\n     *\n     *  Returns:\n     *    The currently used DOM document.\n     */\n    xmlGenerator: function () {\n        if (!Strophe._xmlGenerator) {\n            Strophe._xmlGenerator = Strophe._makeGenerator();\n        }\n        return Strophe._xmlGenerator;\n    },\n\n    /** PrivateFunction: _getIEXmlDom\n     *  Gets IE xml doc object\n     *\n     *  Returns:\n     *    A Microsoft XML DOM Object\n     *  See Also:\n     *    http://msdn.microsoft.com/en-us/library/ms757837%28VS.85%29.aspx\n     */\n    _getIEXmlDom : function() {\n        var doc = null;\n        var docStrings = [\n            \"Msxml2.DOMDocument.6.0\",\n            \"Msxml2.DOMDocument.5.0\",\n            \"Msxml2.DOMDocument.4.0\",\n            \"MSXML2.DOMDocument.3.0\",\n            \"MSXML2.DOMDocument\",\n            \"MSXML.DOMDocument\",\n            \"Microsoft.XMLDOM\"\n        ];\n\n        for (var d = 0; d < docStrings.length; d++) {\n            if (doc === null) {\n                try {\n                    doc = new ActiveXObject(docStrings[d]);\n                } catch (e) {\n                    doc = null;\n                }\n            } else {\n                break;\n            }\n        }\n        return doc;\n    },\n\n    /** Function: xmlElement\n     *  Create an XML DOM element.\n     *\n     *  This function creates an XML DOM element correctly across all\n     *  implementations. Note that these are not HTML DOM elements, which\n     *  aren't appropriate for XMPP stanzas.\n     *\n     *  Parameters:\n     *    (String) name - The name for the element.\n     *    (Array|Object) attrs - An optional array or object containing\n     *      key/value pairs to use as element attributes. The object should\n     *      be in the format {'key': 'value'} or {key: 'value'}. The array\n     *      should have the format [['key1', 'value1'], ['key2', 'value2']].\n     *    (String) text - The text child data for the element.\n     *\n     *  Returns:\n     *    A new XML DOM element.\n     */\n    xmlElement: function (name) {\n        if (!name) { return null; }\n\n        var node = Strophe.xmlGenerator().createElement(name);\n        // FIXME: this should throw errors if args are the wrong type or\n        // there are more than two optional args\n        var a, i, k;\n        for (a = 1; a < arguments.length; a++) {\n            var arg = arguments[a];\n            if (!arg) { continue; }\n            if (typeof(arg) === \"string\" ||\n                typeof(arg) === \"number\") {\n                node.appendChild(Strophe.xmlTextNode(arg));\n            } else if (typeof(arg) === \"object\" &&\n                       typeof(arg.sort) === \"function\") {\n                for (i = 0; i < arg.length; i++) {\n                    var attr = arg[i];\n                    if (typeof(attr) === \"object\" &&\n                        typeof(attr.sort) === \"function\" &&\n                        attr[1] !== undefined &&\n                        attr[1] !== null) {\n                        node.setAttribute(attr[0], attr[1]);\n                    }\n                }\n            } else if (typeof(arg) === \"object\") {\n                for (k in arg) {\n                    if (arg.hasOwnProperty(k)) {\n                        if (arg[k] !== undefined &&\n                            arg[k] !== null) {\n                            node.setAttribute(k, arg[k]);\n                        }\n                    }\n                }\n            }\n        }\n\n        return node;\n    },\n\n    /*  Function: xmlescape\n     *  Excapes invalid xml characters.\n     *\n     *  Parameters:\n     *     (String) text - text to escape.\n     *\n     *  Returns:\n     *      Escaped text.\n     */\n    xmlescape: function(text) {\n        text = text.replace(/\\&/g, \"&amp;\");\n        text = text.replace(/</g,  \"&lt;\");\n        text = text.replace(/>/g,  \"&gt;\");\n        text = text.replace(/'/g,  \"&apos;\");\n        text = text.replace(/\"/g,  \"&quot;\");\n        return text;\n    },\n\n    /*  Function: xmlunescape\n    *  Unexcapes invalid xml characters.\n    *\n    *  Parameters:\n    *     (String) text - text to unescape.\n    *\n    *  Returns:\n    *      Unescaped text.\n    */\n    xmlunescape: function(text) {\n        text = text.replace(/\\&amp;/g, \"&\");\n        text = text.replace(/&lt;/g,  \"<\");\n        text = text.replace(/&gt;/g,  \">\");\n        text = text.replace(/&apos;/g,  \"'\");\n        text = text.replace(/&quot;/g,  \"\\\"\");\n        return text;\n    },\n\n    /** Function: xmlTextNode\n     *  Creates an XML DOM text node.\n     *\n     *  Provides a cross implementation version of document.createTextNode.\n     *\n     *  Parameters:\n     *    (String) text - The content of the text node.\n     *\n     *  Returns:\n     *    A new XML DOM text node.\n     */\n    xmlTextNode: function (text) {\n        return Strophe.xmlGenerator().createTextNode(text);\n    },\n\n    /** Function: xmlHtmlNode\n     *  Creates an XML DOM html node.\n     *\n     *  Parameters:\n     *    (String) html - The content of the html node.\n     *\n     *  Returns:\n     *    A new XML DOM text node.\n     */\n    xmlHtmlNode: function (html) {\n        var node;\n        //ensure text is escaped\n        if (DOMParser) {\n            var parser = new DOMParser();\n            node = parser.parseFromString(html, \"text/xml\");\n        } else {\n            node = new ActiveXObject(\"Microsoft.XMLDOM\");\n            node.async=\"false\";\n            node.loadXML(html);\n        }\n        return node;\n    },\n\n    /** Function: getText\n     *  Get the concatenation of all text children of an element.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    A String with the concatenated text of all text element children.\n     */\n    getText: function (elem) {\n        if (!elem) { return null; }\n\n        var str = \"\";\n        if (elem.childNodes.length === 0 && elem.nodeType === Strophe.ElementType.TEXT) {\n            str += elem.nodeValue;\n        }\n\n        for (var i = 0; i < elem.childNodes.length; i++) {\n            if (elem.childNodes[i].nodeType === Strophe.ElementType.TEXT) {\n                str += elem.childNodes[i].nodeValue;\n            }\n        }\n\n        return Strophe.xmlescape(str);\n    },\n\n    /** Function: copyElement\n     *  Copy an XML DOM element.\n     *\n     *  This function copies a DOM element and all its descendants and returns\n     *  the new copy.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    A new, copied DOM element tree.\n     */\n    copyElement: function (elem) {\n        var i, el;\n        if (elem.nodeType === Strophe.ElementType.NORMAL) {\n            el = Strophe.xmlElement(elem.tagName);\n\n            for (i = 0; i < elem.attributes.length; i++) {\n                el.setAttribute(elem.attributes[i].nodeName,\n                                elem.attributes[i].value);\n            }\n\n            for (i = 0; i < elem.childNodes.length; i++) {\n                el.appendChild(Strophe.copyElement(elem.childNodes[i]));\n            }\n        } else if (elem.nodeType === Strophe.ElementType.TEXT) {\n            el = Strophe.xmlGenerator().createTextNode(elem.nodeValue);\n        }\n        return el;\n    },\n\n\n    /** Function: createHtml\n     *  Copy an HTML DOM element into an XML DOM.\n     *\n     *  This function copies a DOM element and all its descendants and returns\n     *  the new copy.\n     *\n     *  Parameters:\n     *    (HTMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    A new, copied DOM element tree.\n     */\n    createHtml: function (elem) {\n        var i, el, j, tag, attribute, value, css, cssAttrs, attr, cssName, cssValue;\n        if (elem.nodeType === Strophe.ElementType.NORMAL) {\n            tag = elem.nodeName.toLowerCase(); // XHTML tags must be lower case.\n            if(Strophe.XHTML.validTag(tag)) {\n                try {\n                    el = Strophe.xmlElement(tag);\n                    for(i = 0; i < Strophe.XHTML.attributes[tag].length; i++) {\n                        attribute = Strophe.XHTML.attributes[tag][i];\n                        value = elem.getAttribute(attribute);\n                        if(typeof value === 'undefined' || value === null || value === '' || value === false || value === 0) {\n                            continue;\n                        }\n                        if(attribute === 'style' && typeof value === 'object') {\n                            if(typeof value.cssText !== 'undefined') {\n                                value = value.cssText; // we're dealing with IE, need to get CSS out\n                            }\n                        }\n                        // filter out invalid css styles\n                        if(attribute === 'style') {\n                            css = [];\n                            cssAttrs = value.split(';');\n                            for(j = 0; j < cssAttrs.length; j++) {\n                                attr = cssAttrs[j].split(':');\n                                cssName = attr[0].replace(/^\\s*/, \"\").replace(/\\s*$/, \"\").toLowerCase();\n                                if(Strophe.XHTML.validCSS(cssName)) {\n                                    cssValue = attr[1].replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\n                                    css.push(cssName + ': ' + cssValue);\n                                }\n                            }\n                            if(css.length > 0) {\n                                value = css.join('; ');\n                                el.setAttribute(attribute, value);\n                            }\n                        } else {\n                            el.setAttribute(attribute, value);\n                        }\n                    }\n\n                    for (i = 0; i < elem.childNodes.length; i++) {\n                        el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n                    }\n                } catch(e) { // invalid elements\n                  el = Strophe.xmlTextNode('');\n                }\n            } else {\n                el = Strophe.xmlGenerator().createDocumentFragment();\n                for (i = 0; i < elem.childNodes.length; i++) {\n                    el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n                }\n            }\n        } else if (elem.nodeType === Strophe.ElementType.FRAGMENT) {\n            el = Strophe.xmlGenerator().createDocumentFragment();\n            for (i = 0; i < elem.childNodes.length; i++) {\n                el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n            }\n        } else if (elem.nodeType === Strophe.ElementType.TEXT) {\n            el = Strophe.xmlTextNode(elem.nodeValue);\n        }\n        return el;\n    },\n\n    /** Function: escapeNode\n     *  Escape the node part (also called local part) of a JID.\n     *\n     *  Parameters:\n     *    (String) node - A node (or local part).\n     *\n     *  Returns:\n     *    An escaped node (or local part).\n     */\n    escapeNode: function (node) {\n        if (typeof node !== \"string\") { return node; }\n        return node.replace(/^\\s+|\\s+$/g, '')\n            .replace(/\\\\/g,  \"\\\\5c\")\n            .replace(/ /g,   \"\\\\20\")\n            .replace(/\\\"/g,  \"\\\\22\")\n            .replace(/\\&/g,  \"\\\\26\")\n            .replace(/\\'/g,  \"\\\\27\")\n            .replace(/\\//g,  \"\\\\2f\")\n            .replace(/:/g,   \"\\\\3a\")\n            .replace(/</g,   \"\\\\3c\")\n            .replace(/>/g,   \"\\\\3e\")\n            .replace(/@/g,   \"\\\\40\");\n    },\n\n    /** Function: unescapeNode\n     *  Unescape a node part (also called local part) of a JID.\n     *\n     *  Parameters:\n     *    (String) node - A node (or local part).\n     *\n     *  Returns:\n     *    An unescaped node (or local part).\n     */\n    unescapeNode: function (node) {\n        if (typeof node !== \"string\") { return node; }\n        return node.replace(/\\\\20/g, \" \")\n            .replace(/\\\\22/g, '\"')\n            .replace(/\\\\26/g, \"&\")\n            .replace(/\\\\27/g, \"'\")\n            .replace(/\\\\2f/g, \"/\")\n            .replace(/\\\\3a/g, \":\")\n            .replace(/\\\\3c/g, \"<\")\n            .replace(/\\\\3e/g, \">\")\n            .replace(/\\\\40/g, \"@\")\n            .replace(/\\\\5c/g, \"\\\\\");\n    },\n\n    /** Function: getNodeFromJid\n     *  Get the node portion of a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the node.\n     */\n    getNodeFromJid: function (jid) {\n        if (jid.indexOf(\"@\") < 0) { return null; }\n        return jid.split(\"@\")[0];\n    },\n\n    /** Function: getDomainFromJid\n     *  Get the domain portion of a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the domain.\n     */\n    getDomainFromJid: function (jid) {\n        var bare = Strophe.getBareJidFromJid(jid);\n        if (bare.indexOf(\"@\") < 0) {\n            return bare;\n        } else {\n            var parts = bare.split(\"@\");\n            parts.splice(0, 1);\n            return parts.join('@');\n        }\n    },\n\n    /** Function: getResourceFromJid\n     *  Get the resource portion of a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the resource.\n     */\n    getResourceFromJid: function (jid) {\n        var s = jid.split(\"/\");\n        if (s.length < 2) { return null; }\n        s.splice(0, 1);\n        return s.join('/');\n    },\n\n    /** Function: getBareJidFromJid\n     *  Get the bare JID from a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the bare JID.\n     */\n    getBareJidFromJid: function (jid) {\n        return jid ? jid.split(\"/\")[0] : null;\n    },\n\n    /** PrivateFunction: _handleError\n     *  _Private_ function that properly logs an error to the console\n     */\n    _handleError: function (e) {\n        if (typeof e.stack !== \"undefined\") {\n            Strophe.fatal(e.stack);\n        }\n        if (e.sourceURL) {\n            Strophe.fatal(\"error: \" + this.handler + \" \" + e.sourceURL + \":\" +\n                          e.line + \" - \" + e.name + \": \" + e.message);\n        } else if (e.fileName) {\n            Strophe.fatal(\"error: \" + this.handler + \" \" +\n                          e.fileName + \":\" + e.lineNumber + \" - \" +\n                          e.name + \": \" + e.message);\n        } else {\n            Strophe.fatal(\"error: \" + e.message);\n        }\n    },\n\n    /** Function: log\n     *  User overrideable logging function.\n     *\n     *  This function is called whenever the Strophe library calls any\n     *  of the logging functions.  The default implementation of this\n     *  function logs only fatal errors.  If client code wishes to handle the logging\n     *  messages, it should override this with\n     *  > Strophe.log = function (level, msg) {\n     *  >   (user code here)\n     *  > };\n     *\n     *  Please note that data sent and received over the wire is logged\n     *  via Strophe.Connection.rawInput() and Strophe.Connection.rawOutput().\n     *\n     *  The different levels and their meanings are\n     *\n     *    DEBUG - Messages useful for debugging purposes.\n     *    INFO - Informational messages.  This is mostly information like\n     *      'disconnect was called' or 'SASL auth succeeded'.\n     *    WARN - Warnings about potential problems.  This is mostly used\n     *      to report transient connection errors like request timeouts.\n     *    ERROR - Some error occurred.\n     *    FATAL - A non-recoverable fatal error occurred.\n     *\n     *  Parameters:\n     *    (Integer) level - The log level of the log message.  This will\n     *      be one of the values in Strophe.LogLevel.\n     *    (String) msg - The log message.\n     */\n    log: function (level, msg) {\n        if (level === this.LogLevel.FATAL &&\n            typeof window.console === 'object' &&\n            typeof window.console.error === 'function') {\n            window.console.error(msg);\n        }\n    },\n\n    /** Function: debug\n     *  Log a message at the Strophe.LogLevel.DEBUG level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    debug: function(msg) {\n        this.log(this.LogLevel.DEBUG, msg);\n    },\n\n    /** Function: info\n     *  Log a message at the Strophe.LogLevel.INFO level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    info: function (msg) {\n        this.log(this.LogLevel.INFO, msg);\n    },\n\n    /** Function: warn\n     *  Log a message at the Strophe.LogLevel.WARN level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    warn: function (msg) {\n        this.log(this.LogLevel.WARN, msg);\n    },\n\n    /** Function: error\n     *  Log a message at the Strophe.LogLevel.ERROR level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    error: function (msg) {\n        this.log(this.LogLevel.ERROR, msg);\n    },\n\n    /** Function: fatal\n     *  Log a message at the Strophe.LogLevel.FATAL level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    fatal: function (msg) {\n        this.log(this.LogLevel.FATAL, msg);\n    },\n\n    /** Function: serialize\n     *  Render a DOM element and all descendants to a String.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    The serialized element tree as a String.\n     */\n    serialize: function (elem) {\n        var result;\n\n        if (!elem) { return null; }\n\n        if (typeof(elem.tree) === \"function\") {\n            elem = elem.tree();\n        }\n\n        var nodeName = elem.nodeName;\n        var i, child;\n\n        if (elem.getAttribute(\"_realname\")) {\n            nodeName = elem.getAttribute(\"_realname\");\n        }\n\n        result = \"<\" + nodeName;\n        for (i = 0; i < elem.attributes.length; i++) {\n             if(elem.attributes[i].nodeName !== \"_realname\") {\n               result += \" \" + elem.attributes[i].nodeName +\n                   \"='\" + Strophe.xmlescape(elem.attributes[i].value) + \"'\";\n             }\n        }\n\n        if (elem.childNodes.length > 0) {\n            result += \">\";\n            for (i = 0; i < elem.childNodes.length; i++) {\n                child = elem.childNodes[i];\n                switch( child.nodeType ){\n                  case Strophe.ElementType.NORMAL:\n                    // normal element, so recurse\n                    result += Strophe.serialize(child);\n                    break;\n                  case Strophe.ElementType.TEXT:\n                    // text element to escape values\n                    result += Strophe.xmlescape(child.nodeValue);\n                    break;\n                  case Strophe.ElementType.CDATA:\n                    // cdata section so don't escape values\n                    result += \"<![CDATA[\"+child.nodeValue+\"]]>\";\n                }\n            }\n            result += \"</\" + nodeName + \">\";\n        } else {\n            result += \"/>\";\n        }\n\n        return result;\n    },\n\n    /** PrivateVariable: _requestId\n     *  _Private_ variable that keeps track of the request ids for\n     *  connections.\n     */\n    _requestId: 0,\n\n    /** PrivateVariable: Strophe.connectionPlugins\n     *  _Private_ variable Used to store plugin names that need\n     *  initialization on Strophe.Connection construction.\n     */\n    _connectionPlugins: {},\n\n    /** Function: addConnectionPlugin\n     *  Extends the Strophe.Connection object with the given plugin.\n     *\n     *  Parameters:\n     *    (String) name - The name of the extension.\n     *    (Object) ptype - The plugin's prototype.\n     */\n    addConnectionPlugin: function (name, ptype) {\n        Strophe._connectionPlugins[name] = ptype;\n    }\n};\n\n/** Class: Strophe.Builder\n *  XML DOM builder.\n *\n *  This object provides an interface similar to JQuery but for building\n *  DOM elements easily and rapidly.  All the functions except for toString()\n *  and tree() return the object, so calls can be chained.  Here's an\n *  example using the $iq() builder helper.\n *  > $iq({to: 'you', from: 'me', type: 'get', id: '1'})\n *  >     .c('query', {xmlns: 'strophe:example'})\n *  >     .c('example')\n *  >     .toString()\n *\n *  The above generates this XML fragment\n *  > <iq to='you' from='me' type='get' id='1'>\n *  >   <query xmlns='strophe:example'>\n *  >     <example/>\n *  >   </query>\n *  > </iq>\n *  The corresponding DOM manipulations to get a similar fragment would be\n *  a lot more tedious and probably involve several helper variables.\n *\n *  Since adding children makes new operations operate on the child, up()\n *  is provided to traverse up the tree.  To add two children, do\n *  > builder.c('child1', ...).up().c('child2', ...)\n *  The next operation on the Builder will be relative to the second child.\n */\n\n/** Constructor: Strophe.Builder\n *  Create a Strophe.Builder object.\n *\n *  The attributes should be passed in object notation.  For example\n *  > var b = new Builder('message', {to: 'you', from: 'me'});\n *  or\n *  > var b = new Builder('messsage', {'xml:lang': 'en'});\n *\n *  Parameters:\n *    (String) name - The name of the root element.\n *    (Object) attrs - The attributes for the root element in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder.\n */\nStrophe.Builder = function (name, attrs) {\n    // Set correct namespace for jabber:client elements\n    if (name === \"presence\" || name === \"message\" || name === \"iq\") {\n        if (attrs && !attrs.xmlns) {\n            attrs.xmlns = Strophe.NS.CLIENT;\n        } else if (!attrs) {\n            attrs = {xmlns: Strophe.NS.CLIENT};\n        }\n    }\n\n    // Holds the tree being built.\n    this.nodeTree = Strophe.xmlElement(name, attrs);\n\n    // Points to the current operation node.\n    this.node = this.nodeTree;\n};\n\nStrophe.Builder.prototype = {\n    /** Function: tree\n     *  Return the DOM tree.\n     *\n     *  This function returns the current DOM tree as an element object.  This\n     *  is suitable for passing to functions like Strophe.Connection.send().\n     *\n     *  Returns:\n     *    The DOM tree as a element object.\n     */\n    tree: function () {\n        return this.nodeTree;\n    },\n\n    /** Function: toString\n     *  Serialize the DOM tree to a String.\n     *\n     *  This function returns a string serialization of the current DOM\n     *  tree.  It is often used internally to pass data to a\n     *  Strophe.Request object.\n     *\n     *  Returns:\n     *    The serialized DOM tree in a String.\n     */\n    toString: function () {\n        return Strophe.serialize(this.nodeTree);\n    },\n\n    /** Function: up\n     *  Make the current parent element the new current element.\n     *\n     *  This function is often used after c() to traverse back up the tree.\n     *  For example, to add two children to the same element\n     *  > builder.c('child1', {}).up().c('child2', {});\n     *\n     *  Returns:\n     *    The Stophe.Builder object.\n     */\n    up: function () {\n        this.node = this.node.parentNode;\n        return this;\n    },\n\n    /** Function: root\n     *  Make the root element the new current element.\n     *\n     *  When at a deeply nested element in the tree, this function can be used\n     *  to jump back to the root of the tree, instead of having to repeatedly\n     *  call up().\n     *\n     *  Returns:\n     *    The Stophe.Builder object.\n     */\n    root: function () {\n        this.node = this.nodeTree;\n        return this;\n    },\n\n    /** Function: attrs\n     *  Add or modify attributes of the current element.\n     *\n     *  The attributes should be passed in object notation.  This function\n     *  does not move the current element pointer.\n     *\n     *  Parameters:\n     *    (Object) moreattrs - The attributes to add/modify in object notation.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    attrs: function (moreattrs) {\n        for (var k in moreattrs) {\n            if (moreattrs.hasOwnProperty(k)) {\n                if (moreattrs[k] === undefined) {\n                    this.node.removeAttribute(k);\n                } else {\n                    this.node.setAttribute(k, moreattrs[k]);\n                }\n            }\n        }\n        return this;\n    },\n\n    /** Function: c\n     *  Add a child to the current element and make it the new current\n     *  element.\n     *\n     *  This function moves the current element pointer to the child,\n     *  unless text is provided.  If you need to add another child, it\n     *  is necessary to use up() to go back to the parent in the tree.\n     *\n     *  Parameters:\n     *    (String) name - The name of the child.\n     *    (Object) attrs - The attributes of the child in object notation.\n     *    (String) text - The text to add to the child.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    c: function (name, attrs, text) {\n        var child = Strophe.xmlElement(name, attrs, text);\n        this.node.appendChild(child);\n        if (typeof text !== \"string\" && typeof text !==\"number\") {\n            this.node = child;\n        }\n        return this;\n    },\n\n    /** Function: cnode\n     *  Add a child to the current element and make it the new current\n     *  element.\n     *\n     *  This function is the same as c() except that instead of using a\n     *  name and an attributes object to create the child it uses an\n     *  existing DOM element object.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    cnode: function (elem) {\n        var impNode;\n        var xmlGen = Strophe.xmlGenerator();\n        try {\n            impNode = (xmlGen.importNode !== undefined);\n        } catch (e) {\n            impNode = false;\n        }\n        var newElem = impNode ?\n                      xmlGen.importNode(elem, true) :\n                      Strophe.copyElement(elem);\n        this.node.appendChild(newElem);\n        this.node = newElem;\n        return this;\n    },\n\n    /** Function: t\n     *  Add a child text element.\n     *\n     *  This *does not* make the child the new current element since there\n     *  are no children of text elements.\n     *\n     *  Parameters:\n     *    (String) text - The text data to append to the current element.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    t: function (text) {\n        var child = Strophe.xmlTextNode(text);\n        this.node.appendChild(child);\n        return this;\n    },\n\n    /** Function: h\n     *  Replace current element contents with the HTML passed in.\n     *\n     *  This *does not* make the child the new current element\n     *\n     *  Parameters:\n     *    (String) html - The html to insert as contents of current element.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    h: function (html) {\n        var fragment = document.createElement('body');\n\n        // force the browser to try and fix any invalid HTML tags\n        fragment.innerHTML = html;\n\n        // copy cleaned html into an xml dom\n        var xhtml = Strophe.createHtml(fragment);\n\n        while(xhtml.childNodes.length > 0) {\n            this.node.appendChild(xhtml.childNodes[0]);\n        }\n        return this;\n    }\n};\n\n/** PrivateClass: Strophe.Handler\n *  _Private_ helper class for managing stanza handlers.\n *\n *  A Strophe.Handler encapsulates a user provided callback function to be\n *  executed when matching stanzas are received by the connection.\n *  Handlers can be either one-off or persistant depending on their\n *  return value. Returning true will cause a Handler to remain active, and\n *  returning false will remove the Handler.\n *\n *  Users will not use Strophe.Handler objects directly, but instead they\n *  will use Strophe.Connection.addHandler() and\n *  Strophe.Connection.deleteHandler().\n */\n\n/** PrivateConstructor: Strophe.Handler\n *  Create and initialize a new Strophe.Handler.\n *\n *  Parameters:\n *    (Function) handler - A function to be executed when the handler is run.\n *    (String) ns - The namespace to match.\n *    (String) name - The element name to match.\n *    (String) type - The element type to match.\n *    (String) id - The element id attribute to match.\n *    (String) from - The element from attribute to match.\n *    (Object) options - Handler options\n *\n *  Returns:\n *    A new Strophe.Handler object.\n */\nStrophe.Handler = function (handler, ns, name, type, id, from, options) {\n    this.handler = handler;\n    this.ns = ns;\n    this.name = name;\n    this.type = type;\n    this.id = id;\n    this.options = options || {'matchBareFromJid': false, 'ignoreNamespaceFragment': false};\n    // BBB: Maintain backward compatibility with old `matchBare` option\n    if (this.options.matchBare) {\n        Strophe.warn('The \"matchBare\" option is deprecated, use \"matchBareFromJid\" instead.');\n        this.options.matchBareFromJid = this.options.matchBare;\n        delete this.options.matchBare;\n    }\n\n    if (this.options.matchBareFromJid) {\n        this.from = from ? Strophe.getBareJidFromJid(from) : null;\n    } else {\n        this.from = from;\n    }\n    // whether the handler is a user handler or a system handler\n    this.user = true;\n};\n\nStrophe.Handler.prototype = {\n    /** PrivateFunction: getNamespace\n     *  Returns the XML namespace attribute on an element.\n     *  If `ignoreNamespaceFragment` was passed in for this handler, then the\n     *  URL fragment will be stripped.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XML element with the namespace.\n     *\n     *  Returns:\n     *    The namespace, with optionally the fragment stripped.\n     */\n    getNamespace: function (elem) {\n        var elNamespace = elem.getAttribute(\"xmlns\");\n        if (elNamespace && this.options.ignoreNamespaceFragment) {\n            elNamespace = elNamespace.split('#')[0];\n        }\n        return elNamespace;\n    },\n\n    /** PrivateFunction: namespaceMatch\n     *  Tests if a stanza matches the namespace set for this Strophe.Handler.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XML element to test.\n     *\n     *  Returns:\n     *    true if the stanza matches and false otherwise.\n     */\n    namespaceMatch: function (elem) {\n        var nsMatch = false;\n        if (!this.ns) {\n            return true;\n        } else {\n            var that = this;\n            Strophe.forEachChild(elem, null, function (elem) {\n                if (that.getNamespace(elem) === that.ns) {\n                    nsMatch = true;\n                }\n            });\n            nsMatch = nsMatch || this.getNamespace(elem) === this.ns;\n        }\n        return nsMatch;\n    },\n\n    /** PrivateFunction: isMatch\n     *  Tests if a stanza matches the Strophe.Handler.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XML element to test.\n     *\n     *  Returns:\n     *    true if the stanza matches and false otherwise.\n     */\n    isMatch: function (elem) {\n        var from = elem.getAttribute('from');\n        if (this.options.matchBareFromJid) {\n            from = Strophe.getBareJidFromJid(from);\n        }\n        var elem_type = elem.getAttribute(\"type\");\n        if (this.namespaceMatch(elem) &&\n            (!this.name || Strophe.isTagEqual(elem, this.name)) &&\n            (!this.type || (Array.isArray(this.type) ? this.type.indexOf(elem_type) !== -1 : elem_type === this.type)) &&\n            (!this.id || elem.getAttribute(\"id\") === this.id) &&\n            (!this.from || from === this.from)) {\n                return true;\n        }\n        return false;\n    },\n\n    /** PrivateFunction: run\n     *  Run the callback on a matching stanza.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The DOM element that triggered the\n     *      Strophe.Handler.\n     *\n     *  Returns:\n     *    A boolean indicating if the handler should remain active.\n     */\n    run: function (elem) {\n        var result = null;\n        try {\n            result = this.handler(elem);\n        } catch (e) {\n            Strophe._handleError(e);\n            throw e;\n        }\n        return result;\n    },\n\n    /** PrivateFunction: toString\n     *  Get a String representation of the Strophe.Handler object.\n     *\n     *  Returns:\n     *    A String.\n     */\n    toString: function () {\n        return \"{Handler: \" + this.handler + \"(\" + this.name + \",\" +\n            this.id + \",\" + this.ns + \")}\";\n    }\n};\n\n/** PrivateClass: Strophe.TimedHandler\n *  _Private_ helper class for managing timed handlers.\n *\n *  A Strophe.TimedHandler encapsulates a user provided callback that\n *  should be called after a certain period of time or at regular\n *  intervals.  The return value of the callback determines whether the\n *  Strophe.TimedHandler will continue to fire.\n *\n *  Users will not use Strophe.TimedHandler objects directly, but instead\n *  they will use Strophe.Connection.addTimedHandler() and\n *  Strophe.Connection.deleteTimedHandler().\n */\n\n/** PrivateConstructor: Strophe.TimedHandler\n *  Create and initialize a new Strophe.TimedHandler object.\n *\n *  Parameters:\n *    (Integer) period - The number of milliseconds to wait before the\n *      handler is called.\n *    (Function) handler - The callback to run when the handler fires.  This\n *      function should take no arguments.\n *\n *  Returns:\n *    A new Strophe.TimedHandler object.\n */\nStrophe.TimedHandler = function (period, handler) {\n    this.period = period;\n    this.handler = handler;\n    this.lastCalled = new Date().getTime();\n    this.user = true;\n};\n\nStrophe.TimedHandler.prototype = {\n    /** PrivateFunction: run\n     *  Run the callback for the Strophe.TimedHandler.\n     *\n     *  Returns:\n     *    true if the Strophe.TimedHandler should be called again, and false\n     *      otherwise.\n     */\n    run: function () {\n        this.lastCalled = new Date().getTime();\n        return this.handler();\n    },\n\n    /** PrivateFunction: reset\n     *  Reset the last called time for the Strophe.TimedHandler.\n     */\n    reset: function () {\n        this.lastCalled = new Date().getTime();\n    },\n\n    /** PrivateFunction: toString\n     *  Get a string representation of the Strophe.TimedHandler object.\n     *\n     *  Returns:\n     *    The string representation.\n     */\n    toString: function () {\n        return \"{TimedHandler: \" + this.handler + \"(\" + this.period +\")}\";\n    }\n};\n\n/** Class: Strophe.Connection\n *  XMPP Connection manager.\n *\n *  This class is the main part of Strophe.  It manages a BOSH or websocket\n *  connection to an XMPP server and dispatches events to the user callbacks\n *  as data arrives. It supports SASL PLAIN, SASL DIGEST-MD5, SASL SCRAM-SHA1\n *  and legacy authentication.\n *\n *  After creating a Strophe.Connection object, the user will typically\n *  call connect() with a user supplied callback to handle connection level\n *  events like authentication failure, disconnection, or connection\n *  complete.\n *\n *  The user will also have several event handlers defined by using\n *  addHandler() and addTimedHandler().  These will allow the user code to\n *  respond to interesting stanzas or do something periodically with the\n *  connection. These handlers will be active once authentication is\n *  finished.\n *\n *  To send data to the connection, use send().\n */\n\n/** Constructor: Strophe.Connection\n *  Create and initialize a Strophe.Connection object.\n *\n *  The transport-protocol for this connection will be chosen automatically\n *  based on the given service parameter. URLs starting with \"ws://\" or\n *  \"wss://\" will use WebSockets, URLs starting with \"http://\", \"https://\"\n *  or without a protocol will use BOSH.\n *\n *  To make Strophe connect to the current host you can leave out the protocol\n *  and host part and just pass the path, e.g.\n *\n *  > var conn = new Strophe.Connection(\"/http-bind/\");\n *\n *  Options common to both Websocket and BOSH:\n *  ------------------------------------------\n *\n *  cookies:\n *\n *  The *cookies* option allows you to pass in cookies to be added to the\n *  document. These cookies will then be included in the BOSH XMLHttpRequest\n *  or in the websocket connection.\n *\n *  The passed in value must be a map of cookie names and string values.\n *\n *  > { \"myCookie\": {\n *  >     \"value\": \"1234\",\n *  >     \"domain\": \".example.org\",\n *  >     \"path\": \"/\",\n *  >     \"expires\": expirationDate\n *  >     }\n *  > }\n *\n *  Note that cookies can't be set in this way for other domains (i.e. cross-domain).\n *  Those cookies need to be set under those domains, for example they can be\n *  set server-side by making a XHR call to that domain to ask it to set any\n *  necessary cookies.\n *\n *  mechanisms:\n *\n *  The *mechanisms* option allows you to specify the SASL mechanisms that this\n *  instance of Strophe.Connection (and therefore your XMPP client) will\n *  support.\n *\n *  The value must be an array of objects with Strophe.SASLMechanism\n *  prototypes.\n *\n *  If nothing is specified, then the following mechanisms (and their\n *  priorities) are registered:\n *\n *      SCRAM-SHA1 - 70\n *      DIGEST-MD5 - 60\n *      PLAIN - 50\n *      OAUTH-BEARER - 40\n *      OAUTH-2 - 30\n *      ANONYMOUS - 20\n *      EXTERNAL - 10\n *\n *  WebSocket options:\n *  ------------------\n *\n *  If you want to connect to the current host with a WebSocket connection you\n *  can tell Strophe to use WebSockets through a \"protocol\" attribute in the\n *  optional options parameter. Valid values are \"ws\" for WebSocket and \"wss\"\n *  for Secure WebSocket.\n *  So to connect to \"wss://CURRENT_HOSTNAME/xmpp-websocket\" you would call\n *\n *  > var conn = new Strophe.Connection(\"/xmpp-websocket/\", {protocol: \"wss\"});\n *\n *  Note that relative URLs _NOT_ starting with a \"/\" will also include the path\n *  of the current site.\n *\n *  Also because downgrading security is not permitted by browsers, when using\n *  relative URLs both BOSH and WebSocket connections will use their secure\n *  variants if the current connection to the site is also secure (https).\n *\n *  BOSH options:\n *  -------------\n *\n *  By adding \"sync\" to the options, you can control if requests will\n *  be made synchronously or not. The default behaviour is asynchronous.\n *  If you want to make requests synchronous, make \"sync\" evaluate to true.\n *  > var conn = new Strophe.Connection(\"/http-bind/\", {sync: true});\n *\n *  You can also toggle this on an already established connection.\n *  > conn.options.sync = true;\n *\n *  The *customHeaders* option can be used to provide custom HTTP headers to be\n *  included in the XMLHttpRequests made.\n *\n *  The *keepalive* option can be used to instruct Strophe to maintain the\n *  current BOSH session across interruptions such as webpage reloads.\n *\n *  It will do this by caching the sessions tokens in sessionStorage, and when\n *  \"restore\" is called it will check whether there are cached tokens with\n *  which it can resume an existing session.\n *\n *  The *withCredentials* option should receive a Boolean value and is used to\n *  indicate wether cookies should be included in ajax requests (by default\n *  they're not).\n *  Set this value to true if you are connecting to a BOSH service\n *  and for some reason need to send cookies to it.\n *  In order for this to work cross-domain, the server must also enable\n *  credentials by setting the Access-Control-Allow-Credentials response header\n *  to \"true\". For most usecases however this setting should be false (which\n *  is the default).\n *  Additionally, when using Access-Control-Allow-Credentials, the\n *  Access-Control-Allow-Origin header can't be set to the wildcard \"*\", but\n *  instead must be restricted to actual domains.\n *\n *  The *contentType* option can be set to change the default Content-Type\n *  of \"text/xml; charset=utf-8\", which can be useful to reduce the amount of\n *  CORS preflight requests that are sent to the server.\n *\n *  Parameters:\n *    (String) service - The BOSH or WebSocket service URL.\n *    (Object) options - A hash of configuration options\n *\n *  Returns:\n *    A new Strophe.Connection object.\n */\nStrophe.Connection = function (service, options) {\n    // The service URL\n    this.service = service;\n    // Configuration options\n    this.options = options || {};\n    var proto = this.options.protocol || \"\";\n\n    // Select protocal based on service or options\n    if (service.indexOf(\"ws:\") === 0 || service.indexOf(\"wss:\") === 0 ||\n            proto.indexOf(\"ws\") === 0) {\n        this._proto = new Strophe.Websocket(this);\n    } else {\n        this._proto = new Strophe.Bosh(this);\n    }\n\n    /* The connected JID. */\n    this.jid = \"\";\n    /* the JIDs domain */\n    this.domain = null;\n    /* stream:features */\n    this.features = null;\n\n    // SASL\n    this._sasl_data = {};\n    this.do_session = false;\n    this.do_bind = false;\n\n    // handler lists\n    this.timedHandlers = [];\n    this.handlers = [];\n    this.removeTimeds = [];\n    this.removeHandlers = [];\n    this.addTimeds = [];\n    this.addHandlers = [];\n    this.protocolErrorHandlers = {\n        'HTTP': {},\n        'websocket': {}\n    };\n\n    this._idleTimeout = null;\n    this._disconnectTimeout = null;\n\n    this.authenticated = false;\n    this.connected = false;\n    this.disconnecting = false;\n    this.do_authentication = true;\n    this.paused = false;\n    this.restored = false;\n\n    this._data = [];\n    this._uniqueId = 0;\n\n    this._sasl_success_handler = null;\n    this._sasl_failure_handler = null;\n    this._sasl_challenge_handler = null;\n\n    // Max retries before disconnecting\n    this.maxRetries = 5;\n\n    // Call onIdle callback every 1/10th of a second\n    // XXX: setTimeout should be called only with function expressions (23974bc1)\n    this._idleTimeout = setTimeout(function() {\n        this._onIdle();\n    }.bind(this), 100);\n\n    utils.addCookies(this.options.cookies);\n    this.registerSASLMechanisms(this.options.mechanisms);\n\n    // initialize plugins\n    for (var k in Strophe._connectionPlugins) {\n        if (Strophe._connectionPlugins.hasOwnProperty(k)) {\n            var ptype = Strophe._connectionPlugins[k];\n            // jslint complaints about the below line, but this is fine\n            var F = function () {}; // jshint ignore:line\n            F.prototype = ptype;\n            this[k] = new F();\n            this[k].init(this);\n        }\n    }\n};\n\nStrophe.Connection.prototype = {\n    /** Function: reset\n     *  Reset the connection.\n     *\n     *  This function should be called after a connection is disconnected\n     *  before that connection is reused.\n     */\n    reset: function () {\n        this._proto._reset();\n\n        // SASL\n        this.do_session = false;\n        this.do_bind = false;\n\n        // handler lists\n        this.timedHandlers = [];\n        this.handlers = [];\n        this.removeTimeds = [];\n        this.removeHandlers = [];\n        this.addTimeds = [];\n        this.addHandlers = [];\n\n        this.authenticated = false;\n        this.connected = false;\n        this.disconnecting = false;\n        this.restored = false;\n\n        this._data = [];\n        this._requests = [];\n        this._uniqueId = 0;\n    },\n\n    /** Function: pause\n     *  Pause the request manager.\n     *\n     *  This will prevent Strophe from sending any more requests to the\n     *  server.  This is very useful for temporarily pausing\n     *  BOSH-Connections while a lot of send() calls are happening quickly.\n     *  This causes Strophe to send the data in a single request, saving\n     *  many request trips.\n     */\n    pause: function () {\n        this.paused = true;\n    },\n\n    /** Function: resume\n     *  Resume the request manager.\n     *\n     *  This resumes after pause() has been called.\n     */\n    resume: function () {\n        this.paused = false;\n    },\n\n    /** Function: getUniqueId\n     *  Generate a unique ID for use in <iq/> elements.\n     *\n     *  All <iq/> stanzas are required to have unique id attributes.  This\n     *  function makes creating these easy.  Each connection instance has\n     *  a counter which starts from zero, and the value of this counter\n     *  plus a colon followed by the suffix becomes the unique id. If no\n     *  suffix is supplied, the counter is used as the unique id.\n     *\n     *  Suffixes are used to make debugging easier when reading the stream\n     *  data, and their use is recommended.  The counter resets to 0 for\n     *  every new connection for the same reason.  For connections to the\n     *  same server that authenticate the same way, all the ids should be\n     *  the same, which makes it easy to see changes.  This is useful for\n     *  automated testing as well.\n     *\n     *  Parameters:\n     *    (String) suffix - A optional suffix to append to the id.\n     *\n     *  Returns:\n     *    A unique string to be used for the id attribute.\n     */\n    getUniqueId: function(suffix) {\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random() * 16 | 0,\n                v = c === 'x' ? r : r & 0x3 | 0x8;\n            return v.toString(16);\n        });\n        if (typeof(suffix) === \"string\" || typeof(suffix) === \"number\") {\n            return uuid + \":\" + suffix;\n        } else {\n            return uuid + \"\";\n        }\n    },\n\n    /** Function: addProtocolErrorHandler\n     *  Register a handler function for when a protocol (websocker or HTTP)\n     *  error occurs.\n     *\n     *  NOTE: Currently only HTTP errors for BOSH requests are handled.\n     *  Patches that handle websocket errors would be very welcome.\n     *\n     *  Parameters:\n     *    (String) protocol - 'HTTP' or 'websocket'\n     *    (Integer) status_code - Error status code (e.g 500, 400 or 404)\n     *    (Function) callback - Function that will fire on Http error\n     *\n     *  Example:\n     *  function onError(err_code){\n     *    //do stuff\n     *  }\n     *\n     *  var conn = Strophe.connect('http://example.com/http-bind');\n     *  conn.addProtocolErrorHandler('HTTP', 500, onError);\n     *  // Triggers HTTP 500 error and onError handler will be called\n     *  conn.connect('user_jid@incorrect_jabber_host', 'secret', onConnect);\n     */\n    addProtocolErrorHandler: function(protocol, status_code, callback){\n        this.protocolErrorHandlers[protocol][status_code] = callback;\n    },\n\n\n    /** Function: connect\n     *  Starts the connection process.\n     *\n     *  As the connection process proceeds, the user supplied callback will\n     *  be triggered multiple times with status updates.  The callback\n     *  should take two arguments - the status code and the error condition.\n     *\n     *  The status code will be one of the values in the Strophe.Status\n     *  constants.  The error condition will be one of the conditions\n     *  defined in RFC 3920 or the condition 'strophe-parsererror'.\n     *\n     *  The Parameters _wait_, _hold_ and _route_ are optional and only relevant\n     *  for BOSH connections. Please see XEP 124 for a more detailed explanation\n     *  of the optional parameters.\n     *\n     *  Parameters:\n     *    (String) jid - The user's JID.  This may be a bare JID,\n     *      or a full JID.  If a node is not supplied, SASL OAUTHBEARER or\n     *      SASL ANONYMOUS authentication will be attempted (OAUTHBEARER will\n     *      process the provided password value as an access token).\n     *    (String) pass - The user's password.\n     *    (Function) callback - The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (String) route - The optional route value.\n     *    (String) authcid - The optional alternative authentication identity\n     *      (username) if intending to impersonate another user.\n     *      When using the SASL-EXTERNAL authentication mechanism, for example\n     *      with client certificates, then the authcid value is used to\n     *      determine whether an authorization JID (authzid) should be sent to\n     *      the server. The authzid should not be sent to the server if the\n     *      authzid and authcid are the same. So to prevent it from being sent\n     *      (for example when the JID is already contained in the client\n     *      certificate), set authcid to that same JID. See XEP-178 for more\n     *      details.\n     */\n    connect: function (jid, pass, callback, wait, hold, route, authcid) {\n        this.jid = jid;\n        /** Variable: authzid\n         *  Authorization identity.\n         */\n        this.authzid = Strophe.getBareJidFromJid(this.jid);\n\n        /** Variable: authcid\n         *  Authentication identity (User name).\n         */\n        this.authcid = authcid || Strophe.getNodeFromJid(this.jid);\n\n        /** Variable: pass\n         *  Authentication identity (User password).\n         */\n        this.pass = pass;\n\n        /** Variable: servtype\n         *  Digest MD5 compatibility.\n         */\n        this.servtype = \"xmpp\";\n\n        this.connect_callback = callback;\n        this.disconnecting = false;\n        this.connected = false;\n        this.authenticated = false;\n        this.restored = false;\n\n        // parse jid for domain\n        this.domain = Strophe.getDomainFromJid(this.jid);\n\n        this._changeConnectStatus(Strophe.Status.CONNECTING, null);\n\n        this._proto._connect(wait, hold, route);\n    },\n\n    /** Function: attach\n     *  Attach to an already created and authenticated BOSH session.\n     *\n     *  This function is provided to allow Strophe to attach to BOSH\n     *  sessions which have been created externally, perhaps by a Web\n     *  application.  This is often used to support auto-login type features\n     *  without putting user credentials into the page.\n     *\n     *  Parameters:\n     *    (String) jid - The full JID that is bound by the session.\n     *    (String) sid - The SID of the BOSH session.\n     *    (String) rid - The current RID of the BOSH session.  This RID\n     *      will be used by the next request.\n     *    (Function) callback The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    attach: function (jid, sid, rid, callback, wait, hold, wind) {\n        if (this._proto instanceof Strophe.Bosh) {\n            this._proto._attach(jid, sid, rid, callback, wait, hold, wind);\n        } else {\n            throw {\n                name: 'StropheSessionError',\n                message: 'The \"attach\" method can only be used with a BOSH connection.'\n            };\n        }\n    },\n\n    /** Function: restore\n     *  Attempt to restore a cached BOSH session.\n     *\n     *  This function is only useful in conjunction with providing the\n     *  \"keepalive\":true option when instantiating a new Strophe.Connection.\n     *\n     *  When \"keepalive\" is set to true, Strophe will cache the BOSH tokens\n     *  RID (Request ID) and SID (Session ID) and then when this function is\n     *  called, it will attempt to restore the session from those cached\n     *  tokens.\n     *\n     *  This function must therefore be called instead of connect or attach.\n     *\n     *  For an example on how to use it, please see examples/restore.js\n     *\n     *  Parameters:\n     *    (String) jid - The user's JID.  This may be a bare JID or a full JID.\n     *    (Function) callback - The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    restore: function (jid, callback, wait, hold, wind) {\n        if (this._sessionCachingSupported()) {\n            this._proto._restore(jid, callback, wait, hold, wind);\n        } else {\n            throw {\n                name: 'StropheSessionError',\n                message: 'The \"restore\" method can only be used with a BOSH connection.'\n            };\n        }\n    },\n\n    /** PrivateFunction: _sessionCachingSupported\n     * Checks whether sessionStorage and JSON are supported and whether we're\n     * using BOSH.\n     */\n    _sessionCachingSupported: function () {\n        if (this._proto instanceof Strophe.Bosh) {\n            if (!JSON) { return false; }\n            try {\n                sessionStorage.setItem('_strophe_', '_strophe_');\n                sessionStorage.removeItem('_strophe_');\n            } catch (e) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    },\n\n    /** Function: xmlInput\n     *  User overrideable function that receives XML data coming into the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.xmlInput = function (elem) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Due to limitations of current Browsers' XML-Parsers the opening and closing\n     *  <stream> tag for WebSocket-Connoctions will be passed as selfclosing here.\n     *\n     *  BOSH-Connections will have all stanzas wrapped in a <body> tag. See\n     *  <Strophe.Bosh.strip> if you want to strip this tag.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XML data received by the connection.\n     */\n    /* jshint unused:false */\n    xmlInput: function (elem) {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: xmlOutput\n     *  User overrideable function that receives XML data sent to the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.xmlOutput = function (elem) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Due to limitations of current Browsers' XML-Parsers the opening and closing\n     *  <stream> tag for WebSocket-Connoctions will be passed as selfclosing here.\n     *\n     *  BOSH-Connections will have all stanzas wrapped in a <body> tag. See\n     *  <Strophe.Bosh.strip> if you want to strip this tag.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XMLdata sent by the connection.\n     */\n    /* jshint unused:false */\n    xmlOutput: function (elem) {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: rawInput\n     *  User overrideable function that receives raw data coming into the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.rawInput = function (data) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Parameters:\n     *    (String) data - The data received by the connection.\n     */\n    /* jshint unused:false */\n    rawInput: function (data) {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: rawOutput\n     *  User overrideable function that receives raw data sent to the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.rawOutput = function (data) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Parameters:\n     *    (String) data - The data sent by the connection.\n     */\n    /* jshint unused:false */\n    rawOutput: function (data) {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: nextValidRid\n     *  User overrideable function that receives the new valid rid.\n     *\n     *  The default function does nothing. User code can override this with\n     *  > Strophe.Connection.nextValidRid = function (rid) {\n     *  >    (user code)\n     *  > };\n     *\n     *  Parameters:\n     *    (Number) rid - The next valid rid\n     */\n    /* jshint unused:false */\n    nextValidRid: function (rid) {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: send\n     *  Send a stanza.\n     *\n     *  This function is called to push data onto the send queue to\n     *  go out over the wire.  Whenever a request is sent to the BOSH\n     *  server, all pending data is sent and the queue is flushed.\n     *\n     *  Parameters:\n     *    (XMLElement |\n     *     [XMLElement] |\n     *     Strophe.Builder) elem - The stanza to send.\n     */\n    send: function (elem) {\n        if (elem === null) { return ; }\n        if (typeof(elem.sort) === \"function\") {\n            for (var i = 0; i < elem.length; i++) {\n                this._queueData(elem[i]);\n            }\n        } else if (typeof(elem.tree) === \"function\") {\n            this._queueData(elem.tree());\n        } else {\n            this._queueData(elem);\n        }\n\n        this._proto._send();\n    },\n\n    /** Function: flush\n     *  Immediately send any pending outgoing data.\n     *\n     *  Normally send() queues outgoing data until the next idle period\n     *  (100ms), which optimizes network use in the common cases when\n     *  several send()s are called in succession. flush() can be used to\n     *  immediately send all pending data.\n     */\n    flush: function () {\n        // cancel the pending idle period and run the idle function\n        // immediately\n        clearTimeout(this._idleTimeout);\n        this._onIdle();\n    },\n\n    /** Function: sendPresence\n     *  Helper function to send presence stanzas. The main benefit is for\n     *  sending presence stanzas for which you expect a responding presence\n     *  stanza with the same id (for example when leaving a chat room).\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The stanza to send.\n     *    (Function) callback - The callback function for a successful request.\n     *    (Function) errback - The callback function for a failed or timed\n     *      out request.  On timeout, the stanza will be null.\n     *    (Integer) timeout - The time specified in milliseconds for a\n     *      timeout to occur.\n     *\n     *  Returns:\n     *    The id used to send the presence.\n     */\n    sendPresence: function(elem, callback, errback, timeout) {\n        var timeoutHandler = null;\n        var that = this;\n        if (typeof(elem.tree) === \"function\") {\n            elem = elem.tree();\n        }\n        var id = elem.getAttribute('id');\n        if (!id) { // inject id if not found\n            id = this.getUniqueId(\"sendPresence\");\n            elem.setAttribute(\"id\", id);\n        }\n\n        if (typeof callback === \"function\" || typeof errback === \"function\") {\n            var handler = this.addHandler(function (stanza) {\n                // remove timeout handler if there is one\n                if (timeoutHandler) {\n                    that.deleteTimedHandler(timeoutHandler);\n                }\n                var type = stanza.getAttribute('type');\n                if (type === 'error') {\n                    if (errback) {\n                        errback(stanza);\n                    }\n                } else if (callback) {\n                    callback(stanza);\n                }\n            }, null, 'presence', null, id);\n\n            // if timeout specified, set up a timeout handler.\n            if (timeout) {\n                timeoutHandler = this.addTimedHandler(timeout, function () {\n                    // get rid of normal handler\n                    that.deleteHandler(handler);\n                    // call errback on timeout with null stanza\n                    if (errback) {\n                        errback(null);\n                    }\n                    return false;\n                });\n            }\n        }\n        this.send(elem);\n        return id;\n    },\n\n    /** Function: sendIQ\n     *  Helper function to send IQ stanzas.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The stanza to send.\n     *    (Function) callback - The callback function for a successful request.\n     *    (Function) errback - The callback function for a failed or timed\n     *      out request.  On timeout, the stanza will be null.\n     *    (Integer) timeout - The time specified in milliseconds for a\n     *      timeout to occur.\n     *\n     *  Returns:\n     *    The id used to send the IQ.\n    */\n    sendIQ: function(elem, callback, errback, timeout) {\n        var timeoutHandler = null;\n        var that = this;\n        if (typeof(elem.tree) === \"function\") {\n            elem = elem.tree();\n        }\n        var id = elem.getAttribute('id');\n        if (!id) { // inject id if not found\n            id = this.getUniqueId(\"sendIQ\");\n            elem.setAttribute(\"id\", id);\n        }\n\n        if (typeof callback === \"function\" || typeof errback === \"function\") {\n            var handler = this.addHandler(function (stanza) {\n                // remove timeout handler if there is one\n                if (timeoutHandler) {\n                    that.deleteTimedHandler(timeoutHandler);\n                }\n                var iqtype = stanza.getAttribute('type');\n                if (iqtype === 'result') {\n                    if (callback) {\n                        callback(stanza);\n                    }\n                } else if (iqtype === 'error') {\n                    if (errback) {\n                        errback(stanza);\n                    }\n                } else {\n                    throw {\n                        name: \"StropheError\",\n                        message: \"Got bad IQ type of \" + iqtype\n                    };\n                }\n            }, null, 'iq', ['error', 'result'], id);\n\n            // if timeout specified, set up a timeout handler.\n            if (timeout) {\n                timeoutHandler = this.addTimedHandler(timeout, function () {\n                    // get rid of normal handler\n                    that.deleteHandler(handler);\n                    // call errback on timeout with null stanza\n                    if (errback) {\n                        errback(null);\n                    }\n                    return false;\n                });\n            }\n        }\n        this.send(elem);\n        return id;\n    },\n\n    /** PrivateFunction: _queueData\n     *  Queue outgoing data for later sending.  Also ensures that the data\n     *  is a DOMElement.\n     */\n    _queueData: function (element) {\n        if (element === null ||\n            !element.tagName ||\n            !element.childNodes) {\n            throw {\n                name: \"StropheError\",\n                message: \"Cannot queue non-DOMElement.\"\n            };\n        }\n        this._data.push(element);\n    },\n\n    /** PrivateFunction: _sendRestart\n     *  Send an xmpp:restart stanza.\n     */\n    _sendRestart: function () {\n        this._data.push(\"restart\");\n        this._proto._sendRestart();\n        // XXX: setTimeout should be called only with function expressions (23974bc1)\n        this._idleTimeout = setTimeout(function() {\n            this._onIdle();\n        }.bind(this), 100);\n    },\n\n    /** Function: addTimedHandler\n     *  Add a timed handler to the connection.\n     *\n     *  This function adds a timed handler.  The provided handler will\n     *  be called every period milliseconds until it returns false,\n     *  the connection is terminated, or the handler is removed.  Handlers\n     *  that wish to continue being invoked should return true.\n     *\n     *  Because of method binding it is necessary to save the result of\n     *  this function if you wish to remove a handler with\n     *  deleteTimedHandler().\n     *\n     *  Note that user handlers are not active until authentication is\n     *  successful.\n     *\n     *  Parameters:\n     *    (Integer) period - The period of the handler.\n     *    (Function) handler - The callback function.\n     *\n     *  Returns:\n     *    A reference to the handler that can be used to remove it.\n     */\n    addTimedHandler: function (period, handler) {\n        var thand = new Strophe.TimedHandler(period, handler);\n        this.addTimeds.push(thand);\n        return thand;\n    },\n\n    /** Function: deleteTimedHandler\n     *  Delete a timed handler for a connection.\n     *\n     *  This function removes a timed handler from the connection.  The\n     *  handRef parameter is *not* the function passed to addTimedHandler(),\n     *  but is the reference returned from addTimedHandler().\n     *\n     *  Parameters:\n     *    (Strophe.TimedHandler) handRef - The handler reference.\n     */\n    deleteTimedHandler: function (handRef) {\n        // this must be done in the Idle loop so that we don't change\n        // the handlers during iteration\n        this.removeTimeds.push(handRef);\n    },\n\n    /** Function: addHandler\n     *  Add a stanza handler for the connection.\n     *\n     *  This function adds a stanza handler to the connection.  The\n     *  handler callback will be called for any stanza that matches\n     *  the parameters.  Note that if multiple parameters are supplied,\n     *  they must all match for the handler to be invoked.\n     *\n     *  The handler will receive the stanza that triggered it as its argument.\n     *  *The handler should return true if it is to be invoked again;\n     *  returning false will remove the handler after it returns.*\n     *\n     *  As a convenience, the ns parameters applies to the top level element\n     *  and also any of its immediate children.  This is primarily to make\n     *  matching /iq/query elements easy.\n     *\n     *  Options\n     *  ~~~~~~~\n     *  With the options argument, you can specify boolean flags that affect how\n     *  matches are being done.\n     *\n     *  Currently two flags exist:\n     *\n     *  - matchBareFromJid:\n     *      When set to true, the from parameter and the\n     *      from attribute on the stanza will be matched as bare JIDs instead\n     *      of full JIDs. To use this, pass {matchBareFromJid: true} as the\n     *      value of options. The default value for matchBareFromJid is false.\n     *\n     *  - ignoreNamespaceFragment:\n     *      When set to true, a fragment specified on the stanza's namespace\n     *      URL will be ignored when it's matched with the one configured for\n     *      the handler.\n     *\n     *      This means that if you register like this:\n     *      >   connection.addHandler(\n     *      >       handler,\n     *      >       'http://jabber.org/protocol/muc',\n     *      >       null, null, null, null,\n     *      >       {'ignoreNamespaceFragment': true}\n     *      >   );\n     *\n     *      Then a stanza with XML namespace of\n     *      'http://jabber.org/protocol/muc#user' will also be matched. If\n     *      'ignoreNamespaceFragment' is false, then only stanzas with\n     *      'http://jabber.org/protocol/muc' will be matched.\n     *\n     *  Deleting the handler\n     *  ~~~~~~~~~~~~~~~~~~~~\n     *  The return value should be saved if you wish to remove the handler\n     *  with deleteHandler().\n     *\n     *  Parameters:\n     *    (Function) handler - The user callback.\n     *    (String) ns - The namespace to match.\n     *    (String) name - The stanza name to match.\n     *    (String|Array) type - The stanza type (or types if an array) to match.\n     *    (String) id - The stanza id attribute to match.\n     *    (String) from - The stanza from attribute to match.\n     *    (String) options - The handler options\n     *\n     *  Returns:\n     *    A reference to the handler that can be used to remove it.\n     */\n    addHandler: function (handler, ns, name, type, id, from, options) {\n        var hand = new Strophe.Handler(handler, ns, name, type, id, from, options);\n        this.addHandlers.push(hand);\n        return hand;\n    },\n\n    /** Function: deleteHandler\n     *  Delete a stanza handler for a connection.\n     *\n     *  This function removes a stanza handler from the connection.  The\n     *  handRef parameter is *not* the function passed to addHandler(),\n     *  but is the reference returned from addHandler().\n     *\n     *  Parameters:\n     *    (Strophe.Handler) handRef - The handler reference.\n     */\n    deleteHandler: function (handRef) {\n        // this must be done in the Idle loop so that we don't change\n        // the handlers during iteration\n        this.removeHandlers.push(handRef);\n        // If a handler is being deleted while it is being added,\n        // prevent it from getting added\n        var i = this.addHandlers.indexOf(handRef);\n        if (i >= 0) {\n            this.addHandlers.splice(i, 1);\n        }\n    },\n\n    /** Function: registerSASLMechanisms\n     *\n     * Register the SASL mechanisms which will be supported by this instance of\n     * Strophe.Connection (i.e. which this XMPP client will support).\n     *\n     *  Parameters:\n     *    (Array) mechanisms - Array of objects with Strophe.SASLMechanism prototypes\n     *\n     */\n    registerSASLMechanisms: function (mechanisms) {\n        this.mechanisms = {};\n        mechanisms = mechanisms || [\n            Strophe.SASLAnonymous,\n            Strophe.SASLExternal,\n            Strophe.SASLMD5,\n            Strophe.SASLOAuthBearer,\n            Strophe.SASLXOAuth2,\n            Strophe.SASLPlain,\n            Strophe.SASLSHA1\n        ];\n        mechanisms.forEach(this.registerSASLMechanism.bind(this));\n    },\n\n    /** Function: registerSASLMechanism\n     *\n     * Register a single SASL mechanism, to be supported by this client.\n     *\n     *  Parameters:\n     *    (Object) mechanism - Object with a Strophe.SASLMechanism prototype\n     *\n     */\n    registerSASLMechanism: function (mechanism) {\n        this.mechanisms[mechanism.prototype.name] = mechanism;\n    },\n\n    /** Function: disconnect\n     *  Start the graceful disconnection process.\n     *\n     *  This function starts the disconnection process.  This process starts\n     *  by sending unavailable presence and sending BOSH body of type\n     *  terminate.  A timeout handler makes sure that disconnection happens\n     *  even if the BOSH server does not respond.\n     *  If the Connection object isn't connected, at least tries to abort all pending requests\n     *  so the connection object won't generate successful requests (which were already opened).\n     *\n     *  The user supplied connection callback will be notified of the\n     *  progress as this process happens.\n     *\n     *  Parameters:\n     *    (String) reason - The reason the disconnect is occuring.\n     */\n    disconnect: function (reason) {\n        this._changeConnectStatus(Strophe.Status.DISCONNECTING, reason);\n\n        Strophe.info(\"Disconnect was called because: \" + reason);\n        if (this.connected) {\n            var pres = false;\n            this.disconnecting = true;\n            if (this.authenticated) {\n                pres = $pres({\n                    xmlns: Strophe.NS.CLIENT,\n                    type: 'unavailable'\n                });\n            }\n            // setup timeout handler\n            this._disconnectTimeout = this._addSysTimedHandler(\n                3000, this._onDisconnectTimeout.bind(this));\n            this._proto._disconnect(pres);\n        } else {\n            Strophe.info(\"Disconnect was called before Strophe connected to the server\");\n            this._proto._abortAllRequests();\n            this._doDisconnect();\n        }\n    },\n\n    /** PrivateFunction: _changeConnectStatus\n     *  _Private_ helper function that makes sure plugins and the user's\n     *  callback are notified of connection status changes.\n     *\n     *  Parameters:\n     *    (Integer) status - the new connection status, one of the values\n     *      in Strophe.Status\n     *    (String) condition - the error condition or null\n     *    (XMLElement) elem - The triggering stanza.\n     */\n    _changeConnectStatus: function (status, condition, elem) {\n        // notify all plugins listening for status changes\n        for (var k in Strophe._connectionPlugins) {\n            if (Strophe._connectionPlugins.hasOwnProperty(k)) {\n                var plugin = this[k];\n                if (plugin.statusChanged) {\n                    try {\n                        plugin.statusChanged(status, condition);\n                    } catch (err) {\n                        Strophe.error(\"\" + k + \" plugin caused an exception \" +\n                                      \"changing status: \" + err);\n                    }\n                }\n            }\n        }\n\n        // notify the user's callback\n        if (this.connect_callback) {\n            try {\n                this.connect_callback(status, condition, elem);\n            } catch (e) {\n                Strophe._handleError(e);\n                Strophe.error(\n                    \"User connection callback caused an \"+\"exception: \"+e);\n            }\n        }\n    },\n\n    /** PrivateFunction: _doDisconnect\n     *  _Private_ function to disconnect.\n     *\n     *  This is the last piece of the disconnection logic.  This resets the\n     *  connection and alerts the user's connection callback.\n     */\n    _doDisconnect: function (condition) {\n        if (typeof this._idleTimeout === \"number\") {\n            clearTimeout(this._idleTimeout);\n        }\n\n        // Cancel Disconnect Timeout\n        if (this._disconnectTimeout !== null) {\n            this.deleteTimedHandler(this._disconnectTimeout);\n            this._disconnectTimeout = null;\n        }\n\n        Strophe.info(\"_doDisconnect was called\");\n        this._proto._doDisconnect();\n\n        this.authenticated = false;\n        this.disconnecting = false;\n        this.restored = false;\n\n        // delete handlers\n        this.handlers = [];\n        this.timedHandlers = [];\n        this.removeTimeds = [];\n        this.removeHandlers = [];\n        this.addTimeds = [];\n        this.addHandlers = [];\n\n        // tell the parent we disconnected\n        this._changeConnectStatus(Strophe.Status.DISCONNECTED, condition);\n        this.connected = false;\n    },\n\n    /** PrivateFunction: _dataRecv\n     *  _Private_ handler to processes incoming data from the the connection.\n     *\n     *  Except for _connect_cb handling the initial connection request,\n     *  this function handles the incoming data for all requests.  This\n     *  function also fires stanza handlers that match each incoming\n     *  stanza.\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The request that has data ready.\n     *    (string) req - The stanza a raw string (optiona).\n     */\n    _dataRecv: function (req, raw) {\n        Strophe.info(\"_dataRecv called\");\n        var elem = this._proto._reqToData(req);\n        if (elem === null) { return; }\n\n        if (this.xmlInput !== Strophe.Connection.prototype.xmlInput) {\n            if (elem.nodeName === this._proto.strip && elem.childNodes.length) {\n                this.xmlInput(elem.childNodes[0]);\n            } else {\n                this.xmlInput(elem);\n            }\n        }\n        if (this.rawInput !== Strophe.Connection.prototype.rawInput) {\n            if (raw) {\n                this.rawInput(raw);\n            } else {\n                this.rawInput(Strophe.serialize(elem));\n            }\n        }\n\n        // remove handlers scheduled for deletion\n        var i, hand;\n        while (this.removeHandlers.length > 0) {\n            hand = this.removeHandlers.pop();\n            i = this.handlers.indexOf(hand);\n            if (i >= 0) {\n                this.handlers.splice(i, 1);\n            }\n        }\n\n        // add handlers scheduled for addition\n        while (this.addHandlers.length > 0) {\n            this.handlers.push(this.addHandlers.pop());\n        }\n\n        // handle graceful disconnect\n        if (this.disconnecting && this._proto._emptyQueue()) {\n            this._doDisconnect();\n            return;\n        }\n\n        var type = elem.getAttribute(\"type\");\n        var cond, conflict;\n        if (type !== null && type === \"terminate\") {\n            // Don't process stanzas that come in after disconnect\n            if (this.disconnecting) {\n                return;\n            }\n\n            // an error occurred\n            cond = elem.getAttribute(\"condition\");\n            conflict = elem.getElementsByTagName(\"conflict\");\n            if (cond !== null) {\n                if (cond === \"remote-stream-error\" && conflict.length > 0) {\n                    cond = \"conflict\";\n                }\n                this._changeConnectStatus(Strophe.Status.CONNFAIL, cond);\n            } else {\n                this._changeConnectStatus(\n                    Strophe.Status.CONNFAIL,\n                    Strophe.ErrorCondition.UNKOWN_REASON\n                );\n            }\n            this._doDisconnect(cond);\n            return;\n        }\n\n        // send each incoming stanza through the handler chain\n        var that = this;\n        Strophe.forEachChild(elem, null, function (child) {\n            var i, newList;\n            // process handlers\n            newList = that.handlers;\n            that.handlers = [];\n            for (i = 0; i < newList.length; i++) {\n                var hand = newList[i];\n                // encapsulate 'handler.run' not to lose the whole handler list if\n                // one of the handlers throws an exception\n                try {\n                    if (hand.isMatch(child) &&\n                        (that.authenticated || !hand.user)) {\n                        if (hand.run(child)) {\n                            that.handlers.push(hand);\n                        }\n                    } else {\n                        that.handlers.push(hand);\n                    }\n                } catch(e) {\n                    // if the handler throws an exception, we consider it as false\n                    Strophe.warn('Removing Strophe handlers due to uncaught exception: '+e.message);\n                }\n            }\n        });\n    },\n\n\n    /** Attribute: mechanisms\n     *  SASL Mechanisms available for Connection.\n     */\n    mechanisms: {},\n\n    /** PrivateFunction: _no_auth_received\n     *\n     * Called on stream start/restart when no stream:features\n     * has been received or when no viable authentication mechanism is offered.\n     *\n     * Sends a blank poll request.\n     */\n    _no_auth_received: function (_callback) {\n        var error_msg =  \"Server did not offer a supported authentication mechanism\";\n        Strophe.error(error_msg);\n        this._changeConnectStatus(\n            Strophe.Status.CONNFAIL,\n            Strophe.ErrorCondition.NO_AUTH_MECH\n        );\n        if (_callback) {\n            _callback.call(this);\n        }\n        this._doDisconnect();\n    },\n\n    /** PrivateFunction: _connect_cb\n     *  _Private_ handler for initial connection request.\n     *\n     *  This handler is used to process the initial connection request\n     *  response from the BOSH server. It is used to set up authentication\n     *  handlers and start the authentication process.\n     *\n     *  SASL authentication will be attempted if available, otherwise\n     *  the code will fall back to legacy authentication.\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The current request.\n     *    (Function) _callback - low level (xmpp) connect callback function.\n     *      Useful for plugins with their own xmpp connect callback (when they\n     *      want to do something special).\n     */\n    _connect_cb: function (req, _callback, raw) {\n        Strophe.info(\"_connect_cb was called\");\n        this.connected = true;\n\n        var bodyWrap;\n        try {\n            bodyWrap = this._proto._reqToData(req);\n        } catch (e) {\n            if (e !== \"badformat\") { throw e; }\n            this._changeConnectStatus(\n                Strophe.Status.CONNFAIL,\n                Strophe.ErrorCondition.BAD_FORMAT\n            );\n            this._doDisconnect(Strophe.ErrorCondition.BAD_FORMAT);\n        }\n        if (!bodyWrap) { return; }\n\n        if (this.xmlInput !== Strophe.Connection.prototype.xmlInput) {\n            if (bodyWrap.nodeName === this._proto.strip && bodyWrap.childNodes.length) {\n                this.xmlInput(bodyWrap.childNodes[0]);\n            } else {\n                this.xmlInput(bodyWrap);\n            }\n        }\n        if (this.rawInput !== Strophe.Connection.prototype.rawInput) {\n            if (raw) {\n                this.rawInput(raw);\n            } else {\n                this.rawInput(Strophe.serialize(bodyWrap));\n            }\n        }\n\n        var conncheck = this._proto._connect_cb(bodyWrap);\n        if (conncheck === Strophe.Status.CONNFAIL) {\n            return;\n        }\n\n        // Check for the stream:features tag\n        var hasFeatures;\n        if (bodyWrap.getElementsByTagNameNS) {\n            hasFeatures = bodyWrap.getElementsByTagNameNS(Strophe.NS.STREAM, \"features\").length > 0;\n        } else {\n            hasFeatures = bodyWrap.getElementsByTagName(\"stream:features\").length > 0 ||\n                            bodyWrap.getElementsByTagName(\"features\").length > 0;\n        }\n        if (!hasFeatures) {\n            this._no_auth_received(_callback);\n            return;\n        }\n\n        var matched = [], i, mech;\n        var mechanisms = bodyWrap.getElementsByTagName(\"mechanism\");\n        if (mechanisms.length > 0) {\n            for (i = 0; i < mechanisms.length; i++) {\n                mech = Strophe.getText(mechanisms[i]);\n                if (this.mechanisms[mech]) matched.push(this.mechanisms[mech]);\n            }\n        }\n        if (matched.length === 0) {\n            if (bodyWrap.getElementsByTagName(\"auth\").length === 0) {\n                // There are no matching SASL mechanisms and also no legacy\n                // auth available.\n                this._no_auth_received(_callback);\n                return;\n            }\n        }\n        if (this.do_authentication !== false) {\n            this.authenticate(matched);\n        }\n    },\n\n    /** Function: sortMechanismsByPriority\n     *\n     *  Sorts an array of objects with prototype SASLMechanism according to\n     *  their priorities.\n     *\n     *  Parameters:\n     *    (Array) mechanisms - Array of SASL mechanisms.\n     *\n     */\n    sortMechanismsByPriority: function (mechanisms) {\n        // Sorting mechanisms according to priority.\n        var i, j, higher, swap;\n        for (i = 0; i < mechanisms.length - 1; ++i) {\n            higher = i;\n            for (j = i + 1; j < mechanisms.length; ++j) {\n                if (mechanisms[j].prototype.priority > mechanisms[higher].prototype.priority) {\n                    higher = j;\n                }\n            }\n            if (higher !== i) {\n                swap = mechanisms[i];\n                mechanisms[i] = mechanisms[higher];\n                mechanisms[higher] = swap;\n            }\n        }\n        return mechanisms;\n    },\n\n    /** PrivateFunction: _attemptSASLAuth\n     *\n     *  Iterate through an array of SASL mechanisms and attempt authentication\n     *  with the highest priority (enabled) mechanism.\n     *\n     *  Parameters:\n     *    (Array) mechanisms - Array of SASL mechanisms.\n     *\n     *  Returns:\n     *    (Boolean) mechanism_found - true or false, depending on whether a\n     *          valid SASL mechanism was found with which authentication could be\n     *          started.\n     */\n    _attemptSASLAuth: function (mechanisms) {\n        mechanisms = this.sortMechanismsByPriority(mechanisms || []);\n        var i = 0, mechanism_found = false;\n        for (i = 0; i < mechanisms.length; ++i) {\n            if (!mechanisms[i].prototype.test(this)) {\n                continue;\n            }\n            this._sasl_success_handler = this._addSysHandler(\n                this._sasl_success_cb.bind(this), null,\n                \"success\", null, null);\n            this._sasl_failure_handler = this._addSysHandler(\n                this._sasl_failure_cb.bind(this), null,\n                \"failure\", null, null);\n            this._sasl_challenge_handler = this._addSysHandler(\n                this._sasl_challenge_cb.bind(this), null,\n                \"challenge\", null, null);\n\n            this._sasl_mechanism = new mechanisms[i]();\n            this._sasl_mechanism.onStart(this);\n\n            var request_auth_exchange = $build(\"auth\", {\n                xmlns: Strophe.NS.SASL,\n                mechanism: this._sasl_mechanism.name\n            });\n            if (this._sasl_mechanism.isClientFirst) {\n                var response = this._sasl_mechanism.onChallenge(this, null);\n                request_auth_exchange.t(btoa(response));\n            }\n            this.send(request_auth_exchange.tree());\n            mechanism_found = true;\n            break;\n        }\n        return mechanism_found;\n    },\n\n    /** PrivateFunction: _attemptLegacyAuth\n     *\n     *  Attempt legacy (i.e. non-SASL) authentication.\n     *\n     */\n    _attemptLegacyAuth: function () {\n        if (Strophe.getNodeFromJid(this.jid) === null) {\n            // we don't have a node, which is required for non-anonymous\n            // client connections\n            this._changeConnectStatus(\n                Strophe.Status.CONNFAIL,\n                Strophe.ErrorCondition.MISSING_JID_NODE\n            );\n            this.disconnect(Strophe.ErrorCondition.MISSING_JID_NODE);\n        } else {\n            // Fall back to legacy authentication\n            this._changeConnectStatus(Strophe.Status.AUTHENTICATING, null);\n            this._addSysHandler(\n                this._auth1_cb.bind(this),\n                null, null, null, \"_auth_1\"\n            );\n            this.send($iq({\n                    'type': \"get\",\n                    'to': this.domain,\n                    'id': \"_auth_1\"\n                }).c(\"query\", {xmlns: Strophe.NS.AUTH})\n                .c(\"username\", {}).t(Strophe.getNodeFromJid(this.jid))\n                .tree());\n        }\n    },\n\n    /** Function: authenticate\n     * Set up authentication\n     *\n     *  Continues the initial connection request by setting up authentication\n     *  handlers and starting the authentication process.\n     *\n     *  SASL authentication will be attempted if available, otherwise\n     *  the code will fall back to legacy authentication.\n     *\n     *  Parameters:\n     *    (Array) matched - Array of SASL mechanisms supported.\n     *\n     */\n    authenticate: function (matched) {\n        if (!this._attemptSASLAuth(matched)) {\n            this._attemptLegacyAuth();\n        }\n    },\n\n    /** PrivateFunction: _sasl_challenge_cb\n     *  _Private_ handler for the SASL challenge\n     *\n     */\n    _sasl_challenge_cb: function(elem) {\n      var challenge = atob(Strophe.getText(elem));\n      var response = this._sasl_mechanism.onChallenge(this, challenge);\n      var stanza = $build('response', {\n          'xmlns': Strophe.NS.SASL\n      });\n      if (response !== \"\") {\n        stanza.t(btoa(response));\n      }\n      this.send(stanza.tree());\n      return true;\n    },\n\n    /** PrivateFunction: _auth1_cb\n     *  _Private_ handler for legacy authentication.\n     *\n     *  This handler is called in response to the initial <iq type='get'/>\n     *  for legacy authentication.  It builds an authentication <iq/> and\n     *  sends it, creating a handler (calling back to _auth2_cb()) to\n     *  handle the result\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The stanza that triggered the callback.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    /* jshint unused:false */\n    _auth1_cb: function (elem) {\n        // build plaintext auth iq\n        var iq = $iq({type: \"set\", id: \"_auth_2\"})\n            .c('query', {xmlns: Strophe.NS.AUTH})\n            .c('username', {}).t(Strophe.getNodeFromJid(this.jid))\n            .up()\n            .c('password').t(this.pass);\n\n        if (!Strophe.getResourceFromJid(this.jid)) {\n            // since the user has not supplied a resource, we pick\n            // a default one here.  unlike other auth methods, the server\n            // cannot do this for us.\n            this.jid = Strophe.getBareJidFromJid(this.jid) + '/strophe';\n        }\n        iq.up().c('resource', {}).t(Strophe.getResourceFromJid(this.jid));\n\n        this._addSysHandler(this._auth2_cb.bind(this), null,\n                            null, null, \"_auth_2\");\n        this.send(iq.tree());\n        return false;\n    },\n    /* jshint unused:true */\n\n    /** PrivateFunction: _sasl_success_cb\n     *  _Private_ handler for succesful SASL authentication.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_success_cb: function (elem) {\n        if (this._sasl_data[\"server-signature\"]) {\n            var serverSignature;\n            var success = atob(Strophe.getText(elem));\n            var attribMatch = /([a-z]+)=([^,]+)(,|$)/;\n            var matches = success.match(attribMatch);\n            if (matches[1] === \"v\") {\n                serverSignature = matches[2];\n            }\n\n            if (serverSignature !== this._sasl_data[\"server-signature\"]) {\n              // remove old handlers\n              this.deleteHandler(this._sasl_failure_handler);\n              this._sasl_failure_handler = null;\n              if (this._sasl_challenge_handler) {\n                this.deleteHandler(this._sasl_challenge_handler);\n                this._sasl_challenge_handler = null;\n              }\n\n              this._sasl_data = {};\n              return this._sasl_failure_cb(null);\n            }\n        }\n        Strophe.info(\"SASL authentication succeeded.\");\n\n        if (this._sasl_mechanism) {\n          this._sasl_mechanism.onSuccess();\n        }\n\n        // remove old handlers\n        this.deleteHandler(this._sasl_failure_handler);\n        this._sasl_failure_handler = null;\n        if (this._sasl_challenge_handler) {\n            this.deleteHandler(this._sasl_challenge_handler);\n            this._sasl_challenge_handler = null;\n        }\n\n        var streamfeature_handlers = [];\n        var wrapper = function(handlers, elem) {\n            while (handlers.length) {\n                this.deleteHandler(handlers.pop());\n            }\n            this._sasl_auth1_cb.bind(this)(elem);\n            return false;\n        };\n        streamfeature_handlers.push(this._addSysHandler(function(elem) {\n            wrapper.bind(this)(streamfeature_handlers, elem);\n        }.bind(this), null, \"stream:features\", null, null));\n        streamfeature_handlers.push(this._addSysHandler(function(elem) {\n            wrapper.bind(this)(streamfeature_handlers, elem);\n        }.bind(this), Strophe.NS.STREAM, \"features\", null, null));\n\n        // we must send an xmpp:restart now\n        this._sendRestart();\n\n        return false;\n    },\n\n    /** PrivateFunction: _sasl_auth1_cb\n     *  _Private_ handler to start stream binding.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_auth1_cb: function (elem) {\n        // save stream:features for future usage\n        this.features = elem;\n        var i, child;\n        for (i = 0; i < elem.childNodes.length; i++) {\n            child = elem.childNodes[i];\n            if (child.nodeName === 'bind') {\n                this.do_bind = true;\n            }\n\n            if (child.nodeName === 'session') {\n                this.do_session = true;\n            }\n        }\n\n        if (!this.do_bind) {\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n            return false;\n        } else {\n            this._addSysHandler(this._sasl_bind_cb.bind(this), null, null,\n                                null, \"_bind_auth_2\");\n\n            var resource = Strophe.getResourceFromJid(this.jid);\n            if (resource) {\n                this.send($iq({type: \"set\", id: \"_bind_auth_2\"})\n                          .c('bind', {xmlns: Strophe.NS.BIND})\n                          .c('resource', {}).t(resource).tree());\n            } else {\n                this.send($iq({type: \"set\", id: \"_bind_auth_2\"})\n                          .c('bind', {xmlns: Strophe.NS.BIND})\n                          .tree());\n            }\n        }\n        return false;\n    },\n\n    /** PrivateFunction: _sasl_bind_cb\n     *  _Private_ handler for binding result and session start.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_bind_cb: function (elem) {\n        if (elem.getAttribute(\"type\") === \"error\") {\n            Strophe.info(\"SASL binding failed.\");\n            var conflict = elem.getElementsByTagName(\"conflict\"), condition;\n            if (conflict.length > 0) {\n                condition = Strophe.ErrorCondition.CONFLICT;\n            }\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, condition, elem);\n            return false;\n        }\n\n        // TODO - need to grab errors\n        var bind = elem.getElementsByTagName(\"bind\");\n        var jidNode;\n        if (bind.length > 0) {\n            // Grab jid\n            jidNode = bind[0].getElementsByTagName(\"jid\");\n            if (jidNode.length > 0) {\n                this.jid = Strophe.getText(jidNode[0]);\n\n                if (this.do_session) {\n                    this._addSysHandler(this._sasl_session_cb.bind(this),\n                                        null, null, null, \"_session_auth_2\");\n\n                    this.send($iq({type: \"set\", id: \"_session_auth_2\"})\n                                  .c('session', {xmlns: Strophe.NS.SESSION})\n                                  .tree());\n                } else {\n                    this.authenticated = true;\n                    this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n                }\n            }\n        } else {\n            Strophe.info(\"SASL binding failed.\");\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null, elem);\n            return false;\n        }\n    },\n\n    /** PrivateFunction: _sasl_session_cb\n     *  _Private_ handler to finish successful SASL connection.\n     *\n     *  This sets Connection.authenticated to true on success, which\n     *  starts the processing of user handlers.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_session_cb: function (elem) {\n        if (elem.getAttribute(\"type\") === \"result\") {\n            this.authenticated = true;\n            this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n        } else if (elem.getAttribute(\"type\") === \"error\") {\n            Strophe.info(\"Session creation failed.\");\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null, elem);\n            return false;\n        }\n        return false;\n    },\n\n    /** PrivateFunction: _sasl_failure_cb\n     *  _Private_ handler for SASL authentication failure.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    /* jshint unused:false */\n    _sasl_failure_cb: function (elem) {\n        // delete unneeded handlers\n        if (this._sasl_success_handler) {\n            this.deleteHandler(this._sasl_success_handler);\n            this._sasl_success_handler = null;\n        }\n        if (this._sasl_challenge_handler) {\n            this.deleteHandler(this._sasl_challenge_handler);\n            this._sasl_challenge_handler = null;\n        }\n\n        if(this._sasl_mechanism)\n          this._sasl_mechanism.onFailure();\n        this._changeConnectStatus(Strophe.Status.AUTHFAIL, null, elem);\n        return false;\n    },\n    /* jshint unused:true */\n\n    /** PrivateFunction: _auth2_cb\n     *  _Private_ handler to finish legacy authentication.\n     *\n     *  This handler is called when the result from the jabber:iq:auth\n     *  <iq/> stanza is returned.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The stanza that triggered the callback.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _auth2_cb: function (elem) {\n        if (elem.getAttribute(\"type\") === \"result\") {\n            this.authenticated = true;\n            this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n        } else if (elem.getAttribute(\"type\") === \"error\") {\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null, elem);\n            this.disconnect('authentication failed');\n        }\n        return false;\n    },\n\n    /** PrivateFunction: _addSysTimedHandler\n     *  _Private_ function to add a system level timed handler.\n     *\n     *  This function is used to add a Strophe.TimedHandler for the\n     *  library code.  System timed handlers are allowed to run before\n     *  authentication is complete.\n     *\n     *  Parameters:\n     *    (Integer) period - The period of the handler.\n     *    (Function) handler - The callback function.\n     */\n    _addSysTimedHandler: function (period, handler) {\n        var thand = new Strophe.TimedHandler(period, handler);\n        thand.user = false;\n        this.addTimeds.push(thand);\n        return thand;\n    },\n\n    /** PrivateFunction: _addSysHandler\n     *  _Private_ function to add a system level stanza handler.\n     *\n     *  This function is used to add a Strophe.Handler for the\n     *  library code.  System stanza handlers are allowed to run before\n     *  authentication is complete.\n     *\n     *  Parameters:\n     *    (Function) handler - The callback function.\n     *    (String) ns - The namespace to match.\n     *    (String) name - The stanza name to match.\n     *    (String) type - The stanza type attribute to match.\n     *    (String) id - The stanza id attribute to match.\n     */\n    _addSysHandler: function (handler, ns, name, type, id) {\n        var hand = new Strophe.Handler(handler, ns, name, type, id);\n        hand.user = false;\n        this.addHandlers.push(hand);\n        return hand;\n    },\n\n    /** PrivateFunction: _onDisconnectTimeout\n     *  _Private_ timeout handler for handling non-graceful disconnection.\n     *\n     *  If the graceful disconnect process does not complete within the\n     *  time allotted, this handler finishes the disconnect anyway.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _onDisconnectTimeout: function () {\n        Strophe.info(\"_onDisconnectTimeout was called\");\n        this._changeConnectStatus(Strophe.Status.CONNTIMEOUT, null);\n        this._proto._onDisconnectTimeout();\n        // actually disconnect\n        this._doDisconnect();\n        return false;\n    },\n\n    /** PrivateFunction: _onIdle\n     *  _Private_ handler to process events during idle cycle.\n     *\n     *  This handler is called every 100ms to fire timed handlers that\n     *  are ready and keep poll requests going.\n     */\n    _onIdle: function () {\n        var i, thand, since, newList;\n\n        // add timed handlers scheduled for addition\n        // NOTE: we add before remove in the case a timed handler is\n        // added and then deleted before the next _onIdle() call.\n        while (this.addTimeds.length > 0) {\n            this.timedHandlers.push(this.addTimeds.pop());\n        }\n\n        // remove timed handlers that have been scheduled for deletion\n        while (this.removeTimeds.length > 0) {\n            thand = this.removeTimeds.pop();\n            i = this.timedHandlers.indexOf(thand);\n            if (i >= 0) {\n                this.timedHandlers.splice(i, 1);\n            }\n        }\n\n        // call ready timed handlers\n        var now = new Date().getTime();\n        newList = [];\n        for (i = 0; i < this.timedHandlers.length; i++) {\n            thand = this.timedHandlers[i];\n            if (this.authenticated || !thand.user) {\n                since = thand.lastCalled + thand.period;\n                if (since - now <= 0) {\n                    if (thand.run()) {\n                        newList.push(thand);\n                    }\n                } else {\n                    newList.push(thand);\n                }\n            }\n        }\n        this.timedHandlers = newList;\n\n        clearTimeout(this._idleTimeout);\n\n        this._proto._onIdle();\n\n        // reactivate the timer only if connected\n        if (this.connected) {\n            // XXX: setTimeout should be called only with function expressions (23974bc1)\n            this._idleTimeout = setTimeout(function() {\n                this._onIdle();\n            }.bind(this), 100);\n        }\n    }\n};\n\n/** Class: Strophe.SASLMechanism\n *\n *  encapsulates SASL authentication mechanisms.\n *\n *  User code may override the priority for each mechanism or disable it completely.\n *  See <priority> for information about changing priority and <test> for informatian on\n *  how to disable a mechanism.\n *\n *  By default, all mechanisms are enabled and the priorities are\n *\n *      OAUTHBEARER - 60\n *      SCRAM-SHA1 - 50\n *      DIGEST-MD5 - 40\n *      PLAIN - 30\n *      ANONYMOUS - 20\n *      EXTERNAL - 10\n *\n *  See: Strophe.Connection.addSupportedSASLMechanisms\n */\n\n/**\n * PrivateConstructor: Strophe.SASLMechanism\n * SASL auth mechanism abstraction.\n *\n *  Parameters:\n *    (String) name - SASL Mechanism name.\n *    (Boolean) isClientFirst - If client should send response first without challenge.\n *    (Number) priority - Priority.\n *\n *  Returns:\n *    A new Strophe.SASLMechanism object.\n */\nStrophe.SASLMechanism = function(name, isClientFirst, priority) {\n  /** PrivateVariable: name\n   *  Mechanism name.\n   */\n  this.name = name;\n  /** PrivateVariable: isClientFirst\n   *  If client sends response without initial server challenge.\n   */\n  this.isClientFirst = isClientFirst;\n  /** Variable: priority\n   *  Determines which <SASLMechanism> is chosen for authentication (Higher is better).\n   *  Users may override this to prioritize mechanisms differently.\n   *\n   *  In the default configuration the priorities are\n   *\n   *  SCRAM-SHA1 - 40\n   *  DIGEST-MD5 - 30\n   *  Plain - 20\n   *\n   *  Example: (This will cause Strophe to choose the mechanism that the server sent first)\n   *\n   *  > Strophe.SASLMD5.priority = Strophe.SASLSHA1.priority;\n   *\n   *  See <SASL mechanisms> for a list of available mechanisms.\n   *\n   */\n  this.priority = priority;\n};\n\nStrophe.SASLMechanism.prototype = {\n  /**\n   *  Function: test\n   *  Checks if mechanism able to run.\n   *  To disable a mechanism, make this return false;\n   *\n   *  To disable plain authentication run\n   *  > Strophe.SASLPlain.test = function() {\n   *  >   return false;\n   *  > }\n   *\n   *  See <SASL mechanisms> for a list of available mechanisms.\n   *\n   *  Parameters:\n   *    (Strophe.Connection) connection - Target Connection.\n   *\n   *  Returns:\n   *    (Boolean) If mechanism was able to run.\n   */\n  /* jshint unused:false */\n  test: function(connection) {\n    return true;\n  },\n  /* jshint unused:true */\n\n  /** PrivateFunction: onStart\n   *  Called before starting mechanism on some connection.\n   *\n   *  Parameters:\n   *    (Strophe.Connection) connection - Target Connection.\n   */\n  onStart: function(connection) {\n    this._connection = connection;\n  },\n\n  /** PrivateFunction: onChallenge\n   *  Called by protocol implementation on incoming challenge. If client is\n   *  first (isClientFirst === true) challenge will be null on the first call.\n   *\n   *  Parameters:\n   *    (Strophe.Connection) connection - Target Connection.\n   *    (String) challenge - current challenge to handle.\n   *\n   *  Returns:\n   *    (String) Mechanism response.\n   */\n  /* jshint unused:false */\n  onChallenge: function(connection, challenge) {\n    throw new Error(\"You should implement challenge handling!\");\n  },\n  /* jshint unused:true */\n\n  /** PrivateFunction: onFailure\n   *  Protocol informs mechanism implementation about SASL failure.\n   */\n  onFailure: function() {\n    this._connection = null;\n  },\n\n  /** PrivateFunction: onSuccess\n   *  Protocol informs mechanism implementation about SASL success.\n   */\n  onSuccess: function() {\n    this._connection = null;\n  }\n};\n\n  /** Constants: SASL mechanisms\n   *  Available authentication mechanisms\n   *\n   *  Strophe.SASLAnonymous - SASL ANONYMOUS authentication.\n   *  Strophe.SASLPlain - SASL PLAIN authentication.\n   *  Strophe.SASLMD5 - SASL DIGEST-MD5 authentication\n   *  Strophe.SASLSHA1 - SASL SCRAM-SHA1 authentication\n   *  Strophe.SASLOAuthBearer - SASL OAuth Bearer authentication\n   *  Strophe.SASLExternal - SASL EXTERNAL authentication\n   *  Strophe.SASLXOAuth2 - SASL X-OAuth2 authentication\n   */\n\n// Building SASL callbacks\n\n/** PrivateConstructor: SASLAnonymous\n *  SASL ANONYMOUS authentication.\n */\nStrophe.SASLAnonymous = function() {};\nStrophe.SASLAnonymous.prototype = new Strophe.SASLMechanism(\"ANONYMOUS\", false, 20);\n\nStrophe.SASLAnonymous.prototype.test = function(connection) {\n    return connection.authcid === null;\n};\n\n\n/** PrivateConstructor: SASLPlain\n *  SASL PLAIN authentication.\n */\nStrophe.SASLPlain = function() {};\nStrophe.SASLPlain.prototype = new Strophe.SASLMechanism(\"PLAIN\", true, 50);\n\nStrophe.SASLPlain.prototype.test = function(connection) {\n    return connection.authcid !== null;\n};\n\nStrophe.SASLPlain.prototype.onChallenge = function(connection) {\n    var auth_str = connection.authzid;\n    auth_str = auth_str + \"\\u0000\";\n    auth_str = auth_str + connection.authcid;\n    auth_str = auth_str + \"\\u0000\";\n    auth_str = auth_str + connection.pass;\n    return utils.utf16to8(auth_str);\n};\n\n\n/** PrivateConstructor: SASLSHA1\n *  SASL SCRAM SHA 1 authentication.\n */\nStrophe.SASLSHA1 = function() {};\nStrophe.SASLSHA1.prototype = new Strophe.SASLMechanism(\"SCRAM-SHA-1\", true, 70);\n\nStrophe.SASLSHA1.prototype.test = function(connection) {\n    return connection.authcid !== null;\n};\n\nStrophe.SASLSHA1.prototype.onChallenge = function(connection, challenge, test_cnonce) {\n  var cnonce = test_cnonce || MD5.hexdigest(Math.random() * 1234567890);\n  var auth_str = \"n=\" + utils.utf16to8(connection.authcid);\n  auth_str += \",r=\";\n  auth_str += cnonce;\n  connection._sasl_data.cnonce = cnonce;\n  connection._sasl_data[\"client-first-message-bare\"] = auth_str;\n\n  auth_str = \"n,,\" + auth_str;\n\n  this.onChallenge = function (connection, challenge) {\n    var nonce, salt, iter, Hi, U, U_old, i, k, pass;\n    var clientKey, serverKey, clientSignature;\n    var responseText = \"c=biws,\";\n    var authMessage = connection._sasl_data[\"client-first-message-bare\"] + \",\" +\n      challenge + \",\";\n    var cnonce = connection._sasl_data.cnonce;\n    var attribMatch = /([a-z]+)=([^,]+)(,|$)/;\n\n    while (challenge.match(attribMatch)) {\n      var matches = challenge.match(attribMatch);\n      challenge = challenge.replace(matches[0], \"\");\n      switch (matches[1]) {\n      case \"r\":\n        nonce = matches[2];\n        break;\n      case \"s\":\n        salt = matches[2];\n        break;\n      case \"i\":\n        iter = matches[2];\n        break;\n      }\n    }\n\n    if (nonce.substr(0, cnonce.length) !== cnonce) {\n      connection._sasl_data = {};\n      return connection._sasl_failure_cb();\n    }\n\n    responseText += \"r=\" + nonce;\n    authMessage += responseText;\n\n    salt = atob(salt);\n    salt += \"\\x00\\x00\\x00\\x01\";\n\n    pass = utils.utf16to8(connection.pass);\n    Hi = U_old = SHA1.core_hmac_sha1(pass, salt);\n    for (i = 1; i < iter; i++) {\n      U = SHA1.core_hmac_sha1(pass, SHA1.binb2str(U_old));\n      for (k = 0; k < 5; k++) {\n        Hi[k] ^= U[k];\n      }\n      U_old = U;\n    }\n    Hi = SHA1.binb2str(Hi);\n\n    clientKey = SHA1.core_hmac_sha1(Hi, \"Client Key\");\n    serverKey = SHA1.str_hmac_sha1(Hi, \"Server Key\");\n    clientSignature = SHA1.core_hmac_sha1(SHA1.str_sha1(SHA1.binb2str(clientKey)), authMessage);\n    connection._sasl_data[\"server-signature\"] = SHA1.b64_hmac_sha1(serverKey, authMessage);\n\n    for (k = 0; k < 5; k++) {\n      clientKey[k] ^= clientSignature[k];\n    }\n\n    responseText += \",p=\" + btoa(SHA1.binb2str(clientKey));\n    return responseText;\n  }.bind(this);\n\n  return auth_str;\n};\n\n\n/** PrivateConstructor: SASLMD5\n *  SASL DIGEST MD5 authentication.\n */\nStrophe.SASLMD5 = function() {};\nStrophe.SASLMD5.prototype = new Strophe.SASLMechanism(\"DIGEST-MD5\", false, 60);\n\nStrophe.SASLMD5.prototype.test = function(connection) {\n    return connection.authcid !== null;\n};\n\n/** PrivateFunction: _quote\n *  _Private_ utility function to backslash escape and quote strings.\n *\n *  Parameters:\n *    (String) str - The string to be quoted.\n *\n *  Returns:\n *    quoted string\n */\nStrophe.SASLMD5.prototype._quote = function (str) {\n    return '\"' + str.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"') + '\"';\n    //\" end string workaround for emacs\n};\n\nStrophe.SASLMD5.prototype.onChallenge = function(connection, challenge, test_cnonce) {\n  var attribMatch = /([a-z]+)=(\"[^\"]+\"|[^,\"]+)(?:,|$)/;\n  var cnonce = test_cnonce || MD5.hexdigest(\"\" + (Math.random() * 1234567890));\n  var realm = \"\";\n  var host = null;\n  var nonce = \"\";\n  var qop = \"\";\n  var matches;\n\n  while (challenge.match(attribMatch)) {\n    matches = challenge.match(attribMatch);\n    challenge = challenge.replace(matches[0], \"\");\n    matches[2] = matches[2].replace(/^\"(.+)\"$/, \"$1\");\n    switch (matches[1]) {\n    case \"realm\":\n      realm = matches[2];\n      break;\n    case \"nonce\":\n      nonce = matches[2];\n      break;\n    case \"qop\":\n      qop = matches[2];\n      break;\n    case \"host\":\n      host = matches[2];\n      break;\n    }\n  }\n\n  var digest_uri = connection.servtype + \"/\" + connection.domain;\n  if (host !== null) {\n    digest_uri = digest_uri + \"/\" + host;\n  }\n\n  var cred = utils.utf16to8(connection.authcid + \":\" + realm + \":\" + this._connection.pass);\n  var A1 = MD5.hash(cred) + \":\" + nonce + \":\" + cnonce;\n  var A2 = 'AUTHENTICATE:' + digest_uri;\n\n  var responseText = \"\";\n  responseText += 'charset=utf-8,';\n  responseText += 'username=' + this._quote(utils.utf16to8(connection.authcid)) + ',';\n  responseText += 'realm=' + this._quote(realm) + ',';\n  responseText += 'nonce=' + this._quote(nonce) + ',';\n  responseText += 'nc=00000001,';\n  responseText += 'cnonce=' + this._quote(cnonce) + ',';\n  responseText += 'digest-uri=' + this._quote(digest_uri) + ',';\n  responseText += 'response=' + MD5.hexdigest(MD5.hexdigest(A1) + \":\" +\n                                              nonce + \":00000001:\" +\n                                              cnonce + \":auth:\" +\n                                              MD5.hexdigest(A2)) + \",\";\n  responseText += 'qop=auth';\n\n  this.onChallenge = function () {\n      return \"\";\n  };\n  return responseText;\n};\n\n\n/** PrivateConstructor: SASLOAuthBearer\n *  SASL OAuth Bearer authentication.\n */\nStrophe.SASLOAuthBearer = function() {};\nStrophe.SASLOAuthBearer.prototype = new Strophe.SASLMechanism(\"OAUTHBEARER\", true, 40);\n\nStrophe.SASLOAuthBearer.prototype.test = function(connection) {\n    return connection.pass !== null;\n};\n\nStrophe.SASLOAuthBearer.prototype.onChallenge = function(connection) {\n    var auth_str = 'n,';\n    if (connection.authcid !== null) {\n      auth_str = auth_str + 'a=' + connection.authzid;\n    }\n    auth_str = auth_str + ',';\n    auth_str = auth_str + \"\\u0001\";\n    auth_str = auth_str + 'auth=Bearer ';\n    auth_str = auth_str + connection.pass;\n    auth_str = auth_str + \"\\u0001\";\n    auth_str = auth_str + \"\\u0001\";\n\n    return utils.utf16to8(auth_str);\n};\n\n\n/** PrivateConstructor: SASLExternal\n *  SASL EXTERNAL authentication.\n *\n *  The EXTERNAL mechanism allows a client to request the server to use\n *  credentials established by means external to the mechanism to\n *  authenticate the client. The external means may be, for instance,\n *  TLS services.\n */\nStrophe.SASLExternal = function() {};\nStrophe.SASLExternal.prototype = new Strophe.SASLMechanism(\"EXTERNAL\", true, 10);\n\nStrophe.SASLExternal.prototype.onChallenge = function(connection) {\n    /** According to XEP-178, an authzid SHOULD NOT be presented when the\n     * authcid contained or implied in the client certificate is the JID (i.e.\n     * authzid) with which the user wants to log in as.\n     *\n     * To NOT send the authzid, the user should therefore set the authcid equal\n     * to the JID when instantiating a new Strophe.Connection object.\n     */\n    return connection.authcid === connection.authzid ? '' : connection.authzid;\n};\n\n\n/** PrivateConstructor: SASLXOAuth2\n *  SASL X-OAuth2 authentication.\n */\nStrophe.SASLXOAuth2 = function () { };\nStrophe.SASLXOAuth2.prototype = new Strophe.SASLMechanism(\"X-OAUTH2\", true, 30);\n\nStrophe.SASLXOAuth2.prototype.test = function (connection) {\n    return connection.pass !== null;\n};\n\nStrophe.SASLXOAuth2.prototype.onChallenge = function (connection) {\n    var auth_str = '\\u0000';\n    if (connection.authcid !== null) {\n        auth_str = auth_str + connection.authzid;\n    }\n    auth_str = auth_str + \"\\u0000\";\n    auth_str = auth_str + connection.pass;\n\n    return utils.utf16to8(auth_str);\n};\n\n\nreturn {\n    'Strophe':         Strophe,\n    '$build':          $build,\n    '$iq':             $iq,\n    '$msg':            $msg,\n    '$pres':           $pres,\n    'SHA1':            SHA1,\n    'MD5':             MD5,\n    'b64_hmac_sha1':   SHA1.b64_hmac_sha1,\n    'b64_sha1':        SHA1.b64_sha1,\n    'str_hmac_sha1':   SHA1.str_hmac_sha1,\n    'str_sha1':        SHA1.str_sha1\n};\n}));\n\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/* global define, window, setTimeout, clearTimeout, XMLHttpRequest, ActiveXObject, Strophe, $build */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-bosh',['strophe-core'], function (core) {\n            return factory(\n                core.Strophe,\n                core.$build\n            );\n        });\n    } else if (typeof exports === 'object') {\n        var core = require('./core');\n\n        module.exports = factory(core.Strophe, core.$build);\n    } else {\n        // Browser globals\n        return factory(Strophe, $build);\n    }\n}(this, function (Strophe, $build) {\n\n/** PrivateClass: Strophe.Request\n *  _Private_ helper class that provides a cross implementation abstraction\n *  for a BOSH related XMLHttpRequest.\n *\n *  The Strophe.Request class is used internally to encapsulate BOSH request\n *  information.  It is not meant to be used from user's code.\n */\n\n/** PrivateConstructor: Strophe.Request\n *  Create and initialize a new Strophe.Request object.\n *\n *  Parameters:\n *    (XMLElement) elem - The XML data to be sent in the request.\n *    (Function) func - The function that will be called when the\n *      XMLHttpRequest readyState changes.\n *    (Integer) rid - The BOSH rid attribute associated with this request.\n *    (Integer) sends - The number of times this same request has been sent.\n */\nStrophe.Request = function (elem, func, rid, sends) {\n    this.id = ++Strophe._requestId;\n    this.xmlData = elem;\n    this.data = Strophe.serialize(elem);\n    // save original function in case we need to make a new request\n    // from this one.\n    this.origFunc = func;\n    this.func = func;\n    this.rid = rid;\n    this.date = NaN;\n    this.sends = sends || 0;\n    this.abort = false;\n    this.dead = null;\n\n    this.age = function () {\n        if (!this.date) { return 0; }\n        var now = new Date();\n        return (now - this.date) / 1000;\n    };\n    this.timeDead = function () {\n        if (!this.dead) { return 0; }\n        var now = new Date();\n        return (now - this.dead) / 1000;\n    };\n    this.xhr = this._newXHR();\n};\n\nStrophe.Request.prototype = {\n    /** PrivateFunction: getResponse\n     *  Get a response from the underlying XMLHttpRequest.\n     *\n     *  This function attempts to get a response from the request and checks\n     *  for errors.\n     *\n     *  Throws:\n     *    \"parsererror\" - A parser error occured.\n     *    \"badformat\" - The entity has sent XML that cannot be processed.\n     *\n     *  Returns:\n     *    The DOM element tree of the response.\n     */\n    getResponse: function () {\n        var node = null;\n        if (this.xhr.responseXML && this.xhr.responseXML.documentElement) {\n            node = this.xhr.responseXML.documentElement;\n            if (node.tagName === \"parsererror\") {\n                Strophe.error(\"invalid response received\");\n                Strophe.error(\"responseText: \" + this.xhr.responseText);\n                Strophe.error(\"responseXML: \" +\n                              Strophe.serialize(this.xhr.responseXML));\n                throw \"parsererror\";\n            }\n        } else if (this.xhr.responseText) {\n            // In React Native, we may get responseText but no responseXML.  We can try to parse it manually.\n            Strophe.debug(\"Got responseText but no responseXML; attempting to parse it with DOMParser...\");\n            node = new DOMParser().parseFromString(this.xhr.responseText, 'application/xml').documentElement;\n            if (!node) {\n                throw new Error('Parsing produced null node');\n            } else if (node.querySelector('parsererror')) {\n                Strophe.error(\"invalid response received: \" + node.querySelector('parsererror').textContent);\n                Strophe.error(\"responseText: \" + this.xhr.responseText);\n                throw \"badformat\";\n            }\n        }\n        return node;\n    },\n\n    /** PrivateFunction: _newXHR\n     *  _Private_ helper function to create XMLHttpRequests.\n     *\n     *  This function creates XMLHttpRequests across all implementations.\n     *\n     *  Returns:\n     *    A new XMLHttpRequest.\n     */\n    _newXHR: function () {\n        var xhr = null;\n        if (window.XMLHttpRequest) {\n            xhr = new XMLHttpRequest();\n            if (xhr.overrideMimeType) {\n                xhr.overrideMimeType(\"text/xml; charset=utf-8\");\n            }\n        } else if (window.ActiveXObject) {\n            xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n        }\n        // use Function.bind() to prepend ourselves as an argument\n        xhr.onreadystatechange = this.func.bind(null, this);\n        return xhr;\n    }\n};\n\n/** Class: Strophe.Bosh\n *  _Private_ helper class that handles BOSH Connections\n *\n *  The Strophe.Bosh class is used internally by Strophe.Connection\n *  to encapsulate BOSH sessions. It is not meant to be used from user's code.\n */\n\n/** File: bosh.js\n *  A JavaScript library to enable BOSH in Strophejs.\n *\n *  this library uses Bidirectional-streams Over Synchronous HTTP (BOSH)\n *  to emulate a persistent, stateful, two-way connection to an XMPP server.\n *  More information on BOSH can be found in XEP 124.\n */\n\n/** PrivateConstructor: Strophe.Bosh\n *  Create and initialize a Strophe.Bosh object.\n *\n *  Parameters:\n *    (Strophe.Connection) connection - The Strophe.Connection that will use BOSH.\n *\n *  Returns:\n *    A new Strophe.Bosh object.\n */\nStrophe.Bosh = function(connection) {\n    this._conn = connection;\n    /* request id for body tags */\n    this.rid = Math.floor(Math.random() * 4294967295);\n    /* The current session ID. */\n    this.sid = null;\n\n    // default BOSH values\n    this.hold = 1;\n    this.wait = 60;\n    this.window = 5;\n    this.errors = 0;\n    this.inactivity = null;\n\n    this.lastResponseHeaders = null;\n\n    this._requests = [];\n};\n\nStrophe.Bosh.prototype = {\n    /** Variable: strip\n     *\n     *  BOSH-Connections will have all stanzas wrapped in a <body> tag when\n     *  passed to <Strophe.Connection.xmlInput> or <Strophe.Connection.xmlOutput>.\n     *  To strip this tag, User code can set <Strophe.Bosh.strip> to \"body\":\n     *\n     *  > Strophe.Bosh.prototype.strip = \"body\";\n     *\n     *  This will enable stripping of the body tag in both\n     *  <Strophe.Connection.xmlInput> and <Strophe.Connection.xmlOutput>.\n     */\n    strip: null,\n\n    /** PrivateFunction: _buildBody\n     *  _Private_ helper function to generate the <body/> wrapper for BOSH.\n     *\n     *  Returns:\n     *    A Strophe.Builder with a <body/> element.\n     */\n    _buildBody: function () {\n        var bodyWrap = $build('body', {\n            rid: this.rid++,\n            xmlns: Strophe.NS.HTTPBIND\n        });\n        if (this.sid !== null) {\n            bodyWrap.attrs({sid: this.sid});\n        }\n        if (this._conn.options.keepalive && this._conn._sessionCachingSupported()) {\n            this._cacheSession();\n        }\n        return bodyWrap;\n    },\n\n    /** PrivateFunction: _reset\n     *  Reset the connection.\n     *\n     *  This function is called by the reset function of the Strophe Connection\n     */\n    _reset: function () {\n        this.rid = Math.floor(Math.random() * 4294967295);\n        this.sid = null;\n        this.errors = 0;\n        if (this._conn._sessionCachingSupported()) {\n            window.sessionStorage.removeItem('strophe-bosh-session');\n        }\n\n        this._conn.nextValidRid(this.rid);\n    },\n\n    /** PrivateFunction: _connect\n     *  _Private_ function that initializes the BOSH connection.\n     *\n     *  Creates and sends the Request that initializes the BOSH connection.\n     */\n    _connect: function (wait, hold, route) {\n        this.wait = wait || this.wait;\n        this.hold = hold || this.hold;\n        this.errors = 0;\n\n        // build the body tag\n        var body = this._buildBody().attrs({\n            to: this._conn.domain,\n            \"xml:lang\": \"en\",\n            wait: this.wait,\n            hold: this.hold,\n            content: \"text/xml; charset=utf-8\",\n            ver: \"1.6\",\n            \"xmpp:version\": \"1.0\",\n            \"xmlns:xmpp\": Strophe.NS.BOSH\n        });\n\n        if(route){\n            body.attrs({\n                route: route\n            });\n        }\n\n        var _connect_cb = this._conn._connect_cb;\n\n        this._requests.push(\n            new Strophe.Request(body.tree(),\n                                this._onRequestStateChange.bind(\n                                    this, _connect_cb.bind(this._conn)),\n                                body.tree().getAttribute(\"rid\")));\n        this._throttledRequestHandler();\n    },\n\n    /** PrivateFunction: _attach\n     *  Attach to an already created and authenticated BOSH session.\n     *\n     *  This function is provided to allow Strophe to attach to BOSH\n     *  sessions which have been created externally, perhaps by a Web\n     *  application.  This is often used to support auto-login type features\n     *  without putting user credentials into the page.\n     *\n     *  Parameters:\n     *    (String) jid - The full JID that is bound by the session.\n     *    (String) sid - The SID of the BOSH session.\n     *    (String) rid - The current RID of the BOSH session.  This RID\n     *      will be used by the next request.\n     *    (Function) callback The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    _attach: function (jid, sid, rid, callback, wait, hold, wind) {\n        this._conn.jid = jid;\n        this.sid = sid;\n        this.rid = rid;\n\n        this._conn.connect_callback = callback;\n\n        this._conn.domain = Strophe.getDomainFromJid(this._conn.jid);\n\n        this._conn.authenticated = true;\n        this._conn.connected = true;\n\n        this.wait = wait || this.wait;\n        this.hold = hold || this.hold;\n        this.window = wind || this.window;\n\n        this._conn._changeConnectStatus(Strophe.Status.ATTACHED, null);\n    },\n\n    /** PrivateFunction: _restore\n     *  Attempt to restore a cached BOSH session\n     *\n     *  Parameters:\n     *    (String) jid - The full JID that is bound by the session.\n     *      This parameter is optional but recommended, specifically in cases\n     *      where prebinded BOSH sessions are used where it's important to know\n     *      that the right session is being restored.\n     *    (Function) callback The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    _restore: function (jid, callback, wait, hold, wind) {\n        var session = JSON.parse(window.sessionStorage.getItem('strophe-bosh-session'));\n        if (typeof session !== \"undefined\" &&\n                   session !== null &&\n                   session.rid &&\n                   session.sid &&\n                   session.jid &&\n                   (    typeof jid === \"undefined\" ||\n                        jid === null ||\n                        Strophe.getBareJidFromJid(session.jid) === Strophe.getBareJidFromJid(jid) ||\n                        // If authcid is null, then it's an anonymous login, so\n                        // we compare only the domains:\n                        ((Strophe.getNodeFromJid(jid) === null) && (Strophe.getDomainFromJid(session.jid) === jid))\n                    )\n        ) {\n            this._conn.restored = true;\n            this._attach(session.jid, session.sid, session.rid, callback, wait, hold, wind);\n        } else {\n            throw { name: \"StropheSessionError\", message: \"_restore: no restoreable session.\" };\n        }\n    },\n\n    /** PrivateFunction: _cacheSession\n     *  _Private_ handler for the beforeunload event.\n     *\n     *  This handler is used to process the Bosh-part of the initial request.\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     */\n    _cacheSession: function () {\n        if (this._conn.authenticated) {\n            if (this._conn.jid && this.rid && this.sid) {\n                window.sessionStorage.setItem('strophe-bosh-session', JSON.stringify({\n                    'jid': this._conn.jid,\n                    'rid': this.rid,\n                    'sid': this.sid\n                }));\n            }\n        } else {\n            window.sessionStorage.removeItem('strophe-bosh-session');\n        }\n    },\n\n    /** PrivateFunction: _connect_cb\n     *  _Private_ handler for initial connection request.\n     *\n     *  This handler is used to process the Bosh-part of the initial request.\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     */\n    _connect_cb: function (bodyWrap) {\n        var typ = bodyWrap.getAttribute(\"type\");\n        var cond, conflict;\n        if (typ !== null && typ === \"terminate\") {\n            // an error occurred\n            cond = bodyWrap.getAttribute(\"condition\");\n            Strophe.error(\"BOSH-Connection failed: \" + cond);\n            conflict = bodyWrap.getElementsByTagName(\"conflict\");\n            if (cond !== null) {\n                if (cond === \"remote-stream-error\" && conflict.length > 0) {\n                    cond = \"conflict\";\n                }\n                this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, cond);\n            } else {\n                this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"unknown\");\n            }\n            this._conn._doDisconnect(cond);\n            return Strophe.Status.CONNFAIL;\n        }\n\n        // check to make sure we don't overwrite these if _connect_cb is\n        // called multiple times in the case of missing stream:features\n        if (!this.sid) {\n            this.sid = bodyWrap.getAttribute(\"sid\");\n        }\n        var wind = bodyWrap.getAttribute('requests');\n        if (wind) { this.window = parseInt(wind, 10); }\n        var hold = bodyWrap.getAttribute('hold');\n        if (hold) { this.hold = parseInt(hold, 10); }\n        var wait = bodyWrap.getAttribute('wait');\n        if (wait) { this.wait = parseInt(wait, 10); }\n        var inactivity = bodyWrap.getAttribute('inactivity');\n        if (inactivity) { this.inactivity = parseInt(inactivity, 10); }\n    },\n\n    /** PrivateFunction: _disconnect\n     *  _Private_ part of Connection.disconnect for Bosh\n     *\n     *  Parameters:\n     *    (Request) pres - This stanza will be sent before disconnecting.\n     */\n    _disconnect: function (pres) {\n        this._sendTerminate(pres);\n    },\n\n    /** PrivateFunction: _doDisconnect\n     *  _Private_ function to disconnect.\n     *\n     *  Resets the SID and RID.\n     */\n    _doDisconnect: function () {\n        this.sid = null;\n        this.rid = Math.floor(Math.random() * 4294967295);\n        if (this._conn._sessionCachingSupported()) {\n            window.sessionStorage.removeItem('strophe-bosh-session');\n        }\n\n        this._conn.nextValidRid(this.rid);\n    },\n\n    /** PrivateFunction: _emptyQueue\n     * _Private_ function to check if the Request queue is empty.\n     *\n     *  Returns:\n     *    True, if there are no Requests queued, False otherwise.\n     */\n    _emptyQueue: function () {\n        return this._requests.length === 0;\n    },\n\n    /** PrivateFunction: _callProtocolErrorHandlers\n     *  _Private_ function to call error handlers registered for HTTP errors.\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The request that is changing readyState.\n     */\n    _callProtocolErrorHandlers: function (req) {\n        var reqStatus = this._getRequestStatus(req),\n            err_callback;\n        err_callback = this._conn.protocolErrorHandlers.HTTP[reqStatus];\n        if (err_callback) {\n            err_callback.call(this, reqStatus);\n        }\n    },\n\n    /** PrivateFunction: _hitError\n     *  _Private_ function to handle the error count.\n     *\n     *  Requests are resent automatically until their error count reaches\n     *  5.  Each time an error is encountered, this function is called to\n     *  increment the count and disconnect if the count is too high.\n     *\n     *  Parameters:\n     *    (Integer) reqStatus - The request status.\n     */\n    _hitError: function (reqStatus) {\n        this.errors++;\n        Strophe.warn(\"request errored, status: \" + reqStatus +\n                     \", number of errors: \" + this.errors);\n        if (this.errors > 4) {\n            this._conn._onDisconnectTimeout();\n        }\n    },\n\n    /** PrivateFunction: _onDisconnectTimeout\n     *  _Private_ timeout handler for handling non-graceful disconnection.\n     *\n     *  Cancels all remaining Requests and clears the queue.\n     */\n    _onDisconnectTimeout: function () {\n        this._abortAllRequests();\n    },\n\n    /** PrivateFunction: _abortAllRequests\n     *  _Private_ helper function that makes sure all pending requests are aborted.\n     */\n    _abortAllRequests: function _abortAllRequests() {\n        var req;\n        while (this._requests.length > 0) {\n            req = this._requests.pop();\n            req.abort = true;\n            req.xhr.abort();\n            // jslint complains, but this is fine. setting to empty func\n            // is necessary for IE6\n            req.xhr.onreadystatechange = function () {}; // jshint ignore:line\n        }\n    },\n\n    /** PrivateFunction: _onIdle\n     *  _Private_ handler called by Strophe.Connection._onIdle\n     *\n     *  Sends all queued Requests or polls with empty Request if there are none.\n     */\n    _onIdle: function () {\n        var data = this._conn._data;\n        // if no requests are in progress, poll\n        if (this._conn.authenticated && this._requests.length === 0 &&\n            data.length === 0 && !this._conn.disconnecting) {\n            Strophe.info(\"no requests during idle cycle, sending \" +\n                         \"blank request\");\n            data.push(null);\n        }\n\n        if (this._conn.paused) {\n            return;\n        }\n\n        if (this._requests.length < 2 && data.length > 0) {\n            var body = this._buildBody();\n            for (var i = 0; i < data.length; i++) {\n                if (data[i] !== null) {\n                    if (data[i] === \"restart\") {\n                        body.attrs({\n                            to: this._conn.domain,\n                            \"xml:lang\": \"en\",\n                            \"xmpp:restart\": \"true\",\n                            \"xmlns:xmpp\": Strophe.NS.BOSH\n                        });\n                    } else {\n                        body.cnode(data[i]).up();\n                    }\n                }\n            }\n            delete this._conn._data;\n            this._conn._data = [];\n            this._requests.push(\n                new Strophe.Request(body.tree(),\n                                    this._onRequestStateChange.bind(\n                                        this, this._conn._dataRecv.bind(this._conn)),\n                                    body.tree().getAttribute(\"rid\")));\n            this._throttledRequestHandler();\n        }\n\n        if (this._requests.length > 0) {\n            var time_elapsed = this._requests[0].age();\n            if (this._requests[0].dead !== null) {\n                if (this._requests[0].timeDead() >\n                    Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait)) {\n                    this._throttledRequestHandler();\n                }\n            }\n\n            if (time_elapsed > Math.floor(Strophe.TIMEOUT * this.wait)) {\n                Strophe.warn(\"Request \" +\n                             this._requests[0].id +\n                             \" timed out, over \" + Math.floor(Strophe.TIMEOUT * this.wait) +\n                             \" seconds since last activity\");\n                this._throttledRequestHandler();\n            }\n        }\n    },\n\n    /** PrivateFunction: _getRequestStatus\n     *\n     *  Returns the HTTP status code from a Strophe.Request\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The Strophe.Request instance.\n     *    (Integer) def - The default value that should be returned if no\n     *          status value was found.\n     */\n    _getRequestStatus: function (req, def) {\n        var reqStatus;\n        if (req.xhr.readyState === 4) {\n            try {\n                reqStatus = req.xhr.status;\n            } catch (e) {\n                // ignore errors from undefined status attribute. Works\n                // around a browser bug\n                Strophe.error(\n                    \"Caught an error while retrieving a request's status, \" +\n                    \"reqStatus: \" + reqStatus);\n            }\n        }\n        if (typeof(reqStatus) === \"undefined\") {\n            reqStatus = typeof def === 'number' ? def : 0;\n        }\n        return reqStatus;\n    },\n\n    /** PrivateFunction: _onRequestStateChange\n     *  _Private_ handler for Strophe.Request state changes.\n     *\n     *  This function is called when the XMLHttpRequest readyState changes.\n     *  It contains a lot of error handling logic for the many ways that\n     *  requests can fail, and calls the request callback when requests\n     *  succeed.\n     *\n     *  Parameters:\n     *    (Function) func - The handler for the request.\n     *    (Strophe.Request) req - The request that is changing readyState.\n     */\n    _onRequestStateChange: function (func, req) {\n        Strophe.debug(\"request id \"+req.id+\".\"+req.sends+\n                      \" state changed to \"+req.xhr.readyState);\n        if (req.abort) {\n            req.abort = false;\n            return;\n        }\n        if (req.xhr.readyState !== 4) {\n            // The request is not yet complete\n            return;\n        }\n        var reqStatus = this._getRequestStatus(req);\n        this.lastResponseHeaders = req.xhr.getAllResponseHeaders();\n        if (this.disconnecting && reqStatus >= 400) {\n            this._hitError(reqStatus);\n            this._callProtocolErrorHandlers(req);\n            return;\n        }\n\n        var valid_request = reqStatus > 0 && reqStatus < 500;\n        var too_many_retries = req.sends > this._conn.maxRetries;\n        if (valid_request || too_many_retries) {\n            // remove from internal queue\n            this._removeRequest(req);\n            Strophe.debug(\"request id \"+req.id+\" should now be removed\");\n        }\n\n        if (reqStatus === 200) {\n            // request succeeded\n            var reqIs0 = (this._requests[0] === req);\n            var reqIs1 = (this._requests[1] === req);\n            // if request 1 finished, or request 0 finished and request\n            // 1 is over Strophe.SECONDARY_TIMEOUT seconds old, we need to\n            // restart the other - both will be in the first spot, as the\n            // completed request has been removed from the queue already\n            if (reqIs1 ||\n                (reqIs0 && this._requests.length > 0 &&\n                    this._requests[0].age() > Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait))) {\n                this._restartRequest(0);\n            }\n            this._conn.nextValidRid(Number(req.rid) + 1);\n            Strophe.debug(\"request id \"+req.id+\".\"+req.sends+\" got 200\");\n            func(req); // call handler\n            this.errors = 0;\n        } else if (reqStatus === 0 ||\n                   (reqStatus >= 400 && reqStatus < 600) ||\n                   reqStatus >= 12000) {\n            // request failed\n            Strophe.error(\"request id \"+req.id+\".\"+req.sends+\" error \"+reqStatus+\" happened\");\n            this._hitError(reqStatus);\n            this._callProtocolErrorHandlers(req);\n            if (reqStatus >= 400 && reqStatus < 500) {\n                this._conn._changeConnectStatus(Strophe.Status.DISCONNECTING, null);\n                this._conn._doDisconnect();\n            }\n        } else {\n            Strophe.error(\"request id \"+req.id+\".\"+req.sends+\" error \"+reqStatus+\" happened\");\n        }\n\n        if (!valid_request && !too_many_retries) {\n            this._throttledRequestHandler();\n        } else if (too_many_retries && !this._conn.connected) {\n            this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"giving-up\");\n        }\n    },\n\n    /** PrivateFunction: _processRequest\n     *  _Private_ function to process a request in the queue.\n     *\n     *  This function takes requests off the queue and sends them and\n     *  restarts dead requests.\n     *\n     *  Parameters:\n     *    (Integer) i - The index of the request in the queue.\n     */\n    _processRequest: function (i) {\n        var self = this;\n        var req = this._requests[i];\n        var reqStatus = this._getRequestStatus(req, -1);\n\n        // make sure we limit the number of retries\n        if (req.sends > this._conn.maxRetries) {\n            this._conn._onDisconnectTimeout();\n            return;\n        }\n\n        var time_elapsed = req.age();\n        var primaryTimeout = (!isNaN(time_elapsed) &&\n                              time_elapsed > Math.floor(Strophe.TIMEOUT * this.wait));\n        var secondaryTimeout = (req.dead !== null &&\n                                req.timeDead() > Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait));\n        var requestCompletedWithServerError = (req.xhr.readyState === 4 &&\n                                               (reqStatus < 1 || reqStatus >= 500));\n        if (primaryTimeout || secondaryTimeout ||\n            requestCompletedWithServerError) {\n            if (secondaryTimeout) {\n                Strophe.error(\"Request \" + this._requests[i].id +\n                              \" timed out (secondary), restarting\");\n            }\n            req.abort = true;\n            req.xhr.abort();\n            // setting to null fails on IE6, so set to empty function\n            req.xhr.onreadystatechange = function () {};\n            this._requests[i] = new Strophe.Request(req.xmlData,\n                                                    req.origFunc,\n                                                    req.rid,\n                                                    req.sends);\n            req = this._requests[i];\n        }\n\n        if (req.xhr.readyState === 0) {\n            Strophe.debug(\"request id \"+req.id+\".\"+req.sends+\" posting\");\n\n            try {\n                var contentType = this._conn.options.contentType || \"text/xml; charset=utf-8\";\n                req.xhr.open(\"POST\", this._conn.service, this._conn.options.sync ? false : true);\n                if (typeof req.xhr.setRequestHeader !== 'undefined') {\n                    // IE9 doesn't have setRequestHeader\n                    req.xhr.setRequestHeader(\"Content-Type\", contentType);\n                }\n                if (this._conn.options.withCredentials) {\n                    req.xhr.withCredentials = true;\n                }\n            } catch (e2) {\n                Strophe.error(\"XHR open failed: \" + e2.toString());\n                if (!this._conn.connected) {\n                    this._conn._changeConnectStatus(\n                            Strophe.Status.CONNFAIL, \"bad-service\");\n                }\n                this._conn.disconnect();\n                return;\n            }\n\n            // Fires the XHR request -- may be invoked immediately\n            // or on a gradually expanding retry window for reconnects\n            var sendFunc = function () {\n                req.date = new Date();\n                if (self._conn.options.customHeaders){\n                    var headers = self._conn.options.customHeaders;\n                    for (var header in headers) {\n                        if (headers.hasOwnProperty(header)) {\n                            req.xhr.setRequestHeader(header, headers[header]);\n                        }\n                    }\n                }\n                req.xhr.send(req.data);\n            };\n\n            // Implement progressive backoff for reconnects --\n            // First retry (send === 1) should also be instantaneous\n            if (req.sends > 1) {\n                // Using a cube of the retry number creates a nicely\n                // expanding retry window\n                var backoff = Math.min(Math.floor(Strophe.TIMEOUT * this.wait),\n                                       Math.pow(req.sends, 3)) * 1000;\n                setTimeout(function() {\n                    // XXX: setTimeout should be called only with function expressions (23974bc1)\n                    sendFunc();\n                }, backoff);\n            } else {\n                sendFunc();\n            }\n\n            req.sends++;\n\n            if (this._conn.xmlOutput !== Strophe.Connection.prototype.xmlOutput) {\n                if (req.xmlData.nodeName === this.strip && req.xmlData.childNodes.length) {\n                    this._conn.xmlOutput(req.xmlData.childNodes[0]);\n                } else {\n                    this._conn.xmlOutput(req.xmlData);\n                }\n            }\n            if (this._conn.rawOutput !== Strophe.Connection.prototype.rawOutput) {\n                this._conn.rawOutput(req.data);\n            }\n        } else {\n            Strophe.debug(\"_processRequest: \" +\n                          (i === 0 ? \"first\" : \"second\") +\n                          \" request has readyState of \" +\n                          req.xhr.readyState);\n        }\n    },\n\n    /** PrivateFunction: _removeRequest\n     *  _Private_ function to remove a request from the queue.\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The request to remove.\n     */\n    _removeRequest: function (req) {\n        Strophe.debug(\"removing request\");\n        var i;\n        for (i = this._requests.length - 1; i >= 0; i--) {\n            if (req === this._requests[i]) {\n                this._requests.splice(i, 1);\n            }\n        }\n        // IE6 fails on setting to null, so set to empty function\n        req.xhr.onreadystatechange = function () {};\n        this._throttledRequestHandler();\n    },\n\n    /** PrivateFunction: _restartRequest\n     *  _Private_ function to restart a request that is presumed dead.\n     *\n     *  Parameters:\n     *    (Integer) i - The index of the request in the queue.\n     */\n    _restartRequest: function (i) {\n        var req = this._requests[i];\n        if (req.dead === null) {\n            req.dead = new Date();\n        }\n\n        this._processRequest(i);\n    },\n\n    /** PrivateFunction: _reqToData\n     * _Private_ function to get a stanza out of a request.\n     *\n     * Tries to extract a stanza out of a Request Object.\n     * When this fails the current connection will be disconnected.\n     *\n     *  Parameters:\n     *    (Object) req - The Request.\n     *\n     *  Returns:\n     *    The stanza that was passed.\n     */\n    _reqToData: function (req) {\n        try {\n            return req.getResponse();\n        } catch (e) {\n            if (e !== \"parsererror\") { throw e; }\n            this._conn.disconnect(\"strophe-parsererror\");\n        }\n    },\n\n    /** PrivateFunction: _sendTerminate\n     *  _Private_ function to send initial disconnect sequence.\n     *\n     *  This is the first step in a graceful disconnect.  It sends\n     *  the BOSH server a terminate body and includes an unavailable\n     *  presence if authentication has completed.\n     */\n    _sendTerminate: function (pres) {\n        Strophe.info(\"_sendTerminate was called\");\n        var body = this._buildBody().attrs({type: \"terminate\"});\n        if (pres) {\n            body.cnode(pres.tree());\n        }\n        var req = new Strophe.Request(\n            body.tree(),\n            this._onRequestStateChange.bind(\n            this, this._conn._dataRecv.bind(this._conn)),\n            body.tree().getAttribute(\"rid\")\n        );\n        this._requests.push(req);\n        this._throttledRequestHandler();\n    },\n\n    /** PrivateFunction: _send\n     *  _Private_ part of the Connection.send function for BOSH\n     *\n     * Just triggers the RequestHandler to send the messages that are in the queue\n     */\n    _send: function () {\n        clearTimeout(this._conn._idleTimeout);\n        this._throttledRequestHandler();\n\n        // XXX: setTimeout should be called only with function expressions (23974bc1)\n        this._conn._idleTimeout = setTimeout(function() {\n            this._onIdle();\n        }.bind(this._conn), 100);\n    },\n\n    /** PrivateFunction: _sendRestart\n     *\n     *  Send an xmpp:restart stanza.\n     */\n    _sendRestart: function () {\n        this._throttledRequestHandler();\n        clearTimeout(this._conn._idleTimeout);\n    },\n\n    /** PrivateFunction: _throttledRequestHandler\n     *  _Private_ function to throttle requests to the connection window.\n     *\n     *  This function makes sure we don't send requests so fast that the\n     *  request ids overflow the connection window in the case that one\n     *  request died.\n     */\n    _throttledRequestHandler: function () {\n        if (!this._requests) {\n            Strophe.debug(\"_throttledRequestHandler called with \" +\n                          \"undefined requests\");\n        } else {\n            Strophe.debug(\"_throttledRequestHandler called with \" +\n                          this._requests.length + \" requests\");\n        }\n\n        if (!this._requests || this._requests.length === 0) {\n            return;\n        }\n\n        if (this._requests.length > 0) {\n            this._processRequest(0);\n        }\n\n        if (this._requests.length > 1 &&\n            Math.abs(this._requests[0].rid -\n                     this._requests[1].rid) < this.window) {\n            this._processRequest(1);\n        }\n    }\n};\nreturn Strophe;\n}));\n\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/* global define, window, clearTimeout, WebSocket, DOMParser, Strophe, $build */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-websocket',['strophe-core'], function (core) {\n            return factory(\n                core.Strophe,\n                core.$build\n            );\n        });\n    } else if (typeof exports === 'object') {\n        var core = require('./core');\n\n        module.exports = factory(core.Strophe, core.$build);\n    } else {\n        // Browser globals\n        return factory(Strophe, $build);\n    }\n}(this, function (Strophe, $build) {\n\n/** Class: Strophe.WebSocket\n *  _Private_ helper class that handles WebSocket Connections\n *\n *  The Strophe.WebSocket class is used internally by Strophe.Connection\n *  to encapsulate WebSocket sessions. It is not meant to be used from user's code.\n */\n\n/** File: websocket.js\n *  A JavaScript library to enable XMPP over Websocket in Strophejs.\n *\n *  This file implements XMPP over WebSockets for Strophejs.\n *  If a Connection is established with a Websocket url (ws://...)\n *  Strophe will use WebSockets.\n *  For more information on XMPP-over-WebSocket see RFC 7395:\n *  http://tools.ietf.org/html/rfc7395\n *\n *  WebSocket support implemented by Andreas Guth (andreas.guth@rwth-aachen.de)\n */\n\n/** PrivateConstructor: Strophe.Websocket\n *  Create and initialize a Strophe.WebSocket object.\n *  Currently only sets the connection Object.\n *\n *  Parameters:\n *    (Strophe.Connection) connection - The Strophe.Connection that will use WebSockets.\n *\n *  Returns:\n *    A new Strophe.WebSocket object.\n */\nStrophe.Websocket = function(connection) {\n    this._conn = connection;\n    this.strip = \"wrapper\";\n\n    var service = connection.service;\n    if (service.indexOf(\"ws:\") !== 0 && service.indexOf(\"wss:\") !== 0) {\n        // If the service is not an absolute URL, assume it is a path and put the absolute\n        // URL together from options, current URL and the path.\n        var new_service = \"\";\n\n        if (connection.options.protocol === \"ws\" && window.location.protocol !== \"https:\") {\n            new_service += \"ws\";\n        } else {\n            new_service += \"wss\";\n        }\n\n        new_service += \"://\" + window.location.host;\n\n        if (service.indexOf(\"/\") !== 0) {\n            new_service += window.location.pathname + service;\n        } else {\n            new_service += service;\n        }\n\n        connection.service = new_service;\n    }\n};\n\nStrophe.Websocket.prototype = {\n    /** PrivateFunction: _buildStream\n     *  _Private_ helper function to generate the <stream> start tag for WebSockets\n     *\n     *  Returns:\n     *    A Strophe.Builder with a <stream> element.\n     */\n    _buildStream: function () {\n        return $build(\"open\", {\n            \"xmlns\": Strophe.NS.FRAMING,\n            \"to\": this._conn.domain,\n            \"version\": '1.0'\n        });\n    },\n\n    /** PrivateFunction: _check_streamerror\n     * _Private_ checks a message for stream:error\n     *\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     *    connectstatus - The ConnectStatus that will be set on error.\n     *  Returns:\n     *     true if there was a streamerror, false otherwise.\n     */\n    _check_streamerror: function (bodyWrap, connectstatus) {\n        var errors;\n        if (bodyWrap.getElementsByTagNameNS) {\n            errors = bodyWrap.getElementsByTagNameNS(Strophe.NS.STREAM, \"error\");\n        } else {\n            errors = bodyWrap.getElementsByTagName(\"stream:error\");\n        }\n        if (errors.length === 0) {\n            return false;\n        }\n        var error = errors[0];\n\n        var condition = \"\";\n        var text = \"\";\n\n        var ns = \"urn:ietf:params:xml:ns:xmpp-streams\";\n        for (var i = 0; i < error.childNodes.length; i++) {\n            var e = error.childNodes[i];\n            if (e.getAttribute(\"xmlns\") !== ns) {\n                break;\n            } if (e.nodeName === \"text\") {\n                text = e.textContent;\n            } else {\n                condition = e.nodeName;\n            }\n        }\n\n        var errorString = \"WebSocket stream error: \";\n\n        if (condition) {\n            errorString += condition;\n        } else {\n            errorString += \"unknown\";\n        }\n\n        if (text) {\n            errorString += \" - \" + text;\n        }\n\n        Strophe.error(errorString);\n\n        // close the connection on stream_error\n        this._conn._changeConnectStatus(connectstatus, condition);\n        this._conn._doDisconnect();\n        return true;\n    },\n\n    /** PrivateFunction: _reset\n     *  Reset the connection.\n     *\n     *  This function is called by the reset function of the Strophe Connection.\n     *  Is not needed by WebSockets.\n     */\n    _reset: function () {\n        return;\n    },\n\n    /** PrivateFunction: _connect\n     *  _Private_ function called by Strophe.Connection.connect\n     *\n     *  Creates a WebSocket for a connection and assigns Callbacks to it.\n     *  Does nothing if there already is a WebSocket.\n     */\n    _connect: function () {\n        // Ensure that there is no open WebSocket from a previous Connection.\n        this._closeSocket();\n\n        // Create the new WobSocket\n        this.socket = new WebSocket(this._conn.service, \"xmpp\");\n        this.socket.onopen = this._onOpen.bind(this);\n        this.socket.onerror = this._onError.bind(this);\n        this.socket.onclose = this._onClose.bind(this);\n        this.socket.onmessage = this._connect_cb_wrapper.bind(this);\n    },\n\n    /** PrivateFunction: _connect_cb\n     *  _Private_ function called by Strophe.Connection._connect_cb\n     *\n     * checks for stream:error\n     *\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     */\n    _connect_cb: function(bodyWrap) {\n        var error = this._check_streamerror(bodyWrap, Strophe.Status.CONNFAIL);\n        if (error) {\n            return Strophe.Status.CONNFAIL;\n        }\n    },\n\n    /** PrivateFunction: _handleStreamStart\n     * _Private_ function that checks the opening <open /> tag for errors.\n     *\n     * Disconnects if there is an error and returns false, true otherwise.\n     *\n     *  Parameters:\n     *    (Node) message - Stanza containing the <open /> tag.\n     */\n    _handleStreamStart: function(message) {\n        var error = false;\n\n        // Check for errors in the <open /> tag\n        var ns = message.getAttribute(\"xmlns\");\n        if (typeof ns !== \"string\") {\n            error = \"Missing xmlns in <open />\";\n        } else if (ns !== Strophe.NS.FRAMING) {\n            error = \"Wrong xmlns in <open />: \" + ns;\n        }\n\n        var ver = message.getAttribute(\"version\");\n        if (typeof ver !== \"string\") {\n            error = \"Missing version in <open />\";\n        } else if (ver !== \"1.0\") {\n            error = \"Wrong version in <open />: \" + ver;\n        }\n\n        if (error) {\n            this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, error);\n            this._conn._doDisconnect();\n            return false;\n        }\n\n        return true;\n    },\n\n    /** PrivateFunction: _connect_cb_wrapper\n     * _Private_ function that handles the first connection messages.\n     *\n     * On receiving an opening stream tag this callback replaces itself with the real\n     * message handler. On receiving a stream error the connection is terminated.\n     */\n    _connect_cb_wrapper: function(message) {\n        if (message.data.indexOf(\"<open \") === 0 || message.data.indexOf(\"<?xml\") === 0) {\n            // Strip the XML Declaration, if there is one\n            var data = message.data.replace(/^(<\\?.*?\\?>\\s*)*/, \"\");\n            if (data === '') return;\n\n            var streamStart = new DOMParser().parseFromString(data, \"text/xml\").documentElement;\n            this._conn.xmlInput(streamStart);\n            this._conn.rawInput(message.data);\n\n            //_handleStreamSteart will check for XML errors and disconnect on error\n            if (this._handleStreamStart(streamStart)) {\n                //_connect_cb will check for stream:error and disconnect on error\n                this._connect_cb(streamStart);\n            }\n        } else if (message.data.indexOf(\"<close \") === 0) { // <close xmlns=\"urn:ietf:params:xml:ns:xmpp-framing />\n            this._conn.rawInput(message.data);\n            this._conn.xmlInput(message);\n            var see_uri = message.getAttribute(\"see-other-uri\");\n            if (see_uri) {\n                this._conn._changeConnectStatus(\n                    Strophe.Status.REDIRECT,\n                    \"Received see-other-uri, resetting connection\"\n                );\n                this._conn.reset();\n                this._conn.service = see_uri;\n                this._connect();\n            } else {\n                this._conn._changeConnectStatus(\n                    Strophe.Status.CONNFAIL,\n                    \"Received closing stream\"\n                );\n                this._conn._doDisconnect();\n            }\n        } else {\n            var string = this._streamWrap(message.data);\n            var elem = new DOMParser().parseFromString(string, \"text/xml\").documentElement;\n            this.socket.onmessage = this._onMessage.bind(this);\n            this._conn._connect_cb(elem, null, message.data);\n        }\n    },\n\n    /** PrivateFunction: _disconnect\n     *  _Private_ function called by Strophe.Connection.disconnect\n     *\n     *  Disconnects and sends a last stanza if one is given\n     *\n     *  Parameters:\n     *    (Request) pres - This stanza will be sent before disconnecting.\n     */\n    _disconnect: function (pres) {\n        if (this.socket && this.socket.readyState !== WebSocket.CLOSED) {\n            if (pres) {\n                this._conn.send(pres);\n            }\n            var close = $build(\"close\", { \"xmlns\": Strophe.NS.FRAMING });\n            this._conn.xmlOutput(close.tree());\n            var closeString = Strophe.serialize(close);\n            this._conn.rawOutput(closeString);\n            try {\n                this.socket.send(closeString);\n            } catch (e) {\n                Strophe.info(\"Couldn't send <close /> tag.\");\n            }\n        }\n        this._conn._doDisconnect();\n    },\n\n    /** PrivateFunction: _doDisconnect\n     *  _Private_ function to disconnect.\n     *\n     *  Just closes the Socket for WebSockets\n     */\n    _doDisconnect: function () {\n        Strophe.info(\"WebSockets _doDisconnect was called\");\n        this._closeSocket();\n    },\n\n    /** PrivateFunction _streamWrap\n     *  _Private_ helper function to wrap a stanza in a <stream> tag.\n     *  This is used so Strophe can process stanzas from WebSockets like BOSH\n     */\n    _streamWrap: function (stanza) {\n        return \"<wrapper>\" + stanza + '</wrapper>';\n    },\n\n\n    /** PrivateFunction: _closeSocket\n     *  _Private_ function to close the WebSocket.\n     *\n     *  Closes the socket if it is still open and deletes it\n     */\n    _closeSocket: function () {\n        if (this.socket) { try {\n            this.socket.onerror = null;\n            this.socket.close();\n        } catch (e) {} }\n        this.socket = null;\n    },\n\n    /** PrivateFunction: _emptyQueue\n     * _Private_ function to check if the message queue is empty.\n     *\n     *  Returns:\n     *    True, because WebSocket messages are send immediately after queueing.\n     */\n    _emptyQueue: function () {\n        return true;\n    },\n\n    /** PrivateFunction: _onClose\n     * _Private_ function to handle websockets closing.\n     *\n     * Nothing to do here for WebSockets\n     */\n    _onClose: function(e) {\n        if(this._conn.connected && !this._conn.disconnecting) {\n            Strophe.error(\"Websocket closed unexpectedly\");\n            this._conn._doDisconnect();\n        } else if (e && e.code === 1006 && !this._conn.connected && this.socket) {\n            // in case the onError callback was not called (Safari 10 does not\n            // call onerror when the initial connection fails) we need to\n            // dispatch a CONNFAIL status update to be consistent with the\n            // behavior on other browsers.\n            Strophe.error(\"Websocket closed unexcectedly\");\n            this._conn._changeConnectStatus(\n                Strophe.Status.CONNFAIL,\n                \"The WebSocket connection could not be established or was disconnected.\"\n            );\n            this._conn._doDisconnect();\n        } else {\n            Strophe.info(\"Websocket closed\");\n        }\n    },\n\n    /** PrivateFunction: _onDisconnectTimeout\n     *  _Private_ timeout handler for handling non-graceful disconnection.\n     *\n     *  This does nothing for WebSockets\n     */\n    _onDisconnectTimeout: function () {},\n\n    /** PrivateFunction: _abortAllRequests\n     *  _Private_ helper function that makes sure all pending requests are aborted.\n     */\n    _abortAllRequests: function () {},\n\n    /** PrivateFunction: _onError\n     * _Private_ function to handle websockets errors.\n     *\n     * Parameters:\n     * (Object) error - The websocket error.\n     */\n    _onError: function(error) {\n        Strophe.error(\"Websocket error \" + error);\n        this._conn._changeConnectStatus(\n            Strophe.Status.CONNFAIL,\n            \"The WebSocket connection could not be established or was disconnected.\"\n        );\n        this._disconnect();\n    },\n\n    /** PrivateFunction: _onIdle\n     *  _Private_ function called by Strophe.Connection._onIdle\n     *\n     *  sends all queued stanzas\n     */\n    _onIdle: function () {\n        var data = this._conn._data;\n        if (data.length > 0 && !this._conn.paused) {\n            for (var i = 0; i < data.length; i++) {\n                if (data[i] !== null) {\n                    var stanza, rawStanza;\n                    if (data[i] === \"restart\") {\n                        stanza = this._buildStream().tree();\n                    } else {\n                        stanza = data[i];\n                    }\n                    rawStanza = Strophe.serialize(stanza);\n                    this._conn.xmlOutput(stanza);\n                    this._conn.rawOutput(rawStanza);\n                    this.socket.send(rawStanza);\n                }\n            }\n            this._conn._data = [];\n        }\n    },\n\n    /** PrivateFunction: _onMessage\n     * _Private_ function to handle websockets messages.\n     *\n     * This function parses each of the messages as if they are full documents.\n     * [TODO : We may actually want to use a SAX Push parser].\n     *\n     * Since all XMPP traffic starts with\n     *  <stream:stream version='1.0'\n     *                 xml:lang='en'\n     *                 xmlns='jabber:client'\n     *                 xmlns:stream='http://etherx.jabber.org/streams'\n     *                 id='3697395463'\n     *                 from='SERVER'>\n     *\n     * The first stanza will always fail to be parsed.\n     *\n     * Additionally, the seconds stanza will always be <stream:features> with\n     * the stream NS defined in the previous stanza, so we need to 'force'\n     * the inclusion of the NS in this stanza.\n     *\n     * Parameters:\n     * (string) message - The websocket message.\n     */\n    _onMessage: function(message) {\n        var elem, data;\n        // check for closing stream\n        var close = '<close xmlns=\"urn:ietf:params:xml:ns:xmpp-framing\" />';\n        if (message.data === close) {\n            this._conn.rawInput(close);\n            this._conn.xmlInput(message);\n            if (!this._conn.disconnecting) {\n                this._conn._doDisconnect();\n            }\n            return;\n        } else if (message.data.search(\"<open \") === 0) {\n            // This handles stream restarts\n            elem = new DOMParser().parseFromString(message.data, \"text/xml\").documentElement;\n            if (!this._handleStreamStart(elem)) {\n                return;\n            }\n        } else {\n            data = this._streamWrap(message.data);\n            elem = new DOMParser().parseFromString(data, \"text/xml\").documentElement;\n        }\n\n        if (this._check_streamerror(elem, Strophe.Status.ERROR)) {\n            return;\n        }\n\n        //handle unavailable presence stanza before disconnecting\n        if (this._conn.disconnecting &&\n                elem.firstChild.nodeName === \"presence\" &&\n                elem.firstChild.getAttribute(\"type\") === \"unavailable\") {\n            this._conn.xmlInput(elem);\n            this._conn.rawInput(Strophe.serialize(elem));\n            // if we are already disconnecting we will ignore the unavailable stanza and\n            // wait for the </stream:stream> tag before we close the connection\n            return;\n        }\n        this._conn._dataRecv(elem, message.data);\n    },\n\n    /** PrivateFunction: _onOpen\n     * _Private_ function to handle websockets connection setup.\n     *\n     * The opening stream tag is sent here.\n     */\n    _onOpen: function() {\n        Strophe.info(\"Websocket open\");\n        var start = this._buildStream();\n        this._conn.xmlOutput(start.tree());\n\n        var startString = Strophe.serialize(start);\n        this._conn.rawOutput(startString);\n        this.socket.send(startString);\n    },\n\n    /** PrivateFunction: _reqToData\n     * _Private_ function to get a stanza out of a request.\n     *\n     * WebSockets don't use requests, so the passed argument is just returned.\n     *\n     *  Parameters:\n     *    (Object) stanza - The stanza.\n     *\n     *  Returns:\n     *    The stanza that was passed.\n     */\n    _reqToData: function (stanza) {\n        return stanza;\n    },\n\n    /** PrivateFunction: _send\n     *  _Private_ part of the Connection.send function for WebSocket\n     *\n     * Just flushes the messages that are in the queue\n     */\n    _send: function () {\n        this._conn.flush();\n    },\n\n    /** PrivateFunction: _sendRestart\n     *\n     *  Send an xmpp:restart stanza.\n     */\n    _sendRestart: function () {\n        clearTimeout(this._conn._idleTimeout);\n        this._conn._onIdle.bind(this._conn)();\n    }\n};\nreturn Strophe;\n}));\n\n(function(root){\n    if(typeof define === 'function' && define.amd){\n        define('strophe',[\n            \"strophe-core\",\n            \"strophe-bosh\",\n            \"strophe-websocket\"\n        ], function (wrapper) {\n            return wrapper;\n        });\n    } else if (typeof exports === 'object') {\n        var core = require('./core');\n        require('./bosh');\n        require('./websocket');\n        module.exports = core;\n    }\n})(this);\n\n\nrequire([\"strophe-polyfill\"]);\n/* jshint ignore:start */\n    //The modules for your project will be inlined above\n    //this snippet. Ask almond to synchronously require the\n    //module value for 'main' here and return it as the\n    //value to use for the public API for the built file.\n    return require('strophe');\n}));\n/* jshint ignore:end */\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/strophe.js/strophe.js\n// module id = 2\n// module chunks = 0","import EventEmitter from 'events';\n\nimport { FEEDBACK } from '../../service/statistics/AnalyticsEvents';\nimport analytics from './AnalyticsAdapter';\nimport CallStats from './CallStats';\nimport LocalStats from './LocalStatsCollector';\nimport RTPStats from './RTPStatsCollector';\n\nimport browser from '../browser';\nimport Settings from '../settings/Settings';\nimport ScriptUtil from '../util/ScriptUtil';\nimport JitsiTrackError from '../../JitsiTrackError';\nimport * as StatisticsEvents from '../../service/statistics/Events';\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\n\n/**\n * Stores all active {@link Statistics} instances.\n * @type {Set<Statistics>}\n */\nlet _instances;\n\n/**\n * True if callstats API is loaded\n */\nlet isCallstatsLoaded = false;\n\n/**\n * Since callstats.io is a third party, we cannot guarantee the quality of their\n * service. More specifically, their server may take noticeably long time to\n * respond. Consequently, it is in our best interest (in the sense that the\n * intergration of callstats.io is pretty important to us but not enough to\n * allow it to prevent people from joining a conference) to (1) start\n * downloading their API as soon as possible and (2) do the downloading\n * asynchronously.\n *\n * @param {StatisticsOptions} options - Options to use for downloading and\n * initializing callstats backend.\n */\nfunction loadCallStatsAPI(options) {\n    if (!isCallstatsLoaded) {\n        ScriptUtil.loadScript(\n            options.customScriptUrl\n                || 'https://api.callstats.io/static/callstats-ws.min.js',\n            /* async */ true,\n            /* prepend */ true,\n            /* relativeURL */ undefined,\n            /* loadCallback */ () => _initCallStatsBackend(options)\n        );\n        isCallstatsLoaded = true;\n    }\n}\n\n/**\n * Initializes Callstats backend.\n *\n * @param {StatisticsOptions} options - The options to use for initializing\n * callstats backend.\n * @private\n */\nfunction _initCallStatsBackend(options) {\n    if (CallStats.isBackendInitialized()) {\n        return;\n    }\n\n    const userName = Settings.callStatsUserName;\n\n    if (!CallStats.initBackend({\n        callStatsID: options.callStatsID,\n        callStatsSecret: options.callStatsSecret,\n        userName: options.swapUserNameAndAlias\n            ? options.callStatsAliasName : userName,\n        aliasName: options.swapUserNameAndAlias\n            ? userName : options.callStatsAliasName,\n        applicationName: options.applicationName,\n        getWiFiStatsMethod: options.getWiFiStatsMethod\n    })) {\n        logger.error('CallStats Backend initialization failed bad');\n    }\n}\n\n/**\n * callstats strips any additional fields from Error except for \"name\", \"stack\",\n * \"message\" and \"constraintName\". So we need to bundle additional information\n * from JitsiTrackError into error passed to callstats to preserve valuable\n * information about error.\n * @param {JitsiTrackError} error\n */\nfunction formatJitsiTrackErrorForCallStats(error) {\n    const err = new Error();\n\n    // Just copy original stack from error\n    err.stack = error.stack;\n\n    // Combine name from error's name plus (possibly) name of original GUM error\n    err.name = (error.name || 'Unknown error') + (error.gum && error.gum.error\n        && error.gum.error.name ? ` - ${error.gum.error.name}` : '');\n\n    // Put all constraints into this field. For constraint failed errors we will\n    // still know which exactly constraint failed as it will be a part of\n    // message.\n    err.constraintName = error.gum && error.gum.constraints\n        ? JSON.stringify(error.gum.constraints) : '';\n\n    // Just copy error's message.\n    err.message = error.message;\n\n    return err;\n}\n\n/**\n * Init statistic options\n * @param options\n */\nStatistics.init = function(options) {\n    Statistics.audioLevelsEnabled = !options.disableAudioLevels;\n\n    if (typeof options.audioLevelsInterval === 'number') {\n        Statistics.audioLevelsInterval = options.audioLevelsInterval;\n    }\n\n    Statistics.disableThirdPartyRequests = options.disableThirdPartyRequests;\n};\n\n/**\n * The options to configure Statistics.\n * @typedef {Object} StatisticsOptions\n * @property {string} applicationName - The application name to pass to\n * callstats.\n * @property {string} callStatsAliasName - The alias name to use when\n * initializing callstats.\n * @property {string} callStatsConfIDNamespace - A namespace to prepend the\n * callstats conference ID with.\n * @property {string} callStatsID - Callstats credentials - the id.\n * @property {string} callStatsSecret - Callstats credentials - the secret.\n * @property {string} customScriptUrl - A custom lib url to use when downloading\n * callstats library.\n * @property {string} roomName - The room name we are currently in.\n * @property {boolean} swapUserNameAndAlias - Whether to swap the places of\n * username and alias when initiating callstats.\n */\n/**\n *\n * @param xmpp\n * @param {StatisticsOptions} options - The options to use creating the\n * Statistics.\n */\nexport default function Statistics(xmpp, options) {\n    /**\n     * {@link RTPStats} mapped by {@link TraceablePeerConnection.id} which\n     * collect RTP statistics for each peerconnection.\n     * @type {Map<string, RTPStats}\n     */\n    this.rtpStatsMap = new Map();\n    this.eventEmitter = new EventEmitter();\n    this.xmpp = xmpp;\n    this.options = options || {};\n\n    this.callStatsIntegrationEnabled\n        = this.options.callStatsID && this.options.callStatsSecret\n\n            // Even though AppID and AppSecret may be specified, the integration\n            // of callstats.io may be disabled because of globally-disallowed\n            // requests to any third parties.\n            && (Statistics.disableThirdPartyRequests !== true);\n    if (this.callStatsIntegrationEnabled) {\n        if (browser.isReactNative()) {\n            _initCallStatsBackend(this.options);\n        } else {\n            loadCallStatsAPI(this.options);\n        }\n\n        if (!this.options.callStatsConfIDNamespace) {\n            logger.warn('\"callStatsConfIDNamespace\" is not defined');\n        }\n    }\n\n    /**\n     * Stores {@link CallStats} instances for each\n     * {@link TraceablePeerConnection} (one {@link CallStats} instance serves\n     * one TPC). The instances are mapped by {@link TraceablePeerConnection.id}.\n     * @type {Map<number, CallStats>}\n     */\n    this.callsStatsInstances = new Map();\n\n    Statistics.instances.add(this);\n}\nStatistics.audioLevelsEnabled = false;\nStatistics.audioLevelsInterval = 200;\nStatistics.disableThirdPartyRequests = false;\nStatistics.analytics = analytics;\n\nObject.defineProperty(Statistics, 'instances', {\n    /**\n     * Returns the Set holding all active {@link Statistics} instances. Lazily\n     * initializes the Set to allow any Set polyfills to be applied.\n     * @type {Set<Statistics>}\n     */\n    get() {\n        if (!_instances) {\n            _instances = new Set();\n        }\n\n        return _instances;\n    }\n});\n\n/**\n * Starts collecting RTP stats for given peerconnection.\n * @param {TraceablePeerConnection} peerconnection\n */\nStatistics.prototype.startRemoteStats = function(peerconnection) {\n    this.stopRemoteStats(peerconnection);\n\n    try {\n        const rtpStats\n            = new RTPStats(\n                peerconnection,\n                Statistics.audioLevelsInterval,\n                2000,\n                this.eventEmitter);\n\n        rtpStats.start(Statistics.audioLevelsEnabled);\n        this.rtpStatsMap.set(peerconnection.id, rtpStats);\n    } catch (e) {\n        logger.error(`Failed to start collecting remote statistics: ${e}`);\n    }\n};\n\nStatistics.localStats = [];\n\nStatistics.startLocalStats = function(stream, callback) {\n    if (!Statistics.audioLevelsEnabled) {\n        return;\n    }\n    const localStats = new LocalStats(stream, Statistics.audioLevelsInterval,\n        callback);\n\n    this.localStats.push(localStats);\n    localStats.start();\n};\n\nStatistics.prototype.addAudioLevelListener = function(listener) {\n    if (!Statistics.audioLevelsEnabled) {\n        return;\n    }\n    this.eventEmitter.on(StatisticsEvents.AUDIO_LEVEL, listener);\n};\n\nStatistics.prototype.removeAudioLevelListener = function(listener) {\n    if (!Statistics.audioLevelsEnabled) {\n        return;\n    }\n    this.eventEmitter.removeListener(StatisticsEvents.AUDIO_LEVEL, listener);\n};\n\nStatistics.prototype.addBeforeDisposedListener = function(listener) {\n    this.eventEmitter.on(StatisticsEvents.BEFORE_DISPOSED, listener);\n};\n\nStatistics.prototype.removeBeforeDisposedListener = function(listener) {\n    this.eventEmitter.removeListener(\n        StatisticsEvents.BEFORE_DISPOSED, listener);\n};\n\nStatistics.prototype.addConnectionStatsListener = function(listener) {\n    this.eventEmitter.on(StatisticsEvents.CONNECTION_STATS, listener);\n};\n\nStatistics.prototype.removeConnectionStatsListener = function(listener) {\n    this.eventEmitter.removeListener(\n        StatisticsEvents.CONNECTION_STATS,\n        listener);\n};\n\nStatistics.prototype.addByteSentStatsListener = function(listener) {\n    this.eventEmitter.on(StatisticsEvents.BYTE_SENT_STATS, listener);\n};\n\nStatistics.prototype.removeByteSentStatsListener = function(listener) {\n    this.eventEmitter.removeListener(StatisticsEvents.BYTE_SENT_STATS,\n        listener);\n};\n\nStatistics.prototype.dispose = function() {\n    try {\n        // NOTE Before reading this please see the comment in stopCallStats...\n        //\n        // Here we prevent from emitting the event twice in case it will be\n        // triggered from stopCallStats.\n        // If the event is triggered from here it means that the logs will not\n        // be submitted anyway (because there is no CallStats instance), but\n        // we're doing that for the sake of some kind of consistency.\n        if (!this.callsStatsInstances.size) {\n            this.eventEmitter.emit(StatisticsEvents.BEFORE_DISPOSED);\n        }\n        for (const callStats of this.callsStatsInstances.values()) {\n            this.stopCallStats(callStats.tpc);\n        }\n        for (const tpcId of this.rtpStatsMap.keys()) {\n            this._stopRemoteStats(tpcId);\n        }\n        if (this.eventEmitter) {\n            this.eventEmitter.removeAllListeners();\n        }\n    } finally {\n        Statistics.instances.delete(this);\n    }\n};\n\nStatistics.stopLocalStats = function(stream) {\n    if (!Statistics.audioLevelsEnabled) {\n        return;\n    }\n\n    for (let i = 0; i < Statistics.localStats.length; i++) {\n        if (Statistics.localStats[i].stream === stream) {\n            const localStats = Statistics.localStats.splice(i, 1);\n\n            localStats[0].stop();\n            break;\n        }\n    }\n};\n\n/**\n * Stops remote RTP stats for given peerconnection ID.\n * @param {string} tpcId {@link TraceablePeerConnection.id}\n * @private\n */\nStatistics.prototype._stopRemoteStats = function(tpcId) {\n    const rtpStats = this.rtpStatsMap.get(tpcId);\n\n    if (rtpStats) {\n        rtpStats.stop();\n        this.rtpStatsMap.delete(tpcId);\n    }\n};\n\n/**\n * Stops collecting RTP stats for given peerconnection\n * @param {TraceablePeerConnection} tpc\n */\nStatistics.prototype.stopRemoteStats = function(tpc) {\n    this._stopRemoteStats(tpc.id);\n};\n\n// CALSTATS METHODS\n\n/**\n * Initializes the callstats.io API.\n * @param {TraceablePeerConnection} tpc the {@link TraceablePeerConnection}\n * instance for which CalStats will be started.\n * @param {string} remoteUserID\n */\nStatistics.prototype.startCallStats = function(tpc, remoteUserID) {\n    if (!this.callStatsIntegrationEnabled) {\n        return;\n    } else if (this.callsStatsInstances.has(tpc.id)) {\n        logger.error('CallStats instance for ${tpc} exists already');\n\n        return;\n    }\n\n    logger.info(`Starting CallStats for ${tpc}...`);\n\n    const newInstance\n        = new CallStats(\n            tpc,\n            {\n                confID: this._getCallStatsConfID(),\n                remoteUserID\n            });\n\n    this.callsStatsInstances.set(tpc.id, newInstance);\n};\n\n/**\n * Obtains the list of *all* {@link CallStats} instances collected from every\n * valid {@link Statistics} instance.\n * @return {Set<CallStats>}\n * @private\n */\nStatistics._getAllCallStatsInstances = function() {\n    const csInstances = new Set();\n\n    for (const statistics of Statistics.instances) {\n        for (const cs of statistics.callsStatsInstances.values()) {\n            csInstances.add(cs);\n        }\n    }\n\n    return csInstances;\n};\n\n/**\n * Constructs the CallStats conference ID based on the options currently\n * configured in this instance.\n * @return {string}\n * @private\n */\nStatistics.prototype._getCallStatsConfID = function() {\n    // The conference ID is case sensitive!!!\n    return this.options.callStatsConfIDNamespace\n        ? `${this.options.callStatsConfIDNamespace}/${this.options.roomName}`\n        : this.options.roomName;\n};\n\n/**\n * Removes the callstats.io instances.\n */\nStatistics.prototype.stopCallStats = function(tpc) {\n    const callStatsInstance = this.callsStatsInstances.get(tpc.id);\n\n    if (callStatsInstance) {\n        // FIXME the original purpose of adding BEFORE_DISPOSED event was to be\n        // able to submit the last log batch from jitsi-meet to CallStats. After\n        // recent changes we dispose the CallStats earlier\n        // (before Statistics.dispose), so we need to emit this event here to\n        // give this last chance for final log batch submission.\n        //\n        // Eventually there should be a separate module called \"log storage\"\n        // which should emit proper events when it's underlying\n        // CallStats instance is going away.\n        if (this.callsStatsInstances.size === 1) {\n            this.eventEmitter.emit(StatisticsEvents.BEFORE_DISPOSED);\n        }\n        this.callsStatsInstances.delete(tpc.id);\n\n        // The fabric needs to be terminated when being stopped\n        callStatsInstance.sendTerminateEvent();\n    }\n};\n\n/**\n * Returns true if the callstats integration is enabled, otherwise returns\n * false.\n *\n * @returns true if the callstats integration is enabled, otherwise returns\n * false.\n */\nStatistics.prototype.isCallstatsEnabled = function() {\n    return this.callStatsIntegrationEnabled;\n};\n\n/**\n * Logs either resume or hold event for the given peer connection.\n * @param {TraceablePeerConnection} tpc the connection for which event will be\n * reported\n * @param {boolean} isResume true for resume or false for hold\n */\nStatistics.prototype.sendConnectionResumeOrHoldEvent = function(tpc, isResume) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendResumeOrHoldEvent(isResume);\n    }\n};\n\n/**\n * Notifies CallStats and analytics (if present) for ice connection failed\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n */\nStatistics.prototype.sendIceConnectionFailedEvent = function(tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendIceConnectionFailedEvent();\n    }\n};\n\n/**\n * Notifies CallStats for mute events\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n * @param {boolean} muted true for muted and false for not muted\n * @param {String} type \"audio\"/\"video\"\n */\nStatistics.prototype.sendMuteEvent = function(tpc, muted, type) {\n    const instance = tpc && this.callsStatsInstances.get(tpc.id);\n\n    CallStats.sendMuteEvent(muted, type, instance);\n};\n\n/**\n * Notifies CallStats for screen sharing events\n * @param start {boolean} true for starting screen sharing and\n * false for not stopping\n * @param {string|null} ssrc - optional ssrc value, used only when\n * starting screen sharing.\n */\nStatistics.prototype.sendScreenSharingEvent\n    = function(start, ssrc) {\n        for (const cs of this.callsStatsInstances.values()) {\n            cs.sendScreenSharingEvent(start, ssrc);\n        }\n    };\n\n/**\n * Notifies the statistics module that we are now the dominant speaker of the\n * conference.\n */\nStatistics.prototype.sendDominantSpeakerEvent = function() {\n    for (const cs of this.callsStatsInstances.values()) {\n        cs.sendDominantSpeakerEvent();\n    }\n};\n\n/**\n * Notifies about active device.\n * @param {{deviceList: {String:String}}} devicesData - list of devices with\n *      their data\n */\nStatistics.sendActiveDeviceListEvent = function(devicesData) {\n    const globalSet = Statistics._getAllCallStatsInstances();\n\n    if (globalSet.size) {\n        for (const cs of globalSet) {\n            CallStats.sendActiveDeviceListEvent(devicesData, cs);\n        }\n    } else {\n        CallStats.sendActiveDeviceListEvent(devicesData, null);\n    }\n};\n\n/* eslint-disable max-params */\n\n/**\n * Lets the underlying statistics module know where is given SSRC rendered by\n * providing renderer tag ID.\n * @param {TraceablePeerConnection} tpc the connection to which the stream\n * belongs to\n * @param {number} ssrc the SSRC of the stream\n * @param {boolean} isLocal\n * @param {string} userId\n * @param {string} usageLabel  meaningful usage label of this stream like\n *        'microphone', 'camera' or 'screen'.\n * @param {string} containerId the id of media 'audio' or 'video' tag which\n *        renders the stream.\n */\nStatistics.prototype.associateStreamWithVideoTag = function(\n        tpc,\n        ssrc,\n        isLocal,\n        userId,\n        usageLabel,\n        containerId) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.associateStreamWithVideoTag(\n            ssrc,\n            isLocal,\n            userId,\n            usageLabel,\n            containerId);\n    }\n};\n\n/* eslint-enable max-params */\n\n/**\n * Notifies CallStats that getUserMedia failed.\n *\n * @param {Error} e error to send\n */\nStatistics.sendGetUserMediaFailed = function(e) {\n    const error\n        = e instanceof JitsiTrackError\n            ? formatJitsiTrackErrorForCallStats(e) : e;\n    const globalSet = Statistics._getAllCallStatsInstances();\n\n    if (globalSet.size) {\n        for (const cs of globalSet) {\n            CallStats.sendGetUserMediaFailed(error, cs);\n        }\n    } else {\n        CallStats.sendGetUserMediaFailed(error, null);\n    }\n};\n\n/**\n * Notifies CallStats that peer connection failed to create offer.\n *\n * @param {Error} e error to send\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n */\nStatistics.prototype.sendCreateOfferFailed = function(e, tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendCreateOfferFailed(e);\n    }\n};\n\n/**\n * Notifies CallStats that peer connection failed to create answer.\n *\n * @param {Error} e error to send\n * @param {TraceablePeerConnection} tpc connection on which failure occured.\n */\nStatistics.prototype.sendCreateAnswerFailed = function(e, tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendCreateAnswerFailed(e);\n    }\n};\n\n/**\n * Notifies CallStats that peer connection failed to set local description.\n *\n * @param {Error} e error to send\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n */\nStatistics.prototype.sendSetLocalDescFailed = function(e, tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendSetLocalDescFailed(e);\n    }\n};\n\n/**\n * Notifies CallStats that peer connection failed to set remote description.\n *\n * @param {Error} e error to send\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n */\nStatistics.prototype.sendSetRemoteDescFailed = function(e, tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendSetRemoteDescFailed(e);\n    }\n};\n\n/**\n * Notifies CallStats that peer connection failed to add ICE candidate.\n *\n * @param {Error} e error to send\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n */\nStatistics.prototype.sendAddIceCandidateFailed = function(e, tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendAddIceCandidateFailed(e);\n    }\n};\n\n/**\n * Adds to CallStats an application log.\n *\n * @param {String} m a log message to send or an {Error} object to be reported\n */\nStatistics.sendLog = function(m) {\n    const globalSubSet = new Set();\n\n    // FIXME we don't want to duplicate logs over P2P instance, but\n    // here we should go over instances and call this method for each\n    // unique conference ID rather than selecting the first one.\n    // We don't have such use case though, so leaving as is for now.\n    for (const stats of Statistics.instances) {\n        if (stats.callsStatsInstances.size) {\n            globalSubSet.add(stats.callsStatsInstances.values().next().value);\n        }\n    }\n\n    if (globalSubSet.size) {\n        for (const csPerStats of globalSubSet) {\n            CallStats.sendApplicationLog(m, csPerStats);\n        }\n    } else {\n        CallStats.sendApplicationLog(m, null);\n    }\n};\n\n/**\n * Sends the given feedback through CallStats.\n *\n * @param overall an integer between 1 and 5 indicating the user's rating.\n * @param comment the comment from the user.\n */\nStatistics.prototype.sendFeedback = function(overall, comment) {\n    CallStats.sendFeedback(this._getCallStatsConfID(), overall, comment);\n    Statistics.analytics.sendEvent(\n        FEEDBACK,\n        {\n            rating: overall,\n            comment\n        });\n};\n\nStatistics.LOCAL_JID = require('../../service/statistics/constants').LOCAL_JID;\n\n/**\n * Reports global error to CallStats.\n *\n * @param {Error} error\n */\nStatistics.reportGlobalError = function(error) {\n    if (error instanceof JitsiTrackError && error.gum) {\n        Statistics.sendGetUserMediaFailed(error);\n    } else {\n        Statistics.sendLog(error);\n    }\n};\n\n/**\n * Sends event to analytics and logs a message to the logger/console. Console\n * messages might also be logged to callstats automatically.\n *\n * @param {string | Object} event the event name, or an object which\n * represents the entire event.\n * @param {Object} properties properties to attach to the event (if an event\n * name as opposed to an event object is provided).\n */\nStatistics.sendAnalyticsAndLog = function(event, properties = {}) {\n    if (!event) {\n        logger.warn('No event or event name given.');\n\n        return;\n    }\n\n    let eventToLog;\n\n    // Also support an API with a single object as an event.\n    if (typeof event === 'object') {\n        eventToLog = event;\n    } else {\n        eventToLog = {\n            name: event,\n            properties\n        };\n    }\n\n    logger.log(JSON.stringify(eventToLog));\n\n    // We do this last, because it may modify the object which is passed.\n    this.analytics.sendEvent(event, properties);\n};\n\n/**\n * Sends event to analytics.\n *\n * @param {string | Object} eventName the event name, or an object which\n * represents the entire event.\n * @param {Object} properties properties to attach to the event\n */\nStatistics.sendAnalytics = function(eventName, properties = {}) {\n    this.analytics.sendEvent(eventName, properties);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/statistics.js","/**\n * The audio type.\n */\nexport const AUDIO = 'audio';\n\n/**\n * The video type.\n */\nexport const VIDEO = 'video';\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/MediaType.js","/**\n * This utility class defines custom onerror and onunhandledrejection functions.\n * The custom error handlers respect the previously-defined error handlers.\n * GlobalOnErrorHandler class provides utilities to add many custom error\n * handlers and to execute the error handlers directly.\n */\n\n\n/**\n * List with global error handlers that will be executed.\n */\nconst handlers = [];\n\n// If an old handler exists, also fire its events.\nconst oldOnErrorHandler = window.onerror;\n\n/**\n * Custom error handler that calls the old global error handler and executes\n * all handlers that were previously added.\n */\nfunction JitsiGlobalErrorHandler(...args) {\n    handlers.forEach(handler => handler(...args));\n    oldOnErrorHandler && oldOnErrorHandler(...args);\n}\n\n// If an old handler exists, also fire its events.\nconst oldOnUnhandledRejection = window.onunhandledrejection;\n\n/**\n * Custom handler that calls the old global handler and executes all handlers\n * that were previously added. This handler handles rejected Promises.\n */\nfunction JitsiGlobalUnhandledRejection(event) {\n    handlers.forEach(handler => handler(null, null, null, null, event.reason));\n    oldOnUnhandledRejection && oldOnUnhandledRejection(event);\n}\n\n// Setting the custom error handlers.\nwindow.onerror = JitsiGlobalErrorHandler;\nwindow.onunhandledrejection = JitsiGlobalUnhandledRejection;\n\nconst GlobalOnErrorHandler = {\n    /**\n     * Adds new error handlers.\n     * @param handler the new handler.\n     */\n    addHandler(handler) {\n        handlers.push(handler);\n    },\n\n    /**\n     * Calls the global error handler if there is one.\n     * @param error the error to pass to the error handler\n     */\n    callErrorHandler(error) {\n        const errHandler = window.onerror;\n\n        if (!errHandler) {\n            return;\n        }\n        errHandler(null, null, null, null, error);\n    },\n\n    /**\n     * Calls the global rejection handler if there is one.\n     * @param error the error to pass to the rejection handler.\n     */\n    callUnhandledRejectionHandler(error) {\n        const errHandler = window.onunhandledrejection;\n\n        if (!errHandler) {\n            return;\n        }\n        errHandler(error);\n    }\n};\n\n\nmodule.exports = GlobalOnErrorHandler;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/GlobalOnErrorHandler.js","/**\n * This class exports constants and factory methods related to the analytics\n * API provided by AnalyticsAdapter. In order for entries in a database to be\n * somewhat easily traceable back to the code which produced them, events sent\n * through analytics should be defined here.\n *\n * Since the AnalyticsAdapter API can be used in different ways, for some events\n * it is more convenient to just define the event name as a constant. For other\n * events a factory function is easier.\n *\n * A general approach for adding a new event:\n * 1. Determine the event type: track, UI, page, or operational. If in doubt use\n * operational.\n * 2. Determine whether the event is related to other existing events, and\n * which fields are desired to be set: name, action, actionSubject, source.\n * 3. If the name is sufficient (the other fields are not important), use a\n * constant. Otherwise use a factory function.\n *\n * Note that the AnalyticsAdapter uses the events passed to its functions for\n * its own purposes, and might modify them. Because of this, factory functions\n * should create new objects.\n *\n */\n\n/**\n * The constant which identifies an event of type \"operational\".\n * @type {string}\n */\nexport const TYPE_OPERATIONAL = 'operational';\n\n/**\n * The constant which identifies an event of type \"page\".\n * @type {string}\n */\nexport const TYPE_PAGE = 'page';\n\n/**\n * The constant which identifies an event of type \"track\".\n * @type {string}\n */\nexport const TYPE_TRACK = 'track';\n\n/**\n * The constant which identifies an event of type \"ui\".\n * @type {string}\n */\nexport const TYPE_UI = 'ui';\n\n/**\n * The \"action\" value for Jingle events which indicates that the Jingle session\n * was restarted (TODO: verify/fix the documentation)\n * @type {string}\n */\nexport const ACTION_JINGLE_RESTART = 'restart';\n\n/**\n * The \"action\" value for Jingle events which indicates that a session-accept\n * timed out (TODO: verify/fix the documentation)\n * @type {string}\n */\nexport const ACTION_JINGLE_SA_TIMEOUT = 'session-accept.timeout';\n\n/**\n * The \"action\" value for Jingle events which indicates that a session-initiate\n * was received.\n * @type {string}\n */\nexport const ACTION_JINGLE_SI_RECEIVED = 'session-initiate.received';\n\n/**\n * The \"action\" value for Jingle events which indicates that a session-initiate\n * not arrived within a timeout (the value is specified in\n * the {@link JingleSessionPC}.\n * @type {string}\n */\nexport const ACTION_JINGLE_SI_TIMEOUT = 'session-initiate.timeout';\n\n/**\n * A constant for the \"terminate\" action for Jingle events. TODO: verify/fix\n * the documentation)\n * @type {string}\n */\nexport const ACTION_JINGLE_TERMINATE = 'terminate';\n\n/**\n * The \"action\" value for Jingle events which indicates that a transport-replace\n * was received.\n * @type {string}\n */\nexport const ACTION_JINGLE_TR_RECEIVED\n    = 'transport-replace.received';\n\n/**\n * The \"action\" value for Jingle events which indicates that a transport-replace\n * succeeded (TODO: verify/fix the documentation)\n * @type {string}\n */\nexport const ACTION_JINGLE_TR_SUCCESS\n    = 'transport-replace.success';\n\n/**\n * The \"action\" value for P2P events which indicates that a connection was\n * established (TODO: verify/fix the documentation)\n * @type {string}\n */\nexport const ACTION_P2P_ESTABLISHED = 'established';\n\n/**\n * The \"action\" value for P2P events which indicates that something failed.\n * @type {string}\n */\nexport const ACTION_P2P_FAILED = 'failed';\n\n/**\n * The \"action\" value for P2P events which indicates that a switch to\n * jitsi-videobridge happened.\n * @type {string}\n */\nexport const ACTION_P2P_SWITCH_TO_JVB = 'switch.to.jvb';\n\n/**\n * The name of an event which indicates an available device. We send one such\n * event per available device once when the available devices are first known,\n * and every time that they change\n * @type {string}\n *\n * Properties:\n *      audio_input_device_count: the number of audio input devices available at\n *          the time the event was sent.\n *      audio_output_device_count: the number of audio output devices available\n *          at the time the event was sent.\n *      video_input_device_count: the number of video input devices available at\n *          the time the event was sent.\n *      video_output_device_count: the number of video output devices available\n *          at the time the event was sent.\n *      device_id: an identifier of the device described in this event.\n *      device_group_id:\n *      device_kind: one of 'audioinput', 'audiooutput', 'videoinput' or\n *          'videooutput'.\n *      device_label: a string which describes the device.\n */\nexport const AVAILABLE_DEVICE = 'available.device';\n\n/**\n * This appears to be fired only in certain cases when the XMPP connection\n * disconnects (and it was intentional?). It is currently never observed to\n * fire in production.\n *\n * TODO: document\n *\n * Properties:\n *      message: an error message\n */\nexport const CONNECTION_DISCONNECTED = 'connection.disconnected';\n\n/**\n * Indicates that the user of the application provided feedback in terms of a\n * rating (an integer from 1 to 5) and an optional comment.\n * Properties:\n *      value: the user's rating (an integer from 1 to 5)\n *      comment: the user's comment\n */\nexport const FEEDBACK = 'feedback';\n\n/**\n * Indicates the duration of a particular phase of the ICE connectivity\n * establishment.\n *\n * Properties:\n *      phase: the ICE phase (e.g. 'gathering', 'checking', 'establishment')\n *      value: the duration in milliseconds.\n *      p2p: whether the associated ICE connection is p2p or towards a\n *          jitsi-videobridge\n *      initiator: whether the local Jingle peer is the initiator or responder\n *          in the Jingle session. XXX we probably actually care about the ICE\n *          role (controlling vs controlled), and we assume that this correlates\n *          with the Jingle initiator.\n */\nexport const ICE_DURATION = 'ice.duration';\n\n/**\n * Indicates the difference in milliseconds between the ICE establishment time\n * for the P2P and JVB connections (e.g. a value of 10 would indicate that the\n * P2P connection took 10ms more than JVB connection to establish).\n *\n * Properties:\n *      value: the difference in establishment durations in milliseconds.\n *\n */\nexport const ICE_ESTABLISHMENT_DURATION_DIFF\n    = 'ice.establishment.duration.diff';\n\n/**\n * Indicates that the ICE state has changed.\n *\n * Properties:\n *      state: the ICE state which was entered (e.g. 'checking', 'connected',\n *          'completed', etc).\n *      value: the time in milliseconds (as reported by\n *          window.performance.now()) that the state change occurred.\n *      p2p: whether the associated ICE connection is p2p or towards a\n *          jitsi-videobridge\n *      signalingState: The signaling state of the associated PeerConnection\n *      reconnect: whether the associated Jingle session is in the process of\n *          reconnecting (or is it ICE? TODO: verify/fix the documentation)\n */\nexport const ICE_STATE_CHANGED = 'ice.state.changed';\n\n/**\n * Indicates that a track was unmuted (?).\n *\n * Properties:\n *      mediaType: the media type of the local track ('audio' or 'video').\n *      trackType: the type of the track ('local' or 'remote').\n *      value: TODO: document\n */\nexport const TRACK_UNMUTED = 'track.unmuted';\n\n/**\n * Creates an operational event which indicates that we have received a\n * \"bridge down\" event from jicofo.\n */\nexport const createBridgeDownEvent = function() {\n    const bridgeDown = 'bridge.down';\n\n    return {\n        action: bridgeDown,\n        actionSubject: bridgeDown,\n        type: TYPE_OPERATIONAL\n    };\n};\n\n/**\n * Creates an event which indicates that the XMPP connection failed\n * @param errorType TODO\n * @param errorMessage TODO\n * @param detail connection failed details.\n */\nexport const createConnectionFailedEvent\n    = function(errorType, errorMessage, details) {\n        return {\n            type: TYPE_OPERATIONAL,\n            action: 'connection.failed',\n            attributes: {\n                'error_type': errorType,\n                'error_message': errorMessage,\n                ...details\n            }\n        };\n    };\n\n/**\n * Creates an operational event which indicates that a particular connection\n * stage was reached (i.e. the XMPP connection transitioned to the \"connected\"\n * state).\n *\n * @param stage the stage which was reached\n * @param attributes additional attributes for the event. This should be an\n * object with a \"value\" property indicating a timestamp in milliseconds\n * relative to the beginning of the document's lifetime.\n *\n */\nexport const createConnectionStageReachedEvent = function(stage, attributes) {\n    const action = 'connection.stage.reached';\n\n    return {\n        action,\n        actionSubject: stage,\n        attributes,\n        source: action,\n        type: TYPE_OPERATIONAL\n    };\n};\n\n/**\n * Creates an operational event for the end-to-end round trip time to a\n * specific remote participant.\n * @param participantId the ID of the remote participant.\n * @param region the region of the remote participant\n * @param rtt the rtt\n */\nexport const createE2eRttEvent = function(participantId, region, rtt) {\n    const attributes = {\n        'participant_id': participantId,\n        region,\n        rtt\n    };\n\n    return {\n        attributes,\n        name: 'e2e_rtt',\n        type: TYPE_OPERATIONAL\n    };\n};\n\n/**\n * Creates an event which indicates that the focus has left the MUC.\n */\nexport const createFocusLeftEvent = function() {\n    const action = 'focus.left';\n\n    return {\n        action,\n        actionSubject: action,\n        type: TYPE_OPERATIONAL\n    };\n};\n\n/**\n * Creates an event related to a getUserMedia call.\n *\n * @param action the type of the result that the event represents: 'error',\n * 'success', 'warning', etc.\n * @param attributes the attributes to attach to the event.\n * @returns {{type: string, source: string, name: string}}\n */\nexport const createGetUserMediaEvent = function(action, attributes = {}) {\n    return {\n        type: TYPE_OPERATIONAL,\n        source: 'get.user.media',\n        action,\n        attributes\n    };\n};\n\n/**\n * Creates an event for a Jingle-related event.\n * @param action the action of the event\n * @param attributes attributes to add to the event.\n */\nexport const createJingleEvent = function(action, attributes = {}) {\n    return {\n        type: TYPE_OPERATIONAL,\n        action,\n        source: 'jingle',\n        attributes\n    };\n};\n\n/**\n * Creates an event which indicates that a local track was not able to read\n * data from its source (a camera or a microphone).\n *\n * @param mediaType {String} the media type of the local track ('audio' or\n * 'video').\n */\nexport const createNoDataFromSourceEvent = function(mediaType) {\n    return {\n        attributes: { 'media_type': mediaType },\n        action: 'track.no.data.from.source',\n        type: TYPE_OPERATIONAL\n    };\n};\n\n/**\n * Creates an event for a p2p-related event.\n * @param action the action of the event\n * @param attributes attributes to add to the event.\n */\nexport const createP2PEvent = function(action, attributes = {}) {\n    return {\n        type: TYPE_OPERATIONAL,\n        action,\n        source: 'p2p',\n        attributes\n    };\n};\n\n/**\n * Indicates that we received a remote command to mute.\n */\nexport const createRemotelyMutedEvent = function() {\n    return {\n        type: TYPE_OPERATIONAL,\n        action: 'remotely.muted'\n    };\n};\n\n/**\n * Creates an event which contains RTP statistics such as RTT and packet loss.\n *\n * All average RTP stats are currently reported under 1 event name, but with\n * different properties that allows to distinguish between a P2P call, a\n * call relayed through TURN or the JVB, and multiparty vs 1:1.\n *\n * The structure of the event is:\n *\n * {\n *      p2p: true,\n *      conferenceSize: 2,\n *      localCandidateType: \"relay\",\n *      remoteCandidateType: \"relay\",\n *      transportType: \"udp\",\n *\n *      // Average RTT of 200ms\n *      \"rtt.avg\": 200,\n *      \"rtt.samples\": \"[100, 200, 300]\",\n *\n *      // Average packet loss of 10%\n *      \"packet.loss.avg\": 10,\n *      \"packet.loss.samples\": '[5, 10, 15]'\n *\n *      // Difference in milliseconds in the end-to-end RTT between p2p and jvb.\n *      // The e2e RTT through jvb is 15ms shorter:\n *      \"rtt.diff\": 15,\n *\n *      // End-to-end RTT through JVB is ms.\n *      \"end2end.rtt.avg\" = 100\n * }\n *\n * Note that the value of the \"samples\" properties are (JSON encoded) strings,\n * and not JSON arrays, as events' attributes can not be nested. The samples are\n * currently included for debug purposes only and can be removed anytime soon\n * from the structure.\n *\n * Also note that not all of values are present in each event, as values are\n * obtained and calculated as part of different process/event pipe. For example\n * {@link ConnectionAvgStats} instances are doing the reports for each\n * {@link TraceablePeerConnection} and work independently from the main stats\n * pipe.\n */\nexport const createRtpStatsEvent = function(attributes) {\n    return {\n        type: TYPE_OPERATIONAL,\n        action: 'rtp.stats',\n        attributes\n    };\n};\n\n/**\n * Creates an event which contains the round trip time (RTT) to a set of\n * regions.\n *\n * @param attributes\n * @returns {{type: string, action: string, attributes: *}}\n */\nexport const createRttByRegionEvent = function(attributes) {\n    return {\n        type: TYPE_OPERATIONAL,\n        action: 'rtt.by.region',\n        attributes\n    };\n};\n\n/**\n * Creates an event which indicates the Time To First Media (TTFM).\n * It is measured in milliseconds relative to the beginning of the document's\n * lifetime (i.e. the origin used by window.performance.now()), and it excludes\n * the following:\n * 1. The delay due to getUserMedia()\n * 2. The period between the MUC being joined and the reception of the Jingle\n * session-initiate from jicofo. This is because jicofo will not start a Jingle\n * session until there are at least 2 participants in the room.\n *\n * @param attributes the attributes to add to the event. Currently used fields:\n *      mediaType: the media type of the local track ('audio' or 'video').\n *      muted: whether the track has ever been muted (?)\n *      value: the TTMF in milliseconds.\n */\nexport const createTtfmEvent = function(attributes) {\n    return createConnectionStageReachedEvent('ttfm', attributes);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./service/statistics/AnalyticsEvents.js","/**\n * The events for the conference.\n */\n\n/**\n * Indicates that authentication status changed.\n */\nexport const AUTH_STATUS_CHANGED = 'conference.auth_status_changed';\n\n/**\n * Indicates that available devices changed.\n */\nexport const AVAILABLE_DEVICES_CHANGED = 'conference.availableDevicesChanged';\n\n/**\n * A participant avatar has changed.\n */\nexport const AVATAR_CHANGED = 'conference.avatarChanged';\n\n/**\n * Fired just before the statistics module is disposed and it's the last chance\n * to submit some logs to the statistics service (ex. CallStats if enabled),\n * before it's disconnected.\n */\nexport const BEFORE_STATISTICS_DISPOSED = 'conference.beforeStatisticsDisposed';\n\n/**\n * Indicates that an error occured.\n */\nexport const CONFERENCE_ERROR = 'conference.error';\n\n/**\n * Indicates that conference failed.\n */\nexport const CONFERENCE_FAILED = 'conference.failed';\n\n/**\n * Indicates that conference has been joined. The event does NOT provide any\n * parameters to its listeners.\n */\nexport const CONFERENCE_JOINED = 'conference.joined';\n\n/**\n * Indicates that conference has been left.\n */\nexport const CONFERENCE_LEFT = 'conference.left';\n\n/**\n * Indicates that the connection to the conference has been established\n * XXX This is currently fired whenVthe *ICE* connection enters 'connected'\n * state for the first time.\n */\nexport const CONNECTION_ESTABLISHED = 'conference.connectionEstablished';\n\n/**\n * Indicates that the connection to the conference has been interrupted for some\n * reason.\n * XXX This is currently fired when the *ICE* connection is interrupted.\n */\nexport const CONNECTION_INTERRUPTED = 'conference.connectionInterrupted';\n\n/**\n * Indicates that the connection to the conference has been restored.\n * XXX This is currently fired when the *ICE* connection is restored.\n */\nexport const CONNECTION_RESTORED = 'conference.connectionRestored';\n\n/**\n * A connection to the video bridge's data channel has been established.\n */\nexport const DATA_CHANNEL_OPENED = 'conference.dataChannelOpened';\n\n/**\n * A user has changed it display name\n */\nexport const DISPLAY_NAME_CHANGED = 'conference.displayNameChanged';\n\n/**\n * The dominant speaker was changed.\n */\nexport const DOMINANT_SPEAKER_CHANGED = 'conference.dominantSpeaker';\n\n/**\n * Indicates that DTMF support changed.\n */\nexport const DTMF_SUPPORT_CHANGED = 'conference.dtmfSupportChanged';\n\n/**\n * Indicates that a message from another participant is received on data\n * channel.\n */\nexport const ENDPOINT_MESSAGE_RECEIVED = 'conference.endpoint_message_received';\n\n/**\n * NOTE This is lib-jitsi-meet internal event and can be removed at any time !\n *\n * Event emitted when conference transits, between one to one and multiparty JVB\n * conference. If the conference switches to P2P it's neither one to one nor\n * a multiparty JVB conference, but P2P (the status argument of this event will\n * be <tt>false</tt>).\n *\n * The first argument is a boolean which carries the previous value and\n * the seconds argument is a boolean with the new status. The event is emitted\n * only if the previous and the new values are different.\n *\n * @type {string}\n */\nexport const JVB121_STATUS = 'conference.jvb121Status';\n\n/**\n * You are kicked from the conference.\n */\nexport const KICKED = 'conference.kicked';\n\n/**\n * The Last N set is changed.\n *\n * @param {Array<string>|null} leavingEndpointIds the ids of all the endpoints\n * which are leaving Last N\n * @param {Array<string>|null} enteringEndpointIds the ids of all the endpoints\n * which are entering Last N\n */\nexport const LAST_N_ENDPOINTS_CHANGED = 'conference.lastNEndpointsChanged';\n\n/**\n * Indicates that the room has been locked or unlocked.\n */\nexport const LOCK_STATE_CHANGED = 'conference.lock_state_changed';\n\n/**\n * New text message was received.\n */\nexport const MESSAGE_RECEIVED = 'conference.messageReceived';\n\n/**\n * New private text message was received.\n */\nexport const PRIVATE_MESSAGE_RECEIVED = 'conference.privateMessageReceived';\n\n/**\n * Event fired when JVB sends notification about interrupted/restored user's\n * ICE connection status or we detect local problem with the video track.\n * First argument is the ID of the participant and\n * the seconds is a string indicating if the connection is currently\n * - active - the connection is active\n * - inactive - the connection is inactive, was intentionally interrupted by\n * the bridge\n * - interrupted - a network problem occurred\n * - restoring - the connection was inactive and is restoring now\n *\n * The current status value can be obtained by calling\n * JitsiParticipant.getConnectionStatus().\n */\nexport const PARTICIPANT_CONN_STATUS_CHANGED\n    = 'conference.participant_conn_status_changed';\n\n/**\n * Indicates that the features of the participant has been changed.\n */\nexport const PARTCIPANT_FEATURES_CHANGED\n    = 'conference.partcipant_features_changed';\n\n/**\n * Indicates that a the value of a specific property of a specific participant\n * has changed.\n */\nexport const PARTICIPANT_PROPERTY_CHANGED\n    = 'conference.participant_property_changed';\n\n/**\n * Indicates that the conference has switched between JVB and P2P connections.\n * The first argument of this event is a <tt>boolean</tt> which when set to\n * <tt>true</tt> means that the conference is running on the P2P connection.\n */\nexport const P2P_STATUS = 'conference.p2pStatus';\n\n/**\n * Indicates that phone number changed.\n */\nexport const PHONE_NUMBER_CHANGED = 'conference.phoneNumberChanged';\n\n/**\n * Indicates that recording state changed.\n */\nexport const RECORDER_STATE_CHANGED = 'conference.recorderStateChanged';\n\n/**\n * Indicates that video SIP GW state changed.\n * @param {VideoSIPGWConstants} status.\n */\nexport const VIDEO_SIP_GW_AVAILABILITY_CHANGED\n    = 'conference.videoSIPGWAvailabilityChanged';\n\n/**\n * Indicates that video SIP GW Session state changed.\n * @param {options} event - {\n *     {string} address,\n *     {VideoSIPGWConstants} oldState,\n *     {VideoSIPGWConstants} newState,\n *     {string} displayName}\n * }.\n */\nexport const VIDEO_SIP_GW_SESSION_STATE_CHANGED\n    = 'conference.videoSIPGWSessionStateChanged';\n\n/**\n * Indicates that start muted settings changed.\n */\nexport const START_MUTED_POLICY_CHANGED\n    = 'conference.start_muted_policy_changed';\n\n/**\n * Indicates that the local user has started muted.\n */\nexport const STARTED_MUTED = 'conference.started_muted';\n\n/**\n * Indicates that subject of the conference has changed.\n */\nexport const SUBJECT_CHANGED = 'conference.subjectChanged';\n\n/**\n * Indicates that DTMF support changed.\n */\nexport const SUSPEND_DETECTED = 'conference.suspendDetected';\n\n/**\n * Event indicates that local user is talking while he muted himself\n */\nexport const TALK_WHILE_MUTED = 'conference.talk_while_muted';\n\n/**\n * A new media track was added to the conference. The event provides the\n * following parameters to its listeners:\n *\n * @param {JitsiTrack} track the added JitsiTrack\n */\nexport const TRACK_ADDED = 'conference.trackAdded';\n\n/**\n * Audio levels of a media track ( attached to the conference) was changed.\n */\nexport const TRACK_AUDIO_LEVEL_CHANGED = 'conference.audioLevelsChanged';\n\n/**\n * A media track ( attached to the conference) mute status was changed.\n */\nexport const TRACK_MUTE_CHANGED = 'conference.trackMuteChanged';\n\n/**\n * The media track was removed from the conference. The event provides the\n * following parameters to its listeners:\n *\n * @param {JitsiTrack} track the removed JitsiTrack\n */\nexport const TRACK_REMOVED = 'conference.trackRemoved';\n\n/**\n * Notifies for transcription status changes. The event provides the\n * following parameters to its listeners:\n *\n * @param {String} status - The new status.\n */\nexport const TRANSCRIPTION_STATUS_CHANGED\n    = 'conference.transcriptionStatusChanged';\n\n\n/**\n * A new user joined the conference.\n */\nexport const USER_JOINED = 'conference.userJoined';\n\n/**\n * A user has left the conference.\n */\nexport const USER_LEFT = 'conference.userLeft';\n\n/**\n * User role changed.\n */\nexport const USER_ROLE_CHANGED = 'conference.roleChanged';\n\n/**\n * User status changed.\n */\nexport const USER_STATUS_CHANGED = 'conference.statusChanged';\n\n/**\n * Event indicates that the bot participant type changed.\n */\nexport const BOT_TYPE_CHANGED = 'conference.bot_type_changed';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConferenceEvents.js","const XMPPEvents = {\n    /**\n     * Indicates error while adding ice candidate.\n     */\n    ADD_ICE_CANDIDATE_FAILED: 'xmpp.add_ice_candidate_failed',\n\n    // Designates an event indicating that the focus has asked us to mute our\n    // audio.\n    AUDIO_MUTED_BY_FOCUS: 'xmpp.audio_muted_by_focus',\n    AUTHENTICATION_REQUIRED: 'xmpp.authentication_required',\n    BRIDGE_DOWN: 'xmpp.bridge_down',\n\n    /**\n     * Triggered when 'session-accept' is received from the responder.\n     */\n    CALL_ACCEPTED: 'xmpp.callaccepted.jingle',\n\n    // Designates an event indicating that an offer (e.g. Jingle\n    // session-initiate) was received.\n    CALL_INCOMING: 'xmpp.callincoming.jingle',\n\n    // Triggered when Jicofo kills our media session, this can happen while\n    // we're still in the MUC, when it decides to terminate the media session.\n    // For example when the session is idle for too long, because we're the only\n    // person in the conference room.\n    CALL_ENDED: 'xmpp.callended.jingle',\n    CHAT_ERROR_RECEIVED: 'xmpp.chat_error_received',\n    CONFERENCE_SETUP_FAILED: 'xmpp.conference_setup_failed',\n\n    /**\n     * This event is triggered when the ICE connects for the first time.\n     */\n    CONNECTION_ESTABLISHED: 'xmpp.connection.connected',\n\n    // Designates an event indicating that the connection to the XMPP server\n    // failed.\n    CONNECTION_FAILED: 'xmpp.connection.failed',\n\n    // Designates an event indicating that the media (ICE) connection was\n    // interrupted. This should go to the RTC module.\n    CONNECTION_INTERRUPTED: 'xmpp.connection.interrupted',\n\n    // Designates an event indicating that the media (ICE) connection was\n    // restored. This should go to the RTC module.\n    CONNECTION_RESTORED: 'xmpp.connection.restored',\n\n    // Designates an event indicating that the media (ICE) connection failed.\n    // This should go to the RTC module.\n    CONNECTION_ICE_FAILED: 'xmpp.connection.ice.failed',\n\n    // Designates an event indicating that the display name of a participant\n    // has changed.\n    DISPLAY_NAME_CHANGED: 'xmpp.display_name_changed',\n\n    /**\n     * Chat room instance have been added to Strophe.emuc plugin.\n     */\n    EMUC_ROOM_ADDED: 'xmpp.emuc_room_added',\n\n    /**\n     * Chat room instance have been removed from Strophe.emuc plugin.\n     */\n    EMUC_ROOM_REMOVED: 'xmpp.emuc_room_removed',\n    ETHERPAD: 'xmpp.etherpad',\n    FOCUS_DISCONNECTED: 'xmpp.focus_disconnected',\n    FOCUS_LEFT: 'xmpp.focus_left',\n    GRACEFUL_SHUTDOWN: 'xmpp.graceful_shutdown',\n\n    /**\n     * Event fired when 'transport-replace' Jingle message has been received,\n     * before the new offer is set on the PeerConnection.\n     */\n    ICE_RESTARTING: 'rtc.ice_restarting',\n\n    /* Event fired when XMPP error is returned to any request, it is meant to be\n     * used to report 'signaling' errors to CallStats\n     *\n     * {\n     *   code: {XMPP error code}\n     *   reason: {XMPP error condition}\n     *   source = request.tree()\n     *   session = {JingleSession instance}\n     * }\n     */\n    JINGLE_ERROR: 'xmpp.jingle_error',\n\n    // Event fired when we have failed to set initial offer\n    JINGLE_FATAL_ERROR: 'xmpp.jingle_fatal_error',\n\n    // Designates an event indicating that we were kicked from the XMPP MUC.\n    KICKED: 'xmpp.kicked',\n\n    // Designates an event indicating that our role in the XMPP MUC has changed.\n    LOCAL_ROLE_CHANGED: 'xmpp.localrole_changed',\n\n    // Designates an event indicating that an XMPP message in the MUC was\n    // received.\n    MESSAGE_RECEIVED: 'xmpp.message_received',\n\n    // Designates an event indicating that a private XMPP message in the MUC was\n    // received.\n    PRIVATE_MESSAGE_RECEIVED: 'xmpp.private_message_received',\n\n    // Designates an event indicating that a bot participant type had changed\n    MUC_MEMBER_BOT_TYPE_CHANGED: 'xmpp.muc_member_bot_type_changed',\n\n    // Designates an event indicating that the XMPP MUC was destroyed.\n    MUC_DESTROYED: 'xmpp.muc_destroyed',\n\n    // Designates an event indicating that we have joined the XMPP MUC.\n    MUC_JOINED: 'xmpp.muc_joined',\n\n    // Designates an event indicating that a participant joined the XMPP MUC.\n    MUC_MEMBER_JOINED: 'xmpp.muc_member_joined',\n\n    // Designates an event indicating that a participant left the XMPP MUC.\n    MUC_MEMBER_LEFT: 'xmpp.muc_member_left',\n\n    // Designates an event indicating that local participant left the muc\n    MUC_LEFT: 'xmpp.muc_left',\n\n    // Designates an event indicating that the MUC role of a participant has\n    // changed.\n    MUC_ROLE_CHANGED: 'xmpp.muc_role_changed',\n\n    // Designates an event indicating that the MUC has been locked or unlocked.\n    MUC_LOCK_CHANGED: 'xmpp.muc_lock_changed',\n\n    // Designates an event indicating that a participant in the XMPP MUC has\n    // advertised that they have audio muted (or unmuted).\n    PARTICIPANT_AUDIO_MUTED: 'xmpp.audio_muted',\n\n    // Designates an event indicating that a participant in the XMPP MUC has\n    // advertised that they have video muted (or unmuted).\n    PARTICIPANT_VIDEO_MUTED: 'xmpp.video_muted',\n\n    // Designates an event indicating that the video type (e.g. 'camera' or\n    // 'screen') for a participant has changed.\n    // Note: currently this event fires every time we receive presence from\n    // someone (regardless of whether or not the \"video type\" changed).\n    PARTICIPANT_VIDEO_TYPE_CHANGED: 'xmpp.video_type',\n\n    /**\n     * Indicates that the features of the participant has been changed.\n     */\n    PARTCIPANT_FEATURES_CHANGED: 'xmpp.partcipant_features_changed',\n    PASSWORD_REQUIRED: 'xmpp.password_required',\n    PEERCONNECTION_READY: 'xmpp.peerconnection_ready',\n\n    /**\n     * Indicates that phone number changed.\n     */\n    PHONE_NUMBER_CHANGED: 'conference.phoneNumberChanged',\n    PRESENCE_RECEIVED: 'xmpp.presence_received',\n    PRESENCE_STATUS: 'xmpp.presence_status',\n    PROMPT_FOR_LOGIN: 'xmpp.prompt_for_login',\n\n    // xmpp is connected and obtained user media\n    READY_TO_JOIN: 'xmpp.ready_to_join',\n\n    /**\n     * Indicates that recording state changed.\n     */\n    RECORDER_STATE_CHANGED: 'xmpp.recorderStateChanged',\n\n    // Designates an event indicating that we received statistics from a\n    // participant in the MUC.\n    REMOTE_STATS: 'xmpp.remote_stats',\n    RESERVATION_ERROR: 'xmpp.room_reservation_error',\n    ROOM_CONNECT_ERROR: 'xmpp.room_connect_error',\n    ROOM_CONNECT_NOT_ALLOWED_ERROR: 'xmpp.room_connect_error.not_allowed',\n    ROOM_JOIN_ERROR: 'xmpp.room_join_error',\n\n    /**\n     * Indicates that max users limit has been reached.\n     */\n    ROOM_MAX_USERS_ERROR: 'xmpp.room_max_users_error',\n\n    // Designates an event indicating that we sent an XMPP message to the MUC.\n    SENDING_CHAT_MESSAGE: 'xmpp.sending_chat_message',\n\n    // Designates an event indicating that we sent a private XMPP message to\n    // a specific user of the muc.\n    SENDING_PRIVATE_CHAT_MESSAGE: 'xmpp.sending_private_chat_message',\n\n    /**\n     * Event fired when we do not get our 'session-accept' acknowledged by\n     * Jicofo. It most likely means that there is serious problem with our\n     * connection or XMPP server and we should reload the conference.\n     *\n     * We have seen that to happen in BOSH requests race condition when the BOSH\n     * request table containing the 'session-accept' was discarded by Prosody.\n     * Jicofo does send the RESULT immediately without any condition, so missing\n     * packets means that most likely it has never seen our IQ.\n     */\n    SESSION_ACCEPT_TIMEOUT: 'xmpp.session_accept_timeout',\n\n    // Designates an event indicating that we should join the conference with\n    // audio and/or video muted.\n    START_MUTED_FROM_FOCUS: 'xmpp.start_muted_from_focus',\n\n    // Designates an event indicating that the subject of the XMPP MUC has\n    // changed.\n    SUBJECT_CHANGED: 'xmpp.subject_changed',\n\n    // FIXME: how does it belong to XMPP ? - it's detected by the PeerConnection\n    // suspending detected\n    SUSPEND_DETECTED: 'xmpp.suspend_detected',\n\n    /**\n     * Notifies for transcription status changes. The event provides the\n     * following parameters to its listeners:\n     *\n     * @param {String} status - The new status.\n     */\n    TRANSCRIPTION_STATUS_CHANGED: 'xmpp.transcription_status_changed',\n\n    /**\n     * Event fired when 'transport-info' with new ICE candidates is received.\n     */\n    TRANSPORT_INFO: 'xmpp.transportinfo.jingle',\n\n    /**\n     * Indicates that video SIP GW state changed.\n     *\n     * @param {VideoSIPGWConstants} status - Any of the following statuses:\n     * STATUS_BUSY, STATUS_AVAILABLE or STATUS_UNDEFINED.\n     */\n    VIDEO_SIP_GW_AVAILABILITY_CHANGED: 'xmpp.videoSIPGWAvailabilityChanged',\n\n    /**\n     * Indicates that video SIP GW Session state changed.\n     * The statuses are any of the following statuses:\n     * STATE_ON, STATE_OFF, STATE_PENDING, STATE_RETRYING, STATE_FAILED.\n     * {@see VideoSIPGWConstants}\n     *\n     * @param {options} event - {address, oldState, newState, displayName}.\n     */\n    VIDEO_SIP_GW_SESSION_STATE_CHANGED:\n        'xmpp.videoSIPGWSessionStateChanged',\n\n    // Designates an event indicating that the local ICE connection state has\n    // changed.\n    ICE_CONNECTION_STATE_CHANGED: 'xmpp.ice_connection_state_changed',\n\n    /**\n     * Event which is emitted when the body in an XMPP message in the MUC\n     * contains JSON\n     */\n    JSON_MESSAGE_RECEIVED: 'xmmp.json_message_received'\n};\n\nmodule.exports = XMPPEvents;\n\n\n\n// WEBPACK FOOTER //\n// ./service/xmpp/XMPPEvents.js","const RTCEvents = {\n    /**\n     * Indicates error while create answer call.\n     */\n    CREATE_ANSWER_FAILED: 'rtc.create_answer_failed',\n\n    /**\n     * Indicates error while create offer call.\n     */\n    CREATE_OFFER_FAILED: 'rtc.create_offer_failed',\n    DATA_CHANNEL_OPEN: 'rtc.data_channel_open',\n    ENDPOINT_CONN_STATUS_CHANGED: 'rtc.endpoint_conn_status_changed',\n    DOMINANT_SPEAKER_CHANGED: 'rtc.dominant_speaker_changed',\n    LASTN_ENDPOINT_CHANGED: 'rtc.lastn_endpoint_changed',\n\n    IS_SELECTED_CHANGED: 'rtc.is_selected_change',\n\n    /**\n     * Event emitted when {@link RTC.setLastN} method is called to update with\n     * the new value set.\n     * The first argument is the value passed to {@link RTC.setLastN}.\n     */\n    LASTN_VALUE_CHANGED: 'rtc.lastn_value_changed',\n\n    /**\n     * Event emitted when ssrc for a local track is extracted and stored\n     * in {@link TraceablePeerConnection}.\n     * @param {JitsiLocalTrack} track which ssrc was updated\n     * @param {string} ssrc that was stored\n     */\n    LOCAL_TRACK_SSRC_UPDATED: 'rtc.local_track_ssrc_updated',\n\n    AVAILABLE_DEVICES_CHANGED: 'rtc.available_devices_changed',\n    TRACK_ATTACHED: 'rtc.track_attached',\n\n    /**\n     * Event fired when we remote track is added to the conference.\n     * 1st event argument is the added <tt>JitsiRemoteTrack</tt> instance.\n     **/\n    REMOTE_TRACK_ADDED: 'rtc.remote_track_added',\n\n    // FIXME get rid of this event in favour of NO_DATA_FROM_SOURCE event\n    // (currently implemented for local tracks only)\n    REMOTE_TRACK_MUTE: 'rtc.remote_track_mute',\n\n    /**\n     * Indicates that the remote track has been removed from the conference.\n     * 1st event argument is the removed {@link JitsiRemoteTrack} instance.\n     */\n    REMOTE_TRACK_REMOVED: 'rtc.remote_track_removed',\n\n    // FIXME get rid of this event in favour of NO_DATA_FROM_SOURCE event\n    // (currently implemented for local tracks only)\n    REMOTE_TRACK_UNMUTE: 'rtc.remote_track_unmute',\n\n    /**\n     * Indicates error while set local description.\n     */\n    SET_LOCAL_DESCRIPTION_FAILED: 'rtc.set_local_description_failed',\n\n    /**\n     * Indicates error while set remote description.\n     */\n    SET_REMOTE_DESCRIPTION_FAILED: 'rtc.set_remote_description_failed',\n    AUDIO_OUTPUT_DEVICE_CHANGED: 'rtc.audio_output_device_changed',\n    DEVICE_LIST_CHANGED: 'rtc.device_list_changed',\n    DEVICE_LIST_AVAILABLE: 'rtc.device_list_available',\n\n    /**\n     * Indicates that a message from another participant is received on\n     * data channel.\n     */\n    ENDPOINT_MESSAGE_RECEIVED: 'rtc.endpoint_message_received',\n\n    /**\n     * Designates an event indicating that the local ICE username fragment of\n     * the jingle session has changed.\n     * The first argument of the vent is <tt>TraceablePeerConnection</tt> which\n     * is the source of the event.\n     * The second argument is the actual \"ufrag\" string.\n     */\n    LOCAL_UFRAG_CHANGED: 'rtc.local_ufrag_changed',\n\n    /**\n     * Designates an event indicating that the local ICE username fragment of\n     * the jingle session has changed.\n     * The first argument of the vent is <tt>TraceablePeerConnection</tt> which\n     * is the source of the event.\n     * The second argument is the actual \"ufrag\" string.\n     */\n    REMOTE_UFRAG_CHANGED: 'rtc.remote_ufrag_changed'\n};\n\nmodule.exports = RTCEvents;\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/RTCEvents.js","import EventEmitter from 'events';\n\n/**\n * The class implements basic event operations - add/remove listener.\n * NOTE: The purpose of the class is to be extended in order to add\n * this functionality to other classes.\n */\nexport default class Listenable {\n    /**\n     * Creates new instance.\n     * @param {EventEmitter} eventEmitter\n     * @constructor\n     */\n    constructor(eventEmitter = new EventEmitter()) {\n        this.eventEmitter = eventEmitter;\n\n        // aliases for addListener/removeListener\n        this.addEventListener = this.on = this.addListener;\n        this.removeEventListener = this.off = this.removeListener;\n    }\n\n    /**\n     * Adds new listener.\n     * @param {String} eventName the name of the event\n     * @param {Function} listener the listener.\n     */\n    addListener(eventName, listener) {\n        this.eventEmitter.addListener(eventName, listener);\n    }\n\n    /**\n     * Removes listener.\n     * @param {String} eventName the name of the event that triggers the\n     * listener\n     * @param {Function} listener the listener.\n     */\n    removeListener(eventName, listener) {\n        this.eventEmitter.removeListener(eventName, listener);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/Listenable.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n\n// Utility methods.\nvar utils = {\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  /**\n   * Disable or enable deprecation warnings\n   * @param {!boolean} bool set to true to disable warnings.\n   */\n  disableWarnings: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    deprecationWarnings_ = !bool;\n    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Shows a deprecation warning suggesting the modern and spec-compatible API.\n   */\n  deprecated: function(oldMethod, newMethod) {\n    if (!deprecationWarnings_) {\n      return;\n    }\n    console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n        ' instead.');\n  },\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion: function(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  detectBrowser: function(window) {\n    var navigator = window && window.navigator;\n\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    // Firefox.\n    if (navigator.mozGetUserMedia) {\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n      if (window.webkitRTCPeerConnection) {\n        result.browser = 'chrome';\n        result.version = this.extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/(\\d+)\\./, 2);\n      } else { // Safari (in an unpublished version) or unknown webkit-based.\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n          result.browser = 'safari';\n          result.version = this.extractVersion(navigator.userAgent,\n            /AppleWebKit\\/(\\d+)\\./, 1);\n        } else { // unknown webkit-based browser.\n          result.browser = 'Unsupported webkit-based browser ' +\n              'with GUM support but no WebRTC support.';\n          return result;\n        }\n      }\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n        // Safari, with webkitGetUserMedia removed.\n      result.browser = 'safari';\n      result.version = this.extractVersion(navigator.userAgent,\n          /AppleWebKit\\/(\\d+)\\./, 1);\n    } else { // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  },\n\n};\n\n// Export.\nmodule.exports = {\n  log: utils.log,\n  deprecated: utils.deprecated,\n  disableLog: utils.disableLog,\n  disableWarnings: utils.disableWarnings,\n  extractVersion: utils.extractVersion,\n  shimCreateObjectURL: utils.shimCreateObjectURL,\n  detectBrowser: utils.detectBrowser.bind(utils)\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webrtc-adapter/src/js/utils.js\n// module id = 11\n// module chunks = 0","import * as JitsiTrackErrors from './JitsiTrackErrors';\n\nconst TRACK_ERROR_TO_MESSAGE_MAP = {};\n\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.UNSUPPORTED_RESOLUTION]\n    = 'Video resolution is not supported: ';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.CHROME_EXTENSION_INSTALLATION_ERROR]\n    = 'Failed to install Chrome extension';\nTRACK_ERROR_TO_MESSAGE_MAP[\n    JitsiTrackErrors.CHROME_EXTENSION_USER_GESTURE_REQUIRED]\n    = 'Failed to install Chrome extension - installations can only be initiated'\n        + ' by a user gesture.';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.CHROME_EXTENSION_USER_CANCELED]\n    = 'User canceled Chrome\\'s screen sharing prompt';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.CHROME_EXTENSION_GENERIC_ERROR]\n    = 'Unknown error from Chrome extension';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.ELECTRON_DESKTOP_PICKER_ERROR]\n    = 'Unkown error from desktop picker';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.ELECTRON_DESKTOP_PICKER_NOT_FOUND]\n    = 'Failed to detect desktop picker';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.GENERAL]\n    = 'Generic getUserMedia error';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.PERMISSION_DENIED]\n    = 'User denied permission to use device(s): ';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.NOT_FOUND]\n    = 'Requested device(s) was/were not found: ';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.CONSTRAINT_FAILED]\n    = 'Constraint could not be satisfied: ';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.TRACK_IS_DISPOSED]\n    = 'Track has been already disposed';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.TRACK_NO_STREAM_FOUND]\n    = 'Track does not have an associated Media Stream';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.NO_DATA_FROM_SOURCE]\n    = 'The track has stopped receiving data from it\\'s source';\n\n\n// FIXME: Using prototype inheritance because otherwise instanceof is not\n// working properly (see https://github.com/babel/babel/issues/3083)\n\n/**\n *\n * Represents an error that occurred to a JitsiTrack. Can represent various\n * types of errors. For error descriptions (@see JitsiTrackErrors).\n *\n * @extends Error\n *\n *\n * @constructor\n * @param {Object|string} error - error object or error name\n * @param {Object|string} (options) - getUserMedia constraints object or\n * error message\n * @param {('audio'|'video'|'desktop'|'screen'|'audiooutput')[]} (devices) -\n * list of getUserMedia requested devices\n */\nfunction JitsiTrackError(error, options, devices) {\n    if (typeof error === 'object' && typeof error.name !== 'undefined') {\n        /**\n         * Additional information about original getUserMedia error\n         * and constraints.\n         * @type {{\n         *     error: Object,\n         *     constraints: Object,\n         *     devices: Array.<'audio'|'video'|'desktop'|'screen'>\n         * }}\n         */\n        this.gum = {\n            error,\n            constraints: options,\n            devices: devices && Array.isArray(devices)\n                ? devices.slice(0)\n                : undefined\n        };\n\n        switch (error.name) {\n        case 'NotAllowedError':\n        case 'PermissionDeniedError':\n        case 'SecurityError':\n            this.name = JitsiTrackErrors.PERMISSION_DENIED;\n            this.message\n                = TRACK_ERROR_TO_MESSAGE_MAP[this.name]\n                    + (this.gum.devices || []).join(', ');\n            break;\n        case 'DevicesNotFoundError':\n        case 'NotFoundError':\n            this.name = JitsiTrackErrors.NOT_FOUND;\n            this.message\n                = TRACK_ERROR_TO_MESSAGE_MAP[this.name]\n                    + (this.gum.devices || []).join(', ');\n            break;\n        case 'ConstraintNotSatisfiedError':\n        case 'OverconstrainedError': {\n            const constraintName = error.constraintName || error.constraint;\n\n            // we treat deviceId as unsupported resolution, as we want to\n            // retry and finally if everything fails to remove deviceId from\n            // mandatory constraints\n            if (options\n                    && options.video\n                    && (!devices || devices.indexOf('video') > -1)\n                    && (constraintName === 'minWidth'\n                        || constraintName === 'maxWidth'\n                        || constraintName === 'minHeight'\n                        || constraintName === 'maxHeight'\n                        || constraintName === 'width'\n                        || constraintName === 'height'\n                        || constraintName === 'deviceId')) {\n                this.name = JitsiTrackErrors.UNSUPPORTED_RESOLUTION;\n                this.message\n                    = TRACK_ERROR_TO_MESSAGE_MAP[this.name]\n                        + getResolutionFromFailedConstraint(\n                            constraintName,\n                            options);\n            } else {\n                this.name = JitsiTrackErrors.CONSTRAINT_FAILED;\n                this.message\n                    = TRACK_ERROR_TO_MESSAGE_MAP[this.name]\n                        + error.constraintName;\n            }\n            break;\n        }\n\n        default:\n            this.name = JitsiTrackErrors.GENERAL;\n            this.message\n                = error.message || TRACK_ERROR_TO_MESSAGE_MAP[this.name];\n            break;\n        }\n    } else if (typeof error === 'string') {\n        if (TRACK_ERROR_TO_MESSAGE_MAP[error]) {\n            this.name = error;\n            this.message = options || TRACK_ERROR_TO_MESSAGE_MAP[error];\n        } else {\n            // this is some generic error that do not fit any of our\n            // pre-defined errors, so don't give it any specific name, just\n            // store message\n            this.message = error;\n        }\n    } else {\n        throw new Error('Invalid arguments');\n    }\n\n    this.stack = error.stack || (new Error()).stack;\n}\n\nJitsiTrackError.prototype = Object.create(Error.prototype);\nJitsiTrackError.prototype.constructor = JitsiTrackError;\n\n/**\n * Gets failed resolution constraint from corresponding object.\n * @param {string} failedConstraintName\n * @param {Object} constraints\n * @returns {string|number}\n */\nfunction getResolutionFromFailedConstraint(failedConstraintName, constraints) {\n    if (constraints && constraints.video && constraints.video.mandatory) {\n        switch (failedConstraintName) {\n        case 'width':\n            return constraints.video.mandatory.minWidth;\n        case 'height':\n            return constraints.video.mandatory.minHeight;\n        default:\n            return constraints.video.mandatory[failedConstraintName] || '';\n        }\n    }\n\n    return '';\n}\n\nexport default JitsiTrackError;\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiTrackError.js","/* global module */\n/**\n * Enumeration of the video types\n * @type {{CAMERA: string, DESKTOP: string}}\n */\nconst VideoType = {\n    /**\n     * The camera video type.\n     */\n    CAMERA: 'camera',\n\n    /**\n     * The desktop video type.\n     */\n    DESKTOP: 'desktop'\n};\n\nmodule.exports = VideoType;\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/VideoType.js","import { getLogger } from 'jitsi-meet-logger';\nconst logger = getLogger(__filename);\n\nimport RandomUtil from '../util/RandomUtil';\nimport browser from '../browser';\n\nconst SDPUtil = {\n    filterSpecialChars(text) {\n        // XXX Neither one of the falsy values (e.g. null, undefined, false,\n        // \"\", etc.) \"contain\" special chars.\n        // eslint-disable-next-line no-useless-escape\n        return text ? text.replace(/[\\\\\\/\\{,\\}\\+]/g, '') : text;\n    },\n    iceparams(mediadesc, sessiondesc) {\n        let data = null;\n        let pwd, ufrag;\n\n        if ((ufrag = SDPUtil.findLine(mediadesc, 'a=ice-ufrag:', sessiondesc))\n                && (pwd\n                    = SDPUtil.findLine(\n                        mediadesc,\n                        'a=ice-pwd:',\n                        sessiondesc))) {\n            data = {\n                ufrag: SDPUtil.parseICEUfrag(ufrag),\n                pwd: SDPUtil.parseICEPwd(pwd)\n            };\n        }\n\n        return data;\n    },\n    parseICEUfrag(line) {\n        return line.substring(12);\n    },\n    buildICEUfrag(frag) {\n        return `a=ice-ufrag:${frag}`;\n    },\n    parseICEPwd(line) {\n        return line.substring(10);\n    },\n    buildICEPwd(pwd) {\n        return `a=ice-pwd:${pwd}`;\n    },\n    parseMID(line) {\n        return line.substring(6);\n    },\n    parseMLine(line) {\n        const data = {};\n        const parts = line.substring(2).split(' ');\n\n        data.media = parts.shift();\n        data.port = parts.shift();\n        data.proto = parts.shift();\n        if (parts[parts.length - 1] === '') { // trailing whitespace\n            parts.pop();\n        }\n        data.fmt = parts;\n\n        return data;\n    },\n    buildMLine(mline) {\n        return (\n            `m=${mline.media} ${mline.port} ${mline.proto} ${\n                mline.fmt.join(' ')}`);\n    },\n    parseRTPMap(line) {\n        const data = {};\n        let parts = line.substring(9).split(' ');\n\n        data.id = parts.shift();\n        parts = parts[0].split('/');\n        data.name = parts.shift();\n        data.clockrate = parts.shift();\n        data.channels = parts.length ? parts.shift() : '1';\n\n        return data;\n    },\n\n    /**\n     * Parses SDP line \"a=sctpmap:...\" and extracts SCTP port from it.\n     * @param line eg. \"a=sctpmap:5000 webrtc-datachannel\"\n     * @returns [SCTP port number, protocol, streams]\n     */\n    parseSCTPMap(line) {\n        const parts = line.substring(10).split(' ');\n        const sctpPort = parts[0];\n        const protocol = parts[1];\n\n        // Stream count is optional\n        const streamCount = parts.length > 2 ? parts[2] : null;\n\n\n        return [ sctpPort, protocol, streamCount ];// SCTP port\n    },\n    buildRTPMap(el) {\n        let line\n            = `a=rtpmap:${el.getAttribute('id')} ${el.getAttribute('name')}/${\n                el.getAttribute('clockrate')}`;\n\n        if (el.getAttribute('channels')\n            && el.getAttribute('channels') !== '1') {\n            line += `/${el.getAttribute('channels')}`;\n        }\n\n        return line;\n    },\n    parseCrypto(line) {\n        const data = {};\n        const parts = line.substring(9).split(' ');\n\n        data.tag = parts.shift();\n        data['crypto-suite'] = parts.shift();\n        data['key-params'] = parts.shift();\n        if (parts.length) {\n            data['session-params'] = parts.join(' ');\n        }\n\n        return data;\n    },\n    parseFingerprint(line) { // RFC 4572\n        const data = {};\n        const parts = line.substring(14).split(' ');\n\n        data.hash = parts.shift();\n        data.fingerprint = parts.shift();\n\n        // TODO assert that fingerprint satisfies 2UHEX *(\":\" 2UHEX) ?\n        return data;\n    },\n    parseFmtp(line) {\n        const data = [];\n        let parts = line.split(' ');\n\n        parts.shift();\n        parts = parts.join(' ').split(';');\n        for (let i = 0; i < parts.length; i++) {\n            let key = parts[i].split('=')[0];\n\n            while (key.length && key[0] === ' ') {\n                key = key.substring(1);\n            }\n            const value = parts[i].split('=')[1];\n\n            if (key && value) {\n                data.push({ name: key,\n                    value });\n            } else if (key) {\n                // rfc 4733 (DTMF) style stuff\n                data.push({ name: '',\n                    value: key });\n            }\n        }\n\n        return data;\n    },\n    parseICECandidate(line) {\n        const candidate = {};\n        const elems = line.split(' ');\n\n        candidate.foundation = elems[0].substring(12);\n        candidate.component = elems[1];\n        candidate.protocol = elems[2].toLowerCase();\n        candidate.priority = elems[3];\n        candidate.ip = elems[4];\n        candidate.port = elems[5];\n\n        // elems[6] => \"typ\"\n        candidate.type = elems[7];\n        candidate.generation = 0; // default value, may be overwritten below\n        for (let i = 8; i < elems.length; i += 2) {\n            switch (elems[i]) {\n            case 'raddr':\n                candidate['rel-addr'] = elems[i + 1];\n                break;\n            case 'rport':\n                candidate['rel-port'] = elems[i + 1];\n                break;\n            case 'generation':\n                candidate.generation = elems[i + 1];\n                break;\n            case 'tcptype':\n                candidate.tcptype = elems[i + 1];\n                break;\n            default: // TODO\n                logger.log(\n                    `parseICECandidate not translating \"${\n                        elems[i]}\" = \"${elems[i + 1]}\"`);\n            }\n        }\n        candidate.network = '1';\n\n        // not applicable to SDP -- FIXME: should be unique, not just random\n        // eslint-disable-next-line newline-per-chained-call\n        candidate.id = Math.random().toString(36).substr(2, 10);\n\n        return candidate;\n    },\n    buildICECandidate(cand) {\n        let line = [\n            `a=candidate:${cand.foundation}`,\n            cand.component,\n            cand.protocol,\n            cand.priority,\n            cand.ip,\n            cand.port,\n            'typ',\n            cand.type\n        ].join(' ');\n\n        line += ' ';\n        switch (cand.type) {\n        case 'srflx':\n        case 'prflx':\n        case 'relay':\n            if (cand.hasOwnAttribute('rel-addr')\n                    && cand.hasOwnAttribute('rel-port')) {\n                line += 'raddr';\n                line += ' ';\n                line += cand['rel-addr'];\n                line += ' ';\n                line += 'rport';\n                line += ' ';\n                line += cand['rel-port'];\n                line += ' ';\n            }\n            break;\n        }\n        if (cand.hasOwnAttribute('tcptype')) {\n            line += 'tcptype';\n            line += ' ';\n            line += cand.tcptype;\n            line += ' ';\n        }\n        line += 'generation';\n        line += ' ';\n        line += cand.hasOwnAttribute('generation') ? cand.generation : '0';\n\n        return line;\n    },\n    parseSSRC(desc) {\n        // proprietary mapping of a=ssrc lines\n        // TODO: see \"Jingle RTP Source Description\" by Juberti and P. Thatcher\n        // on google docs and parse according to that\n        const data = new Map();\n        const lines = desc.split('\\r\\n');\n\n        for (let i = 0; i < lines.length; i++) {\n            if (lines[i].substring(0, 7) === 'a=ssrc:') {\n                // FIXME: Use regex to smartly find the ssrc.\n                const ssrc = lines[i].split('a=ssrc:')[1].split(' ')[0];\n\n                if (!data.get(ssrc)) {\n                    data.set(ssrc, []);\n                }\n\n                data.get(ssrc).push(lines[i]);\n            }\n        }\n\n        return data;\n    },\n    parseRTCPFB(line) {\n        const parts = line.substr(10).split(' ');\n        const data = {};\n\n        data.pt = parts.shift();\n        data.type = parts.shift();\n        data.params = parts;\n\n        return data;\n    },\n    parseExtmap(line) {\n        const parts = line.substr(9).split(' ');\n        const data = {};\n\n        data.value = parts.shift();\n        if (data.value.indexOf('/') === -1) {\n            data.direction = 'both';\n        } else {\n            data.direction = data.value.substr(data.value.indexOf('/') + 1);\n            data.value = data.value.substr(0, data.value.indexOf('/'));\n        }\n        data.uri = parts.shift();\n        data.params = parts;\n\n        return data;\n    },\n    findLine(haystack, needle, sessionpart) {\n        let lines = haystack.split('\\r\\n');\n\n        for (let i = 0; i < lines.length; i++) {\n            if (lines[i].substring(0, needle.length) === needle) {\n                return lines[i];\n            }\n        }\n        if (!sessionpart) {\n            return false;\n        }\n\n        // search session part\n        lines = sessionpart.split('\\r\\n');\n        for (let j = 0; j < lines.length; j++) {\n            if (lines[j].substring(0, needle.length) === needle) {\n                return lines[j];\n            }\n        }\n\n        return false;\n    },\n    findLines(haystack, needle, sessionpart) {\n        let lines = haystack.split('\\r\\n');\n        const needles = [];\n\n        for (let i = 0; i < lines.length; i++) {\n            if (lines[i].substring(0, needle.length) === needle) {\n                needles.push(lines[i]);\n            }\n        }\n        if (needles.length || !sessionpart) {\n            return needles;\n        }\n\n        // search session part\n        lines = sessionpart.split('\\r\\n');\n        for (let j = 0; j < lines.length; j++) {\n            if (lines[j].substring(0, needle.length) === needle) {\n                needles.push(lines[j]);\n            }\n        }\n\n        return needles;\n    },\n    candidateToJingle(line) {\n        // a=candidate:2979166662 1 udp 2113937151 192.168.2.100 57698 typ host\n        // generation 0\n        //      <candidate component=... foundation=... generation=... id=...\n        // ip=... network=... port=... priority=... protocol=... type=.../>\n        if (line.indexOf('candidate:') === 0) {\n            // eslint-disable-next-line no-param-reassign\n            line = `a=${line}`;\n        } else if (line.substring(0, 12) !== 'a=candidate:') {\n            logger.log(\n                'parseCandidate called with a line that is not a candidate'\n                    + ' line');\n            logger.log(line);\n\n            return null;\n        }\n        if (line.substring(line.length - 2) === '\\r\\n') { // chomp it\n            // eslint-disable-next-line no-param-reassign\n            line = line.substring(0, line.length - 2);\n        }\n        const candidate = {};\n        const elems = line.split(' ');\n\n        if (elems[6] !== 'typ') {\n            logger.log('did not find typ in the right place');\n            logger.log(line);\n\n            return null;\n        }\n        candidate.foundation = elems[0].substring(12);\n        candidate.component = elems[1];\n        candidate.protocol = elems[2].toLowerCase();\n        candidate.priority = elems[3];\n        candidate.ip = elems[4];\n        candidate.port = elems[5];\n\n        // elems[6] => \"typ\"\n        candidate.type = elems[7];\n\n        candidate.generation = '0'; // default, may be overwritten below\n        for (let i = 8; i < elems.length; i += 2) {\n            switch (elems[i]) {\n            case 'raddr':\n                candidate['rel-addr'] = elems[i + 1];\n                break;\n            case 'rport':\n                candidate['rel-port'] = elems[i + 1];\n                break;\n            case 'generation':\n                candidate.generation = elems[i + 1];\n                break;\n            case 'tcptype':\n                candidate.tcptype = elems[i + 1];\n                break;\n            default: // TODO\n                logger.log(`not translating \"${elems[i]}\" = \"${elems[i + 1]}\"`);\n            }\n        }\n        candidate.network = '1';\n\n        // not applicable to SDP -- FIXME: should be unique, not just random\n        // eslint-disable-next-line newline-per-chained-call\n        candidate.id = Math.random().toString(36).substr(2, 10);\n\n        return candidate;\n    },\n    candidateFromJingle(cand) {\n        let line = 'a=candidate:';\n\n        line += cand.getAttribute('foundation');\n        line += ' ';\n        line += cand.getAttribute('component');\n        line += ' ';\n\n        let protocol = cand.getAttribute('protocol');\n\n        // use tcp candidates for FF\n\n        if (browser.isFirefox() && protocol.toLowerCase() === 'ssltcp') {\n            protocol = 'tcp';\n        }\n\n        line += protocol; // .toUpperCase(); // chrome M23 doesn't like this\n        line += ' ';\n        line += cand.getAttribute('priority');\n        line += ' ';\n        line += cand.getAttribute('ip');\n        line += ' ';\n        line += cand.getAttribute('port');\n        line += ' ';\n        line += 'typ';\n        line += ` ${cand.getAttribute('type')}`;\n        line += ' ';\n        switch (cand.getAttribute('type')) {\n        case 'srflx':\n        case 'prflx':\n        case 'relay':\n            if (cand.getAttribute('rel-addr')\n                    && cand.getAttribute('rel-port')) {\n                line += 'raddr';\n                line += ' ';\n                line += cand.getAttribute('rel-addr');\n                line += ' ';\n                line += 'rport';\n                line += ' ';\n                line += cand.getAttribute('rel-port');\n                line += ' ';\n            }\n            break;\n        }\n        if (protocol.toLowerCase() === 'tcp') {\n            line += 'tcptype';\n            line += ' ';\n            line += cand.getAttribute('tcptype');\n            line += ' ';\n        }\n        line += 'generation';\n        line += ' ';\n        line += cand.getAttribute('generation') || '0';\n\n        return `${line}\\r\\n`;\n    },\n\n    /**\n     * Parse the 'most' primary video ssrc from the given m line\n     * @param {object} mLine object as parsed from transform.parse\n     * @return {number} the primary video ssrc from the given m line\n     */\n    parsePrimaryVideoSsrc(videoMLine) {\n        const numSsrcs = videoMLine.ssrcs\n            .map(ssrcInfo => ssrcInfo.id)\n            .filter((ssrc, index, array) => array.indexOf(ssrc) === index)\n            .length;\n        const numGroups\n            = (videoMLine.ssrcGroups && videoMLine.ssrcGroups.length) || 0;\n\n        if (numSsrcs > 1 && numGroups === 0) {\n            // Ambiguous, can't figure out the primary\n            return;\n        }\n        let primarySsrc = null;\n\n        if (numSsrcs === 1) {\n            primarySsrc = videoMLine.ssrcs[0].id;\n        } else if (numSsrcs === 2) {\n            // Can figure it out if there's an FID group\n            const fidGroup\n                = videoMLine.ssrcGroups.find(\n                    group => group.semantics === 'FID');\n\n            if (fidGroup) {\n                primarySsrc = fidGroup.ssrcs.split(' ')[0];\n            }\n        } else if (numSsrcs >= 3) {\n            // Can figure it out if there's a sim group\n            const simGroup\n                = videoMLine.ssrcGroups.find(\n                    group => group.semantics === 'SIM');\n\n            if (simGroup) {\n                primarySsrc = simGroup.ssrcs.split(' ')[0];\n            }\n        }\n\n        return primarySsrc;\n    },\n\n    /**\n     * Generate an ssrc\n     * @returns {number} an ssrc\n     */\n    generateSsrc() {\n        return RandomUtil.randomInt(1, 0xffffffff);\n    },\n\n    /**\n     * Get an attribute for the given ssrc with the given attributeName\n     *  from the given mline\n     * @param {object} mLine an mLine object as parsed from transform.parse\n     * @param {number} ssrc the ssrc for which an attribtue is desired\n     * @param {string} attributeName the name of the desired attribute\n     * @returns {string} the value corresponding to the given ssrc\n     *  and attributeName\n     */\n    getSsrcAttribute(mLine, ssrc, attributeName) {\n        for (let i = 0; i < mLine.ssrcs.length; ++i) {\n            const ssrcLine = mLine.ssrcs[i];\n\n            if (ssrcLine.id === ssrc\n                && ssrcLine.attribute === attributeName) {\n                return ssrcLine.value;\n            }\n        }\n    },\n\n    /**\n     * Parses the ssrcs from the group sdp line and\n     *  returns them as a list of numbers\n     * @param {object} the ssrcGroup object as parsed from\n     *  sdp-transform\n     * @returns {list<number>} a list of the ssrcs in the group\n     *  parsed as numbers\n     */\n    parseGroupSsrcs(ssrcGroup) {\n        return ssrcGroup\n            .ssrcs\n            .split(' ')\n            .map(ssrcStr => parseInt(ssrcStr, 10));\n    },\n\n    /**\n     * Get the mline of the given type from the given sdp\n     * @param {object} sdp sdp as parsed from transform.parse\n     * @param {string} type the type of the desired mline (e.g. \"video\")\n     * @returns {object} a media object\n     */\n    getMedia(sdp, type) {\n        return sdp.media.find(m => m.type === type);\n    },\n\n    /**\n     * Extracts the ICE username fragment from an SDP string.\n     * @param {string} sdp the SDP in raw text format\n     */\n    getUfrag(sdp) {\n        const ufragLines\n            = sdp.split('\\n').filter(line => line.startsWith('a=ice-ufrag:'));\n\n        if (ufragLines.length > 0) {\n            return ufragLines[0].substr('a=ice-ufrag:'.length);\n        }\n    },\n\n    /**\n     * Sets the given codecName as the preferred codec by\n     *  moving it to the beginning of the payload types\n     *  list (modifies the given mline in place).  If there\n     *  are multiple options within the same codec (multiple h264\n     *  profiles, for instance), this will prefer the first one\n     *  that is found.\n     * @param {object} videoMLine the video mline object from\n     *  an sdp as parsed by transform.parse\n     * @param {string} codecName the name of the preferred codec\n     */\n    preferVideoCodec(videoMLine, codecName) {\n        let payloadType = null;\n\n        if (!videoMLine || !codecName) {\n            return;\n        }\n\n        for (let i = 0; i < videoMLine.rtp.length; ++i) {\n            const rtp = videoMLine.rtp[i];\n\n            if (rtp.codec\n                && rtp.codec.toLowerCase() === codecName.toLowerCase()) {\n                payloadType = rtp.payload;\n                break;\n            }\n        }\n        if (payloadType) {\n            // Call toString() on payloads to get around an issue within\n            // SDPTransform that sets payloads as a number, instead of a string,\n            // when there is only one payload.\n            const payloadTypes\n                = videoMLine.payloads\n                    .toString()\n                    .split(' ')\n                    .map(p => parseInt(p, 10));\n            const payloadIndex = payloadTypes.indexOf(payloadType);\n\n            payloadTypes.splice(payloadIndex, 1);\n            payloadTypes.unshift(payloadType);\n            videoMLine.payloads = payloadTypes.join(' ');\n        }\n    },\n\n    /**\n     * Strips the given codec from the given mline. All related RTX payload\n     * types are also stripped. If the resulting mline would have no codecs,\n     * it's disabled.\n     *\n     * @param {object} videoMLine the video mline object from an sdp as parsed\n     * by transform.parse.\n     * @param {string} codecName the name of the codec which will be stripped.\n     */\n    stripVideoCodec(videoMLine, codecName) {\n        if (!videoMLine || !codecName) {\n            return;\n        }\n\n        const removePts = [];\n\n        for (const rtp of videoMLine.rtp) {\n            if (rtp.codec\n                && rtp.codec.toLowerCase() === codecName.toLowerCase()) {\n                removePts.push(rtp.payload);\n            }\n        }\n\n        if (removePts.length > 0) {\n            // We also need to remove the payload types that are related to RTX\n            // for the codecs we want to disable.\n            const rtxApts = removePts.map(item => `apt=${item}`);\n            const rtxPts = videoMLine.fmtp.filter(\n                item => rtxApts.indexOf(item.config) !== -1);\n\n            removePts.push(...rtxPts.map(item => item.payload));\n\n            // Call toString() on payloads to get around an issue within\n            // SDPTransform that sets payloads as a number, instead of a string,\n            // when there is only one payload.\n            const allPts = videoMLine.payloads\n                .toString()\n                .split(' ')\n                .map(Number);\n            const keepPts = allPts.filter(pt => removePts.indexOf(pt) === -1);\n\n            if (keepPts.length === 0) {\n                // There are no other video codecs, disable the stream.\n                videoMLine.port = 0;\n                videoMLine.direction = 'inactive';\n                videoMLine.payloads = '*';\n            } else {\n                videoMLine.payloads = keepPts.join(' ');\n            }\n\n            videoMLine.rtp = videoMLine.rtp.filter(\n                item => keepPts.indexOf(item.payload) !== -1);\n            videoMLine.fmtp = videoMLine.fmtp.filter(\n                item => keepPts.indexOf(item.payload) !== -1);\n            if (videoMLine.rtcpFb) {\n                videoMLine.rtcpFb = videoMLine.rtcpFb.filter(\n                    item => keepPts.indexOf(item.payload) !== -1);\n            }\n        }\n    }\n};\n\nexport default SDPUtil;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SDPUtil.js","var parser = require('./parser');\nvar writer = require('./writer');\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseFmtpConfig = parser.parseFmtpConfig;\nexports.parseParams = parser.parseParams;\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/sdp-transform/lib/index.js\n// module id = 15\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/events/events.js\n// module id = 16\n// module chunks = 0","/**\n * The errors for the JitsiTrack objects.\n */\n\n/**\n * Generic error for jidesha extension for Chrome.\n */\nexport const CHROME_EXTENSION_GENERIC_ERROR\n    = 'gum.chrome_extension_generic_error';\n\n/**\n * An error which indicates that the jidesha extension for Chrome is\n * failed to install.\n */\nexport const CHROME_EXTENSION_INSTALLATION_ERROR\n    = 'gum.chrome_extension_installation_error';\n\n/**\n * This error indicates that the attempt to start screensharing was initiated by\n * a script which did not originate in user gesture handler. It means that\n * you should to trigger the action again in response to a button click for\n * example.\n * @type {string}\n */\nexport const CHROME_EXTENSION_USER_GESTURE_REQUIRED\n    = 'gum.chrome_extension_user_gesture_required';\n\n/**\n * An error which indicates that user canceled screen sharing window\n * selection dialog in jidesha extension for Chrome.\n */\nexport const CHROME_EXTENSION_USER_CANCELED\n    = 'gum.chrome_extension_user_canceled';\n\n/**\n * An error which indicates that some of requested constraints in\n * getUserMedia call were not satisfied.\n */\nexport const CONSTRAINT_FAILED = 'gum.constraint_failed';\n\n/**\n * A generic error which indicates an error occurred while selecting\n * a DesktopCapturerSource from the electron app.\n */\nexport const ELECTRON_DESKTOP_PICKER_ERROR\n    = 'gum.electron_desktop_picker_error';\n\n/**\n * An error which indicates a custom desktop picker could not be detected\n * for the electron app.\n */\nexport const ELECTRON_DESKTOP_PICKER_NOT_FOUND\n    = 'gum.electron_desktop_picker_not_found';\n\n/**\n * An error which indicates that the jidesha extension for Firefox is\n * needed to proceed with screen sharing, and that it is not installed.\n */\nexport const FIREFOX_EXTENSION_NEEDED = 'gum.firefox_extension_needed';\n\n/**\n * Generic getUserMedia error.\n */\nexport const GENERAL = 'gum.general';\n\n/**\n * An error which indicates that requested device was not found.\n */\nexport const NOT_FOUND = 'gum.not_found';\n\n/**\n * An error which indicates that user denied permission to share requested\n * device.\n */\nexport const PERMISSION_DENIED = 'gum.permission_denied';\n\n/**\n * An error which indicates that track has been already disposed and cannot\n * be longer used.\n */\nexport const TRACK_IS_DISPOSED = 'track.track_is_disposed';\n\n/**\n * An error which indicates that track has no MediaStream associated.\n */\nexport const TRACK_NO_STREAM_FOUND = 'track.no_stream_found';\n\n/**\n * An error which indicates that requested video resolution is not supported\n * by a webcam.\n */\nexport const UNSUPPORTED_RESOLUTION = 'gum.unsupported_resolution';\n\n/**\n * Indicates that the track is no receiving any data without reason(the\n * stream was stopped, etc)\n */\nexport const NO_DATA_FROM_SOURCE = 'track.no_data_from_source';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiTrackErrors.js","/**\n * The media track was removed to the conference.\n */\nexport const LOCAL_TRACK_STOPPED = 'track.stopped';\n\n/**\n * Audio levels of a this track was changed.\n * The first argument is a number with audio level value in range [0, 1].\n * The second argument is a <tt>TraceablePeerConnection</tt> which is the peer\n * connection which measured the audio level (one audio track can be added\n * to multiple peer connection at the same time). This argument is optional for\n * local tracks for which we can measure audio level without the peer\n * connection (the value will be <tt>undefined</tt>).\n *\n * NOTE The second argument should be treated as library internal and can be\n * removed at any time.\n */\nexport const TRACK_AUDIO_LEVEL_CHANGED = 'track.audioLevelsChanged';\n\n/**\n * The audio output of the track was changed.\n */\nexport const TRACK_AUDIO_OUTPUT_CHANGED = 'track.audioOutputChanged';\n\n/**\n * A media track mute status was changed.\n */\nexport const TRACK_MUTE_CHANGED = 'track.trackMuteChanged';\n\n/**\n * The video type(\"camera\" or \"desktop\") of the track was changed.\n */\nexport const TRACK_VIDEOTYPE_CHANGED = 'track.videoTypeChanged';\n\n/**\n * Indicates that the track is not receiving any data even though we expect it\n * to receive data (i.e. the stream is not stopped).\n */\nexport const NO_DATA_FROM_SOURCE = 'track.no_data_from_source';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiTrackEvents.js","/**\n * @const\n */\nconst ALPHANUM\n    = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n/**\n * Hexadecimal digits.\n * @const\n */\nconst HEX_DIGITS = '0123456789abcdef';\n\n/**\n * Generates random int within the range [min, max]\n * @param min the minimum value for the generated number\n * @param max the maximum value for the generated number\n * @returns random int number\n */\nfunction randomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n/**\n * Get random element from array or string.\n * @param {Array|string} arr source\n * @returns array element or string character\n */\nfunction randomElement(arr) {\n    return arr[randomInt(0, arr.length - 1)];\n}\n\n/**\n * Generate random alphanumeric string.\n * @param {number} length expected string length\n * @returns {string} random string of specified length\n */\nfunction randomAlphanumStr(length) {\n    let result = '';\n\n    for (let i = 0; i < length; i += 1) {\n        result += randomElement(ALPHANUM);\n    }\n\n    return result;\n}\n\n/**\n * Exported interface.\n */\nconst RandomUtil = {\n    /**\n     * Returns a random hex digit.\n     * @returns {*}\n     */\n    randomHexDigit() {\n        return randomElement(HEX_DIGITS);\n    },\n\n    /**\n     * Returns a random string of hex digits with length 'len'.\n     * @param len the length.\n     */\n    randomHexString(len) {\n        let ret = '';\n\n        while (len--) { // eslint-disable-line no-param-reassign\n            ret += this.randomHexDigit();\n        }\n\n        return ret;\n    },\n    randomElement,\n    randomAlphanumStr,\n    randomInt\n};\n\nmodule.exports = RandomUtil;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/RandomUtil.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 20\n// module chunks = 0","import Listenable from '../util/Listenable';\n\n/**\n * Creates ConnectionPlugin class that extends the passed class.\n * @param {Class} base the definition of the class that will be extended by\n * ConnectionPlugin\n */\nfunction getConnectionPluginDefinition(base = class {}) {\n    /**\n     * Base class for strophe connection plugins.\n     */\n    return class extends base {\n        /**\n         *\n         */\n        constructor(...args) {\n            super(...args);\n            this.connection = null;\n        }\n\n        /**\n         *\n         * @param connection\n         */\n        init(connection) {\n            this.connection = connection;\n        }\n    };\n}\n\n/**\n * ConnectionPlugin class.\n */\nexport default getConnectionPluginDefinition();\n\n/**\n * ConnectionPlugin class that extends Listenable.\n */\nexport const ConnectionPluginListenable\n    = getConnectionPluginDefinition(Listenable);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/ConnectionPlugin.js","/* global\n          __filename,\n          MediaStreamTrack,\n          RTCIceCandidate: true,\n          RTCPeerConnection,\n          RTCSessionDescription: true\n*/\n\nimport { AVAILABLE_DEVICE } from '../../service/statistics/AnalyticsEvents';\nimport CameraFacingMode from '../../service/RTC/CameraFacingMode';\nimport EventEmitter from 'events';\nimport { getLogger } from 'jitsi-meet-logger';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\nimport JitsiTrackError from '../../JitsiTrackError';\nimport Listenable from '../util/Listenable';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport Resolutions from '../../service/RTC/Resolutions';\nimport browser from '../browser';\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport ortcRTCPeerConnection from './ortc/RTCPeerConnection';\nimport screenObtainer from './ScreenObtainer';\nimport SDPUtil from '../xmpp/SDPUtil';\nimport Statistics from '../statistics/statistics';\nimport VideoType from '../../service/RTC/VideoType';\n\nconst logger = getLogger(__filename);\n\n// Require adapter only for certain browsers. This is being done for\n// react-native, which has its own shims, and while browsers are being migrated\n// over to use adapter's shims.\nif (browser.usesAdapter()) {\n    require('webrtc-adapter');\n}\n\nconst eventEmitter = new EventEmitter();\n\nconst AVAILABLE_DEVICES_POLL_INTERVAL_TIME = 3000; // ms\n\n/**\n * Default resolution to obtain for video tracks if no resolution is specified.\n * This default is used for old gum flow only, as new gum flow uses\n * {@link DEFAULT_CONSTRAINTS}.\n */\nconst OLD_GUM_DEFAULT_RESOLUTION = 720;\n\n/**\n * Default devices to obtain when no specific devices are specified. This\n * default is used for old gum flow only.\n */\nconst OLD_GUM_DEFAULT_DEVICES = [ 'audio', 'video' ];\n\n/**\n * Default MediaStreamConstraints to use for calls to getUserMedia.\n *\n * @private\n */\nconst DEFAULT_CONSTRAINTS = {\n    video: {\n        aspectRatio: 16 / 9,\n        height: {\n            ideal: 720,\n            max: 720,\n            min: 240\n        }\n    }\n};\n\n\n// TODO (brian): Move this devices hash, maybe to a model, so RTCUtils remains\n// stateless.\nconst devices = {\n    audio: false,\n    video: false\n};\n\n/**\n * The default frame rate for Screen Sharing.\n */\nconst SS_DEFAULT_FRAME_RATE = 5;\n\n// Currently audio output device change is supported only in Chrome and\n// default output always has 'default' device ID\nlet audioOutputDeviceId = 'default'; // default device\n// whether user has explicitly set a device to use\nlet audioOutputChanged = false;\n\n// Disables all audio processing\nlet disableAP = false;\n\n// Disables Acoustic Echo Cancellation\nlet disableAEC = false;\n\n// Disables Noise Suppression\nlet disableNS = false;\n\n// Disables Automatic Gain Control\nlet disableAGC = false;\n\n// Disables Highpass Filter\nlet disableHPF = false;\n\nconst featureDetectionAudioEl = document.createElement('audio');\nconst isAudioOutputDeviceChangeAvailable\n    = typeof featureDetectionAudioEl.setSinkId !== 'undefined';\n\nlet availableDevices;\nlet availableDevicesPollTimer;\n\n/**\n * Initialize wrapper function for enumerating devices.\n * TODO: remove this, it should no longer be needed.\n *\n * @returns {?Function}\n */\nfunction initEnumerateDevicesWithCallback() {\n    if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {\n        return callback => {\n            navigator.mediaDevices.enumerateDevices()\n                .then(callback, () => callback([]));\n        };\n    }\n}\n\n/**\n *\n * @param constraints\n * @param isNewStyleConstraintsSupported\n * @param resolution\n */\nfunction setResolutionConstraints(\n        constraints,\n        isNewStyleConstraintsSupported,\n        resolution) {\n    if (Resolutions[resolution]) {\n        if (isNewStyleConstraintsSupported) {\n            constraints.video.width = {\n                ideal: Resolutions[resolution].width\n            };\n            constraints.video.height = {\n                ideal: Resolutions[resolution].height\n            };\n        }\n\n        constraints.video.mandatory.minWidth = Resolutions[resolution].width;\n        constraints.video.mandatory.minHeight = Resolutions[resolution].height;\n    }\n\n    if (constraints.video.mandatory.minWidth) {\n        constraints.video.mandatory.maxWidth\n            = constraints.video.mandatory.minWidth;\n    }\n\n    if (constraints.video.mandatory.minHeight) {\n        constraints.video.mandatory.maxHeight\n            = constraints.video.mandatory.minHeight;\n    }\n}\n\n/**\n * @param {string[]} um required user media types\n *\n * @param {Object} [options={}] optional parameters\n * @param {string} options.resolution\n * @param {number} options.bandwidth\n * @param {number} options.fps\n * @param {string} options.desktopStream\n * @param {string} options.cameraDeviceId\n * @param {string} options.micDeviceId\n * @param {CameraFacingMode} options.facingMode\n * @param {bool} firefox_fake_device\n * @param {Object} options.frameRate - used only for dekstop sharing.\n * @param {Object} options.frameRate.min - Minimum fps\n * @param {Object} options.frameRate.max - Maximum fps\n */\nfunction getConstraints(um, options = {}) {\n    const constraints = {\n        audio: false,\n        video: false\n    };\n\n    // Don't mix new and old style settings for Chromium as this leads\n    // to TypeError in new Chromium versions. @see\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=614716\n    // This is a temporary solution, in future we will fully split old and\n    // new style constraints when new versions of Chromium and Firefox will\n    // have stable support of new constraints format. For more information\n    // @see https://github.com/jitsi/lib-jitsi-meet/pull/136\n    const isNewStyleConstraintsSupported\n        = browser.isFirefox()\n            || browser.isEdge()\n            || browser.isReactNative();\n\n    if (um.indexOf('video') >= 0) {\n        // same behaviour as true\n        constraints.video = { mandatory: {},\n            optional: [] };\n\n        if (options.cameraDeviceId) {\n            if (isNewStyleConstraintsSupported) {\n                // New style of setting device id.\n                constraints.video.deviceId = options.cameraDeviceId;\n            }\n\n            // Old style.\n            constraints.video.mandatory.sourceId = options.cameraDeviceId;\n        } else {\n            // Prefer the front i.e. user-facing camera (to the back i.e.\n            // environment-facing camera, for example).\n            // TODO: Maybe use \"exact\" syntax if options.facingMode is defined,\n            // but this probably needs to be decided when updating other\n            // constraints, as we currently don't use \"exact\" syntax anywhere.\n            const facingMode = options.facingMode || CameraFacingMode.USER;\n\n            if (isNewStyleConstraintsSupported) {\n                constraints.video.facingMode = facingMode;\n            }\n            constraints.video.optional.push({\n                facingMode\n            });\n        }\n\n        if (options.minFps || options.maxFps || options.fps) {\n            // for some cameras it might be necessary to request 30fps\n            // so they choose 30fps mjpg over 10fps yuy2\n            if (options.minFps || options.fps) {\n                // Fall back to options.fps for backwards compatibility\n                options.minFps = options.minFps || options.fps;\n                constraints.video.mandatory.minFrameRate = options.minFps;\n            }\n            if (options.maxFps) {\n                constraints.video.mandatory.maxFrameRate = options.maxFps;\n            }\n        }\n\n        setResolutionConstraints(\n            constraints, isNewStyleConstraintsSupported, options.resolution);\n    }\n    if (um.indexOf('audio') >= 0) {\n        if (browser.isReactNative()) {\n            // The react-native-webrtc project that we're currently using\n            // expects the audio constraint to be a boolean.\n            constraints.audio = true;\n        } else if (browser.isFirefox()) {\n            if (options.micDeviceId) {\n                constraints.audio = {\n                    mandatory: {},\n                    deviceId: options.micDeviceId, // new style\n                    optional: [ {\n                        sourceId: options.micDeviceId // old style\n                    } ] };\n            } else {\n                constraints.audio = true;\n            }\n        } else {\n            // same behaviour as true\n            constraints.audio = { mandatory: {},\n                optional: [] };\n            if (options.micDeviceId) {\n                if (isNewStyleConstraintsSupported) {\n                    // New style of setting device id.\n                    constraints.audio.deviceId = options.micDeviceId;\n                }\n\n                // Old style.\n                constraints.audio.optional.push({\n                    sourceId: options.micDeviceId\n                });\n            }\n\n            // if it is good enough for hangouts...\n            constraints.audio.optional.push(\n                { echoCancellation: !disableAEC && !disableAP },\n                { googEchoCancellation: !disableAEC && !disableAP },\n                { googAutoGainControl: !disableAGC && !disableAP },\n                { googNoiseSuppression: !disableNS && !disableAP },\n                { googHighpassFilter: !disableHPF && !disableAP },\n                { googNoiseSuppression2: !disableNS && !disableAP },\n                { googEchoCancellation2: !disableAEC && !disableAP },\n                { googAutoGainControl2: !disableAGC && !disableAP }\n            );\n        }\n    }\n    if (um.indexOf('screen') >= 0) {\n        if (browser.isChrome()) {\n            constraints.video = {\n                mandatory: getSSConstraints({\n                    ...options,\n                    source: 'screen'\n                }),\n                optional: []\n            };\n\n        } else if (browser.isFirefox()) {\n            constraints.video = {\n                mozMediaSource: 'window',\n                mediaSource: 'window',\n                frameRate: options.frameRate || {\n                    min: SS_DEFAULT_FRAME_RATE,\n                    max: SS_DEFAULT_FRAME_RATE\n                }\n            };\n\n        } else {\n            const errmsg\n                = '\\'screen\\' WebRTC media source is supported only in Chrome'\n                    + ' and Firefox';\n\n            GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n            logger.error(errmsg);\n        }\n    }\n    if (um.indexOf('desktop') >= 0) {\n        constraints.video = {\n            mandatory: getSSConstraints({\n                ...options,\n                source: 'desktop'\n            }),\n            optional: []\n        };\n    }\n\n    if (options.bandwidth) {\n        if (!constraints.video) {\n            // same behaviour as true\n            constraints.video = { mandatory: {},\n                optional: [] };\n        }\n        constraints.video.optional.push({ bandwidth: options.bandwidth });\n    }\n\n    // we turn audio for both audio and video tracks, the fake audio & video\n    // seems to work only when enabled in one getUserMedia call, we cannot get\n    // fake audio separate by fake video this later can be a problem with some\n    // of the tests\n    if (browser.isFirefox() && options.firefox_fake_device) {\n        // seems to be fixed now, removing this experimental fix, as having\n        // multiple audio tracks brake the tests\n        // constraints.audio = true;\n        constraints.fake = true;\n    }\n\n    return constraints;\n}\n\n/**\n * Creates a constraints object to be passed into a call to getUserMedia.\n *\n * @param {Array} um - An array of user media types to get. The accepted\n * types are \"video\", \"audio\", and \"desktop.\"\n * @param {Object} options - Various values to be added to the constraints.\n * @param {string} options.cameraDeviceId - The device id for the video\n * capture device to get video from.\n * @param {Object} options.constraints - Default constraints object to use\n * as a base for the returned constraints.\n * @param {Object} options.desktopStream - The desktop source id from which\n * to capture a desktop sharing video.\n * @param {string} options.facingMode - Which direction the camera is\n * pointing to.\n * @param {string} options.micDeviceId - The device id for the audio capture\n * device to get audio from.\n * @param {Object} options.frameRate - used only for dekstop sharing.\n * @param {Object} options.frameRate.min - Minimum fps\n * @param {Object} options.frameRate.max - Maximum fps\n * @private\n * @returns {Object}\n */\nfunction newGetConstraints(um = [], options = {}) {\n    // Create a deep copy of the constraints to avoid any modification of\n    // the passed in constraints object.\n    const constraints = JSON.parse(JSON.stringify(\n        options.constraints || DEFAULT_CONSTRAINTS));\n\n    if (um.indexOf('video') >= 0) {\n        if (!constraints.video) {\n            constraints.video = {};\n        }\n\n        if (options.cameraDeviceId) {\n            constraints.video.deviceId = options.cameraDeviceId;\n        } else {\n            const facingMode = options.facingMode || CameraFacingMode.USER;\n\n            constraints.video.facingMode = facingMode;\n        }\n    } else {\n        constraints.video = false;\n    }\n\n    if (um.indexOf('audio') >= 0) {\n        if (!constraints.audio || typeof constraints.audio === 'boolean') {\n            constraints.audio = {};\n        }\n\n        // NOTE(brian): the new-style ('advanced' instead of 'optional')\n        // doesn't seem to carry through the googXXX constraints\n        // Changing back to 'optional' here (even with video using\n        // the 'advanced' style) allows them to be passed through\n        // but also requires the device id to capture to be set in optional\n        // as sourceId otherwise the constraints are considered malformed.\n        if (!constraints.audio.optional) {\n            constraints.audio.optional = [];\n        }\n\n        constraints.audio.optional.push(\n            { sourceId: options.micDeviceId },\n            { echoCancellation: !disableAEC && !disableAP },\n            { googEchoCancellation: !disableAEC && !disableAP },\n            { googAutoGainControl: !disableAGC && !disableAP },\n            { googNoiseSuppression: !disableNS && !disableAP },\n            { googHighpassFilter: !disableHPF && !disableAP },\n            { googNoiseSuppression2: !disableNS && !disableAP },\n            { googEchoCancellation2: !disableAEC && !disableAP },\n            { googAutoGainControl2: !disableAGC && !disableAP }\n        );\n    } else {\n        constraints.audio = false;\n    }\n\n    if (um.indexOf('desktop') >= 0) {\n        if (!constraints.video || typeof constraints.video === 'boolean') {\n            constraints.video = {};\n        }\n\n        constraints.video = {\n            mandatory: getSSConstraints({\n                ...options,\n                source: 'desktop'\n            })\n        };\n    }\n\n    return constraints;\n}\n\n/**\n * Generates GUM constraints for screen sharing.\n *\n * @param {Object} options - The options passed to\n * <tt>obtainAudioAndVideoPermissions</tt>.\n * @returns {Object} - GUM constraints.\n *\n * TODO: Currently only the new GUM flow and Chrome is using the method. We\n * should make it work for all use cases.\n */\nfunction getSSConstraints(options = {}) {\n    const {\n        desktopStream,\n        frameRate = {\n            min: SS_DEFAULT_FRAME_RATE,\n            max: SS_DEFAULT_FRAME_RATE\n        }\n    } = options;\n    const { max, min } = frameRate;\n\n    const constraints = {\n        chromeMediaSource: options.source,\n        maxWidth: window.screen.width,\n        maxHeight: window.screen.height\n    };\n\n    if (typeof min === 'number') {\n        constraints.minFrameRate = min;\n    }\n\n    if (typeof max === 'number') {\n        constraints.maxFrameRate = max;\n    }\n\n    if (typeof desktopStream !== 'undefined') {\n        constraints.chromeMediaSourceId = desktopStream;\n    }\n\n    return constraints;\n}\n\n/**\n * Generates constraints for screen sharing when using getDisplayMedia.\n * The constraints(MediaTrackConstraints) are applied to the resulting track.\n *\n * @returns {Object} - MediaTrackConstraints constraints.\n */\nfunction getTrackSSConstraints(options = {}) {\n    // we used to set height and width in the constraints, but this can lead\n    // to inconsistencies if the browser is on a lower resolution screen\n    // and we share a screen with bigger resolution, so they are now not set\n    const constraints = {\n        frameRate: SS_DEFAULT_FRAME_RATE\n    };\n    const { desktopSharingFrameRate } = options;\n\n    if (desktopSharingFrameRate && desktopSharingFrameRate.max) {\n        constraints.frameRate = desktopSharingFrameRate.max;\n    }\n\n    return constraints;\n}\n\n/**\n * Sets the availbale devices based on the options we requested and the\n * streams we received.\n * @param um the options we requested to getUserMedia.\n * @param stream the stream we received from calling getUserMedia.\n */\nfunction setAvailableDevices(um, stream) {\n    const audioTracksReceived = stream && stream.getAudioTracks().length > 0;\n    const videoTracksReceived = stream && stream.getVideoTracks().length > 0;\n\n    if (um.indexOf('video') !== -1) {\n        devices.video = videoTracksReceived;\n    }\n    if (um.indexOf('audio') !== -1) {\n        devices.audio = audioTracksReceived;\n    }\n\n    eventEmitter.emit(RTCEvents.AVAILABLE_DEVICES_CHANGED, devices);\n}\n\n/**\n * Checks if new list of available media devices differs from previous one.\n * @param {MediaDeviceInfo[]} newDevices - list of new devices.\n * @returns {boolean} - true if list is different, false otherwise.\n */\nfunction compareAvailableMediaDevices(newDevices) {\n    if (newDevices.length !== availableDevices.length) {\n        return true;\n    }\n\n    /* eslint-disable newline-per-chained-call */\n\n    return (\n        newDevices.map(mediaDeviceInfoToJSON).sort().join('')\n            !== availableDevices\n                .map(mediaDeviceInfoToJSON).sort().join(''));\n\n    /* eslint-enable newline-per-chained-call */\n\n    /**\n     *\n     * @param info\n     */\n    function mediaDeviceInfoToJSON(info) {\n        return JSON.stringify({\n            kind: info.kind,\n            deviceId: info.deviceId,\n            groupId: info.groupId,\n            label: info.label,\n            facing: info.facing\n        });\n    }\n}\n\n/**\n * Sends analytics event with the passed device list.\n *\n * @param {Array<MediaDeviceInfo>} deviceList - List with info about the\n * available devices.\n * @returns {void}\n */\nfunction sendDeviceListToAnalytics(deviceList) {\n    const audioInputDeviceCount\n        = deviceList.filter(d => d.kind === 'audioinput').length;\n    const audioOutputDeviceCount\n        = deviceList.filter(d => d.kind === 'audiooutput').length;\n    const videoInputDeviceCount\n        = deviceList.filter(d => d.kind === 'videoinput').length;\n    const videoOutputDeviceCount\n        = deviceList.filter(d => d.kind === 'videooutput').length;\n\n    deviceList.forEach(device => {\n        const attributes = {\n            'audio_input_device_count': audioInputDeviceCount,\n            'audio_output_device_count': audioOutputDeviceCount,\n            'video_input_device_count': videoInputDeviceCount,\n            'video_output_device_count': videoOutputDeviceCount,\n            'device_id': device.deviceId,\n            'device_group_id': device.groupId,\n            'device_kind': device.kind,\n            'device_label': device.label\n        };\n\n        Statistics.sendAnalytics(AVAILABLE_DEVICE, attributes);\n    });\n}\n\n/**\n * Event handler for the 'devicechange' event.\n *\n * @param {MediaDeviceInfo[]} devices - list of media devices.\n * @emits RTCEvents.DEVICE_LIST_CHANGED\n */\nfunction onMediaDevicesListChanged(devicesReceived) {\n    availableDevices = devicesReceived.slice(0);\n    logger.info(\n        'list of media devices has changed:',\n        availableDevices);\n\n    sendDeviceListToAnalytics(availableDevices);\n\n    const videoInputDevices\n        = availableDevices.filter(d => d.kind === 'videoinput');\n    const audioInputDevices\n        = availableDevices.filter(d => d.kind === 'audioinput');\n    const videoInputDevicesWithEmptyLabels\n        = videoInputDevices.filter(d => d.label === '');\n    const audioInputDevicesWithEmptyLabels\n        = audioInputDevices.filter(d => d.label === '');\n\n    if (videoInputDevices.length\n            && videoInputDevices.length\n                === videoInputDevicesWithEmptyLabels.length) {\n        devices.video = false;\n    }\n\n    if (audioInputDevices.length\n            && audioInputDevices.length\n                === audioInputDevicesWithEmptyLabels.length) {\n        devices.audio = false;\n    }\n\n    eventEmitter.emit(RTCEvents.DEVICE_LIST_CHANGED, devicesReceived);\n}\n\n/**\n * Handles the newly created Media Streams.\n * @param streams the new Media Streams\n * @param resolution the resolution of the video streams\n * @returns {*[]} object that describes the new streams\n */\nfunction handleLocalStream(streams, resolution) {\n    let audioStream, desktopStream, videoStream;\n    const res = [];\n\n    // XXX The function obtainAudioAndVideoPermissions has examined the type of\n    // the browser, its capabilities, etc. and has taken the decision whether to\n    // invoke getUserMedia per device (e.g. Firefox) or once for both audio and\n    // video (e.g. Chrome). In order to not duplicate the logic here, examine\n    // the specified streams and figure out what we've received based on\n    // obtainAudioAndVideoPermissions' decision.\n    if (streams) {\n        // As mentioned above, certian types of browser (e.g. Chrome) support\n        // (with a result which meets our requirements expressed bellow) calling\n        // getUserMedia once for both audio and video.\n        const audioVideo = streams.audioVideo;\n\n        if (audioVideo) {\n            const audioTracks = audioVideo.getAudioTracks();\n\n            if (audioTracks.length) {\n                audioStream = new MediaStream();\n                for (let i = 0; i < audioTracks.length; i++) {\n                    audioStream.addTrack(audioTracks[i]);\n                }\n            }\n\n            const videoTracks = audioVideo.getVideoTracks();\n\n            if (videoTracks.length) {\n                videoStream = new MediaStream();\n                for (let j = 0; j < videoTracks.length; j++) {\n                    videoStream.addTrack(videoTracks[j]);\n                }\n            }\n        } else {\n            // On other types of browser (e.g. Firefox) we choose (namely,\n            // obtainAudioAndVideoPermissions) to call getUserMedia per device\n            // (type).\n            audioStream = streams.audio;\n            videoStream = streams.video;\n        }\n\n        desktopStream = streams.desktop;\n    }\n\n    if (desktopStream) {\n        const { stream, sourceId, sourceType } = desktopStream;\n\n        res.push({\n            stream,\n            sourceId,\n            sourceType,\n            track: stream.getVideoTracks()[0],\n            mediaType: MediaType.VIDEO,\n            videoType: VideoType.DESKTOP\n        });\n    }\n    if (audioStream) {\n        res.push({\n            stream: audioStream,\n            track: audioStream.getAudioTracks()[0],\n            mediaType: MediaType.AUDIO,\n            videoType: null\n        });\n    }\n    if (videoStream) {\n        res.push({\n            stream: videoStream,\n            track: videoStream.getVideoTracks()[0],\n            mediaType: MediaType.VIDEO,\n            videoType: VideoType.CAMERA,\n            resolution\n        });\n    }\n\n    return res;\n}\n\n/**\n * Represents a default implementation of setting a <tt>MediaStream</tt> as the\n * source of a video element that tries to be browser-agnostic through feature\n * checking. Note though that it was not completely clear from the predating\n * browser-specific implementations what &quot;videoSrc&quot; was because one\n * implementation of {@link RTCUtils#getVideoSrc} would return\n * <tt>MediaStream</tt> (e.g. Firefox), another a <tt>string</tt> representation\n * of the <tt>URL</tt> of the <tt>MediaStream</tt> (e.g. Chrome) and the return\n * value was only used by {@link RTCUIHelper#getVideoId} which itself did not\n * appear to be used anywhere. Generally, the implementation will try to follow\n * the related standards i.e. work with the <tt>srcObject</tt> and <tt>src</tt>\n * properties of the specified <tt>element</tt> taking into account vender\n * prefixes.\n *\n * @param element the element whose video source/src is to be set to the\n * specified <tt>stream</tt>\n * @param {MediaStream} stream the <tt>MediaStream</tt> to set as the video\n * source/src of <tt>element</tt>\n */\nfunction defaultSetVideoSrc(element, stream) {\n    // srcObject\n    let srcObjectPropertyName = 'srcObject';\n\n    if (!(srcObjectPropertyName in element)) {\n        srcObjectPropertyName = 'mozSrcObject';\n        if (!(srcObjectPropertyName in element)) {\n            srcObjectPropertyName = null;\n        }\n    }\n    if (srcObjectPropertyName) {\n        element[srcObjectPropertyName] = stream;\n\n        return;\n    }\n\n    // src\n    let src;\n\n    if (stream) {\n        src = stream.jitsiObjectURL;\n\n        // Save the created URL for stream so we can reuse it and not keep\n        // creating URLs.\n        if (!src) {\n            stream.jitsiObjectURL = src = URL.createObjectURL(stream);\n        }\n    }\n    element.src = src || '';\n}\n\n/**\n *\n */\nclass RTCUtils extends Listenable {\n    /**\n     *\n     */\n    constructor() {\n        super(eventEmitter);\n    }\n\n    /**\n     * Depending on the browser, sets difference instance methods for\n     * interacting with user media and adds methods to native WebRTC-related\n     * objects. Also creates an instance variable for peer connection\n     * constraints.\n     *\n     * @param {Object} options\n     * @returns {void}\n     */\n    init(options = {}) {\n        if (typeof options.disableAEC === 'boolean') {\n            disableAEC = options.disableAEC;\n            logger.info(`Disable AEC: ${disableAEC}`);\n        }\n        if (typeof options.disableNS === 'boolean') {\n            disableNS = options.disableNS;\n            logger.info(`Disable NS: ${disableNS}`);\n        }\n        if (typeof options.disableAP === 'boolean') {\n            disableAP = options.disableAP;\n            logger.info(`Disable AP: ${disableAP}`);\n        }\n        if (typeof options.disableAGC === 'boolean') {\n            disableAGC = options.disableAGC;\n            logger.info(`Disable AGC: ${disableAGC}`);\n        }\n        if (typeof options.disableHPF === 'boolean') {\n            disableHPF = options.disableHPF;\n            logger.info(`Disable HPF: ${disableHPF}`);\n        }\n\n        availableDevices = undefined;\n        window.clearInterval(availableDevicesPollTimer);\n        availableDevicesPollTimer = undefined;\n\n        this.enumerateDevices = initEnumerateDevicesWithCallback();\n\n        if (browser.usesNewGumFlow()) {\n            this.RTCPeerConnectionType = RTCPeerConnection;\n\n            this.attachMediaStream\n                = wrapAttachMediaStream((element, stream) => {\n                    if (element) {\n                        element.srcObject = stream;\n                    }\n                });\n\n            this.getStreamID = ({ id }) => id;\n            this.getTrackID = ({ id }) => id;\n        } else if (browser.isChrome() // this is chrome < 61\n                || browser.isOpera()\n                || browser.isNWJS()\n                || browser.isElectron()\n                || browser.isReactNative()) {\n\n            this.RTCPeerConnectionType = RTCPeerConnection;\n\n            this.attachMediaStream\n                = wrapAttachMediaStream((element, stream) => {\n                    defaultSetVideoSrc(element, stream);\n\n                    return element;\n                });\n\n            this.getStreamID = function({ id }) {\n                // A. MediaStreams from FF endpoints have the characters '{' and\n                // '}' that make jQuery choke.\n                // B. The react-native-webrtc implementation that we use at the\n                // time of this writing returns a number for the id of\n                // MediaStream. Let's just say that a number contains no special\n                // characters.\n                return (\n                    typeof id === 'number'\n                        ? id\n                        : SDPUtil.filterSpecialChars(id));\n            };\n            this.getTrackID = ({ id }) => id;\n\n            if (!MediaStream.prototype.getVideoTracks) {\n                MediaStream.prototype.getVideoTracks = function() {\n                    return this.videoTracks;\n                };\n            }\n            if (!MediaStream.prototype.getAudioTracks) {\n                MediaStream.prototype.getAudioTracks = function() {\n                    return this.audioTracks;\n                };\n            }\n        } else if (browser.isEdge()) {\n            this.RTCPeerConnectionType = ortcRTCPeerConnection;\n\n            this.attachMediaStream\n                = wrapAttachMediaStream((element, stream) => {\n                    defaultSetVideoSrc(element, stream);\n                });\n\n            // ORTC does not generate remote MediaStreams so those are\n            // manually created by the ORTC shim. This means that their\n            // id (internally generated) does not match the stream id\n            // signaled into the remote SDP. Therefore, the shim adds a\n            // custom jitsiRemoteId property with the original stream id.\n            this.getStreamID = function(stream) {\n                const id = stream.jitsiRemoteId || stream.id;\n\n                return SDPUtil.filterSpecialChars(id);\n            };\n\n            // Remote MediaStreamTracks generated by ORTC (within a\n            // RTCRtpReceiver) have an internally/random id which does not match\n            // the track id signaled in the remote SDP. The shim adds a custom\n            // jitsi-id property with the original track id.\n            this.getTrackID = track => track.jitsiRemoteId || track.id;\n        } else {\n            const message = 'Endpoint does not appear to be WebRTC-capable';\n\n            logger.error(message);\n            throw new Error(message);\n        }\n\n        this._initPCConstraints(options);\n\n        screenObtainer.init(\n            options,\n            this.getUserMediaWithConstraints.bind(this));\n\n        if (this.isDeviceListAvailable()) {\n            this.enumerateDevices(ds => {\n                availableDevices = ds.splice(0);\n\n                logger.debug('Available devices: ', availableDevices);\n                sendDeviceListToAnalytics(availableDevices);\n\n                eventEmitter.emit(\n                    RTCEvents.DEVICE_LIST_AVAILABLE,\n                    availableDevices);\n\n\n                // Use a shared callback to handle both the devicechange event\n                // and the polling implementations. This prevents duplication\n                // and works around a chrome bug (verified to occur on 68) where\n                // devicechange fires twice in a row, which can cause async post\n                // devicechange processing to collide.\n                const updateKnownDevices = () => this.enumerateDevices(pds => {\n                    if (compareAvailableMediaDevices(pds)) {\n                        onMediaDevicesListChanged(pds);\n                    }\n                });\n\n                if (browser.supportsDeviceChangeEvent()) {\n                    navigator.mediaDevices.addEventListener(\n                        'devicechange',\n                        updateKnownDevices);\n                } else {\n                    // Periodically poll enumerateDevices() method to check if\n                    // list of media devices has changed.\n                    availableDevicesPollTimer = window.setInterval(\n                        updateKnownDevices,\n                        AVAILABLE_DEVICES_POLL_INTERVAL_TIME);\n                }\n            });\n        }\n    }\n\n    /**\n     * Creates instance objects for peer connection constraints both for p2p\n     * and outside of p2p.\n     *\n     * @params {Object} options - Configuration for setting RTCUtil's instance\n     * objects for peer connection constraints.\n     * @params {boolean} options.useIPv6 - Set to true if IPv6 should be used.\n     * @params {boolean} options.disableSuspendVideo - Whether or not video\n     * should become suspended if bandwidth estimation becomes low.\n     * @params {Object} options.testing - Additional configuration for work in\n     * development.\n     * @params {Object} options.testing.forceP2PSuspendVideoRatio - True if\n     * video should become suspended if bandwidth estimation becomes low while\n     * in peer to peer connection mode.\n     */\n    _initPCConstraints(options) {\n        if (browser.isFirefox()) {\n            this.pcConstraints = {};\n        } else if (browser.isChrome()\n            || browser.isOpera()\n            || browser.isNWJS()\n            || browser.isElectron()\n            || browser.isReactNative()) {\n            this.pcConstraints = { optional: [\n                { googHighStartBitrate: 0 },\n                { googPayloadPadding: true },\n                { googScreencastMinBitrate: 400 },\n                { googCpuOveruseDetection: true },\n                { googCpuOveruseEncodeUsage: true },\n                { googCpuUnderuseThreshold: 55 },\n                { googCpuOveruseThreshold: 85 }\n            ] };\n\n            if (options.useIPv6) {\n                // https://code.google.com/p/webrtc/issues/detail?id=2828\n                this.pcConstraints.optional.push({ googIPv6: true });\n            }\n\n            this.p2pPcConstraints\n                = JSON.parse(JSON.stringify(this.pcConstraints));\n\n            // Allows sending of video to be suspended if the bandwidth\n            // estimation is too low.\n            if (!options.disableSuspendVideo) {\n                this.pcConstraints.optional.push(\n                    { googSuspendBelowMinBitrate: true });\n            }\n\n            // There's no reason not to use this for p2p\n            this.p2pPcConstraints.optional.push({\n                googSuspendBelowMinBitrate: true\n            });\n        }\n\n        this.p2pPcConstraints = this.p2pPcConstraints || this.pcConstraints;\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n    * @param {string[]} um required user media types\n    * @param {Object} [options] optional parameters\n    * @param {string} options.resolution\n    * @param {number} options.bandwidth\n    * @param {number} options.fps\n    * @param {string} options.desktopStream\n    * @param {string} options.cameraDeviceId\n    * @param {string} options.micDeviceId\n    * @param {Object} options.frameRate - used only for dekstop sharing.\n    * @param {Object} options.frameRate.min - Minimum fps\n    * @param {Object} options.frameRate.max - Maximum fps\n    * @returns {Promise} Returns a media stream on success or a JitsiTrackError\n    * on failure.\n    **/\n    getUserMediaWithConstraints(um, options = {}) {\n        const constraints = getConstraints(um, options);\n\n        logger.info('Get media constraints', constraints);\n\n        return new Promise((resolve, reject) => {\n            navigator.mediaDevices.getUserMedia(constraints)\n                .then(stream => {\n                    logger.log('onUserMediaSuccess');\n                    setAvailableDevices(um, stream);\n                    resolve(stream);\n                })\n                .catch(error => {\n                    logger.warn('Failed to get access to local media. '\n                        + ` ${error} ${constraints} `);\n                    setAvailableDevices(um, undefined);\n                    reject(new JitsiTrackError(error, constraints, um));\n                });\n        });\n    }\n\n    /**\n     * Acquires a media stream via getUserMedia that\n     * matches the given constraints\n     *\n     * @param {array} umDevices which devices to acquire (e.g. audio, video)\n     * @param {Object} constraints - Stream specifications to use.\n     * @returns {Promise}\n     */\n    _newGetUserMediaWithConstraints(umDevices, constraints = {}) {\n        return new Promise((resolve, reject) => {\n            navigator.mediaDevices.getUserMedia(constraints)\n                .then(stream => {\n                    logger.log('onUserMediaSuccess');\n                    setAvailableDevices(umDevices, stream);\n                    resolve(stream);\n                })\n                .catch(error => {\n                    logger.warn('Failed to get access to local media. '\n                        + ` ${error} ${constraints} `);\n                    setAvailableDevices(umDevices, undefined);\n                    reject(new JitsiTrackError(error, constraints, umDevices));\n                });\n        });\n    }\n\n    /**\n     * Acquire a display stream via the screenObtainer. This requires extra\n     * logic compared to use screenObtainer versus normal device capture logic\n     * in RTCUtils#_newGetUserMediaWithConstraints.\n     *\n     * @param {Object} options\n     * @param {Object} options.desktopSharingExtensionExternalInstallation\n     * @param {string[]} options.desktopSharingSources\n     * @param {Object} options.gumOptions.frameRate\n     * @param {Object} options.gumOptions.frameRate.min - Minimum fps\n     * @param {Object} options.gumOptions.frameRate.max - Maximum fps\n     * @returns {Promise} A promise which will be resolved with an object whic\n     * contains the acquired display stream. If desktop sharing is not supported\n     * then a rejected promise will be returned.\n     */\n    _newGetDesktopMedia(options) {\n        if (!screenObtainer.isSupported() || !browser.supportsVideo()) {\n            return Promise.reject(\n                new Error('Desktop sharing is not supported!'));\n        }\n\n        const {\n            desktopSharingExtensionExternalInstallation,\n            desktopSharingSources,\n            gumOptions\n        } = options;\n\n        return new Promise((resolve, reject) => {\n            screenObtainer.obtainStream(\n                {\n                    ...desktopSharingExtensionExternalInstallation,\n                    desktopSharingSources,\n                    gumOptions,\n                    trackOptions: getTrackSSConstraints(options)\n                },\n                stream => {\n                    resolve(stream);\n                },\n                error => {\n                    reject(error);\n                });\n        });\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Creates the local MediaStreams.\n     * @param {Object} [options] optional parameters\n     * @param {Array} options.devices the devices that will be requested\n     * @param {string} options.resolution resolution constraints\n     * @param {string} options.cameraDeviceId\n     * @param {string} options.micDeviceId\n     * @param {Object} options.desktopSharingFrameRate\n     * @param {Object} options.desktopSharingFrameRate.min - Minimum fps\n     * @param {Object} options.desktopSharingFrameRate.max - Maximum fps\n     * @returns {*} Promise object that will receive the new JitsiTracks\n     */\n    obtainAudioAndVideoPermissions(options = {}) {\n        options.devices = options.devices || [ ...OLD_GUM_DEFAULT_DEVICES ];\n        options.resolution = options.resolution || OLD_GUM_DEFAULT_RESOLUTION;\n\n        const requestingDesktop = options.devices.includes('desktop');\n\n        if (requestingDesktop && !screenObtainer.isSupported()) {\n            return Promise.reject(\n                new Error('Desktop sharing is not supported!'));\n        }\n\n        let gumPromise;\n\n        if (browser.supportsMediaStreamConstructor()) {\n            gumPromise = this._getAudioAndVideoStreams(options);\n        } else {\n            // If the MediaStream constructor is not supported, then get tracks\n            // in separate GUM calls in order to keep different tracks separate.\n            gumPromise = this._getAudioAndVideoStreamsSeparately(options);\n        }\n\n        return gumPromise.then(streams =>\n            handleLocalStream(streams, options.resolution));\n    }\n\n    /**\n     * Performs one call to getUserMedia for audio and/or video and another call\n     * for desktop.\n     *\n     * @param {Object} options - An object describing how the gUM request should\n     * be executed. See {@link obtainAudioAndVideoPermissions} for full options.\n     * @returns {*} Promise object that will receive the new JitsiTracks on\n     * success or a JitsiTrackError on failure.\n     */\n    _getAudioAndVideoStreams(options) {\n        const requestingDesktop = options.devices.includes('desktop');\n\n        options.devices = options.devices.filter(device =>\n            device !== 'desktop');\n\n        const gumPromise = options.devices.length\n            ? this.getUserMediaWithConstraints(options.devices, options)\n            : Promise.resolve(null);\n\n        return gumPromise\n            .then(avStream => {\n                // If any requested devices are missing, call gum again in\n                // an attempt to obtain the actual error. For example, the\n                // requested video device is missing or permission was\n                // denied.\n                const missingTracks\n                    = this._getMissingTracks(options.devices, avStream);\n\n                if (missingTracks.length) {\n                    this.stopMediaStream(avStream);\n\n                    return this.getUserMediaWithConstraints(\n                        missingTracks, options)\n\n                        // GUM has already failed earlier and this success\n                        // handling should not be reached.\n                        .then(() => Promise.reject(new JitsiTrackError(\n                            { name: 'UnknownError' },\n                            getConstraints(options.devices, options),\n                            missingTracks)));\n                }\n\n                return avStream;\n            })\n            .then(audioVideo => {\n                if (!requestingDesktop) {\n                    return { audioVideo };\n                }\n\n                return new Promise((resolve, reject) => {\n                    screenObtainer.obtainStream(\n                        this._parseDesktopSharingOptions(options),\n                        desktop => resolve({\n                            audioVideo,\n                            desktop\n                        }),\n                        error => {\n                            if (audioVideo) {\n                                this.stopMediaStream(audioVideo);\n                            }\n                            reject(error);\n                        });\n                });\n            });\n    }\n\n    /**\n     * Private utility for determining if the passed in MediaStream contains\n     * tracks of the type(s) specified in the requested devices.\n     *\n     * @param {string[]} requestedDevices - The track types that are expected to\n     * be includes in the stream.\n     * @param {MediaStream} stream - The MediaStream to check if it has the\n     * expected track types.\n     * @returns {string[]} An array of string with the missing track types. The\n     * array will be empty if all requestedDevices are found in the stream.\n     */\n    _getMissingTracks(requestedDevices = [], stream) {\n        const missingDevices = [];\n\n        const audioDeviceRequested = requestedDevices.includes('audio');\n        const audioTracksReceived\n            = stream && stream.getAudioTracks().length > 0;\n\n        if (audioDeviceRequested && !audioTracksReceived) {\n            missingDevices.push('audio');\n        }\n\n        const videoDeviceRequested = requestedDevices.includes('video');\n        const videoTracksReceived\n            = stream && stream.getVideoTracks().length > 0;\n\n        if (videoDeviceRequested && !videoTracksReceived) {\n            missingDevices.push('video');\n        }\n\n        return missingDevices;\n    }\n\n    /**\n     * Performs separate getUserMedia calls for audio and video instead of in\n     * one call. Will also request desktop if specified.\n     *\n     * @param {Object} options - An object describing how the gUM request should\n     * be executed. See {@link obtainAudioAndVideoPermissions} for full options.\n     * @returns {*} Promise object that will receive the new JitsiTracks on\n     * success or a JitsiTrackError on failure.\n     */\n    _getAudioAndVideoStreamsSeparately(options) {\n        return new Promise((resolve, reject) => {\n            const deviceGUM = {\n                audio: (...args) =>\n                    this.getUserMediaWithConstraints([ 'audio' ], ...args),\n                video: (...args) =>\n                    this.getUserMediaWithConstraints([ 'video' ], ...args),\n                desktop: (...args) =>\n                    screenObtainer.obtainStream(\n                        this._parseDesktopSharingOptions(options), ...args)\n            };\n\n            obtainDevices({\n                devices: options.devices,\n                streams: {},\n                successCallback: resolve,\n                errorCallback: reject,\n                deviceGUM\n            });\n        });\n    }\n\n    /**\n     * Returns an object formatted for specifying desktop sharing parameters.\n     *\n     * @param {Object} options - Takes in the same options object as\n     * {@link obtainAudioAndVideoPermissions}.\n     * @returns {Object}\n     */\n    _parseDesktopSharingOptions(options) {\n        return {\n            ...options.desktopSharingExtensionExternalInstallation,\n            desktopSharingSources: options.desktopSharingSources,\n            gumOptions: {\n                frameRate: options.desktopSharingFrameRate\n            },\n            trackOptions: getTrackSSConstraints(options)\n        };\n    }\n\n    /**\n     * Gets streams from specified device types. This function intentionally\n     * ignores errors for upstream to catch and handle instead.\n     *\n     * @param {Object} options - A hash describing what devices to get and\n     * relevant constraints.\n     * @param {string[]} options.devices - The types of media to capture. Valid\n     * values are \"desktop\", \"audio\", and \"video\".\n     * @param {Object} options.desktopSharingFrameRate\n     * @param {Object} options.desktopSharingFrameRate.min - Minimum fps\n     * @param {Object} options.desktopSharingFrameRate.max - Maximum fps\n     * @returns {Promise} The promise, when successful, will return an array of\n     * meta data for the requested device type, which includes the stream and\n     * track. If an error occurs, it will be deferred to the caller for\n     * handling.\n     */\n    newObtainAudioAndVideoPermissions(options) {\n        logger.info('Using the new gUM flow');\n\n        const mediaStreamsMetaData = [];\n\n        // Declare private functions to be used in the promise chain below.\n        // These functions are declared in the scope of this function because\n        // they are not being used anywhere else, so only this function needs to\n        // know about them.\n\n        /**\n         * Executes a request for desktop media if specified in options.\n         *\n         * @returns {Promise}\n         */\n        const maybeRequestDesktopDevice = function() {\n            const umDevices = options.devices || [];\n            const isDesktopDeviceRequsted = umDevices.indexOf('desktop') !== -1;\n\n            const {\n                desktopSharingExtensionExternalInstallation,\n                desktopSharingSources,\n                desktopSharingFrameRate\n            } = options;\n\n            return isDesktopDeviceRequsted\n                ? this._newGetDesktopMedia(\n                    {\n                        desktopSharingExtensionExternalInstallation,\n                        desktopSharingSources,\n                        gumOptions: {\n                            frameRate: desktopSharingFrameRate\n                        }\n                    })\n                : Promise.resolve();\n        }.bind(this);\n\n        /**\n         * Creates a meta data object about the passed in desktopStream and\n         * pushes the meta data to the internal array mediaStreamsMetaData to be\n         * returned later.\n         *\n         * @param {MediaStreamTrack} desktopStream - A track for a desktop\n         * capture.\n         * @returns {void}\n         */\n        const maybeCreateAndAddDesktopTrack = function(desktopStream) {\n            if (!desktopStream) {\n                return;\n            }\n\n            const { stream, sourceId, sourceType } = desktopStream;\n\n            mediaStreamsMetaData.push({\n                stream,\n                sourceId,\n                sourceType,\n                track: stream.getVideoTracks()[0],\n                videoType: VideoType.DESKTOP\n            });\n        };\n\n        /**\n         * Executes a request for audio and/or video, as specified in options.\n         * By default both audio and video will be captured if options.devices\n         * is not defined.\n         *\n         * @returns {Promise}\n         */\n        const maybeRequestCaptureDevices = function() {\n            const umDevices = options.devices || [ 'audio', 'video' ];\n            const requestedCaptureDevices = umDevices.filter(device =>\n                device === 'audio'\n                || (device === 'video' && browser.supportsVideo()));\n\n            if (!requestedCaptureDevices.length) {\n                return Promise.resolve();\n            }\n\n            const constraints = newGetConstraints(\n                requestedCaptureDevices, options);\n\n            logger.info('Got media constraints: ', constraints);\n\n            return this._newGetUserMediaWithConstraints(\n                requestedCaptureDevices, constraints);\n        }.bind(this);\n\n        /**\n         * Splits the passed in media stream into separate audio and video\n         * streams and creates meta data objects for each and pushes them to the\n         * internal array mediaStreamsMetaData to be returned later.\n         *\n         * @param {MediaStreamTrack} avStream - A track for with audio and/or\n         * video track.\n         * @returns {void}\n         */\n        const maybeCreateAndAddAVTracks = function(avStream) {\n            if (!avStream) {\n                return;\n            }\n\n            const audioTracks = avStream.getAudioTracks();\n\n            if (audioTracks.length) {\n                const audioStream = new MediaStream(audioTracks);\n\n                mediaStreamsMetaData.push({\n                    stream: audioStream,\n                    track: audioStream.getAudioTracks()[0]\n                });\n            }\n\n            const videoTracks = avStream.getVideoTracks();\n\n            if (videoTracks.length) {\n                const videoStream = new MediaStream(videoTracks);\n\n                mediaStreamsMetaData.push({\n                    stream: videoStream,\n                    track: videoStream.getVideoTracks()[0],\n                    videoType: VideoType.CAMERA\n                });\n            }\n        };\n\n        return maybeRequestDesktopDevice()\n            .then(maybeCreateAndAddDesktopTrack)\n            .then(maybeRequestCaptureDevices)\n            .then(maybeCreateAndAddAVTracks)\n            .then(() => mediaStreamsMetaData);\n    }\n\n    /**\n     *\n     */\n    getDeviceAvailability() {\n        return devices;\n    }\n\n    /**\n     * Checks whether it is possible to enumerate available cameras/microphones.\n     *\n     * @returns {boolean} {@code true} if the device listing is available;\n     * {@code false}, otherwise.\n     */\n    isDeviceListAvailable() {\n        return Boolean(\n            navigator.mediaDevices\n                && navigator.mediaDevices.enumerateDevices);\n    }\n\n    /**\n     * Returns true if changing the input (camera / microphone) or output\n     * (audio) device is supported and false if not.\n     * @params {string} [deviceType] - type of device to change. Default is\n     *      undefined or 'input', 'output' - for audio output device change.\n     * @returns {boolean} true if available, false otherwise.\n     */\n    isDeviceChangeAvailable(deviceType) {\n        return deviceType === 'output' || deviceType === 'audiooutput'\n            ? isAudioOutputDeviceChangeAvailable\n            : browser.isChrome()\n                || browser.isFirefox()\n                || browser.isOpera()\n                || browser.isNWJS()\n                || browser.isElectron()\n                || browser.isEdge();\n    }\n\n    /**\n     * A method to handle stopping of the stream.\n     * One point to handle the differences in various implementations.\n     * @param mediaStream MediaStream object to stop.\n     */\n    stopMediaStream(mediaStream) {\n        mediaStream.getTracks().forEach(track => {\n            if (track.stop) {\n                track.stop();\n            }\n        });\n\n        // leave stop for implementation still using it\n        if (mediaStream.stop) {\n            mediaStream.stop();\n        }\n\n        // The MediaStream implementation of the react-native-webrtc project has\n        // an explicit release method that is to be invoked in order to release\n        // used resources such as memory.\n        if (mediaStream.release) {\n            mediaStream.release();\n        }\n\n        // if we have done createObjectURL, lets clean it\n        const url = mediaStream.jitsiObjectURL;\n\n        if (url) {\n            delete mediaStream.jitsiObjectURL;\n            URL.revokeObjectURL(url);\n        }\n    }\n\n    /**\n     * Returns whether the desktop sharing is enabled or not.\n     * @returns {boolean}\n     */\n    isDesktopSharingEnabled() {\n        return screenObtainer.isSupported();\n    }\n\n    /**\n     * Sets current audio output device.\n     * @param {string} deviceId - id of 'audiooutput' device from\n     *      navigator.mediaDevices.enumerateDevices(), 'default' for default\n     *      device\n     * @returns {Promise} - resolves when audio output is changed, is rejected\n     *      otherwise\n     */\n    setAudioOutputDevice(deviceId) {\n        if (!this.isDeviceChangeAvailable('output')) {\n            return Promise.reject(\n                new Error('Audio output device change is not supported'));\n        }\n\n        return featureDetectionAudioEl.setSinkId(deviceId)\n            .then(() => {\n                audioOutputDeviceId = deviceId;\n                audioOutputChanged = true;\n\n                logger.log(`Audio output device set to ${deviceId}`);\n\n                eventEmitter.emit(RTCEvents.AUDIO_OUTPUT_DEVICE_CHANGED,\n                    deviceId);\n            });\n    }\n\n    /**\n     * Returns currently used audio output device id, '' stands for default\n     * device\n     * @returns {string}\n     */\n    getAudioOutputDevice() {\n        return audioOutputDeviceId;\n    }\n\n    /**\n     * Returns list of available media devices if its obtained, otherwise an\n     * empty array is returned/\n     * @returns {Array} list of available media devices.\n     */\n    getCurrentlyAvailableMediaDevices() {\n        return availableDevices;\n    }\n\n    /**\n     * Returns event data for device to be reported to stats.\n     * @returns {MediaDeviceInfo} device.\n     */\n    getEventDataForActiveDevice(device) {\n        const deviceList = [];\n        const deviceData = {\n            'deviceId': device.deviceId,\n            'kind': device.kind,\n            'label': device.label,\n            'groupId': device.groupId\n        };\n\n        deviceList.push(deviceData);\n\n        return { deviceList };\n    }\n\n    /**\n     * Configures the given PeerConnection constraints to either enable or\n     * disable (according to the value of the 'enable' parameter) the\n     * 'googSuspendBelowMinBitrate' option.\n     * @param constraints the constraints on which to operate.\n     * @param enable {boolean} whether to enable or disable the suspend video\n     * option.\n     */\n    setSuspendVideo(constraints, enable) {\n        if (!constraints.optional) {\n            constraints.optional = [];\n        }\n\n        // Get rid of all \"googSuspendBelowMinBitrate\" constraints (we assume\n        // that the elements of constraints.optional contain a single property).\n        constraints.optional\n            = constraints.optional.filter(\n                c => !c.hasOwnProperty('googSuspendBelowMinBitrate'));\n\n        if (enable) {\n            constraints.optional.push({ googSuspendBelowMinBitrate: 'true' });\n        }\n    }\n}\n\nconst rtcUtils = new RTCUtils();\n\n/**\n *\n * @param options\n */\nfunction obtainDevices(options) {\n    if (!options.devices || options.devices.length === 0) {\n        return options.successCallback(options.streams || {});\n    }\n\n    const device = options.devices.splice(0, 1);\n\n    options.deviceGUM[device]()\n        .then(stream => {\n            options.streams = options.streams || {};\n            options.streams[device] = stream;\n            obtainDevices(options);\n        }, error => {\n            Object.keys(options.streams).forEach(\n                d => rtcUtils.stopMediaStream(options.streams[d]));\n            logger.error(\n                `failed to obtain ${device} stream - stop`, error);\n\n            options.errorCallback(error);\n        });\n}\n\n/**\n * Wraps original attachMediaStream function to set current audio output device\n * if this is supported.\n * @param {Function} origAttachMediaStream\n * @returns {Function}\n */\nfunction wrapAttachMediaStream(origAttachMediaStream) {\n    return function(element, stream) {\n        // eslint-disable-next-line prefer-rest-params\n        const res = origAttachMediaStream.apply(rtcUtils, arguments);\n\n        if (stream\n                && rtcUtils.isDeviceChangeAvailable('output')\n                && stream.getAudioTracks\n                && stream.getAudioTracks().length\n\n                // we skip setting audio output if there was no explicit change\n                && audioOutputChanged) {\n            element.setSinkId(rtcUtils.getAudioOutputDevice())\n                .catch(function(ex) {\n                    const err\n                        = new JitsiTrackError(ex, null, [ 'audiooutput' ]);\n\n                    GlobalOnErrorHandler.callUnhandledRejectionHandler({\n                        promise: this, // eslint-disable-line no-invalid-this\n                        reason: err\n                    });\n\n                    logger.warn(\n                        'Failed to set audio output device for the element.'\n                            + ' Default audio output device will be used'\n                            + ' instead',\n                        element,\n                        err);\n                });\n        }\n\n        return res;\n    };\n}\n\nexport default rtcUtils;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/RTCUtils.js","import { getLogger } from 'jitsi-meet-logger';\nconst logger = getLogger(__filename);\n\nimport UsernameGenerator from '../util/UsernameGenerator';\n\nlet _callStatsUserName;\n\nlet _machineId;\n\n/**\n *\n */\nexport default {\n    /**\n     * Returns fake username for callstats\n     * @returns {string} fake username for callstats\n     */\n    get callStatsUserName() {\n        if (!_callStatsUserName) {\n            const localStorage = getLocalStorage();\n\n            if (localStorage) {\n                _callStatsUserName = localStorage.getItem('callStatsUserName');\n            }\n            if (!_callStatsUserName) {\n                _callStatsUserName = generateCallStatsUserName();\n                if (localStorage) {\n                    localStorage.setItem(\n                        'callStatsUserName',\n                        _callStatsUserName);\n                }\n            }\n        }\n\n        return _callStatsUserName;\n    },\n\n    /**\n     * Returns current machine id.\n     * @returns {string} machine id\n     */\n    get machineId() {\n        if (!_machineId) {\n            const localStorage = getLocalStorage();\n\n            if (localStorage) {\n                _machineId = localStorage.getItem('jitsiMeetId');\n            }\n            if (!_machineId) {\n                _machineId = generateJitsiMeetId();\n                if (localStorage) {\n                    localStorage.setItem('jitsiMeetId', _machineId);\n                }\n            }\n        }\n\n        return _machineId;\n    },\n\n    /**\n     * Returns current session id.\n     * @returns {string} current session id\n     */\n    get sessionId() {\n        // We may update sessionId in localStorage from another JitsiConference\n        // instance and that's why we should always re-read it.\n        const localStorage = getLocalStorage();\n\n        return localStorage ? localStorage.getItem('sessionId') : undefined;\n    },\n\n    /**\n     * Save current session id.\n     * @param {string} sessionId session id\n     */\n    set sessionId(sessionId) {\n        const localStorage = getLocalStorage();\n\n        if (localStorage) {\n            if (sessionId) {\n                localStorage.setItem('sessionId', sessionId);\n            } else {\n                localStorage.removeItem('sessionId');\n            }\n        }\n    }\n};\n\n/**\n * Generate fake username for callstats.\n * @returns {string} fake random username\n */\nfunction generateCallStatsUserName() {\n    const username = UsernameGenerator.generateUsername();\n\n    logger.log('generated callstats uid', username);\n\n    return username;\n}\n\n/**\n * Generate unique id.\n * @returns {string} random unique id\n */\nfunction generateJitsiMeetId() {\n    const jitsiMeetId = generateUniqueId();\n\n    logger.log('generated id', jitsiMeetId);\n\n    return jitsiMeetId;\n}\n\n/**\n * Gets the localStorage of the browser. (Technically, gets the localStorage of\n * the global object because there may be no browser but React Native for\n * example).\n * @returns {Storage} the local Storage object (if any)\n */\nfunction getLocalStorage() {\n    let storage;\n\n    try {\n        // eslint-disable-next-line no-invalid-this\n        storage = (window || this).localStorage;\n    } catch (error) {\n        logger.error(error);\n    }\n\n    return storage;\n}\n\n/**\n *\n */\nfunction generateUniqueId() {\n    return _p8() + _p8() + _p8() + _p8();\n}\n\n/**\n *\n */\nfunction _p8() {\n    return `${Math.random().toString(16)}000000000`.substr(2, 8);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/settings/Settings.js","/**\n * The events for the connection.\n */\n\n/**\n * Indicates that the connection has been disconnected. The event provides\n * the following parameters to its listeners:\n *\n * @param msg {string} a message associated with the disconnect such as the\n * last (known) error message\n */\nexport const CONNECTION_DISCONNECTED = 'connection.connectionDisconnected';\n\n/**\n * Indicates that the connection has been established. The event provides\n * the following parameters to its listeners:\n *\n * @param id {string} the ID of the local endpoint/participant/peer (within\n * the context of the established connection)\n */\nexport const CONNECTION_ESTABLISHED = 'connection.connectionEstablished';\n\n/**\n * Indicates that the connection has been failed for some reason. The event\n * provides the following parameters to its listeners:\n *\n * @param errType {JitsiConnectionErrors} the type of error associated with\n * the failure\n * @param errReason {string} the error (message) associated with the failure\n * @param credentials {object} the credentials used to connect (if any)\n * @param errReasonDetails {object} an optional object with details about\n * the error, like shard moving, suspending. Used for analytics purposes.\n */\nexport const CONNECTION_FAILED = 'connection.connectionFailed';\n\n/**\n * Indicates that the performed action cannot be executed because the\n * connection is not in the correct state(connected, disconnected, etc.)\n */\nexport const WRONG_STATE = 'connection.wrongState';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConnectionEvents.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\n\nimport BridgeChannel from './BridgeChannel';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\nimport * as JitsiConferenceEvents from '../../JitsiConferenceEvents';\nimport JitsiLocalTrack from './JitsiLocalTrack';\nimport JitsiTrackError from '../../JitsiTrackError';\nimport * as JitsiTrackErrors from '../../JitsiTrackErrors';\nimport Listenable from '../util/Listenable';\nimport { safeCounterIncrement } from '../util/MathUtil';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport browser from '../browser';\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport RTCUtils from './RTCUtils';\nimport Statistics from '../statistics/statistics';\nimport TraceablePeerConnection from './TraceablePeerConnection';\nimport VideoType from '../../service/RTC/VideoType';\n\nconst logger = getLogger(__filename);\n\n/**\n * The counter used to generated id numbers assigned to peer connections\n * @type {number}\n */\nlet peerConnectionIdCounter = 0;\n\n/**\n * The counter used to generate id number for the local\n * <code>MediaStreamTrack</code>s.\n * @type {number}\n */\nlet rtcTrackIdCounter = 0;\n\n/**\n *\n * @param tracksInfo\n * @param options\n */\nfunction createLocalTracks(tracksInfo, options) {\n    const newTracks = [];\n    let deviceId = null;\n\n    tracksInfo.forEach(trackInfo => {\n        if (trackInfo.mediaType === MediaType.AUDIO) {\n            deviceId = options.micDeviceId;\n        } else if (trackInfo.videoType === VideoType.CAMERA) {\n            deviceId = options.cameraDeviceId;\n        }\n        rtcTrackIdCounter = safeCounterIncrement(rtcTrackIdCounter);\n        const localTrack = new JitsiLocalTrack({\n            ...trackInfo,\n            deviceId,\n            facingMode: options.facingMode,\n            rtcId: rtcTrackIdCounter\n        });\n\n        newTracks.push(localTrack);\n    });\n\n    return newTracks;\n}\n\n/**\n * Creates {@code JitsiLocalTrack} instances from the passed in meta information\n * about MedieaTracks.\n *\n * @param {Object[]} mediaStreamMetaData - An array of meta information with\n * MediaTrack instances. Each can look like:\n * {{\n *     stream: MediaStream instance that holds a track with audio or video,\n *     track: MediaTrack within the MediaStream,\n *     videoType: \"camera\" or \"desktop\" or falsy,\n *     sourceId: ID of the desktopsharing source,\n *     sourceType: The desktopsharing source type\n * }}\n */\nfunction _newCreateLocalTracks(mediaStreamMetaData = []) {\n    return mediaStreamMetaData.map(metaData => {\n        const {\n            sourceId,\n            sourceType,\n            stream,\n            track,\n            videoType\n        } = metaData;\n\n        const { deviceId, facingMode } = track.getSettings();\n\n        // FIXME Move rtcTrackIdCounter to a static method in JitsiLocalTrack\n        // so RTC does not need to handle ID management. This move would be\n        // safer to do once the old createLocalTracks is removed.\n        rtcTrackIdCounter = safeCounterIncrement(rtcTrackIdCounter);\n\n        return new JitsiLocalTrack({\n            deviceId,\n            facingMode,\n            mediaType: track.kind,\n            rtcId: rtcTrackIdCounter,\n            sourceId,\n            sourceType,\n            stream,\n            track,\n            videoType: videoType || null\n        });\n    });\n}\n\n/**\n *\n */\nexport default class RTC extends Listenable {\n    /**\n     *\n     * @param conference\n     * @param options\n     */\n    constructor(conference, options = {}) {\n        super();\n        this.conference = conference;\n\n        /**\n         * A map of active <tt>TraceablePeerConnection</tt>.\n         * @type {Map.<number, TraceablePeerConnection>}\n         */\n        this.peerConnections = new Map();\n\n        this.localTracks = [];\n\n        this.options = options;\n\n        // BridgeChannel instance.\n        // @private\n        // @type {BridgeChannel}\n        this._channel = null;\n\n        // A flag whether we had received that the channel had opened we can\n        // get this flag out of sync if for some reason channel got closed\n        // from server, a desired behaviour so we can see errors when this\n        // happen.\n        // @private\n        // @type {boolean}\n        this._channelOpen = false;\n\n        /**\n         * The value specified to the last invocation of setLastN before the\n         * channel completed opening. If non-null, the value will be sent\n         * through a channel (once) as soon as it opens and will then be\n         * discarded.\n         * @private\n         * @type {number}\n         */\n        this._lastN = -1;\n\n        /**\n         * Defines the last N endpoints list. It can be null or an array once\n         * initialised with a channel last N event.\n         * @type {Array<string>|null}\n         * @private\n         */\n        this._lastNEndpoints = null;\n\n        /**\n         * The number representing the maximum video height the local client\n         * should receive from the bridge.\n         *\n         * @type {number|undefined}\n         * @private\n         */\n        this._maxFrameHeight = undefined;\n\n        /**\n         * The endpoint ID of currently pinned participant or <tt>null</tt> if\n         * no user is pinned.\n         * @type {string|null}\n         * @private\n         */\n        this._pinnedEndpoint = null;\n\n        /**\n         * The endpoint IDs of currently selected participants.\n         *\n         * @type {Array}\n         * @private\n         */\n        this._selectedEndpoints = [];\n\n        // The last N change listener.\n        this._lastNChangeListener = this._onLastNChanged.bind(this);\n\n        // Switch audio output device on all remote audio tracks. Local audio\n        // tracks handle this event by themselves.\n        if (RTCUtils.isDeviceChangeAvailable('output')) {\n            RTCUtils.addListener(RTCEvents.AUDIO_OUTPUT_DEVICE_CHANGED,\n                deviceId => this._updateAudioOutputForAudioTracks(deviceId));\n\n            RTCUtils.addListener(\n                RTCEvents.DEVICE_LIST_CHANGED,\n                () => this._updateAudioOutputForAudioTracks(\n                    RTCUtils.getAudioOutputDevice()));\n        }\n    }\n\n    /**\n     * Creates the local MediaStreams.\n     * @param {object} [options] Optional parameters.\n     * @param {array} options.devices The devices that will be requested.\n     * @param {string} options.resolution Resolution constraints.\n     * @param {string} options.cameraDeviceId\n     * @param {string} options.micDeviceId\n     * @returns {*} Promise object that will receive the new JitsiTracks\n     */\n    static obtainAudioAndVideoPermissions(options) {\n        const usesNewGumFlow = browser.usesNewGumFlow();\n        const obtainMediaPromise = usesNewGumFlow\n            ? RTCUtils.newObtainAudioAndVideoPermissions(options)\n            : RTCUtils.obtainAudioAndVideoPermissions(options);\n\n        return obtainMediaPromise.then(\n            tracksInfo => {\n                const tracks = usesNewGumFlow\n                    ? _newCreateLocalTracks(tracksInfo)\n                    : createLocalTracks(tracksInfo, options);\n\n                return tracks.some(track => !track._isReceivingData())\n                    ? Promise.reject(\n                        new JitsiTrackError(\n                            JitsiTrackErrors.NO_DATA_FROM_SOURCE))\n                    : tracks;\n            });\n    }\n\n    /**\n     * Initializes the bridge channel of this instance.\n     * At least one of both, peerconnection or wsUrl parameters, must be\n     * given.\n     * @param {RTCPeerConnection} [peerconnection] WebRTC peer connection\n     * instance.\n     * @param {string} [wsUrl] WebSocket URL.\n     */\n    initializeBridgeChannel(peerconnection, wsUrl) {\n        this._channel = new BridgeChannel(\n            peerconnection, wsUrl, this.eventEmitter);\n\n        this._channelOpenListener = () => {\n            // Mark that channel as opened.\n            this._channelOpen = true;\n\n            // When the channel becomes available, tell the bridge about\n            // video selections so that it can do adaptive simulcast,\n            // we want the notification to trigger even if userJid\n            // is undefined, or null.\n            try {\n                this._channel.sendPinnedEndpointMessage(\n                    this._pinnedEndpoint);\n                this._channel.sendSelectedEndpointsMessage(\n                    this._selectedEndpoints);\n\n                if (typeof this._maxFrameHeight !== 'undefined') {\n                    this._channel.sendReceiverVideoConstraintMessage(\n                        this._maxFrameHeight);\n                }\n            } catch (error) {\n                GlobalOnErrorHandler.callErrorHandler(error);\n                logger.error(\n                    `Cannot send selected(${this._selectedEndpoint})`\n                    + `pinned(${this._pinnedEndpoint})`\n                    + `frameHeight(${this._maxFrameHeight}) endpoint message`,\n                    error);\n            }\n\n            this.removeListener(RTCEvents.DATA_CHANNEL_OPEN,\n                this._channelOpenListener);\n            this._channelOpenListener = null;\n\n            // If setLastN was invoked before the bridge channel completed\n            // opening, apply the specified value now that the channel\n            // is open. NOTE that -1 is the default value assumed by both\n            // RTC module and the JVB.\n            if (this._lastN !== -1) {\n                this._channel.sendSetLastNMessage(this._lastN);\n            }\n        };\n\n        this.addListener(RTCEvents.DATA_CHANNEL_OPEN,\n            this._channelOpenListener);\n\n        // Add Last N change listener.\n        this.addListener(RTCEvents.LASTN_ENDPOINT_CHANGED,\n            this._lastNChangeListener);\n    }\n\n    /**\n     * Receives events when Last N had changed.\n     * @param {array} lastNEndpoints The new Last N endpoints.\n     * @private\n     */\n    _onLastNChanged(lastNEndpoints = []) {\n        const oldLastNEndpoints = this._lastNEndpoints || [];\n        let leavingLastNEndpoints = [];\n        let enteringLastNEndpoints = [];\n\n        this._lastNEndpoints = lastNEndpoints;\n\n        leavingLastNEndpoints = oldLastNEndpoints.filter(\n            id => !this.isInLastN(id));\n\n        enteringLastNEndpoints = lastNEndpoints.filter(\n            id => oldLastNEndpoints.indexOf(id) === -1);\n\n        this.conference.eventEmitter.emit(\n            JitsiConferenceEvents.LAST_N_ENDPOINTS_CHANGED,\n            leavingLastNEndpoints,\n            enteringLastNEndpoints);\n    }\n\n    /**\n     * Should be called when current media session ends and after the\n     * PeerConnection has been closed using PeerConnection.close() method.\n     */\n    onCallEnded() {\n        if (this._channel) {\n            // The BridgeChannel is not explicitly closed as the PeerConnection\n            // is closed on call ended which triggers datachannel onclose\n            // events. If using a WebSocket, the channel must be closed since\n            // it is not managed by the PeerConnection.\n            // The reference is cleared to disable any logic related to the\n            // channel.\n            if (this._channel && this._channel.mode === 'websocket') {\n                this._channel.close();\n            }\n\n            this._channel = null;\n            this._channelOpen = false;\n        }\n    }\n\n    /**\n     * Sets the maximum video size the local participant should receive from\n     * remote participants. Will cache the value and send it through the channel\n     * once it is created.\n     *\n     * @param {number} maxFrameHeightPixels the maximum frame height, in pixels,\n     * this receiver is willing to receive.\n     * @returns {void}\n     */\n    setReceiverVideoConstraint(maxFrameHeight) {\n        this._maxFrameHeight = maxFrameHeight;\n\n        if (this._channel && this._channelOpen) {\n            this._channel.sendReceiverVideoConstraintMessage(maxFrameHeight);\n        }\n    }\n\n    /**\n     * Elects the participants with the given ids to be the selected\n     * participants in order to always receive video for this participant (even\n     * when last n is enabled). If there is no channel we store it and send it\n     * through the channel once it is created.\n     *\n     * @param {Array<string>} ids - The user ids.\n     * @throws NetworkError or InvalidStateError or Error if the operation\n     * fails.\n     * @returns {void}\n     */\n    selectEndpoints(ids) {\n        this._selectedEndpoints = ids;\n\n        if (this._channel && this._channelOpen) {\n            this._channel.sendSelectedEndpointsMessage(ids);\n        }\n    }\n\n    /**\n     * Elects the participant with the given id to be the pinned participant in\n     * order to always receive video for this participant (even when last n is\n     * enabled).\n     * @param {stirng} id The user id.\n     * @throws NetworkError or InvalidStateError or Error if the operation\n     * fails.\n     */\n    pinEndpoint(id) {\n        // Cache the value if channel is missing, till we open it.\n        this._pinnedEndpoint = id;\n        if (this._channel && this._channelOpen) {\n            this._channel.sendPinnedEndpointMessage(id);\n        }\n    }\n\n    /**\n     *\n     * @param eventType\n     * @param listener\n     */\n    static addListener(eventType, listener) {\n        RTCUtils.addListener(eventType, listener);\n    }\n\n    /**\n     *\n     * @param eventType\n     * @param listener\n     */\n    static removeListener(eventType, listener) {\n        RTCUtils.removeListener(eventType, listener);\n    }\n\n    /**\n     *\n     * @param options\n     */\n    static init(options = {}) {\n        this.options = options;\n\n        return RTCUtils.init(this.options);\n    }\n\n    /**\n     *\n     */\n    static getDeviceAvailability() {\n        return RTCUtils.getDeviceAvailability();\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     * Creates new <tt>TraceablePeerConnection</tt>\n     * @param {SignalingLayer} signaling The signaling layer that will\n     *      provide information about the media or participants which is not\n     *      carried over SDP.\n     * @param {object} iceConfig An object describing the ICE config like\n     *      defined in the WebRTC specification.\n     * @param {boolean} isP2P Indicates whether or not the new TPC will be used\n     *      in a peer to peer type of session.\n     * @param {object} options The config options.\n     * @param {boolean} options.disableSimulcast If set to 'true' will disable\n     *      the simulcast.\n     * @param {boolean} options.disableRtx If set to 'true' will disable the\n     *      RTX.\n     * @param {boolean} options.disableH264 If set to 'true' H264 will be\n     *      disabled by removing it from the SDP.\n     * @param {boolean} options.preferH264 If set to 'true' H264 will be\n     *      preferred over other video codecs.\n     * @return {TraceablePeerConnection}\n     */\n    createPeerConnection(signaling, iceConfig, isP2P, options) {\n        const pcConstraints = RTC.getPCConstraints(isP2P);\n\n        if (typeof options.abtestSuspendVideo !== 'undefined') {\n            RTCUtils.setSuspendVideo(pcConstraints, options.abtestSuspendVideo);\n\n            Statistics.analytics.addPermanentProperties(\n                { abtestSuspendVideo: options.abtestSuspendVideo });\n        }\n\n        peerConnectionIdCounter = safeCounterIncrement(peerConnectionIdCounter);\n        const newConnection\n            = new TraceablePeerConnection(\n                this,\n                peerConnectionIdCounter,\n                signaling,\n                iceConfig, pcConstraints,\n                isP2P, options);\n\n        this.peerConnections.set(newConnection.id, newConnection);\n\n        return newConnection;\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Removed given peer connection from this RTC module instance.\n     * @param {TraceablePeerConnection} traceablePeerConnection\n     * @return {boolean} <tt>true</tt> if the given peer connection was removed\n     * successfully or <tt>false</tt> if there was no peer connection mapped in\n     * this RTC instance.\n     */\n    _removePeerConnection(traceablePeerConnection) {\n        const id = traceablePeerConnection.id;\n\n        if (this.peerConnections.has(id)) {\n            // NOTE Remote tracks are not removed here.\n            this.peerConnections.delete(id);\n\n            return true;\n        }\n\n        return false;\n\n    }\n\n    /**\n     *\n     * @param track\n     */\n    addLocalTrack(track) {\n        if (!track) {\n            throw new Error('track must not be null nor undefined');\n        }\n\n        this.localTracks.push(track);\n\n        track.conference = this.conference;\n    }\n\n    /**\n     * Returns the current value for \"lastN\" - the amount of videos are going\n     * to be delivered. When set to -1 for unlimited or all available videos.\n     * @return {number}\n     */\n    getLastN() {\n        return this._lastN;\n    }\n\n    /**\n     * Get local video track.\n     * @returns {JitsiLocalTrack|undefined}\n     */\n    getLocalVideoTrack() {\n        const localVideo = this.getLocalTracks(MediaType.VIDEO);\n\n\n        return localVideo.length ? localVideo[0] : undefined;\n    }\n\n    /**\n     * Get local audio track.\n     * @returns {JitsiLocalTrack|undefined}\n     */\n    getLocalAudioTrack() {\n        const localAudio = this.getLocalTracks(MediaType.AUDIO);\n\n\n        return localAudio.length ? localAudio[0] : undefined;\n    }\n\n    /**\n     * Returns the local tracks of the given media type, or all local tracks if\n     * no specific type is given.\n     * @param {MediaType} [mediaType] Optional media type filter.\n     * (audio or video).\n     */\n    getLocalTracks(mediaType) {\n        let tracks = this.localTracks.slice();\n\n        if (mediaType !== undefined) {\n            tracks = tracks.filter(\n                track => track.getType() === mediaType);\n        }\n\n        return tracks;\n    }\n\n    /**\n     * Obtains all remote tracks currently known to this RTC module instance.\n     * @param {MediaType} [mediaType] The remote tracks will be filtered\n     *      by their media type if this argument is specified.\n     * @return {Array<JitsiRemoteTrack>}\n     */\n    getRemoteTracks(mediaType) {\n        let remoteTracks = [];\n\n        for (const tpc of this.peerConnections.values()) {\n            const pcRemoteTracks = tpc.getRemoteTracks(undefined, mediaType);\n\n            if (pcRemoteTracks) {\n                remoteTracks = remoteTracks.concat(pcRemoteTracks);\n            }\n        }\n\n        return remoteTracks;\n    }\n\n    /**\n     * Set mute for all local audio streams attached to the conference.\n     * @param value The mute value.\n     * @returns {Promise}\n     */\n    setAudioMute(value) {\n        const mutePromises = [];\n\n        this.getLocalTracks(MediaType.AUDIO).forEach(audioTrack => {\n            // this is a Promise\n            mutePromises.push(value ? audioTrack.mute() : audioTrack.unmute());\n        });\n\n        // We return a Promise from all Promises so we can wait for their\n        // execution.\n        return Promise.all(mutePromises);\n    }\n\n    /**\n     *\n     * @param track\n     */\n    removeLocalTrack(track) {\n        const pos = this.localTracks.indexOf(track);\n\n        if (pos === -1) {\n            return;\n        }\n\n        this.localTracks.splice(pos, 1);\n    }\n\n    /**\n     * Removes all JitsiRemoteTracks associated with given MUC nickname\n     * (resource part of the JID). Returns array of removed tracks.\n     *\n     * @param {string} Owner The resource part of the MUC JID.\n     * @returns {JitsiRemoteTrack[]}\n     */\n    removeRemoteTracks(owner) {\n        let removedTracks = [];\n\n        for (const tpc of this.peerConnections.values()) {\n            const pcRemovedTracks = tpc.removeRemoteTracks(owner);\n\n            removedTracks = removedTracks.concat(pcRemovedTracks);\n        }\n\n        logger.debug(\n            `Removed remote tracks for ${owner}`\n                + ` count: ${removedTracks.length}`);\n\n        return removedTracks;\n    }\n\n    /**\n     *\n     */\n    static getPCConstraints(isP2P) {\n        const pcConstraints\n            = isP2P ? RTCUtils.p2pPcConstraints : RTCUtils.pcConstraints;\n\n        if (!pcConstraints) {\n            return {};\n        }\n\n        return JSON.parse(JSON.stringify(pcConstraints));\n    }\n\n    /**\n     *\n     * @param elSelector\n     * @param stream\n     */\n    static attachMediaStream(elSelector, stream) {\n        return RTCUtils.attachMediaStream(elSelector, stream);\n    }\n\n    /**\n     * Returns the id of the given stream.\n     * @param {MediaStream} stream\n     */\n    static getStreamID(stream) {\n        return RTCUtils.getStreamID(stream);\n    }\n\n    /**\n     * Returns the id of the given track.\n     * @param {MediaStreamTrack} track\n     */\n    static getTrackID(track) {\n        return RTCUtils.getTrackID(track);\n    }\n\n    /**\n     * Returns true if retrieving the the list of input devices is supported\n     * and false if not.\n     */\n    static isDeviceListAvailable() {\n        return RTCUtils.isDeviceListAvailable();\n    }\n\n    /**\n     * Returns true if changing the input (camera / microphone) or output\n     * (audio) device is supported and false if not.\n     * @param {string} [deviceType] Type of device to change. Default is\n     *      undefined or 'input', 'output' - for audio output device change.\n     * @returns {boolean} true if available, false otherwise.\n     */\n    static isDeviceChangeAvailable(deviceType) {\n        return RTCUtils.isDeviceChangeAvailable(deviceType);\n    }\n\n    /**\n     * Returns whether the current execution environment supports WebRTC (for\n     * use within this library).\n     *\n     * @returns {boolean} {@code true} if WebRTC is supported in the current\n     * execution environment (for use within this library); {@code false},\n     * otherwise.\n     */\n    static isWebRtcSupported() {\n        return browser.isSupported();\n    }\n\n    /**\n     * Returns currently used audio output device id, '' stands for default\n     * device\n     * @returns {string}\n     */\n    static getAudioOutputDevice() {\n        return RTCUtils.getAudioOutputDevice();\n    }\n\n    /**\n     * Returns list of available media devices if its obtained, otherwise an\n     * empty array is returned/\n     * @returns {array} list of available media devices.\n     */\n    static getCurrentlyAvailableMediaDevices() {\n        return RTCUtils.getCurrentlyAvailableMediaDevices();\n    }\n\n    /**\n     * Returns event data for device to be reported to stats.\n     * @returns {MediaDeviceInfo} device.\n     */\n    static getEventDataForActiveDevice(device) {\n        return RTCUtils.getEventDataForActiveDevice(device);\n    }\n\n    /**\n     * Sets current audio output device.\n     * @param {string} deviceId Id of 'audiooutput' device from\n     *      navigator.mediaDevices.enumerateDevices().\n     * @returns {Promise} resolves when audio output is changed, is rejected\n     *      otherwise\n     */\n    static setAudioOutputDevice(deviceId) {\n        return RTCUtils.setAudioOutputDevice(deviceId);\n    }\n\n    /**\n     * Returns <tt>true<tt/> if given WebRTC MediaStream is considered a valid\n     * \"user\" stream which means that it's not a \"receive only\" stream nor a\n     * \"mixed\" JVB stream.\n     *\n     * Clients that implement Unified Plan, such as Firefox use recvonly\n     * \"streams/channels/tracks\" for receiving remote stream/tracks, as opposed\n     * to Plan B where there are only 3 channels: audio, video and data.\n     *\n     * @param {MediaStream} stream The WebRTC MediaStream instance.\n     * @returns {boolean}\n     */\n    static isUserStream(stream) {\n        return RTC.isUserStreamById(RTCUtils.getStreamID(stream));\n    }\n\n    /**\n     * Returns <tt>true<tt/> if a WebRTC MediaStream identified by given stream\n     * ID is considered a valid \"user\" stream which means that it's not a\n     * \"receive only\" stream nor a \"mixed\" JVB stream.\n     *\n     * Clients that implement Unified Plan, such as Firefox use recvonly\n     * \"streams/channels/tracks\" for receiving remote stream/tracks, as opposed\n     * to Plan B where there are only 3 channels: audio, video and data.\n     *\n     * @param {string} streamId The id of WebRTC MediaStream.\n     * @returns {boolean}\n     */\n    static isUserStreamById(streamId) {\n        return streamId && streamId !== 'mixedmslabel'\n            && streamId !== 'default';\n    }\n\n    /**\n     * Allows to receive list of available cameras/microphones.\n     * @param {function} callback Would receive array of devices as an\n     *      argument.\n     */\n    static enumerateDevices(callback) {\n        RTCUtils.enumerateDevices(callback);\n    }\n\n    /**\n     * A method to handle stopping of the stream.\n     * One point to handle the differences in various implementations.\n     * @param {MediaStream} mediaStream MediaStream object to stop.\n     */\n    static stopMediaStream(mediaStream) {\n        RTCUtils.stopMediaStream(mediaStream);\n    }\n\n    /**\n     * Returns whether the desktop sharing is enabled or not.\n     * @returns {boolean}\n     */\n    static isDesktopSharingEnabled() {\n        return RTCUtils.isDesktopSharingEnabled();\n    }\n\n    /**\n     * Closes the currently opened bridge channel.\n     */\n    closeBridgeChannel() {\n        if (this._channel) {\n            this._channel.close();\n            this._channelOpen = false;\n\n            this.removeListener(RTCEvents.LASTN_ENDPOINT_CHANGED,\n                this._lastNChangeListener);\n        }\n    }\n\n    /* eslint-disable max-params */\n    /**\n     *\n     * @param {TraceablePeerConnection} tpc\n     * @param {number} ssrc\n     * @param {number} audioLevel\n     * @param {boolean} isLocal\n     */\n    setAudioLevel(tpc, ssrc, audioLevel, isLocal) {\n        const track = tpc.getTrackBySSRC(ssrc);\n\n        if (!track) {\n            return;\n        } else if (!track.isAudioTrack()) {\n            logger.warn(`Received audio level for non-audio track: ${ssrc}`);\n\n            return;\n        } else if (track.isLocal() !== isLocal) {\n            logger.error(\n                `${track} was expected to ${isLocal ? 'be' : 'not be'} local`);\n        }\n\n        track.setAudioLevel(audioLevel, tpc);\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Sends message via the bridge channel.\n     * @param {string} to The id of the endpoint that should receive the\n     *      message. If \"\" the message will be sent to all participants.\n     * @param {object} payload The payload of the message.\n     * @throws NetworkError or InvalidStateError or Error if the operation\n     * fails or there is no data channel created.\n     */\n    sendChannelMessage(to, payload) {\n        if (this._channel) {\n            this._channel.sendMessage(to, payload);\n        } else {\n            throw new Error('Channel support is disabled!');\n        }\n    }\n\n    /**\n     * Selects a new value for \"lastN\". The requested amount of videos are going\n     * to be delivered after the value is in effect. Set to -1 for unlimited or\n     * all available videos.\n     * @param {number} value the new value for lastN.\n     */\n    setLastN(value) {\n        if (this._lastN !== value) {\n            this._lastN = value;\n            if (this._channel && this._channelOpen) {\n                this._channel.sendSetLastNMessage(value);\n            }\n            this.eventEmitter.emit(RTCEvents.LASTN_VALUE_CHANGED, value);\n        }\n    }\n\n    /**\n     * Indicates if the endpoint id is currently included in the last N.\n     * @param {string} id The endpoint id that we check for last N.\n     * @returns {boolean} true if the endpoint id is in the last N or if we\n     * don't have bridge channel support, otherwise we return false.\n     */\n    isInLastN(id) {\n        return !this._lastNEndpoints // lastNEndpoints not initialised yet.\n            || this._lastNEndpoints.indexOf(id) > -1;\n    }\n\n    /**\n     * Updates the target audio output device for all remote audio tracks.\n     *\n     * @param {string} deviceId - The device id of the audio ouput device to\n     * use for all remote tracks.\n     * @private\n     * @returns {void}\n     */\n    _updateAudioOutputForAudioTracks(deviceId) {\n        const remoteAudioTracks = this.getRemoteTracks(MediaType.AUDIO);\n\n        for (const track of remoteAudioTracks) {\n            track.setAudioOutput(deviceId);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/RTC.js","import * as transform from 'sdp-transform';\n\n/**\n * Parses the primary SSRC of given SSRC group.\n * @param {object} group the SSRC group object as defined by the 'sdp-transform'\n * @return {Number} the primary SSRC number\n */\nexport function parsePrimarySSRC(group) {\n    return parseInt(group.ssrcs.split(' ')[0], 10);\n}\n\n/**\n * Parses the secondary SSRC of given SSRC group.\n * @param {object} group the SSRC group object as defined by the 'sdp-transform'\n * @return {Number} the secondary SSRC number\n */\nexport function parseSecondarySSRC(group) {\n    return parseInt(group.ssrcs.split(' ')[1], 10);\n}\n\n/**\n * Tells how many distinct SSRCs are contained in given media line.\n * @param {Object} mLine the media line object as defined by 'sdp-transform' lib\n * @return {number}\n */\nfunction _getSSRCCount(mLine) {\n    if (!mLine.ssrcs) {\n        return 0;\n    }\n\n    return mLine.ssrcs\n        .map(ssrcInfo => ssrcInfo.id)\n        .filter((ssrc, index, array) => array.indexOf(ssrc) === index)\n        .length;\n}\n\n/**\n * A wrapper around 'sdp-transform' media description object which provides\n * utility methods for common SDP/SSRC related operations.\n */\nclass MLineWrap {\n\n    /**\n     * Creates new <tt>MLineWrap</t>>\n     * @param {Object} mLine the media line object as defined by 'sdp-transform'\n     * lib.\n     */\n    constructor(mLine) {\n        if (!mLine) {\n            throw new Error('mLine is undefined');\n        }\n\n        this.mLine = mLine;\n    }\n\n    /**\n     * Getter for the mLine's \"ssrcs\" array. If the array was undefined an empty\n     * one will be preassigned.\n     *\n     * @return {Array<Object>} an array of 'sdp-transform' SSRC attributes\n     * objects.\n     */\n    get ssrcs() {\n        if (!this.mLine.ssrcs) {\n            this.mLine.ssrcs = [];\n        }\n\n        return this.mLine.ssrcs;\n    }\n\n    /**\n     * Setter for the mLine's \"ssrcs\" array.\n     *\n     * @param {Array<Object>} ssrcs an array of 'sdp-transform' SSRC attributes\n     * objects.\n     */\n    set ssrcs(ssrcs) {\n        this.mLine.ssrcs = ssrcs;\n    }\n\n    /**\n     * Returns the direction of the underlying media description.\n     * @return {string} the media direction name as defined in the SDP.\n     */\n    get direction() {\n        return this.mLine.direction;\n    }\n\n    /**\n     * Modifies the direction of the underlying media description.\n     * @param {string} direction the new direction to be set\n     */\n    set direction(direction) {\n        this.mLine.direction = direction;\n    }\n\n    /**\n     * Exposes the SSRC group array of the underlying media description object.\n     * @return {Array.<Object>}\n     */\n    get ssrcGroups() {\n        if (!this.mLine.ssrcGroups) {\n            this.mLine.ssrcGroups = [];\n        }\n\n        return this.mLine.ssrcGroups;\n    }\n\n    /**\n     * Modifies the SSRC groups array of the underlying media description\n     * object.\n     * @param {Array.<Object>} ssrcGroups\n     */\n    set ssrcGroups(ssrcGroups) {\n        this.mLine.ssrcGroups = ssrcGroups;\n    }\n\n    /**\n     * Obtains value from SSRC attribute.\n     * @param {number} ssrcNumber the SSRC number for which attribute is to be\n     * found\n     * @param {string} attrName the name of the SSRC attribute to be found.\n     * @return {string|undefined} the value of SSRC attribute or\n     * <tt>undefined</tt> if no such attribute exists.\n     */\n    getSSRCAttrValue(ssrcNumber, attrName) {\n        const attribute = this.ssrcs.find(\n            ssrcObj => ssrcObj.id === ssrcNumber\n            && ssrcObj.attribute === attrName);\n\n\n        return attribute && attribute.value;\n    }\n\n    /**\n     * Removes all attributes for given SSRC number.\n     * @param {number} ssrcNum the SSRC number for which all attributes will be\n     * removed.\n     */\n    removeSSRC(ssrcNum) {\n        if (!this.mLine.ssrcs || !this.mLine.ssrcs.length) {\n            return;\n        }\n\n        this.mLine.ssrcs\n            = this.mLine.ssrcs.filter(ssrcObj => ssrcObj.id !== ssrcNum);\n    }\n\n    /**\n     * Adds SSRC attribute\n     * @param {object} ssrcObj the SSRC attribute object as defined in\n     * the 'sdp-transform' lib.\n     */\n    addSSRCAttribute(ssrcObj) {\n        this.ssrcs.push(ssrcObj);\n    }\n\n    /**\n     * Finds a SSRC group matching both semantics and SSRCs in order.\n     * @param {string} semantics the name of the semantics\n     * @param {string} [ssrcs] group SSRCs as a string (like it's defined in\n     * SSRC group object of the 'sdp-transform' lib) e.g. \"1232546 342344 25434\"\n     * @return {object|undefined} the SSRC group object or <tt>undefined</tt> if\n     * not found.\n     */\n    findGroup(semantics, ssrcs) {\n        return this.ssrcGroups.find(\n            group =>\n                group.semantics === semantics\n                    && (!ssrcs || ssrcs === group.ssrcs));\n    }\n\n    /**\n     * Finds all groups matching given semantic's name.\n     * @param {string} semantics the name of the semantics\n     * @return {Array.<object>} an array of SSRC group objects as defined by\n     * the 'sdp-transform' lib.\n     */\n    findGroups(semantics) {\n        return this.ssrcGroups.filter(\n            group => group.semantics === semantics);\n    }\n\n    /**\n     * Finds all groups matching given semantic's name and group's primary SSRC.\n     * @param {string} semantics the name of the semantics\n     * @param {number} primarySSRC the primary SSRC number to be matched\n     * @return {Object} SSRC group object as defined by the 'sdp-transform' lib.\n     */\n    findGroupByPrimarySSRC(semantics, primarySSRC) {\n        return this.ssrcGroups.find(\n            group => group.semantics === semantics\n                && parsePrimarySSRC(group) === primarySSRC);\n    }\n\n    /**\n     * @param {string|null} msid the media stream id or <tt>null</tt> to match\n     * the first SSRC object with any 'msid' value.\n     * @return {Object|undefined} the SSRC object as defined by 'sdp-transform'\n     * lib.\n     */\n    findSSRCByMSID(msid) {\n        return this.ssrcs.find(\n            ssrcObj => ssrcObj.attribute === 'msid'\n                && (msid === null || ssrcObj.value === msid));\n    }\n\n    /**\n     * Gets the SSRC count for the underlying media description.\n     * @return {number}\n     */\n    getSSRCCount() {\n        return _getSSRCCount(this.mLine);\n    }\n\n    /**\n     * Checks whether the underlying media description contains any SSRC groups.\n     * @return {boolean} <tt>true</tt> if there are any SSRC groups or\n     * <tt>false</tt> otherwise.\n     */\n    containsAnySSRCGroups() {\n        return this.mLine.ssrcGroups !== undefined;\n    }\n\n    /**\n     * Finds the primary video SSRC.\n     * @returns {number|undefined} the primary video ssrc\n     * @throws Error if the underlying media description is not a video\n     */\n    getPrimaryVideoSsrc() {\n        const mediaType = this.mLine.type;\n\n        if (mediaType !== 'video') {\n            throw new Error(\n                `getPrimarySsrc doesn't work with '${mediaType}'`);\n        }\n\n        const numSsrcs = _getSSRCCount(this.mLine);\n\n        if (numSsrcs === 1) {\n            // Not using \"ssrcs\" getter on purpose here\n            return this.mLine.ssrcs[0].id;\n        }\n\n        // Look for a SIM, FID, or FEC-FR group\n        if (this.mLine.ssrcGroups) {\n            const simGroup = this.findGroup('SIM');\n\n            if (simGroup) {\n                return parsePrimarySSRC(simGroup);\n            }\n            const fidGroup = this.findGroup('FID');\n\n            if (fidGroup) {\n                return parsePrimarySSRC(fidGroup);\n            }\n            const fecGroup = this.findGroup('FEC-FR');\n\n            if (fecGroup) {\n                return parsePrimarySSRC(fecGroup);\n            }\n        }\n\n    }\n\n    /**\n     * Obtains RTX SSRC from the underlying video description (the\n     * secondary SSRC of the first \"FID\" group found)\n     * @param {number} primarySsrc the video ssrc for which to find the\n     * corresponding rtx ssrc\n     * @returns {number|undefined} the rtx ssrc (or undefined if there isn't\n     * one)\n     */\n    getRtxSSRC(primarySsrc) {\n        const fidGroup = this.findGroupByPrimarySSRC('FID', primarySsrc);\n\n\n        return fidGroup && parseSecondarySSRC(fidGroup);\n    }\n\n    /**\n     * Obtains all SSRCs contained in the underlying media description.\n     * @return {Array.<number>} an array with all SSRC as numbers.\n     */\n    getSSRCs() {\n        return this.ssrcs\n            .map(ssrcInfo => ssrcInfo.id)\n            .filter((ssrc, index, array) => array.indexOf(ssrc) === index);\n    }\n\n    /**\n     * Obtains primary video SSRCs.\n     * @return {Array.<number>} an array of all primary video SSRCs as numbers.\n     * @throws Error if the wrapped media description is not a video.\n     */\n    getPrimaryVideoSSRCs() {\n        const mediaType = this.mLine.type;\n\n        if (mediaType !== 'video') {\n            throw new Error(\n                `getPrimaryVideoSSRCs doesn't work with ${mediaType}`);\n        }\n\n        const videoSSRCs = this.getSSRCs();\n\n        for (const ssrcGroupInfo of this.ssrcGroups) {\n            // Right now, FID and FEC-FR groups are the only ones we parse to\n            // disqualify streams.  If/when others arise we'll\n            // need to add support for them here\n            if (ssrcGroupInfo.semantics === 'FID'\n                    || ssrcGroupInfo.semantics === 'FEC-FR') {\n                // secondary streams should be filtered out\n                const secondarySsrc = parseSecondarySSRC(ssrcGroupInfo);\n\n                videoSSRCs.splice(\n                    videoSSRCs.indexOf(secondarySsrc), 1);\n            }\n        }\n\n        return videoSSRCs;\n    }\n\n    /**\n     * Dumps all SSRC groups of this media description to JSON.\n     */\n    dumpSSRCGroups() {\n        return JSON.stringify(this.mLine.ssrcGroups);\n    }\n\n    /**\n     * Removes all SSRC groups which contain given SSRC number at any position.\n     * @param {number} ssrc the SSRC for which all matching groups are to be\n     * removed.\n     */\n    removeGroupsWithSSRC(ssrc) {\n        if (!this.mLine.ssrcGroups) {\n            return;\n        }\n\n        this.mLine.ssrcGroups = this.mLine.ssrcGroups\n            .filter(groupInfo => groupInfo.ssrcs.indexOf(`${ssrc}`) === -1);\n    }\n\n    /**\n     * Removes groups that match given semantics.\n     * @param {string} semantics e.g. \"SIM\" or \"FID\"\n     */\n    removeGroupsBySemantics(semantics) {\n        if (!this.mLine.ssrcGroups) {\n            return;\n        }\n\n        this.mLine.ssrcGroups\n            = this.mLine.ssrcGroups\n                .filter(groupInfo => groupInfo.semantics !== semantics);\n    }\n\n    /**\n     * Replaces SSRC (does not affect SSRC groups, but only attributes).\n     * @param {number} oldSSRC the old SSRC number\n     * @param {number} newSSRC the new SSRC number\n     */\n    replaceSSRC(oldSSRC, newSSRC) {\n        if (this.mLine.ssrcs) {\n            this.mLine.ssrcs.forEach(ssrcInfo => {\n                if (ssrcInfo.id === oldSSRC) {\n                    ssrcInfo.id = newSSRC;\n                }\n            });\n        }\n    }\n\n    /**\n     * Adds given SSRC group to this media description.\n     * @param {object} group the SSRC group object as defined by\n     * the 'sdp-transform' lib.\n     */\n    addSSRCGroup(group) {\n        this.ssrcGroups.push(group);\n    }\n}\n\n/**\n * Utility class for SDP manipulation using the 'sdp-transform' library.\n *\n * Typical use usage scenario:\n *\n * const transformer = new SdpTransformWrap(rawSdp);\n * const videoMLine = transformer.selectMedia('video);\n * if (videoMLine) {\n *     videoMLiner.addSSRCAttribute({\n *         id: 2342343,\n *         attribute: \"cname\",\n *         value: \"someCname\"\n *     });\n *     rawSdp = transformer.toRawSdp();\n * }\n */\nexport class SdpTransformWrap {\n\n    /**\n     * Creates new instance and parses the raw SDP into objects using\n     * 'sdp-transform' lib.\n     * @param {string} rawSDP the SDP in raw text format.\n     */\n    constructor(rawSDP) {\n        this.parsedSDP = transform.parse(rawSDP);\n    }\n\n    /**\n     * Selects the first media SDP of given name.\n     * @param {string} mediaType the name of the media e.g. 'audio', 'video',\n     * 'data'.\n     * @return {MLineWrap|null} return {@link MLineWrap} instance for the media\n     * line or <tt>null</tt> if not found. The object returned references\n     * the underlying SDP state held by this <tt>SdpTransformWrap</tt> instance\n     * (it's not a copy).\n     */\n    selectMedia(mediaType) {\n        const selectedMLine\n            = this.parsedSDP.media.find(mLine => mLine.type === mediaType);\n\n        return selectedMLine ? new MLineWrap(selectedMLine) : null;\n    }\n\n    /**\n     * Converts the currently stored SDP state in this instance to raw text SDP\n     * format.\n     * @return {string}\n     */\n    toRawSDP() {\n        return transform.write(this.parsedSDP);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SdpTransformUtil.js","/**\n * Status that video SIP GW service is available.\n * @type {string}\n */\nexport const STATUS_AVAILABLE = 'available';\n\n/**\n * Status that video SIP GW service is not available.\n * @type {string}\n */\nexport const STATUS_UNDEFINED = 'undefined';\n\n/**\n * Status that video SIP GW service is available but there are no free nodes\n * at the moment to serve new requests.\n * @type {string}\n */\nexport const STATUS_BUSY = 'busy';\n\n/**\n * Video SIP GW session state, currently running.\n * @type {string}\n */\nexport const STATE_ON = 'on';\n\n/**\n * Video SIP GW session state, currently stopped and not running.\n * @type {string}\n */\nexport const STATE_OFF = 'off';\n\n/**\n * Video SIP GW session state, currently is starting.\n * @type {string}\n */\nexport const STATE_PENDING = 'pending';\n\n/**\n * Video SIP GW session state, has observed some issues and is retrying at the\n * moment.\n * @type {string}\n */\nexport const STATE_RETRYING = 'retrying';\n\n/**\n * Video SIP GW session state, tried to start but it failed.\n * @type {string}\n */\nexport const STATE_FAILED = 'failed';\n\n/**\n * Error on trying to create video SIP GW session in conference where\n * there is no room connection (hasn't joined or has left the room).\n * @type {string}\n */\nexport const ERROR_NO_CONNECTION = 'error_no_connection';\n\n/**\n * Error on trying to create video SIP GW session with address for which\n * there is an already created session.\n * @type {string}\n */\nexport const ERROR_SESSION_EXISTS = 'error_session_already_exists';\n\n\n\n// WEBPACK FOOTER //\n// ./modules/videosipgw/VideoSIPGWConstants.js","/**\n * Indicates that the local connection statistics were updated.\n */\nexport const LOCAL_STATS_UPDATED = 'cq.local_stats_updated';\n\n/**\n * Indicates that the connection statistics for a particular remote participant\n * were updated.\n */\nexport const REMOTE_STATS_UPDATED = 'cq.remote_stats_updated';\n\n\n\n// WEBPACK FOOTER //\n// ./service/connectivity/ConnectionQualityEvents.js","/**\n * The errors for the conference.\n */\n\n/**\n * Indicates that client must be authenticated to create the conference.\n */\nexport const AUTHENTICATION_REQUIRED = 'conference.authenticationRequired';\n\n/**\n * Indicates that chat error occurred.\n */\nexport const CHAT_ERROR = 'conference.chatError';\n\n/**\n * Indicates that conference has been destroyed.\n */\nexport const CONFERENCE_DESTROYED = 'conference.destroyed';\n\n/**\n * Indicates that max users limit has been reached.\n */\nexport const CONFERENCE_MAX_USERS = 'conference.max_users';\n\n/**\n * Indicates that a connection error occurred when trying to join a conference.\n */\nexport const CONNECTION_ERROR = 'conference.connectionError';\n\n/**\n * Indicates that a connection error is due to not allowed,\n * occurred when trying to join a conference.\n */\nexport const NOT_ALLOWED_ERROR = 'conference.connectionError.notAllowed';\n\n/**\n * Indicates that focus error happened.\n */\nexport const FOCUS_DISCONNECTED = 'conference.focusDisconnected';\n\n/**\n * Indicates that focus left the conference.\n */\nexport const FOCUS_LEFT = 'conference.focusLeft';\n\n/**\n * Indicates that graceful shutdown happened.\n */\nexport const GRACEFUL_SHUTDOWN = 'conference.gracefulShutdown';\n\n/**\n * Indicates that the versions of the server side components are incompatible\n * with the client side.\n */\nexport const INCOMPATIBLE_SERVER_VERSIONS\n    = 'conference.incompatible_server_versions';\n\n/**\n * Indicates that jingle fatal error happened.\n */\nexport const JINGLE_FATAL_ERROR = 'conference.jingleFatalError';\n\n/**\n * Indicates that password cannot be set for this conference.\n */\nexport const PASSWORD_NOT_SUPPORTED = 'conference.passwordNotSupported';\n\n/**\n * Indicates that a password is required in order to join the conference.\n */\nexport const PASSWORD_REQUIRED = 'conference.passwordRequired';\n\n/**\n * Indicates that reservation system returned error.\n */\nexport const RESERVATION_ERROR = 'conference.reservationError';\n\n/**\n * Indicates that the conference setup failed.\n */\nexport const SETUP_FAILED = 'conference.setup_failed';\n\n/**\n * Indicates that there is no available videobridge.\n */\nexport const VIDEOBRIDGE_NOT_AVAILABLE = 'conference.videobridgeNotAvailable';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConferenceErrors.js","const Resolutions = {\n    '1080': {\n        width: 1920,\n        height: 1080,\n        order: 7\n    },\n    'fullhd': {\n        width: 1920,\n        height: 1080,\n        order: 7\n    },\n    '720': {\n        width: 1280,\n        height: 720,\n        order: 6\n    },\n    'hd': {\n        width: 1280,\n        height: 720,\n        order: 6\n    },\n    '960': {\n        width: 960,\n        height: 720,\n        order: 5\n    },\n\n    // 16:9 resolution first.\n    '360': {\n        width: 640,\n        height: 360,\n        order: 4\n    },\n    '640': {\n        width: 640,\n        height: 480,\n        order: 3\n    },\n    'vga': {\n        width: 640,\n        height: 480,\n        order: 3\n    },\n\n    // 16:9 resolution first.\n    '180': {\n        width: 320,\n        height: 180,\n        order: 2\n    },\n    '320': {\n        width: 320,\n        height: 240,\n        order: 1\n    }\n};\n\nmodule.exports = Resolutions;\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/Resolutions.js","/* global __filename */\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as JitsiConferenceEvents from '../../JitsiConferenceEvents';\nimport * as JitsiTrackEvents from '../../JitsiTrackEvents';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport browser from '../browser';\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport Statistics from '../statistics/statistics';\n\nconst logger = getLogger(__filename);\n\n/**\n * Default value of 500 milliseconds for\n * {@link ParticipantConnectionStatus.outOfLastNTimeout}.\n *\n * @type {number}\n */\nconst DEFAULT_NOT_IN_LAST_N_TIMEOUT = 500;\n\n/**\n * Default value of 2000 milliseconds for\n * {@link ParticipantConnectionStatus.rtcMuteTimeout}.\n *\n * @type {number}\n */\nconst DEFAULT_RTC_MUTE_TIMEOUT = 2000;\n\n/**\n * The time to wait a track to be restored. Track which was out of lastN\n * should be inactive and when entering lastN it becomes restoring and when\n * data is received from bridge it will become active, but if no data is\n * received for some time we set status of that participant connection to\n * interrupted.\n * @type {number}\n */\nconst DEFAULT_RESTORING_TIMEOUT = 5000;\n\n/**\n * Participant connection statuses.\n *\n * @type {{\n *      ACTIVE: string,\n *      INACTIVE: string,\n *      INTERRUPTED: string,\n *      RESTORING: string\n * }}\n */\nexport const ParticipantConnectionStatus = {\n    /**\n     * Status indicating that connection is currently active.\n     */\n    ACTIVE: 'active',\n\n    /**\n     * Status indicating that connection is currently inactive.\n     * Inactive means the connection was stopped on purpose from the bridge,\n     * like exiting lastN or adaptivity decided to drop video because of not\n     * enough bandwidth.\n     */\n    INACTIVE: 'inactive',\n\n    /**\n     * Status indicating that connection is currently interrupted.\n     */\n    INTERRUPTED: 'interrupted',\n\n    /**\n     * Status indicating that connection is currently restoring.\n     */\n    RESTORING: 'restoring'\n};\n\n/**\n * Class is responsible for emitting\n * JitsiConferenceEvents.PARTICIPANT_CONN_STATUS_CHANGED events.\n */\nexport default class ParticipantConnectionStatusHandler {\n    /* eslint-disable max-params*/\n    /**\n     * Calculates the new {@link ParticipantConnectionStatus} based on\n     * the values given for some specific remote user. It is assumed that\n     * the conference is currently in the JVB mode (in contrary to the P2P mode)\n     * @param {boolean} isConnectionActiveByJvb true if the JVB did not get any\n     * data from the user for the last 15 seconds.\n     * @param {boolean} isInLastN indicates whether the user is in the last N\n     * set. When set to false it means that JVB is not sending any video for\n     * the user.\n     * @param {boolean} isRestoringTimedout if true it means that the user has\n     * been outside of last N too long to be considered\n     * {@link ParticipantConnectionStatus.RESTORING}.\n     * @param {boolean} isVideoMuted true if the user is video muted and we\n     * should not expect to receive any video.\n     * @param {boolean} isVideoTrackFrozen if the current browser support video\n     * frozen detection then it will be set to true when the video track is\n     * frozen. If the current browser does not support frozen detection the it's\n     * always false.\n     * @return {ParticipantConnectionStatus} the new connection status for\n     * the user for whom the values above were provided.\n     * @private\n     */\n    static _getNewStateForJvbMode(\n            isConnectionActiveByJvb,\n            isInLastN,\n            isRestoringTimedout,\n            isVideoMuted,\n            isVideoTrackFrozen) {\n        if (!isConnectionActiveByJvb) {\n            // when there is a connection problem signaled from jvb\n            // it means no media was flowing for at least 15secs, so both audio\n            // and video are most likely interrupted\n            return ParticipantConnectionStatus.INTERRUPTED;\n        } else if (isVideoMuted) {\n            // If the connection is active according to JVB and the user is\n            // video muted there is no way for the connection to be inactive,\n            // because the detection logic below only makes sense for video.\n            return ParticipantConnectionStatus.ACTIVE;\n        }\n\n        // Logic when isVideoTrackFrozen is supported\n        if (browser.supportsVideoMuteOnConnInterrupted()) {\n            if (!isVideoTrackFrozen) {\n                // If the video is playing we're good\n                return ParticipantConnectionStatus.ACTIVE;\n            } else if (isInLastN) {\n                return isRestoringTimedout\n                    ? ParticipantConnectionStatus.INTERRUPTED\n                    : ParticipantConnectionStatus.RESTORING;\n            }\n\n            return ParticipantConnectionStatus.INACTIVE;\n        }\n\n        // Because this browser is incapable of detecting frozen video we must\n        // rely on the lastN value\n        return isInLastN\n            ? ParticipantConnectionStatus.ACTIVE\n            : ParticipantConnectionStatus.INACTIVE;\n    }\n\n    /* eslint-enable max-params*/\n\n    /**\n     * In P2P mode we don't care about any values coming from the JVB and\n     * the connection status can be only active or interrupted.\n     * @param {boolean} isVideoMuted the user if video muted\n     * @param {boolean} isVideoTrackFrozen true if the video track for\n     * the remote user is currently frozen. If the current browser does not\n     * support video frozen detection then it's always false.\n     * @return {ParticipantConnectionStatus}\n     * @private\n     */\n    static _getNewStateForP2PMode(isVideoMuted, isVideoTrackFrozen) {\n        if (!browser.supportsVideoMuteOnConnInterrupted()) {\n            // There's no way to detect problems in P2P when there's no video\n            // track frozen detection...\n            return ParticipantConnectionStatus.ACTIVE;\n        }\n\n        return isVideoMuted || !isVideoTrackFrozen\n            ? ParticipantConnectionStatus.ACTIVE\n            : ParticipantConnectionStatus.INTERRUPTED;\n    }\n\n    /**\n     * Creates new instance of <tt>ParticipantConnectionStatus</tt>.\n     *\n     * @constructor\n     * @param {RTC} rtc the RTC service instance\n     * @param {JitsiConference} conference parent conference instance\n     * @param {Object} options\n     * @param {number} [options.rtcMuteTimeout=2000] custom value for\n     * {@link ParticipantConnectionStatus.rtcMuteTimeout}.\n     * @param {number} [options.outOfLastNTimeout=500] custom value for\n     * {@link ParticipantConnectionStatus.outOfLastNTimeout}.\n     */\n    constructor(rtc, conference, options) {\n        this.rtc = rtc;\n        this.conference = conference;\n\n        /**\n         * A map of the \"endpoint ID\"(which corresponds to the resource part\n         * of MUC JID(nickname)) to the timeout callback IDs scheduled using\n         * window.setTimeout.\n         * @type {Object.<string, number>}\n         */\n        this.trackTimers = {};\n\n        /**\n         * This map holds the endpoint connection status received from the JVB\n         * (as it might be different than the one stored in JitsiParticipant).\n         * Required for getting back in sync when remote video track is removed.\n         * @type {Object.<string, boolean>}\n         */\n        this.connStatusFromJvb = { };\n\n        /**\n         * If video track frozen detection through RTC mute event is supported,\n         * we wait some time until video track is considered frozen. But because\n         * when the user falls out of last N it is expected for the video to\n         * freeze this timeout must be significantly reduced in \"out of last N\"\n         * case.\n         *\n         * Basically this value is used instead of {@link rtcMuteTimeout} when\n         * user is not in last N.\n         * @type {number}\n         */\n        this.outOfLastNTimeout\n            = typeof options.outOfLastNTimeout === 'number'\n                ? options.outOfLastNTimeout : DEFAULT_NOT_IN_LAST_N_TIMEOUT;\n\n        /**\n         * How long we're going to wait after the RTC video track muted event\n         * for the corresponding signalling mute event, before the connection\n         * interrupted is fired. The default value is\n         * {@link DEFAULT_RTC_MUTE_TIMEOUT}.\n         *\n         * @type {number} amount of time in milliseconds\n         */\n        this.rtcMuteTimeout\n            = typeof options.rtcMuteTimeout === 'number'\n                ? options.rtcMuteTimeout : DEFAULT_RTC_MUTE_TIMEOUT;\n\n        /**\n         * This map holds a timestamp indicating  when participant's video track\n         * was RTC muted (it is assumed that each participant can have only 1\n         * video track at a time). The purpose of storing the timestamp is to\n         * avoid the transition to disconnected status in case of legitimate\n         * video mute operation where the signalling video muted event can\n         * arrive shortly after RTC muted event.\n         *\n         * The key is participant's ID which is the same as endpoint id in\n         * the Colibri conference allocated on the JVB.\n         *\n         * The value is a timestamp measured in milliseconds obtained with\n         * <tt>Date.now()</tt>.\n         *\n         * FIXME merge this logic with NO_DATA_FROM_SOURCE event\n         *       implemented in JitsiLocalTrack by extending the event to\n         *       the remote track and allowing to set different timeout for\n         *       local and remote tracks.\n         *\n         * @type {Object.<string, number>}\n         */\n        this.rtcMutedTimestamp = { };\n        logger.info(`RtcMuteTimeout set to: ${this.rtcMuteTimeout}`);\n\n        /**\n         * This map holds the timestamps indicating when participant's video\n         * entered lastN set. Participants entering lastN will have connection\n         * status restoring and when we start receiving video will become\n         * active, but if video is not received for certain time\n         * {@link DEFAULT_RESTORING_TIMEOUT} that participant connection status\n         * will become interrupted.\n         *\n         * @type {Map<string, number>}\n         */\n        this.enteredLastNTimestamp = new Map();\n\n        /**\n         * A map of the \"endpoint ID\"(which corresponds to the resource part\n         * of MUC JID(nickname)) to the restoring timeout callback IDs\n         * scheduled using window.setTimeout.\n         *\n         * @type {Map<string, number>}\n         */\n        this.restoringTimers = new Map();\n    }\n\n    /**\n     * Gets the video frozen timeout for given user.\n     * @param {string} id endpoint/participant ID\n     * @return {number} how long are we going to wait since RTC video muted\n     * even, before a video track is considered frozen.\n     * @private\n     */\n    _getVideoFrozenTimeout(id) {\n        return this.rtc.isInLastN(id)\n            ? this.rtcMuteTimeout : this.outOfLastNTimeout;\n    }\n\n    /**\n     * Initializes <tt>ParticipantConnectionStatus</tt> and bind required event\n     * listeners.\n     */\n    init() {\n\n        this._onEndpointConnStatusChanged\n            = this.onEndpointConnStatusChanged.bind(this);\n\n        this.rtc.addListener(\n            RTCEvents.ENDPOINT_CONN_STATUS_CHANGED,\n            this._onEndpointConnStatusChanged);\n\n        // Handles P2P status changes\n        this._onP2PStatus = this.refreshConnectionStatusForAll.bind(this);\n        this.conference.on(JitsiConferenceEvents.P2P_STATUS, this._onP2PStatus);\n\n        // On some browsers MediaStreamTrack trigger \"onmute\"/\"onunmute\"\n        // events for video type tracks when they stop receiving data which is\n        // often a sign that remote user is having connectivity issues\n        if (browser.supportsVideoMuteOnConnInterrupted()) {\n\n            this._onTrackRtcMuted = this.onTrackRtcMuted.bind(this);\n            this.rtc.addListener(\n                RTCEvents.REMOTE_TRACK_MUTE, this._onTrackRtcMuted);\n\n            this._onTrackRtcUnmuted = this.onTrackRtcUnmuted.bind(this);\n            this.rtc.addListener(\n                RTCEvents.REMOTE_TRACK_UNMUTE, this._onTrackRtcUnmuted);\n\n            // Track added/removed listeners are used to bind \"mute\"/\"unmute\"\n            // event handlers\n            this._onRemoteTrackAdded = this.onRemoteTrackAdded.bind(this);\n            this.conference.on(\n                JitsiConferenceEvents.TRACK_ADDED,\n                this._onRemoteTrackAdded);\n\n            this._onRemoteTrackRemoved = this.onRemoteTrackRemoved.bind(this);\n            this.conference.on(\n                JitsiConferenceEvents.TRACK_REMOVED,\n                this._onRemoteTrackRemoved);\n\n            // Listened which will be bound to JitsiRemoteTrack to listen for\n            // signalling mute/unmute events.\n            this._onSignallingMuteChanged\n                = this.onSignallingMuteChanged.bind(this);\n        }\n\n        this._onLastNChanged = this._onLastNChanged.bind(this);\n        this.conference.on(\n            JitsiConferenceEvents.LAST_N_ENDPOINTS_CHANGED,\n            this._onLastNChanged);\n\n        this._onLastNValueChanged\n            = this.refreshConnectionStatusForAll.bind(this);\n        this.rtc.on(\n            RTCEvents.LASTN_VALUE_CHANGED, this._onLastNValueChanged);\n    }\n\n    /**\n     * Removes all event listeners and disposes of all resources held by this\n     * instance.\n     */\n    dispose() {\n\n        this.rtc.removeListener(\n            RTCEvents.ENDPOINT_CONN_STATUS_CHANGED,\n            this._onEndpointConnStatusChanged);\n\n        if (browser.supportsVideoMuteOnConnInterrupted()) {\n            this.rtc.removeListener(\n                RTCEvents.REMOTE_TRACK_MUTE,\n                this._onTrackRtcMuted);\n            this.rtc.removeListener(\n                RTCEvents.REMOTE_TRACK_UNMUTE,\n                this._onTrackRtcUnmuted);\n\n            this.conference.off(\n                JitsiConferenceEvents.TRACK_ADDED,\n                this._onRemoteTrackAdded);\n            this.conference.off(\n                JitsiConferenceEvents.TRACK_REMOVED,\n                this._onRemoteTrackRemoved);\n        }\n\n        this.conference.off(\n            JitsiConferenceEvents.LAST_N_ENDPOINTS_CHANGED,\n            this._onLastNChanged);\n\n        this.rtc.removeListener(\n            RTCEvents.LASTN_VALUE_CHANGED, this._onLastNValueChanged);\n\n        this.conference.off(\n            JitsiConferenceEvents.P2P_STATUS, this._onP2PStatus);\n\n        const participantIds = Object.keys(this.trackTimers);\n\n        for (const participantId of participantIds) {\n            this.clearTimeout(participantId);\n            this.clearRtcMutedTimestamp(participantId);\n        }\n\n        // Clear RTC connection status cache\n        this.connStatusFromJvb = {};\n    }\n\n    /**\n     * Handles RTCEvents.ENDPOINT_CONN_STATUS_CHANGED triggered when we receive\n     * notification over the data channel from the bridge about endpoint's\n     * connection status update.\n     * @param {string} endpointId the endpoint ID(MUC nickname/resource JID)\n     * @param {boolean} isActive true if the connection is OK or false otherwise\n     */\n    onEndpointConnStatusChanged(endpointId, isActive) {\n\n        logger.debug(\n            `Detector RTCEvents.ENDPOINT_CONN_STATUS_CHANGED(${Date.now()}): ${\n                endpointId}: ${isActive}`);\n\n        // Filter out events for the local JID for now\n        if (endpointId !== this.conference.myUserId()) {\n            // Store the status received over the data channels\n            this.connStatusFromJvb[endpointId] = isActive;\n            this.figureOutConnectionStatus(endpointId);\n        }\n    }\n\n    /**\n     * Changes connection status.\n     * @param {JitsiParticipant} participant\n     * @param newStatus\n     */\n    _changeConnectionStatus(participant, newStatus) {\n        if (participant.getConnectionStatus() !== newStatus) {\n\n            const endpointId = participant.getId();\n\n            participant._setConnectionStatus(newStatus);\n\n            logger.debug(\n                `Emit endpoint conn status(${Date.now()}) ${endpointId}: ${\n                    newStatus}`);\n\n            // Log the event on CallStats\n            Statistics.sendLog(\n                JSON.stringify({\n                    id: 'peer.conn.status',\n                    participant: endpointId,\n                    status: newStatus\n                }));\n\n            this.conference.eventEmitter.emit(\n                JitsiConferenceEvents.PARTICIPANT_CONN_STATUS_CHANGED,\n                endpointId, newStatus);\n        }\n    }\n\n    /**\n     * Reset the postponed \"connection interrupted\" event which was previously\n     * scheduled as a timeout on RTC 'onmute' event.\n     *\n     * @param {string} participantId the participant for which the \"connection\n     * interrupted\" timeout was scheduled\n     */\n    clearTimeout(participantId) {\n        if (this.trackTimers[participantId]) {\n            window.clearTimeout(this.trackTimers[participantId]);\n            this.trackTimers[participantId] = null;\n        }\n    }\n\n    /**\n     * Clears the timestamp of the RTC muted event for participant's video track\n     * @param {string} participantId the id of the conference participant which\n     * is the same as the Colibri endpoint ID of the video channel allocated for\n     * the user on the videobridge.\n     */\n    clearRtcMutedTimestamp(participantId) {\n        this.rtcMutedTimestamp[participantId] = null;\n    }\n\n    /**\n     * Bind signalling mute event listeners for video {JitsiRemoteTrack} when\n     * a new one is added to the conference.\n     *\n     * @param {JitsiTrack} remoteTrack the {JitsiTrack} which is being added to\n     * the conference.\n     */\n    onRemoteTrackAdded(remoteTrack) {\n        if (!remoteTrack.isLocal()\n                && remoteTrack.getType() === MediaType.VIDEO) {\n\n            logger.debug(\n                `Detector on remote track added for: ${\n                    remoteTrack.getParticipantId()}`);\n\n            remoteTrack.on(\n                JitsiTrackEvents.TRACK_MUTE_CHANGED,\n                this._onSignallingMuteChanged);\n        }\n    }\n\n    /**\n     * Removes all event listeners bound to the remote video track and clears\n     * any related timeouts.\n     *\n     * @param {JitsiRemoteTrack} remoteTrack the remote track which is being\n     * removed from the conference.\n     */\n    onRemoteTrackRemoved(remoteTrack) {\n        if (!remoteTrack.isLocal()\n                && remoteTrack.getType() === MediaType.VIDEO) {\n\n            const endpointId = remoteTrack.getParticipantId();\n\n            logger.debug(`Detector on remote track removed: ${endpointId}`);\n\n            remoteTrack.off(\n                JitsiTrackEvents.TRACK_MUTE_CHANGED,\n                this._onSignallingMuteChanged);\n\n            this.clearTimeout(endpointId);\n            this.clearRtcMutedTimestamp(endpointId);\n\n            this.figureOutConnectionStatus(endpointId);\n        }\n    }\n\n    /**\n     * Checks if given participant's video is considered frozen.\n     * @param {JitsiParticipant} participant\n     * @return {boolean} <tt>true</tt> if the video has frozen for given\n     * participant or <tt>false</tt> when it's either not considered frozen\n     * (yet) or if freeze detection is not supported by the current browser.\n     *\n     * FIXME merge this logic with NO_DATA_FROM_SOURCE event\n     *       implemented in JitsiLocalTrack by extending the event to\n     *       the remote track and allowing to set different timeout for\n     *       local and remote tracks.\n     *\n     */\n    isVideoTrackFrozen(participant) {\n        if (!browser.supportsVideoMuteOnConnInterrupted()) {\n            return false;\n        }\n\n        const id = participant.getId();\n        const hasAnyVideoRTCMuted = participant.hasAnyVideoTrackWebRTCMuted();\n        const rtcMutedTimestamp = this.rtcMutedTimestamp[id];\n        const timeout = this._getVideoFrozenTimeout(id);\n\n        return hasAnyVideoRTCMuted\n            && typeof rtcMutedTimestamp === 'number'\n            && (Date.now() - rtcMutedTimestamp) >= timeout;\n    }\n\n    /**\n     * Goes over every participant and updates connectivity status.\n     * Should be called when a parameter which affects all of the participants\n     * is changed (P2P for example).\n     */\n    refreshConnectionStatusForAll() {\n        const participants = this.conference.getParticipants();\n\n        for (const participant of participants) {\n            this.figureOutConnectionStatus(participant.getId());\n        }\n    }\n\n    /**\n     * Figures out (and updates) the current connectivity status for\n     * the participant identified by the given id.\n     *\n     * @param {string} id the participant's id (MUC nickname or Colibri endpoint\n     * ID).\n     */\n    figureOutConnectionStatus(id) {\n        const participant = this.conference.getParticipantById(id);\n\n        if (!participant) {\n            // Probably the participant is no longer in the conference\n            // (at the time of writing this code, participant is\n            // detached from the conference and TRACK_REMOVED events are\n            // fired),\n            // so we don't care, but let's print the warning for\n            // debugging purpose\n            logger.warn(`figure out conn status - no participant for: ${id}`);\n\n            return;\n        }\n\n        const inP2PMode = this.conference.isP2PActive();\n        const isRestoringTimedOut = this._isRestoringTimedout(id);\n        const audioOnlyMode = this.rtc.getLastN() === 0;\n\n        // NOTE Overriding videoMuted to true for audioOnlyMode should disable\n        // any detection based on video playback or the last N.\n        const isVideoMuted = participant.isVideoMuted() || audioOnlyMode;\n        const isVideoTrackFrozen = this.isVideoTrackFrozen(participant);\n        const isInLastN = this.rtc.isInLastN(id);\n        let isConnActiveByJvb = this.connStatusFromJvb[id];\n\n        if (typeof isConnActiveByJvb !== 'boolean') {\n            // If no status was received from the JVB it means that it's active\n            // (the bridge does not send notification unless there is a problem)\n            logger.debug('Assuming connection active by JVB - no notification');\n            isConnActiveByJvb = true;\n        }\n\n        const newState\n            = inP2PMode\n                ? ParticipantConnectionStatusHandler._getNewStateForP2PMode(\n                    isVideoMuted,\n                    isVideoTrackFrozen)\n                : ParticipantConnectionStatusHandler._getNewStateForJvbMode(\n                    isConnActiveByJvb,\n                    isInLastN,\n                    isRestoringTimedOut,\n                    isVideoMuted,\n                    isVideoTrackFrozen);\n\n        // if the new state is not restoring clear timers and timestamps\n        // that we use to track the restoring state\n        if (newState !== ParticipantConnectionStatus.RESTORING) {\n            this._clearRestoringTimer(id);\n        }\n\n        logger.debug(\n            `Figure out conn status for ${id}, is video muted: ${\n                isVideoMuted} is active(jvb): ${\n                isConnActiveByJvb} video track frozen: ${\n                isVideoTrackFrozen} p2p mode: ${\n                inP2PMode} is in last N: ${\n                isInLastN} currentStatus => newStatus: ${\n                participant.getConnectionStatus()} => ${newState}`);\n\n        this._changeConnectionStatus(participant, newState);\n    }\n\n    /**\n     * On change in Last N set check all leaving and entering participants to\n     * change their corresponding statuses.\n     *\n     * @param {Array<string>} leavingLastN array of ids leaving lastN.\n     * @param {Array<string>} enteringLastN array of ids entering lastN.\n     * @private\n     */\n    _onLastNChanged(leavingLastN = [], enteringLastN = []) {\n        const now = Date.now();\n\n        logger.debug(\n            'leaving/entering lastN', leavingLastN, enteringLastN, now);\n\n        for (const id of leavingLastN) {\n            this.enteredLastNTimestamp.delete(id);\n            this._clearRestoringTimer(id);\n            this.figureOutConnectionStatus(id);\n        }\n        for (const id of enteringLastN) {\n            // store the timestamp this id is entering lastN\n            this.enteredLastNTimestamp.set(id, now);\n            this.figureOutConnectionStatus(id);\n        }\n    }\n\n    /**\n     * Clears the restoring timer for participant's video track and the\n     * timestamp for entering lastN.\n     *\n     * @param {string} participantId the id of the conference participant which\n     * is the same as the Colibri endpoint ID of the video channel allocated for\n     * the user on the videobridge.\n     */\n    _clearRestoringTimer(participantId) {\n        const rTimer = this.restoringTimers.get(participantId);\n\n        if (rTimer) {\n            clearTimeout(rTimer);\n            this.restoringTimers.delete(participantId);\n        }\n    }\n\n    /**\n     * Checks whether a track had stayed enough in restoring state, compares\n     * current time and the time the track entered in lastN. If it hasn't\n     * timedout and there is no timer added, add new timer in order to give it\n     * more time to become active or mark it as interrupted on next check.\n     *\n     * @param {string} participantId the id of the conference participant which\n     * is the same as the Colibri endpoint ID of the video channel allocated for\n     * the user on the videobridge.\n     * @returns {boolean} <tt>true</tt> if the track was in restoring state\n     * more than the timeout ({@link DEFAULT_RESTORING_TIMEOUT}.) in order to\n     * set its status to interrupted.\n     * @private\n     */\n    _isRestoringTimedout(participantId) {\n        const enteredLastNTimestamp\n            = this.enteredLastNTimestamp.get(participantId);\n\n        if (enteredLastNTimestamp\n            && (Date.now() - enteredLastNTimestamp)\n                >= DEFAULT_RESTORING_TIMEOUT) {\n            return true;\n        }\n\n        // still haven't reached timeout, if there is no timer scheduled,\n        // schedule one so we can track the restoring state and change it after\n        // reaching the timeout\n        const rTimer = this.restoringTimers.get(participantId);\n\n        if (!rTimer) {\n            this.restoringTimers.set(participantId, setTimeout(\n                () => this.figureOutConnectionStatus(participantId),\n                DEFAULT_RESTORING_TIMEOUT));\n        }\n\n        return false;\n    }\n\n    /**\n     * Handles RTC 'onmute' event for the video track.\n     *\n     * @param {JitsiRemoteTrack} track the video track for which 'onmute' event\n     * will be processed.\n     */\n    onTrackRtcMuted(track) {\n        const participantId = track.getParticipantId();\n        const participant = this.conference.getParticipantById(participantId);\n\n        logger.debug(`Detector track RTC muted: ${participantId}`, Date.now());\n        if (!participant) {\n            logger.error(`No participant for id: ${participantId}`);\n\n            return;\n        }\n        this.rtcMutedTimestamp[participantId] = Date.now();\n        if (!participant.isVideoMuted()) {\n            // If the user is not muted according to the signalling we'll give\n            // it some time, before the connection interrupted event is\n            // triggered.\n            this.clearTimeout(participantId);\n\n            // The timeout is reduced when user is not in the last N\n            const timeout = this._getVideoFrozenTimeout(participantId);\n\n            this.trackTimers[participantId] = window.setTimeout(() => {\n                logger.debug(\n                    `Set RTC mute timeout for: ${participantId}\\\n                     of ${timeout} ms`);\n                this.clearTimeout(participantId);\n                this.figureOutConnectionStatus(participantId);\n            }, timeout);\n        }\n    }\n\n    /**\n     * Handles RTC 'onunmute' event for the video track.\n     *\n     * @param {JitsiRemoteTrack} track the video track for which 'onunmute'\n     * event will be processed.\n     */\n    onTrackRtcUnmuted(track) {\n        const participantId = track.getParticipantId();\n\n        logger.debug(\n            `Detector track RTC unmuted: ${participantId}`, Date.now());\n\n        this.clearTimeout(participantId);\n        this.clearRtcMutedTimestamp(participantId);\n\n        this.figureOutConnectionStatus(participantId);\n    }\n\n    /**\n     * Here the signalling \"mute\"/\"unmute\" events are processed.\n     *\n     * @param {JitsiRemoteTrack} track the remote video track for which\n     * the signalling mute/unmute event will be processed.\n     */\n    onSignallingMuteChanged(track) {\n        const participantId = track.getParticipantId();\n\n        logger.debug(\n            `Detector on track signalling mute changed: ${participantId}`,\n            track.isMuted());\n\n        this.figureOutConnectionStatus(participantId);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/connectivity/ParticipantConnectionStatus.js","/**\n * Indicates that the end-to-end round-trip-time for a participant has changed.\n */\nexport const E2E_RTT_CHANGED = 'e2eping.e2e_rtt_changed';\n\n\n\n// WEBPACK FOOTER //\n// ./service/e2eping/E2ePingEvents.js","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Ordered log levels.\n */\nvar levels = {\n    \"trace\": 0,\n    \"debug\": 1,\n    \"info\": 2,\n    \"log\": 3,\n    \"warn\": 4,\n    \"error\": 5\n};\n\n/**\n * The default transport - console\n * @type LoggerTransport\n */\nLogger.consoleTransport = console;\n\n/**\n * The array which stores currently registered global transports.\n * @type {[LoggerTransport]}\n */\nvar globalTransports = [ Logger.consoleTransport ];\n\n/**\n * Adds given {@link LoggerTransport} instance to the list of global\n * transports which means that it'll be used by all {@link Logger}s\n * @param {LoggerTransport} transport\n */\nLogger.addGlobalTransport = function(transport) {\n    if (globalTransports.indexOf(transport) === -1) {\n        globalTransports.push(transport);\n    }\n};\n\n/**\n * Removes given {@link LoggerTransport} instance from the list of global\n * transports\n * @param {LoggerTransport} transport\n */\nLogger.removeGlobalTransport = function(transport) {\n    var transportIdx = globalTransports.indexOf(transport);\n    if (transportIdx !== -1) {\n        globalTransports.splice(transportIdx, 1);\n    }\n};\n\n/**\n * Parses Error's object stack trace and extracts information about the last\n * caller before the log method was called.\n * @returns JS object with info about the caller - method name, file location,\n * line and column.\n */\nfunction getCallerInfo() {\n    var callerInfo = {\n        methodName: \"\",\n        fileLocation: \"\",\n        line: null,\n        column: null\n    };\n    //gets the part of the stack without the logger wrappers\n    var error = new Error();\n    var stack = error.stack? error.stack.split(\"\\n\") : [];\n    if(!stack || stack.length < 1) {\n        return callerInfo;\n    }\n    var m = null;\n    if(stack[3]) {\n        m = stack[3].match(/\\s*at\\s*(.+?)\\s*\\((\\S*)\\s*:(\\d*)\\s*:(\\d*)\\)/);\n    }\n    if(!m || m.length <= 4) {\n        //Firefox && Safari\n        if(stack[2].indexOf(\"log@\") === 0){\n            //Safari\n            callerInfo.methodName = stack[3].substr(0, stack[3].indexOf(\"@\"));\n        } else {\n            //Firefox\n            callerInfo.methodName = stack[2].substr(0, stack[2].indexOf(\"@\"));\n        }\n        return callerInfo;\n    }\n\n    callerInfo.methodName = m[1];\n    callerInfo.fileLocation = m[2];\n    callerInfo.line = m[3];\n    callerInfo.column = m[4];\n    return callerInfo;\n}\n\n/**\n * Logs messages using the transports and level from the logger.\n * @param logger a logger instance.\n * @param level the log level of the message. See the levels variable.\n * @param arguments array with arguments that will be logged.\n */\nfunction log() {\n    var logger = arguments[0], level = arguments[1],\n        args = Array.prototype.slice.call(arguments, 2);\n    if(levels[level] < logger.level) {\n        return;\n    }\n\n    var callerInfo = getCallerInfo();\n    var transports = globalTransports.concat(logger.transports);\n    for(var i = 0; i < transports.length; i++) {\n        var t = transports[i];\n        var l = t[level];\n        if(l && typeof(l) === \"function\") {\n            l.bind(t, logger.id? \"[\" + logger.id + \"]\" : \"\", \"<\" + callerInfo.methodName + \">: \")\n                .apply(t, args);\n        }\n    }\n}\n\n/**\n *\n * Constructs new logger object.\n * @param level the logging level for the new logger\n * @param id optional identifier for the logger instance.\n * @param {LoggerTransport} transports optional list of handlers(objects) for\n * the logs. The handlers must support - log, warn, error, debug, info, trace.\n * @param format optional (NOT implemented) string.\n */\nfunction Logger(level, id, transports, format) {\n    this.id = id;\n    this.format = format;\n    this.transports = transports;\n    if(!this.transports) {\n        this.transports = [];\n    }\n    this.level = levels[level];\n    var methods = Object.keys(levels);\n    for(var i = 0; i < methods.length; i++){\n        this[methods[i]] =\n            log.bind(null, this, methods[i]);\n    }\n}\n\n/**\n * Sets the log level for the logger.\n * @param level the new log level.\n */\nLogger.prototype.setLevel = function (level) {\n    this.level = levels[level];\n};\nmodule.exports = Logger;\n\n/**\n * Enum for the supported log levels.\n */\nLogger.levels = {\n    TRACE: \"trace\",\n    DEBUG: \"debug\",\n    INFO: \"info\",\n    LOG: \"log\",\n    WARN: \"warn\",\n    ERROR: \"error\"\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/jitsi-meet-logger/lib/Logger.js\n// module id = 33\n// module chunks = 0","export * from './browser-capabilities';\nexport * from './browser-detection';\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/js-utils/index.js","export { default as BrowserDetection } from './BrowserDetection';\nexport * as browsers from './browsers';\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/js-utils/browser-detection/index.js","// TODO: Maybe fix the values to 'Chrome', 'Internet Explorer', etc. Currently\n// this values needs to be as they are becuse they are going to analytics,\n// callstats, etc.\n\nexport const CHROME = 'chrome';\n\nexport const OPERA = 'opera';\n\nexport const FIREFOX = 'firefox';\n\nexport const INTERNET_EXPLORER = 'iexplorer';\n\nexport const EDGE = 'edge';\n\nexport const SAFARI = 'safari';\n\nexport const NWJS = 'nwjs';\n\nexport const ELECTRON = 'electron';\n\nexport const REACT_NATIVE = 'react-native';\n\nexport const UNKNOWN = 'unknown';\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/js-utils/browser-detection/browsers.js","/**\n * Provides statistics for the local stream.\n */\n\n/**\n * Size of the webaudio analyzer buffer.\n * @type {number}\n */\nconst WEBAUDIO_ANALYZER_FFT_SIZE = 2048;\n\n/**\n * Value of the webaudio analyzer smoothing time parameter.\n * @type {number}\n */\nconst WEBAUDIO_ANALYZER_SMOOTING_TIME = 0.8;\n\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext;\n\nlet context = null;\n\nif (window.AudioContext) {\n    context = new AudioContext();\n\n    // XXX Not all browsers define a suspend method on AudioContext. As the\n    // invocation is at the (ES6 module) global execution level, it breaks the\n    // loading of the lib-jitsi-meet library in such browsers and, consequently,\n    // the loading of the very Web app that uses the lib-jitsi-meet library. For\n    // example, Google Chrome 40 on Android does not define the method but we\n    // still want to be able to load the lib-jitsi-meet library there and\n    // display a page which notifies the user that the Web app is not supported\n    // there.\n    context.suspend && context.suspend();\n}\n\n/**\n * Converts time domain data array to audio level.\n * @param samples the time domain data array.\n * @returns {number} the audio level\n */\nfunction timeDomainDataToAudioLevel(samples) {\n\n    let maxVolume = 0;\n\n    const length = samples.length;\n\n    for (let i = 0; i < length; i++) {\n        if (maxVolume < samples[i]) {\n            maxVolume = samples[i];\n        }\n    }\n\n    return parseFloat(((maxVolume - 127) / 128).toFixed(3));\n}\n\n/**\n * Animates audio level change\n * @param newLevel the new audio level\n * @param lastLevel the last audio level\n * @returns {Number} the audio level to be set\n */\nfunction animateLevel(newLevel, lastLevel) {\n    let value = 0;\n    const diff = lastLevel - newLevel;\n\n    if (diff > 0.2) {\n        value = lastLevel - 0.2;\n    } else if (diff < -0.4) {\n        value = lastLevel + 0.4;\n    } else {\n        value = newLevel;\n    }\n\n    return parseFloat(value.toFixed(3));\n}\n\n\n/**\n * <tt>LocalStatsCollector</tt> calculates statistics for the local stream.\n *\n * @param stream the local stream\n * @param interval stats refresh interval given in ms.\n * @param callback function that receives the audio levels.\n * @constructor\n */\nexport default function LocalStatsCollector(stream, interval, callback) {\n    this.stream = stream;\n    this.intervalId = null;\n    this.intervalMilis = interval;\n    this.audioLevel = 0;\n    this.callback = callback;\n}\n\n/**\n * Starts the collecting the statistics.\n */\nLocalStatsCollector.prototype.start = function() {\n    if (!LocalStatsCollector.isLocalStatsSupported()) {\n        return;\n    }\n    context.resume();\n    const analyser = context.createAnalyser();\n\n    analyser.smoothingTimeConstant = WEBAUDIO_ANALYZER_SMOOTING_TIME;\n    analyser.fftSize = WEBAUDIO_ANALYZER_FFT_SIZE;\n\n    const source = context.createMediaStreamSource(this.stream);\n\n    source.connect(analyser);\n\n\n    const self = this;\n\n    this.intervalId = setInterval(\n        () => {\n            const array = new Uint8Array(analyser.frequencyBinCount);\n\n            analyser.getByteTimeDomainData(array);\n            const audioLevel = timeDomainDataToAudioLevel(array);\n\n            if (audioLevel !== self.audioLevel) {\n                self.audioLevel = animateLevel(audioLevel, self.audioLevel);\n                self.callback(self.audioLevel);\n            }\n        },\n        this.intervalMilis\n    );\n};\n\n/**\n * Stops collecting the statistics.\n */\nLocalStatsCollector.prototype.stop = function() {\n    if (this.intervalId) {\n        clearInterval(this.intervalId);\n        this.intervalId = null;\n    }\n};\n\n/**\n * Checks if the environment has the necessary conditions to support\n * collecting stats from local streams.\n *\n * @returns {boolean}\n */\nLocalStatsCollector.isLocalStatsSupported = function() {\n    return Boolean(context);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/LocalStatsCollector.js","/**\n * Notifies about audio level in RTP statistics by SSRC.\n *\n * @param ssrc - The synchronization source identifier (SSRC) of the\n * endpoint/participant whose audio level is being reported.\n * @param {number} audioLevel - The audio level of <tt>ssrc</tt> according to\n * RTP statistics.\n * @param {boolean} isLocal - <tt>true</tt> if <tt>ssrc</tt> identifies the\n * local endpoint/participant; otherwise, <tt>false</tt>.\n */\nexport const AUDIO_LEVEL = 'statistics.audioLevel';\n\n/**\n * An event fired just before the statistics module gets disposes and it's\n * the last chance to submit some logs that will end up in stats services like\n * CallStats (if enabled).\n */\nexport const BEFORE_DISPOSED = 'statistics.before_disposed';\n\n/**\n * An event carrying all statistics by ssrc.\n */\nexport const BYTE_SENT_STATS = 'statistics.byte_sent_stats';\n\n/**\n * An event carrying connection statistics.\n *\n * @param {object} connectionStats - The connection statistics carried by the\n * event such as <tt>bandwidth</tt>, <tt>bitrate</tt>, <tt>packetLoss</tt>,\n * <tt>resolution</tt>, and <tt>transport</tt>.\n */\nexport const CONNECTION_STATS = 'statistics.connectionstats';\n\n\n\n// WEBPACK FOOTER //\n// ./service/statistics/Events.js","const currentExecutingScript = require('current-executing-script');\n\n/* eslint-disable max-params */\n\n/**\n * Implements utility functions which facilitate the dealing with scripts such\n * as the download and execution of a JavaScript file.\n */\nconst ScriptUtil = {\n    /**\n     * Loads a script from a specific source.\n     *\n     * @param src the source from the which the script is to be (down)loaded\n     * @param async true to asynchronously load the script or false to\n     * synchronously load the script\n     * @param prepend true to schedule the loading of the script as soon as\n     * possible or false to schedule the loading of the script at the end of the\n     * scripts known at the time\n     * @param relativeURL whether we need load the library from url relative\n     * to the url that lib-jitsi-meet was loaded. Useful when sourcing the\n     * library from different location than the app that is using it\n     * @param loadCallback on load callback function\n     * @param errorCallback callback to be called on error loading the script\n     */\n    loadScript(\n            src,\n            async,\n            prepend,\n            relativeURL,\n            loadCallback,\n            errorCallback) {\n        const d = document;\n        const tagName = 'script';\n        const script = d.createElement(tagName);\n        const referenceNode = d.getElementsByTagName(tagName)[0];\n\n        script.async = async;\n\n        if (relativeURL) {\n            // finds the src url of the current loaded script\n            // and use it as base of the src supplied argument\n            const scriptEl = currentExecutingScript();\n\n            if (scriptEl) {\n                const scriptSrc = scriptEl.src;\n                const baseScriptSrc\n                    = scriptSrc.substring(0, scriptSrc.lastIndexOf('/') + 1);\n\n                if (scriptSrc && baseScriptSrc) {\n                    // eslint-disable-next-line no-param-reassign\n                    src = baseScriptSrc + src;\n                }\n            }\n        }\n\n        if (loadCallback) {\n            script.onload = loadCallback;\n        }\n        if (errorCallback) {\n            script.onerror = errorCallback;\n        }\n\n        script.src = src;\n        if (prepend) {\n            referenceNode.parentNode.insertBefore(script, referenceNode);\n        } else {\n            referenceNode.parentNode.appendChild(script);\n        }\n    }\n};\n\n/* eslint-enable max-params */\n\nmodule.exports = ScriptUtil;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/ScriptUtil.js","/* global $ */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport { Strophe } from 'strophe.js';\nimport 'strophejs-plugin-disco';\n\nimport RandomUtil from '../util/RandomUtil';\nimport * as JitsiConnectionErrors from '../../JitsiConnectionErrors';\nimport * as JitsiConnectionEvents from '../../JitsiConnectionEvents';\nimport browser from '../browser';\nimport initEmuc from './strophe.emuc';\nimport initJingle from './strophe.jingle';\nimport initStropheUtil from './strophe.util';\nimport initPing from './strophe.ping';\nimport initRayo from './strophe.rayo';\nimport initStropheLogger from './strophe.logger';\nimport Listenable from '../util/Listenable';\nimport Caps from './Caps';\n\nconst logger = getLogger(__filename);\n\n/**\n *\n * @param token\n * @param bosh\n */\nfunction createConnection(token, bosh = '/http-bind') {\n    // Append token as URL param\n    if (token) {\n        // eslint-disable-next-line no-param-reassign\n        bosh += `${bosh.indexOf('?') === -1 ? '?' : '&'}token=${token}`;\n    }\n\n    const conn = new Strophe.Connection(bosh);\n\n    // The default maxRetries is 5, which is too long.\n    conn.maxRetries = 3;\n\n    return conn;\n}\n\n/**\n *\n */\nexport default class XMPP extends Listenable {\n    /**\n     * FIXME describe all options\n     * @param {Object} options\n     * @param {Array<Object>} options.p2pStunServers see\n     * {@link JingleConnectionPlugin} for more details.\n     * @param token\n     */\n    constructor(options, token) {\n        super();\n        this.connection = null;\n        this.disconnectInProgress = false;\n        this.connectionTimes = {};\n        this.options = options;\n        this.token = token;\n        this.authenticatedUser = false;\n        this._initStrophePlugins(this);\n\n        this.connection = createConnection(token, options.bosh);\n\n        this.caps = new Caps(this.connection, this.options.clientNode);\n\n        // Initialize features advertised in disco-info\n        this.initFeaturesList();\n\n        // Setup a disconnect on unload as a way to facilitate API consumers. It\n        // sounds like they would want that. A problem for them though may be if\n        // they wanted to utilize the connected connection in an unload handler\n        // of their own. However, it should be fairly easy for them to do that\n        // by registering their unload handler before us.\n        $(window).on('beforeunload unload', this.disconnect.bind(this));\n    }\n\n    /**\n     * Initializes the list of feature advertised through the disco-info\n     * mechanism.\n     */\n    initFeaturesList() {\n        // http://xmpp.org/extensions/xep-0167.html#support\n        // http://xmpp.org/extensions/xep-0176.html#support\n        this.caps.addFeature('urn:xmpp:jingle:1');\n        this.caps.addFeature('urn:xmpp:jingle:apps:rtp:1');\n        this.caps.addFeature('urn:xmpp:jingle:transports:ice-udp:1');\n        this.caps.addFeature('urn:xmpp:jingle:apps:dtls:0');\n        this.caps.addFeature('urn:xmpp:jingle:transports:dtls-sctp:1');\n        this.caps.addFeature('urn:xmpp:jingle:apps:rtp:audio');\n        this.caps.addFeature('urn:xmpp:jingle:apps:rtp:video');\n\n        if (!this.options.disableRtx && browser.supportsRtx()) {\n            this.caps.addFeature('urn:ietf:rfc:4588');\n        }\n\n        // this is dealt with by SDP O/A so we don't need to announce this\n        // XEP-0293\n        // this.caps.addFeature('urn:xmpp:jingle:apps:rtp:rtcp-fb:0');\n        // XEP-0294\n        // this.caps.addFeature('urn:xmpp:jingle:apps:rtp:rtp-hdrext:0');\n\n        this.caps.addFeature('urn:ietf:rfc:5761'); // rtcp-mux\n        this.caps.addFeature('urn:ietf:rfc:5888'); // a=group, e.g. bundle\n\n        // this.caps.addFeature('urn:ietf:rfc:5576'); // a=ssrc\n\n        // Enable Lipsync ?\n        if (browser.isChrome() && this.options.enableLipSync !== false) {\n            logger.info('Lip-sync enabled !');\n            this.caps.addFeature('http://jitsi.org/meet/lipsync');\n        }\n\n        if (this.connection.rayo) {\n            this.caps.addFeature('urn:xmpp:rayo:client:1');\n        }\n    }\n\n    /**\n     *\n     */\n    getConnection() {\n        return this.connection;\n    }\n\n    /**\n     * Receive connection status changes and handles them.\n     *\n     * @param {Object} credentials\n     * @param {string} credentials.jid - The user's XMPP ID passed to the\n     * connect method. For example, 'user@xmpp.com'.\n     * @param {string} credentials.password - The password passed to the connect\n     * method.\n     * @param {string} status - One of Strophe's connection status strings.\n     * @param {string} [msg] - The connection error message provided by Strophe.\n     */\n    connectionHandler(credentials = {}, status, msg) {\n        const now = window.performance.now();\n        const statusStr = Strophe.getStatusString(status).toLowerCase();\n\n        this.connectionTimes[statusStr] = now;\n        logger.log(\n            `(TIME) Strophe ${statusStr}${msg ? `[${msg}]` : ''}:\\t`,\n            now);\n        if (status === Strophe.Status.CONNECTED\n            || status === Strophe.Status.ATTACHED) {\n            if (this.options.useStunTurn\n                || (this.options.p2p && this.options.p2p.useStunTurn)) {\n                this.connection.jingle.getStunAndTurnCredentials();\n            }\n\n            logger.info(`My Jabber ID: ${this.connection.jid}`);\n\n            // Schedule ping ?\n            const pingJid = this.connection.domain;\n\n            this.connection.ping.hasPingSupport(\n                pingJid,\n                hasPing => {\n                    if (hasPing) {\n                        this.connection.ping.startInterval(pingJid);\n                    } else {\n                        logger.warn(`Ping NOT supported by ${pingJid}`);\n                    }\n                });\n\n            if (credentials.password) {\n                this.authenticatedUser = true;\n            }\n            if (this.connection && this.connection.connected\n                    && Strophe.getResourceFromJid(this.connection.jid)) {\n                // .connected is true while connecting?\n                // this.connection.send($pres());\n                this.eventEmitter.emit(\n                    JitsiConnectionEvents.CONNECTION_ESTABLISHED,\n                    Strophe.getResourceFromJid(this.connection.jid));\n            }\n        } else if (status === Strophe.Status.CONNFAIL) {\n            if (msg === 'x-strophe-bad-non-anon-jid') {\n                this.anonymousConnectionFailed = true;\n            } else {\n                this.connectionFailed = true;\n            }\n            this.lastErrorMsg = msg;\n            if (msg === 'giving-up') {\n                this.eventEmitter.emit(\n                    JitsiConnectionEvents.CONNECTION_FAILED,\n                    JitsiConnectionErrors.OTHER_ERROR, msg);\n            }\n        } else if (status === Strophe.Status.DISCONNECTED) {\n            // Stop ping interval\n            this.connection.ping.stopInterval();\n            const wasIntentionalDisconnect = this.disconnectInProgress;\n            const errMsg = msg || this.lastErrorMsg;\n\n            this.disconnectInProgress = false;\n            if (this.anonymousConnectionFailed) {\n                // prompt user for username and password\n                this.eventEmitter.emit(\n                    JitsiConnectionEvents.CONNECTION_FAILED,\n                    JitsiConnectionErrors.PASSWORD_REQUIRED);\n            } else if (this.connectionFailed) {\n                this.eventEmitter.emit(\n                    JitsiConnectionEvents.CONNECTION_FAILED,\n                    JitsiConnectionErrors.OTHER_ERROR,\n                    errMsg,\n                    undefined, /* credentials */\n                    this._getConnectionFailedReasonDetails());\n            } else if (wasIntentionalDisconnect) {\n                this.eventEmitter.emit(\n                    JitsiConnectionEvents.CONNECTION_DISCONNECTED, errMsg);\n            } else {\n                // XXX if Strophe drops the connection while not being asked to,\n                // it means that most likely some serious error has occurred.\n                // One currently known case is when a BOSH request fails for\n                // more than 4 times. The connection is dropped without\n                // supplying a reason(error message/event) through the API.\n                logger.error('XMPP connection dropped!');\n\n                // XXX if the last request error is within 5xx range it means it\n                // was a server failure\n                const lastErrorStatus = Strophe.getLastErrorStatus();\n\n                if (lastErrorStatus >= 500 && lastErrorStatus < 600) {\n                    this.eventEmitter.emit(\n                        JitsiConnectionEvents.CONNECTION_FAILED,\n                        JitsiConnectionErrors.SERVER_ERROR,\n                        errMsg || 'server-error');\n                } else {\n                    this.eventEmitter.emit(\n                        JitsiConnectionEvents.CONNECTION_FAILED,\n                        JitsiConnectionErrors.CONNECTION_DROPPED_ERROR,\n                        errMsg || 'connection-dropped-error');\n                }\n            }\n        } else if (status === Strophe.Status.AUTHFAIL) {\n            // wrong password or username, prompt user\n            this.eventEmitter.emit(\n                JitsiConnectionEvents.CONNECTION_FAILED,\n                JitsiConnectionErrors.PASSWORD_REQUIRED,\n                msg,\n                credentials);\n        }\n    }\n\n    /**\n     *\n     * @param jid\n     * @param password\n     */\n    _connect(jid, password) {\n        // connection.connect() starts the connection process.\n        //\n        // As the connection process proceeds, the user supplied callback will\n        // be triggered multiple times with status updates. The callback should\n        // take two arguments - the status code and the error condition.\n        //\n        // The status code will be one of the values in the Strophe.Status\n        // constants. The error condition will be one of the conditions defined\n        // in RFC 3920 or the condition strophe-parsererror.\n        //\n        // The Parameters wait, hold and route are optional and only relevant\n        // for BOSH connections. Please see XEP 124 for a more detailed\n        // explanation of the optional parameters.\n        //\n        // Connection status constants for use by the connection handler\n        // callback.\n        //\n        //  Status.ERROR - An error has occurred (websockets specific)\n        //  Status.CONNECTING - The connection is currently being made\n        //  Status.CONNFAIL - The connection attempt failed\n        //  Status.AUTHENTICATING - The connection is authenticating\n        //  Status.AUTHFAIL - The authentication attempt failed\n        //  Status.CONNECTED - The connection has succeeded\n        //  Status.DISCONNECTED - The connection has been terminated\n        //  Status.DISCONNECTING - The connection is currently being terminated\n        //  Status.ATTACHED - The connection has been attached\n\n        this.anonymousConnectionFailed = false;\n        this.connectionFailed = false;\n        this.lastErrorMsg = undefined;\n        this.connection.connect(\n            jid,\n            password,\n            this.connectionHandler.bind(this, {\n                jid,\n                password\n            }));\n    }\n\n    /**\n     * Attach to existing connection. Can be used for optimizations. For\n     * example: if the connection is created on the server we can attach to it\n     * and start using it.\n     *\n     * @param options {object} connecting options - rid, sid, jid and password.\n     */\n    attach(options) {\n        const now = this.connectionTimes.attaching = window.performance.now();\n\n        logger.log(`(TIME) Strophe Attaching\\t:${now}`);\n        this.connection.attach(options.jid, options.sid,\n            parseInt(options.rid, 10) + 1,\n            this.connectionHandler.bind(this, {\n                jid: options.jid,\n                password: options.password\n            }));\n    }\n\n    /**\n     *\n     * @param jid\n     * @param password\n     */\n    connect(jid, password) {\n        if (!jid) {\n            const { anonymousdomain, domain } = this.options.hosts;\n            let configDomain = anonymousdomain || domain;\n\n            // Force authenticated domain if room is appended with '?login=true'\n            // or if we're joining with the token\n\n            // FIXME Do not rely on window.location because (1) React Native\n            // does not have a window.location by default and (2) here we cannot\n            // know for sure that query/search has not be stripped from\n            // window.location by the time the following executes.\n            const { location } = window;\n\n            if (anonymousdomain) {\n                const search = location && location.search;\n\n                if ((search && search.indexOf('login=true') !== -1)\n                        || this.token) {\n                    configDomain = domain;\n                }\n            }\n\n            // eslint-disable-next-line no-param-reassign\n            jid = configDomain || (location && location.hostname);\n        }\n\n        return this._connect(jid, password);\n    }\n\n    /**\n     *\n     * @param roomName\n     * @param options\n     */\n    createRoom(roomName, options) {\n        // By default MUC nickname is the resource part of the JID\n        let mucNickname = Strophe.getNodeFromJid(this.connection.jid);\n        let roomjid = `${roomName}@${this.options.hosts.muc}/`;\n        const cfgNickname\n            = options.useNicks && options.nick ? options.nick : null;\n\n        if (cfgNickname) {\n            // Use nick if it's defined\n            mucNickname = options.nick;\n        } else if (!this.authenticatedUser) {\n            // node of the anonymous JID is very long - here we trim it a bit\n            mucNickname = mucNickname.substr(0, 8);\n        }\n\n        // Constant JIDs need some random part to be appended in order to be\n        // able to join the MUC more than once.\n        if (this.authenticatedUser || cfgNickname !== null) {\n            mucNickname += `-${RandomUtil.randomHexString(6)}`;\n        }\n\n        roomjid += mucNickname;\n\n        return this.connection.emuc.createRoom(roomjid, null, options);\n    }\n\n    /**\n     * Returns the logs from strophe.jingle.\n     * @returns {Object}\n     */\n    getJingleLog() {\n        const jingle = this.connection.jingle;\n\n\n        return jingle ? jingle.getLog() : {};\n    }\n\n    /**\n     * Returns the logs from strophe.\n     */\n    getXmppLog() {\n        return (this.connection.logger || {}).log || null;\n    }\n\n    /**\n     *\n     */\n    dial(...args) {\n        this.connection.rayo.dial(...args);\n    }\n\n    /**\n     *\n     * @param jid\n     * @param mute\n     */\n    setMute(jid, mute) {\n        this.connection.moderate.setMute(jid, mute);\n    }\n\n    /**\n     *\n     * @param jid\n     */\n    eject(jid) {\n        this.connection.moderate.eject(jid);\n    }\n\n    /**\n     *\n     */\n    getSessions() {\n        return this.connection.jingle.sessions;\n    }\n\n    /**\n     * Disconnects this from the XMPP server (if this is connected).\n     *\n     * @param ev optionally, the event which triggered the necessity to\n     * disconnect from the XMPP server (e.g. beforeunload, unload).\n     */\n    disconnect(ev) {\n        if (this.disconnectInProgress || !this.connection) {\n            this.eventEmitter.emit(JitsiConnectionEvents.WRONG_STATE);\n\n            return;\n        }\n\n        this.disconnectInProgress = true;\n\n        // XXX Strophe is asynchronously sending by default. Unfortunately, that\n        // means that there may not be enough time to send an unavailable\n        // presence or disconnect at all. Switching Strophe to synchronous\n        // sending is not much of an option because it may lead to a noticeable\n        // delay in navigating away from the current location. As a compromise,\n        // we will try to increase the chances of sending an unavailable\n        // presence and/or disconecting within the short time span that we have\n        // upon unloading by invoking flush() on the connection. We flush() once\n        // before disconnect() in order to attemtp to have its unavailable\n        // presence at the top of the send queue. We flush() once more after\n        // disconnect() in order to attempt to have its unavailable presence\n        // sent as soon as possible.\n        this.connection.flush();\n\n        if (ev !== null && typeof ev !== 'undefined') {\n            const evType = ev.type;\n\n            if (evType === 'beforeunload' || evType === 'unload') {\n                // XXX Whatever we said above, synchronous sending is the best\n                // (known) way to properly disconnect from the XMPP server.\n                // Consequently, it may be fine to have the source code and\n                // comment it in or out depending on whether we want to run with\n                // it for some time.\n                this.connection.options.sync = true;\n            }\n        }\n\n        this.connection.disconnect();\n\n        if (this.connection.options.sync !== true) {\n            this.connection.flush();\n        }\n    }\n\n    /**\n     *\n     */\n    _initStrophePlugins() {\n        const iceConfig = {\n            jvb: { iceServers: [ ] },\n            p2p: { iceServers: [ ] }\n        };\n\n        // FIXME: remove once we have a default config template. -saghul\n        const defaultStunServers = [\n            { urls: 'stun:stun.l.google.com:19302' },\n            { urls: 'stun:stun1.l.google.com:19302' },\n            { urls: 'stun:stun2.l.google.com:19302' }\n        ];\n\n        const p2pStunServers = (this.options.p2p\n            && this.options.p2p.stunServers) || defaultStunServers;\n\n        if (Array.isArray(p2pStunServers)) {\n            logger.info('P2P STUN servers: ', p2pStunServers);\n            iceConfig.p2p.iceServers = p2pStunServers;\n        }\n\n        if (this.options.p2p && this.options.p2p.iceTransportPolicy) {\n            logger.info('P2P ICE transport policy: ',\n                this.options.p2p.iceTransportPolicy);\n\n            iceConfig.p2p.iceTransportPolicy\n                = this.options.p2p.iceTransportPolicy;\n        }\n\n        initEmuc(this);\n        initJingle(this, this.eventEmitter, iceConfig);\n        initStropheUtil();\n        initPing(this);\n        initRayo();\n        initStropheLogger();\n    }\n\n    /**\n     * Returns details about connection failure. Shard change or is it after\n     * suspend.\n     * @returns {object} contains details about a connection failure.\n     * @private\n     */\n    _getConnectionFailedReasonDetails() {\n        const details = {};\n\n        // check for moving between shard if information is available\n        if (this.options.deploymentInfo\n            && this.options.deploymentInfo.shard\n            && this.connection._proto\n            && this.connection._proto.lastResponseHeaders) {\n\n            // split headers by line\n            const headersArr = this.connection._proto.lastResponseHeaders\n                .trim().split(/[\\r\\n]+/);\n            const headers = {};\n\n            headersArr.forEach(line => {\n                const parts = line.split(': ');\n                const header = parts.shift();\n                const value = parts.join(': ');\n\n                headers[header] = value;\n            });\n\n            /* eslint-disable camelcase */\n            details.shard_changed\n                = this.options.deploymentInfo.shard\n                    !== headers['x-jitsi-shard'];\n            /* eslint-enable camelcase */\n        }\n\n        /* eslint-disable camelcase */\n        // check for possible suspend\n        details.suspend_time = this.connection.ping.getPingSuspendTime();\n        /* eslint-enable camelcase */\n\n        return details;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/xmpp.js","/**\n * The errors for the connection.\n */\n\n/**\n * Indicates that the connection was dropped with an error which was most likely\n * caused by some networking issues. The dropped term in this context means that\n * the connection was closed unexpectedly (not on user's request).\n *\n * One example is 'item-not-found' error thrown by Prosody when the BOSH session\n * times out after 60 seconds of inactivity. On the other hand 'item-not-found'\n * could also happen when BOSH request is sent to the server with the session-id\n * that is not know to the server. But this should not happen in lib-jitsi-meet\n * case as long as the service is configured correctly (there is no bug).\n */\nexport const CONNECTION_DROPPED_ERROR = 'connection.droppedError';\n\n/**\n * Not specified errors.\n */\nexport const OTHER_ERROR = 'connection.otherError';\n\n/**\n * Indicates that a password is required in order to join the conference.\n */\nexport const PASSWORD_REQUIRED = 'connection.passwordRequired';\n\n/**\n * Indicates that the connection was dropped, because of too many 5xx HTTP\n * errors on BOSH requests.\n */\nexport const SERVER_ERROR = 'connection.serverError';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConnectionErrors.js","/* global $, __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport { $iq, $msg, $pres, Strophe } from 'strophe.js';\n\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\nimport * as JitsiTranscriptionStatus from '../../JitsiTranscriptionStatus';\nimport Listenable from '../util/Listenable';\nimport Settings from '../settings/Settings';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\n\nimport Moderator from './moderator';\nimport Statistics from '../statistics/statistics';\n\nconst logger = getLogger(__filename);\n\nexport const parser = {\n    packet2JSON(xmlElement, nodes) {\n        for (const child of Array.from(xmlElement.children)) {\n            const node = {\n                attributes: {},\n                children: [],\n                tagName: child.tagName\n            };\n\n            for (const attr of Array.from(child.attributes)) {\n                node.attributes[attr.name] = attr.value;\n            }\n            const text = Strophe.getText(child);\n\n            if (text) {\n                // Using Strophe.getText will do work for traversing all direct\n                // child text nodes but returns an escaped value, which is not\n                // desirable at this point.\n                node.value = Strophe.xmlunescape(text);\n            }\n            nodes.push(node);\n            this.packet2JSON(child, node.children);\n        }\n    },\n    json2packet(nodes, packet) {\n        for (let i = 0; i < nodes.length; i++) {\n            const node = nodes[i];\n\n            if (node) {\n                packet.c(node.tagName, node.attributes);\n                if (node.value) {\n                    packet.t(node.value);\n                }\n                if (node.children) {\n                    this.json2packet(node.children, packet);\n                }\n                packet.up();\n            }\n        }\n\n        // packet.up();\n    }\n};\n\n/**\n * Returns array of JS objects from the presence JSON associated with the passed\n / nodeName\n * @param pres the presence JSON\n * @param nodeName the name of the node (videomuted, audiomuted, etc)\n */\nfunction filterNodeFromPresenceJSON(pres, nodeName) {\n    const res = [];\n\n    for (let i = 0; i < pres.length; i++) {\n        if (pres[i].tagName === nodeName) {\n            res.push(pres[i]);\n        }\n    }\n\n    return res;\n}\n\n/**\n * The name of the field used to recognize a chat message as carrying a JSON\n * payload from another endpoint.\n * If the json-message of a chat message contains a valid JSON object, and the\n * JSON has this key, then it is a valid json-message to be sent.\n */\nexport const JITSI_MEET_MUC_TYPE = 'type';\n\n/**\n * Check if the given argument is a valid JSON ENDPOINT_MESSAGE string by\n * parsing it and checking if it has a field called 'type'.\n *\n * @param {string} jsonString check if this string is a valid json string\n * and contains the special structure.\n * @returns {boolean, object} if given object is a valid JSON string, return\n * the json object. Otherwise, returns false.\n */\nfunction tryParseJSONAndVerify(jsonString) {\n    try {\n        const json = JSON.parse(jsonString);\n\n        // Handle non-exception-throwing cases:\n        // Neither JSON.parse(false) or JSON.parse(1234) throw errors,\n        // hence the type-checking,\n        // but... JSON.parse(null) returns null, and\n        // typeof null === \"object\",\n        // so we must check for that, too.\n        // Thankfully, null is falsey, so this suffices:\n        if (json && typeof json === 'object') {\n            const type = json[JITSI_MEET_MUC_TYPE];\n\n            if (typeof type !== 'undefined') {\n                return json;\n            }\n\n            logger.debug('parsing valid json but does not have correct '\n                + 'structure', 'topic: ', type);\n        }\n    } catch (e) {\n\n        return false;\n    }\n\n    return false;\n}\n\n// XXX As ChatRoom constructs XMPP stanzas and Strophe is build around the idea\n// of chaining function calls, allow long function call chains.\n/* eslint-disable newline-per-chained-call */\n\n/**\n *\n */\nexport default class ChatRoom extends Listenable {\n\n    /* eslint-disable max-params */\n\n    /**\n     *\n     * @param connection\n     * @param jid\n     * @param password\n     * @param XMPP\n     * @param options\n     */\n    constructor(connection, jid, password, XMPP, options) {\n        super();\n        this.xmpp = XMPP;\n        this.connection = connection;\n        this.roomjid = Strophe.getBareJidFromJid(jid);\n        this.myroomjid = jid;\n        this.password = password;\n        logger.info(`Joined MUC as ${this.myroomjid}`);\n        this.members = {};\n        this.presMap = {};\n        this.presHandlers = {};\n        this.joined = false;\n        this.role = null;\n        this.focusMucJid = null;\n        this.noBridgeAvailable = false;\n        this.options = options || {};\n        this.moderator\n            = new Moderator(this.roomjid, this.xmpp, this.eventEmitter, {\n                connection: this.xmpp.options,\n                conference: this.options\n            });\n        this.initPresenceMap(options);\n        this.lastPresences = {};\n        this.phoneNumber = null;\n        this.phonePin = null;\n        this.connectionTimes = {};\n        this.participantPropertyListener = null;\n\n        this.locked = false;\n        this.transcriptionStatus = JitsiTranscriptionStatus.OFF;\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     *\n     */\n    initPresenceMap(options = {}) {\n        this.presMap.to = this.myroomjid;\n        this.presMap.xns = 'http://jabber.org/protocol/muc';\n        this.presMap.nodes = [];\n        this.presMap.nodes.push({\n            'tagName': 'user-agent',\n            'value': navigator.userAgent,\n            'attributes': { xmlns: 'http://jitsi.org/jitmeet/user-agent' }\n        });\n\n        if (options.enableStatsID) {\n            this.presMap.nodes.push({\n                'tagName': 'stats-id',\n                'value': Settings.callStatsUserName\n            });\n        }\n\n        // We need to broadcast 'videomuted' status from the beginning, cause\n        // Jicofo makes decisions based on that. Initialize it with 'false'\n        // here.\n        this.addVideoInfoToPresence(false);\n\n        if (options.deploymentInfo && options.deploymentInfo.userRegion) {\n            this.presMap.nodes.push({\n                'tagName': 'region',\n                'attributes': {\n                    id: options.deploymentInfo.userRegion,\n                    xmlns: 'http://jitsi.org/jitsi-meet'\n                }\n            });\n        }\n    }\n\n    /**\n     *\n     * @param devices\n     */\n    updateDeviceAvailability(devices) {\n        this.presMap.nodes.push({\n            'tagName': 'devices',\n            'children': [\n                {\n                    'tagName': 'audio',\n                    'value': devices.audio\n                },\n                {\n                    'tagName': 'video',\n                    'value': devices.video\n                }\n            ]\n        });\n    }\n\n    /**\n     * Joins the chat room.\n     * @param password\n     * @returns {Promise} - resolved when join completes. At the time of this\n     * writing it's never rejected.\n     */\n    join(password) {\n        this.password = password;\n\n        return new Promise(resolve => {\n            this.moderator.allocateConferenceFocus(() => {\n                this.sendPresence(true);\n                resolve();\n            });\n        });\n    }\n\n    /**\n     *\n     * @param fromJoin\n     */\n    sendPresence(fromJoin) {\n        const to = this.presMap.to;\n\n        if (!to || (!this.joined && !fromJoin)) {\n            // Too early to send presence - not initialized\n            return;\n        }\n\n        const pres = $pres({ to });\n\n        // xep-0045 defines: \"including in the initial presence stanza an empty\n        // <x/> element qualified by the 'http://jabber.org/protocol/muc'\n        // namespace\" and subsequent presences should not include that or it can\n        // be considered as joining, and server can send us the message history\n        // for the room on every presence\n        if (fromJoin) {\n            pres.c('x', { xmlns: this.presMap.xns });\n\n            if (this.password) {\n                pres.c('password').t(this.password).up();\n            }\n            pres.up();\n        }\n\n        parser.json2packet(this.presMap.nodes, pres);\n        this.connection.send(pres);\n        if (fromJoin) {\n            // XXX We're pressed for time here because we're beginning a complex\n            // and/or lengthy conference-establishment process which supposedly\n            // involves multiple RTTs. We don't have the time to wait for\n            // Strophe to decide to send our IQ.\n            this.connection.flush();\n        }\n    }\n\n    /**\n     * Sends the presence unavailable, signaling the server\n     * we want to leave the room.\n     */\n    doLeave() {\n        logger.log('do leave', this.myroomjid);\n        const pres = $pres({ to: this.myroomjid,\n            type: 'unavailable' });\n\n        this.presMap.length = 0;\n\n        // XXX Strophe is asynchronously sending by default. Unfortunately, that\n        // means that there may not be enough time to send the unavailable\n        // presence. Switching Strophe to synchronous sending is not much of an\n        // option because it may lead to a noticeable delay in navigating away\n        // from the current location. As a compromise, we will try to increase\n        // the chances of sending the unavailable presence within the short time\n        // span that we have upon unloading by invoking flush() on the\n        // connection. We flush() once before sending/queuing the unavailable\n        // presence in order to attemtp to have the unavailable presence at the\n        // top of the send queue. We flush() once more after sending/queuing the\n        // unavailable presence in order to attempt to have it sent as soon as\n        // possible.\n        this.connection.flush();\n        this.connection.send(pres);\n        this.connection.flush();\n    }\n\n    /**\n     *\n     */\n    discoRoomInfo() {\n        // https://xmpp.org/extensions/xep-0045.html#disco-roominfo\n\n        const getInfo\n            = $iq({\n                type: 'get',\n                to: this.roomjid\n            })\n                .c('query', { xmlns: Strophe.NS.DISCO_INFO });\n\n        this.connection.sendIQ(getInfo, result => {\n            const locked\n                = $(result).find('>query>feature[var=\"muc_passwordprotected\"]')\n                    .length\n                    === 1;\n\n            if (locked !== this.locked) {\n                this.eventEmitter.emit(XMPPEvents.MUC_LOCK_CHANGED, locked);\n                this.locked = locked;\n            }\n        }, error => {\n            GlobalOnErrorHandler.callErrorHandler(error);\n            logger.error('Error getting room info: ', error);\n        });\n    }\n\n    /**\n     *\n     */\n    createNonAnonymousRoom() {\n        // http://xmpp.org/extensions/xep-0045.html#createroom-reserved\n\n        const getForm = $iq({ type: 'get',\n            to: this.roomjid })\n            .c('query', { xmlns: 'http://jabber.org/protocol/muc#owner' })\n            .c('x', { xmlns: 'jabber:x:data',\n                type: 'submit' });\n\n        const self = this;\n\n        this.connection.sendIQ(getForm, form => {\n            if (!$(form).find(\n                    '>query>x[xmlns=\"jabber:x:data\"]'\n                    + '>field[var=\"muc#roomconfig_whois\"]').length) {\n                const errmsg = 'non-anonymous rooms not supported';\n\n                GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n                logger.error(errmsg);\n\n                return;\n            }\n\n            const formSubmit = $iq({ to: self.roomjid,\n                type: 'set' })\n                .c('query', { xmlns: 'http://jabber.org/protocol/muc#owner' });\n\n            formSubmit.c('x', { xmlns: 'jabber:x:data',\n                type: 'submit' });\n\n            formSubmit.c('field', { 'var': 'FORM_TYPE' })\n                .c('value')\n                .t('http://jabber.org/protocol/muc#roomconfig').up().up();\n\n            formSubmit.c('field', { 'var': 'muc#roomconfig_whois' })\n                .c('value').t('anyone').up().up();\n\n            self.connection.sendIQ(formSubmit);\n\n        }, error => {\n            GlobalOnErrorHandler.callErrorHandler(error);\n            logger.error('Error getting room configuration form: ', error);\n        });\n    }\n\n    /**\n     *\n     * @param pres\n     */\n    onPresence(pres) {\n        const from = pres.getAttribute('from');\n        const member = {};\n        const statusEl = pres.getElementsByTagName('status')[0];\n\n        if (statusEl) {\n            member.status = statusEl.textContent || '';\n        }\n        let hasStatusUpdate = false;\n        const xElement\n            = pres.getElementsByTagNameNS(\n                'http://jabber.org/protocol/muc#user', 'x')[0];\n        const mucUserItem\n            = xElement && xElement.getElementsByTagName('item')[0];\n\n        member.affiliation\n            = mucUserItem && mucUserItem.getAttribute('affiliation');\n        member.role = mucUserItem && mucUserItem.getAttribute('role');\n\n        // Focus recognition\n        const jid = mucUserItem && mucUserItem.getAttribute('jid');\n\n        member.jid = jid;\n        member.isFocus\n            = jid && jid.indexOf(`${this.moderator.getFocusUserJid()}/`) === 0;\n        member.isHiddenDomain\n            = jid && jid.indexOf('@') > 0\n                && this.options.hiddenDomain\n                    === jid.substring(jid.indexOf('@') + 1, jid.indexOf('/'));\n\n        this.eventEmitter.emit(XMPPEvents.PRESENCE_RECEIVED, {\n            fromHiddenDomain: member.isHiddenDomain,\n            presence: pres\n        });\n\n        const xEl = pres.querySelector('x');\n\n        if (xEl) {\n            xEl.remove();\n        }\n\n        const nodes = [];\n\n        parser.packet2JSON(pres, nodes);\n        this.lastPresences[from] = nodes;\n\n        // process nodes to extract data needed for MUC_JOINED and\n        // MUC_MEMBER_JOINED events\n        const extractIdentityInformation = node => {\n            const identity = {};\n            const userInfo = node.children.find(c => c.tagName === 'user');\n\n            if (userInfo) {\n                identity.user = {};\n                for (const tag of [ 'id', 'name', 'avatar' ]) {\n                    const child\n                        = userInfo.children.find(c => c.tagName === tag);\n\n                    if (child) {\n                        identity.user[tag] = child.value;\n                    }\n                }\n            }\n            const groupInfo = node.children.find(c => c.tagName === 'group');\n\n            if (groupInfo) {\n                identity.group = groupInfo.value;\n            }\n\n            return identity;\n        };\n\n        for (let i = 0; i < nodes.length; i++) {\n            const node = nodes[i];\n\n            switch (node.tagName) {\n            case 'bot': {\n                const { attributes } = node;\n\n                if (!attributes) {\n                    break;\n                }\n                const { type } = attributes;\n\n                member.botType = type;\n                break;\n            }\n            case 'nick':\n                member.nick = node.value;\n                break;\n            case 'userId':\n                member.id = node.value;\n                break;\n            case 'stats-id':\n                member.statsID = node.value;\n                break;\n            case 'identity':\n                member.identity = extractIdentityInformation(node);\n                break;\n            }\n        }\n\n        if (from === this.myroomjid) {\n            const newRole\n                = member.affiliation === 'owner' ? member.role : 'none';\n\n            if (this.role !== newRole) {\n                this.role = newRole;\n                this.eventEmitter.emit(\n                    XMPPEvents.LOCAL_ROLE_CHANGED,\n                    this.role);\n            }\n            if (!this.joined) {\n                this.joined = true;\n                const now = this.connectionTimes['muc.joined']\n                    = window.performance.now();\n\n                logger.log('(TIME) MUC joined:\\t', now);\n\n                // set correct initial state of locked\n                if (this.password) {\n                    this.locked = true;\n                }\n\n                this.eventEmitter.emit(XMPPEvents.MUC_JOINED);\n            }\n        } else if (this.members[from] === undefined) {\n            // new participant\n            this.members[from] = member;\n            logger.log('entered', from, member);\n            hasStatusUpdate = member.status !== undefined;\n            if (member.isFocus) {\n                this._initFocus(from, jid);\n            } else {\n                // identity is being added to member joined, so external\n                // services can be notified for that (currently identity is\n                // not used inside library)\n                this.eventEmitter.emit(\n                    XMPPEvents.MUC_MEMBER_JOINED,\n                    from,\n                    member.nick,\n                    member.role,\n                    member.isHiddenDomain,\n                    member.statsID,\n                    member.status,\n                    member.identity,\n                    member.botType);\n\n                // we are reporting the status with the join\n                // so we do not want a second event about status update\n                hasStatusUpdate = false;\n            }\n        } else {\n            // Presence update for existing participant\n            // Watch role change:\n            const memberOfThis = this.members[from];\n\n            if (memberOfThis.role !== member.role) {\n                memberOfThis.role = member.role;\n                this.eventEmitter.emit(\n                    XMPPEvents.MUC_ROLE_CHANGED, from, member.role);\n            }\n\n            // fire event that botType had changed\n            if (memberOfThis.botType !== member.botType) {\n                memberOfThis.botType = member.botType;\n                this.eventEmitter.emit(\n                    XMPPEvents.MUC_MEMBER_BOT_TYPE_CHANGED,\n                    from,\n                    member.botType);\n            }\n\n            if (member.isFocus) {\n                // From time to time first few presences of the focus are not\n                // containing it's jid. That way we can mark later the focus\n                // member instead of not marking it at all and not starting the\n                // conference.\n                // FIXME: Maybe there is a better way to handle this issue. It\n                // seems there is some period of time in prosody that the\n                // configuration form is received but not applied. And if any\n                // participant joins during that period of time the first\n                // presence from the focus won't contain\n                // <item jid=\"focus...\" />.\n                memberOfThis.isFocus = true;\n                this._initFocus(from, jid);\n            }\n\n            // store the new display name\n            if (member.displayName) {\n                memberOfThis.displayName = member.displayName;\n            }\n\n            // update stored status message to be able to detect changes\n            if (memberOfThis.status !== member.status) {\n                hasStatusUpdate = true;\n                memberOfThis.status = member.status;\n            }\n        }\n\n        // after we had fired member or room joined events, lets fire events\n        // for the rest info we got in presence\n        for (let i = 0; i < nodes.length; i++) {\n            const node = nodes[i];\n\n            switch (node.tagName) {\n            case 'nick':\n                if (!member.isFocus) {\n                    const displayName\n                        = this.xmpp.options.displayJids\n                            ? Strophe.getResourceFromJid(from)\n                            : member.nick;\n\n                    if (displayName && displayName.length > 0) {\n                        this.eventEmitter.emit(\n                            XMPPEvents.DISPLAY_NAME_CHANGED,\n                            from,\n                            displayName);\n                    }\n                }\n                break;\n            case 'bridgeNotAvailable':\n                if (member.isFocus && !this.noBridgeAvailable) {\n                    this.noBridgeAvailable = true;\n                    this.eventEmitter.emit(XMPPEvents.BRIDGE_DOWN);\n                }\n                break;\n            case 'conference-properties':\n                if (member.isFocus) {\n                    for (let j = 0; j < node.children.length; j++) {\n                        const { attributes } = node.children[j];\n\n                        if (!attributes) {\n                            break;\n                        }\n\n                        const { key, value } = attributes;\n\n                        /* eslint-disable no-fallthrough */\n                        switch (key) {\n\n                        // The number of jitsi-videobridge instances currently\n                        // used for the conference.\n                        case 'bridge-count':\n\n                        // The conference creation time (set by jicofo).\n                        case 'created-ms':\n                        case 'octo-enabled':\n                            Statistics.analytics.addPermanentProperties({\n                                [key.replace('-', '_')]: value\n                            });\n                            break;\n                        }\n                        /* eslint-enable no-fallthrough */\n                    }\n                }\n                break;\n            case 'transcription-status': {\n                const { attributes } = node;\n\n                if (!attributes) {\n                    break;\n                }\n\n                const { status } = attributes;\n\n                if (status && status !== this.transcriptionStatus) {\n                    this.transcriptionStatus = status;\n                    this.eventEmitter.emit(\n                        XMPPEvents.TRANSCRIPTION_STATUS_CHANGED,\n                        status\n                    );\n                }\n\n\n                break;\n            }\n            case 'call-control': {\n                const att = node.attributes;\n\n                if (!att) {\n                    break;\n                }\n                this.phoneNumber = att.phone || null;\n                this.phonePin = att.pin || null;\n                this.eventEmitter.emit(XMPPEvents.PHONE_NUMBER_CHANGED);\n                break;\n            }\n            default:\n                this.processNode(node, from);\n            }\n        }\n\n        // Trigger status message update if necessary\n        if (hasStatusUpdate) {\n            this.eventEmitter.emit(\n                XMPPEvents.PRESENCE_STATUS,\n                from,\n                member.status);\n        }\n    }\n\n    /**\n     * Initialize some properties when the focus participant is verified.\n     * @param from jid of the focus\n     * @param mucJid the jid of the focus in the muc\n     */\n    _initFocus(from, mucJid) {\n        this.focusMucJid = from;\n\n        logger.info(`Ignore focus: ${from}, real JID: ${mucJid}`);\n    }\n\n    /**\n     * Sets the special listener to be used for \"command\"s whose name starts\n     * with \"jitsi_participant_\".\n     */\n    setParticipantPropertyListener(listener) {\n        this.participantPropertyListener = listener;\n    }\n\n    /**\n     *\n     * @param node\n     * @param from\n     */\n    processNode(node, from) {\n        // make sure we catch all errors coming from any handler\n        // otherwise we can remove the presence handler from strophe\n        try {\n            let tagHandlers = this.presHandlers[node.tagName];\n\n            if (node.tagName.startsWith('jitsi_participant_')) {\n                tagHandlers = [ this.participantPropertyListener ];\n            }\n\n            if (tagHandlers) {\n                tagHandlers.forEach(handler => {\n                    handler(node, Strophe.getResourceFromJid(from), from);\n                });\n            }\n        } catch (e) {\n            GlobalOnErrorHandler.callErrorHandler(e);\n            logger.error(`Error processing:${node.tagName} node.`, e);\n        }\n    }\n\n    /**\n     * Send text message to the other participants in the conference\n     * @param message\n     * @param elementName\n     * @param nickname\n     */\n    sendMessage(message, elementName, nickname) {\n        const msg = $msg({ to: this.roomjid,\n            type: 'groupchat' });\n\n        // We are adding the message in a packet extension. If this element\n        // is different from 'body', we add a custom namespace.\n        // e.g. for 'json-message' extension of message stanza.\n        if (elementName === 'body') {\n            msg.c(elementName, message).up();\n        } else {\n            msg.c(elementName, { xmlns: 'http://jitsi.org/jitmeet' }, message)\n                .up();\n        }\n        if (nickname) {\n            msg.c('nick', { xmlns: 'http://jabber.org/protocol/nick' })\n                .t(nickname)\n                .up()\n                .up();\n        }\n        this.connection.send(msg);\n        this.eventEmitter.emit(XMPPEvents.SENDING_CHAT_MESSAGE, message);\n    }\n\n    /* eslint-disable max-params */\n    /**\n     * Send private text message to another participant of the conference\n     * @param id id/muc resource of the receiver\n     * @param message\n     * @param elementName\n     * @param nickname\n     */\n    sendPrivateMessage(id, message, elementName, nickname) {\n        const msg = $msg({ to: `${this.roomjid}/${id}`,\n            type: 'chat' });\n\n        // We are adding the message in packet. If this element is different\n        // from 'body', we add our custom namespace for the same.\n        // e.g. for 'json-message' message extension.\n        if (elementName === 'body') {\n            msg.c(elementName, message).up();\n        } else {\n            msg.c(elementName, { xmlns: 'http://jitsi.org/jitmeet' }, message)\n                .up();\n        }\n        if (nickname) {\n            msg.c('nick', { xmlns: 'http://jabber.org/protocol/nick' })\n                .t(nickname)\n                .up()\n                .up();\n        }\n\n        this.connection.send(msg);\n        this.eventEmitter.emit(\n            XMPPEvents.SENDING_PRIVATE_CHAT_MESSAGE, message);\n    }\n    /* eslint-enable max-params */\n\n    /**\n     *\n     * @param subject\n     */\n    setSubject(subject) {\n        const msg = $msg({ to: this.roomjid,\n            type: 'groupchat' });\n\n        msg.c('subject', subject);\n        this.connection.send(msg);\n    }\n\n    /**\n     * Called when participant leaves.\n     * @param jid the jid of the participant that leaves\n     * @param skipEvents optional params to skip any events, including check\n     * whether this is the focus that left\n     */\n    onParticipantLeft(jid, skipEvents) {\n        delete this.lastPresences[jid];\n\n        if (skipEvents) {\n            return;\n        }\n\n        this.eventEmitter.emit(XMPPEvents.MUC_MEMBER_LEFT, jid);\n\n        this.moderator.onMucMemberLeft(jid);\n    }\n\n    /**\n     *\n     * @param pres\n     * @param from\n     */\n    onPresenceUnavailable(pres, from) {\n        // ignore presence\n        if ($(pres).find('>ignore[xmlns=\"http://jitsi.org/jitmeet/\"]').length) {\n            return true;\n        }\n\n        // room destroyed ?\n        if ($(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]'\n            + '>destroy').length) {\n            let reason;\n            const reasonSelect\n                = $(pres).find(\n                    '>x[xmlns=\"http://jabber.org/protocol/muc#user\"]'\n                        + '>destroy>reason');\n\n            if (reasonSelect.length) {\n                reason = reasonSelect.text();\n            }\n\n            this.eventEmitter.emit(XMPPEvents.MUC_DESTROYED, reason);\n            this.connection.emuc.doLeave(this.roomjid);\n\n            return true;\n        }\n\n        // Status code 110 indicates that this notification is \"self-presence\".\n        const isSelfPresence\n            = $(pres)\n                .find(\n                    '>x[xmlns=\"http://jabber.org/protocol/muc#user\"]>'\n                        + 'status[code=\"110\"]')\n                .length;\n        const isKick\n            = $(pres)\n                .find(\n                    '>x[xmlns=\"http://jabber.org/protocol/muc#user\"]'\n                        + '>status[code=\"307\"]')\n                .length;\n        const membersKeys = Object.keys(this.members);\n\n        if (!isSelfPresence) {\n            delete this.members[from];\n            this.onParticipantLeft(from, false);\n        } else if (membersKeys.length > 0) {\n            // If the status code is 110 this means we're leaving and we would\n            // like to remove everyone else from our view, so we trigger the\n            // event.\n            membersKeys.forEach(jid => {\n                const member = this.members[jid];\n\n                delete this.members[jid];\n                this.onParticipantLeft(jid, member.isFocus);\n            });\n            this.connection.emuc.doLeave(this.roomjid);\n\n            // we fire muc_left only if this is not a kick,\n            // kick has both statuses 110 and 307.\n            if (!isKick) {\n                this.eventEmitter.emit(XMPPEvents.MUC_LEFT);\n            }\n        }\n\n        if (isKick && this.myroomjid === from) {\n            this.eventEmitter.emit(XMPPEvents.KICKED);\n        }\n    }\n\n    /**\n     *\n     * @param msg\n     * @param from\n     */\n    onMessage(msg, from) {\n        const nick\n            = $(msg).find('>nick[xmlns=\"http://jabber.org/protocol/nick\"]')\n                .text()\n            || Strophe.getResourceFromJid(from);\n\n        const txt = $(msg).find('>body').text();\n        const type = msg.getAttribute('type');\n\n        if (type === 'error') {\n            this.eventEmitter.emit(XMPPEvents.CHAT_ERROR_RECEIVED,\n                $(msg).find('>text').text(), txt);\n\n            return true;\n        }\n\n        const subject = $(msg).find('>subject');\n\n        if (subject.length) {\n            const subjectText = subject.text();\n\n            if (subjectText || subjectText === '') {\n                this.eventEmitter.emit(XMPPEvents.SUBJECT_CHANGED, subjectText);\n                logger.log(`Subject is changed to ${subjectText}`);\n            }\n        }\n\n        // xep-0203 delay\n        let stamp = $(msg).find('>delay').attr('stamp');\n\n        if (!stamp) {\n            // or xep-0091 delay, UTC timestamp\n            stamp = $(msg).find('>[xmlns=\"jabber:x:delay\"]').attr('stamp');\n\n            if (stamp) {\n                // the format is CCYYMMDDThh:mm:ss\n                const dateParts\n                    = stamp.match(/(\\d{4})(\\d{2})(\\d{2}T\\d{2}:\\d{2}:\\d{2})/);\n\n                stamp = `${dateParts[1]}-${dateParts[2]}-${dateParts[3]}Z`;\n            }\n        }\n\n        if (from === this.roomjid\n                && $(msg)\n                    .find(\n                        '>x[xmlns=\"http://jabber.org/protocol/muc#user\"]'\n                            + '>status[code=\"104\"]')\n                    .length) {\n            this.discoRoomInfo();\n        }\n        const jsonMessage = $(msg).find('>json-message').text();\n        const parsedJson = tryParseJSONAndVerify(jsonMessage);\n\n        // We emit this event if the message is a valid json, and is not\n        // delivered after a delay, i.e. stamp is undefined.\n        // e.g. - subtitles should not be displayed if delayed.\n        if (parsedJson && stamp === undefined) {\n            this.eventEmitter.emit(XMPPEvents.JSON_MESSAGE_RECEIVED,\n                from, parsedJson);\n\n            return;\n        }\n\n        if (txt) {\n            if (type === 'chat') {\n                this.eventEmitter.emit(XMPPEvents.PRIVATE_MESSAGE_RECEIVED,\n                        from, nick, txt, this.myroomjid, stamp);\n            } else if (type === 'groupchat') {\n                this.eventEmitter.emit(XMPPEvents.MESSAGE_RECEIVED,\n                        from, nick, txt, this.myroomjid, stamp);\n            }\n        }\n    }\n\n    /**\n     *\n     * @param pres\n     * @param from\n     */\n    onPresenceError(pres, from) {\n        if ($(pres)\n                .find(\n                    '>error[type=\"auth\"]'\n                        + '>not-authorized['\n                        + 'xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"]')\n                .length) {\n            logger.log('on password required', from);\n            this.eventEmitter.emit(XMPPEvents.PASSWORD_REQUIRED);\n        } else if ($(pres)\n                .find(\n                    '>error[type=\"cancel\"]'\n                        + '>not-allowed['\n                        + 'xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"]')\n                .length) {\n            const toDomain = Strophe.getDomainFromJid(pres.getAttribute('to'));\n\n            if (toDomain === this.xmpp.options.hosts.anonymousdomain) {\n                // enter the room by replying with 'not-authorized'. This would\n                // result in reconnection from authorized domain.\n                // We're either missing Jicofo/Prosody config for anonymous\n                // domains or something is wrong.\n                this.eventEmitter.emit(XMPPEvents.ROOM_JOIN_ERROR);\n\n            } else {\n                logger.warn('onPresError ', pres);\n                this.eventEmitter.emit(\n                    XMPPEvents.ROOM_CONNECT_NOT_ALLOWED_ERROR);\n            }\n        } else if ($(pres).find('>error>service-unavailable').length) {\n            logger.warn('Maximum users limit for the room has been reached',\n                pres);\n            this.eventEmitter.emit(XMPPEvents.ROOM_MAX_USERS_ERROR);\n        } else {\n            logger.warn('onPresError ', pres);\n            this.eventEmitter.emit(XMPPEvents.ROOM_CONNECT_ERROR);\n        }\n    }\n\n    /**\n     *\n     * @param jid\n     */\n    kick(jid) {\n        const kickIQ = $iq({ to: this.roomjid,\n            type: 'set' })\n            .c('query', { xmlns: 'http://jabber.org/protocol/muc#admin' })\n            .c('item', { nick: Strophe.getResourceFromJid(jid),\n                role: 'none' })\n            .c('reason').t('You have been kicked.').up().up().up();\n\n        this.connection.sendIQ(\n            kickIQ,\n            result => logger.log('Kick participant with jid: ', jid, result),\n            error => logger.log('Kick participant error: ', error));\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     *\n     * @param key\n     * @param onSuccess\n     * @param onError\n     * @param onNotSupported\n     */\n    lockRoom(key, onSuccess, onError, onNotSupported) {\n        // http://xmpp.org/extensions/xep-0045.html#roomconfig\n        this.connection.sendIQ(\n            $iq({\n                to: this.roomjid,\n                type: 'get'\n            })\n                .c('query', { xmlns: 'http://jabber.org/protocol/muc#owner' }),\n            res => {\n                if ($(res)\n                        .find(\n                            '>query>x[xmlns=\"jabber:x:data\"]'\n                                + '>field[var=\"muc#roomconfig_roomsecret\"]')\n                        .length) {\n                    const formsubmit\n                        = $iq({\n                            to: this.roomjid,\n                            type: 'set'\n                        })\n                            .c('query', {\n                                xmlns: 'http://jabber.org/protocol/muc#owner'\n                            });\n\n                    formsubmit.c('x', {\n                        xmlns: 'jabber:x:data',\n                        type: 'submit'\n                    });\n                    formsubmit\n                        .c('field', { 'var': 'FORM_TYPE' })\n                        .c('value')\n                        .t('http://jabber.org/protocol/muc#roomconfig')\n                        .up()\n                        .up();\n                    formsubmit\n                        .c('field', { 'var': 'muc#roomconfig_roomsecret' })\n                        .c('value')\n                        .t(key)\n                        .up()\n                        .up();\n\n                    // Fixes a bug in prosody 0.9.+\n                    // https://prosody.im/issues/issue/373\n                    formsubmit\n                        .c('field', { 'var': 'muc#roomconfig_whois' })\n                        .c('value')\n                        .t('anyone')\n                        .up()\n                        .up();\n\n                    // FIXME: is muc#roomconfig_passwordprotectedroom required?\n                    this.connection.sendIQ(formsubmit, onSuccess, onError);\n                } else {\n                    onNotSupported();\n                }\n            },\n            onError);\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     *\n     * @param key\n     * @param values\n     */\n    addToPresence(key, values) {\n        values.tagName = key;\n        this.removeFromPresence(key);\n        this.presMap.nodes.push(values);\n    }\n\n    /**\n     *\n     * @param key\n     */\n    removeFromPresence(key) {\n        const nodes = this.presMap.nodes.filter(node => key !== node.tagName);\n\n        this.presMap.nodes = nodes;\n    }\n\n    /**\n     *\n     * @param name\n     * @param handler\n     */\n    addPresenceListener(name, handler) {\n        if (typeof handler !== 'function') {\n            throw new Error('\"handler\" is not a function');\n        }\n        let tagHandlers = this.presHandlers[name];\n\n        if (!tagHandlers) {\n            this.presHandlers[name] = tagHandlers = [];\n        }\n        if (tagHandlers.indexOf(handler) === -1) {\n            tagHandlers.push(handler);\n        } else {\n            logger.warn(\n                `Trying to add the same handler more than once for: ${name}`);\n        }\n    }\n\n    /**\n     *\n     * @param name\n     * @param handler\n     */\n    removePresenceListener(name, handler) {\n        const tagHandlers = this.presHandlers[name];\n        const handlerIdx = tagHandlers ? tagHandlers.indexOf(handler) : -1;\n\n        // eslint-disable-next-line no-negated-condition\n        if (handlerIdx !== -1) {\n            tagHandlers.splice(handlerIdx, 1);\n        } else {\n            logger.warn(`Handler for: ${name} was not registered`);\n        }\n    }\n\n    /**\n     * Checks if the user identified by given <tt>mucJid</tt> is the conference\n     * focus.\n     * @param mucJid the full MUC address of the user to be checked.\n     * @returns {boolean|null} <tt>true</tt> if MUC user is the conference focus\n     * or <tt>false</tt> if is not. When given <tt>mucJid</tt> does not exist in\n     * the MUC then <tt>null</tt> is returned.\n     */\n    isFocus(mucJid) {\n        const member = this.members[mucJid];\n\n        if (member) {\n            return member.isFocus;\n        }\n\n        return null;\n    }\n\n    /**\n     *\n     */\n    isModerator() {\n        return this.role === 'moderator';\n    }\n\n    /**\n     *\n     * @param peerJid\n     */\n    getMemberRole(peerJid) {\n        if (this.members[peerJid]) {\n            return this.members[peerJid].role;\n        }\n\n        return null;\n    }\n\n    /**\n     *\n     * @param mute\n     * @param callback\n     */\n    setVideoMute(mute, callback) {\n        this.sendVideoInfoPresence(mute);\n        if (callback) {\n            callback(mute);\n        }\n    }\n\n    /**\n     *\n     * @param mute\n     * @param callback\n     */\n    setAudioMute(mute, callback) {\n        return this.sendAudioInfoPresence(mute, callback);\n    }\n\n    /**\n     *\n     * @param mute\n     */\n    addAudioInfoToPresence(mute) {\n        this.removeFromPresence('audiomuted');\n        this.addToPresence(\n            'audiomuted',\n            {\n                attributes: { 'xmlns': 'http://jitsi.org/jitmeet/audio' },\n                value: mute.toString()\n            });\n    }\n\n    /**\n     *\n     * @param mute\n     * @param callback\n     */\n    sendAudioInfoPresence(mute, callback) {\n        this.addAudioInfoToPresence(mute);\n        if (this.connection) {\n            this.sendPresence();\n        }\n        if (callback) {\n            callback();\n        }\n    }\n\n    /**\n     *\n     * @param mute\n     */\n    addVideoInfoToPresence(mute) {\n        this.removeFromPresence('videomuted');\n        this.addToPresence(\n            'videomuted',\n            {\n                attributes: { 'xmlns': 'http://jitsi.org/jitmeet/video' },\n                value: mute.toString()\n            });\n    }\n\n    /**\n     *\n     * @param mute\n     */\n    sendVideoInfoPresence(mute) {\n        this.addVideoInfoToPresence(mute);\n        if (!this.connection) {\n            return;\n        }\n        this.sendPresence();\n    }\n\n    /**\n     * Obtains the info about given media advertised in the MUC presence of\n     * the participant identified by the given endpoint JID.\n     * @param {string} endpointId the endpoint ID mapped to the participant\n     * which corresponds to MUC nickname.\n     * @param {MediaType} mediaType the type of the media for which presence\n     * info will be obtained.\n     * @return {PeerMediaInfo} presenceInfo an object with media presence\n     * info or <tt>null</tt> either if there is no presence available or if\n     * the media type given is invalid.\n     */\n    getMediaPresenceInfo(endpointId, mediaType) {\n        // Will figure out current muted status by looking up owner's presence\n        const pres = this.lastPresences[`${this.roomjid}/${endpointId}`];\n\n        if (!pres) {\n            // No presence available\n            return null;\n        }\n        const data = {\n            muted: false, // unmuted by default\n            videoType: undefined // no video type by default\n        };\n        let mutedNode = null;\n\n        if (mediaType === MediaType.AUDIO) {\n            mutedNode = filterNodeFromPresenceJSON(pres, 'audiomuted');\n        } else if (mediaType === MediaType.VIDEO) {\n            mutedNode = filterNodeFromPresenceJSON(pres, 'videomuted');\n            const videoTypeNode = filterNodeFromPresenceJSON(pres, 'videoType');\n\n            if (videoTypeNode.length > 0) {\n                data.videoType = videoTypeNode[0].value;\n            }\n        } else {\n            logger.error(`Unsupported media type: ${mediaType}`);\n\n            return null;\n        }\n\n        data.muted = mutedNode.length > 0 && mutedNode[0].value === 'true';\n\n        return data;\n    }\n\n    /**\n     * Returns true if the SIP calls are supported and false otherwise\n     */\n    isSIPCallingSupported() {\n        if (this.moderator) {\n            return this.moderator.isSipGatewayEnabled();\n        }\n\n        return false;\n    }\n\n    /**\n     * Dials a number.\n     * @param number the number\n     */\n    dial(number) {\n        return this.connection.rayo.dial(number, 'fromnumber',\n            Strophe.getBareJidFromJid(this.myroomjid), this.password,\n            this.focusMucJid);\n    }\n\n    /**\n     * Hangup an existing call\n     */\n    hangup() {\n        return this.connection.rayo.hangup();\n    }\n\n    /**\n     * Returns the phone number for joining the conference.\n     */\n    getPhoneNumber() {\n        return this.phoneNumber;\n    }\n\n    /**\n     * Returns the pin for joining the conference with phone.\n     */\n    getPhonePin() {\n        return this.phonePin;\n    }\n\n    /**\n     * Mutes remote participant.\n     * @param jid of the participant\n     * @param mute\n     */\n    muteParticipant(jid, mute) {\n        logger.info('set mute', mute);\n        const iqToFocus = $iq(\n            { to: this.focusMucJid,\n                type: 'set' })\n            .c('mute', {\n                xmlns: 'http://jitsi.org/jitmeet/audio',\n                jid\n            })\n            .t(mute.toString())\n            .up();\n\n        this.connection.sendIQ(\n            iqToFocus,\n            result => logger.log('set mute', result),\n            error => logger.log('set mute error', error));\n    }\n\n    /**\n     * TODO: Document\n     * @param iq\n     */\n    onMute(iq) {\n        const from = iq.getAttribute('from');\n\n        if (from !== this.focusMucJid) {\n            logger.warn('Ignored mute from non focus peer');\n\n            return;\n        }\n        const mute = $(iq).find('mute');\n\n        if (mute.length && mute.text() === 'true') {\n            this.eventEmitter.emit(XMPPEvents.AUDIO_MUTED_BY_FOCUS);\n        } else {\n            // XXX Why do we support anything but muting? Why do we encode the\n            // value in the text of the element? Why do we use a separate XML\n            // namespace?\n            logger.warn('Ignoring a mute request which does not explicitly '\n                + 'specify a positive mute command.');\n        }\n    }\n\n    /**\n     * Leaves the room. Closes the jingle session.\n     * @returns {Promise} which is resolved if XMPPEvents.MUC_LEFT is received\n     * less than 5s after sending presence unavailable. Otherwise the promise is\n     * rejected.\n     */\n    leave() {\n        return new Promise((resolve, reject) => {\n            const timeout = setTimeout(() => onMucLeft(true), 5000);\n            const eventEmitter = this.eventEmitter;\n\n            /**\n             *\n             * @param doReject\n             */\n            function onMucLeft(doReject = false) {\n                eventEmitter.removeListener(XMPPEvents.MUC_LEFT, onMucLeft);\n                clearTimeout(timeout);\n                if (doReject) {\n                    // the timeout expired\n                    reject(new Error('The timeout for the confirmation about '\n                        + 'leaving the room expired.'));\n                } else {\n                    resolve();\n                }\n            }\n            eventEmitter.on(XMPPEvents.MUC_LEFT, onMucLeft);\n            this.doLeave();\n        });\n    }\n}\n\n/* eslint-enable newline-per-chained-call */\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/ChatRoom.js","/**\n * The transciption is on.\n *\n * @type {String}\n */\nexport const ON = 'on';\n\n/**\n * The transciption is off.\n *\n * @type {String}\n */\nexport const OFF = 'off';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiTranscriptionStatus.js","const AuthenticationEvents = {\n    /**\n     * Event callback arguments:\n     * function(authenticationEnabled, userIdentity)\n     * authenticationEnabled - indicates whether authentication has been enabled\n     *                         in this session\n     * userIdentity - if user has been logged in then it contains user name. If\n     *                contains 'null' or 'undefined' then user is not logged in.\n     */\n    IDENTITY_UPDATED: 'authentication.identity_updated'\n};\n\nmodule.exports = AuthenticationEvents;\n\n\n\n// WEBPACK FOOTER //\n// ./service/authentication/AuthenticationEvents.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/process/browser.js\n// module id = 45\n// module chunks = 0","/**\n * The pending Jingle session state which means the session as defined in\n * XEP-0166(before 'session-invite/session-accept' took place).\n *\n * @type {string}\n */\nexport const PENDING = 'pending';\n\n/**\n * The active Jingle session state as defined in XEP-0166\n * (after 'session-invite'/'session-accept').\n *\n * @type {string}\n */\nexport const ACTIVE = 'active';\n\n/**\n * The ended Jingle session state as defined in XEP-0166\n * (after 'session-terminate').\n * @type {string}\n */\nexport const ENDED = 'ended';\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/JingleSessionState.js","/* global $ */\n\nimport SDPUtil from './SDPUtil';\n\n/**\n *\n * @param sdp\n */\nexport default function SDP(sdp) {\n    const media = sdp.split('\\r\\nm=');\n\n    for (let i = 1, length = media.length; i < length; i++) {\n        let mediaI = `m=${media[i]}`;\n\n        if (i !== length - 1) {\n            mediaI += '\\r\\n';\n        }\n        media[i] = mediaI;\n    }\n    const session = `${media.shift()}\\r\\n`;\n\n    this.media = media;\n    this.raw = session + media.join('');\n    this.session = session;\n}\n\n/**\n * A flag will make {@link transportToJingle} and {@link jingle2media} replace\n * ICE candidates IPs with invalid value of '1.1.1.1' which will cause ICE\n * failure. The flag is used in the automated testing.\n * @type {boolean}\n */\nSDP.prototype.failICE = false;\n\n/**\n * Whether or not to remove TCP ice candidates when translating from/to jingle.\n * @type {boolean}\n */\nSDP.prototype.removeTcpCandidates = false;\n\n/**\n * Whether or not to remove UDP ice candidates when translating from/to jingle.\n * @type {boolean}\n */\nSDP.prototype.removeUdpCandidates = false;\n\n/**\n * Returns map of MediaChannel mapped per channel idx.\n */\nSDP.prototype.getMediaSsrcMap = function() {\n    const self = this;\n    const mediaSSRCs = {};\n    let tmp;\n\n    for (let mediaindex = 0; mediaindex < self.media.length; mediaindex++) {\n        tmp = SDPUtil.findLines(self.media[mediaindex], 'a=ssrc:');\n        const mid\n            = SDPUtil.parseMID(\n                SDPUtil.findLine(self.media[mediaindex], 'a=mid:'));\n        const media = {\n            mediaindex,\n            mid,\n            ssrcs: {},\n            ssrcGroups: []\n        };\n\n        mediaSSRCs[mediaindex] = media;\n        tmp.forEach(line => {\n            const linessrc = line.substring(7).split(' ')[0];\n\n            // allocate new ChannelSsrc\n\n            if (!media.ssrcs[linessrc]) {\n                media.ssrcs[linessrc] = {\n                    ssrc: linessrc,\n                    lines: []\n                };\n            }\n            media.ssrcs[linessrc].lines.push(line);\n        });\n        tmp = SDPUtil.findLines(self.media[mediaindex], 'a=ssrc-group:');\n        tmp.forEach(line => {\n            const idx = line.indexOf(' ');\n            const semantics = line.substr(0, idx).substr(13);\n            const ssrcs = line.substr(14 + semantics.length).split(' ');\n\n            if (ssrcs.length) {\n                media.ssrcGroups.push({\n                    semantics,\n                    ssrcs\n                });\n            }\n        });\n    }\n\n    return mediaSSRCs;\n};\n\n/**\n * Returns <tt>true</tt> if this SDP contains given SSRC.\n * @param ssrc the ssrc to check.\n * @returns {boolean} <tt>true</tt> if this SDP contains given SSRC.\n */\nSDP.prototype.containsSSRC = function(ssrc) {\n    // FIXME this code is really strange - improve it if you can\n    const medias = this.getMediaSsrcMap();\n    let result = false;\n\n    Object.keys(medias).forEach(mediaindex => {\n        if (result) {\n            return;\n        }\n        if (medias[mediaindex].ssrcs[ssrc]) {\n            result = true;\n        }\n    });\n\n    return result;\n};\n\n// remove iSAC and CN from SDP\nSDP.prototype.mangle = function() {\n    let i, j, lines, mline, newdesc, rtpmap;\n\n    for (i = 0; i < this.media.length; i++) {\n        lines = this.media[i].split('\\r\\n');\n        lines.pop(); // remove empty last element\n        mline = SDPUtil.parseMLine(lines.shift());\n        if (mline.media !== 'audio') {\n            continue; // eslint-disable-line no-continue\n        }\n        newdesc = '';\n        mline.fmt.length = 0;\n        for (j = 0; j < lines.length; j++) {\n            if (lines[j].substr(0, 9) === 'a=rtpmap:') {\n                rtpmap = SDPUtil.parseRTPMap(lines[j]);\n                if (rtpmap.name === 'CN' || rtpmap.name === 'ISAC') {\n                    continue; // eslint-disable-line no-continue\n                }\n                mline.fmt.push(rtpmap.id);\n            }\n            newdesc += `${lines[j]}\\r\\n`;\n        }\n        this.media[i] = `${SDPUtil.buildMLine(mline)}\\r\\n${newdesc}`;\n    }\n    this.raw = this.session + this.media.join('');\n};\n\n// remove lines matching prefix from session section\nSDP.prototype.removeSessionLines = function(prefix) {\n    const self = this;\n    const lines = SDPUtil.findLines(this.session, prefix);\n\n    lines.forEach(line => {\n        self.session = self.session.replace(`${line}\\r\\n`, '');\n    });\n    this.raw = this.session + this.media.join('');\n\n    return lines;\n};\n\n// remove lines matching prefix from a media section specified by mediaindex\n// TODO: non-numeric mediaindex could match mid\nSDP.prototype.removeMediaLines = function(mediaindex, prefix) {\n    const self = this;\n    const lines = SDPUtil.findLines(this.media[mediaindex], prefix);\n\n    lines.forEach(line => {\n        self.media[mediaindex]\n            = self.media[mediaindex].replace(`${line}\\r\\n`, '');\n    });\n    this.raw = this.session + this.media.join('');\n\n    return lines;\n};\n\n// add content's to a jingle element\nSDP.prototype.toJingle = function(elem, thecreator) {\n    let i, j, k, lines, mline, rtpmap, ssrc, tmp;\n\n    // new bundle plan\n\n    lines = SDPUtil.findLines(this.session, 'a=group:');\n    if (lines.length) {\n        for (i = 0; i < lines.length; i++) {\n            tmp = lines[i].split(' ');\n            const semantics = tmp.shift().substr(8);\n\n            elem.c('group', { xmlns: 'urn:xmpp:jingle:apps:grouping:0',\n                semantics });\n            for (j = 0; j < tmp.length; j++) {\n                elem.c('content', { name: tmp[j] }).up();\n            }\n            elem.up();\n        }\n    }\n    for (i = 0; i < this.media.length; i++) {\n        mline = SDPUtil.parseMLine(this.media[i].split('\\r\\n')[0]);\n        if (!(mline.media === 'audio'\n              || mline.media === 'video'\n              || mline.media === 'application')) {\n            continue; // eslint-disable-line no-continue\n        }\n        const assrcline = SDPUtil.findLine(this.media[i], 'a=ssrc:');\n\n        if (assrcline) {\n            ssrc = assrcline.substring(7).split(' ')[0]; // take the first\n        } else {\n            ssrc = false;\n        }\n\n        elem.c('content', { creator: thecreator,\n            name: mline.media });\n        const amidline = SDPUtil.findLine(this.media[i], 'a=mid:');\n\n        if (amidline) {\n            // prefer identifier from a=mid if present\n            const mid = SDPUtil.parseMID(amidline);\n\n            elem.attrs({ name: mid });\n        }\n\n        if (SDPUtil.findLine(this.media[i], 'a=rtpmap:').length) {\n            elem.c('description',\n                { xmlns: 'urn:xmpp:jingle:apps:rtp:1',\n                    media: mline.media });\n            if (ssrc) {\n                elem.attrs({ ssrc });\n            }\n            for (j = 0; j < mline.fmt.length; j++) {\n                rtpmap\n                    = SDPUtil.findLine(\n                        this.media[i],\n                        `a=rtpmap:${mline.fmt[j]}`);\n                elem.c('payload-type', SDPUtil.parseRTPMap(rtpmap));\n\n                // put any 'a=fmtp:' + mline.fmt[j] lines into <param name=foo\n                // value=bar/>\n                const afmtpline\n                    = SDPUtil.findLine(\n                        this.media[i],\n                        `a=fmtp:${mline.fmt[j]}`);\n\n                if (afmtpline) {\n                    tmp = SDPUtil.parseFmtp(afmtpline);\n\n                    // eslint-disable-next-line max-depth\n                    for (k = 0; k < tmp.length; k++) {\n                        elem.c('parameter', tmp[k]).up();\n                    }\n                }\n\n                // XEP-0293 -- map a=rtcp-fb\n                this.rtcpFbToJingle(i, elem, mline.fmt[j]);\n\n                elem.up();\n            }\n            const crypto\n                = SDPUtil.findLines(this.media[i], 'a=crypto:', this.session);\n\n            if (crypto.length) {\n                elem.c('encryption', { required: 1 });\n                crypto.forEach(\n                    line => elem.c('crypto', SDPUtil.parseCrypto(line)).up());\n                elem.up(); // end of encryption\n            }\n\n            if (ssrc) {\n                const ssrcMap = SDPUtil.parseSSRC(this.media[i]);\n\n                for (const [ availableSsrc, ssrcParameters ] of ssrcMap) {\n                    elem.c('source', {\n                        ssrc: availableSsrc,\n                        xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'\n                    });\n\n                    ssrcParameters.forEach(ssrcSdpLine => {\n                        // get everything after first space\n                        const idx = ssrcSdpLine.indexOf(' ');\n                        const kv = ssrcSdpLine.substr(idx + 1);\n\n                        elem.c('parameter');\n                        if (kv.indexOf(':') === -1) {\n                            elem.attrs({ name: kv });\n                        } else {\n                            const name = kv.split(':', 2)[0];\n\n                            elem.attrs({ name });\n\n                            let v = kv.split(':', 2)[1];\n\n                            v = SDPUtil.filterSpecialChars(v);\n                            elem.attrs({ value: v });\n                        }\n                        elem.up();\n                    });\n\n                    elem.up();\n                }\n\n                // XEP-0339 handle ssrc-group attributes\n                const ssrcGroupLines\n                    = SDPUtil.findLines(this.media[i], 'a=ssrc-group:');\n\n                ssrcGroupLines.forEach(line => {\n                    const idx = line.indexOf(' ');\n                    const semantics = line.substr(0, idx).substr(13);\n                    const ssrcs = line.substr(14 + semantics.length).split(' ');\n\n                    if (ssrcs.length) {\n                        elem.c('ssrc-group', { semantics,\n                            xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0' });\n                        ssrcs.forEach(s => elem.c('source', { ssrc: s }).up());\n                        elem.up();\n                    }\n                });\n            }\n\n            const ridLines = SDPUtil.findLines(this.media[i], 'a=rid');\n\n            if (ridLines.length) {\n                // Map a line which looks like \"a=rid:2 send\" to just\n                // the rid (\"2\")\n                const rids = ridLines\n                    .map(ridLine => ridLine.split(':')[1])\n                    .map(ridInfo => ridInfo.split(' ')[0]);\n\n                rids.forEach(rid => {\n                    elem.c('source', {\n                        rid,\n                        xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'\n                    });\n                    elem.up();\n                });\n                const unifiedSimulcast\n                    = SDPUtil.findLine(this.media[i], 'a=simulcast');\n\n                if (unifiedSimulcast) {\n                    elem.c('rid-group', {\n                        semantics: 'SIM',\n                        xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'\n                    });\n                    rids.forEach(rid => {\n                        elem.c('source', { rid }).up();\n                    });\n                    elem.up();\n                }\n            }\n\n            if (SDPUtil.findLine(this.media[i], 'a=rtcp-mux')) {\n                elem.c('rtcp-mux').up();\n            }\n\n            // XEP-0293 -- map a=rtcp-fb:*\n            this.rtcpFbToJingle(i, elem, '*');\n\n            // XEP-0294\n            lines = SDPUtil.findLines(this.media[i], 'a=extmap:');\n            if (lines.length) {\n                for (j = 0; j < lines.length; j++) {\n                    tmp = SDPUtil.parseExtmap(lines[j]);\n                    elem.c('rtp-hdrext', {\n                        xmlns: 'urn:xmpp:jingle:apps:rtp:rtp-hdrext:0',\n                        uri: tmp.uri,\n                        id: tmp.value\n                    });\n\n                    // eslint-disable-next-line max-depth\n                    if (tmp.hasOwnProperty('direction')) {\n\n                        // eslint-disable-next-line max-depth\n                        switch (tmp.direction) {\n                        case 'sendonly':\n                            elem.attrs({ senders: 'responder' });\n                            break;\n                        case 'recvonly':\n                            elem.attrs({ senders: 'initiator' });\n                            break;\n                        case 'sendrecv':\n                            elem.attrs({ senders: 'both' });\n                            break;\n                        case 'inactive':\n                            elem.attrs({ senders: 'none' });\n                            break;\n                        }\n                    }\n\n                    // TODO: handle params\n                    elem.up();\n                }\n            }\n            elem.up(); // end of description\n        }\n\n        // map ice-ufrag/pwd, dtls fingerprint, candidates\n        this.transportToJingle(i, elem);\n\n        const m = this.media[i];\n\n        if (SDPUtil.findLine(m, 'a=sendrecv', this.session)) {\n            elem.attrs({ senders: 'both' });\n        } else if (SDPUtil.findLine(m, 'a=sendonly', this.session)) {\n            elem.attrs({ senders: 'initiator' });\n        } else if (SDPUtil.findLine(m, 'a=recvonly', this.session)) {\n            elem.attrs({ senders: 'responder' });\n        } else if (SDPUtil.findLine(m, 'a=inactive', this.session)) {\n            elem.attrs({ senders: 'none' });\n        }\n        if (mline.port === '0') {\n            // estos hack to reject an m-line\n            elem.attrs({ senders: 'rejected' });\n        }\n        elem.up(); // end of content\n    }\n    elem.up();\n\n    return elem;\n};\n\nSDP.prototype.transportToJingle = function(mediaindex, elem) {\n    let tmp;\n    const self = this;\n\n    elem.c('transport');\n\n    // XEP-0343 DTLS/SCTP\n    const sctpmap\n        = SDPUtil.findLine(this.media[mediaindex], 'a=sctpmap:', self.session);\n\n    if (sctpmap) {\n        const sctpAttrs = SDPUtil.parseSCTPMap(sctpmap);\n\n        elem.c('sctpmap', {\n            xmlns: 'urn:xmpp:jingle:transports:dtls-sctp:1',\n            number: sctpAttrs[0], /* SCTP port */\n            protocol: sctpAttrs[1] /* protocol */\n        });\n\n        // Optional stream count attribute\n        if (sctpAttrs.length > 2) {\n            elem.attrs({ streams: sctpAttrs[2] });\n        }\n        elem.up();\n    }\n\n    // XEP-0320\n    const fingerprints\n        = SDPUtil.findLines(\n            this.media[mediaindex],\n            'a=fingerprint:',\n            this.session);\n\n    fingerprints.forEach(line => {\n        tmp = SDPUtil.parseFingerprint(line);\n        tmp.xmlns = 'urn:xmpp:jingle:apps:dtls:0';\n        elem.c('fingerprint').t(tmp.fingerprint);\n        delete tmp.fingerprint;\n\n        // eslint-disable-next-line no-param-reassign\n        line\n            = SDPUtil.findLine(\n                self.media[mediaindex],\n                'a=setup:',\n                self.session);\n        if (line) {\n            tmp.setup = line.substr(8);\n        }\n        elem.attrs(tmp);\n        elem.up(); // end of fingerprint\n    });\n    tmp = SDPUtil.iceparams(this.media[mediaindex], this.session);\n    if (tmp) {\n        tmp.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\n        elem.attrs(tmp);\n\n        // XEP-0176\n        const lines\n            = SDPUtil.findLines(\n                this.media[mediaindex],\n                'a=candidate:',\n                this.session);\n\n        if (lines.length) { // add any a=candidate lines\n            lines.forEach(line => {\n                const candidate = SDPUtil.candidateToJingle(line);\n\n                if (self.failICE) {\n                    candidate.ip = '1.1.1.1';\n                }\n                const protocol\n                    = candidate && typeof candidate.protocol === 'string'\n                        ? candidate.protocol.toLowerCase()\n                        : '';\n\n                if ((self.removeTcpCandidates\n                        && (protocol === 'tcp' || protocol === 'ssltcp'))\n                    || (self.removeUdpCandidates && protocol === 'udp')) {\n                    return;\n                }\n                elem.c('candidate', candidate).up();\n            });\n        }\n    }\n    elem.up(); // end of transport\n};\n\n// XEP-0293\nSDP.prototype.rtcpFbToJingle = function(mediaindex, elem, payloadtype) {\n    const lines\n        = SDPUtil.findLines(\n            this.media[mediaindex],\n            `a=rtcp-fb:${payloadtype}`);\n\n    lines.forEach(line => {\n        const tmp = SDPUtil.parseRTCPFB(line);\n\n        if (tmp.type === 'trr-int') {\n            elem.c('rtcp-fb-trr-int', {\n                xmlns: 'urn:xmpp:jingle:apps:rtp:rtcp-fb:0',\n                value: tmp.params[0]\n            });\n            elem.up();\n        } else {\n            elem.c('rtcp-fb', {\n                xmlns: 'urn:xmpp:jingle:apps:rtp:rtcp-fb:0',\n                type: tmp.type\n            });\n            if (tmp.params.length > 0) {\n                elem.attrs({ 'subtype': tmp.params[0] });\n            }\n            elem.up();\n        }\n    });\n};\n\nSDP.prototype.rtcpFbFromJingle = function(elem, payloadtype) { // XEP-0293\n    let media = '';\n    let tmp\n        = elem.find(\n            '>rtcp-fb-trr-int[xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\"]');\n\n    if (tmp.length) {\n        media += 'a=rtcp-fb:* trr-int ';\n        if (tmp.attr('value')) {\n            media += tmp.attr('value');\n        } else {\n            media += '0';\n        }\n        media += '\\r\\n';\n    }\n    tmp = elem.find('>rtcp-fb[xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\"]');\n    tmp.each(function() {\n        /* eslint-disable no-invalid-this */\n        media += `a=rtcp-fb:${payloadtype} ${$(this).attr('type')}`;\n        if ($(this).attr('subtype')) {\n            media += ` ${$(this).attr('subtype')}`;\n        }\n        media += '\\r\\n';\n\n        /* eslint-enable no-invalid-this */\n    });\n\n    return media;\n};\n\n// construct an SDP from a jingle stanza\nSDP.prototype.fromJingle = function(jingle) {\n    const self = this;\n\n    this.raw = 'v=0\\r\\n'\n        + 'o=- 1923518516 2 IN IP4 0.0.0.0\\r\\n'// FIXME\n        + 's=-\\r\\n'\n        + 't=0 0\\r\\n';\n\n    // http://tools.ietf.org/html/draft-ietf-mmusic-sdp-bundle-negotiation-04\n    // #section-8\n    const groups\n        = $(jingle).find('>group[xmlns=\"urn:xmpp:jingle:apps:grouping:0\"]');\n\n    if (groups.length) {\n        groups.each((idx, group) => {\n            const contents\n                = $(group)\n                    .find('>content')\n                    .map((_, content) => content.getAttribute('name'))\n                    .get();\n\n            if (contents.length > 0) {\n                self.raw\n                    += `a=group:${\n                        group.getAttribute('semantics')\n                            || group.getAttribute('type')} ${\n                        contents.join(' ')}\\r\\n`;\n            }\n        });\n    }\n\n    this.session = this.raw;\n    jingle.find('>content').each(function() {\n        // eslint-disable-next-line no-invalid-this\n        const m = self.jingle2media($(this));\n\n        self.media.push(m);\n    });\n\n    // reconstruct msid-semantic -- apparently not necessary\n    /*\n     var msid = SDPUtil.parseSSRC(this.raw);\n     if (msid.hasOwnProperty('mslabel')) {\n     this.session += \"a=msid-semantic: WMS \" + msid.mslabel + \"\\r\\n\";\n     }\n     */\n\n    this.raw = this.session + this.media.join('');\n};\n\n// translate a jingle content element into an an SDP media part\nSDP.prototype.jingle2media = function(content) {\n    const desc = content.find('description');\n    let media = '';\n    const self = this;\n    const sctp = content.find(\n        '>transport>sctpmap[xmlns=\"urn:xmpp:jingle:transports:dtls-sctp:1\"]');\n\n    let tmp = { media: desc.attr('media') };\n\n    tmp.port = '1';\n    if (content.attr('senders') === 'rejected') {\n        // estos hack to reject an m-line.\n        tmp.port = '0';\n    }\n    if (content.find('>transport>fingerprint').length\n            || desc.find('encryption').length) {\n        tmp.proto = sctp.length ? 'DTLS/SCTP' : 'RTP/SAVPF';\n    } else {\n        tmp.proto = 'RTP/AVPF';\n    }\n    if (sctp.length) {\n        media += `m=application ${tmp.port} DTLS/SCTP ${\n            sctp.attr('number')}\\r\\n`;\n        media += `a=sctpmap:${sctp.attr('number')} ${sctp.attr('protocol')}`;\n\n        const streamCount = sctp.attr('streams');\n\n        if (streamCount) {\n            media += ` ${streamCount}\\r\\n`;\n        } else {\n            media += '\\r\\n';\n        }\n    } else {\n        tmp.fmt\n            = desc\n                .find('payload-type')\n                .map(function() {\n                    // eslint-disable-next-line no-invalid-this\n                    return this.getAttribute('id');\n                })\n                .get();\n        media += `${SDPUtil.buildMLine(tmp)}\\r\\n`;\n    }\n\n    media += 'c=IN IP4 0.0.0.0\\r\\n';\n    if (!sctp.length) {\n        media += 'a=rtcp:1 IN IP4 0.0.0.0\\r\\n';\n    }\n    tmp\n        = content.find(\n            '>transport[xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\"]');\n    if (tmp.length) {\n        if (tmp.attr('ufrag')) {\n            media += `${SDPUtil.buildICEUfrag(tmp.attr('ufrag'))}\\r\\n`;\n        }\n        if (tmp.attr('pwd')) {\n            media += `${SDPUtil.buildICEPwd(tmp.attr('pwd'))}\\r\\n`;\n        }\n        tmp.find('>fingerprint').each(function() {\n            /* eslint-disable no-invalid-this */\n            // FIXME: check namespace at some point\n            media += `a=fingerprint:${this.getAttribute('hash')}`;\n            media += ` ${$(this).text()}`;\n            media += '\\r\\n';\n            if (this.getAttribute('setup')) {\n                media += `a=setup:${this.getAttribute('setup')}\\r\\n`;\n            }\n\n            /* eslint-enable no-invalid-this */\n        });\n    }\n    switch (content.attr('senders')) {\n    case 'initiator':\n        media += 'a=sendonly\\r\\n';\n        break;\n    case 'responder':\n        media += 'a=recvonly\\r\\n';\n        break;\n    case 'none':\n        media += 'a=inactive\\r\\n';\n        break;\n    case 'both':\n        media += 'a=sendrecv\\r\\n';\n        break;\n    }\n    media += `a=mid:${content.attr('name')}\\r\\n`;\n\n    // <description><rtcp-mux/></description>\n    // see http://code.google.com/p/libjingle/issues/detail?id=309 -- no spec\n    // though\n    // and http://mail.jabber.org/pipermail/jingle/2011-December/001761.html\n    if (desc.find('rtcp-mux').length) {\n        media += 'a=rtcp-mux\\r\\n';\n    }\n\n    if (desc.find('encryption').length) {\n        desc.find('encryption>crypto').each(function() {\n            /* eslint-disable no-invalid-this */\n            media += `a=crypto:${this.getAttribute('tag')}`;\n            media += ` ${this.getAttribute('crypto-suite')}`;\n            media += ` ${this.getAttribute('key-params')}`;\n            if (this.getAttribute('session-params')) {\n                media += ` ${this.getAttribute('session-params')}`;\n            }\n            media += '\\r\\n';\n\n            /* eslint-enable no-invalid-this */\n        });\n    }\n    desc.find('payload-type').each(function() {\n        /* eslint-disable no-invalid-this */\n        media += `${SDPUtil.buildRTPMap(this)}\\r\\n`;\n        if ($(this).find('>parameter').length) {\n            media += `a=fmtp:${this.getAttribute('id')} `;\n            media\n                += $(this)\n                    .find('parameter')\n                    .map(function() {\n                        const name = this.getAttribute('name');\n\n                        return (\n                            (name ? `${name}=` : '')\n                                + this.getAttribute('value'));\n                    })\n                    .get()\n                    .join('; ');\n            media += '\\r\\n';\n        }\n\n        // xep-0293\n        media += self.rtcpFbFromJingle($(this), this.getAttribute('id'));\n\n        /* eslint-enable no-invalid-this */\n    });\n\n    // xep-0293\n    media += self.rtcpFbFromJingle(desc, '*');\n\n    // xep-0294\n    tmp\n        = desc.find(\n            '>rtp-hdrext[xmlns=\"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0\"]');\n    tmp.each(function() {\n        /* eslint-disable no-invalid-this */\n        media\n            += `a=extmap:${this.getAttribute('id')} ${\n                this.getAttribute('uri')}\\r\\n`;\n\n        /* eslint-enable no-invalid-this */\n    });\n\n    content\n        .find(\n            '>transport[xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\"]'\n                + '>candidate')\n        .each(function() {\n            /* eslint-disable no-invalid-this */\n            let protocol = this.getAttribute('protocol');\n\n            protocol\n                = typeof protocol === 'string' ? protocol.toLowerCase() : '';\n\n            if ((self.removeTcpCandidates\n                    && (protocol === 'tcp' || protocol === 'ssltcp'))\n                || (self.removeUdpCandidates && protocol === 'udp')) {\n                return;\n            } else if (self.failICE) {\n                this.setAttribute('ip', '1.1.1.1');\n            }\n\n            media += SDPUtil.candidateFromJingle(this);\n\n            /* eslint-enable no-invalid-this */\n        });\n\n    // XEP-0339 handle ssrc-group attributes\n    content\n        .find('description>ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')\n        .each(function() {\n            /* eslint-disable no-invalid-this */\n            const semantics = this.getAttribute('semantics');\n            const ssrcs\n                = $(this)\n                    .find('>source')\n                    .map(function() {\n                        return this.getAttribute('ssrc');\n                    })\n                    .get();\n\n            if (ssrcs.length) {\n                media += `a=ssrc-group:${semantics} ${ssrcs.join(' ')}\\r\\n`;\n            }\n\n            /* eslint-enable no-invalid-this */\n        });\n\n    tmp\n        = content.find(\n            'description>source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]');\n    tmp.each(function() {\n        /* eslint-disable no-invalid-this */\n        const ssrc = this.getAttribute('ssrc');\n\n        // eslint-disable-next-line newline-per-chained-call\n        $(this).find('>parameter').each(function() {\n            const name = this.getAttribute('name');\n            let value = this.getAttribute('value');\n\n            value = SDPUtil.filterSpecialChars(value);\n            media += `a=ssrc:${ssrc} ${name}`;\n            if (value && value.length) {\n                media += `:${value}`;\n            }\n            media += '\\r\\n';\n        });\n\n        /* eslint-enable no-invalid-this */\n    });\n\n    return media;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SDP.js","/**\n * Event triggered when participant's muted status changes.\n * @param {string} endpointId the track owner's identifier (MUC nickname)\n * @param {MediaType} mediaType \"audio\" or \"video\"\n * @param {boolean} isMuted the new muted state\n */\nexport const PEER_MUTED_CHANGED = 'signaling.peerMuted';\n\n/**\n * Event triggered when participant's video type changes.\n * @param {string} endpointId the video owner's ID (MUC nickname)\n * @param {VideoType} videoType the new value\n */\nexport const PEER_VIDEO_TYPE_CHANGED = 'signaling.peerVideoType';\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/SignalingEvents.js","/* global __filename, module */\nimport EventEmitter from 'events';\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as JitsiTrackEvents from '../../JitsiTrackEvents';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport RTCUtils from './RTCUtils';\n\nconst logger = getLogger(__filename);\n\n/**\n * Maps our handler types to MediaStreamTrack properties.\n */\nconst trackHandler2Prop = {\n    'track_mute': 'onmute', // Not supported on FF\n    'track_unmute': 'onunmute',\n    'track_ended': 'onended'\n};\n\n/**\n * Adds onended/oninactive handler to a MediaStream.\n * @param mediaStream a MediaStream to attach onended/oninactive handler\n * @param handler the handler\n */\nfunction addMediaStreamInactiveHandler(mediaStream, handler) {\n    mediaStream.oninactive = handler;\n}\n\n/**\n * Represents a single media track (either audio or video).\n */\nexport default class JitsiTrack extends EventEmitter {\n    /* eslint-disable max-params */\n    /**\n     * Represents a single media track (either audio or video).\n     * @constructor\n     * @param conference the rtc instance\n     * @param stream the WebRTC MediaStream instance\n     * @param track the WebRTC MediaStreamTrack instance, must be part of\n     * the given <tt>stream</tt>.\n     * @param streamInactiveHandler the function that will handle\n     *        onended/oninactive events of the stream.\n     * @param trackMediaType the media type of the JitsiTrack\n     * @param videoType the VideoType for this track if any\n     */\n    constructor(\n            conference,\n            stream,\n            track,\n            streamInactiveHandler,\n            trackMediaType,\n            videoType) {\n        super();\n\n        // aliases for addListener/removeListener\n        this.addEventListener = this.addListener;\n        this.removeEventListener = this.off = this.removeListener;\n\n        /**\n         * Array with the HTML elements that are displaying the streams.\n         * @type {Array}\n         */\n        this.containers = [];\n        this.conference = conference;\n        this.audioLevel = -1;\n        this.type = trackMediaType;\n        this.track = track;\n        this.videoType = videoType;\n        this.handlers = new Map();\n\n        /**\n         * Indicates whether this JitsiTrack has been disposed. If true, this\n         * JitsiTrack is to be considered unusable and operations involving it\n         * are to fail (e.g. {@link JitsiConference#addTrack(JitsiTrack)},\n         * {@link JitsiConference#removeTrack(JitsiTrack)}).\n         * @type {boolean}\n         */\n        this.disposed = false;\n\n        /**\n         * The inactive handler which will be triggered when the underlying\n         * <tt>MediaStream</tt> ends.\n         *\n         * @private\n         * @type {Function}\n         */\n        this._streamInactiveHandler = streamInactiveHandler;\n\n        this._setStream(stream);\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Sets handler to the WebRTC MediaStream or MediaStreamTrack object\n     * depending on the passed type.\n     * @param {string} type the type of the handler that is going to be set\n     * @param {Function} handler the handler.\n     */\n    _setHandler(type, handler) {\n        if (!trackHandler2Prop.hasOwnProperty(type)) {\n            logger.error(`Invalid handler type ${type}`);\n\n            return;\n        }\n        if (handler) {\n            this.handlers.set(type, handler);\n        } else {\n            this.handlers.delete(type);\n        }\n\n        if (this.stream) {\n            // FIXME Why only video tracks?\n            for (const track of this.stream.getVideoTracks()) {\n                track[trackHandler2Prop[type]] = handler;\n            }\n        }\n    }\n\n    /**\n     * Unregisters all event handlers bound to the underlying media stream/track\n     * @private\n     */\n    _unregisterHandlers() {\n        if (!this.stream) {\n            logger.warn(\n                `${this}: unable to unregister handlers - no stream object`);\n\n            return;\n        }\n\n        for (const type of this.handlers.keys()) {\n            // FIXME Why only video tracks?\n            for (const videoTrack of this.stream.getVideoTracks()) {\n                videoTrack[trackHandler2Prop[type]] = undefined;\n            }\n        }\n        if (this._streamInactiveHandler) {\n            addMediaStreamInactiveHandler(this.stream, undefined);\n        }\n    }\n\n    /**\n     * Sets the stream property of JitsiTrack object and sets all stored\n     * handlers to it.\n     *\n     * @param {MediaStream} stream the new stream.\n     * @protected\n     */\n    _setStream(stream) {\n        if (this.stream === stream) {\n            return;\n        }\n\n        this.stream = stream;\n\n        // TODO Practically, that's like the opposite of _unregisterHandlers\n        // i.e. may be abstracted into a function/method called\n        // _registerHandlers for clarity and easing the maintenance of the two\n        // pieces of source code.\n        if (this.stream) {\n            for (const type of this.handlers.keys()) {\n                this._setHandler(type, this.handlers.get(type));\n            }\n            if (this._streamInactiveHandler) {\n                addMediaStreamInactiveHandler(\n                    this.stream, this._streamInactiveHandler);\n            }\n        }\n    }\n\n    /**\n     * Returns the type (audio or video) of this track.\n     */\n    getType() {\n        return this.type;\n    }\n\n    /**\n     * Check if this is an audio track.\n     */\n    isAudioTrack() {\n        return this.getType() === MediaType.AUDIO;\n    }\n\n    /**\n     * Checks whether the underlying WebRTC <tt>MediaStreamTrack</tt> is muted\n     * according to it's 'muted' field status.\n     * @return {boolean} <tt>true</tt> if the underlying\n     * <tt>MediaStreamTrack</tt> is muted or <tt>false</tt> otherwise.\n     */\n    isWebRTCTrackMuted() {\n        return this.track && this.track.muted;\n    }\n\n    /**\n     * Check if this is a video track.\n     */\n    isVideoTrack() {\n        return this.getType() === MediaType.VIDEO;\n    }\n\n    /**\n     * Checks whether this is a local track.\n     * @abstract\n     * @return {boolean} 'true' if it's a local track or 'false' otherwise.\n     */\n    isLocal() {\n        throw new Error('Not implemented by subclass');\n    }\n\n    /**\n     * Returns the WebRTC MediaStream instance.\n     */\n    getOriginalStream() {\n        return this.stream;\n    }\n\n    /**\n     * Returns the ID of the underlying WebRTC Media Stream(if any)\n     * @returns {String|null}\n     */\n    getStreamId() {\n        return this.stream ? this.stream.id : null;\n    }\n\n    /**\n     * Return the underlying WebRTC MediaStreamTrack\n     * @returns {MediaStreamTrack}\n     */\n    getTrack() {\n        return this.track;\n    }\n\n    /**\n     * Returns the ID of the underlying WebRTC MediaStreamTrack(if any)\n     * @returns {String|null}\n     */\n    getTrackId() {\n        return this.track ? this.track.id : null;\n    }\n\n    /**\n     * Return meaningful usage label for this track depending on it's media and\n     * eventual video type.\n     * @returns {string}\n     */\n    getUsageLabel() {\n        if (this.isAudioTrack()) {\n            return 'mic';\n        }\n\n        return this.videoType ? this.videoType : 'default';\n    }\n\n    /**\n     * Eventually will trigger RTCEvents.TRACK_ATTACHED event.\n     * @param container the video/audio container to which this stream is\n     *        attached and for which event will be fired.\n     * @private\n     */\n    _maybeFireTrackAttached(container) {\n        if (this.conference && container) {\n            this.conference._onTrackAttach(this, container);\n        }\n    }\n\n    /**\n     * Attaches the MediaStream of this track to an HTML container.\n     * Adds the container to the list of containers that are displaying the\n     * track.\n     *\n     * @param container the HTML container which can be 'video' or 'audio'\n     * element.\n     *\n     * @returns {void}\n     */\n    attach(container) {\n        if (this.stream) {\n            RTCUtils.attachMediaStream(container, this.stream);\n        }\n        this.containers.push(container);\n        this._maybeFireTrackAttached(container);\n        this._attachTTFMTracker(container);\n    }\n\n    /**\n     * Removes this JitsiTrack from the passed HTML container.\n     *\n     * @param container the HTML container to detach from this JitsiTrack. If\n     * <tt>null</tt> or <tt>undefined</tt>, all containers are removed. A\n     * container can be a 'video', 'audio' or 'object' HTML element instance to\n     * which this JitsiTrack is currently attached.\n     */\n    detach(container) {\n        for (let cs = this.containers, i = cs.length - 1; i >= 0; --i) {\n            const c = cs[i];\n\n            if (!container) {\n                RTCUtils.attachMediaStream(c, null);\n            }\n            if (!container || c === container) {\n                cs.splice(i, 1);\n            }\n        }\n\n        if (container) {\n            RTCUtils.attachMediaStream(container, null);\n        }\n    }\n\n    /**\n     * Attach time to first media tracker only if there is conference and only\n     * for the first element.\n     *\n     * @param {HTMLElement} container the HTML container which can be 'video' or\n     * 'audio' element.\n     * @private\n     */\n    _attachTTFMTracker(container) { // eslint-disable-line no-unused-vars\n        // Should be defined by the classes that are extending JitsiTrack\n    }\n\n    /**\n     * Removes attached event listeners.\n     *\n     * @returns {Promise}\n     */\n    dispose() {\n        this.removeAllListeners();\n\n        this.disposed = true;\n\n        return Promise.resolve();\n    }\n\n    /**\n     * Returns true if this is a video track and the source of the video is a\n     * screen capture as opposed to a camera.\n     */\n    isScreenSharing() {\n        // FIXME: Should be fixed or removed.\n    }\n\n    /**\n     * Returns id of the track.\n     * @returns {string|null} id of the track or null if this is fake track.\n     */\n    getId() {\n        if (this.stream) {\n            return RTCUtils.getStreamID(this.stream);\n        }\n\n        return null;\n    }\n\n    /**\n     * Checks whether the MediaStream is active/not ended.\n     * When there is no check for active we don't have information and so\n     * will return that stream is active (in case of FF).\n     * @returns {boolean} whether MediaStream is active.\n     */\n    isActive() {\n        if (typeof this.stream.active !== 'undefined') {\n            return this.stream.active;\n        }\n\n        return true;\n    }\n\n    /**\n     * Sets the audio level for the stream\n     * @param {number} audioLevel value between 0 and 1\n     * @param {TraceablePeerConnection} [tpc] the peerconnection instance which\n     * is source for the audio level. It can be <tt>undefined</tt> for\n     * a local track if the audio level was measured outside of the\n     * peerconnection (see /modules/statistics/LocalStatsCollector.js).\n     */\n    setAudioLevel(audioLevel, tpc) {\n        if (this.audioLevel !== audioLevel) {\n            this.audioLevel = audioLevel;\n            this.emit(\n                JitsiTrackEvents.TRACK_AUDIO_LEVEL_CHANGED,\n                audioLevel,\n                tpc);\n        }\n    }\n\n    /**\n     * Returns the msid of the stream attached to the JitsiTrack object or null\n     * if no stream is attached.\n     */\n    getMSID() {\n        const streamId = this.getStreamId();\n        const trackId = this.getTrackId();\n\n        return streamId && trackId ? `${streamId} ${trackId}` : null;\n    }\n\n    /**\n     * Sets new audio output device for track's DOM elements. Video tracks are\n     * ignored.\n     * @param {string} audioOutputDeviceId - id of 'audiooutput' device from\n     *      navigator.mediaDevices.enumerateDevices(), '' for default device\n     * @emits JitsiTrackEvents.TRACK_AUDIO_OUTPUT_CHANGED\n     * @returns {Promise}\n     */\n    setAudioOutput(audioOutputDeviceId) {\n        if (!RTCUtils.isDeviceChangeAvailable('output')) {\n            return Promise.reject(\n                new Error('Audio output device change is not supported'));\n        }\n\n        // All audio communication is done through audio tracks, so ignore\n        // changing audio output for video tracks at all.\n        if (this.isVideoTrack()) {\n            return Promise.resolve();\n        }\n\n        return (\n            Promise.all(\n                this.containers.map(\n                    element =>\n                        element.setSinkId(audioOutputDeviceId)\n                            .catch(error => {\n                                logger.warn(\n                                    'Failed to change audio output device on'\n                                        + ' element. Default or previously set'\n                                        + ' audio output device will be used.',\n                                    element,\n                                    error);\n                                throw error;\n                            }))\n            )\n                .then(() => {\n                    this.emit(\n                        JitsiTrackEvents.TRACK_AUDIO_OUTPUT_CHANGED,\n                        audioOutputDeviceId);\n                }));\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/JitsiTrack.js","/**\n * The possible camera facing modes. For now support only 'user' and\n * 'environment' because 'left' and 'right' are not used anywhere in our\n * projects at the time of this writing. For more information please refer to\n * https://w3c.github.io/mediacapture-main/getusermedia.html\n * #def-constraint-facingMode.\n *\n * @enum {string}\n */\nconst CameraFacingMode = {\n    /**\n     * The mode which specifies the environment-facing camera.\n     */\n    ENVIRONMENT: 'environment',\n\n    /**\n     * The mode which specifies the user-facing camera.\n     */\n    USER: 'user'\n};\n\nmodule.exports = CameraFacingMode;\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/CameraFacingMode.js","var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{ //o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly..\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  //k: [{}], // outdated thing ignored\n  t: [{ //t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{ //c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{ //b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{ //m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w\\/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    { //a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-\\.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding) ?\n          'rtpmap:%d %s/%s/%s':\n          o.rate ?\n          'rtpmap:%d %s/%s':\n          'rtpmap:%d %s';\n      }\n    },\n    { //a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      //a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    { //a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    { //a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null) ?\n          'rtcp:%d %s IP%d %s':\n          'rtcp:%d';\n      }\n    },\n    { //a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%d trr-int %d'\n    },\n    { //a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null) ?\n          'rtcp-fb:%s %s %s':\n          'rtcp-fb:%s %s';\n      }\n    },\n    { //a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      //a=extmap:1/recvonly URI-gps-string\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'uri', 'config'],\n      format: function (o) {\n        return 'extmap:%d' + (o.direction ? '/%s' : '%v') + ' %s' + (o.config ? ' %s' : '');\n      }\n    },\n    { //a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null) ?\n          'crypto:%d %s %s %s':\n          'crypto:%d %s %s';\n      }\n    },\n    { //a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    { //a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    { //a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    { //a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*)/,\n      format: 'ptime:%d'\n    },\n    { //a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*)/,\n      format: 'maxptime:%d'\n    },\n    { //a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    { //a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    { //a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    { //a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    { //a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    { //a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      //a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      //a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    { //a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    { //a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    { //a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    { //a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    { //a=ssrc-group:FEC 1 2\n      //a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    { //a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    { //a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    { //a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    { //a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    { //a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null) ?\n          'sctpmap:%s %s %s' :\n          'sctpmap:%s %s';\n      }\n    },\n    { //a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    { //a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    { //a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      //a=imageattr:* send [x=800,y=640] recv *\n      //a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        //a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        //send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        //recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    { //a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      //a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        //a=simulcast:\n        '^simulcast:' +\n        //send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        //space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        //end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    { //Old simulcast draft 03 (implemented by Firefox)\n      //  https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      //a=simulcast: recv pt=97;98 send pt=97\n      //a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      //a=framerate:25\n      //a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    { // any a= that we don't understand is kepts verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/sdp-transform/lib/grammar.js\n// module id = 51\n// module chunks = 0"," /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.substr(17).split(' ');\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(msidParts) {\n    return msidParts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/sdp/sdp.js\n// module id = 52\n// module chunks = 0","/* global MediaRecorder, MediaStream */\n\nconst RecordingResult = require('./recordingResult');\n\n/**\n * Possible audio formats MIME types\n */\nconst AUDIO_WEBM = 'audio/webm'; // Supported in chrome\nconst AUDIO_OGG = 'audio/ogg'; // Supported in firefox\n\n/**\n * A TrackRecorder object holds all the information needed for recording a\n * single JitsiTrack (either remote or local)\n * @param track The JitsiTrack the object is going to hold\n */\nconst TrackRecorder = function(track) {\n    // The JitsiTrack holding the stream\n    this.track = track;\n\n    // The MediaRecorder recording the stream\n    this.recorder = null;\n\n    // The array of data chunks recorded from the stream\n    // acts as a buffer until the data is stored on disk\n    this.data = null;\n\n    // the name of the person of the JitsiTrack. This can be undefined and/or\n    // not unique\n    this.name = null;\n\n    // the time of the start of the recording\n    this.startTime = null;\n};\n\n/**\n * Starts the recording of a JitsiTrack in a TrackRecorder object.\n * This will also define the timestamp and try to update the name\n * @param trackRecorder the TrackRecorder to start\n */\nfunction startRecorder(trackRecorder) {\n    if (trackRecorder.recorder === undefined) {\n        throw new Error('Passed an object to startRecorder which is not a '\n            + 'TrackRecorder object');\n    }\n    trackRecorder.recorder.start();\n    trackRecorder.startTime = new Date();\n}\n\n/**\n * Stops the recording of a JitsiTrack in a TrackRecorder object.\n * This will also try to update the name\n * @param trackRecorder the TrackRecorder to stop\n */\nfunction stopRecorder(trackRecorder) {\n    if (trackRecorder.recorder === undefined) {\n        throw new Error('Passed an object to stopRecorder which is not a '\n            + 'TrackRecorder object');\n    }\n    trackRecorder.recorder.stop();\n}\n\n/**\n * Determines which kind of audio recording the browser supports\n * chrome supports \"audio/webm\" and firefox supports \"audio/ogg\"\n */\nfunction determineCorrectFileType() {\n    if (MediaRecorder.isTypeSupported(AUDIO_WEBM)) {\n        return AUDIO_WEBM;\n    } else if (MediaRecorder.isTypeSupported(AUDIO_OGG)) {\n        return AUDIO_OGG;\n    }\n    throw new Error(\n        'unable to create a MediaRecorder with the right mimetype!');\n}\n\n/**\n * main exported object of the file, holding all\n * relevant functions and variables for the outside world\n * @param jitsiConference the jitsiConference which this object\n * is going to record\n */\nfunction AudioRecorder(jitsiConference) {\n    // array of TrackRecorders, where each trackRecorder\n    // holds the JitsiTrack, MediaRecorder and recorder data\n    this.recorders = [];\n\n    // get which file type is supported by the current browser\n    this.fileType = determineCorrectFileType();\n\n    // boolean flag for active recording\n    this.isRecording = false;\n\n    // the jitsiconference the object is recording\n    this.jitsiConference = jitsiConference;\n}\n\n/**\n * Add the the exported module so that it can be accessed by other files\n */\nAudioRecorder.determineCorrectFileType = determineCorrectFileType;\n\n/**\n * Adds a new TrackRecorder object to the array.\n *\n * @param track the track potentially holding an audio stream\n */\nAudioRecorder.prototype.addTrack = function(track) {\n    if (track.isAudioTrack()) {\n        // create the track recorder\n        const trackRecorder = this.instantiateTrackRecorder(track);\n\n        // push it to the local array of all recorders\n\n        this.recorders.push(trackRecorder);\n\n        // update the name of the trackRecorders\n        this.updateNames();\n\n        // If we're already recording, immediately start recording this new\n        // track.\n        if (this.isRecording) {\n            startRecorder(trackRecorder);\n        }\n    }\n};\n\n/**\n * Creates a TrackRecorder object. Also creates the MediaRecorder and\n * data array for the trackRecorder.\n * @param track the JitsiTrack holding the audio MediaStream(s)\n */\nAudioRecorder.prototype.instantiateTrackRecorder = function(track) {\n    const trackRecorder = new TrackRecorder(track);\n\n    // Create a new stream which only holds the audio track\n    const originalStream = trackRecorder.track.getOriginalStream();\n    const stream = createEmptyStream();\n\n    originalStream.getAudioTracks().forEach(t => stream.addTrack(t));\n\n    // Create the MediaRecorder\n    trackRecorder.recorder = new MediaRecorder(stream,\n        { mimeType: this.fileType });\n\n    // array for holding the recorder data. Resets it when\n    // audio already has been recorder once\n    trackRecorder.data = [];\n\n    // function handling a dataEvent, e.g the stream gets new data\n    trackRecorder.recorder.ondataavailable = function(dataEvent) {\n        if (dataEvent.data.size > 0) {\n            trackRecorder.data.push(dataEvent.data);\n        }\n    };\n\n    return trackRecorder;\n};\n\n/**\n * Notifies the module that a specific track has stopped, e.g participant left\n * the conference.\n * if the recording has not started yet, the TrackRecorder will be removed from\n * the array. If the recording has started, the recorder will stop recording\n * but not removed from the array so that the recorded stream can still be\n * accessed\n *\n * @param {JitsiTrack} track the JitsiTrack to remove from the recording session\n */\nAudioRecorder.prototype.removeTrack = function(track) {\n    if (track.isVideoTrack()) {\n        return;\n    }\n\n    const array = this.recorders;\n    let i;\n\n    for (i = 0; i < array.length; i++) {\n        if (array[i].track.getParticipantId() === track.getParticipantId()) {\n            const recorderToRemove = array[i];\n\n            if (this.isRecording) {\n                stopRecorder(recorderToRemove);\n            } else {\n                // remove the TrackRecorder from the array\n                array.splice(i, 1);\n            }\n        }\n    }\n\n    // make sure the names are up to date\n    this.updateNames();\n};\n\n/**\n * Tries to update the name value of all TrackRecorder in the array.\n * If it hasn't changed,it will keep the exiting name. If it changes to a\n * undefined value, the old value will also be kept.\n */\nAudioRecorder.prototype.updateNames = function() {\n    const conference = this.jitsiConference;\n\n    this.recorders.forEach(trackRecorder => {\n        if (trackRecorder.track.isLocal()) {\n            trackRecorder.name = 'the transcriber';\n        } else {\n            const id = trackRecorder.track.getParticipantId();\n            const participant = conference.getParticipantById(id);\n            const newName = participant.getDisplayName();\n\n            if (newName !== 'undefined') {\n                trackRecorder.name = newName;\n            }\n        }\n    });\n};\n\n/**\n * Starts the audio recording of every local and remote track\n */\nAudioRecorder.prototype.start = function() {\n    if (this.isRecording) {\n        throw new Error('audiorecorder is already recording');\n    }\n\n    // set boolean isRecording flag to true so if new participants join the\n    // conference, that track can instantly start recording as well\n    this.isRecording = true;\n\n    // start all the mediaRecorders\n    this.recorders.forEach(trackRecorder => startRecorder(trackRecorder));\n\n    // log that recording has started\n    console.log(\n        `Started the recording of the audio. There are currently ${\n            this.recorders.length} recorders active.`);\n};\n\n/**\n * Stops the audio recording of every local and remote track\n */\nAudioRecorder.prototype.stop = function() {\n    // set the boolean flag to false\n    this.isRecording = false;\n\n    // stop all recorders\n    this.recorders.forEach(trackRecorder => stopRecorder(trackRecorder));\n    console.log('stopped recording');\n};\n\n/**\n * link hacking to download all recorded audio streams\n */\nAudioRecorder.prototype.download = function() {\n    this.recorders.forEach(trackRecorder => {\n        const blob = new Blob(trackRecorder.data, { type: this.fileType });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n\n        document.body.appendChild(a);\n        a.style = 'display: none';\n        a.href = url;\n        a.download = `test.${this.fileType.split('/')[1]}`;\n        a.click();\n        window.URL.revokeObjectURL(url);\n    });\n};\n\n/**\n * returns the audio files of all recorders as an array of objects,\n * which include the name of the owner of the track and the starting time stamp\n * @returns {Array} an array of RecordingResult objects\n */\nAudioRecorder.prototype.getRecordingResults = function() {\n    if (this.isRecording) {\n        throw new Error(\n            'cannot get blobs because the AudioRecorder is still recording!');\n    }\n\n    // make sure the names are up to date before sending them off\n    this.updateNames();\n\n    const array = [];\n\n    this.recorders.forEach(\n        recorder =>\n            array.push(\n                new RecordingResult(\n                    new Blob(recorder.data, { type: this.fileType }),\n                    recorder.name,\n                    recorder.startTime)));\n\n    return array;\n};\n\n/**\n * Gets the mime type of the recorder audio\n * @returns {String} the mime type of the recorder audio\n */\nAudioRecorder.prototype.getFileType = function() {\n    return this.fileType;\n};\n\n/**\n * Creates a empty MediaStream object which can be used\n * to add MediaStreamTracks to\n * @returns MediaStream\n */\nfunction createEmptyStream() {\n    if (typeof MediaStream !== 'undefined') {\n        return new MediaStream();\n    }\n    throw new Error('cannot create a clean mediaStream');\n}\n\n/**\n * export the main object AudioRecorder\n */\nmodule.exports = AudioRecorder;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/audioRecorder.js","/**\n * A collection of utility functions for taking in XML and parsing it to return\n * certain values.\n */\nexport default {\n    /**\n     * Parses the presence update of the focus and returns an object with the\n     * statuses related to recording.\n     *\n     * @param {Node} presence - An XMPP presence update.\n     * @returns {Object} The current presence values related to recording.\n     */\n    getFocusRecordingUpdate(presence) {\n        const jibriStatus = presence\n            && presence.getElementsByTagName('jibri-recording-status')[0];\n\n        if (!jibriStatus) {\n            return;\n        }\n\n        return {\n            error: jibriStatus.getAttribute('failure_reason'),\n            recordingMode: jibriStatus.getAttribute('recording_mode'),\n            sessionID: jibriStatus.getAttribute('session_id'),\n            status: jibriStatus.getAttribute('status')\n        };\n    },\n\n    /**\n     * Parses the presence update from a hidden domain participant and returns\n     * an object with the statuses related to recording.\n     *\n     * @param {Node} presence - An XMPP presence update.\n     * @returns {Object} The current presence values related to recording.\n     */\n    getHiddenDomainUpdate(presence) {\n        const liveStreamViewURLContainer\n            = presence.getElementsByTagName('live-stream-view-url')[0];\n        const liveStreamViewURL = liveStreamViewURLContainer\n            && liveStreamViewURLContainer.textContent;\n        const modeContainer\n            = presence.getElementsByTagName('mode')[0];\n        const mode = modeContainer\n            && modeContainer.textContent\n            && modeContainer.textContent.toLowerCase();\n        const sessionIDContainer\n            = presence.getElementsByTagName('session_id')[0];\n        const sessionID\n            = sessionIDContainer && sessionIDContainer.textContent;\n\n        return {\n            liveStreamViewURL,\n            mode,\n            sessionID\n        };\n    },\n\n    /**\n     * Returns the recording session ID from a successful IQ.\n     *\n     * @param {Node} response - The response from the IQ.\n     * @returns {string} The session ID of the recording session.\n     */\n    getSessionIdFromIq(response) {\n        const jibri = response && response.getElementsByTagName('jibri')[0];\n\n        return jibri && jibri.getAttribute('session_id');\n    },\n\n    /**\n     * Returns the recording session ID from a presence, if it exists.\n     *\n     * @param {Node} presence - An XMPP presence update.\n     * @returns {string|undefined} The session ID of the recording session.\n     */\n    getSessionId(presence) {\n        const sessionIdContainer\n            = presence.getElementsByTagName('session_id')[0];\n        const sessionId = sessionIdContainer && sessionIdContainer.textContent;\n\n        return sessionId;\n    },\n\n    /**\n     * Returns whether or not a presence is from the focus.\n     *\n     * @param {Node} presence - An XMPP presence update.\n     * @returns {boolean} True if the presence is from the focus.\n     */\n    isFromFocus(presence) {\n        return presence.getAttribute('from').includes('focus');\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/recording/recordingXMLUtils.js","/**\n * The events for the media devices.\n */\n\n/**\n * Indicates that the list of available media devices has been changed. The\n * event provides the following parameters to its listeners:\n *\n * @param {MediaDeviceInfo[]} devices - array of MediaDeviceInfo or\n *  MediaDeviceInfo-like objects that are currently connected.\n *  @see https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo\n */\nexport const DEVICE_LIST_CHANGED = 'mediaDevices.devicechange';\n\n/**\n * Indicates that the environment is currently showing permission prompt to\n * access camera and/or microphone. The event provides the following\n * parameters to its listeners:\n *\n * @param {'chrome'|'opera'|'firefox'|'safari'|'nwjs'\n *  |'react-native'|'android'} environmentType - type of browser or\n *  other execution environment.\n */\nexport const PERMISSION_PROMPT_IS_SHOWN\n    = 'mediaDevices.permissionPromptIsShown';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiMediaDevicesEvents.js","// For legacy purposes, preserve the UMD of the public API of the Jitsi Meet\n// library (a.k.a. JitsiMeetJS).\nmodule.exports = require('./JitsiMeetJS').default;\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","/* global __filename */\n\nimport { createGetUserMediaEvent } from './service/statistics/AnalyticsEvents';\nimport AuthUtil from './modules/util/AuthUtil';\nimport * as ConnectionQualityEvents\n    from './service/connectivity/ConnectionQualityEvents';\nimport * as E2ePingEvents from './service/e2eping/E2ePingEvents';\nimport GlobalOnErrorHandler from './modules/util/GlobalOnErrorHandler';\nimport * as JitsiConferenceErrors from './JitsiConferenceErrors';\nimport * as JitsiConferenceEvents from './JitsiConferenceEvents';\nimport JitsiConnection from './JitsiConnection';\nimport * as JitsiConnectionErrors from './JitsiConnectionErrors';\nimport * as JitsiConnectionEvents from './JitsiConnectionEvents';\nimport JitsiMediaDevices from './JitsiMediaDevices';\nimport * as JitsiMediaDevicesEvents from './JitsiMediaDevicesEvents';\nimport JitsiTrackError from './JitsiTrackError';\nimport * as JitsiTrackErrors from './JitsiTrackErrors';\nimport * as JitsiTrackEvents from './JitsiTrackEvents';\nimport * as JitsiTranscriptionStatus from './JitsiTranscriptionStatus';\nimport LocalStatsCollector from './modules/statistics/LocalStatsCollector';\nimport Logger from 'jitsi-meet-logger';\nimport * as MediaType from './service/RTC/MediaType';\nimport Resolutions from './service/RTC/Resolutions';\nimport { ParticipantConnectionStatus }\n    from './modules/connectivity/ParticipantConnectionStatus';\nimport RTC from './modules/RTC/RTC';\nimport browser from './modules/browser';\nimport ScriptUtil from './modules/util/ScriptUtil';\nimport recordingConstants from './modules/recording/recordingConstants';\nimport Statistics from './modules/statistics/statistics';\nimport * as VideoSIPGWConstants from './modules/videosipgw/VideoSIPGWConstants';\n\nconst logger = Logger.getLogger(__filename);\n\n/**\n * The amount of time to wait until firing\n * {@link JitsiMediaDevicesEvents.PERMISSION_PROMPT_IS_SHOWN} event.\n */\nconst USER_MEDIA_PERMISSION_PROMPT_TIMEOUT = 1000;\n\n/**\n * Gets the next lowest desirable resolution to try for a camera. If the given\n * resolution is already the lowest acceptable resolution, returns {@code null}.\n *\n * @param resolution the current resolution\n * @return the next lowest resolution from the given one, or {@code null} if it\n * is already the lowest acceptable resolution.\n */\nfunction getLowerResolution(resolution) {\n    if (!Resolutions[resolution]) {\n        return null;\n    }\n    const order = Resolutions[resolution].order;\n    let res = null;\n    let resName = null;\n\n    Object.keys(Resolutions).forEach(r => {\n        const value = Resolutions[r];\n\n        if (!res || (res.order < value.order && value.order < order)) {\n            resName = r;\n            res = value;\n        }\n    });\n\n    if (resName === resolution) {\n        resName = null;\n    }\n\n    return resName;\n}\n\n/**\n * Extracts from an 'options' objects with a specific format (TODO what IS the\n * format?) the attributes which are to be logged in analytics events.\n *\n * @param options gum options (???)\n * @returns {*} the attributes to attach to analytics events.\n */\nfunction getAnalyticsAttributesFromOptions(options) {\n    const attributes = {\n        'audio_requested':\n            options.devices.includes('audio'),\n        'video_requested':\n            options.devices.includes('video'),\n        'screen_sharing_requested':\n            options.devices.includes('desktop')\n    };\n\n    if (attributes.video_requested) {\n        attributes.resolution = options.resolution;\n    }\n\n    return attributes;\n}\n\n/**\n * Tries to deal with the following problem: {@code JitsiMeetJS} is not only\n * this module, it's also a global (i.e. attached to {@code window}) namespace\n * for all globals of the projects in the Jitsi Meet family. If lib-jitsi-meet\n * is loaded through an HTML {@code script} tag, {@code JitsiMeetJS} will\n * automatically be attached to {@code window} by webpack. Unfortunately,\n * webpack's source code does not check whether the global variable has already\n * been assigned and overwrites it. Which is OK for the module\n * {@code JitsiMeetJS} but is not OK for the namespace {@code JitsiMeetJS}\n * because it may already contain the values of other projects in the Jitsi Meet\n * family. The solution offered here works around webpack by merging all\n * existing values of the namespace {@code JitsiMeetJS} into the module\n * {@code JitsiMeetJS}.\n *\n * @param {Object} module - The module {@code JitsiMeetJS} (which will be\n * exported and may be attached to {@code window} by webpack later on).\n * @private\n * @returns {Object} - A {@code JitsiMeetJS} module which contains all existing\n * value of the namespace {@code JitsiMeetJS} (if any).\n */\nfunction _mergeNamespaceAndModule(module) {\n    return (\n        typeof window.JitsiMeetJS === 'object'\n            ? Object.assign({}, window.JitsiMeetJS, module)\n            : module);\n}\n\n/**\n * The public API of the Jitsi Meet library (a.k.a. {@code JitsiMeetJS}).\n */\nexport default _mergeNamespaceAndModule({\n\n    version: '{#COMMIT_HASH#}',\n\n    JitsiConnection,\n    constants: {\n        participantConnectionStatus: ParticipantConnectionStatus,\n        recording: recordingConstants,\n        sipVideoGW: VideoSIPGWConstants,\n        transcriptionStatus: JitsiTranscriptionStatus\n    },\n    events: {\n        conference: JitsiConferenceEvents,\n        connection: JitsiConnectionEvents,\n        track: JitsiTrackEvents,\n        mediaDevices: JitsiMediaDevicesEvents,\n        connectionQuality: ConnectionQualityEvents,\n        e2eping: E2ePingEvents\n    },\n    errors: {\n        conference: JitsiConferenceErrors,\n        connection: JitsiConnectionErrors,\n        track: JitsiTrackErrors\n    },\n    errorTypes: {\n        JitsiTrackError\n    },\n    logLevels: Logger.levels,\n    mediaDevices: JitsiMediaDevices,\n    analytics: Statistics.analytics,\n    init(options = {}) {\n        Statistics.init(options);\n\n        // Initialize global window.connectionTimes\n        // FIXME do not use 'window'\n        if (!window.connectionTimes) {\n            window.connectionTimes = {};\n        }\n\n        if (options.enableAnalyticsLogging !== true) {\n            logger.warn('Analytics disabled, disposing.');\n            this.analytics.dispose();\n        }\n\n        if (options.enableWindowOnErrorHandler) {\n            GlobalOnErrorHandler.addHandler(\n                this.getGlobalOnErrorHandler.bind(this));\n        }\n\n        // Log deployment-specific information, if available. Defined outside\n        // the application by individual deployments\n        const aprops = options.deploymentInfo;\n\n        if (aprops && Object.keys(aprops).length > 0) {\n            const logObject = {};\n\n            for (const attr in aprops) {\n                if (aprops.hasOwnProperty(attr)) {\n                    logObject[attr] = aprops[attr];\n                }\n            }\n\n            logObject.id = 'deployment_info';\n            Statistics.sendLog(JSON.stringify(logObject));\n        }\n\n        if (this.version) {\n            const logObject = {\n                id: 'component_version',\n                component: 'lib-jitsi-meet',\n                version: this.version\n            };\n\n            Statistics.sendLog(JSON.stringify(logObject));\n        }\n\n        return RTC.init(options);\n    },\n\n    /**\n     * Returns whether the desktop sharing is enabled or not.\n     *\n     * @returns {boolean}\n     */\n    isDesktopSharingEnabled() {\n        return RTC.isDesktopSharingEnabled();\n    },\n\n    /**\n     * Returns whether the current execution environment supports WebRTC (for\n     * use within this library).\n     *\n     * @returns {boolean} {@code true} if WebRTC is supported in the current\n     * execution environment (for use within this library); {@code false},\n     * otherwise.\n     */\n    isWebRtcSupported() {\n        return RTC.isWebRtcSupported();\n    },\n\n    setLogLevel(level) {\n        Logger.setLogLevel(level);\n    },\n\n    /**\n     * Sets the log level to the <tt>Logger</tt> instance with given id.\n     *\n     * @param {Logger.levels} level the logging level to be set\n     * @param {string} id the logger id to which new logging level will be set.\n     * Usually it's the name of the JavaScript source file including the path\n     * ex. \"modules/xmpp/ChatRoom.js\"\n     */\n    setLogLevelById(level, id) {\n        Logger.setLogLevelById(level, id);\n    },\n\n    /**\n     * Registers new global logger transport to the library logging framework.\n     *\n     * @param globalTransport\n     * @see Logger.addGlobalTransport\n     */\n    addGlobalLogTransport(globalTransport) {\n        Logger.addGlobalTransport(globalTransport);\n    },\n\n    /**\n     * Removes global logging transport from the library logging framework.\n     *\n     * @param globalTransport\n     * @see Logger.removeGlobalTransport\n     */\n    removeGlobalLogTransport(globalTransport) {\n        Logger.removeGlobalTransport(globalTransport);\n    },\n\n    /**\n     * Creates the media tracks and returns them trough the callback.\n     *\n     * @param options Object with properties / settings specifying the tracks\n     * which should be created. should be created or some additional\n     * configurations about resolution for example.\n     * @param {Array} options.devices the devices that will be requested\n     * @param {string} options.resolution resolution constraints\n     * @param {string} options.cameraDeviceId\n     * @param {string} options.micDeviceId\n     * @param {object} options.desktopSharingExtensionExternalInstallation -\n     * enables external installation process for desktop sharing extension if\n     * the inline installation is not posible. The following properties should\n     * be provided:\n     * @param {intiger} interval - the interval (in ms) for\n     * checking whether the desktop sharing extension is installed or not\n     * @param {Function} checkAgain - returns boolean. While checkAgain()==true\n     * createLocalTracks will wait and check on every \"interval\" ms for the\n     * extension. If the desktop extension is not install and checkAgain()==true\n     * createLocalTracks will finish with rejected Promise.\n     * @param {Function} listener - The listener will be called to notify the\n     * user of lib-jitsi-meet that createLocalTracks is starting external\n     * extension installation process.\n     * NOTE: If the inline installation process is not possible and external\n     * installation is enabled the listener property will be called to notify\n     * the start of external installation process. After that createLocalTracks\n     * will start to check for the extension on every interval ms until the\n     * plugin is installed or until checkAgain return false. If the extension\n     * is found createLocalTracks will try to get the desktop sharing track and\n     * will finish the execution. If checkAgain returns false, createLocalTracks\n     * will finish the execution with rejected Promise.\n     *\n     * @param {boolean} (firePermissionPromptIsShownEvent) - if event\n     * JitsiMediaDevicesEvents.PERMISSION_PROMPT_IS_SHOWN should be fired\n     * @param originalOptions - internal use only, to be able to store the\n     * originally requested options.\n     * @returns {Promise.<{Array.<JitsiTrack>}, JitsiConferenceError>} A promise\n     * that returns an array of created JitsiTracks if resolved, or a\n     * JitsiConferenceError if rejected.\n     */\n    createLocalTracks(\n            options = {}, firePermissionPromptIsShownEvent, originalOptions) {\n        let promiseFulfilled = false;\n\n        if (firePermissionPromptIsShownEvent === true) {\n            window.setTimeout(() => {\n                if (!promiseFulfilled) {\n                    JitsiMediaDevices.emitEvent(\n                        JitsiMediaDevicesEvents.PERMISSION_PROMPT_IS_SHOWN,\n                        browser.getName());\n                }\n            }, USER_MEDIA_PERMISSION_PROMPT_TIMEOUT);\n        }\n\n        if (!window.connectionTimes) {\n            window.connectionTimes = {};\n        }\n        window.connectionTimes['obtainPermissions.start']\n            = window.performance.now();\n\n        return RTC.obtainAudioAndVideoPermissions(options)\n            .then(tracks => {\n                promiseFulfilled = true;\n\n                window.connectionTimes['obtainPermissions.end']\n                    = window.performance.now();\n\n                Statistics.sendAnalytics(\n                    createGetUserMediaEvent(\n                        'success',\n                        getAnalyticsAttributesFromOptions(options)));\n\n                if (!RTC.options.disableAudioLevels) {\n                    for (let i = 0; i < tracks.length; i++) {\n                        const track = tracks[i];\n                        const mStream = track.getOriginalStream();\n\n                        if (track.getType() === MediaType.AUDIO) {\n                            Statistics.startLocalStats(mStream,\n                                track.setAudioLevel.bind(track));\n                            track.addEventListener(\n                                JitsiTrackEvents.LOCAL_TRACK_STOPPED,\n                                () => {\n                                    Statistics.stopLocalStats(mStream);\n                                });\n                        }\n                    }\n                }\n\n                // set real device ids\n                const currentlyAvailableMediaDevices\n                    = RTC.getCurrentlyAvailableMediaDevices();\n\n                if (currentlyAvailableMediaDevices) {\n                    for (let i = 0; i < tracks.length; i++) {\n                        const track = tracks[i];\n\n                        track._setRealDeviceIdFromDeviceList(\n                            currentlyAvailableMediaDevices);\n                    }\n                }\n\n                return tracks;\n            })\n            .catch(error => {\n                promiseFulfilled = true;\n\n                if (error.name === JitsiTrackErrors.UNSUPPORTED_RESOLUTION\n                    && !browser.usesNewGumFlow()) {\n                    const oldResolution = options.resolution || '720';\n                    const newResolution = getLowerResolution(oldResolution);\n\n                    if (newResolution !== null) {\n                        options.resolution = newResolution;\n\n                        logger.debug(\n                            'Retry createLocalTracks with resolution',\n                            newResolution);\n\n                        Statistics.sendAnalytics(createGetUserMediaEvent(\n                            'warning',\n                            {\n                                'old_resolution': oldResolution,\n                                'new_resolution': newResolution,\n                                reason: 'unsupported resolution'\n                            }));\n\n                        return this.createLocalTracks(\n                            options,\n                            undefined,\n                            originalOptions || Object.assign({}, options));\n                    }\n\n                    // We tried everything. If there is a mandatory device id,\n                    // remove it and let gum find a device to use.\n                    if (originalOptions\n                        && error.gum.constraints\n                        && error.gum.constraints.video\n                        && error.gum.constraints.video.mandatory\n                        && error.gum.constraints.video.mandatory.sourceId) {\n                        originalOptions.cameraDeviceId = undefined;\n\n                        return this.createLocalTracks(originalOptions);\n                    }\n                }\n\n                if (error.name\n                        === JitsiTrackErrors.CHROME_EXTENSION_USER_CANCELED) {\n                    // User cancelled action is not really an error, so only\n                    // log it as an event to avoid having conference classified\n                    // as partially failed\n                    const logObject = {\n                        id: 'chrome_extension_user_canceled',\n                        message: error.message\n                    };\n\n                    Statistics.sendLog(JSON.stringify(logObject));\n\n                    Statistics.sendAnalytics(\n                        createGetUserMediaEvent(\n                            'warning',\n                            {\n                                reason: 'extension install user canceled'\n                            }));\n                } else if (error.name === JitsiTrackErrors.NOT_FOUND) {\n                    // logs not found devices with just application log to cs\n                    const logObject = {\n                        id: 'usermedia_missing_device',\n                        status: error.gum.devices\n                    };\n\n                    Statistics.sendLog(JSON.stringify(logObject));\n\n                    const attributes\n                        = getAnalyticsAttributesFromOptions(options);\n\n                    attributes.reason = 'device not found';\n                    attributes.devices = error.gum.devices.join('.');\n                    Statistics.sendAnalytics(\n                        createGetUserMediaEvent('error', attributes));\n                } else {\n                    // Report gUM failed to the stats\n                    Statistics.sendGetUserMediaFailed(error);\n\n                    const attributes\n                        = getAnalyticsAttributesFromOptions(options);\n\n                    attributes.reason = error.name;\n                    Statistics.sendAnalytics(\n                        createGetUserMediaEvent('error', attributes));\n                }\n\n                window.connectionTimes['obtainPermissions.end']\n                    = window.performance.now();\n\n                return Promise.reject(error);\n            });\n    },\n\n    /**\n     * Checks if its possible to enumerate available cameras/microphones.\n     *\n     * @returns {Promise<boolean>} a Promise which will be resolved only once\n     * the WebRTC stack is ready, either with true if the device listing is\n     * available available or with false otherwise.\n     * @deprecated use JitsiMeetJS.mediaDevices.isDeviceListAvailable instead\n     */\n    isDeviceListAvailable() {\n        logger.warn('This method is deprecated, use '\n            + 'JitsiMeetJS.mediaDevices.isDeviceListAvailable instead');\n\n        return this.mediaDevices.isDeviceListAvailable();\n    },\n\n    /**\n     * Returns true if changing the input (camera / microphone) or output\n     * (audio) device is supported and false if not.\n     *\n     * @param {string} [deviceType] - type of device to change. Default is\n     * {@code undefined} or 'input', 'output' - for audio output device change.\n     * @returns {boolean} {@code true} if available; {@code false}, otherwise.\n     * @deprecated use JitsiMeetJS.mediaDevices.isDeviceChangeAvailable instead\n     */\n    isDeviceChangeAvailable(deviceType) {\n        logger.warn('This method is deprecated, use '\n            + 'JitsiMeetJS.mediaDevices.isDeviceChangeAvailable instead');\n\n        return this.mediaDevices.isDeviceChangeAvailable(deviceType);\n    },\n\n\n    /**\n     * Checks if the current environment supports having multiple audio\n     * input devices in use simultaneously.\n     *\n     * @returns {boolean} True if multiple audio input devices can be used.\n     */\n    isMultipleAudioInputSupported() {\n        return this.mediaDevices.isMultipleAudioInputSupported();\n    },\n\n    /**\n     * Checks if local tracks can collect stats and collection is enabled.\n     *\n     * @param {boolean} True if stats are being collected for local tracks.\n     */\n    isCollectingLocalStats() {\n        return Statistics.audioLevelsEnabled\n            && LocalStatsCollector.isLocalStatsSupported();\n    },\n\n    /**\n     * Executes callback with list of media devices connected.\n     *\n     * @param {function} callback\n     * @deprecated use JitsiMeetJS.mediaDevices.enumerateDevices instead\n     */\n    enumerateDevices(callback) {\n        logger.warn('This method is deprecated, use '\n            + 'JitsiMeetJS.mediaDevices.enumerateDevices instead');\n        this.mediaDevices.enumerateDevices(callback);\n    },\n\n    /* eslint-disable max-params */\n\n    /**\n     * @returns function that can be used to be attached to window.onerror and\n     * if options.enableWindowOnErrorHandler is enabled returns\n     * the function used by the lib.\n     * (function(message, source, lineno, colno, error)).\n     */\n    getGlobalOnErrorHandler(message, source, lineno, colno, error) {\n        logger.error(\n            `UnhandledError: ${message}`,\n            `Script: ${source}`,\n            `Line: ${lineno}`,\n            `Column: ${colno}`,\n            'StackTrace: ', error);\n        Statistics.reportGlobalError(error);\n    },\n\n    /* eslint-enable max-params */\n\n    /**\n     * Represents a hub/namespace for utility functionality which may be of\n     * interest to lib-jitsi-meet clients.\n     */\n    util: {\n        AuthUtil,\n        ScriptUtil,\n        browser\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiMeetJS.js","const AuthUtil = {\n    /**\n     * Creates the URL pointing to JWT token authentication service. It is\n     * formatted from the 'urlPattern' argument which can contain the following\n     * constants:\n     * '{room}' - name of the conference room passed as <tt>roomName</tt>\n     * argument to this method.\n     * '{roleUpgrade}' - will contain 'true' if the URL will be used for\n     * the role upgrade scenario, where user connects from anonymous domain and\n     * then gets upgraded to the moderator by logging-in from the popup window.\n     *\n     * @param urlPattern a URL pattern pointing to the login service\n     * @param roomName the name of the conference room for which the user will\n     * be authenticated\n     * @param {bool} roleUpgrade <tt>true</tt> if the URL will be used for role\n     * upgrade scenario, where the user logs-in from the popup window in order\n     * to have the moderator rights granted\n     *\n     * @returns {string|null} the URL pointing to JWT login service or\n     * <tt>null</tt> if 'urlPattern' is not a string and the URL can not be\n     * constructed.\n     */\n    getTokenAuthUrl(urlPattern, roomName, roleUpgrade) {\n        const url = urlPattern;\n\n        if (typeof url !== 'string') {\n            return null;\n        }\n\n        return url.replace('{room}', roomName)\n            .replace('{roleUpgrade}', roleUpgrade === true);\n    }\n};\n\nmodule.exports = AuthUtil;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/AuthUtil.js","import {\n    CONNECTION_DISCONNECTED as ANALYTICS_CONNECTION_DISCONNECTED,\n    createConnectionFailedEvent\n} from './service/statistics/AnalyticsEvents';\nimport JitsiConference from './JitsiConference';\nimport * as JitsiConnectionEvents from './JitsiConnectionEvents';\nimport Statistics from './modules/statistics/statistics';\nimport XMPP from './modules/xmpp/xmpp';\n\n/**\n * Creates a new connection object for the Jitsi Meet server side video\n * conferencing service. Provides access to the JitsiConference interface.\n * @param appID identification for the provider of Jitsi Meet video conferencing\n * services.\n * @param token the JWT token used to authenticate with the server(optional)\n * @param options Object with properties / settings related to connection with\n * the server.\n * @constructor\n */\nexport default function JitsiConnection(appID, token, options) {\n    this.appID = appID;\n    this.token = token;\n    this.options = options;\n    this.xmpp = new XMPP(options, token);\n\n    /* eslint-disable max-params */\n    this.addEventListener(JitsiConnectionEvents.CONNECTION_FAILED,\n        (errType, msg, credentials, details) => {\n            Statistics.sendAnalyticsAndLog(\n                createConnectionFailedEvent(errType, msg, details));\n        });\n    /* eslint-enable max-params */\n\n    this.addEventListener(JitsiConnectionEvents.CONNECTION_DISCONNECTED,\n        msg => {\n            // we can see disconnects from normal tab closing of the browser\n            // and then there are no msgs, but we want to log only disconnects\n            // when there is real error\n            // XXX Do we need the difference in handling between the log and\n            // analytics event here?\n            if (msg) {\n                Statistics.sendAnalytics(\n                    ANALYTICS_CONNECTION_DISCONNECTED,\n                    { message: msg });\n            }\n            Statistics.sendLog(\n                JSON.stringify(\n                    {\n                        id: ANALYTICS_CONNECTION_DISCONNECTED,\n                        msg\n                    }));\n        });\n}\n\n/**\n * Connect the client with the server.\n * @param options {object} connecting options\n * (for example authentications parameters).\n */\nJitsiConnection.prototype.connect = function(options = {}) {\n    this.xmpp.connect(options.id, options.password);\n};\n\n/**\n * Attach to existing connection. Can be used for optimizations. For example:\n * if the connection is created on the server we can attach to it and start\n * using it.\n *\n * @param options {object} connecting options - rid, sid and jid.\n */\nJitsiConnection.prototype.attach = function(options) {\n    this.xmpp.attach(options);\n};\n\n/**\n * Disconnect the client from the server.\n */\nJitsiConnection.prototype.disconnect = function(...args) {\n    // XXX Forward any arguments passed to JitsiConnection.disconnect to\n    // XMPP.disconnect. For example, the caller of JitsiConnection.disconnect\n    // may optionally pass the event which triggered the disconnect in order to\n    // provide the implementation with finer-grained context.\n    this.xmpp.disconnect(...args);\n};\n\n/**\n * This method allows renewal of the tokens if they are expiring.\n * @param token the new token.\n */\nJitsiConnection.prototype.setToken = function(token) {\n    this.token = token;\n};\n\n/**\n * Creates and joins new conference.\n * @param name the name of the conference; if null - a generated name will be\n * provided from the api\n * @param options Object with properties / settings related to the conference\n * that will be created.\n * @returns {JitsiConference} returns the new conference object.\n */\nJitsiConnection.prototype.initJitsiConference = function(name, options) {\n    return new JitsiConference({\n        name,\n        config: options,\n        connection: this\n    });\n};\n\n/**\n * Subscribes the passed listener to the event.\n * @param event {JitsiConnectionEvents} the connection event.\n * @param listener {Function} the function that will receive the event\n */\nJitsiConnection.prototype.addEventListener = function(event, listener) {\n    this.xmpp.addListener(event, listener);\n};\n\n/**\n * Unsubscribes the passed handler.\n * @param event {JitsiConnectionEvents} the connection event.\n * @param listener {Function} the function that will receive the event\n */\nJitsiConnection.prototype.removeEventListener = function(event, listener) {\n    this.xmpp.removeListener(event, listener);\n};\n\n/**\n * Returns measured connectionTimes.\n */\nJitsiConnection.prototype.getConnectionTimes = function() {\n    return this.xmpp.connectionTimes;\n};\n\n/**\n * Adds new feature to the list of supported features for the local\n * participant.\n * @param {String} feature the name of the feature.\n * @param {boolean} submit if true - the new list of features will be\n * immediately submitted to the others.\n */\nJitsiConnection.prototype.addFeature = function(feature, submit = false) {\n    return this.xmpp.caps.addFeature(feature, submit);\n};\n\n/**\n * Removes a feature from the list of supported features for the local\n * participant\n * @param {String} feature the name of the feature.\n * @param {boolean} submit if true - the new list of features will be\n * immediately submitted to the others.\n */\nJitsiConnection.prototype.removeFeature = function(feature, submit = false) {\n    return this.xmpp.caps.removeFeature(feature, submit);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConnection.js","/* global __filename, $, Promise */\nimport { Strophe } from 'strophe.js';\n\nimport {\n    ACTION_JINGLE_RESTART,\n    ACTION_JINGLE_SI_RECEIVED,\n    ACTION_JINGLE_SI_TIMEOUT,\n    ACTION_JINGLE_TERMINATE,\n    ACTION_P2P_ESTABLISHED,\n    ACTION_P2P_FAILED,\n    ACTION_P2P_SWITCH_TO_JVB,\n    ICE_ESTABLISHMENT_DURATION_DIFF,\n    createJingleEvent,\n    createP2PEvent\n} from './service/statistics/AnalyticsEvents';\nimport AvgRTPStatsReporter from './modules/statistics/AvgRTPStatsReporter';\nimport ComponentsVersions from './modules/version/ComponentsVersions';\nimport ConnectionQuality from './modules/connectivity/ConnectionQuality';\nimport E2ePing from './modules/e2eping/e2eping';\nimport { getLogger } from 'jitsi-meet-logger';\nimport GlobalOnErrorHandler from './modules/util/GlobalOnErrorHandler';\nimport EventEmitter from 'events';\nimport authenticateAndUpgradeRole from './authenticateAndUpgradeRole';\nimport * as JitsiConferenceErrors from './JitsiConferenceErrors';\nimport JitsiConferenceEventManager from './JitsiConferenceEventManager';\nimport * as JitsiConferenceEvents from './JitsiConferenceEvents';\nimport JitsiDTMFManager from './modules/DTMF/JitsiDTMFManager';\nimport JitsiParticipant from './JitsiParticipant';\nimport JitsiTrackError from './JitsiTrackError';\nimport * as JitsiTrackErrors from './JitsiTrackErrors';\nimport * as JitsiTrackEvents from './JitsiTrackEvents';\nimport Jvb121EventGenerator from './modules/event/Jvb121EventGenerator';\nimport * as MediaType from './service/RTC/MediaType';\nimport ParticipantConnectionStatusHandler\n    from './modules/connectivity/ParticipantConnectionStatus';\nimport P2PDominantSpeakerDetection from './modules/P2PDominantSpeakerDetection';\nimport RTC from './modules/RTC/RTC';\nimport browser from './modules/browser';\nimport * as RTCEvents from './service/RTC/RTCEvents';\nimport Statistics from './modules/statistics/statistics';\nimport TalkMutedDetection from './modules/TalkMutedDetection';\nimport Transcriber from './modules/transcription/transcriber';\nimport VideoType from './service/RTC/VideoType';\nimport RecordingManager from './modules/recording/RecordingManager';\nimport VideoSIPGW from './modules/videosipgw/VideoSIPGW';\nimport * as VideoSIPGWConstants from './modules/videosipgw/VideoSIPGWConstants';\nimport * as XMPPEvents from './service/xmpp/XMPPEvents';\nimport { JITSI_MEET_MUC_TYPE } from './modules/xmpp/ChatRoom';\nimport RttMonitor from './modules/rttmonitor/rttmonitor';\n\nimport SpeakerStatsCollector from './modules/statistics/SpeakerStatsCollector';\n\nconst logger = getLogger(__filename);\n\n/**\n * How long since Jicofo is supposed to send a session-initiate, before\n * {@link ACTION_JINGLE_SI_TIMEOUT} analytics event is sent (in ms).\n * @type {number}\n */\nconst JINGLE_SI_TIMEOUT = 5000;\n\n/**\n * Creates a JitsiConference object with the given name and properties.\n * Note: this constructor is not a part of the public API (objects should be\n * created using JitsiConnection.createConference).\n * @param options.config properties / settings related to the conference that\n * will be created.\n * @param options.name the name of the conference\n * @param options.connection the JitsiConnection object for this\n * JitsiConference.\n * @param {number} [options.config.avgRtpStatsN=15] how many samples are to be\n * collected by {@link AvgRTPStatsReporter}, before arithmetic mean is\n * calculated and submitted to the analytics module.\n * @param {boolean} [options.config.p2p.enabled] when set to <tt>true</tt>\n * the peer to peer mode will be enabled. It means that when there are only 2\n * participants in the conference an attempt to make direct connection will be\n * made. If the connection succeeds the conference will stop sending data\n * through the JVB connection and will use the direct one instead.\n * @param {number} [options.config.p2p.backToP2PDelay=5] a delay given in\n * seconds, before the conference switches back to P2P, after the 3rd\n * participant has left the room.\n * @param {number} [options.config.channelLastN=-1] The requested amount of\n * videos are going to be delivered after the value is in effect. Set to -1 for\n * unlimited or all available videos.\n * @param {number} [options.config.forceJVB121Ratio]\n * \"Math.random() < forceJVB121Ratio\" will determine whether a 2 people\n * conference should be moved to the JVB instead of P2P. The decision is made on\n * the responder side, after ICE succeeds on the P2P connection.\n * @param {*} [options.config.openBridgeChannel] Which kind of communication to\n * open with the videobridge. Values can be \"datachannel\", \"websocket\", true\n * (treat it as \"datachannel\"), undefined (treat it as \"datachannel\") and false\n * (don't open any channel).\n * @constructor\n *\n * FIXME Make all methods which are called from lib-internal classes\n *       to non-public (use _). To name a few:\n *       {@link JitsiConference.onLocalRoleChanged}\n *       {@link JitsiConference.onUserRoleChanged}\n *       {@link JitsiConference.onMemberLeft}\n *       and so on...\n */\nexport default function JitsiConference(options) {\n    if (!options.name || options.name.toLowerCase() !== options.name) {\n        const errmsg\n            = 'Invalid conference name (no conference name passed or it '\n                + 'contains invalid characters like capital letters)!';\n\n        logger.error(errmsg);\n        throw new Error(errmsg);\n    }\n    this.eventEmitter = new EventEmitter();\n    this.options = options;\n    this.eventManager = new JitsiConferenceEventManager(this);\n    this.participants = {};\n    this._init(options);\n    this.componentsVersions = new ComponentsVersions(this);\n\n    /**\n     * Jingle session instance for the JVB connection.\n     * @type {JingleSessionPC}\n     */\n    this.jvbJingleSession = null;\n    this.lastDominantSpeaker = null;\n    this.dtmfManager = null;\n    this.somebodySupportsDTMF = false;\n    this.authEnabled = false;\n    this.startAudioMuted = false;\n    this.startVideoMuted = false;\n    this.startMutedPolicy = {\n        audio: false,\n        video: false\n    };\n    this.availableDevices = {\n        audio: undefined,\n        video: undefined\n    };\n    this.isMutedByFocus = false;\n\n    // Flag indicates if the 'onCallEnded' method was ever called on this\n    // instance. Used to log extra analytics event for debugging purpose.\n    // We need to know if the potential issue happened before or after\n    // the restart.\n    this.wasStopped = false;\n\n    /**\n     * The object which monitors local and remote connection statistics (e.g.\n     * sending bitrate) and calculates a number which represents the connection\n     * quality.\n     */\n    this.connectionQuality\n        = new ConnectionQuality(this, this.eventEmitter, options);\n\n    /**\n     * Reports average RTP statistics to the analytics module.\n     * @type {AvgRTPStatsReporter}\n     */\n    this.avgRtpStatsReporter\n        = new AvgRTPStatsReporter(this, options.config.avgRtpStatsN || 15);\n\n    /**\n     * Indicates whether the connection is interrupted or not.\n     */\n    this.isJvbConnectionInterrupted = false;\n\n    /**\n     * The object which tracks active speaker times\n     */\n    this.speakerStatsCollector = new SpeakerStatsCollector(this);\n\n    /* P2P related fields below: */\n\n    /**\n     * Stores reference to deferred start P2P task. It's created when 3rd\n     * participant leaves the room in order to avoid ping pong effect (it\n     * could be just a page reload).\n     * @type {number|null}\n     */\n    this.deferredStartP2PTask = null;\n\n    const delay\n        = parseInt(options.config.p2p && options.config.p2p.backToP2PDelay, 10);\n\n    /**\n     * A delay given in seconds, before the conference switches back to P2P\n     * after the 3rd participant has left.\n     * @type {number}\n     */\n    this.backToP2PDelay = isNaN(delay) ? 5 : delay;\n    logger.info(`backToP2PDelay: ${this.backToP2PDelay}`);\n\n    /**\n     * If set to <tt>true</tt> it means the P2P ICE is no longer connected.\n     * When <tt>false</tt> it means that P2P ICE (media) connection is up\n     * and running.\n     * @type {boolean}\n     */\n    this.isP2PConnectionInterrupted = false;\n\n    /**\n     * Flag set to <tt>true</tt> when P2P session has been established\n     * (ICE has been connected) and this conference is currently in the peer to\n     * peer mode (P2P connection is the active one).\n     * @type {boolean}\n     */\n    this.p2p = false;\n\n    /**\n     * A JingleSession for the direct peer to peer connection.\n     * @type {JingleSessionPC}\n     */\n    this.p2pJingleSession = null;\n\n    this.videoSIPGWHandler = new VideoSIPGW(this.room);\n    this.recordingManager = new RecordingManager(this.room);\n}\n\n// FIXME convert JitsiConference to ES6 - ASAP !\nJitsiConference.prototype.constructor = JitsiConference;\n\n/**\n * Initializes the conference object properties\n * @param options {object}\n * @param options.connection {JitsiConnection} overrides this.connection\n */\nJitsiConference.prototype._init = function(options = {}) {\n    // Override connection and xmpp properties (Useful if the connection\n    // reloaded)\n    if (options.connection) {\n        this.connection = options.connection;\n        this.xmpp = this.connection.xmpp;\n\n        // Setup XMPP events only if we have new connection object.\n        this.eventManager.setupXMPPListeners();\n    }\n\n    const { config } = this.options;\n\n    this.room = this.xmpp.createRoom(this.options.name, config);\n\n    // Connection interrupted/restored listeners\n    this._onIceConnectionInterrupted\n        = this._onIceConnectionInterrupted.bind(this);\n    this.room.addListener(\n        XMPPEvents.CONNECTION_INTERRUPTED, this._onIceConnectionInterrupted);\n\n    this._onIceConnectionRestored = this._onIceConnectionRestored.bind(this);\n    this.room.addListener(\n        XMPPEvents.CONNECTION_RESTORED, this._onIceConnectionRestored);\n\n    this._onIceConnectionEstablished\n        = this._onIceConnectionEstablished.bind(this);\n    this.room.addListener(\n        XMPPEvents.CONNECTION_ESTABLISHED, this._onIceConnectionEstablished);\n\n    this.room.updateDeviceAvailability(RTC.getDeviceAvailability());\n\n    this.rttMonitor = new RttMonitor(config.rttMonitor || {});\n\n    this.e2eping = new E2ePing(\n        this,\n        config,\n        (message, to) => {\n            try {\n                this.sendMessage(\n                    message, to, true /* sendThroughVideobridge */);\n            } catch (error) {\n                logger.warn('Failed to send a ping request or response.');\n            }\n        });\n\n    if (!this.rtc) {\n        this.rtc = new RTC(this, options);\n        this.eventManager.setupRTCListeners();\n    }\n\n    this.participantConnectionStatus\n        = new ParticipantConnectionStatusHandler(\n            this.rtc,\n            this,\n            {\n                // Both these options are not public API, leaving it here only\n                // as an entry point through config for tuning up purposes.\n                // Default values should be adjusted as soon as optimal values\n                // are discovered.\n                rtcMuteTimeout: config._peerConnStatusRtcMuteTimeout,\n                outOfLastNTimeout: config._peerConnStatusOutOfLastNTimeout\n            });\n    this.participantConnectionStatus.init();\n\n    if (!this.statistics) {\n        // XXX The property location on the global variable window is not\n        // defined in all execution environments (e.g. react-native). While\n        // jitsi-meet may polyfill it when executing on react-native, it is\n        // better for the cross-platform support to not require window.location\n        // especially when there is a worthy alternative (as demonstrated\n        // bellow).\n        const windowLocation = window.location;\n\n        let callStatsAliasName = this.myUserId();\n\n        if (config.enableDisplayNameInStats && config.displayName) {\n            callStatsAliasName = config.displayName;\n        }\n\n        this.statistics = new Statistics(this.xmpp, {\n            callStatsAliasName,\n            callStatsConfIDNamespace:\n                config.callStatsConfIDNamespace\n                    || (windowLocation && windowLocation.hostname)\n                    || (config.hosts && config.hosts.domain),\n            customScriptUrl: config.callStatsCustomScriptUrl,\n            callStatsID: config.callStatsID,\n            callStatsSecret: config.callStatsSecret,\n            roomName: this.options.name,\n            swapUserNameAndAlias: config.enableStatsID,\n            applicationName: config.applicationName,\n            getWiFiStatsMethod: config.getWiFiStatsMethod\n        });\n    }\n\n    this.eventManager.setupChatRoomListeners();\n\n    // Always add listeners because on reload we are executing leave and the\n    // listeners are removed from statistics module.\n    this.eventManager.setupStatisticsListeners();\n\n    if (config.enableTalkWhileMuted) {\n        // eslint-disable-next-line no-new\n        new TalkMutedDetection(\n            this,\n            () =>\n                this.eventEmitter.emit(JitsiConferenceEvents.TALK_WHILE_MUTED));\n    }\n\n    if ('channelLastN' in config) {\n        this.setLastN(config.channelLastN);\n    }\n\n    /**\n     * Emits {@link JitsiConferenceEvents.JVB121_STATUS}.\n     * @type {Jvb121EventGenerator}\n     */\n    this.jvb121Status = new Jvb121EventGenerator(this);\n\n    // creates dominant speaker detection that works only in p2p mode\n    this.p2pDominantSpeakerDetection = new P2PDominantSpeakerDetection(this);\n\n    if (config && config.deploymentInfo && config.deploymentInfo.userRegion) {\n        this.setLocalParticipantProperty(\n            'region', config.deploymentInfo.userRegion);\n    }\n};\n\n/**\n * Joins the conference.\n * @param password {string} the password\n */\nJitsiConference.prototype.join = function(password) {\n    if (this.room) {\n        this.room.join(password).then(() => this._maybeSetSITimeout());\n    }\n};\n\n/**\n * Authenticates and upgrades the role of the local participant/user.\n *\n * @returns {Object} A <tt>thenable</tt> which (1) settles when the process of\n * authenticating and upgrading the role of the local participant/user finishes\n * and (2) has a <tt>cancel</tt> method that allows the caller to interrupt the\n * process.\n */\nJitsiConference.prototype.authenticateAndUpgradeRole = function(...args) {\n    return authenticateAndUpgradeRole.apply(this, args);\n};\n\n/**\n * Check if joined to the conference.\n */\nJitsiConference.prototype.isJoined = function() {\n    return this.room && this.room.joined;\n};\n\n/**\n * Tells whether or not the P2P mode is enabled in the configuration.\n * @return {boolean}\n */\nJitsiConference.prototype.isP2PEnabled = function() {\n    return Boolean(this.options.config.p2p && this.options.config.p2p.enabled)\n\n        // FIXME: remove once we have a default config template. -saghul\n        || typeof this.options.config.p2p === 'undefined';\n};\n\n/**\n * When in P2P test mode, the conference will not automatically switch to P2P\n * when there 2 participants.\n * @return {boolean}\n */\nJitsiConference.prototype.isP2PTestModeEnabled = function() {\n    return Boolean(this.options.config.testing\n        && this.options.config.testing.p2pTestMode);\n};\n\n/**\n * Leaves the conference.\n * @returns {Promise}\n */\nJitsiConference.prototype.leave = function() {\n    if (this.participantConnectionStatus) {\n        this.participantConnectionStatus.dispose();\n        this.participantConnectionStatus = null;\n    }\n    if (this.avgRtpStatsReporter) {\n        this.avgRtpStatsReporter.dispose();\n        this.avgRtpStatsReporter = null;\n    }\n\n    if (this.rttMonitor) {\n        this.rttMonitor.stop();\n        this.rttMonitor = null;\n    }\n\n    if (this.e2eping) {\n        this.e2eping.stop();\n        this.e2eping = null;\n    }\n\n    this.getLocalTracks().forEach(track => this.onLocalTrackRemoved(track));\n\n    this.rtc.closeBridgeChannel();\n    if (this.statistics) {\n        this.statistics.dispose();\n    }\n\n    // Close both JVb and P2P JingleSessions\n    if (this.jvbJingleSession) {\n        this.jvbJingleSession.close();\n        this.jvbJingleSession = null;\n    }\n    if (this.p2pJingleSession) {\n        this.p2pJingleSession.close();\n        this.p2pJingleSession = null;\n    }\n\n    // leave the conference\n    if (this.room) {\n        const room = this.room;\n\n        // Unregister connection state listeners\n        room.removeListener(\n            XMPPEvents.CONNECTION_INTERRUPTED,\n            this._onIceConnectionInterrupted);\n        room.removeListener(\n            XMPPEvents.CONNECTION_RESTORED,\n            this._onIceConnectionRestored);\n        room.removeListener(\n            XMPPEvents.CONNECTION_ESTABLISHED,\n            this._onIceConnectionEstablished);\n\n        this.room = null;\n\n        return room.leave().catch(error => {\n            // remove all participants because currently the conference won't\n            // be usable anyway. This is done on success automatically by the\n            // ChatRoom instance.\n            this.getParticipants().forEach(\n                participant => this.onMemberLeft(participant.getJid()));\n\n            throw error;\n        });\n    }\n\n    // If this.room == null we are calling second time leave().\n    return Promise.reject(\n        new Error('The conference is has been already left'));\n};\n\n/**\n * Returns name of this conference.\n */\nJitsiConference.prototype.getName = function() {\n    return this.options.name;\n};\n\n/**\n * Returns the {@link JitsiConnection} used by this this conference.\n */\nJitsiConference.prototype.getConnection = function() {\n    return this.connection;\n};\n\n/**\n * Check if authentication is enabled for this conference.\n */\nJitsiConference.prototype.isAuthEnabled = function() {\n    return this.authEnabled;\n};\n\n/**\n * Check if user is logged in.\n */\nJitsiConference.prototype.isLoggedIn = function() {\n    return Boolean(this.authIdentity);\n};\n\n/**\n * Get authorized login.\n */\nJitsiConference.prototype.getAuthLogin = function() {\n    return this.authIdentity;\n};\n\n/**\n * Check if external authentication is enabled for this conference.\n */\nJitsiConference.prototype.isExternalAuthEnabled = function() {\n    return this.room && this.room.moderator.isExternalAuthEnabled();\n};\n\n/**\n * Get url for external authentication.\n * @param {boolean} [urlForPopup] if true then return url for login popup,\n *                                else url of login page.\n * @returns {Promise}\n */\nJitsiConference.prototype.getExternalAuthUrl = function(urlForPopup) {\n    return new Promise((resolve, reject) => {\n        if (!this.isExternalAuthEnabled()) {\n            reject();\n\n            return;\n        }\n        if (urlForPopup) {\n            this.room.moderator.getPopupLoginUrl(resolve, reject);\n        } else {\n            this.room.moderator.getLoginUrl(resolve, reject);\n        }\n    });\n};\n\n/**\n * Returns the local tracks of the given media type, or all local tracks if no\n * specific type is given.\n * @param {MediaType} [mediaType] Optional media type (audio or video).\n */\nJitsiConference.prototype.getLocalTracks = function(mediaType) {\n    let tracks = [];\n\n    if (this.rtc) {\n        tracks = this.rtc.getLocalTracks(mediaType);\n    }\n\n    return tracks;\n};\n\n/**\n * Obtains local audio track.\n * @return {JitsiLocalTrack|null}\n */\nJitsiConference.prototype.getLocalAudioTrack = function() {\n    return this.rtc ? this.rtc.getLocalAudioTrack() : null;\n};\n\n/**\n * Obtains local video track.\n * @return {JitsiLocalTrack|null}\n */\nJitsiConference.prototype.getLocalVideoTrack = function() {\n    return this.rtc ? this.rtc.getLocalVideoTrack() : null;\n};\n\n/**\n * Attaches a handler for events(For example - \"participant joined\".) in the\n * conference. All possible event are defined in JitsiConferenceEvents.\n * @param eventId the event ID.\n * @param handler handler for the event.\n *\n * Note: consider adding eventing functionality by extending an EventEmitter\n * impl, instead of rolling ourselves\n */\nJitsiConference.prototype.on = function(eventId, handler) {\n    if (this.eventEmitter) {\n        this.eventEmitter.on(eventId, handler);\n    }\n};\n\n/**\n * Removes event listener\n * @param eventId the event ID.\n * @param [handler] optional, the specific handler to unbind\n *\n * Note: consider adding eventing functionality by extending an EventEmitter\n * impl, instead of rolling ourselves\n */\nJitsiConference.prototype.off = function(eventId, handler) {\n    if (this.eventEmitter) {\n        this.eventEmitter.removeListener(eventId, handler);\n    }\n};\n\n// Common aliases for event emitter\nJitsiConference.prototype.addEventListener = JitsiConference.prototype.on;\nJitsiConference.prototype.removeEventListener = JitsiConference.prototype.off;\n\n/**\n * Receives notifications from other participants about commands / custom events\n * (sent by sendCommand or sendCommandOnce methods).\n * @param command {String} the name of the command\n * @param handler {Function} handler for the command\n */\nJitsiConference.prototype.addCommandListener = function(command, handler) {\n    if (this.room) {\n        this.room.addPresenceListener(command, handler);\n    }\n};\n\n/**\n  * Removes command  listener\n  * @param command {String} the name of the command\n  */\nJitsiConference.prototype.removeCommandListener = function(command) {\n    if (this.room) {\n        this.room.removePresenceListener(command);\n    }\n};\n\n/**\n * Sends text message to the other participants in the conference\n * @param message the text message.\n * @param elementName the element name to encapsulate the message.\n * @deprecated Use 'sendMessage' instead. TODO: this should be private.\n */\nJitsiConference.prototype.sendTextMessage = function(\n        message, elementName = 'body') {\n    if (this.room) {\n        this.room.sendMessage(message, elementName);\n    }\n};\n\n/**\n * Send private text message to another participant of the conference\n * @param id the id of the participant to send a private message.\n * @param message the text message.\n * @param elementName the element name to encapsulate the message.\n * @deprecated Use 'sendMessage' instead. TODO: this should be private.\n */\nJitsiConference.prototype.sendPrivateTextMessage = function(\n        id, message, elementName = 'body') {\n    if (this.room) {\n        this.room.sendPrivateMessage(id, message, elementName);\n    }\n};\n\n/**\n * Send presence command.\n * @param name {String} the name of the command.\n * @param values {Object} with keys and values that will be sent.\n **/\nJitsiConference.prototype.sendCommand = function(name, values) {\n    if (this.room) {\n        this.room.addToPresence(name, values);\n        this.room.sendPresence();\n    } else {\n        logger.warn('Not sending a command, room not initialized.');\n    }\n\n};\n\n/**\n * Send presence command one time.\n * @param name {String} the name of the command.\n * @param values {Object} with keys and values that will be sent.\n **/\nJitsiConference.prototype.sendCommandOnce = function(name, values) {\n    this.sendCommand(name, values);\n    this.removeCommand(name);\n};\n\n/**\n * Removes presence command.\n * @param name {String} the name of the command.\n **/\nJitsiConference.prototype.removeCommand = function(name) {\n    if (this.room) {\n        this.room.removeFromPresence(name);\n    }\n};\n\n/**\n * Sets the display name for this conference.\n * @param name the display name to set\n */\nJitsiConference.prototype.setDisplayName = function(name) {\n    if (this.room) {\n        // remove previously set nickname\n        this.room.removeFromPresence('nick');\n\n        this.room.addToPresence('nick', {\n            attributes: { xmlns: 'http://jabber.org/protocol/nick' },\n            value: name\n        });\n        this.room.sendPresence();\n    }\n};\n\n/**\n * Set new subject for this conference. (available only for moderator)\n * @param {string} subject new subject\n */\nJitsiConference.prototype.setSubject = function(subject) {\n    if (this.room && this.isModerator()) {\n        this.room.setSubject(subject);\n    }\n};\n\n/**\n * Get a transcriber object for all current participants in this conference\n * @return {Transcriber} the transcriber object\n */\nJitsiConference.prototype.getTranscriber = function() {\n    if (this.transcriber === undefined) {\n        this.transcriber = new Transcriber();\n\n        // add all existing local audio tracks to the transcriber\n        const localAudioTracks = this.getLocalTracks(MediaType.AUDIO);\n\n        for (const localAudio of localAudioTracks) {\n            this.transcriber.addTrack(localAudio);\n        }\n\n        // and all remote audio tracks\n        const remoteAudioTracks = this.rtc.getRemoteTracks(MediaType.AUDIO);\n\n        for (const remoteTrack of remoteAudioTracks) {\n            this.transcriber.addTrack(remoteTrack);\n        }\n    }\n\n    return this.transcriber;\n};\n\n/**\n * Returns the transcription status.\n *\n * @returns {String} \"on\" or \"off\".\n */\nJitsiConference.prototype.getTranscriptionStatus = function() {\n    return this.room.transcriptionStatus;\n};\n\n/**\n * Adds JitsiLocalTrack object to the conference.\n * @param track the JitsiLocalTrack object.\n * @returns {Promise<JitsiLocalTrack>}\n * @throws {Error} if the specified track is a video track and there is already\n * another video track in the conference.\n */\nJitsiConference.prototype.addTrack = function(track) {\n    if (track.isVideoTrack()) {\n        // Ensure there's exactly 1 local video track in the conference.\n        const localVideoTrack = this.rtc.getLocalVideoTrack();\n\n        if (localVideoTrack) {\n            // Don't be excessively harsh and severe if the API client happens\n            // to attempt to add the same local video track twice.\n            if (track === localVideoTrack) {\n                return Promise.resolve(track);\n            }\n\n            return Promise.reject(new Error(\n                'cannot add second video track to the conference'));\n\n        }\n    }\n\n    return this.replaceTrack(null, track);\n};\n\n/**\n * Fires TRACK_AUDIO_LEVEL_CHANGED change conference event (for local tracks).\n * @param {number} audioLevel the audio level\n * @param {TraceablePeerConnection} [tpc]\n */\nJitsiConference.prototype._fireAudioLevelChangeEvent = function(\n        audioLevel,\n        tpc) {\n    const activeTpc = this.getActivePeerConnection();\n\n    // There will be no TraceablePeerConnection if audio levels do not come from\n    // a peerconnection. LocalStatsCollector.js measures audio levels using Web\n    // Audio Analyser API and emits local audio levels events through\n    // JitsiTrack.setAudioLevel, but does not provide TPC instance which is\n    // optional.\n    if (!tpc || activeTpc === tpc) {\n        this.eventEmitter.emit(\n            JitsiConferenceEvents.TRACK_AUDIO_LEVEL_CHANGED,\n            this.myUserId(), audioLevel);\n    }\n};\n\n/**\n * Fires TRACK_MUTE_CHANGED change conference event.\n * @param track the JitsiTrack object related to the event.\n */\nJitsiConference.prototype._fireMuteChangeEvent = function(track) {\n    // check if track was muted by focus and now is unmuted by user\n    if (this.isMutedByFocus && track.isAudioTrack() && !track.isMuted()) {\n        this.isMutedByFocus = false;\n\n        // unmute local user on server\n        this.room.muteParticipant(this.room.myroomjid, false);\n    }\n    this.eventEmitter.emit(JitsiConferenceEvents.TRACK_MUTE_CHANGED, track);\n};\n\n/**\n * Clear JitsiLocalTrack properties and listeners.\n * @param track the JitsiLocalTrack object.\n */\nJitsiConference.prototype.onLocalTrackRemoved = function(track) {\n    track._setConference(null);\n    this.rtc.removeLocalTrack(track);\n    track.removeEventListener(JitsiTrackEvents.TRACK_MUTE_CHANGED,\n        track.muteHandler);\n    track.removeEventListener(JitsiTrackEvents.TRACK_AUDIO_LEVEL_CHANGED,\n        track.audioLevelHandler);\n\n    // send event for stopping screen sharing\n    // FIXME: we assume we have only one screen sharing track\n    // if we change this we need to fix this check\n    if (track.isVideoTrack() && track.videoType === VideoType.DESKTOP) {\n        this.statistics.sendScreenSharingEvent(false);\n    }\n\n    this.eventEmitter.emit(JitsiConferenceEvents.TRACK_REMOVED, track);\n};\n\n/**\n * Removes JitsiLocalTrack from the conference and performs\n * a new offer/answer cycle.\n * @param {JitsiLocalTrack} track\n * @returns {Promise}\n */\nJitsiConference.prototype.removeTrack = function(track) {\n    return this.replaceTrack(track, null);\n};\n\n/**\n * Replaces oldTrack with newTrack and performs a single offer/answer\n *  cycle after both operations are done.  Either oldTrack or newTrack\n *  can be null; replacing a valid 'oldTrack' with a null 'newTrack'\n *  effectively just removes 'oldTrack'\n * @param {JitsiLocalTrack} oldTrack the current stream in use to be replaced\n * @param {JitsiLocalTrack} newTrack the new stream to use\n * @returns {Promise} resolves when the replacement is finished\n */\nJitsiConference.prototype.replaceTrack = function(oldTrack, newTrack) {\n    // First do the removal of the oldTrack at the JitsiConference level\n    if (oldTrack) {\n        if (oldTrack.disposed) {\n            return Promise.reject(\n                new JitsiTrackError(JitsiTrackErrors.TRACK_IS_DISPOSED));\n        }\n    }\n    if (newTrack) {\n        if (newTrack.disposed) {\n            return Promise.reject(\n                new JitsiTrackError(JitsiTrackErrors.TRACK_IS_DISPOSED));\n        }\n    }\n\n    // Now replace the stream at the lower levels\n    return this._doReplaceTrack(oldTrack, newTrack)\n        .then(() => {\n            if (oldTrack) {\n                this.onLocalTrackRemoved(oldTrack);\n            }\n            if (newTrack) {\n                // Now handle the addition of the newTrack at the\n                // JitsiConference level\n                this._setupNewTrack(newTrack);\n            }\n\n            return Promise.resolve();\n        }, error => Promise.reject(new Error(error)));\n};\n\n/**\n * Replaces the tracks at the lower level by going through the Jingle session\n * and WebRTC peer connection. The method will resolve immediately if there is\n * currently no JingleSession started.\n * @param {JitsiLocalTrack|null} oldTrack the track to be removed during\n * the process or <tt>null</t> if the method should act as \"add track\"\n * @param {JitsiLocalTrack|null} newTrack the new track to be added or\n * <tt>null</tt> if the method should act as \"remove track\"\n * @return {Promise} resolved when the process is done or rejected with a string\n * which describes the error.\n * @private\n */\nJitsiConference.prototype._doReplaceTrack = function(oldTrack, newTrack) {\n    const replaceTrackPromises = [];\n\n    if (this.jvbJingleSession) {\n        replaceTrackPromises.push(\n            this.jvbJingleSession.replaceTrack(oldTrack, newTrack));\n    } else {\n        logger.info('_doReplaceTrack - no JVB JingleSession');\n    }\n\n    if (this.p2pJingleSession) {\n        replaceTrackPromises.push(\n            this.p2pJingleSession.replaceTrack(oldTrack, newTrack));\n    } else {\n        logger.info('_doReplaceTrack - no P2P JingleSession');\n    }\n\n    return Promise.all(replaceTrackPromises);\n};\n\n/**\n * Operations related to creating a new track\n * @param {JitsiLocalTrack} newTrack the new track being created\n */\nJitsiConference.prototype._setupNewTrack = function(newTrack) {\n    if (newTrack.isAudioTrack() || (newTrack.isVideoTrack()\n            && newTrack.videoType !== VideoType.DESKTOP)) {\n        // Report active device to statistics\n        const devices = RTC.getCurrentlyAvailableMediaDevices();\n        const device\n            = devices.find(\n                d =>\n                    d.kind === `${newTrack.getTrack().kind}input`\n                        && d.label === newTrack.getTrack().label);\n\n        if (device) {\n            Statistics.sendActiveDeviceListEvent(\n                RTC.getEventDataForActiveDevice(device));\n        }\n    }\n    if (newTrack.isVideoTrack()) {\n        this.removeCommand('videoType');\n        this.sendCommand('videoType', {\n            value: newTrack.videoType,\n            attributes: {\n                xmlns: 'http://jitsi.org/jitmeet/video'\n            }\n        });\n    }\n    this.rtc.addLocalTrack(newTrack);\n\n    // ensure that we're sharing proper \"is muted\" state\n    if (newTrack.isAudioTrack()) {\n        this.room.setAudioMute(newTrack.isMuted());\n    } else {\n        this.room.setVideoMute(newTrack.isMuted());\n    }\n\n    newTrack.muteHandler = this._fireMuteChangeEvent.bind(this, newTrack);\n    newTrack.audioLevelHandler = this._fireAudioLevelChangeEvent.bind(this);\n    newTrack.addEventListener(\n        JitsiTrackEvents.TRACK_MUTE_CHANGED,\n        newTrack.muteHandler);\n    newTrack.addEventListener(\n        JitsiTrackEvents.TRACK_AUDIO_LEVEL_CHANGED,\n        newTrack.audioLevelHandler);\n\n    newTrack._setConference(this);\n\n    this.eventEmitter.emit(JitsiConferenceEvents.TRACK_ADDED, newTrack);\n};\n\n/**\n * Method called by the {@link JitsiLocalTrack} (a video one) in order to add\n * back the underlying WebRTC MediaStream to the PeerConnection (which has\n * removed on video mute).\n * @param {JitsiLocalTrack} track the local track that will be added as part of\n * the unmute operation.\n * @return {Promise} resolved when the process is done or rejected with a string\n * which describes the error.\n */\nJitsiConference.prototype._addLocalTrackAsUnmute = function(track) {\n    const addAsUnmutePromises = [];\n\n    if (this.jvbJingleSession) {\n        addAsUnmutePromises.push(this.jvbJingleSession.addTrackAsUnmute(track));\n    } else {\n        logger.info(\n            'Add local MediaStream as unmute -'\n                + ' no JVB Jingle session started yet');\n    }\n\n    if (this.p2pJingleSession) {\n        addAsUnmutePromises.push(this.p2pJingleSession.addTrackAsUnmute(track));\n    } else {\n        logger.info(\n            'Add local MediaStream as unmute -'\n                + ' no P2P Jingle session started yet');\n    }\n\n    return Promise.all(addAsUnmutePromises);\n};\n\n/**\n * Method called by the {@link JitsiLocalTrack} (a video one) in order to remove\n * the underlying WebRTC MediaStream from the PeerConnection. The purpose of\n * that is to stop sending any data and turn off the HW camera device.\n * @param {JitsiLocalTrack} track the local track that will be removed.\n * @return {Promise}\n */\nJitsiConference.prototype._removeLocalTrackAsMute = function(track) {\n    const removeAsMutePromises = [];\n\n    if (this.jvbJingleSession) {\n        removeAsMutePromises.push(\n            this.jvbJingleSession.removeTrackAsMute(track));\n    } else {\n        logger.info(\n            'Remove local MediaStream - no JVB JingleSession started yet');\n    }\n    if (this.p2pJingleSession) {\n        removeAsMutePromises.push(\n            this.p2pJingleSession.removeTrackAsMute(track));\n    } else {\n        logger.info(\n            'Remove local MediaStream - no P2P JingleSession started yet');\n    }\n\n    return Promise.all(removeAsMutePromises);\n};\n\n/**\n * Get role of the local user.\n * @returns {string} user role: 'moderator' or 'none'\n */\nJitsiConference.prototype.getRole = function() {\n    return this.room.role;\n};\n\n/**\n * Check if local user is moderator.\n * @returns {boolean|null} true if local user is moderator, false otherwise. If\n * we're no longer in the conference room then <tt>null</tt> is returned.\n */\nJitsiConference.prototype.isModerator = function() {\n    return this.room ? this.room.isModerator() : null;\n};\n\n/**\n * Set password for the room.\n * @param {string} password new password for the room.\n * @returns {Promise}\n */\nJitsiConference.prototype.lock = function(password) {\n    if (!this.isModerator()) {\n        return Promise.reject();\n    }\n\n    return new Promise((resolve, reject) => {\n        this.room.lockRoom(\n            password || '',\n            () => resolve(),\n            err => reject(err),\n            () => reject(JitsiConferenceErrors.PASSWORD_NOT_SUPPORTED));\n    });\n};\n\n/**\n * Remove password from the room.\n * @returns {Promise}\n */\nJitsiConference.prototype.unlock = function() {\n    return this.lock();\n};\n\n/**\n * Elects the participant with the given id to be the selected participant in\n * order to receive higher video quality (if simulcast is enabled).\n * Or cache it if channel is not created and send it once channel is available.\n * @param participantId the identifier of the participant\n * @throws NetworkError or InvalidStateError or Error if the operation fails.\n * @returns {void}\n */\nJitsiConference.prototype.selectParticipant = function(participantId) {\n    this.selectParticipants([ participantId ]);\n};\n\n/*\n * Elects participants with given ids to be the selected participants in order\n * to receive higher video quality (if simulcast is enabled). The argument\n * should be an array of participant id strings or an empty array; an error will\n * be thrown if a non-array is passed in. The error is thrown as a layer of\n * protection against passing an invalid argument, as the error will happen in\n * the bridge and may not be visible in the client.\n *\n * @param {Array<strings>} participantIds - An array of identifiers for\n * participants.\n * @returns {void}\n */\nJitsiConference.prototype.selectParticipants = function(participantIds) {\n    if (!Array.isArray(participantIds)) {\n        throw new Error('Invalid argument; participantIds must be an array.');\n    }\n\n    this.rtc.selectEndpoints(participantIds);\n};\n\n/**\n * Elects the participant with the given id to be the pinned participant in\n * order to always receive video for this participant (even when last n is\n * enabled).\n * @param participantId the identifier of the participant\n * @throws NetworkError or InvalidStateError or Error if the operation fails.\n */\nJitsiConference.prototype.pinParticipant = function(participantId) {\n    this.rtc.pinEndpoint(participantId);\n};\n\n/**\n * Obtains the current value for \"lastN\". See {@link setLastN} for more info.\n * @returns {number}\n */\nJitsiConference.prototype.getLastN = function() {\n    return this.rtc.getLastN();\n};\n\n/**\n * Selects a new value for \"lastN\". The requested amount of videos are going\n * to be delivered after the value is in effect. Set to -1 for unlimited or\n * all available videos.\n * @param lastN the new number of videos the user would like to receive.\n * @throws Error or RangeError if the given value is not a number or is smaller\n * than -1.\n */\nJitsiConference.prototype.setLastN = function(lastN) {\n    if (!Number.isInteger(lastN) && !Number.parseInt(lastN, 10)) {\n        throw new Error(`Invalid value for lastN: ${lastN}`);\n    }\n    const n = Number(lastN);\n\n    if (n < -1) {\n        throw new RangeError('lastN cannot be smaller than -1');\n    }\n    this.rtc.setLastN(n);\n\n    // If the P2P session is not fully established yet, we wait until it gets\n    // established.\n    if (this.p2pJingleSession) {\n        const isVideoActive = n !== 0;\n\n        this.p2pJingleSession\n            .setMediaTransferActive(true, isVideoActive)\n            .catch(error => {\n                logger.error(\n                    `Failed to adjust video transfer status (${isVideoActive})`,\n                    error);\n            });\n    }\n};\n\n/**\n * Checks if the participant given by participantId is currently included in\n * the last N.\n * @param {string} participantId the identifier of the participant we would\n * like to check.\n * @return {boolean} true if the participant with id is in the last N set or\n * if there's no last N set, false otherwise.\n * @deprecated this method should never be used to figure out the UI, but\n * {@link ParticipantConnectionStatus} should be used instead.\n */\nJitsiConference.prototype.isInLastN = function(participantId) {\n    return this.rtc.isInLastN(participantId);\n};\n\n/**\n * @return Array<JitsiParticipant> an array of all participants in this\n * conference.\n */\nJitsiConference.prototype.getParticipants = function() {\n    return Object.keys(this.participants).map(function(key) {\n        return this.participants[key];\n    }, this);\n};\n\n/**\n * Returns the number of participants in the conference, including the local\n * participant.\n * @param countHidden {boolean} Whether or not to include hidden participants\n * in the count. Default: false.\n **/\nJitsiConference.prototype.getParticipantCount\n    = function(countHidden = false) {\n\n        let participants = this.getParticipants();\n\n        if (!countHidden) {\n            participants = participants.filter(p => !p.isHidden());\n        }\n\n        // Add one for the local participant.\n        return participants.length + 1;\n    };\n\n/**\n * @returns {JitsiParticipant} the participant in this conference with the\n * specified id (or undefined if there isn't one).\n * @param id the id of the participant.\n */\nJitsiConference.prototype.getParticipantById = function(id) {\n    return this.participants[id];\n};\n\n/**\n * Kick participant from this conference.\n * @param {string} id id of the participant to kick\n */\nJitsiConference.prototype.kickParticipant = function(id) {\n    const participant = this.getParticipantById(id);\n\n    if (!participant) {\n        return;\n    }\n    this.room.kick(participant.getJid());\n};\n\n/**\n * Maybe clears the timeout which emits {@link ACTION_JINGLE_SI_TIMEOUT}\n * analytics event.\n * @private\n */\nJitsiConference.prototype._maybeClearSITimeout = function() {\n    if (this._sessionInitiateTimeout\n            && (this.jvbJingleSession || this.getParticipantCount() < 2)) {\n        window.clearTimeout(this._sessionInitiateTimeout);\n        this._sessionInitiateTimeout = null;\n    }\n};\n\n/**\n * Sets a timeout which will emit {@link ACTION_JINGLE_SI_TIMEOUT} analytics\n * event.\n * @private\n */\nJitsiConference.prototype._maybeSetSITimeout = function() {\n    // Jicofo is supposed to invite if there are at least 2 participants\n    if (!this.jvbJingleSession\n            && this.getParticipantCount() >= 2\n            && !this._sessionInitiateTimeout) {\n        this._sessionInitiateTimeout = window.setTimeout(() => {\n            this._sessionInitiateTimeout = null;\n            Statistics.sendAnalytics(createJingleEvent(\n                ACTION_JINGLE_SI_TIMEOUT,\n                {\n                    p2p: false,\n                    value: JINGLE_SI_TIMEOUT\n                }));\n        }, JINGLE_SI_TIMEOUT);\n    }\n};\n\n/**\n * Mutes a participant.\n * @param {string} id The id of the participant to mute.\n */\nJitsiConference.prototype.muteParticipant = function(id) {\n    const participant = this.getParticipantById(id);\n\n    if (!participant) {\n        return;\n    }\n    this.room.muteParticipant(participant.getJid(), true);\n};\n\n/* eslint-disable max-params */\n\n/**\n * Notifies this JitsiConference that a new member has joined its chat room.\n *\n * FIXME This should NOT be exposed!\n *\n * @param jid the jid of the participant in the MUC\n * @param nick the display name of the participant\n * @param role the role of the participant in the MUC\n * @param isHidden indicates if this is a hidden participant (system\n * participant for example a recorder).\n * @param statsID the participant statsID (optional)\n * @param status the initial status if any\n * @param identity the member identity, if any\n * @param botType the member botType, if any\n */\nJitsiConference.prototype.onMemberJoined = function(\n        jid, nick, role, isHidden, statsID, status, identity, botType) {\n    const id = Strophe.getResourceFromJid(jid);\n\n    if (id === 'focus' || this.myUserId() === id) {\n        return;\n    }\n    const participant\n        = new JitsiParticipant(jid, this, nick, isHidden, statsID, status);\n\n    participant._role = role;\n    participant._botType = botType;\n    this.participants[id] = participant;\n    this.eventEmitter.emit(\n        JitsiConferenceEvents.USER_JOINED,\n        id,\n        participant);\n    this.xmpp.caps.getFeatures(jid)\n        .then(features => {\n            participant._supportsDTMF = features.has('urn:xmpp:jingle:dtmf:0');\n            this.updateDTMFSupport();\n        },\n        error => logger.warn(`Failed to discover features of ${jid}`, error));\n\n    this._maybeStartOrStopP2P();\n    this._maybeSetSITimeout();\n};\n\n/* eslint-enable max-params */\n\n/**\n * Get notified when member bot type had changed.\n * @param jid the member jid\n * @param botType the new botType value\n * @private\n */\nJitsiConference.prototype._onMemberBotTypeChanged = function(jid, botType) {\n\n    // find the participant and mark it as non bot, as the real one will join\n    // in a moment\n    const peers = this.getParticipants();\n    const botParticipant = peers.find(p => p.getJid() === jid);\n\n    if (botParticipant) {\n        botParticipant._botType = botType;\n        const id = Strophe.getResourceFromJid(jid);\n\n        this.eventEmitter.emit(\n            JitsiConferenceEvents.BOT_TYPE_CHANGED,\n            id,\n            botType);\n    }\n\n    // if botType changed to undefined, botType was removed, in case of\n    // poltergeist mode this is the moment when the poltergeist had exited and\n    // the real participant had already replaced it.\n    // In this case we can check and try p2p\n    if (!botParticipant._botType) {\n        this._maybeStartOrStopP2P();\n    }\n};\n\nJitsiConference.prototype.onMemberLeft = function(jid) {\n    const id = Strophe.getResourceFromJid(jid);\n\n    if (id === 'focus' || this.myUserId() === id) {\n        return;\n    }\n    const participant = this.participants[id];\n\n    delete this.participants[id];\n\n    const removedTracks = this.rtc.removeRemoteTracks(id);\n\n    removedTracks.forEach(\n        track =>\n            this.eventEmitter.emit(JitsiConferenceEvents.TRACK_REMOVED, track));\n\n    // there can be no participant in case the member that left is focus\n    if (participant) {\n        this.eventEmitter.emit(\n            JitsiConferenceEvents.USER_LEFT, id, participant);\n    }\n\n    this._maybeStartOrStopP2P(true /* triggered by user left event */);\n    this._maybeClearSITimeout();\n};\n\n/**\n * Method called on local MUC role change.\n * @param {string} role the name of new user's role as defined by XMPP MUC.\n */\nJitsiConference.prototype.onLocalRoleChanged = function(role) {\n    // Emit role changed for local  JID\n    this.eventEmitter.emit(\n        JitsiConferenceEvents.USER_ROLE_CHANGED, this.myUserId(), role);\n\n    // Maybe start P2P\n    this._maybeStartOrStopP2P();\n};\n\nJitsiConference.prototype.onUserRoleChanged = function(jid, role) {\n    const id = Strophe.getResourceFromJid(jid);\n    const participant = this.getParticipantById(id);\n\n    if (!participant) {\n        return;\n    }\n    participant._role = role;\n    this.eventEmitter.emit(JitsiConferenceEvents.USER_ROLE_CHANGED, id, role);\n};\n\nJitsiConference.prototype.onDisplayNameChanged = function(jid, displayName) {\n    const id = Strophe.getResourceFromJid(jid);\n    const participant = this.getParticipantById(id);\n\n    if (!participant) {\n        return;\n    }\n\n    if (participant._displayName === displayName) {\n        return;\n    }\n\n    participant._displayName = displayName;\n    this.eventEmitter.emit(\n        JitsiConferenceEvents.DISPLAY_NAME_CHANGED,\n        id,\n        displayName);\n};\n\n/**\n * Notifies this JitsiConference that a JitsiRemoteTrack was added into\n * the conference.\n *\n * @param {JitsiRemoteTrack} track the JitsiRemoteTrack which was added to this\n * JitsiConference\n */\nJitsiConference.prototype.onRemoteTrackAdded = function(track) {\n    if (track.isP2P && !this.isP2PActive()) {\n        logger.info(\n            'Trying to add remote P2P track, when not in P2P - IGNORED');\n\n        return;\n    } else if (!track.isP2P && this.isP2PActive()) {\n        logger.info(\n            'Trying to add remote JVB track, when in P2P - IGNORED');\n\n        return;\n    }\n\n    const id = track.getParticipantId();\n    const participant = this.getParticipantById(id);\n\n    if (!participant) {\n        logger.error(`No participant found for id: ${id}`);\n\n        return;\n    }\n\n    // Add track to JitsiParticipant.\n    participant._tracks.push(track);\n\n    if (this.transcriber) {\n        this.transcriber.addTrack(track);\n    }\n\n    const emitter = this.eventEmitter;\n\n    track.addEventListener(\n        JitsiTrackEvents.TRACK_MUTE_CHANGED,\n        () => emitter.emit(JitsiConferenceEvents.TRACK_MUTE_CHANGED, track));\n    track.addEventListener(\n        JitsiTrackEvents.TRACK_AUDIO_LEVEL_CHANGED,\n        (audioLevel, tpc) => {\n            const activeTPC = this.getActivePeerConnection();\n\n            if (activeTPC === tpc) {\n                emitter.emit(\n                    JitsiConferenceEvents.TRACK_AUDIO_LEVEL_CHANGED,\n                    id,\n                    audioLevel);\n            }\n        }\n    );\n\n    emitter.emit(JitsiConferenceEvents.TRACK_ADDED, track);\n};\n\n/**\n * Callback called by the Jingle plugin when 'session-answer' is received.\n * @param {JingleSessionPC} session the Jingle session for which an answer was\n * received.\n * @param {jQuery} answer a jQuery selector pointing to 'jingle' IQ element\n */\n// eslint-disable-next-line no-unused-vars\nJitsiConference.prototype.onCallAccepted = function(session, answer) {\n    if (this.p2pJingleSession === session) {\n        logger.info('P2P setAnswer');\n        this.p2pJingleSession.setAnswer(answer);\n    }\n};\n\n/**\n * Callback called by the Jingle plugin when 'transport-info' is received.\n * @param {JingleSessionPC} session the Jingle session for which the IQ was\n * received\n * @param {jQuery} transportInfo a jQuery selector pointing to 'jingle' IQ\n * element\n */\n// eslint-disable-next-line no-unused-vars\nJitsiConference.prototype.onTransportInfo = function(session, transportInfo) {\n    if (this.p2pJingleSession === session) {\n        logger.info('P2P addIceCandidates');\n        this.p2pJingleSession.addIceCandidates(transportInfo);\n    }\n};\n\n/**\n * Notifies this JitsiConference that a JitsiRemoteTrack was removed from\n * the conference.\n *\n * @param {JitsiRemoteTrack} removedTrack\n */\nJitsiConference.prototype.onRemoteTrackRemoved = function(removedTrack) {\n    this.getParticipants().forEach(participant => {\n        const tracks = participant.getTracks();\n\n        for (let i = 0; i < tracks.length; i++) {\n            if (tracks[i] === removedTrack) {\n                // Since the tracks have been compared and are\n                // considered equal the result of splice can be ignored.\n                participant._tracks.splice(i, 1);\n\n                this.eventEmitter.emit(\n                    JitsiConferenceEvents.TRACK_REMOVED, removedTrack);\n\n                if (this.transcriber) {\n                    this.transcriber.removeTrack(removedTrack);\n                }\n\n                break;\n            }\n        }\n    }, this);\n};\n\n/**\n * Handles an incoming call event for the P2P jingle session.\n */\nJitsiConference.prototype._onIncomingCallP2P = function(\n        jingleSession,\n        jingleOffer) {\n\n    let rejectReason;\n    const role = this.room.getMemberRole(jingleSession.remoteJid);\n\n    if (role !== 'moderator') {\n        rejectReason = {\n            reason: 'security-error',\n            reasonDescription: 'Only focus can start new sessions',\n            errorMsg: 'Rejecting session-initiate from non-focus and'\n                        + `non-moderator user: ${jingleSession.remoteJid}`\n        };\n    } else if (!browser.supportsP2P()) {\n        rejectReason = {\n            reason: 'unsupported-applications',\n            reasonDescription: 'P2P not supported',\n            errorMsg: 'This client does not support P2P connections'\n        };\n    } else if (!this.isP2PEnabled() && !this.isP2PTestModeEnabled()) {\n        rejectReason = {\n            reason: 'decline',\n            reasonDescription: 'P2P disabled',\n            errorMsg: 'P2P mode disabled in the configuration'\n        };\n    } else if (this.p2pJingleSession) {\n        // Reject incoming P2P call (already in progress)\n        rejectReason = {\n            reason: 'busy',\n            reasonDescription: 'P2P already in progress',\n            errorMsg: 'Duplicated P2P \"session-initiate\"'\n        };\n    }\n\n    if (rejectReason) {\n        this._rejectIncomingCall(jingleSession, rejectReason);\n    } else {\n        this._acceptP2PIncomingCall(jingleSession, jingleOffer);\n    }\n};\n\n/**\n * Handles an incoming call event.\n */\nJitsiConference.prototype.onIncomingCall = function(\n        jingleSession,\n        jingleOffer,\n        now) {\n    // Handle incoming P2P call\n    if (jingleSession.isP2P) {\n        this._onIncomingCallP2P(jingleSession, jingleOffer);\n    } else {\n        if (!this.room.isFocus(jingleSession.remoteJid)) {\n            const description = 'Rejecting session-initiate from non-focus.';\n\n            this._rejectIncomingCall(\n                jingleSession, {\n                    reason: 'security-error',\n                    reasonDescription: description,\n                    errorMsg: description\n                });\n\n            return;\n        }\n        this._acceptJvbIncomingCall(jingleSession, jingleOffer, now);\n    }\n};\n\n/**\n * Accepts an incoming call event for the JVB jingle session.\n */\nJitsiConference.prototype._acceptJvbIncomingCall = function(\n        jingleSession,\n        jingleOffer,\n        now) {\n\n    // Accept incoming call\n    this.jvbJingleSession = jingleSession;\n    this.room.connectionTimes['session.initiate'] = now;\n\n    if (this.wasStopped) {\n        Statistics.sendAnalyticsAndLog(\n            createJingleEvent(ACTION_JINGLE_RESTART, { p2p: false }));\n    }\n\n    this._maybeClearSITimeout();\n    Statistics.sendAnalytics(createJingleEvent(\n        ACTION_JINGLE_SI_RECEIVED,\n        {\n            p2p: false,\n            value: now\n        }));\n    try {\n        jingleSession.initialize(this.room, this.rtc, this.options.config);\n    } catch (error) {\n        GlobalOnErrorHandler.callErrorHandler(error);\n    }\n\n    // Open a channel with the videobridge.\n    this._setBridgeChannel(jingleOffer, jingleSession.peerconnection);\n\n    // Add local tracks to the session\n    try {\n        jingleSession.acceptOffer(\n            jingleOffer,\n            () => {\n                // If for any reason invite for the JVB session arrived after\n                // the P2P has been established already the media transfer needs\n                // to be turned off here.\n                if (this.isP2PActive() && this.jvbJingleSession) {\n                    this._suspendMediaTransferForJvbConnection();\n                }\n            },\n            error => {\n                GlobalOnErrorHandler.callErrorHandler(error);\n                logger.error(\n                    'Failed to accept incoming Jingle session', error);\n            },\n            this.getLocalTracks()\n        );\n\n        // Start callstats as soon as peerconnection is initialized,\n        // do not wait for XMPPEvents.PEERCONNECTION_READY, as it may never\n        // happen in case if user doesn't have or denied permission to\n        // both camera and microphone.\n        logger.info('Starting CallStats for JVB connection...');\n        this.statistics.startCallStats(\n            this.jvbJingleSession.peerconnection,\n            'jitsi' /* Remote user ID for JVB is 'jitsi' */);\n        this.statistics.startRemoteStats(this.jvbJingleSession.peerconnection);\n    } catch (e) {\n        GlobalOnErrorHandler.callErrorHandler(e);\n        logger.error(e);\n    }\n};\n\n/**\n * Sets the BridgeChannel.\n *\n * @param {jQuery} offerIq a jQuery selector pointing to the jingle element of\n * the offer IQ which may carry the WebSocket URL for the 'websocket'\n * BridgeChannel mode.\n * @param {TraceablePeerConnection} pc the peer connection which will be used\n * to listen for new WebRTC Data Channels (in the 'datachannel' mode).\n */\nJitsiConference.prototype._setBridgeChannel = function(offerIq, pc) {\n    let wsUrl = null;\n    const webSocket\n        = $(offerIq)\n            .find('>content>transport>web-socket')\n            .first();\n\n    if (webSocket.length === 1) {\n        wsUrl = webSocket[0].getAttribute('url');\n    }\n\n    let bridgeChannelType;\n\n    switch (this.options.config.openBridgeChannel) {\n    case 'datachannel':\n    case true:\n    case undefined:\n        bridgeChannelType = 'datachannel';\n        break;\n    case 'websocket':\n        bridgeChannelType = 'websocket';\n        break;\n    }\n\n    if (bridgeChannelType === 'datachannel'\n        && !browser.supportsDataChannels()) {\n        bridgeChannelType = 'websocket';\n    }\n\n    if (bridgeChannelType === 'datachannel') {\n        this.rtc.initializeBridgeChannel(pc, null);\n    } else if (bridgeChannelType === 'websocket' && wsUrl) {\n        this.rtc.initializeBridgeChannel(null, wsUrl);\n    }\n};\n\n/**\n * Rejects incoming Jingle call.\n * @param {JingleSessionPC} jingleSession the session instance to be rejected.\n * @param {object} [options]\n * @param {string} options.reason the name of the reason element as defined\n * by Jingle\n * @param {string} options.reasonDescription the reason description which will\n * be included in Jingle 'session-terminate' message.\n * @param {string} options.errorMsg an error message to be logged on global\n * error handler\n * @private\n */\nJitsiConference.prototype._rejectIncomingCall = function(\n        jingleSession,\n        options) {\n    if (options && options.errorMsg) {\n        GlobalOnErrorHandler.callErrorHandler(new Error(options.errorMsg));\n    }\n\n    // Terminate the jingle session with a reason\n    jingleSession.terminate(\n        null /* success callback => we don't care */,\n        error => {\n            logger.warn(\n                'An error occurred while trying to terminate'\n                    + ' invalid Jingle session', error);\n        }, {\n            reason: options && options.reason,\n            reasonDescription: options && options.reasonDescription,\n            sendSessionTerminate: true\n        });\n};\n\n/**\n * Handles the call ended event.\n * XXX is this due to the remote side terminating the Jingle session?\n *\n * @param {JingleSessionPC} jingleSession the jingle session which has been\n * terminated.\n * @param {String} reasonCondition the Jingle reason condition.\n * @param {String|null} reasonText human readable reason text which may provide\n * more details about why the call has been terminated.\n */\nJitsiConference.prototype.onCallEnded = function(\n        jingleSession,\n        reasonCondition,\n        reasonText) {\n    logger.info(\n        `Call ended: ${reasonCondition} - ${reasonText} P2P ?${\n            jingleSession.isP2P}`);\n    if (jingleSession === this.jvbJingleSession) {\n        this.wasStopped = true;\n\n        Statistics.sendAnalytics(\n            createJingleEvent(ACTION_JINGLE_TERMINATE, { p2p: false }));\n\n        // Stop the stats\n        if (this.statistics) {\n            this.statistics.stopRemoteStats(\n                this.jvbJingleSession.peerconnection);\n            logger.info('Stopping JVB CallStats');\n            this.statistics.stopCallStats(\n                this.jvbJingleSession.peerconnection);\n        }\n\n        // Current JVB JingleSession is no longer valid, so set it to null\n        this.jvbJingleSession = null;\n\n        // Let the RTC service do any cleanups\n        this.rtc.onCallEnded();\n    } else if (jingleSession === this.p2pJingleSession) {\n        // It's the responder who decides to enforce JVB mode, so that both\n        // initiator and responder are aware if it was intentional.\n        if (reasonCondition === 'decline' && reasonText === 'force JVB121') {\n            logger.info('In forced JVB 121 mode...');\n            Statistics.analytics.addPermanentProperties({ forceJvb121: true });\n        } else if (reasonCondition === 'connectivity-error'\n            && reasonText === 'ICE FAILED') {\n            // It can happen that the other peer detects ICE failed and\n            // terminates the session, before we get the event on our side.\n            // But we are able to parse the reason and mark it here.\n            Statistics.analytics.addPermanentProperties({ p2pFailed: true });\n        }\n        this._stopP2PSession();\n    } else {\n        logger.error(\n            'Received onCallEnded for invalid session',\n            jingleSession.sid,\n            jingleSession.remoteJid,\n            reasonCondition,\n            reasonText);\n    }\n};\n\n/**\n * Handles the suspend detected event. Leaves the room and fires suspended.\n * @param {JingleSessionPC} jingleSession\n */\nJitsiConference.prototype.onSuspendDetected = function(jingleSession) {\n    if (!jingleSession.isP2P) {\n        this.leave();\n        this.eventEmitter.emit(JitsiConferenceEvents.SUSPEND_DETECTED);\n    }\n};\n\nJitsiConference.prototype.updateDTMFSupport = function() {\n    let somebodySupportsDTMF = false;\n    const participants = this.getParticipants();\n\n    // check if at least 1 participant supports DTMF\n    for (let i = 0; i < participants.length; i += 1) {\n        if (participants[i].supportsDTMF()) {\n            somebodySupportsDTMF = true;\n            break;\n        }\n    }\n    if (somebodySupportsDTMF !== this.somebodySupportsDTMF) {\n        this.somebodySupportsDTMF = somebodySupportsDTMF;\n        this.eventEmitter.emit(\n            JitsiConferenceEvents.DTMF_SUPPORT_CHANGED,\n            somebodySupportsDTMF);\n    }\n};\n\n/**\n * Allows to check if there is at least one user in the conference\n * that supports DTMF.\n * @returns {boolean} true if somebody supports DTMF, false otherwise\n */\nJitsiConference.prototype.isDTMFSupported = function() {\n    return this.somebodySupportsDTMF;\n};\n\n/**\n * Returns the local user's ID\n * @return {string} local user's ID\n */\nJitsiConference.prototype.myUserId = function() {\n    return (\n        this.room && this.room.myroomjid\n            ? Strophe.getResourceFromJid(this.room.myroomjid)\n            : null);\n};\n\nJitsiConference.prototype.sendTones = function(tones, duration, pause) {\n    if (!this.dtmfManager) {\n        const peerConnection = this.getActivePeerConnection();\n\n        if (!peerConnection) {\n            logger.warn('cannot sendTones: no peer connection');\n\n            return;\n        }\n\n        const localAudio = this.getLocalAudioTrack();\n\n        if (!localAudio) {\n            logger.warn('cannot sendTones: no local audio stream');\n\n            return;\n        }\n        this.dtmfManager = new JitsiDTMFManager(localAudio, peerConnection);\n    }\n\n    this.dtmfManager.sendTones(tones, duration, pause);\n};\n\n/**\n * Starts recording the current conference.\n *\n * @param {Object} options - Configuration for the recording. See\n * {@link Chatroom#startRecording} for more info.\n * @returns {Promise} See {@link Chatroom#startRecording} for more info.\n */\nJitsiConference.prototype.startRecording = function(options) {\n    if (this.room) {\n        return this.recordingManager.startRecording(options);\n    }\n\n    return Promise.reject(new Error('The conference is not created yet!'));\n};\n\n/**\n * Stop a recording session.\n *\n * @param {string} sessionID - The ID of the recording session that\n * should be stopped.\n * @returns {Promise} See {@link Chatroom#stopRecording} for more info.\n */\nJitsiConference.prototype.stopRecording = function(sessionID) {\n    if (this.room) {\n        return this.recordingManager.stopRecording(sessionID);\n    }\n\n    return Promise.reject(new Error('The conference is not created yet!'));\n};\n\n/**\n * Returns true if the SIP calls are supported and false otherwise\n */\nJitsiConference.prototype.isSIPCallingSupported = function() {\n    if (this.room) {\n        return this.room.isSIPCallingSupported();\n    }\n\n    return false;\n};\n\n/**\n * Dials a number.\n * @param number the number\n */\nJitsiConference.prototype.dial = function(number) {\n    if (this.room) {\n        return this.room.dial(number);\n    }\n\n    return new Promise((resolve, reject) => {\n        reject(new Error('The conference is not created yet!'));\n    });\n};\n\n/**\n * Hangup an existing call\n */\nJitsiConference.prototype.hangup = function() {\n    if (this.room) {\n        return this.room.hangup();\n    }\n\n    return new Promise((resolve, reject) => {\n        reject(new Error('The conference is not created yet!'));\n    });\n};\n\n/**\n * Starts the transcription service.\n */\nJitsiConference.prototype.startTranscriber = function() {\n    return this.dial('jitsi_meet_transcribe');\n};\n\n\n/**\n * Stops the transcription service.\n */\nJitsiConference.prototype.stopTranscriber = JitsiConference.prototype.hangup;\n\n/**\n * Returns the phone number for joining the conference.\n */\nJitsiConference.prototype.getPhoneNumber = function() {\n    if (this.room) {\n        return this.room.getPhoneNumber();\n    }\n\n    return null;\n};\n\n/**\n * Returns the pin for joining the conference with phone.\n */\nJitsiConference.prototype.getPhonePin = function() {\n    if (this.room) {\n        return this.room.getPhonePin();\n    }\n\n    return null;\n};\n\n/**\n * Will return P2P or JVB <tt>TraceablePeerConnection</tt> depending on\n * which connection is currently active.\n *\n * @return {TraceablePeerConnection|null} null if there isn't any active\n * <tt>TraceablePeerConnection</tt> currently available.\n * @public (FIXME how to make package local ?)\n */\nJitsiConference.prototype.getActivePeerConnection = function() {\n    if (this.isP2PActive()) {\n        return this.p2pJingleSession.peerconnection;\n    }\n\n    return this.jvbJingleSession ? this.jvbJingleSession.peerconnection : null;\n};\n\n/**\n * Returns the connection state for the current room. Its ice connection state\n * for its session.\n * NOTE that \"completed\" ICE state which can appear on the P2P connection will\n * be converted to \"connected\".\n * @return {string|null} ICE state name or <tt>null</tt> if there is no active\n * peer connection at this time.\n */\nJitsiConference.prototype.getConnectionState = function() {\n    const peerConnection = this.getActivePeerConnection();\n\n    return peerConnection ? peerConnection.getConnectionState() : null;\n};\n\n/**\n * Make all new participants mute their audio/video on join.\n * @param policy {Object} object with 2 boolean properties for video and audio:\n * @param {boolean} audio if audio should be muted.\n * @param {boolean} video if video should be muted.\n */\nJitsiConference.prototype.setStartMutedPolicy = function(policy) {\n    if (!this.isModerator()) {\n        return;\n    }\n    this.startMutedPolicy = policy;\n    this.room.removeFromPresence('startmuted');\n    this.room.addToPresence('startmuted', {\n        attributes: {\n            audio: policy.audio,\n            video: policy.video,\n            xmlns: 'http://jitsi.org/jitmeet/start-muted'\n        }\n    });\n    this.room.sendPresence();\n};\n\n/**\n * Returns current start muted policy\n * @returns {Object} with 2 properties - audio and video.\n */\nJitsiConference.prototype.getStartMutedPolicy = function() {\n    return this.startMutedPolicy;\n};\n\n/**\n * Check if audio is muted on join.\n */\nJitsiConference.prototype.isStartAudioMuted = function() {\n    return this.startAudioMuted;\n};\n\n/**\n * Check if video is muted on join.\n */\nJitsiConference.prototype.isStartVideoMuted = function() {\n    return this.startVideoMuted;\n};\n\n/**\n * Get object with internal logs.\n */\nJitsiConference.prototype.getLogs = function() {\n    const data = this.xmpp.getJingleLog();\n\n    const metadata = {};\n\n    metadata.time = new Date();\n    metadata.url = window.location.href;\n    metadata.ua = navigator.userAgent;\n\n    const log = this.xmpp.getXmppLog();\n\n    if (log) {\n        metadata.xmpp = log;\n    }\n\n    data.metadata = metadata;\n\n    return data;\n};\n\n/**\n * Returns measured connectionTimes.\n */\nJitsiConference.prototype.getConnectionTimes = function() {\n    return this.room.connectionTimes;\n};\n\n/**\n * Sets a property for the local participant.\n */\nJitsiConference.prototype.setLocalParticipantProperty = function(name, value) {\n    this.sendCommand(`jitsi_participant_${name}`, { value });\n};\n\n/**\n *  Removes a property for the local participant and sends the updated presence.\n */\nJitsiConference.prototype.removeLocalParticipantProperty = function(name) {\n    this.removeCommand(`jitsi_participant_${name}`);\n    this.room.sendPresence();\n};\n\n/**\n * Gets a local participant property.\n *\n * @return value of the local participant property if the tagName exists in the\n * list of properties, otherwise returns undefined.\n */\nJitsiConference.prototype.getLocalParticipantProperty = function(name) {\n    const property = this.room.presMap.nodes.find(prop =>\n        prop.tagName === `jitsi_participant_${name}`\n    );\n\n    return property ? property.value : undefined;\n};\n\n/**\n * Sends the given feedback through CallStats if enabled.\n *\n * @param overallFeedback an integer between 1 and 5 indicating the\n * user feedback\n * @param detailedFeedback detailed feedback from the user. Not yet used\n */\nJitsiConference.prototype.sendFeedback = function(\n        overallFeedback,\n        detailedFeedback) {\n    this.statistics.sendFeedback(overallFeedback, detailedFeedback);\n};\n\n/**\n * Returns true if the callstats integration is enabled, otherwise returns\n * false.\n *\n * @returns true if the callstats integration is enabled, otherwise returns\n * false.\n */\nJitsiConference.prototype.isCallstatsEnabled = function() {\n    return this.statistics.isCallstatsEnabled();\n};\n\n\n/**\n * Handles track attached to container (Calls associateStreamWithVideoTag method\n * from statistics module)\n * @param {JitsiLocalTrack|JitsiRemoteTrack} track the track\n * @param container the container\n */\nJitsiConference.prototype._onTrackAttach = function(track, container) {\n    const isLocal = track.isLocal();\n    let ssrc = null;\n    const isP2P = track.isP2P;\n    const remoteUserId = isP2P ? track.getParticipantId() : 'jitsi';\n    const peerConnection\n        = isP2P\n            ? this.p2pJingleSession && this.p2pJingleSession.peerconnection\n            : this.jvbJingleSession && this.jvbJingleSession.peerconnection;\n\n    if (isLocal) {\n        // Local tracks have SSRC stored on per peer connection basis\n        if (peerConnection) {\n            ssrc = peerConnection.getLocalSSRC(track);\n        }\n    } else {\n        ssrc = track.getSSRC();\n    }\n    if (!container.id || !ssrc || !peerConnection) {\n        return;\n    }\n\n    this.statistics.associateStreamWithVideoTag(\n        peerConnection,\n        ssrc,\n        isLocal,\n        remoteUserId,\n        track.getUsageLabel(),\n        container.id);\n};\n\n/**\n * Logs an \"application log\" message.\n * @param message {string} The message to log. Note that while this can be a\n * generic string, the convention used by lib-jitsi-meet and jitsi-meet is to\n * log valid JSON strings, with an \"id\" field used for distinguishing between\n * message types. E.g.: {id: \"recorder_status\", status: \"off\"}\n */\nJitsiConference.prototype.sendApplicationLog = function(message) {\n    Statistics.sendLog(message);\n};\n\n/**\n * Checks if the user identified by given <tt>mucJid</tt> is the conference\n * focus.\n * @param mucJid the full MUC address of the user to be checked.\n * @returns {boolean|null} <tt>true</tt> if MUC user is the conference focus,\n * <tt>false</tt> when is not. <tt>null</tt> if we're not in the MUC anymore and\n * are unable to figure out the status or if given <tt>mucJid</tt> is invalid.\n */\nJitsiConference.prototype._isFocus = function(mucJid) {\n    return this.room ? this.room.isFocus(mucJid) : null;\n};\n\n/**\n * Fires CONFERENCE_FAILED event with INCOMPATIBLE_SERVER_VERSIONS parameter\n */\nJitsiConference.prototype._fireIncompatibleVersionsEvent = function() {\n    this.eventEmitter.emit(JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.INCOMPATIBLE_SERVER_VERSIONS);\n};\n\n/**\n * Sends a message via the data channel.\n * @param to {string} the id of the endpoint that should receive the message.\n * If \"\" the message will be sent to all participants.\n * @param payload {object} the payload of the message.\n * @throws NetworkError or InvalidStateError or Error if the operation fails.\n * @deprecated Use 'sendMessage' instead. TODO: this should be private.\n */\nJitsiConference.prototype.sendEndpointMessage = function(to, payload) {\n    this.rtc.sendChannelMessage(to, payload);\n};\n\n/**\n * Sends a broadcast message via the data channel.\n * @param payload {object} the payload of the message.\n * @throws NetworkError or InvalidStateError or Error if the operation fails.\n * @deprecated Use 'sendMessage' instead. TODO: this should be private.\n */\nJitsiConference.prototype.broadcastEndpointMessage = function(payload) {\n    this.sendEndpointMessage('', payload);\n};\n\n/**\n * Sends a message to a given endpoint (if 'to' is a non-empty string), or\n * broadcasts it to all endpoints in the conference.\n * @param {string} to The ID of the endpoint/participant which is to receive\n * the message, or '' to broadcast the message to all endpoints in the\n * conference.\n * @param {string|object} message the message to send. If this is of type\n * 'string' it will be sent as a chat message. If it is of type 'object', it\n * will be encapsulated in a format recognized by jitsi-meet and converted to\n * JSON before being sent.\n * @param {boolean} sendThroughVideobridge Whether to send the message through\n * jitsi-videobridge (via the COLIBRI data channel or web socket), or through\n * the XMPP MUC. Currently only objects can be sent through jitsi-videobridge.\n */\nJitsiConference.prototype.sendMessage = function(\n        message,\n        to = '',\n        sendThroughVideobridge = false) {\n    const messageType = typeof message;\n\n    // Through videobridge we support only objects. Through XMPP we support\n    // objects (encapsulated in a specific JSON format) and strings (i.e.\n    // regular chat messages).\n    if (messageType !== 'object'\n            && (sendThroughVideobridge || messageType !== 'string')) {\n        logger.error(`Can not send a message of type ${messageType}`);\n\n        return;\n    }\n\n    if (sendThroughVideobridge) {\n        this.sendEndpointMessage(to, message);\n    } else {\n        let messageToSend = message;\n\n        // Name of packet extension of message stanza to send the required\n        // message in.\n        let elementName = 'body';\n\n        if (messageType === 'object') {\n            try {\n                messageToSend[JITSI_MEET_MUC_TYPE] = '';\n                messageToSend = JSON.stringify(messageToSend);\n                elementName = 'json-message';\n            } catch (e) {\n                logger.error('Can not send a message, stringify failed: ', e);\n\n                return;\n            }\n        }\n\n        if (to) {\n            this.sendPrivateTextMessage(to, messageToSend, elementName);\n        } else {\n            // Broadcast\n            this.sendTextMessage(messageToSend, elementName);\n        }\n    }\n\n};\n\nJitsiConference.prototype.isConnectionInterrupted = function() {\n    return this.isP2PActive()\n        ? this.isP2PConnectionInterrupted : this.isJvbConnectionInterrupted;\n};\n\n/**\n * Handles {@link XMPPEvents.CONNECTION_INTERRUPTED}\n * @param {JingleSessionPC} session\n * @private\n */\nJitsiConference.prototype._onIceConnectionInterrupted = function(session) {\n    if (session.isP2P) {\n        this.isP2PConnectionInterrupted = true;\n    } else {\n        this.isJvbConnectionInterrupted = true;\n    }\n    if (session.isP2P === this.isP2PActive()) {\n        this.eventEmitter.emit(JitsiConferenceEvents.CONNECTION_INTERRUPTED);\n    }\n};\n\n/**\n * Handles {@link XMPPEvents.CONNECTION_ICE_FAILED}\n * @param {JingleSessionPC} session\n * @private\n */\nJitsiConference.prototype._onIceConnectionFailed = function(session) {\n    // We do nothing for the JVB connection, because it's up to the Jicofo to\n    // eventually come up with the new offer (at least for the time being).\n    if (session.isP2P) {\n        // Add p2pFailed property to analytics to distinguish, between \"good\"\n        // and \"bad\" connection\n        Statistics.analytics.addPermanentProperties({ p2pFailed: true });\n\n        if (this.p2pJingleSession) {\n            Statistics.sendAnalyticsAndLog(\n                createP2PEvent(\n                    ACTION_P2P_FAILED,\n                    {\n                        initiator: this.p2pJingleSession.isInitiator\n                    }));\n\n        }\n        this._stopP2PSession('connectivity-error', 'ICE FAILED');\n    }\n};\n\n/**\n * Handles {@link XMPPEvents.CONNECTION_RESTORED}\n * @param {JingleSessionPC} session\n * @private\n */\nJitsiConference.prototype._onIceConnectionRestored = function(session) {\n    if (session.isP2P) {\n        this.isP2PConnectionInterrupted = false;\n    } else {\n        this.isJvbConnectionInterrupted = false;\n    }\n\n    if (session.isP2P === this.isP2PActive()) {\n        this.eventEmitter.emit(JitsiConferenceEvents.CONNECTION_RESTORED);\n    }\n};\n\n/**\n * Accept incoming P2P Jingle call.\n * @param {JingleSessionPC} jingleSession the session instance\n * @param {jQuery} jingleOffer a jQuery selector pointing to 'jingle' IQ element\n * @private\n */\nJitsiConference.prototype._acceptP2PIncomingCall = function(\n        jingleSession,\n        jingleOffer) {\n    this.isP2PConnectionInterrupted = false;\n\n    // Accept the offer\n    this.p2pJingleSession = jingleSession;\n\n    this.p2pJingleSession.initialize(this.room, this.rtc, this.options.config);\n\n    logger.info('Starting CallStats for P2P connection...');\n\n    let remoteID = Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid);\n\n    if (this.options.config.enableStatsID) {\n        const participant = this.participants[remoteID];\n\n        if (participant) {\n            remoteID = participant.getStatsID() || remoteID;\n        }\n    }\n\n    this.statistics.startCallStats(\n        this.p2pJingleSession.peerconnection,\n        remoteID);\n\n    const localTracks = this.getLocalTracks();\n\n    this.p2pJingleSession.acceptOffer(\n        jingleOffer,\n        () => {\n            logger.debug('Got RESULT for P2P \"session-accept\"');\n        },\n        error => {\n            logger.error(\n                'Failed to accept incoming P2P Jingle session', error);\n        },\n        localTracks);\n};\n\n/**\n * Adds remote tracks to the conference associated with the JVB session.\n * @private\n */\nJitsiConference.prototype._addRemoteJVBTracks = function() {\n    this._addRemoteTracks(\n        'JVB', this.jvbJingleSession.peerconnection.getRemoteTracks());\n};\n\n/**\n * Adds remote tracks to the conference associated with the P2P session.\n * @private\n */\nJitsiConference.prototype._addRemoteP2PTracks = function() {\n    this._addRemoteTracks(\n        'P2P', this.p2pJingleSession.peerconnection.getRemoteTracks());\n};\n\n/**\n * Generates fake \"remote track added\" events for given Jingle session.\n * @param {string} logName the session's nickname which will appear in log\n * messages.\n * @param {Array<JitsiRemoteTrack>} remoteTracks the tracks that will be added\n * @private\n */\nJitsiConference.prototype._addRemoteTracks = function(logName, remoteTracks) {\n    for (const track of remoteTracks) {\n        logger.info(`Adding remote ${logName} track: ${track}`);\n        this.rtc.eventEmitter.emit(RTCEvents.REMOTE_TRACK_ADDED, track);\n    }\n};\n\n/**\n * Called when {@link XMPPEvents.CONNECTION_ESTABLISHED} event is\n * triggered for a {@link JingleSessionPC}. Switches the conference to use\n * the P2P connection if the event comes from the P2P session.\n * @param {JingleSessionPC} jingleSession the session instance.\n * @private\n */\nJitsiConference.prototype._onIceConnectionEstablished = function(\n        jingleSession) {\n    if (this.p2pJingleSession !== null) {\n        // store the establishment time of the p2p session as a field of the\n        // JitsiConference because the p2pJingleSession might get disposed (thus\n        // the value is lost).\n        this.p2pEstablishmentDuration\n            = this.p2pJingleSession.establishmentDuration;\n    }\n\n    if (this.jvbJingleSession !== null) {\n        this.jvbEstablishmentDuration\n            = this.jvbJingleSession.establishmentDuration;\n    }\n\n    let done = false;\n    const forceJVB121Ratio = this.options.config.forceJVB121Ratio;\n\n    // We don't care about the JVB case, there's nothing to be done\n    if (!jingleSession.isP2P) {\n        done = true;\n    } else if (this.p2pJingleSession !== jingleSession) {\n        logger.error('CONNECTION_ESTABLISHED - wrong P2P session instance ?!');\n\n        done = true;\n    } else if (!jingleSession.isInitiator\n        && typeof forceJVB121Ratio === 'number'\n        && Math.random() < forceJVB121Ratio) {\n        logger.info(`Forcing JVB 121 mode (ratio=${forceJVB121Ratio})...`);\n        Statistics.analytics.addPermanentProperties({ forceJvb121: true });\n        this._stopP2PSession('decline', 'force JVB121');\n\n        done = true;\n    }\n\n    if (!isNaN(this.p2pEstablishmentDuration)\n        && !isNaN(this.jvbEstablishmentDuration)) {\n        const establishmentDurationDiff\n            = this.p2pEstablishmentDuration - this.jvbEstablishmentDuration;\n\n        Statistics.sendAnalytics(\n            ICE_ESTABLISHMENT_DURATION_DIFF,\n            { value: establishmentDurationDiff });\n    }\n\n    if (jingleSession.isP2P === this.isP2PActive()) {\n        this.eventEmitter.emit(JitsiConferenceEvents.CONNECTION_ESTABLISHED);\n    }\n\n    if (done) {\n\n        return;\n    }\n\n    // Update P2P status and emit events\n    this._setP2PStatus(true);\n\n    // Remove remote tracks\n    if (this.jvbJingleSession) {\n        this._removeRemoteJVBTracks();\n    } else {\n        logger.info('Not removing remote JVB tracks - no session yet');\n    }\n\n    this._addRemoteP2PTracks();\n\n    // Stop media transfer over the JVB connection\n    if (this.jvbJingleSession) {\n        this._suspendMediaTransferForJvbConnection();\n    }\n\n    logger.info('Starting remote stats with p2p connection');\n    this.statistics.startRemoteStats(this.p2pJingleSession.peerconnection);\n\n    Statistics.sendAnalyticsAndLog(\n        createP2PEvent(\n            ACTION_P2P_ESTABLISHED,\n            {\n                initiator: this.p2pJingleSession.isInitiator\n            }));\n\n};\n\n/**\n * Clears the deferred start P2P task if it has been scheduled.\n * @private\n */\nJitsiConference.prototype._maybeClearDeferredStartP2P = function() {\n    if (this.deferredStartP2PTask) {\n        logger.info('Cleared deferred start P2P task');\n        clearTimeout(this.deferredStartP2PTask);\n        this.deferredStartP2PTask = null;\n    }\n};\n\n/**\n * Removes from the conference remote tracks associated with the JVB\n * connection.\n * @private\n */\nJitsiConference.prototype._removeRemoteJVBTracks = function() {\n    this._removeRemoteTracks(\n        'JVB', this.jvbJingleSession.peerconnection.getRemoteTracks());\n};\n\n/**\n * Removes from the conference remote tracks associated with the P2P\n * connection.\n * @private\n */\nJitsiConference.prototype._removeRemoteP2PTracks = function() {\n    this._removeRemoteTracks(\n        'P2P', this.p2pJingleSession.peerconnection.getRemoteTracks());\n};\n\n/**\n * Generates fake \"remote track removed\" events for given Jingle session.\n * @param {string} sessionNickname the session's nickname which will appear in\n * log messages.\n * @param {Array<JitsiRemoteTrack>} remoteTracks the tracks that will be removed\n * @private\n */\nJitsiConference.prototype._removeRemoteTracks = function(\n        sessionNickname,\n        remoteTracks) {\n    for (const track of remoteTracks) {\n        logger.info(`Removing remote ${sessionNickname} track: ${track}`);\n        this.rtc.eventEmitter.emit(RTCEvents.REMOTE_TRACK_REMOVED, track);\n    }\n};\n\n/**\n * Resumes media transfer over the JVB connection.\n * @private\n */\nJitsiConference.prototype._resumeMediaTransferForJvbConnection = function() {\n    logger.info('Resuming media transfer over the JVB connection...');\n    this.jvbJingleSession.setMediaTransferActive(true, true).then(\n        () => {\n            logger.info('Resumed media transfer over the JVB connection!');\n        },\n        error => {\n            logger.error(\n                'Failed to resume media transfer over the JVB connection:',\n                error);\n        });\n};\n\n/**\n * Sets new P2P status and updates some events/states hijacked from\n * the <tt>JitsiConference</tt>.\n * @param {boolean} newStatus the new P2P status value, <tt>true</tt> means that\n * P2P is now in use, <tt>false</tt> means that the JVB connection is now in use\n * @private\n */\nJitsiConference.prototype._setP2PStatus = function(newStatus) {\n    if (this.p2p === newStatus) {\n        logger.debug(`Called _setP2PStatus with the same status: ${newStatus}`);\n\n        return;\n    }\n    this.p2p = newStatus;\n    if (newStatus) {\n        logger.info('Peer to peer connection established!');\n\n        // When we end up in a valid P2P session need to reset the properties\n        // in case they have persisted, after session with another peer.\n        Statistics.analytics.addPermanentProperties({\n            p2pFailed: false,\n            forceJvb121: false\n        });\n\n        // Sync up video transfer active in case p2pJingleSession not existed\n        // when the lastN value was being adjusted.\n        const isVideoActive = this.rtc.getLastN() !== 0;\n\n        this.p2pJingleSession\n            .setMediaTransferActive(true, isVideoActive)\n            .catch(error => {\n                logger.error(\n                    'Failed to sync up P2P video transfer status'\n                        + `(${isVideoActive})`, error);\n            });\n    } else {\n        logger.info('Peer to peer connection closed!');\n    }\n\n    // Put the JVB connection on hold/resume\n    if (this.jvbJingleSession) {\n        this.statistics.sendConnectionResumeOrHoldEvent(\n            this.jvbJingleSession.peerconnection, !newStatus);\n    }\n\n    // Clear dtmfManager, so that it can be recreated with new connection\n    this.dtmfManager = null;\n\n    // Update P2P status\n    this.eventEmitter.emit(\n        JitsiConferenceEvents.P2P_STATUS,\n        this,\n        this.p2p);\n\n    // Refresh connection interrupted/restored\n    this.eventEmitter.emit(\n        this.isConnectionInterrupted()\n            ? JitsiConferenceEvents.CONNECTION_INTERRUPTED\n            : JitsiConferenceEvents.CONNECTION_RESTORED);\n};\n\n/**\n * Starts new P2P session.\n * @param {string} remoteJid the JID of the remote participant\n * @private\n */\nJitsiConference.prototype._startP2PSession = function(remoteJid) {\n    this._maybeClearDeferredStartP2P();\n    if (this.p2pJingleSession) {\n        logger.error('P2P session already started!');\n\n        return;\n    }\n\n    this.isP2PConnectionInterrupted = false;\n    this.p2pJingleSession\n        = this.xmpp.connection.jingle.newP2PJingleSession(\n            this.room.myroomjid,\n            remoteJid);\n    logger.info(\n        'Created new P2P JingleSession', this.room.myroomjid, remoteJid);\n\n    this.p2pJingleSession.initialize(this.room, this.rtc, this.options.config);\n\n    logger.info('Starting CallStats for P2P connection...');\n\n    let remoteID = Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid);\n\n    if (this.options.config.enableStatsID) {\n        const participant = this.participants[remoteID];\n\n        if (participant) {\n            remoteID = participant.getStatsID() || remoteID;\n        }\n    }\n\n    this.statistics.startCallStats(\n        this.p2pJingleSession.peerconnection,\n        remoteID);\n\n    // NOTE one may consider to start P2P with the local tracks detached,\n    // but no data will be sent until ICE succeeds anyway. And we switch\n    // immediately once the P2P ICE connects.\n    const localTracks = this.getLocalTracks();\n\n    this.p2pJingleSession.invite(localTracks);\n};\n\n/**\n * Suspends media transfer over the JVB connection.\n * @private\n */\nJitsiConference.prototype._suspendMediaTransferForJvbConnection = function() {\n    logger.info('Suspending media transfer over the JVB connection...');\n    this.jvbJingleSession.setMediaTransferActive(false, false).then(\n        () => {\n            logger.info('Suspended media transfer over the JVB connection !');\n        },\n        error => {\n            logger.error(\n                'Failed to suspend media transfer over the JVB connection:',\n                error);\n        });\n};\n\n/**\n * Method when called will decide whether it's the time to start or stop\n * the P2P session.\n * @param {boolean} userLeftEvent if <tt>true</tt> it means that the call\n * originates from the user left event.\n * @private\n */\nJitsiConference.prototype._maybeStartOrStopP2P = function(userLeftEvent) {\n    if (!browser.supportsP2P()\n        || !this.isP2PEnabled()\n        || this.isP2PTestModeEnabled()) {\n        logger.info('Auto P2P disabled');\n\n        return;\n    }\n    const peers = this.getParticipants();\n    const peerCount = peers.length;\n    const isModerator = this.isModerator();\n    const hasBotPeer\n        = peers.find(p => p._botType === 'poltergeist') !== undefined;\n\n    // FIXME 1 peer and it must *support* P2P switching\n    const shouldBeInP2P = peerCount === 1 && !hasBotPeer;\n\n    logger.debug(\n        `P2P? isModerator: ${isModerator}, peerCount: ${\n            peerCount}, hasBotPeer: ${hasBotPeer} => ${\n            shouldBeInP2P}`);\n\n    // Clear deferred \"start P2P\" task\n    if (!shouldBeInP2P && this.deferredStartP2PTask) {\n        this._maybeClearDeferredStartP2P();\n    }\n\n    // Start peer to peer session\n    if (isModerator && !this.p2pJingleSession && shouldBeInP2P) {\n        const peer = peerCount && peers[0];\n\n        // Everyone is a moderator ?\n        if (isModerator && peer.getRole() === 'moderator') {\n            const myId = this.myUserId();\n            const peersId = peer.getId();\n\n            if (myId > peersId) {\n                logger.debug(\n                    'Everyone\\'s a moderator - '\n                    + 'the other peer should start P2P', myId, peersId);\n\n                return;\n            } else if (myId === peersId) {\n                logger.error('The same IDs ? ', myId, peersId);\n\n                return;\n            }\n        }\n        const jid = peer.getJid();\n\n        if (userLeftEvent) {\n            if (this.deferredStartP2PTask) {\n                logger.error('Deferred start P2P task\\'s been set already!');\n\n                return;\n            }\n            logger.info(\n                `Will start P2P with: ${jid} after ${\n                    this.backToP2PDelay} seconds...`);\n            this.deferredStartP2PTask = setTimeout(\n                this._startP2PSession.bind(this, jid),\n                this.backToP2PDelay * 1000);\n        } else {\n            logger.info(`Will start P2P with: ${jid}`);\n            this._startP2PSession(jid);\n        }\n    } else if (this.p2pJingleSession && !shouldBeInP2P) {\n        logger.info(`Will stop P2P with: ${this.p2pJingleSession.remoteJid}`);\n\n        // Log that there will be a switch back to the JVB connection\n        if (this.p2pJingleSession.isInitiator && peerCount > 1) {\n            Statistics.sendAnalyticsAndLog(\n                createP2PEvent(ACTION_P2P_SWITCH_TO_JVB));\n        }\n        this._stopP2PSession();\n    }\n};\n\n/**\n * Stops the current P2P session.\n * @param {string} [reason=\"success\"] one of the Jingle \"reason\" element\n * names as defined by https://xmpp.org/extensions/xep-0166.html#def-reason\n * @param {string} [reasonDescription=\"Turing off P2P session\"] text\n * description that will be included in the session terminate message\n * @private\n */\nJitsiConference.prototype._stopP2PSession = function(\n        reason,\n        reasonDescription) {\n    if (!this.p2pJingleSession) {\n        logger.error('No P2P session to be stopped!');\n\n        return;\n    }\n\n    const wasP2PEstablished = this.isP2PActive();\n\n    // Swap remote tracks, but only if the P2P has been fully established\n    if (wasP2PEstablished) {\n        if (this.jvbJingleSession) {\n            this._resumeMediaTransferForJvbConnection();\n        }\n\n        // Remove remote P2P tracks\n        this._removeRemoteP2PTracks();\n    }\n\n    // Stop P2P stats\n    logger.info('Stopping remote stats for P2P connection');\n    this.statistics.stopRemoteStats(this.p2pJingleSession.peerconnection);\n    logger.info('Stopping CallStats for P2P connection');\n    this.statistics.stopCallStats(this.p2pJingleSession.peerconnection);\n\n    this.p2pJingleSession.terminate(\n        () => {\n            logger.info('P2P session terminate RESULT');\n        },\n        error => {\n            // Because both initiator and responder are simultaneously\n            // terminating their JingleSessions in case of the 'to JVB switch'\n            // when 3rd participant joins, both will dispose their sessions and\n            // reply with 'item-not-found' (see strophe.jingle.js). We don't\n            // want to log this as an error since it's expected behaviour.\n            //\n            // We want them both to terminate, because in case of initiator's\n            // crash the responder would stay in P2P mode until ICE fails which\n            // could take up to 20 seconds.\n            //\n            // NOTE lack of 'reason' is considered as graceful session terminate\n            // where both initiator and responder terminate their sessions\n            // simultaneously.\n            if (reason) {\n                logger.error(\n                    'An error occurred while trying to terminate'\n                        + ' P2P Jingle session', error);\n            }\n        }, {\n            reason: reason ? reason : 'success',\n            reasonDescription: reasonDescription\n                ? reasonDescription : 'Turing off P2P session',\n            sendSessionTerminate: this.room\n                && this.getParticipantById(\n                    Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid))\n        });\n\n    this.p2pJingleSession = null;\n\n    // Update P2P status and other affected events/states\n    this._setP2PStatus(false);\n\n    if (wasP2PEstablished) {\n        // Add back remote JVB tracks\n        if (this.jvbJingleSession) {\n            this._addRemoteJVBTracks();\n        } else {\n            logger.info('Not adding remote JVB tracks - no session yet');\n        }\n    }\n};\n\n/**\n * Checks whether or not the conference is currently in the peer to peer mode.\n * Being in peer to peer mode means that the direct connection has been\n * established and the P2P connection is being used for media transmission.\n * @return {boolean} <tt>true</tt> if in P2P mode or <tt>false</tt> otherwise.\n */\nJitsiConference.prototype.isP2PActive = function() {\n    return this.p2p;\n};\n\n/**\n * Returns the current ICE state of the P2P connection.\n * NOTE: method is used by the jitsi-meet-torture tests.\n * @return {string|null} an ICE state or <tt>null</tt> if there's currently\n * no P2P connection.\n */\nJitsiConference.prototype.getP2PConnectionState = function() {\n    if (this.isP2PActive()) {\n        return this.p2pJingleSession.peerconnection.getConnectionState();\n    }\n\n    return null;\n};\n\n\n/**\n * Manually starts new P2P session (should be used only in the tests).\n */\nJitsiConference.prototype.startP2PSession = function() {\n    const peers = this.getParticipants();\n\n    // Start peer to peer session\n    if (peers.length === 1) {\n        const peerJid = peers[0].getJid();\n\n        this._startP2PSession(peerJid);\n    } else {\n        throw new Error(\n            'There must be exactly 1 participant to start the P2P session !');\n    }\n};\n\n/**\n * Manually stops the current P2P session (should be used only in the tests)\n */\nJitsiConference.prototype.stopP2PSession = function() {\n    this._stopP2PSession();\n};\n\n/**\n * Get a summary of how long current participants have been the dominant speaker\n * @returns {object}\n */\nJitsiConference.prototype.getSpeakerStats = function() {\n    return this.speakerStatsCollector.getStats();\n};\n\n/**\n * Sets the maximum video size the local participant should receive from remote\n * participants.\n *\n * @param {number} maxFrameHeightPixels the maximum frame height, in pixels,\n * this receiver is willing to receive.\n * @returns {void}\n */\nJitsiConference.prototype.setReceiverVideoConstraint = function(\n        maxFrameHeight) {\n    this.rtc.setReceiverVideoConstraint(maxFrameHeight);\n};\n\n/**\n * Creates a video SIP GW session and returns it if service is enabled. Before\n * creating a session one need to check whether video SIP GW service is\n * available in the system {@link JitsiConference.isVideoSIPGWAvailable}. Even\n * if there are available nodes to serve this request, after creating the\n * session those nodes can be taken and the request about using the\n * created session can fail.\n *\n * @param {string} sipAddress - The sip address to be used.\n * @param {string} displayName - The display name to be used for this session.\n * @returns {JitsiVideoSIPGWSession|Error} Returns null if conference is not\n * initialised and there is no room.\n */\nJitsiConference.prototype.createVideoSIPGWSession\n    = function(sipAddress, displayName) {\n        if (!this.room) {\n            return new Error(VideoSIPGWConstants.ERROR_NO_CONNECTION);\n        }\n\n        return this.videoSIPGWHandler\n            .createVideoSIPGWSession(sipAddress, displayName);\n    };\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConference.js","/* global __filename */\n\nimport { createRtpStatsEvent } from '../../service/statistics/AnalyticsEvents';\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as ConnectionQualityEvents\n    from '../../service/connectivity/ConnectionQualityEvents';\nimport * as ConferenceEvents from '../../JitsiConferenceEvents';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport browser from '../browser';\nimport Statistics from './statistics';\nimport * as VideoType from '../../service/RTC/VideoType';\n\nconst logger = getLogger(__filename);\n\n/**\n * This will calculate an average for one, named stat and submit it to\n * the analytics module when requested. It automatically counts the samples.\n */\nclass AverageStatReport {\n    /**\n     * Creates new <tt>AverageStatReport</tt> for given name.\n     * @param {string} name that's the name of the event that will be reported\n     * to the analytics module.\n     */\n    constructor(name) {\n        this.name = name;\n        this.count = 0;\n        this.sum = 0;\n        this.samples = [];\n    }\n\n    /**\n     * Adds the next value that will be included in the average when\n     * {@link calculate} is called.\n     * @param {number} nextValue\n     */\n    addNext(nextValue) {\n        if (typeof nextValue !== 'number') {\n            logger.error(\n                `${this.name} - invalid value for idx: ${this.count}`,\n                nextValue);\n        } else if (!isNaN(nextValue)) {\n            this.sum += nextValue;\n            this.samples.push(nextValue);\n            this.count += 1;\n        }\n    }\n\n    /**\n     * Calculates an average for the samples collected using {@link addNext}.\n     * @return {number|NaN} an average of all collected samples or <tt>NaN</tt>\n     * if no samples were collected.\n     */\n    calculate() {\n        return this.sum / this.count;\n    }\n\n    /**\n     * Appends the report to the analytics \"data\" object. The object will be\n     * set under <tt>prefix</tt> + {@link this.name} key.\n     * @param {Object} report the analytics \"data\" object\n     */\n    appendReport(report) {\n        report[`${this.name}_avg`] = this.calculate();\n        report[`${this.name}_samples`] = JSON.stringify(this.samples);\n    }\n\n    /**\n     * Clears all memory of any samples collected, so that new average can be\n     * calculated using this instance.\n     */\n    reset() {\n        this.samples = [];\n        this.sum = 0;\n        this.count = 0;\n    }\n}\n\n/**\n * Class gathers the stats that are calculated and reported for a\n * {@link TraceablePeerConnection} even if it's not currently active. For\n * example we want to monitor RTT for the JVB connection while in P2P mode.\n */\nclass ConnectionAvgStats {\n    /**\n     * Creates new <tt>ConnectionAvgStats</tt>\n     * @param {AvgRTPStatsReporter} avgRtpStatsReporter\n     * @param {boolean} isP2P\n     * @param {number} n the number of samples, before arithmetic mean is to be\n     * calculated and values submitted to the analytics module.\n     */\n    constructor(avgRtpStatsReporter, isP2P, n) {\n        /**\n         * Is this instance for JVB or P2P connection ?\n         * @type {boolean}\n         */\n        this.isP2P = isP2P;\n\n        /**\n         * How many samples are to be included in arithmetic mean calculation.\n         * @type {number}\n         * @private\n         */\n        this._n = n;\n\n        /**\n         * The current sample index. Starts from 0 and goes up to {@link _n})\n         * when analytics report will be submitted.\n         * @type {number}\n         * @private\n         */\n        this._sampleIdx = 0;\n\n        /**\n         * Average round trip time reported by the ICE candidate pair.\n         * @type {AverageStatReport}\n         */\n        this._avgRTT = new AverageStatReport('rtt');\n\n        /**\n         * Map stores average RTT to the JVB reported by remote participants.\n         * Mapped per participant id {@link JitsiParticipant.getId}.\n         *\n         * This is used only when {@link ConnectionAvgStats.isP2P} equals to\n         * <tt>false</tt>.\n         *\n         * @type {Map<string,AverageStatReport>}\n         * @private\n         */\n        this._avgRemoteRTTMap = new Map();\n\n        /**\n         * The conference for which stats will be collected and reported.\n         * @type {JitsiConference}\n         * @private\n         */\n        this._avgRtpStatsReporter = avgRtpStatsReporter;\n\n        /**\n         * The latest average E2E RTT for the JVB connection only.\n         *\n         * This is used only when {@link ConnectionAvgStats.isP2P} equals to\n         * <tt>false</tt>.\n         *\n         * @type {number}\n         */\n        this._avgEnd2EndRTT = undefined;\n\n        this._onConnectionStats = (tpc, stats) => {\n            if (this.isP2P === tpc.isP2P) {\n                this._calculateAvgStats(stats);\n            }\n        };\n\n        const conference = avgRtpStatsReporter._conference;\n\n        conference.statistics.addConnectionStatsListener(\n            this._onConnectionStats);\n\n        if (!this.isP2P) {\n            this._onUserLeft = id => this._avgRemoteRTTMap.delete(id);\n            conference.on(ConferenceEvents.USER_LEFT, this._onUserLeft);\n\n            this._onRemoteStatsUpdated\n                = (id, data) => this._processRemoteStats(id, data);\n            conference.on(\n                ConnectionQualityEvents.REMOTE_STATS_UPDATED,\n                this._onRemoteStatsUpdated);\n        }\n    }\n\n    /**\n     * Processes next batch of stats.\n     * @param {go figure} data\n     * @private\n     */\n    _calculateAvgStats(data) {\n        if (!data) {\n            logger.error('No stats');\n\n            return;\n        }\n\n        if (browser.supportsRTTStatistics()) {\n            if (data.transport && data.transport.length) {\n                this._avgRTT.addNext(data.transport[0].rtt);\n            }\n        }\n\n        this._sampleIdx += 1;\n\n        if (this._sampleIdx >= this._n) {\n            if (browser.supportsRTTStatistics()) {\n                const conference = this._avgRtpStatsReporter._conference;\n\n                const batchReport = {\n                    p2p: this.isP2P,\n                    'conference_size': conference.getParticipantCount()\n                };\n\n                if (data.transport && data.transport.length) {\n                    Object.assign(batchReport, {\n                        'local_candidate_type':\n                            data.transport[0].localCandidateType,\n                        'remote_candidate_type':\n                            data.transport[0].remoteCandidateType,\n                        'transport_type': data.transport[0].type\n                    });\n                }\n\n                this._avgRTT.appendReport(batchReport);\n\n                if (this.isP2P) {\n                    // Report RTT diff only for P2P.\n                    const jvbEnd2EndRTT = this\n                        ._avgRtpStatsReporter.jvbStatsMonitor._avgEnd2EndRTT;\n\n                    if (!isNaN(jvbEnd2EndRTT)) {\n                        // eslint-disable-next-line dot-notation\n                        batchReport['rtt_diff']\n                            = this._avgRTT.calculate() - jvbEnd2EndRTT;\n                    }\n                } else {\n                    // Report end to end RTT only for JVB.\n                    const avgRemoteRTT = this._calculateAvgRemoteRTT();\n                    const avgLocalRTT = this._avgRTT.calculate();\n\n                    this._avgEnd2EndRTT = avgLocalRTT + avgRemoteRTT;\n\n                    if (!isNaN(avgLocalRTT) && !isNaN(avgRemoteRTT)) {\n                        // eslint-disable-next-line dot-notation\n                        batchReport['end2end_rtt_avg'] = this._avgEnd2EndRTT;\n                    }\n                }\n\n                Statistics.sendAnalytics(createRtpStatsEvent(batchReport));\n            }\n\n            this._resetAvgStats();\n        }\n    }\n\n    /**\n     * Calculates arithmetic mean of all RTTs towards the JVB reported by\n     * participants.\n     * @return {number|NaN} NaN if not available (not enough data)\n     * @private\n     */\n    _calculateAvgRemoteRTT() {\n        let count = 0, sum = 0;\n\n        // FIXME should we ignore RTT for participant\n        // who \"is having connectivity issues\" ?\n        for (const remoteAvg of this._avgRemoteRTTMap.values()) {\n            const avg = remoteAvg.calculate();\n\n            if (!isNaN(avg)) {\n                sum += avg;\n                count += 1;\n                remoteAvg.reset();\n            }\n        }\n\n        return sum / count;\n    }\n\n    /**\n     * Processes {@link ConnectionQualityEvents.REMOTE_STATS_UPDATED} to analyse\n     * RTT towards the JVB reported by each participant.\n     * @param {string} id {@link JitsiParticipant.getId}\n     * @param {go figure in ConnectionQuality.js} data\n     * @private\n     */\n    _processRemoteStats(id, data) {\n        const validData = typeof data.jvbRTT === 'number';\n        let rttAvg = this._avgRemoteRTTMap.get(id);\n\n        if (!rttAvg && validData) {\n            rttAvg = new AverageStatReport(`${id}_stat_rtt`);\n            this._avgRemoteRTTMap.set(id, rttAvg);\n        }\n\n        if (validData) {\n            rttAvg.addNext(data.jvbRTT);\n        } else if (rttAvg) {\n            this._avgRemoteRTTMap.delete(id);\n        }\n    }\n\n    /**\n     * Reset cache of all averages and {@link _sampleIdx}.\n     * @private\n     */\n    _resetAvgStats() {\n        this._avgRTT.reset();\n        if (this._avgRemoteRTTMap) {\n            this._avgRemoteRTTMap.clear();\n        }\n        this._sampleIdx = 0;\n    }\n\n    /**\n     *\n     */\n    dispose() {\n\n        const conference = this._avgRtpStatsReporter._conference;\n\n        conference.statistics.removeConnectionStatsListener(\n            this._onConnectionStats);\n        if (!this.isP2P) {\n            conference.off(\n                ConnectionQualityEvents.REMOTE_STATS_UPDATED,\n                this._onRemoteStatsUpdated);\n            conference.off(\n                ConferenceEvents.USER_LEFT,\n                this._onUserLeft);\n        }\n    }\n}\n\n/**\n * Reports average RTP statistics values (arithmetic mean) to the analytics\n * module for things like bit rate, bandwidth, packet loss etc. It keeps track\n * of the P2P vs JVB conference modes and submits the values under different\n * namespaces (the events for P2P mode have 'p2p.' prefix). Every switch between\n * P2P mode resets the data collected so far and averages are calculated from\n * scratch.\n */\nexport default class AvgRTPStatsReporter {\n    /**\n     * Creates new instance of <tt>AvgRTPStatsReporter</tt>\n     * @param {JitsiConference} conference\n     * @param {number} n the number of samples, before arithmetic mean is to be\n     * calculated and values submitted to the analytics module.\n     */\n    constructor(conference, n) {\n        /**\n         * How many {@link ConnectionQualityEvents.LOCAL_STATS_UPDATED} samples\n         * are to be included in arithmetic mean calculation.\n         * @type {number}\n         * @private\n         */\n        this._n = n;\n\n        if (n > 0) {\n            logger.info(`Avg RTP stats will be calculated every ${n} samples`);\n        } else {\n            logger.info('Avg RTP stats reports are disabled.');\n\n            // Do not initialize\n            return;\n        }\n\n        /**\n         * The current sample index. Starts from 0 and goes up to {@link _n})\n         * when analytics report will be submitted.\n         * @type {number}\n         * @private\n         */\n        this._sampleIdx = 0;\n\n        /**\n         * The conference for which stats will be collected and reported.\n         * @type {JitsiConference}\n         * @private\n         */\n        this._conference = conference;\n\n        /**\n         * Average audio upload bitrate\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgAudioBitrateUp\n            = new AverageStatReport('bitrate_audio_upload');\n\n        /**\n         * Average audio download bitrate\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgAudioBitrateDown\n            = new AverageStatReport('bitrate_audio_download');\n\n        /**\n         * Average video upload bitrate\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgVideoBitrateUp\n            = new AverageStatReport('bitrate_video_upload');\n\n        /**\n         * Average video download bitrate\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgVideoBitrateDown\n            = new AverageStatReport('bitrate_video_download');\n\n        /**\n         * Average upload bandwidth\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgBandwidthUp\n            = new AverageStatReport('bandwidth_upload');\n\n        /**\n         * Average download bandwidth\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgBandwidthDown\n            = new AverageStatReport('bandwidth_download');\n\n        /**\n         * Average total packet loss\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgPacketLossTotal\n            = new AverageStatReport('packet_loss_total');\n\n        /**\n         * Average upload packet loss\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgPacketLossUp\n            = new AverageStatReport('packet_loss_upload');\n\n        /**\n         * Average download packet loss\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgPacketLossDown\n            = new AverageStatReport('packet_loss_download');\n\n        /**\n         * Average FPS for remote videos\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgRemoteFPS = new AverageStatReport('framerate_remote');\n\n        /**\n         * Average FPS for remote screen streaming videos (reported only if not\n         * a <tt>NaN</tt>).\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgRemoteScreenFPS\n            = new AverageStatReport('framerate_screen_remote');\n\n        /**\n         * Average FPS for local video (camera)\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgLocalFPS = new AverageStatReport('framerate_local');\n\n        /**\n         * Average FPS for local screen streaming video (reported only if not\n         * a <tt>NaN</tt>).\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgLocalScreenFPS\n            = new AverageStatReport('framerate_screen_local');\n\n        /**\n         * Average pixels for remote screen streaming videos (reported only if\n         * not a <tt>NaN</tt>).\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgRemoteCameraPixels\n            = new AverageStatReport('pixels_remote');\n\n        /**\n         * Average pixels for remote screen streaming videos (reported only if\n         * not a <tt>NaN</tt>).\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgRemoteScreenPixels\n            = new AverageStatReport('pixels_screen_remote');\n\n        /**\n         * Average pixels for local video (camera)\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgLocalCameraPixels\n            = new AverageStatReport('pixels_local');\n\n        /**\n         * Average pixels for local screen streaming video (reported only if not\n         * a <tt>NaN</tt>).\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgLocalScreenPixels\n            = new AverageStatReport('pixels_screen_local');\n\n        /**\n         * Average connection quality as defined by\n         * the {@link ConnectionQuality} module.\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgCQ = new AverageStatReport('connection_quality');\n\n        this._onLocalStatsUpdated = data => this._calculateAvgStats(data);\n        conference.on(\n            ConnectionQualityEvents.LOCAL_STATS_UPDATED,\n            this._onLocalStatsUpdated);\n\n        this._onP2PStatusChanged = () => {\n            logger.debug('Resetting average stats calculation');\n            this._resetAvgStats();\n            this.jvbStatsMonitor._resetAvgStats();\n            this.p2pStatsMonitor._resetAvgStats();\n        };\n        conference.on(\n            ConferenceEvents.P2P_STATUS,\n            this._onP2PStatusChanged);\n\n        this._onJvb121StatusChanged = (oldStatus, newStatus) => {\n            // We want to reset only on the transition from false => true,\n            // because otherwise those stats are resetted on JVB <=> P2P\n            // transition.\n            if (newStatus === true) {\n                logger.info('Resetting JVB avg RTP stats');\n                this._resetAvgJvbStats();\n            }\n        };\n        conference.on(\n            ConferenceEvents.JVB121_STATUS,\n            this._onJvb121StatusChanged);\n\n        this.jvbStatsMonitor\n            = new ConnectionAvgStats(this, false /* JVB */, n);\n\n        this.p2pStatsMonitor\n            = new ConnectionAvgStats(this, true /* P2P */, n);\n    }\n\n    /**\n     * Processes next batch of stats reported on\n     * {@link ConnectionQualityEvents.LOCAL_STATS_UPDATED}.\n     * @param {go figure} data\n     * @private\n     */\n    _calculateAvgStats(data) {\n\n        if (!data) {\n            logger.error('No stats');\n\n            return;\n        }\n\n        const isP2P = this._conference.isP2PActive();\n        const confSize = this._conference.getParticipantCount();\n\n        if (!isP2P && confSize < 2) {\n\n            // There's no point in collecting stats for a JVB conference of 1.\n            // That happens for short period of time after everyone leaves\n            // the room, until Jicofo terminates the session.\n            return;\n        }\n\n        /* Uncomment to figure out stats structure\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                logger.info(`local stat ${key}: `, data[key]);\n            }\n        } */\n\n        const bitrate = data.bitrate;\n        const bandwidth = data.bandwidth;\n        const packetLoss = data.packetLoss;\n        const frameRate = data.framerate;\n        const resolution = data.resolution;\n\n        if (!bitrate) {\n            logger.error('No \"bitrate\"');\n\n            return;\n        } else if (!bandwidth) {\n            logger.error('No \"bandwidth\"');\n\n            return;\n        } else if (!packetLoss) {\n            logger.error('No \"packetloss\"');\n\n            return;\n        } else if (!frameRate) {\n            logger.error('No \"framerate\"');\n\n            return;\n        } else if (!resolution) {\n            logger.error('No resolution');\n\n            return;\n        }\n\n        this._avgAudioBitrateUp.addNext(bitrate.audio.upload);\n        this._avgAudioBitrateDown.addNext(bitrate.audio.download);\n\n        this._avgVideoBitrateUp.addNext(bitrate.video.upload);\n        this._avgVideoBitrateDown.addNext(bitrate.video.download);\n\n        if (browser.supportsBandwidthStatistics()) {\n            this._avgBandwidthUp.addNext(bandwidth.upload);\n            this._avgBandwidthDown.addNext(bandwidth.download);\n        }\n\n        this._avgPacketLossUp.addNext(packetLoss.upload);\n        this._avgPacketLossDown.addNext(packetLoss.download);\n        this._avgPacketLossTotal.addNext(packetLoss.total);\n\n        this._avgCQ.addNext(data.connectionQuality);\n\n        if (frameRate) {\n            this._avgRemoteFPS.addNext(\n                this._calculateAvgVideoFps(\n                    frameRate, false /* remote */, VideoType.CAMERA));\n            this._avgRemoteScreenFPS.addNext(\n                this._calculateAvgVideoFps(\n                    frameRate, false /* remote */, VideoType.DESKTOP));\n\n            this._avgLocalFPS.addNext(\n                this._calculateAvgVideoFps(\n                    frameRate, true /* local */, VideoType.CAMERA));\n            this._avgLocalScreenFPS.addNext(\n                this._calculateAvgVideoFps(\n                    frameRate, true /* local */, VideoType.DESKTOP));\n        }\n\n        if (resolution) {\n            this._avgRemoteCameraPixels.addNext(\n                this._calculateAvgVideoPixels(\n                    resolution, false /* remote */, VideoType.CAMERA));\n\n            this._avgRemoteScreenPixels.addNext(\n                this._calculateAvgVideoPixels(\n                    resolution, false /* remote */, VideoType.DESKTOP));\n\n            this._avgLocalCameraPixels.addNext(\n                this._calculateAvgVideoPixels(\n                    resolution, true /* local */, VideoType.CAMERA));\n\n            this._avgLocalScreenPixels.addNext(\n                this._calculateAvgVideoPixels(\n                    resolution, true /* local */, VideoType.DESKTOP));\n        }\n\n        this._sampleIdx += 1;\n\n        if (this._sampleIdx >= this._n) {\n\n            const batchReport = {\n                p2p: isP2P,\n                'conference_size': confSize\n            };\n\n            if (data.transport && data.transport.length) {\n                Object.assign(batchReport, {\n                    'local_candidate_type':\n                        data.transport[0].localCandidateType,\n                    'remote_candidate_type':\n                        data.transport[0].remoteCandidateType,\n                    'transport_type': data.transport[0].type\n                });\n            }\n\n            this._avgAudioBitrateUp.appendReport(batchReport);\n            this._avgAudioBitrateDown.appendReport(batchReport);\n\n            this._avgVideoBitrateUp.appendReport(batchReport);\n            this._avgVideoBitrateDown.appendReport(batchReport);\n\n            if (browser.supportsBandwidthStatistics()) {\n                this._avgBandwidthUp.appendReport(batchReport);\n                this._avgBandwidthDown.appendReport(batchReport);\n            }\n            this._avgPacketLossUp.appendReport(batchReport);\n            this._avgPacketLossDown.appendReport(batchReport);\n            this._avgPacketLossTotal.appendReport(batchReport);\n\n            this._avgRemoteFPS.appendReport(batchReport);\n            if (!isNaN(this._avgRemoteScreenFPS.calculate())) {\n                this._avgRemoteScreenFPS.appendReport(batchReport);\n            }\n            this._avgLocalFPS.appendReport(batchReport);\n            if (!isNaN(this._avgLocalScreenFPS.calculate())) {\n                this._avgLocalScreenFPS.appendReport(batchReport);\n            }\n\n            this._avgRemoteCameraPixels.appendReport(batchReport);\n            if (!isNaN(this._avgRemoteScreenPixels.calculate())) {\n                this._avgRemoteScreenPixels.appendReport(batchReport);\n            }\n            this._avgLocalCameraPixels.appendReport(batchReport);\n            if (!isNaN(this._avgLocalScreenPixels.calculate())) {\n                this._avgLocalScreenPixels.appendReport(batchReport);\n            }\n\n            this._avgCQ.appendReport(batchReport);\n\n            Statistics.sendAnalytics(createRtpStatsEvent(batchReport));\n\n            this._resetAvgStats();\n        }\n    }\n\n    /**\n     * Calculates average number of pixels for the report\n     *\n     * @param {map} peerResolutions a map of peer resolutions\n     * @param {boolean} isLocal if the average is to be calculated for the local\n     * video or <tt>false</tt> if for remote videos.\n     * @param {VideoType} videoType\n     * @return {number|NaN} average number of pixels or <tt>NaN</tt> if there\n     * are no samples.\n     * @private\n     */\n    _calculateAvgVideoPixels(peerResolutions, isLocal, videoType) {\n        let peerPixelsSum = 0;\n        let peerCount = 0;\n        const myID = this._conference.myUserId();\n\n        for (const peerID of Object.keys(peerResolutions)) {\n            if (isLocal ? peerID === myID : peerID !== myID) {\n                const participant\n                    = isLocal\n                        ? null\n                        : this._conference.getParticipantById(peerID);\n                const videosResolution = peerResolutions[peerID];\n\n                // Do not continue without participant for non local peerID\n                if ((isLocal || participant) && videosResolution) {\n                    const peerAvgPixels = this._calculatePeerAvgVideoPixels(\n                        videosResolution, participant, videoType);\n\n                    if (!isNaN(peerAvgPixels)) {\n                        peerPixelsSum += peerAvgPixels;\n                        peerCount += 1;\n                    }\n                }\n            }\n        }\n\n        return peerPixelsSum / peerCount;\n    }\n\n    /**\n     * Calculate average pixels for either remote or local participant\n     * @param {object} videos maps resolution per video SSRC\n     * @param {JitsiParticipant|null} participant remote participant or\n     * <tt>null</tt> for local video pixels calculation.\n     * @param {VideoType} videoType the type of the video for which an average\n     * will be calculated.\n     * @return {number|NaN} average video pixels of all participant's videos or\n     * <tt>NaN</tt> if currently not available\n     * @private\n     */\n    _calculatePeerAvgVideoPixels(videos, participant, videoType) {\n        let ssrcs = Object.keys(videos).map(ssrc => Number(ssrc));\n        let videoTracks = null;\n\n        // NOTE that this method is supposed to be called for the stats\n        // received from the current peerconnection.\n        const tpc = this._conference.getActivePeerConnection();\n\n        if (participant) {\n            videoTracks = participant.getTracksByMediaType(MediaType.VIDEO);\n            if (videoTracks) {\n                ssrcs\n                    = ssrcs.filter(\n                        ssrc => videoTracks.find(\n                            track =>\n                                !track.isMuted()\n                                    && track.getSSRC() === ssrc\n                                    && track.videoType === videoType));\n            }\n        } else {\n            videoTracks = this._conference.getLocalTracks(MediaType.VIDEO);\n            ssrcs\n                = ssrcs.filter(\n                    ssrc => videoTracks.find(\n                        track =>\n                            !track.isMuted()\n                                && tpc.getLocalSSRC(track) === ssrc\n                                && track.videoType === videoType));\n        }\n\n        let peerPixelsSum = 0;\n        let peerSsrcCount = 0;\n\n        for (const ssrc of ssrcs) {\n            const peerSsrcPixels\n                = Number(videos[ssrc].height) * Number(videos[ssrc].width);\n\n            // FPS is reported as 0 for users with no video\n            if (!isNaN(peerSsrcPixels) && peerSsrcPixels > 0) {\n                peerPixelsSum += peerSsrcPixels;\n                peerSsrcCount += 1;\n            }\n        }\n\n        return peerPixelsSum / peerSsrcCount;\n    }\n\n\n    /**\n     * Calculates average FPS for the report\n     * @param {go figure} frameRate\n     * @param {boolean} isLocal if the average is to be calculated for the local\n     * video or <tt>false</tt> if for remote videos.\n     * @param {VideoType} videoType\n     * @return {number|NaN} average FPS or <tt>NaN</tt> if there are no samples.\n     * @private\n     */\n    _calculateAvgVideoFps(frameRate, isLocal, videoType) {\n        let peerFpsSum = 0;\n        let peerCount = 0;\n        const myID = this._conference.myUserId();\n\n        for (const peerID of Object.keys(frameRate)) {\n            if (isLocal ? peerID === myID : peerID !== myID) {\n                const participant\n                    = isLocal\n                        ? null : this._conference.getParticipantById(peerID);\n                const videosFps = frameRate[peerID];\n\n                // Do not continue without participant for non local peerID\n                if ((isLocal || participant) && videosFps) {\n                    const peerAvgFPS\n                        = this._calculatePeerAvgVideoFps(\n                            videosFps, participant, videoType);\n\n                    if (!isNaN(peerAvgFPS)) {\n                        peerFpsSum += peerAvgFPS;\n                        peerCount += 1;\n                    }\n                }\n            }\n        }\n\n        return peerFpsSum / peerCount;\n    }\n\n    /**\n     * Calculate average FPS for either remote or local participant\n     * @param {object} videos maps FPS per video SSRC\n     * @param {JitsiParticipant|null} participant remote participant or\n     * <tt>null</tt> for local FPS calculation.\n     * @param {VideoType} videoType the type of the video for which an average\n     * will be calculated.\n     * @return {number|NaN} average FPS of all participant's videos or\n     * <tt>NaN</tt> if currently not available\n     * @private\n     */\n    _calculatePeerAvgVideoFps(videos, participant, videoType) {\n        let ssrcs = Object.keys(videos).map(ssrc => Number(ssrc));\n        let videoTracks = null;\n\n        // NOTE that this method is supposed to be called for the stats\n        // received from the current peerconnection.\n        const tpc = this._conference.getActivePeerConnection();\n\n        if (participant) {\n            videoTracks = participant.getTracksByMediaType(MediaType.VIDEO);\n            if (videoTracks) {\n                ssrcs\n                    = ssrcs.filter(\n                        ssrc => videoTracks.find(\n                            track => !track.isMuted()\n                                && track.getSSRC() === ssrc\n                                && track.videoType === videoType));\n            }\n        } else {\n            videoTracks = this._conference.getLocalTracks(MediaType.VIDEO);\n            ssrcs\n                = ssrcs.filter(\n                    ssrc => videoTracks.find(\n                        track => !track.isMuted()\n                            && tpc.getLocalSSRC(track) === ssrc\n                            && track.videoType === videoType));\n        }\n\n        let peerFpsSum = 0;\n        let peerSsrcCount = 0;\n\n        for (const ssrc of ssrcs) {\n            const peerSsrcFps = Number(videos[ssrc]);\n\n            // FPS is reported as 0 for users with no video\n            if (!isNaN(peerSsrcFps) && peerSsrcFps > 0) {\n                peerFpsSum += peerSsrcFps;\n                peerSsrcCount += 1;\n            }\n        }\n\n        return peerFpsSum / peerSsrcCount;\n    }\n\n    /**\n     * Resets the stats related to JVB connection. Must not be called when in\n     * P2P mode, because then the {@link AverageStatReport} instances are\n     * tracking P2P stats. Note that this should never happen unless something\n     * is wrong with the P2P and JVB121 events.\n     * @private\n     */\n    _resetAvgJvbStats() {\n        this._resetAvgStats();\n        this.jvbStatsMonitor._resetAvgStats();\n    }\n\n    /**\n     * Reset cache of all averages and {@link _sampleIdx}.\n     * @private\n     */\n    _resetAvgStats() {\n        this._avgAudioBitrateUp.reset();\n        this._avgAudioBitrateDown.reset();\n\n        this._avgVideoBitrateUp.reset();\n        this._avgVideoBitrateDown.reset();\n\n        this._avgBandwidthUp.reset();\n        this._avgBandwidthDown.reset();\n\n        this._avgPacketLossUp.reset();\n        this._avgPacketLossDown.reset();\n        this._avgPacketLossTotal.reset();\n\n        this._avgRemoteFPS.reset();\n        this._avgRemoteScreenFPS.reset();\n        this._avgLocalFPS.reset();\n        this._avgLocalScreenFPS.reset();\n\n        this._avgRemoteCameraPixels.reset();\n        this._avgRemoteScreenPixels.reset();\n        this._avgLocalCameraPixels.reset();\n        this._avgLocalScreenPixels.reset();\n\n        this._avgCQ.reset();\n\n        this._sampleIdx = 0;\n    }\n\n    /**\n     * Unregisters all event listeners and stops working.\n     */\n    dispose() {\n        this._conference.off(\n            ConferenceEvents.P2P_STATUS,\n            this._onP2PStatusChanged);\n        this._conference.off(\n            ConnectionQualityEvents.LOCAL_STATS_UPDATED,\n            this._onLocalStatsUpdated);\n        this._conference.off(\n            ConferenceEvents.JVB121_STATUS,\n            this._onJvb121StatusChanged);\n        this.jvbStatsMonitor.dispose();\n        this.p2pStatsMonitor.dispose();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/AvgRTPStatsReporter.js","/* Copyright @ 2016 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Logger = require('./Logger.js');\n\n/**\n * Creates new <tt>LogCollector</tt>. Class implements <tt>LoggerTransport</tt>\n * and thus can be added as global transport in order to capture all the logs.\n *\n * It captures subsequent log lines created whenever <tt>Logger</tt> logs\n * a message and stores them in a queue in order to batch log entries. There are\n * time and size limit constraints which determine how often batch entries are\n * stored. Whenever one of these limits is exceeded the <tt>LogCollector</tt>\n * will use the <tt>logStorage</tt> object given as an argument to save\n * the batch log entry.\n *\n * @param {Object} logStorage an object which allows to store the logs collected\n * @param {function(string|object[])} logStorage.storeLogs a method called when\n * this <tt>LogCollector</tt> requests log entry storage. The method's argument\n * is an array which can contain <tt>string</tt>s and <tt>object</tt>s. If given\n * item is an object it means that it's an aggregated message. That is a message\n * which is the same as the previous one and it's representation has\n * the following format:\n * {\n *   {string} text: 'the text of some duplicated message'\n *   {number} count: 3 // how many times the message appeared in a row\n * }\n * If a message \"B\" after an aggregated message \"A\" is different, then it breaks\n * the sequence of \"A\". Which means that even if the next message \"C\" is\n * the same as \"A\" it will start a new aggregated message \"C\".\n * @param {function()} logStorage.isReady a method which should return\n * a <tt>boolean</tt> to tell the collector that it's ready to store. During the\n * time storage is not ready log batches will be cached and stored on the next\n * occasion (flush or interval timeout).\n *\n * @param {Object} options the <tt>LogCollector</tt> configuration options.\n * @param {number} options.maxEntryLength the size limit for a single log entry\n * to be stored. The <tt>LogCollector</tt> will push the entry as soon as it\n * reaches or exceeds this limit given that <tt>logStorage.isReady</tt>\n * returns <tt>true</tt>. Otherwise the log entry will be cached until the log\n * storage becomes ready. Note that the \"is ready\" condition is checked every\n * <tt>options.storeInterval</tt> milliseconds.\n * @param {number} options.storeInterval how often the logs should be stored in\n * case <tt>maxEntryLength</tt> was not exceeded.\n * @param {boolean} options.stringifyObjects indicates whether or not object\n * arguments should be \"stringified\" with <tt>JSON.stringify</tt> when a log\n * message is composed. Note that objects logged on the error log level are\n * always stringified.\n *\n * @constructor\n */\nfunction LogCollector(logStorage, options) {\n    this.logStorage = logStorage;\n    this.stringifyObjects\n        = options && options.stringifyObjects\n            ? options.stringifyObjects : false;\n    this.storeInterval\n        = options && options.storeInterval\n            ? options.storeInterval: 30000;\n    this.maxEntryLength\n        = options && options.maxEntryLength\n            ? options.maxEntryLength : 10000;\n    // Bind the log method for each level to the corresponding method name\n    // in order to implement \"global log transport\" object.\n    Object.keys(Logger.levels).forEach(\n    function (logLevel) {\n        var methodName = Logger.levels[logLevel];\n        this[methodName] = function (logLevel) {\n            this._log.apply(this, arguments);\n        }.bind(this, logLevel);\n    }.bind(this));\n    /**\n     * The ID of store logs interval if one is currently scheduled or\n     * <tt>null</tt> otherwise.\n     * @type {number|null}\n     */\n    this.storeLogsIntervalID = null;\n    /**\n     * The log messages that are to be batched into log entry when\n     * {@link LogCollector._flush} method is called.\n     * @type {string[]}\n     */\n    this.queue = [];\n    /**\n     * The total length of all messages currently stored in the {@link queue}.\n     * @type {number}\n     */\n    this.totalLen = 0;\n    /**\n     * An array used to temporarily store log batches, before the storage gets\n     * ready.\n     * @type {string[]}\n     */\n    this.outputCache = [];\n}\n\n/**\n * Method called inside of {@link formatLogMessage} in order to covert an\n * <tt>Object</tt> argument to string. The conversion will happen when either\n * 'stringifyObjects' option is enabled or on the {@link Logger.levels.ERROR}\n * log level. The default implementation uses <tt>JSON.stringify</tt> and\n * returns \"[object with circular refs?]\" instead of an object if it fails.\n *\n * @param {object} someObject the <tt>object</tt> to be stringified.\n *\n * @return {string} the result of <tt>JSON.stringify</tt> or\n * \"[object with circular refs?]\" if any error occurs during \"stringification\".\n *\n * @protected\n */\nLogCollector.prototype.stringify = function (someObject) {\n    try {\n        return JSON.stringify(someObject);\n    } catch (error) {\n        return \"[object with circular refs?]\";\n    }\n};\n\n/**\n * Formats log entry for the given logging level and arguments passed to the\n * <tt>Logger</tt>'s log method. The first argument is log level and the next\n * arguments have to be captured using JS built-in 'arguments' variable.\n *\n * @param {Logger.levels} logLevel provides the logging level of the message to\n * be logged.\n *\n * @return {string|null} a non-empty string representation of the log entry\n * crafted from the log arguments. If the return value is <tt>null</tt> then\n * the message wil be discarded by this <tt>LogCollector</tt>.\n *\n * @protected\n */\nLogCollector.prototype.formatLogMessage\n= function (logLevel/*, arg1, arg2, arg3... */) {\n    var msg = '';\n    for (var i = 1, len = arguments.length; i < len; i++) {\n        var arg = arguments[i];\n        // objects logged on error level are always converted to JSON\n        if ((this.stringifyObjects || logLevel === Logger.levels.ERROR)\n            && typeof arg === 'object') {\n            arg = this.stringify(arg);\n        }\n        msg += arg;\n        if (i != len - 1) {\n            msg += ' ';\n        }\n    }\n    return msg.length ? msg : null;\n};\n\n/**\n * The log method bound to each of the logging levels in order to implement\n * \"global log transport\" object.\n *\n * @private\n */\nLogCollector.prototype._log = function() {\n\n    // var logLevel = arguments[0]; first argument is the log level\n    var msg = this.formatLogMessage.apply(this, arguments);\n    if (msg) {\n        // The same as the previous message aggregation logic\n        var prevMessage\n            = this.queue.length ? this.queue[this.queue.length -1] : undefined;\n        // NOTE that typeof undefined is 'undefined'\n        var prevMessageText\n            = typeof prevMessage === 'object' ? prevMessage.text : prevMessage;\n        // Is it the same as the previous one ?\n        if (prevMessageText == msg) {\n            if (typeof prevMessage === 'object') {\n                prevMessage.count += 1;\n            } else {\n                this.queue[this.queue.length-1] = {\n                    text: msg,\n                    count: 2\n                }\n            }\n        } else {\n            this.queue.push(msg);\n            this.totalLen += msg.length;\n        }\n    }\n\n    if (this.totalLen >= this.maxEntryLength) {\n        this._flush(true /* force */, true /* reschedule */);\n    }\n};\n\n/**\n * Starts periodical \"store logs\" task which will be triggered at the interval\n * specified in the constructor options.\n */\nLogCollector.prototype.start = function () {\n    this._reschedulePublishInterval();\n};\n\n/**\n * Reschedules the periodical \"store logs\" task which will store the next batch\n * log entry in the storage.\n * @private\n */\nLogCollector.prototype._reschedulePublishInterval = function () {\n    if (this.storeLogsIntervalID) {\n        window.clearTimeout(this.storeLogsIntervalID);\n        this.storeLogsIntervalID = null;\n    }\n    // It's actually a timeout, because it is rescheduled on every flush\n    this.storeLogsIntervalID\n        = window.setTimeout(\n            this._flush.bind(\n                this, false /* do not force */, true /* reschedule */),\n            this.storeInterval);\n};\n\n/**\n * Call this method to flush the log entry buffer and store it in the log\n * storage immediately (given that the storage is ready).\n */\nLogCollector.prototype.flush = function() {\n    this._flush(\n        false /* do not force, as it will not be stored anyway */,\n        true /* reschedule next update */ )\n};\n\n/**\n * Stores the next batch log entry in the log storage.\n * @param {boolean} force enforce current logs batch to be stored or cached if\n * there is anything to be logged, but the storage is not ready yet. One of\n * legitimate reasons to force is when the logs length exceeds size limit which\n * could result in truncation.\n * @param {boolean} reschedule <tt>true</tt> if the next periodic task should be\n * scheduled after the log entry is stored. <tt>false</tt> will end the periodic\n * task cycle.\n * @private\n */\nLogCollector.prototype._flush = function(force, reschedule) {\n    // Publish only if there's anything to be logged\n    if (this.totalLen > 0 && (this.logStorage.isReady() || force)) {\n        //FIXME avoid truncating\n        // right now we don't care if the message size is \"slightly\" exceeded\n        if (this.logStorage.isReady()) {\n            // Sends all cached logs\n            if (this.outputCache.length) {\n                this.outputCache.forEach(\n                    function (cachedQueue) {\n                        this.logStorage.storeLogs(cachedQueue);\n                    }.bind(this)\n                );\n                // Clear the cache\n                this.outputCache = [];\n            }\n            // Send current batch\n            this.logStorage.storeLogs(this.queue);\n        } else {\n            this.outputCache.push(this.queue);\n        }\n\n        this.queue = [];\n        this.totalLen = 0;\n    }\n\n    if (reschedule) {\n        this._reschedulePublishInterval();\n    }\n};\n\n/**\n * Stops the periodical \"store logs\" task and immediately stores any pending\n * log entries as a batch.\n */\nLogCollector.prototype.stop = function() {\n    // Flush and stop publishing logs\n    this._flush(false /* do not force */, false /* do not reschedule */);\n};\n\nmodule.exports = LogCollector;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/jitsi-meet-logger/lib/LogCollector.js\n// module id = 62\n// module chunks = 0","import { getLogger } from 'jitsi-meet-logger';\nimport { BrowserDetection } from 'js-utils';\n\nconst logger = getLogger(__filename);\n\n// TODO: Move this code to js-utils.\n\n// NOTE: Now we are extending BrowserDetection in order to preserve\n// RTCBrowserType interface but maybe it worth exporting BrowserCapabilities\n// and BrowserDetection as separate objects in future.\n\n/**\n * Implements browser capabilities for lib-jitsi-meet.\n */\nexport default class BrowserCapabilities extends BrowserDetection {\n    /**\n     * Creates new BrowserCapabilities instance.\n     */\n    constructor() {\n        super();\n        logger.info(\n            `This appears to be ${this.getName()}, ver: ${this.getVersion()}`);\n    }\n\n    /**\n     * Tells whether or not the <tt>MediaStream/tt> is removed from\n     * the <tt>PeerConnection</tt> and disposed on video mute (in order to turn\n     * off the camera device).\n     * @return {boolean} <tt>true</tt> if the current browser supports this\n     * strategy or <tt>false</tt> otherwise.\n     */\n    doesVideoMuteByStreamRemove() {\n        return !(\n            this.isFirefox()\n            || this.isEdge()\n            || this.isReactNative()\n            || this.isSafariWithWebrtc()\n        );\n    }\n\n    /**\n     * Check whether or not the current browser support peer to peer connections\n     * @return {boolean} <tt>true</tt> if p2p is supported or <tt>false</tt>\n     * otherwise.\n     */\n    supportsP2P() {\n        return !this.isEdge() && !this.isFirefox();\n    }\n\n    /**\n     * Checks if current browser is a Safari and a version of Safari that\n     * supports native webrtc.\n     *\n     * @returns {boolean}\n     */\n    isSafariWithWebrtc() {\n        return this.isSafari()\n            && !this.isVersionLessThan('11');\n    }\n\n    /**\n     * Checks if the current browser is supported.\n     *\n     * @returns {boolean} true if the browser is supported, false otherwise.\n     */\n    isSupported() {\n        return this.isChrome()\n            || this.isEdge()\n            || this.isElectron()\n            || this.isFirefox()\n            || this.isNWJS()\n            || this.isOpera()\n            || this.isReactNative()\n            || this.isSafariWithWebrtc();\n    }\n\n    /**\n     * Checks if the current browser triggers 'onmute'/'onunmute' events when\n     * user's connection is interrupted and the video stops playback.\n     * @returns {*|boolean} 'true' if the event is supported or 'false'\n     * otherwise.\n     */\n    supportsVideoMuteOnConnInterrupted() {\n        return this.isChrome() || this.isElectron() || this.isReactNative();\n    }\n\n    /**\n     * Checks if the current browser reports upload and download bandwidth\n     * statistics.\n     * @return {boolean}\n     */\n    supportsBandwidthStatistics() {\n        // FIXME bandwidth stats are currently not implemented for FF on our\n        // side, but not sure if not possible ?\n        return !this.isFirefox() && !this.isEdge()\n            && !this.isSafariWithWebrtc();\n    }\n\n    /**\n     * Checks if the current browser supports WebRTC datachannels.\n     * @return {boolean}\n     */\n    supportsDataChannels() {\n        // NOTE: Edge does not yet implement DataChannel.\n        return !this.isEdge();\n    }\n\n    /**\n     * Checks if the current browser support the device change event.\n     * @return {boolean}\n     */\n    supportsDeviceChangeEvent() {\n        return navigator.mediaDevices\n            && typeof navigator.mediaDevices.ondevicechange !== 'undefined';\n    }\n\n    /**\n     * Checks if the current browser supports the MediaStream constructor as\n     * defined by https://www.w3.org/TR/mediacapture-streams/#constructors. In\n     * cases where there is no support, it maybe be necessary to get audio\n     * and video in two distinct GUM calls.\n     * @return {boolean}\n     */\n    supportsMediaStreamConstructor() {\n        return !this.isReactNative();\n    }\n\n    /**\n     * Checks if the current browser supports RTP statictics collecting.\n     * Required by {@link RTPStatsCollector}.\n     *\n     * @returns {boolean} true if they are supported, false otherwise.\n     */\n    supportsRtpStatistics() {\n        return this.isChrome()\n            || this.isEdge()\n            || this.isElectron()\n            || this.isFirefox()\n            || this.isNWJS()\n            || this.isOpera()\n            || this.isReactNative()\n            || this.isSafariWithWebrtc();\n    }\n\n    /**\n     * Checks if the current browser supports RTT statistics for srflx local\n     * candidates through the legacy getStats() API.\n     */\n    supportsLocalCandidateRttStatistics() {\n        return this.isChrome()\n            || this.isElectron()\n            || this.isReactNative();\n    }\n\n    /**\n     * Checks if the current browser reports round trip time statistics for\n     * the ICE candidate pair.\n     * @return {boolean}\n     */\n    supportsRTTStatistics() {\n        // Firefox does not seem to report RTT for ICE candidate pair:\n        // eslint-disable-next-line max-len\n        // https://www.w3.org/TR/webrtc-stats/#dom-rtcicecandidatepairstats-currentroundtriptime\n        // It does report mozRTT for RTP streams, but at the time of this\n        // writing it's value does not make sense most of the time\n        // (is reported as 1):\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1241066\n        // For Chrome and others we rely on 'googRtt'.\n        return !this.isFirefox() && !this.isEdge();\n    }\n\n    /**\n     * Checks whether the browser supports RTPSender.\n     *\n     * @returns {boolean}\n     */\n    supportsRtpSender() {\n        return this.isFirefox();\n    }\n\n    /**\n     * Checks whether the browser supports RTX.\n     *\n     * @returns {boolean}\n     */\n    supportsRtx() {\n        return !this.isFirefox();\n    }\n\n    /**\n     * Whether jitsi-meet supports simulcast on the current browser.\n     * @returns {boolean}\n     */\n    supportsSimulcast() {\n        return this.isChrome()\n            || this.isFirefox()\n            || this.isElectron()\n            || this.isNWJS()\n            || this.isReactNative();\n    }\n\n    /**\n     * Returns whether or not the current browser can support capturing video,\n     * be it camera or desktop, and displaying received video.\n     *\n     * @returns {boolean}\n     */\n    supportsVideo() {\n        // FIXME: Check if we can use supportsVideoOut and supportsVideoIn. I\n        // leave the old implementation here in order not to brake something.\n\n        // Currently Safari using webrtc/adapter does not support video due in\n        // part to Safari only supporting H264 and the bridge sending VP8.\n        return !this.isSafariWithWebrtc();\n    }\n\n    /**\n     * Checks if the browser uses plan B.\n     *\n     * @returns {boolean}\n     */\n    usesPlanB() {\n        return !this.usesUnifiedPlan();\n    }\n\n    /**\n     * Checks if the browser uses unified plan.\n     *\n     * @returns {boolean}\n     */\n    usesUnifiedPlan() {\n        return this.isFirefox();\n    }\n\n    /**\n     * Returns whether or not the current browser should be using the new\n     * getUserMedia flow, which utilizes the adapter shim. This method should\n     * be temporary and used while migrating all browsers to use adapter and\n     * the new getUserMedia.\n     *\n     * @returns {boolean}\n     */\n    usesNewGumFlow() {\n        return (this.isChrome()\n                && !this.isVersionLessThan('61'))\n            || this.isFirefox()\n            || this.isSafariWithWebrtc();\n\n    }\n\n    /**\n     * Checks if the browser uses webrtc-adapter. All browsers using the new\n     * getUserMedia flow and Edge.\n     *\n     * @returns {boolean}\n     */\n    usesAdapter() {\n        return this.usesNewGumFlow() || this.isEdge();\n    }\n\n    /**\n     * Checks if the browser supposrts getDisplayMedia.\n     * @returns {boolean} {@code true} if the browser supposrts getDisplayMedia.\n     */\n    supportsGetDisplayMedia() {\n        return navigator.getDisplayMedia !== undefined;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/browser/BrowserCapabilities.js","export { default as BrowserCapabilities } from './BrowserCapabilities';\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/js-utils/browser-capabilities/index.js","import { BrowserDetection } from '../browser-detection';\n\n// TODO: Move BrowserCapabilities from lib-jitsi-meet here and use the JSON\n// format for them.\n\n/**\n * Implements browser capabilities for lib-jitsi-meet.\n */\nexport default class BrowserCapabilities {\n    /**\n     * Creates new BrowserCapabilities instance.\n     *\n     * @param {Object} capabilitiesDB - The JSON database with capabilities.\n     * @param {boolean} [isUsingIFrame] - True if Jitsi Meet is loaded in iframe\n     * and false otherwise.\n     * @param {Object} [browserInfo] - Information about the browser.\n     * @param {string} browserInfo.name - The name of the browser.\n     * @param {string} browserInfo.version - The version of the browser.\n     */\n    constructor(capabilitiesDB = {}, isUsingIFrame = false, browserInfo) {\n        const browser = new BrowserDetection(browserInfo);\n        let capabilitiesByVersion;\n\n        // If the capabilitiesDB is not in the correct format or the type of the\n        // version of the browser is undefined(the version is unknown) or the\n        // version type is not compatible (not a string) we'll consider the\n        // browser as not supported.\n        if (typeof capabilitiesDB === 'object'\n                && typeof browser.getVersion() === 'string') {\n            const browserCapabilities = capabilitiesDB[browser.getName()] || [];\n\n            for (let i = 0; i < browserCapabilities.length; i++) {\n                const capabilities = browserCapabilities[i];\n\n                if (typeof capabilities !== 'object') {\n                    // eslint-disable-next-line no-continue\n                    continue;\n                }\n\n                const version = capabilities.version;\n\n                if (!version || !browser.isVersionGreaterThan(version)) {\n                    capabilitiesByVersion = capabilities;\n                    break;\n                }\n            }\n        }\n\n        if (!capabilitiesByVersion || !capabilitiesByVersion.capabilities) {\n            this._capabilities = { isSupported: false };\n        } else if (isUsingIFrame) {\n            this._capabilities = {\n                ...capabilitiesByVersion.capabilities,\n                ...capabilitiesByVersion.iframeCapabilities\n            };\n        } else {\n            this._capabilities = capabilitiesByVersion.capabilities;\n        }\n\n        if (typeof this._capabilities.isSupported === 'undefined') {\n            // we have some capabilities but isSupported property is not filled.\n            this._capabilities.isSupported = true;\n        } else if (this._capabilities.isSupported === false) {\n            // Clean the other capabilities.\n            this._capabilities = { isSupported: false };\n        }\n    }\n\n    /**\n     * Checks whether the browser is supported by Jitsi Meet.\n     *\n     * @returns {boolean}\n     */\n    isSupported() {\n        return this._capabilities.isSupported;\n    }\n\n    /**\n     * Checks whether the browser supports incoming audio.\n     *\n     * @returns {boolean}\n     */\n    supportsAudioIn() {\n        return this._capabilities.audioIn || false;\n    }\n\n    /**\n     * Checks whether the browser supports outgoing audio.\n     *\n     * @returns {boolean}\n     */\n    supportsAudioOut() {\n        return this._capabilities.audioOut || false;\n    }\n\n\n    /**\n     * Checks whether the browser supports screen sharing.\n     *\n     * @returns {boolean}\n     */\n    supportsScreenSharing() {\n        return this._capabilities.screenSharing || false;\n    }\n\n    /**\n     * Checks whether the browser supports incomming video.\n     *\n     * @returns {boolean}\n     */\n    supportsVideoIn() {\n        return this._capabilities.videoIn || false;\n    }\n\n    /**\n     * Checks whether the browser supports incomming video.\n     *\n     * @returns {boolean}\n     */\n    supportsVideoOut() {\n        return this._capabilities.videoOut || false;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/js-utils/browser-capabilities/BrowserCapabilities.js","import bowser from 'bowser';\n\nimport {\n    CHROME,\n    OPERA,\n    FIREFOX,\n    INTERNET_EXPLORER,\n    EDGE,\n    SAFARI,\n    NWJS,\n    ELECTRON,\n    REACT_NATIVE,\n    UNKNOWN\n} from './browsers';\n\n/**\n * Maps the names of the browsers from bowser to the internal names defined in\n * ./browsers.js\n */\nconst bowserNameToJitsiName = {\n    'Chrome': CHROME,\n    'Chromium': CHROME,\n    'Opera': OPERA,\n    'Firefox': FIREFOX,\n    'Internet Explorer': INTERNET_EXPLORER,\n    'Microsoft Edge': EDGE,\n    'Safari': SAFARI\n};\n\n/**\n * Detects Electron environment.\n *\n * @returns {Object} - The name (ELECTRON) and version.\n */\nfunction _detectElectron() {\n    const userAgent = navigator.userAgent;\n\n    if (userAgent.match(/Electron/)) {\n        const version = userAgent.match(/Electron\\/([\\d.]+)/)[1];\n\n        return {\n            name: ELECTRON,\n            version\n        };\n    }\n}\n\n/**\n * Detects NWJS environment.\n *\n * @returns {Object} - The name (NWJS) and version.\n */\nfunction _detectNWJS() {\n    const userAgent = navigator.userAgent;\n\n    if (userAgent.match(/JitsiMeetNW/)) {\n        const version = userAgent.match(/JitsiMeetNW\\/([\\d.]+)/)[1];\n\n        return {\n            name: NWJS,\n            version\n        };\n    }\n}\n\n/**\n * Detects React Native environment.\n * @returns {Object} - The name (REACT_NATIVE) and version\n */\nfunction _detectReactNative() {\n    const match\n        = navigator.userAgent.match(/\\b(react[ \\t_-]*native)(?:\\/(\\S+))?/i);\n    let version;\n\n    // If we're remote debugging a React Native app, it may be treated as\n    // Chrome. Check navigator.product as well and always return some version\n    // even if we can't get the real one.\n\n    if (match || navigator.product === 'ReactNative') {\n        let name;\n\n        if (match && match.length > 2) {\n            name = match[1];\n            version = match[2];\n        }\n        name || (name = 'react-native');\n        version || (version = 'unknown');\n\n        return {\n            name: REACT_NATIVE,\n            version\n        };\n    }\n}\n\n/**\n * Returns information about the current browser.\n *\n * @returns {Object} - The name and version of the browser.\n */\nfunction _detect() {\n    let browserInfo;\n    const detectors = [\n        _detectReactNative,\n        _detectElectron,\n        _detectNWJS\n    ];\n\n    // Try all browser detectors\n    for (let i = 0; i < detectors.length; i++) {\n        browserInfo = detectors[i]();\n        if (browserInfo) {\n            return browserInfo;\n        }\n    }\n\n    const { name, version } = bowser;\n\n    if (name in bowserNameToJitsiName) {\n\n        return {\n            name: bowserNameToJitsiName[name],\n            version\n        };\n    }\n\n    return {\n        name: UNKNOWN,\n        version: undefined\n    };\n}\n\n/**\n * Implements browser detection.\n */\nexport default class BrowserDetection {\n    /**\n     * Creates new BrowserDetection instance.\n     *\n     * @param {Object} [browserInfo] - Information about the browser.\n     * @param {string} browserInfo.name - The name of the browser.\n     * @param {string} browserInfo.version - The version of the browser.\n     */\n    constructor(browserInfo) {\n        let name, version;\n\n        if (typeof browserInfo === 'undefined') {\n            const detectedBrowserInfo = _detect();\n\n            name = detectedBrowserInfo.name;\n            version = detectedBrowserInfo.version;\n        } else if (browserInfo.name in bowserNameToJitsiName) {\n            name = bowserNameToJitsiName[browserInfo.name];\n            version = browserInfo.version;\n        } else {\n            name = UNKNOWN;\n            version = undefined;\n        }\n\n        this._name = name;\n        this._version = version;\n    }\n\n    /**\n     * Gets current browser name.\n     * @returns {string}\n     */\n    getName() {\n        return this._name;\n    }\n\n    /**\n     * Checks if current browser is Chrome.\n     * @returns {boolean}\n     */\n    isChrome() {\n        return this._name === CHROME;\n    }\n\n    /**\n     * Checks if current browser is Opera.\n     * @returns {boolean}\n     */\n    isOpera() {\n        return this._name === OPERA;\n    }\n\n    /**\n     * Checks if current browser is Firefox.\n     * @returns {boolean}\n     */\n    isFirefox() {\n        return this._name === FIREFOX;\n    }\n\n    /**\n     * Checks if current browser is Internet Explorer.\n     * @returns {boolean}\n     */\n    isIExplorer() {\n        return this._name === INTERNET_EXPLORER;\n    }\n\n    /**\n     * Checks if current browser is Microsoft Edge.\n     * @returns {boolean}\n     */\n    isEdge() {\n        return this._name === EDGE;\n    }\n\n    /**\n     * Checks if current browser is Safari.\n     * @returns {boolean}\n     */\n    isSafari() {\n        return this._name === SAFARI;\n    }\n\n    /**\n     * Checks if current environment is NWJS.\n     * @returns {boolean}\n     */\n    isNWJS() {\n        return this._name === NWJS;\n    }\n\n    /**\n     * Checks if current environment is Electron.\n     * @returns {boolean}\n     */\n    isElectron() {\n        return this._name === ELECTRON;\n    }\n\n    /**\n     * Checks if current environment is React Native.\n     * @returns {boolean}\n     */\n    isReactNative() {\n        return this._name === REACT_NATIVE;\n    }\n\n    /**\n     * Returns the version of the current browser.\n     * @returns {string}\n     */\n    getVersion() {\n        return this._version;\n    }\n\n    /**\n     * Compares the passed version with the current browser version.\n     * {@see https://github.com/lancedikson/bowser}\n     */\n    static compareVersions = bowser.compareVersions;\n\n    /**\n     * Compares the passed version with the current browser version.\n     *\n     * @param {*} version - The version to compare with. Anything different\n     * than string will be converted to string.\n     * @returns {number|undefined} - Returns 0 if the version is equal to the\n     * current one, 1 if the version is greater than the current one, -1 if the\n     * version is lower than the current one and undefined if the current\n     * browser version is unknown.\n     */\n    compareVersion(version) {\n        if (this._version) {\n            return bowser.compareVersions([ String(version), this._version ]);\n        }\n    }\n\n    /**\n     * Compares the passed version with the current browser version.\n     *\n     * @param {*} version - The version to compare with. Anything different\n     * than string will be converted to string.\n     * @returns {boolean|undefined} - Returns true if the current version is\n     * greater than the passed version and false otherwise. Returns undefined if\n     * the current browser version is unknown.\n     */\n    isVersionGreaterThan(version) {\n        return this.compareVersion(version) === -1;\n    }\n\n    /**\n     * Compares the passed version with the current browser version.\n     *\n     * @param {*} version - The version to compare with. Anything different\n     * than string will be converted to string.\n     * @returns {boolean|undefined} - Returns true if the current version is\n     * lower than the passed version and false otherwise. Returns undefined if\n     * the current browser version is unknown.\n     */\n    isVersionLessThan(version) {\n        return this.compareVersion(version) === 1;\n    }\n\n    /**\n     * Compares the passed version with the current browser version.\n     *\n     * @param {*} version - The version to compare with. Anything different\n     * than string will be converted to string.\n     * @returns {boolean|undefined} - Returns true if the current version is\n     * equal to the passed version and false otherwise. Returns undefined if\n     * the current browser version is unknown.\n     */\n    isVersionEqualTo(version) {\n        return this.compareVersion(version) === 0;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/js-utils/browser-detection/BrowserDetection.js","/*!\n * Bowser - a browser detector\n * https://github.com/ded/bowser\n * MIT License | (c) Dustin Diaz 2015\n */\n\n!function (root, name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(name, definition)\n  else root[name] = definition()\n}(this, 'bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    function getSecondMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[2]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , nexusMobile = /nexus\\s*[0-6]\\s*/i.test(ua)\n      , nexusTablet = !nexusMobile && /nexus\\s*[0-9]+/i.test(ua)\n      , chromeos = /CrOS/.test(ua)\n      , silk = /silk/i.test(ua)\n      , sailfish = /sailfish/i.test(ua)\n      , tizen = /tizen/i.test(ua)\n      , webos = /(web|hpw)os/i.test(ua)\n      , windowsphone = /windows phone/i.test(ua)\n      , samsungBrowser = /SamsungBrowser/i.test(ua)\n      , windows = !windowsphone && /windows/i.test(ua)\n      , mac = !iosdevice && !silk && /macintosh/i.test(ua)\n      , linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua)\n      , edgeVersion = getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.\\d+)?)/i)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua) && !/tablet pc/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , xbox = /xbox/i.test(ua)\n      , result\n\n    if (/opera/i.test(ua)) {\n      //  an old Opera\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/opr\\/|opios/i.test(ua)) {\n      // a new Opera\n      result = {\n        name: 'Opera'\n        , opera: t\n        , version: getFirstMatch(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/SamsungBrowser/i.test(ua)) {\n      result = {\n        name: 'Samsung Internet for Android'\n        , samsungBrowser: t\n        , version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/coast/i.test(ua)) {\n      result = {\n        name: 'Opera Coast'\n        , coast: t\n        , version: versionIdentifier || getFirstMatch(/(?:coast)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/yabrowser/i.test(ua)) {\n      result = {\n        name: 'Yandex Browser'\n      , yandexbrowser: t\n      , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/ucbrowser/i.test(ua)) {\n      result = {\n          name: 'UC Browser'\n        , ucbrowser: t\n        , version: getFirstMatch(/(?:ucbrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/mxios/i.test(ua)) {\n      result = {\n        name: 'Maxthon'\n        , maxthon: t\n        , version: getFirstMatch(/(?:mxios)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/epiphany/i.test(ua)) {\n      result = {\n        name: 'Epiphany'\n        , epiphany: t\n        , version: getFirstMatch(/(?:epiphany)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/puffin/i.test(ua)) {\n      result = {\n        name: 'Puffin'\n        , puffin: t\n        , version: getFirstMatch(/(?:puffin)[\\s\\/](\\d+(?:\\.\\d+)?)/i)\n      }\n    }\n    else if (/sleipnir/i.test(ua)) {\n      result = {\n        name: 'Sleipnir'\n        , sleipnir: t\n        , version: getFirstMatch(/(?:sleipnir)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/k-meleon/i.test(ua)) {\n      result = {\n        name: 'K-Meleon'\n        , kMeleon: t\n        , version: getFirstMatch(/(?:k-meleon)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (windowsphone) {\n      result = {\n        name: 'Windows Phone'\n      , osname: 'Windows Phone'\n      , windowsphone: t\n      }\n      if (edgeVersion) {\n        result.msedge = t\n        result.version = edgeVersion\n      }\n      else {\n        result.msie = t\n        result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (chromeos) {\n      result = {\n        name: 'Chrome'\n      , osname: 'Chrome OS'\n      , chromeos: t\n      , chromeBook: t\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/edg([ea]|ios)/i.test(ua)) {\n      result = {\n        name: 'Microsoft Edge'\n      , msedge: t\n      , version: edgeVersion\n      }\n    }\n    else if (/vivaldi/i.test(ua)) {\n      result = {\n        name: 'Vivaldi'\n        , vivaldi: t\n        , version: getFirstMatch(/vivaldi\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (sailfish) {\n      result = {\n        name: 'Sailfish'\n      , osname: 'Sailfish OS'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel|fxios/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n        result.osname = 'Firefox OS'\n      }\n    }\n    else if (silk) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/slimerjs/i.test(ua)) {\n      result = {\n        name: 'SlimerJS'\n        , slimer: t\n        , version: getFirstMatch(/slimerjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , osname: 'BlackBerry OS'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (webos) {\n      result = {\n        name: 'WebOS'\n      , osname: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , osname: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (tizen) {\n      result = {\n        name: 'Tizen'\n      , osname: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/qupzilla/i.test(ua)) {\n      result = {\n        name: 'QupZilla'\n        , qupzilla: t\n        , version: getFirstMatch(/(?:qupzilla)[\\s\\/](\\d+(?:\\.\\d+)+)/i) || versionIdentifier\n      }\n    }\n    else if (/chromium/i.test(ua)) {\n      result = {\n        name: 'Chromium'\n        , chromium: t\n        , version: getFirstMatch(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n        , chrome: t\n        , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n        , version: versionIdentifier\n      }\n    }\n    else if (/safari|applewebkit/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      }\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if(/googlebot/i.test(ua)) {\n      result = {\n        name: 'Googlebot'\n      , googlebot: t\n      , version: getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i) || versionIdentifier\n      }\n    }\n    else {\n      result = {\n        name: getFirstMatch(/^(.*)\\/(.*) /),\n        version: getSecondMatch(/^(.*)\\/(.*) /)\n     };\n   }\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n      if (/(apple)?webkit\\/537\\.36/i.test(ua)) {\n        result.name = result.name || \"Blink\"\n        result.blink = t\n      } else {\n        result.name = result.name || \"Webkit\"\n        result.webkit = t\n      }\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (!result.windowsphone && (android || result.silk)) {\n      result.android = t\n      result.osname = 'Android'\n    } else if (!result.windowsphone && iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n      result.osname = 'iOS'\n    } else if (mac) {\n      result.mac = t\n      result.osname = 'macOS'\n    } else if (xbox) {\n      result.xbox = t\n      result.osname = 'Xbox'\n    } else if (windows) {\n      result.windows = t\n      result.osname = 'Windows'\n    } else if (linux) {\n      result.linux = t\n      result.osname = 'Linux'\n    }\n\n    function getWindowsVersion (s) {\n      switch (s) {\n        case 'NT': return 'NT'\n        case 'XP': return 'XP'\n        case 'NT 5.0': return '2000'\n        case 'NT 5.1': return 'XP'\n        case 'NT 5.2': return '2003'\n        case 'NT 6.0': return 'Vista'\n        case 'NT 6.1': return '7'\n        case 'NT 6.2': return '8'\n        case 'NT 6.3': return '8.1'\n        case 'NT 10.0': return '10'\n        default: return undefined\n      }\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (result.windows) {\n      osVersion = getWindowsVersion(getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i))\n    } else if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (result.mac) {\n      osVersion = getFirstMatch(/Mac OS X (\\d+([_\\.\\s]\\d+)*)/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = !result.windows && osVersion.split('.')[0];\n    if (\n         tablet\n      || nexusTablet\n      || iosdevice == 'ipad'\n      || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))\n      || result.silk\n    ) {\n      result.tablet = t\n    } else if (\n         mobile\n      || iosdevice == 'iphone'\n      || iosdevice == 'ipod'\n      || android\n      || nexusMobile\n      || result.blackberry\n      || result.webos\n      || result.bada\n    ) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if (result.msedge ||\n        (result.msie && result.version >= 10) ||\n        (result.yandexbrowser && result.version >= 15) ||\n\t\t    (result.vivaldi && result.version >= 1.0) ||\n        (result.chrome && result.version >= 20) ||\n        (result.samsungBrowser && result.version >= 4) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        || (result.chromium && result.version >= 20)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        || (result.chromium && result.version < 20)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '')\n\n  bowser.test = function (browserList) {\n    for (var i = 0; i < browserList.length; ++i) {\n      var browserItem = browserList[i];\n      if (typeof browserItem=== 'string') {\n        if (browserItem in bowser) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Get version precisions count\n   *\n   * @example\n   *   getVersionPrecision(\"1.10.3\") // 3\n   *\n   * @param  {string} version\n   * @return {number}\n   */\n  function getVersionPrecision(version) {\n    return version.split(\".\").length;\n  }\n\n  /**\n   * Array::map polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} iterator\n   * @return {Array}\n   */\n  function map(arr, iterator) {\n    var result = [], i;\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, iterator);\n    }\n    for (i = 0; i < arr.length; i++) {\n      result.push(iterator(arr[i]));\n    }\n    return result;\n  }\n\n  /**\n   * Calculate browser version weight\n   *\n   * @example\n   *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1\n   *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1\n   *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0\n   *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1\n   *\n   * @param  {Array<String>} versions versions to compare\n   * @return {Number} comparison result\n   */\n  function compareVersions(versions) {\n    // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n    var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));\n    var chunks = map(versions, function (version) {\n      var delta = precision - getVersionPrecision(version);\n\n      // 2) \"9\" -> \"9.0\" (for precision = 2)\n      version = version + new Array(delta + 1).join(\".0\");\n\n      // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n      return map(version.split(\".\"), function (chunk) {\n        return new Array(20 - chunk.length).join(\"0\") + chunk;\n      }).reverse();\n    });\n\n    // iterate in reverse order by reversed chunks array\n    while (--precision >= 0) {\n      // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n      if (chunks[0][precision] > chunks[1][precision]) {\n        return 1;\n      }\n      else if (chunks[0][precision] === chunks[1][precision]) {\n        if (precision === 0) {\n          // all version chunks are same\n          return 0;\n        }\n      }\n      else {\n        return -1;\n      }\n    }\n  }\n\n  /**\n   * Check if browser is unsupported\n   *\n   * @example\n   *   bowser.isUnsupportedBrowser({\n   *     msie: \"10\",\n   *     firefox: \"23\",\n   *     chrome: \"29\",\n   *     safari: \"5.1\",\n   *     opera: \"16\",\n   *     phantom: \"534\"\n   *   });\n   *\n   * @param  {Object}  minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function isUnsupportedBrowser(minVersions, strictMode, ua) {\n    var _bowser = bowser;\n\n    // make strictMode param optional with ua param usage\n    if (typeof strictMode === 'string') {\n      ua = strictMode;\n      strictMode = void(0);\n    }\n\n    if (strictMode === void(0)) {\n      strictMode = false;\n    }\n    if (ua) {\n      _bowser = detect(ua);\n    }\n\n    var version = \"\" + _bowser.version;\n    for (var browser in minVersions) {\n      if (minVersions.hasOwnProperty(browser)) {\n        if (_bowser[browser]) {\n          if (typeof minVersions[browser] !== 'string') {\n            throw new Error('Browser version in the minVersion map should be a string: ' + browser + ': ' + String(minVersions));\n          }\n\n          // browser version and min supported version.\n          return compareVersions([version, minVersions[browser]]) < 0;\n        }\n      }\n    }\n\n    return strictMode; // not found\n  }\n\n  /**\n   * Check if browser is supported\n   *\n   * @param  {Object} minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function check(minVersions, strictMode, ua) {\n    return !isUnsupportedBrowser(minVersions, strictMode, ua);\n  }\n\n  bowser.isUnsupportedBrowser = isUnsupportedBrowser;\n  bowser.compareVersions = compareVersions;\n  bowser.check = check;\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  /*\n   * Set our detect public method to the main bowser object\n   * This is needed to implement bowser in server side\n   */\n  bowser.detect = detect;\n  return bowser\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/bowser/src/bowser.js\n// module id = 67\n// module chunks = 0","module.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-define.js\n// module id = 68\n// module chunks = 0","import {\n    TYPE_OPERATIONAL,\n    TYPE_PAGE,\n    TYPE_TRACK,\n    TYPE_UI\n} from '../../service/statistics/AnalyticsEvents';\nimport { getLogger } from 'jitsi-meet-logger';\nimport browser from '../browser';\nimport Settings from '../settings/Settings';\n\nconst MAX_CACHE_SIZE = 100;\n\n// eslist-disable-line no-undef\nconst logger = getLogger(__filename);\n\n/**\n * This class provides an API to lib-jitsi-meet and its users for sending\n * analytics events. It serves as a bridge to different backend implementations\n * (\"analytics handlers\") and a cache for events attempted to be sent before\n * the analytics handlers were enabled.\n *\n * The API is designed to be an easy replacement for the previous version of\n * this adapter, and is meant to be extended with more convenience methods.\n *\n *\n * The API calls are translated to objects with the following structure, which\n * are then passed to the sendEvent(event) function of the underlying handlers:\n *\n * {\n *    type,\n *\n *    action,\n *    actionSubject,\n *    actionSubjectId,\n *    attributes,\n *    categories,\n *    containerId,\n *    containerType,\n *    name,\n *    objectId,\n *    objectType,\n *    source,\n *    tags\n * }\n *\n * The 'type' is one of 'operational', 'page', 'track' or 'ui', and some of the\n * other properties are considered required according to the type.\n *\n * For events with type 'page', the required properties are: name.\n *\n * For events with type 'operational' and 'ui', the required properties are:\n * action, actionSubject, source\n *\n * For events with type 'page', the required properties are:\n * action, actionSubject, source, containerType, containerId, objectType,\n * objectId\n */\nclass AnalyticsAdapter {\n    /**\n     * Creates new AnalyticsAdapter instance.\n     */\n    constructor() {\n        /**\n         * Whether this AnalyticsAdapter has been disposed of or not. Once this\n         * is set to true, the AnalyticsAdapter is disabled and does not accept\n         * any more events, and it can not be re-enabled.\n         * @type {boolean}\n         */\n        this.disposed = false;\n\n        /**\n         * The set of handlers to which events will be sent.\n         * @type {Set<any>}\n         */\n        this.analyticsHandlers = new Set();\n\n        /**\n         * The cache of events which are not sent yet. The cache is enabled\n         * while this field is truthy, and disabled otherwise.\n         * @type {Array}\n         */\n        this.cache = [];\n\n        /**\n         * Map of properties that will be added to every event. Note that the\n         * keys will be prefixed with \"permanent.\".\n         */\n        this.permanentProperties = {};\n\n        /**\n         * The name of the conference that this AnalyticsAdapter is associated\n         * with.\n         * @type {null}\n         */\n        this.conferenceName = '';\n\n        this.addPermanentProperties({\n            'callstats_name': Settings.callStatsUserName,\n            'user_agent': navigator.userAgent,\n            'browser_name': browser.getName()\n        });\n    }\n\n    /**\n     * Dispose analytics. Clears all handlers.\n     */\n    dispose() {\n        logger.warn('Disposing of analytics adapter.');\n        this.setAnalyticsHandlers([]);\n        this.disposed = true;\n    }\n\n    /**\n     * Sets the handlers that are going to be used to send analytics. Sends any\n     * cached events.\n     * @param {Array} handlers the handlers\n     */\n    setAnalyticsHandlers(handlers) {\n        if (this.disposed) {\n            return;\n        }\n\n        this.analyticsHandlers = new Set(handlers);\n\n        // Note that we disable the cache even if the set of handlers is empty.\n        const cache = this.cache;\n\n        this.cache = null;\n        if (cache) {\n            cache.forEach(event => this._sendEvent(event));\n        }\n    }\n\n    /**\n     * Adds a set of permanent properties to this this AnalyticsAdapter.\n     * Permanent properties will be added as \"attributes\" to events sent to\n     * the underlying \"analytics handlers\", and their keys will be prefixed\n     * by \"permanent_\", i.e. adding a permanent property {key: \"value\"} will\n     * result in {\"permanent_key\": \"value\"} object to be added to the\n     * \"attributes\" field of events.\n     *\n     * @param {Object} properties the properties to add\n     */\n    addPermanentProperties(properties) {\n        for (const property in properties) {\n            if (properties.hasOwnProperty(property)) {\n                this.permanentProperties[`permanent_${property}`]\n                    = properties[property];\n            }\n        }\n    }\n\n    /**\n     * Sets the name of the conference that this AnalyticsAdapter is associated\n     * with.\n     * @param name the name to set.\n     */\n    setConferenceName(name) {\n        this.conferenceName = name;\n        this.addPermanentProperties({ 'conference_name': name });\n    }\n\n    /**\n     * Sends an event with a given name and given properties. The first\n     * parameter is either a string or an object. If it is a string, it is used\n     * as the event name and the second parameter is used at the attributes to\n     * attach to the event. If it is an object, it represents the whole event,\n     * including any desired attributes, and the second parameter is ignored.\n     *\n     * @param {String|Object} eventName either a string to be used as the name\n     * of the event, or an event object. If an event object is passed, the\n     * properties parameters is ignored.\n     * @param {Object} properties the properties/attributes to attach to the\n     * event, if eventName is a string.\n     */\n    sendEvent(eventName, properties = {}) {\n        if (this.disposed) {\n            return;\n        }\n\n        let event = null;\n\n        if (typeof eventName === 'string') {\n            event = {\n                type: TYPE_OPERATIONAL,\n                action: eventName,\n                actionSubject: eventName,\n                source: eventName,\n                attributes: properties\n            };\n        } else if (typeof eventName === 'object') {\n            event = eventName;\n        }\n\n        if (!this._verifyRequiredFields(event)) {\n            logger.error(\n                `Dropping a mis-formatted event: ${JSON.stringify(event)}`);\n\n            return;\n        }\n\n        this._sendEvent(event);\n    }\n\n    /**\n     * Checks whether an event has all of the required fields set, and tries\n     * to fill in some of the missing fields with reasonable default values.\n     * Returns true if after this operation the event has all of the required\n     * fields set, and false otherwise (if some of the required fields were not\n     * set and the attempt to fill them in with a default failed).\n     *\n     * @param event the event object.\n     * @return {boolean} true if the event (after the call to this function)\n     * contains all of the required fields, and false otherwise.\n     * @private\n     */\n    _verifyRequiredFields(event) {\n        if (!event) {\n            return false;\n        }\n\n        if (!event.type) {\n            event.type = TYPE_OPERATIONAL;\n        }\n\n        const type = event.type;\n\n        if (type !== TYPE_OPERATIONAL && type !== TYPE_PAGE\n            && type !== TYPE_UI && type !== TYPE_TRACK) {\n            logger.error(`Unknown event type: ${type}`);\n\n            return false;\n        }\n\n        if (type === TYPE_PAGE) {\n            return Boolean(event.name);\n        }\n\n        // Try to set some reasonable default values in case some of the\n        // parameters required by the handler API are missing.\n        event.action = event.action || event.name || event.actionSubject;\n        event.actionSubject = event.actionSubject || event.name || event.action;\n        event.source = event.source || event.name || event.action\n            || event.actionSubject;\n\n        if (!event.action || !event.actionSubject || !event.source) {\n            logger.error(\n                'Required field missing (action, actionSubject or source)');\n\n            return false;\n        }\n\n        // Track events have additional required fields.\n        if (type === TYPE_TRACK) {\n            event.objectType = event.objectType || 'generic-object-type';\n            event.containerType = event.containerType || 'conference';\n            if (event.containerType === 'conference' && !event.containerId) {\n                event.containerId = this.conferenceName;\n            }\n\n\n            if (!event.objectType || !event.objectId\n                || !event.containerType || !event.containerId) {\n                logger.error(\n                    'Required field missing (containerId, containerType, '\n                        + 'objectId or objectType)');\n\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * Saves an event to the cache, if the cache is enabled.\n     * @param event the event to save.\n     * @returns {boolean} true if the event was saved, and false otherwise (i.e.\n     * if the cache was disabled).\n     * @private\n     */\n    _maybeCacheEvent(event) {\n        if (this.cache) {\n            this.cache.push(event);\n\n            // We limit the size of the cache, in case the user fails to ever\n            // set the analytics handlers.\n            if (this.cache.length > MAX_CACHE_SIZE) {\n                this.cache.splice(0, 1);\n            }\n\n            return true;\n        }\n\n        return false;\n\n    }\n\n    /**\n     *\n     * @param event\n     * @private\n     */\n    _sendEvent(event) {\n        if (this._maybeCacheEvent(event)) {\n            // The event was consumed by the cache.\n        } else {\n            // We append the permanent properties at the time we send the event,\n            // not at the time we receive it.\n            this._appendPermanentProperties(event);\n\n            for (const handler of this.analyticsHandlers) {\n                try {\n                    handler.sendEvent(event);\n                } catch (e) {\n                    logger.warn(`Error sending analytics event: ${e}`);\n                }\n            }\n        }\n    }\n\n    /**\n     * Extends an event object with the configured permanent properties.\n     * @param event the event to extend with permanent properties.\n     * @private\n     */\n    _appendPermanentProperties(event) {\n        if (!event.attributes) {\n            event.attributes = {};\n        }\n\n        event.attributes\n            = Object.assign(event.attributes, this.permanentProperties);\n    }\n\n}\n\nexport default new AnalyticsAdapter();\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/AnalyticsAdapter.js","const RandomUtil = require('./RandomUtil');\n\n/**\n * from faker.js - Copyright (c) 2014-2015 Matthew Bergman & Marak Squires\n * MIT License\n * http://github.com/marak/faker.js/\n *\n * @const\n */\nconst names = [\n    'Aaliyah', 'Aaron', 'Abagail', 'Abbey', 'Abbie', 'Abbigail', 'Abby',\n    'Abdiel', 'Abdul', 'Abdullah', 'Abe', 'Abel', 'Abelardo', 'Abigail',\n    'Abigale', 'Abigayle', 'Abner', 'Abraham', 'Ada', 'Adah', 'Adalberto',\n    'Adaline', 'Adam', 'Adan', 'Addie', 'Addison', 'Adela', 'Adelbert', 'Adele',\n    'Adelia', 'Adeline', 'Adell', 'Adella', 'Adelle', 'Aditya', 'Adolf',\n    'Adolfo', 'Adolph', 'Adolphus', 'Adonis', 'Adrain', 'Adrian', 'Adriana',\n    'Adrianna', 'Adriel', 'Adrien', 'Adrienne', 'Afton', 'Aglae', 'Agnes',\n    'Agustin', 'Agustina', 'Ahmad', 'Ahmed', 'Aida', 'Aidan', 'Aiden', 'Aileen',\n    'Aisha', 'Aiyana', 'Akeem', 'Al', 'Alaina', 'Alan', 'Alana', 'Alanis',\n    'Alanna', 'Alayna', 'Alba', 'Albert', 'Alberta', 'Albertha', 'Alberto',\n    'Albin', 'Albina', 'Alda', 'Alden', 'Alec', 'Aleen', 'Alejandra',\n    'Alejandrin', 'Alek', 'Alena', 'Alene', 'Alessandra', 'Alessandro',\n    'Alessia', 'Aletha', 'Alex', 'Alexa', 'Alexander', 'Alexandra', 'Alexandre',\n    'Alexandrea', 'Alexandria', 'Alexandrine', 'Alexandro', 'Alexane',\n    'Alexanne', 'Alexie', 'Alexis', 'Alexys', 'Alexzander', 'Alf', 'Alfonso',\n    'Alfonzo', 'Alford', 'Alfred', 'Alfreda', 'Alfredo', 'Ali', 'Alia', 'Alice',\n    'Alicia', 'Alisa', 'Alisha', 'Alison', 'Alivia', 'Aliya', 'Aliyah', 'Aliza',\n    'Alize', 'Allan', 'Allen', 'Allene', 'Allie', 'Allison', 'Ally', 'Alphonso',\n    'Alta', 'Althea', 'Alva', 'Alvah', 'Alvena', 'Alvera', 'Alverta', 'Alvina',\n    'Alvis', 'Alyce', 'Alycia', 'Alysa', 'Alysha', 'Alyson', 'Alysson',\n    'Amalia', 'Amanda', 'Amani', 'Amara', 'Amari', 'Amaya', 'Amber', 'Ambrose',\n    'Amelia', 'Amelie', 'Amely', 'America', 'Americo', 'Amie', 'Amina', 'Amir',\n    'Amira', 'Amiya', 'Amos', 'Amparo', 'Amy', 'Amya', 'Ana', 'Anabel',\n    'Anabelle', 'Anahi', 'Anais', 'Anastacio', 'Anastasia', 'Anderson', 'Andre',\n    'Andreane', 'Andreanne', 'Andres', 'Andrew', 'Andy', 'Angel', 'Angela',\n    'Angelica', 'Angelina', 'Angeline', 'Angelita', 'Angelo', 'Angie', 'Angus',\n    'Anibal', 'Anika', 'Anissa', 'Anita', 'Aniya', 'Aniyah', 'Anjali', 'Anna',\n    'Annabel', 'Annabell', 'Annabelle', 'Annalise', 'Annamae', 'Annamarie',\n    'Anne', 'Annetta', 'Annette', 'Annie', 'Ansel', 'Ansley', 'Anthony',\n    'Antoinette', 'Antone', 'Antonetta', 'Antonette', 'Antonia', 'Antonietta',\n    'Antonina', 'Antonio', 'Antwan', 'Antwon', 'Anya', 'April', 'Ara',\n    'Araceli', 'Aracely', 'Arch', 'Archibald', 'Ardella', 'Arden', 'Ardith',\n    'Arely', 'Ari', 'Ariane', 'Arianna', 'Aric', 'Ariel', 'Arielle', 'Arjun',\n    'Arlene', 'Arlie', 'Arlo', 'Armand', 'Armando', 'Armani', 'Arnaldo', 'Arne',\n    'Arno', 'Arnold', 'Arnoldo', 'Arnulfo', 'Aron', 'Art', 'Arthur', 'Arturo',\n    'Arvel', 'Arvid', 'Arvilla', 'Aryanna', 'Asa', 'Asha', 'Ashlee', 'Ashleigh',\n    'Ashley', 'Ashly', 'Ashlynn', 'Ashton', 'Ashtyn', 'Asia', 'Assunta',\n    'Astrid', 'Athena', 'Aubree', 'Aubrey', 'Audie', 'Audra', 'Audreanne',\n    'Audrey', 'August', 'Augusta', 'Augustine', 'Augustus', 'Aurelia',\n    'Aurelie', 'Aurelio', 'Aurore', 'Austen', 'Austin', 'Austyn', 'Autumn',\n    'Ava', 'Avery', 'Avis', 'Axel', 'Ayana', 'Ayden', 'Ayla', 'Aylin', 'Baby',\n    'Bailee', 'Bailey', 'Barbara', 'Barney', 'Baron', 'Barrett', 'Barry',\n    'Bart', 'Bartholome', 'Barton', 'Baylee', 'Beatrice', 'Beau', 'Beaulah',\n    'Bell', 'Bella', 'Belle', 'Ben', 'Benedict', 'Benjamin', 'Bennett',\n    'Bennie', 'Benny', 'Benton', 'Berenice', 'Bernadette', 'Bernadine',\n    'Bernard', 'Bernardo', 'Berneice', 'Bernhard', 'Bernice', 'Bernie',\n    'Berniece', 'Bernita', 'Berry', 'Bert', 'Berta', 'Bertha', 'Bertram',\n    'Bertrand', 'Beryl', 'Bessie', 'Beth', 'Bethany', 'Bethel', 'Betsy',\n    'Bette', 'Bettie', 'Betty', 'Bettye', 'Beulah', 'Beverly', 'Bianka', 'Bill',\n    'Billie', 'Billy', 'Birdie', 'Blair', 'Blaise', 'Blake', 'Blanca',\n    'Blanche', 'Blaze', 'Bo', 'Bobbie', 'Bobby', 'Bonita', 'Bonnie', 'Boris',\n    'Boyd', 'Brad', 'Braden', 'Bradford', 'Bradley', 'Bradly', 'Brady',\n    'Braeden', 'Brain', 'Brandi', 'Brando', 'Brandon', 'Brandt', 'Brandy',\n    'Brandyn', 'Brannon', 'Branson', 'Brant', 'Braulio', 'Braxton', 'Brayan',\n    'Breana', 'Breanna', 'Breanne', 'Brenda', 'Brendan', 'Brenden', 'Brendon',\n    'Brenna', 'Brennan', 'Brennon', 'Brent', 'Bret', 'Brett', 'Bria', 'Brian',\n    'Briana', 'Brianne', 'Brice', 'Bridget', 'Bridgette', 'Bridie', 'Brielle',\n    'Brigitte', 'Brionna', 'Brisa', 'Britney', 'Brittany', 'Brock', 'Broderick',\n    'Brody', 'Brook', 'Brooke', 'Brooklyn', 'Brooks', 'Brown', 'Bruce',\n    'Bryana', 'Bryce', 'Brycen', 'Bryon', 'Buck', 'Bud', 'Buddy', 'Buford',\n    'Bulah', 'Burdette', 'Burley', 'Burnice', 'Buster', 'Cade', 'Caden',\n    'Caesar', 'Caitlyn', 'Cale', 'Caleb', 'Caleigh', 'Cali', 'Calista',\n    'Callie', 'Camden', 'Cameron', 'Camila', 'Camilla', 'Camille', 'Camren',\n    'Camron', 'Camryn', 'Camylle', 'Candace', 'Candelario', 'Candice',\n    'Candida', 'Candido', 'Cara', 'Carey', 'Carissa', 'Carlee', 'Carleton',\n    'Carley', 'Carli', 'Carlie', 'Carlo', 'Carlos', 'Carlotta', 'Carmel',\n    'Carmela', 'Carmella', 'Carmelo', 'Carmen', 'Carmine', 'Carol', 'Carolanne',\n    'Carole', 'Carolina', 'Caroline', 'Carolyn', 'Carolyne', 'Carrie',\n    'Carroll', 'Carson', 'Carter', 'Cary', 'Casandra', 'Casey', 'Casimer',\n    'Casimir', 'Casper', 'Cassandra', 'Cassandre', 'Cassidy', 'Cassie',\n    'Catalina', 'Caterina', 'Catharine', 'Catherine', 'Cathrine', 'Cathryn',\n    'Cathy', 'Cayla', 'Ceasar', 'Cecelia', 'Cecil', 'Cecile', 'Cecilia',\n    'Cedrick', 'Celestine', 'Celestino', 'Celia', 'Celine', 'Cesar', 'Chad',\n    'Chadd', 'Chadrick', 'Chaim', 'Chance', 'Chandler', 'Chanel', 'Chanelle',\n    'Charity', 'Charlene', 'Charles', 'Charley', 'Charlie', 'Charlotte',\n    'Chase', 'Chasity', 'Chauncey', 'Chaya', 'Chaz', 'Chelsea', 'Chelsey',\n    'Chelsie', 'Chesley', 'Chester', 'Chet', 'Cheyanne', 'Cheyenne', 'Chloe',\n    'Chris', 'Christ', 'Christa', 'Christelle', 'Christian', 'Christiana',\n    'Christina', 'Christine', 'Christop', 'Christophe', 'Christopher',\n    'Christy', 'Chyna', 'Ciara', 'Cicero', 'Cielo', 'Cierra', 'Cindy',\n    'Citlalli', 'Clair', 'Claire', 'Clara', 'Clarabelle', 'Clare', 'Clarissa',\n    'Clark', 'Claud', 'Claude', 'Claudia', 'Claudie', 'Claudine', 'Clay',\n    'Clemens', 'Clement', 'Clementina', 'Clementine', 'Clemmie', 'Cleo',\n    'Cleora', 'Cleta', 'Cletus', 'Cleve', 'Cleveland', 'Clifford', 'Clifton',\n    'Clint', 'Clinton', 'Clotilde', 'Clovis', 'Cloyd', 'Clyde', 'Coby', 'Cody',\n    'Colby', 'Cole', 'Coleman', 'Colin', 'Colleen', 'Collin', 'Colt', 'Colten',\n    'Colton', 'Columbus', 'Concepcion', 'Conner', 'Connie', 'Connor', 'Conor',\n    'Conrad', 'Constance', 'Constantin', 'Consuelo', 'Cooper', 'Cora',\n    'Coralie', 'Corbin', 'Cordelia', 'Cordell', 'Cordia', 'Cordie', 'Corene',\n    'Corine', 'Cornelius', 'Cornell', 'Corrine', 'Cortez', 'Cortney', 'Cory',\n    'Coty', 'Courtney', 'Coy', 'Craig', 'Crawford', 'Creola', 'Cristal',\n    'Cristian', 'Cristina', 'Cristobal', 'Cristopher', 'Cruz', 'Crystal',\n    'Crystel', 'Cullen', 'Curt', 'Curtis', 'Cydney', 'Cynthia', 'Cyril',\n    'Cyrus', 'Dagmar', 'Dahlia', 'Daija', 'Daisha', 'Daisy', 'Dakota', 'Dale',\n    'Dallas', 'Dallin', 'Dalton', 'Damaris', 'Dameon', 'Damian', 'Damien',\n    'Damion', 'Damon', 'Dan', 'Dana', 'Dandre', 'Dane', 'D\\'angelo', 'Dangelo',\n    'Danial', 'Daniela', 'Daniella', 'Danielle', 'Danika', 'Dannie', 'Danny',\n    'Dante', 'Danyka', 'Daphne', 'Daphnee', 'Daphney', 'Darby', 'Daren',\n    'Darian', 'Dariana', 'Darien', 'Dario', 'Darion', 'Darius', 'Darlene',\n    'Daron', 'Darrel', 'Darrell', 'Darren', 'Darrick', 'Darrin', 'Darrion',\n    'Darron', 'Darryl', 'Darwin', 'Daryl', 'Dashawn', 'Dasia', 'Dave', 'David',\n    'Davin', 'Davion', 'Davon', 'Davonte', 'Dawn', 'Dawson', 'Dax', 'Dayana',\n    'Dayna', 'Dayne', 'Dayton', 'Dean', 'Deangelo', 'Deanna', 'Deborah',\n    'Declan', 'Dedric', 'Dedrick', 'Dee', 'Deion', 'Deja', 'Dejah', 'Dejon',\n    'Dejuan', 'Delaney', 'Delbert', 'Delfina', 'Delia', 'Delilah', 'Dell',\n    'Della', 'Delmer', 'Delores', 'Delpha', 'Delphia', 'Delphine', 'Delta',\n    'Demarco', 'Demarcus', 'Demario', 'Demetris', 'Demetrius', 'Demond', 'Dena',\n    'Denis', 'Dennis', 'Deon', 'Deondre', 'Deontae', 'Deonte', 'Dereck',\n    'Derek', 'Derick', 'Deron', 'Derrick', 'Deshaun', 'Deshawn', 'Desiree',\n    'Desmond', 'Dessie', 'Destany', 'Destin', 'Destinee', 'Destiney', 'Destini',\n    'Destiny', 'Devan', 'Devante', 'Deven', 'Devin', 'Devon', 'Devonte',\n    'Devyn', 'Dewayne', 'Dewitt', 'Dexter', 'Diamond', 'Diana', 'Dianna',\n    'Diego', 'Dillan', 'Dillon', 'Dimitri', 'Dina', 'Dino', 'Dion', 'Dixie',\n    'Dock', 'Dolly', 'Dolores', 'Domenic', 'Domenica', 'Domenick', 'Domenico',\n    'Domingo', 'Dominic', 'Dominique', 'Don', 'Donald', 'Donato', 'Donavon',\n    'Donna', 'Donnell', 'Donnie', 'Donny', 'Dora', 'Dorcas', 'Dorian', 'Doris',\n    'Dorothea', 'Dorothy', 'Dorris', 'Dortha', 'Dorthy', 'Doug', 'Douglas',\n    'Dovie', 'Doyle', 'Drake', 'Drew', 'Duane', 'Dudley', 'Dulce', 'Duncan',\n    'Durward', 'Dustin', 'Dusty', 'Dwight', 'Dylan', 'Earl', 'Earlene',\n    'Earline', 'Earnest', 'Earnestine', 'Easter', 'Easton', 'Ebba', 'Ebony',\n    'Ed', 'Eda', 'Edd', 'Eddie', 'Eden', 'Edgar', 'Edgardo', 'Edison', 'Edmond',\n    'Edmund', 'Edna', 'Eduardo', 'Edward', 'Edwardo', 'Edwin', 'Edwina',\n    'Edyth', 'Edythe', 'Effie', 'Efrain', 'Efren', 'Eileen', 'Einar', 'Eino',\n    'Eladio', 'Elaina', 'Elbert', 'Elda', 'Eldon', 'Eldora', 'Eldred',\n    'Eldridge', 'Eleanora', 'Eleanore', 'Eleazar', 'Electa', 'Elena', 'Elenor',\n    'Elenora', 'Eleonore', 'Elfrieda', 'Eli', 'Elian', 'Eliane', 'Elias',\n    'Eliezer', 'Elijah', 'Elinor', 'Elinore', 'Elisa', 'Elisabeth', 'Elise',\n    'Eliseo', 'Elisha', 'Elissa', 'Eliza', 'Elizabeth', 'Ella', 'Ellen',\n    'Ellie', 'Elliot', 'Elliott', 'Ellis', 'Ellsworth', 'Elmer', 'Elmira',\n    'Elmo', 'Elmore', 'Elna', 'Elnora', 'Elody', 'Eloisa', 'Eloise', 'Elouise',\n    'Eloy', 'Elroy', 'Elsa', 'Else', 'Elsie', 'Elta', 'Elton', 'Elva', 'Elvera',\n    'Elvie', 'Elvis', 'Elwin', 'Elwyn', 'Elyse', 'Elyssa', 'Elza', 'Emanuel',\n    'Emelia', 'Emelie', 'Emely', 'Emerald', 'Emerson', 'Emery', 'Emie', 'Emil',\n    'Emile', 'Emilia', 'Emiliano', 'Emilie', 'Emilio', 'Emily', 'Emma',\n    'Emmalee', 'Emmanuel', 'Emmanuelle', 'Emmet', 'Emmett', 'Emmie', 'Emmitt',\n    'Emmy', 'Emory', 'Ena', 'Enid', 'Enoch', 'Enola', 'Enos', 'Enrico',\n    'Enrique', 'Ephraim', 'Era', 'Eriberto', 'Eric', 'Erica', 'Erich', 'Erick',\n    'Ericka', 'Erik', 'Erika', 'Erin', 'Erling', 'Erna', 'Ernest', 'Ernestina',\n    'Ernestine', 'Ernesto', 'Ernie', 'Ervin', 'Erwin', 'Eryn', 'Esmeralda',\n    'Esperanza', 'Esta', 'Esteban', 'Estefania', 'Estel', 'Estell', 'Estella',\n    'Estelle', 'Estevan', 'Esther', 'Estrella', 'Etha', 'Ethan', 'Ethel',\n    'Ethelyn', 'Ethyl', 'Ettie', 'Eudora', 'Eugene', 'Eugenia', 'Eula', 'Eulah',\n    'Eulalia', 'Euna', 'Eunice', 'Eusebio', 'Eva', 'Evalyn', 'Evan',\n    'Evangeline', 'Evans', 'Eve', 'Eveline', 'Evelyn', 'Everardo', 'Everett',\n    'Everette', 'Evert', 'Evie', 'Ewald', 'Ewell', 'Ezekiel', 'Ezequiel',\n    'Ezra', 'Fabian', 'Fabiola', 'Fae', 'Fannie', 'Fanny', 'Fatima', 'Faustino',\n    'Fausto', 'Favian', 'Fay', 'Faye', 'Federico', 'Felicia', 'Felicita',\n    'Felicity', 'Felipa', 'Felipe', 'Felix', 'Felton', 'Fermin', 'Fern',\n    'Fernando', 'Ferne', 'Fidel', 'Filiberto', 'Filomena', 'Finn', 'Fiona',\n    'Flavie', 'Flavio', 'Fleta', 'Fletcher', 'Flo', 'Florence', 'Florencio',\n    'Florian', 'Florida', 'Florine', 'Flossie', 'Floy', 'Floyd', 'Ford',\n    'Forest', 'Forrest', 'Foster', 'Frances', 'Francesca', 'Francesco',\n    'Francis', 'Francisca', 'Francisco', 'Franco', 'Frank', 'Frankie', 'Franz',\n    'Fred', 'Freda', 'Freddie', 'Freddy', 'Frederic', 'Frederick', 'Frederik',\n    'Frederique', 'Fredrick', 'Fredy', 'Freeda', 'Freeman', 'Freida', 'Frida',\n    'Frieda', 'Friedrich', 'Fritz', 'Furman', 'Gabe', 'Gabriel', 'Gabriella',\n    'Gabrielle', 'Gaetano', 'Gage', 'Gail', 'Gardner', 'Garett', 'Garfield',\n    'Garland', 'Garnet', 'Garnett', 'Garret', 'Garrett', 'Garrick', 'Garrison',\n    'Garry', 'Garth', 'Gaston', 'Gavin', 'Gay', 'Gayle', 'Gaylord', 'Gene',\n    'General', 'Genesis', 'Genevieve', 'Gennaro', 'Genoveva', 'Geo', 'Geoffrey',\n    'George', 'Georgette', 'Georgiana', 'Georgianna', 'Geovanni', 'Geovanny',\n    'Geovany', 'Gerald', 'Geraldine', 'Gerard', 'Gerardo', 'Gerda', 'Gerhard',\n    'Germaine', 'German', 'Gerry', 'Gerson', 'Gertrude', 'Gia', 'Gianni',\n    'Gideon', 'Gilbert', 'Gilberto', 'Gilda', 'Giles', 'Gillian', 'Gina',\n    'Gino', 'Giovani', 'Giovanna', 'Giovanni', 'Giovanny', 'Gisselle',\n    'Giuseppe', 'Gladyce', 'Gladys', 'Glen', 'Glenda', 'Glenna', 'Glennie',\n    'Gloria', 'Godfrey', 'Golda', 'Golden', 'Gonzalo', 'Gordon', 'Grace',\n    'Gracie', 'Graciela', 'Grady', 'Graham', 'Grant', 'Granville', 'Grayce',\n    'Grayson', 'Green', 'Greg', 'Gregg', 'Gregoria', 'Gregorio', 'Gregory',\n    'Greta', 'Gretchen', 'Greyson', 'Griffin', 'Grover', 'Guadalupe', 'Gudrun',\n    'Guido', 'Guillermo', 'Guiseppe', 'Gunnar', 'Gunner', 'Gus', 'Gussie',\n    'Gust', 'Gustave', 'Guy', 'Gwen', 'Gwendolyn', 'Hadley', 'Hailee', 'Hailey',\n    'Hailie', 'Hal', 'Haleigh', 'Haley', 'Halie', 'Halle', 'Hallie', 'Hank',\n    'Hanna', 'Hannah', 'Hans', 'Hardy', 'Harley', 'Harmon', 'Harmony', 'Harold',\n    'Harrison', 'Harry', 'Harvey', 'Haskell', 'Hassan', 'Hassie', 'Hattie',\n    'Haven', 'Hayden', 'Haylee', 'Hayley', 'Haylie', 'Hazel', 'Hazle', 'Heath',\n    'Heather', 'Heaven', 'Heber', 'Hector', 'Heidi', 'Helen', 'Helena',\n    'Helene', 'Helga', 'Hellen', 'Helmer', 'Heloise', 'Henderson', 'Henri',\n    'Henriette', 'Henry', 'Herbert', 'Herman', 'Hermann', 'Hermina', 'Herminia',\n    'Herminio', 'Hershel', 'Herta', 'Hertha', 'Hester', 'Hettie', 'Hilario',\n    'Hilbert', 'Hilda', 'Hildegard', 'Hillard', 'Hillary', 'Hilma', 'Hilton',\n    'Hipolito', 'Hiram', 'Hobart', 'Holden', 'Hollie', 'Hollis', 'Holly',\n    'Hope', 'Horace', 'Horacio', 'Hortense', 'Hosea', 'Houston', 'Howard',\n    'Howell', 'Hoyt', 'Hubert', 'Hudson', 'Hugh', 'Hulda', 'Humberto', 'Hunter',\n    'Hyman', 'Ian', 'Ibrahim', 'Icie', 'Ida', 'Idell', 'Idella', 'Ignacio',\n    'Ignatius', 'Ike', 'Ila', 'Ilene', 'Iliana', 'Ima', 'Imani', 'Imelda',\n    'Immanuel', 'Imogene', 'Ines', 'Irma', 'Irving', 'Irwin', 'Isaac', 'Isabel',\n    'Isabell', 'Isabella', 'Isabelle', 'Isac', 'Isadore', 'Isai', 'Isaiah',\n    'Isaias', 'Isidro', 'Ismael', 'Isobel', 'Isom', 'Israel', 'Issac', 'Itzel',\n    'Iva', 'Ivah', 'Ivory', 'Ivy', 'Izabella', 'Izaiah', 'Jabari', 'Jace',\n    'Jacey', 'Jacinthe', 'Jacinto', 'Jack', 'Jackeline', 'Jackie', 'Jacklyn',\n    'Jackson', 'Jacky', 'Jaclyn', 'Jacquelyn', 'Jacques', 'Jacynthe', 'Jada',\n    'Jade', 'Jaden', 'Jadon', 'Jadyn', 'Jaeden', 'Jaida', 'Jaiden', 'Jailyn',\n    'Jaime', 'Jairo', 'Jakayla', 'Jake', 'Jakob', 'Jaleel', 'Jalen', 'Jalon',\n    'Jalyn', 'Jamaal', 'Jamal', 'Jamar', 'Jamarcus', 'Jamel', 'Jameson',\n    'Jamey', 'Jamie', 'Jamil', 'Jamir', 'Jamison', 'Jammie', 'Jan', 'Jana',\n    'Janae', 'Jane', 'Janelle', 'Janessa', 'Janet', 'Janice', 'Janick', 'Janie',\n    'Janis', 'Janiya', 'Jannie', 'Jany', 'Jaquan', 'Jaquelin', 'Jaqueline',\n    'Jared', 'Jaren', 'Jarod', 'Jaron', 'Jarred', 'Jarrell', 'Jarret',\n    'Jarrett', 'Jarrod', 'Jarvis', 'Jasen', 'Jasmin', 'Jason', 'Jasper',\n    'Jaunita', 'Javier', 'Javon', 'Javonte', 'Jay', 'Jayce', 'Jaycee', 'Jayda',\n    'Jayde', 'Jayden', 'Jaydon', 'Jaylan', 'Jaylen', 'Jaylin', 'Jaylon',\n    'Jayme', 'Jayne', 'Jayson', 'Jazlyn', 'Jazmin', 'Jazmyn', 'Jazmyne', 'Jean',\n    'Jeanette', 'Jeanie', 'Jeanne', 'Jed', 'Jedediah', 'Jedidiah', 'Jeff',\n    'Jefferey', 'Jeffery', 'Jeffrey', 'Jeffry', 'Jena', 'Jenifer', 'Jennie',\n    'Jennifer', 'Jennings', 'Jennyfer', 'Jensen', 'Jerad', 'Jerald', 'Jeramie',\n    'Jeramy', 'Jerel', 'Jeremie', 'Jeremy', 'Jermain', 'Jermaine', 'Jermey',\n    'Jerod', 'Jerome', 'Jeromy', 'Jerrell', 'Jerrod', 'Jerrold', 'Jerry',\n    'Jess', 'Jesse', 'Jessica', 'Jessie', 'Jessika', 'Jessy', 'Jessyca',\n    'Jesus', 'Jett', 'Jettie', 'Jevon', 'Jewel', 'Jewell', 'Jillian', 'Jimmie',\n    'Jimmy', 'Jo', 'Joan', 'Joana', 'Joanie', 'Joanne', 'Joannie', 'Joanny',\n    'Joany', 'Joaquin', 'Jocelyn', 'Jodie', 'Jody', 'Joe', 'Joel', 'Joelle',\n    'Joesph', 'Joey', 'Johan', 'Johann', 'Johanna', 'Johathan', 'John',\n    'Johnathan', 'Johnathon', 'Johnnie', 'Johnny', 'Johnpaul', 'Johnson',\n    'Jolie', 'Jon', 'Jonas', 'Jonatan', 'Jonathan', 'Jonathon', 'Jordan',\n    'Jordane', 'Jordi', 'Jordon', 'Jordy', 'Jordyn', 'Jorge', 'Jose', 'Josefa',\n    'Josefina', 'Joseph', 'Josephine', 'Josh', 'Joshua', 'Joshuah', 'Josiah',\n    'Josiane', 'Josianne', 'Josie', 'Josue', 'Jovan', 'Jovani', 'Jovanny',\n    'Jovany', 'Joy', 'Joyce', 'Juana', 'Juanita', 'Judah', 'Judd', 'Jude',\n    'Judge', 'Judson', 'Judy', 'Jules', 'Julia', 'Julian', 'Juliana',\n    'Julianne', 'Julie', 'Julien', 'Juliet', 'Julio', 'Julius', 'June',\n    'Junior', 'Junius', 'Justen', 'Justice', 'Justina', 'Justine', 'Juston',\n    'Justus', 'Justyn', 'Juvenal', 'Juwan', 'Kacey', 'Kaci', 'Kacie', 'Kade',\n    'Kaden', 'Kadin', 'Kaela', 'Kaelyn', 'Kaia', 'Kailee', 'Kailey', 'Kailyn',\n    'Kaitlin', 'Kaitlyn', 'Kale', 'Kaleb', 'Kaleigh', 'Kaley', 'Kali', 'Kallie',\n    'Kameron', 'Kamille', 'Kamren', 'Kamron', 'Kamryn', 'Kane', 'Kara',\n    'Kareem', 'Karelle', 'Karen', 'Kari', 'Kariane', 'Karianne', 'Karina',\n    'Karine', 'Karl', 'Karlee', 'Karley', 'Karli', 'Karlie', 'Karolann',\n    'Karson', 'Kasandra', 'Kasey', 'Kassandra', 'Katarina', 'Katelin',\n    'Katelyn', 'Katelynn', 'Katharina', 'Katherine', 'Katheryn', 'Kathleen',\n    'Kathlyn', 'Kathryn', 'Kathryne', 'Katlyn', 'Katlynn', 'Katrina', 'Katrine',\n    'Kattie', 'Kavon', 'Kay', 'Kaya', 'Kaycee', 'Kayden', 'Kayla', 'Kaylah',\n    'Kaylee', 'Kayleigh', 'Kayley', 'Kayli', 'Kaylie', 'Kaylin', 'Keagan',\n    'Keanu', 'Keara', 'Keaton', 'Keegan', 'Keeley', 'Keely', 'Keenan', 'Keira',\n    'Keith', 'Kellen', 'Kelley', 'Kelli', 'Kellie', 'Kelly', 'Kelsi', 'Kelsie',\n    'Kelton', 'Kelvin', 'Ken', 'Kendall', 'Kendra', 'Kendrick', 'Kenna',\n    'Kennedi', 'Kennedy', 'Kenneth', 'Kennith', 'Kenny', 'Kenton', 'Kenya',\n    'Kenyatta', 'Kenyon', 'Keon', 'Keshaun', 'Keshawn', 'Keven', 'Kevin',\n    'Kevon', 'Keyon', 'Keyshawn', 'Khalid', 'Khalil', 'Kian', 'Kiana', 'Kianna',\n    'Kiara', 'Kiarra', 'Kiel', 'Kiera', 'Kieran', 'Kiley', 'Kim', 'Kimberly',\n    'King', 'Kip', 'Kira', 'Kirk', 'Kirsten', 'Kirstin', 'Kitty', 'Kobe',\n    'Koby', 'Kody', 'Kolby', 'Kole', 'Korbin', 'Korey', 'Kory', 'Kraig', 'Kris',\n    'Krista', 'Kristian', 'Kristin', 'Kristina', 'Kristofer', 'Kristoffer',\n    'Kristopher', 'Kristy', 'Krystal', 'Krystel', 'Krystina', 'Kurt', 'Kurtis',\n    'Kyla', 'Kyle', 'Kylee', 'Kyleigh', 'Kyler', 'Kylie', 'Kyra', 'Lacey',\n    'Lacy', 'Ladarius', 'Lafayette', 'Laila', 'Laisha', 'Lamar', 'Lambert',\n    'Lamont', 'Lance', 'Landen', 'Lane', 'Laney', 'Larissa', 'Laron', 'Larry',\n    'Larue', 'Laura', 'Laurel', 'Lauren', 'Laurence', 'Lauretta', 'Lauriane',\n    'Laurianne', 'Laurie', 'Laurine', 'Laury', 'Lauryn', 'Lavada', 'Lavern',\n    'Laverna', 'Laverne', 'Lavina', 'Lavinia', 'Lavon', 'Lavonne', 'Lawrence',\n    'Lawson', 'Layla', 'Layne', 'Lazaro', 'Lea', 'Leann', 'Leanna', 'Leanne',\n    'Leatha', 'Leda', 'Lee', 'Leif', 'Leila', 'Leilani', 'Lela', 'Lelah',\n    'Leland', 'Lelia', 'Lempi', 'Lemuel', 'Lenna', 'Lennie', 'Lenny', 'Lenora',\n    'Lenore', 'Leo', 'Leola', 'Leon', 'Leonard', 'Leonardo', 'Leone', 'Leonel',\n    'Leonie', 'Leonor', 'Leonora', 'Leopold', 'Leopoldo', 'Leora', 'Lera',\n    'Lesley', 'Leslie', 'Lesly', 'Lessie', 'Lester', 'Leta', 'Letha', 'Letitia',\n    'Levi', 'Lew', 'Lewis', 'Lexi', 'Lexie', 'Lexus', 'Lia', 'Liam', 'Liana',\n    'Libbie', 'Libby', 'Lila', 'Lilian', 'Liliana', 'Liliane', 'Lilla',\n    'Lillian', 'Lilliana', 'Lillie', 'Lilly', 'Lily', 'Lilyan', 'Lina',\n    'Lincoln', 'Linda', 'Lindsay', 'Lindsey', 'Linnea', 'Linnie', 'Linwood',\n    'Lionel', 'Lisa', 'Lisandro', 'Lisette', 'Litzy', 'Liza', 'Lizeth',\n    'Lizzie', 'Llewellyn', 'Lloyd', 'Logan', 'Lois', 'Lola', 'Lolita', 'Loma',\n    'Lon', 'London', 'Lonie', 'Lonnie', 'Lonny', 'Lonzo', 'Lora', 'Loraine',\n    'Loren', 'Lorena', 'Lorenz', 'Lorenza', 'Lorenzo', 'Lori', 'Lorine',\n    'Lorna', 'Lottie', 'Lou', 'Louie', 'Louisa', 'Lourdes', 'Louvenia',\n    'Lowell', 'Loy', 'Loyal', 'Loyce', 'Lucas', 'Luciano', 'Lucie', 'Lucienne',\n    'Lucile', 'Lucinda', 'Lucio', 'Lucious', 'Lucius', 'Lucy', 'Ludie',\n    'Ludwig', 'Lue', 'Luella', 'Luigi', 'Luis', 'Luisa', 'Lukas', 'Lula',\n    'Lulu', 'Luna', 'Lupe', 'Lura', 'Lurline', 'Luther', 'Luz', 'Lyda', 'Lydia',\n    'Lyla', 'Lynn', 'Lyric', 'Lysanne', 'Mabel', 'Mabelle', 'Mable', 'Mac',\n    'Macey', 'Maci', 'Macie', 'Mack', 'Mackenzie', 'Macy', 'Madaline',\n    'Madalyn', 'Maddison', 'Madeline', 'Madelyn', 'Madelynn', 'Madge', 'Madie',\n    'Madilyn', 'Madisen', 'Madison', 'Madisyn', 'Madonna', 'Madyson', 'Mae',\n    'Maegan', 'Maeve', 'Mafalda', 'Magali', 'Magdalen', 'Magdalena', 'Maggie',\n    'Magnolia', 'Magnus', 'Maia', 'Maida', 'Maiya', 'Major', 'Makayla',\n    'Makenna', 'Makenzie', 'Malachi', 'Malcolm', 'Malika', 'Malinda', 'Mallie',\n    'Mallory', 'Malvina', 'Mandy', 'Manley', 'Manuel', 'Manuela', 'Mara',\n    'Marc', 'Marcel', 'Marcelina', 'Marcelino', 'Marcella', 'Marcelle',\n    'Marcellus', 'Marcelo', 'Marcia', 'Marco', 'Marcos', 'Marcus', 'Margaret',\n    'Margarete', 'Margarett', 'Margaretta', 'Margarette', 'Margarita', 'Marge',\n    'Margie', 'Margot', 'Margret', 'Marguerite', 'Maria', 'Mariah', 'Mariam',\n    'Marian', 'Mariana', 'Mariane', 'Marianna', 'Marianne', 'Mariano',\n    'Maribel', 'Marie', 'Mariela', 'Marielle', 'Marietta', 'Marilie', 'Marilou',\n    'Marilyne', 'Marina', 'Mario', 'Marion', 'Marisa', 'Marisol', 'Maritza',\n    'Marjolaine', 'Marjorie', 'Marjory', 'Mark', 'Markus', 'Marlee', 'Marlen',\n    'Marlene', 'Marley', 'Marlin', 'Marlon', 'Marques', 'Marquis', 'Marquise',\n    'Marshall', 'Marta', 'Martin', 'Martina', 'Martine', 'Marty', 'Marvin',\n    'Mary', 'Maryam', 'Maryjane', 'Maryse', 'Mason', 'Mateo', 'Mathew',\n    'Mathias', 'Mathilde', 'Matilda', 'Matilde', 'Matt', 'Matteo', 'Mattie',\n    'Maud', 'Maude', 'Maudie', 'Maureen', 'Maurice', 'Mauricio', 'Maurine',\n    'Maverick', 'Mavis', 'Max', 'Maxie', 'Maxime', 'Maximilian', 'Maximillia',\n    'Maximillian', 'Maximo', 'Maximus', 'Maxine', 'Maxwell', 'May', 'Maya',\n    'Maybell', 'Maybelle', 'Maye', 'Maymie', 'Maynard', 'Mayra', 'Mazie',\n    'Mckayla', 'Mckenna', 'Mckenzie', 'Meagan', 'Meaghan', 'Meda', 'Megane',\n    'Meggie', 'Meghan', 'Mekhi', 'Melany', 'Melba', 'Melisa', 'Melissa',\n    'Mellie', 'Melody', 'Melvin', 'Melvina', 'Melyna', 'Melyssa', 'Mercedes',\n    'Meredith', 'Merl', 'Merle', 'Merlin', 'Merritt', 'Mertie', 'Mervin',\n    'Meta', 'Mia', 'Micaela', 'Micah', 'Michael', 'Michaela', 'Michale',\n    'Micheal', 'Michel', 'Michele', 'Michelle', 'Miguel', 'Mikayla', 'Mike',\n    'Mikel', 'Milan', 'Miles', 'Milford', 'Miller', 'Millie', 'Milo', 'Milton',\n    'Mina', 'Minerva', 'Minnie', 'Miracle', 'Mireille', 'Mireya', 'Misael',\n    'Missouri', 'Misty', 'Mitchel', 'Mitchell', 'Mittie', 'Modesta', 'Modesto',\n    'Mohamed', 'Mohammad', 'Mohammed', 'Moises', 'Mollie', 'Molly', 'Mona',\n    'Monica', 'Monique', 'Monroe', 'Monserrat', 'Monserrate', 'Montana',\n    'Monte', 'Monty', 'Morgan', 'Moriah', 'Morris', 'Mortimer', 'Morton',\n    'Mose', 'Moses', 'Moshe', 'Mossie', 'Mozell', 'Mozelle', 'Muhammad',\n    'Muriel', 'Murl', 'Murphy', 'Murray', 'Mustafa', 'Mya', 'Myah', 'Mylene',\n    'Myles', 'Myra', 'Myriam', 'Myrl', 'Myrna', 'Myron', 'Myrtice', 'Myrtie',\n    'Myrtis', 'Myrtle', 'Nadia', 'Nakia', 'Name', 'Nannie', 'Naomi', 'Naomie',\n    'Napoleon', 'Narciso', 'Nash', 'Nasir', 'Nat', 'Natalia', 'Natalie',\n    'Natasha', 'Nathan', 'Nathanael', 'Nathanial', 'Nathaniel', 'Nathen',\n    'Nayeli', 'Neal', 'Ned', 'Nedra', 'Neha', 'Neil', 'Nelda', 'Nella', 'Nelle',\n    'Nellie', 'Nels', 'Nelson', 'Neoma', 'Nestor', 'Nettie', 'Neva', 'Newell',\n    'Newton', 'Nia', 'Nicholas', 'Nicholaus', 'Nichole', 'Nick', 'Nicklaus',\n    'Nickolas', 'Nico', 'Nicola', 'Nicolas', 'Nicole', 'Nicolette', 'Nigel',\n    'Nikita', 'Nikki', 'Nikko', 'Niko', 'Nikolas', 'Nils', 'Nina', 'Noah',\n    'Noble', 'Noe', 'Noel', 'Noelia', 'Noemi', 'Noemie', 'Noemy', 'Nola',\n    'Nolan', 'Nona', 'Nora', 'Norbert', 'Norberto', 'Norene', 'Norma', 'Norris',\n    'Norval', 'Norwood', 'Nova', 'Novella', 'Nya', 'Nyah', 'Nyasia', 'Obie',\n    'Oceane', 'Ocie', 'Octavia', 'Oda', 'Odell', 'Odessa', 'Odie', 'Ofelia',\n    'Okey', 'Ola', 'Olaf', 'Ole', 'Olen', 'Oleta', 'Olga', 'Olin', 'Oliver',\n    'Ollie', 'Oma', 'Omari', 'Omer', 'Ona', 'Onie', 'Opal', 'Ophelia', 'Ora',\n    'Oral', 'Oran', 'Oren', 'Orie', 'Orin', 'Orion', 'Orland', 'Orlando',\n    'Orlo', 'Orpha', 'Orrin', 'Orval', 'Orville', 'Osbaldo', 'Osborne', 'Oscar',\n    'Osvaldo', 'Oswald', 'Oswaldo', 'Otha', 'Otho', 'Otilia', 'Otis', 'Ottilie',\n    'Ottis', 'Otto', 'Ova', 'Owen', 'Ozella', 'Pablo', 'Paige', 'Palma',\n    'Pamela', 'Pansy', 'Paolo', 'Paris', 'Parker', 'Pascale', 'Pasquale', 'Pat',\n    'Patience', 'Patricia', 'Patrick', 'Patsy', 'Pattie', 'Paul', 'Paula',\n    'Pauline', 'Paxton', 'Payton', 'Pearl', 'Pearlie', 'Pearline', 'Pedro',\n    'Peggie', 'Penelope', 'Percival', 'Percy', 'Perry', 'Pete', 'Peter',\n    'Petra', 'Peyton', 'Philip', 'Phoebe', 'Phyllis', 'Pierce', 'Pierre',\n    'Pietro', 'Pink', 'Pinkie', 'Piper', 'Polly', 'Porter', 'Precious',\n    'Presley', 'Preston', 'Price', 'Prince', 'Princess', 'Priscilla',\n    'Providenci', 'Prudence', 'Queen', 'Queenie', 'Quentin', 'Quincy', 'Quinn',\n    'Quinten', 'Quinton', 'Rachael', 'Rachel', 'Rachelle', 'Rae', 'Raegan',\n    'Rafael', 'Rafaela', 'Raheem', 'Rahsaan', 'Rahul', 'Raina', 'Raleigh',\n    'Ralph', 'Ramiro', 'Ramon', 'Ramona', 'Randal', 'Randall', 'Randi', 'Randy',\n    'Ransom', 'Raoul', 'Raphael', 'Raphaelle', 'Raquel', 'Rashad', 'Rashawn',\n    'Rasheed', 'Raul', 'Raven', 'Ray', 'Raymond', 'Raymundo', 'Reagan',\n    'Reanna', 'Reba', 'Rebeca', 'Rebecca', 'Rebeka', 'Rebekah', 'Reece', 'Reed',\n    'Reese', 'Regan', 'Reggie', 'Reginald', 'Reid', 'Reilly', 'Reina',\n    'Reinhold', 'Remington', 'Rene', 'Renee', 'Ressie', 'Reta', 'Retha',\n    'Retta', 'Reuben', 'Reva', 'Rex', 'Rey', 'Reyes', 'Reymundo', 'Reyna',\n    'Reynold', 'Rhea', 'Rhett', 'Rhianna', 'Rhiannon', 'Rhoda', 'Ricardo',\n    'Richard', 'Richie', 'Richmond', 'Rick', 'Rickey', 'Rickie', 'Ricky',\n    'Rico', 'Rigoberto', 'Riley', 'Rita', 'River', 'Robb', 'Robbie', 'Robert',\n    'Roberta', 'Roberto', 'Robin', 'Robyn', 'Rocio', 'Rocky', 'Rod', 'Roderick',\n    'Rodger', 'Rodolfo', 'Rodrick', 'Rodrigo', 'Roel', 'Rogelio', 'Roger',\n    'Rogers', 'Rolando', 'Rollin', 'Roma', 'Romaine', 'Roman', 'Ron', 'Ronaldo',\n    'Ronny', 'Roosevelt', 'Rory', 'Rosa', 'Rosalee', 'Rosalia', 'Rosalind',\n    'Rosalinda', 'Rosalyn', 'Rosamond', 'Rosanna', 'Rosario', 'Roscoe', 'Rose',\n    'Rosella', 'Roselyn', 'Rosemarie', 'Rosemary', 'Rosendo', 'Rosetta',\n    'Rosie', 'Rosina', 'Roslyn', 'Ross', 'Rossie', 'Rowan', 'Rowena', 'Rowland',\n    'Roxane', 'Roxanne', 'Roy', 'Royal', 'Royce', 'Rozella', 'Ruben', 'Rubie',\n    'Ruby', 'Rubye', 'Rudolph', 'Rudy', 'Rupert', 'Russ', 'Russel', 'Russell',\n    'Rusty', 'Ruth', 'Ruthe', 'Ruthie', 'Ryan', 'Ryann', 'Ryder', 'Rylan',\n    'Rylee', 'Ryleigh', 'Ryley', 'Sabina', 'Sabrina', 'Sabryna', 'Sadie',\n    'Sadye', 'Sage', 'Saige', 'Sallie', 'Sally', 'Salma', 'Salvador',\n    'Salvatore', 'Sam', 'Samanta', 'Samantha', 'Samara', 'Samir', 'Sammie',\n    'Sammy', 'Samson', 'Sandra', 'Sandrine', 'Sandy', 'Sanford', 'Santa',\n    'Santiago', 'Santina', 'Santino', 'Santos', 'Sarah', 'Sarai', 'Sarina',\n    'Sasha', 'Saul', 'Savanah', 'Savanna', 'Savannah', 'Savion', 'Scarlett',\n    'Schuyler', 'Scot', 'Scottie', 'Scotty', 'Seamus', 'Sean', 'Sebastian',\n    'Sedrick', 'Selena', 'Selina', 'Selmer', 'Serena', 'Serenity', 'Seth',\n    'Shad', 'Shaina', 'Shakira', 'Shana', 'Shane', 'Shanel', 'Shanelle',\n    'Shania', 'Shanie', 'Shaniya', 'Shanna', 'Shannon', 'Shanny', 'Shanon',\n    'Shany', 'Sharon', 'Shaun', 'Shawn', 'Shawna', 'Shaylee', 'Shayna',\n    'Shayne', 'Shea', 'Sheila', 'Sheldon', 'Shemar', 'Sheridan', 'Sherman',\n    'Sherwood', 'Shirley', 'Shyann', 'Shyanne', 'Sibyl', 'Sid', 'Sidney',\n    'Sienna', 'Sierra', 'Sigmund', 'Sigrid', 'Sigurd', 'Silas', 'Sim', 'Simeon',\n    'Simone', 'Sincere', 'Sister', 'Skye', 'Skyla', 'Skylar', 'Sofia',\n    'Soledad', 'Solon', 'Sonia', 'Sonny', 'Sonya', 'Sophia', 'Sophie',\n    'Spencer', 'Stacey', 'Stacy', 'Stan', 'Stanford', 'Stanley', 'Stanton',\n    'Stefan', 'Stefanie', 'Stella', 'Stephan', 'Stephania', 'Stephanie',\n    'Stephany', 'Stephen', 'Stephon', 'Sterling', 'Steve', 'Stevie', 'Stewart',\n    'Stone', 'Stuart', 'Summer', 'Sunny', 'Susan', 'Susana', 'Susanna', 'Susie',\n    'Suzanne', 'Sven', 'Syble', 'Sydnee', 'Sydney', 'Sydni', 'Sydnie', 'Sylvan',\n    'Sylvester', 'Sylvia', 'Tabitha', 'Tad', 'Talia', 'Talon', 'Tamara',\n    'Tamia', 'Tania', 'Tanner', 'Tanya', 'Tara', 'Taryn', 'Tate', 'Tatum',\n    'Tatyana', 'Taurean', 'Tavares', 'Taya', 'Taylor', 'Teagan', 'Ted', 'Telly',\n    'Terence', 'Teresa', 'Terrance', 'Terrell', 'Terrence', 'Terrill', 'Terry',\n    'Tess', 'Tessie', 'Tevin', 'Thad', 'Thaddeus', 'Thalia', 'Thea', 'Thelma',\n    'Theo', 'Theodora', 'Theodore', 'Theresa', 'Therese', 'Theresia', 'Theron',\n    'Thomas', 'Thora', 'Thurman', 'Tia', 'Tiana', 'Tianna', 'Tiara', 'Tierra',\n    'Tiffany', 'Tillman', 'Timmothy', 'Timmy', 'Timothy', 'Tina', 'Tito',\n    'Titus', 'Tobin', 'Toby', 'Tod', 'Tom', 'Tomas', 'Tomasa', 'Tommie',\n    'Toney', 'Toni', 'Tony', 'Torey', 'Torrance', 'Torrey', 'Toy', 'Trace',\n    'Tracey', 'Tracy', 'Travis', 'Travon', 'Tre', 'Tremaine', 'Tremayne',\n    'Trent', 'Trenton', 'Tressa', 'Tressie', 'Treva', 'Trever', 'Trevion',\n    'Trevor', 'Trey', 'Trinity', 'Trisha', 'Tristian', 'Tristin', 'Triston',\n    'Troy', 'Trudie', 'Trycia', 'Trystan', 'Turner', 'Twila', 'Tyler', 'Tyra',\n    'Tyree', 'Tyreek', 'Tyrel', 'Tyrell', 'Tyrese', 'Tyrique', 'Tyshawn',\n    'Tyson', 'Ubaldo', 'Ulices', 'Ulises', 'Una', 'Unique', 'Urban', 'Uriah',\n    'Uriel', 'Ursula', 'Vada', 'Valentin', 'Valentina', 'Valentine', 'Valerie',\n    'Vallie', 'Van', 'Vance', 'Vanessa', 'Vaughn', 'Veda', 'Velda', 'Vella',\n    'Velma', 'Velva', 'Vena', 'Verda', 'Verdie', 'Vergie', 'Verla', 'Verlie',\n    'Vern', 'Verna', 'Verner', 'Vernice', 'Vernie', 'Vernon', 'Verona',\n    'Veronica', 'Vesta', 'Vicenta', 'Vicente', 'Vickie', 'Vicky', 'Victor',\n    'Victoria', 'Vida', 'Vidal', 'Vilma', 'Vince', 'Vincent', 'Vincenza',\n    'Vincenzo', 'Vinnie', 'Viola', 'Violet', 'Violette', 'Virgie', 'Virgil',\n    'Virginia', 'Virginie', 'Vita', 'Vito', 'Viva', 'Vivian', 'Viviane',\n    'Vivianne', 'Vivien', 'Vivienne', 'Vladimir', 'Wade', 'Waino', 'Waldo',\n    'Walker', 'Wallace', 'Walter', 'Walton', 'Wanda', 'Ward', 'Warren',\n    'Watson', 'Wava', 'Waylon', 'Wayne', 'Webster', 'Weldon', 'Wellington',\n    'Wendell', 'Wendy', 'Werner', 'Westley', 'Weston', 'Whitney', 'Wilber',\n    'Wilbert', 'Wilburn', 'Wiley', 'Wilford', 'Wilfred', 'Wilfredo', 'Wilfrid',\n    'Wilhelm', 'Wilhelmine', 'Will', 'Willa', 'Willard', 'William', 'Willie',\n    'Willis', 'Willow', 'Willy', 'Wilma', 'Wilmer', 'Wilson', 'Wilton',\n    'Winfield', 'Winifred', 'Winnifred', 'Winona', 'Winston', 'Woodrow',\n    'Wyatt', 'Wyman', 'Xander', 'Xavier', 'Xzavier', 'Yadira', 'Yasmeen',\n    'Yasmin', 'Yasmine', 'Yazmin', 'Yesenia', 'Yessenia', 'Yolanda', 'Yoshiko',\n    'Yvette', 'Yvonne', 'Zachariah', 'Zachary', 'Zachery', 'Zack', 'Zackary',\n    'Zackery', 'Zakary', 'Zander', 'Zane', 'Zaria', 'Zechariah', 'Zelda',\n    'Zella', 'Zelma', 'Zena', 'Zetta', 'Zion', 'Zita', 'Zoe', 'Zoey', 'Zoie',\n    'Zoila', 'Zola', 'Zora', 'Zula'\n];\n\n/**\n * Generate random username.\n * @returns {string} random username\n */\nfunction generateUsername() {\n    const name = RandomUtil.randomElement(names);\n    const suffix = RandomUtil.randomAlphanumStr(3);\n\n    return `${name}-${suffix}`;\n}\n\nmodule.exports = {\n    generateUsername\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/UsernameGenerator.js","/* global callstats */\n\nimport browser from '../browser';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\n\n/**\n * We define enumeration of wrtcFuncNames as we need them before\n * callstats is initialized to queue events.\n * @const\n * @see http://www.callstats.io/api/#enumeration-of-wrtcfuncnames\n */\nconst wrtcFuncNames = {\n    createOffer: 'createOffer',\n    createAnswer: 'createAnswer',\n    setLocalDescription: 'setLocalDescription',\n    setRemoteDescription: 'setRemoteDescription',\n    addIceCandidate: 'addIceCandidate',\n    getUserMedia: 'getUserMedia',\n    iceConnectionFailure: 'iceConnectionFailure',\n    signalingError: 'signalingError',\n    applicationLog: 'applicationLog'\n};\n\n/**\n * We define enumeration of fabricEvent as we need them before\n * callstats is initialized to queue events.\n * @const\n * @see http://www.callstats.io/api/#enumeration-of-fabricevent\n */\nconst fabricEvent = {\n    fabricHold: 'fabricHold',\n    fabricResume: 'fabricResume',\n    audioMute: 'audioMute',\n    audioUnmute: 'audioUnmute',\n    videoPause: 'videoPause',\n    videoResume: 'videoResume',\n    fabricUsageEvent: 'fabricUsageEvent',\n    fabricStats: 'fabricStats',\n    fabricTerminated: 'fabricTerminated',\n    screenShareStart: 'screenShareStart',\n    screenShareStop: 'screenShareStop',\n    dominantSpeaker: 'dominantSpeaker',\n    activeDeviceList: 'activeDeviceList'\n};\n\n/**\n * The user id to report to callstats as destination.\n * @type {string}\n */\nconst DEFAULT_REMOTE_USER = 'jitsi';\n\n/**\n * Type of pending reports, can be event or an error.\n * @type {{ERROR: string, EVENT: string}}\n */\nconst reportType = {\n    ERROR: 'error',\n    EVENT: 'event',\n    MST_WITH_USERID: 'mstWithUserID'\n};\n\n/**\n * Set of currently existing {@link CallStats} instances.\n * @type {Set<CallStats>}\n */\nlet _fabrics;\n\n/**\n * An instance of this class is a wrapper for the CallStats API fabric. A fabric\n * reports one peer connection the the CallStats backend and is allocated with\n * {@link callstats.addNewFabric}. It has a bunch of instance methods for\n * reporting various events. A fabric is considered disposed when\n * {@link CallStats.sendTerminateEvent} is executed.\n *\n * Currently only one backend instance can be created ever and it's done using\n * {@link CallStats.initBackend}. At the time of this writing there is no way to\n * explicitly shutdown the backend, but it's supposed to close it's connection\n * automatically, after all fabrics have been terminated.\n */\nexport default class CallStats {\n    /**\n     * A callback passed to {@link callstats.addNewFabric}.\n     * @param {string} error 'success' means ok\n     * @param {string} msg some more details\n     * @private\n     */\n    static _addNewFabricCallback(error, msg) {\n        if (CallStats.backend && error !== 'success') {\n            logger.error(`Monitoring status: ${error} msg: ${msg}`);\n        }\n    }\n\n    /**\n     * Callback passed to {@link callstats.initialize} (backend initialization)\n     * @param {string} error 'success' means ok\n     * @param {String} msg\n     * @private\n     */\n    static _initCallback(error, msg) {\n        logger.log(`CallStats Status: err=${error} msg=${msg}`);\n\n        // there is no lib, nothing to report to\n        if (error !== 'success') {\n            return;\n        }\n\n        CallStats.backendInitialized = true;\n\n        // I hate that\n        let atLeastOneFabric = false;\n        let defaultInstance = null;\n\n        for (const callStatsInstance of CallStats.fabrics.values()) {\n            if (!callStatsInstance.hasFabric) {\n                logger.debug('addNewFabric - initCallback');\n                if (callStatsInstance._addNewFabric()) {\n                    atLeastOneFabric = true;\n                    if (!defaultInstance) {\n                        defaultInstance = callStatsInstance;\n                    }\n                }\n            }\n        }\n\n        if (!atLeastOneFabric) {\n            return;\n        }\n\n        CallStats._emptyReportQueue(defaultInstance);\n    }\n\n    /**\n     * Empties report queue.\n     *\n     * @param {CallStats} csInstance - The callstats instance.\n     * @private\n     */\n    static _emptyReportQueue(csInstance) {\n        // There is no conference ID nor a PeerConnection available when some of\n        // the events are scheduled on the reportsQueue, so those will be\n        // reported on the first initialized fabric.\n        const defaultConfID = csInstance.confID;\n        const defaultPC = csInstance.peerconnection;\n\n        // notify callstats about failures if there were any\n        for (const report of CallStats.reportsQueue) {\n            if (report.type === reportType.ERROR) {\n                const errorData = report.data;\n\n                CallStats._reportError(\n                    csInstance,\n                    errorData.type,\n                    errorData.error,\n                    errorData.pc || defaultPC);\n            } else if (report.type === reportType.EVENT) {\n                // if we have and event to report and we failed to add\n                // fabric this event will not be reported anyway, returning\n                // an error\n                const eventData = report.data;\n\n                CallStats.backend.sendFabricEvent(\n                    report.pc || defaultPC,\n                    eventData.event,\n                    defaultConfID,\n                    eventData.eventData);\n            } else if (report.type === reportType.MST_WITH_USERID) {\n                const data = report.data;\n\n                CallStats.backend.associateMstWithUserID(\n                    report.pc || defaultPC,\n                    data.callStatsId,\n                    defaultConfID,\n                    data.ssrc,\n                    data.usageLabel,\n                    data.containerId\n                );\n            }\n        }\n        CallStats.reportsQueue.length = 0;\n    }\n\n    /* eslint-disable max-params */\n    /**\n     * Reports an error to callstats.\n     *\n     * @param {CallStats} [cs]\n     * @param type the type of the error, which will be one of the wrtcFuncNames\n     * @param error the error\n     * @param pc the peerconnection\n     * @private\n     */\n    static _reportError(cs, type, error, pc) {\n        let _error = error;\n\n        if (!_error) {\n            logger.warn('No error is passed!');\n            _error = new Error('Unknown error');\n        }\n        if (CallStats.backendInitialized && cs) {\n            CallStats.backend.reportError(pc, cs.confID, type, _error);\n        } else {\n            CallStats.reportsQueue.push({\n                type: reportType.ERROR,\n                data: {\n                    error: _error,\n                    pc,\n                    type\n                }\n            });\n        }\n\n        // else just ignore it\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Reports an error to callstats.\n     *\n     * @param {CallStats} cs\n     * @param event the type of the event, which will be one of the fabricEvent\n     * @param eventData additional data to pass to event\n     * @private\n     */\n    static _reportEvent(cs, event, eventData) {\n        const pc = cs && cs.peerconnection;\n        const confID = cs && cs.confID;\n\n        if (CallStats.backendInitialized && cs) {\n            CallStats.backend.sendFabricEvent(pc, event, confID, eventData);\n        } else {\n            CallStats.reportsQueue.push({\n                confID,\n                pc,\n                type: reportType.EVENT,\n                data: { event,\n                    eventData }\n            });\n        }\n    }\n\n    /**\n     * Wraps some of the CallStats API method and logs their calls with\n     * arguments on the debug logging level. Also wraps some of the backend\n     * methods execution into try catch blocks to not crash the app in case\n     * there is a problem with the backend itself.\n     * @param {callstats} theBackend\n     * @private\n     */\n    static _traceAndCatchBackendCalls(theBackend) {\n        const tryCatchMethods = [\n            'associateMstWithUserID',\n            'sendFabricEvent',\n            'sendUserFeedback'\n\n            // 'reportError', - this one needs special handling - see code below\n        ];\n\n        for (const methodName of tryCatchMethods) {\n            const originalMethod = theBackend[methodName];\n\n            theBackend[methodName] = function(...theArguments) {\n                try {\n                    return originalMethod.apply(theBackend, theArguments);\n                } catch (e) {\n                    GlobalOnErrorHandler.callErrorHandler(e);\n                }\n            };\n        }\n        const debugMethods = [\n            'associateMstWithUserID',\n            'sendFabricEvent',\n            'sendUserFeedback'\n\n            // 'reportError', - this one needs special handling - see code below\n        ];\n\n        for (const methodName of debugMethods) {\n            const originalMethod = theBackend[methodName];\n\n            theBackend[methodName] = function(...theArguments) {\n                logger.debug(methodName, theArguments);\n                originalMethod.apply(theBackend, theArguments);\n            };\n        }\n        const originalReportError = theBackend.reportError;\n\n        /* eslint-disable max-params */\n        theBackend.reportError = function(pc, cs, type, ...args) {\n            // Logs from the logger are submitted on the applicationLog event\n            // \"type\". Logging the arguments on the logger will create endless\n            // loop, because it will put all the logs to the logger queue again.\n            if (type === wrtcFuncNames.applicationLog) {\n                // NOTE otherArguments are not logged to the console on purpose\n                // to not log the whole log batch\n                // FIXME check the current logging level (currently not exposed\n                // by the logger implementation)\n                // NOTE it is not safe to log whole objects on react-native as\n                // those contain too many circular references and may crash\n                // the app.\n                if (!browser.isReactNative()) {\n                    console && console.debug('reportError', pc, cs, type);\n                }\n            } else {\n                logger.debug('reportError', pc, cs, type, ...args);\n            }\n            try {\n                originalReportError.call(theBackend, pc, cs, type, ...args);\n            } catch (exception) {\n                if (type === wrtcFuncNames.applicationLog) {\n                    console && console.error('reportError', exception);\n                } else {\n                    GlobalOnErrorHandler.callErrorHandler(exception);\n                }\n            }\n        };\n\n        /* eslint-enable max-params */\n    }\n\n    /**\n     * Returns the Set with the currently existing {@link CallStats} instances.\n     * Lazily initializes the Set to allow any Set polyfills to be applied.\n     * @type {Set<CallStats>}\n     */\n    static get fabrics() {\n        if (!_fabrics) {\n            _fabrics = new Set();\n        }\n\n        return _fabrics;\n    }\n\n    /**\n     * Initializes the CallStats backend. Should be called only if\n     * {@link CallStats.isBackendInitialized} returns <tt>false</tt>.\n     * @param {object} options\n     * @param {String} options.callStatsID CallStats credentials - ID\n     * @param {String} options.callStatsSecret CallStats credentials - secret\n     * @param {string} options.aliasName the <tt>aliasName</tt> part of\n     * the <tt>userID</tt> aka endpoint ID, see CallStats docs for more info.\n     * @param {string} options.userName the <tt>userName</tt> part of\n     * the <tt>userID</tt> aka display name, see CallStats docs for more info.\n     *\n     */\n    static initBackend(options) {\n        if (CallStats.backend) {\n            throw new Error('CallStats backend has been initialized already!');\n        }\n        try {\n            // In react-native we need to import the callstats module, but\n            // imports are only allowed at top-level, so we must use require\n            // here. Sigh.\n            const CallStatsBackend\n                = browser.isReactNative()\n                    ? require('react-native-callstats/callstats')\n                    : callstats;\n\n            CallStats.backend = new CallStatsBackend();\n\n            CallStats._traceAndCatchBackendCalls(CallStats.backend);\n\n            CallStats.userID = {\n                aliasName: options.aliasName,\n                userName: options.userName\n            };\n            CallStats.callStatsID = options.callStatsID;\n            CallStats.callStatsSecret = options.callStatsSecret;\n\n            let configParams;\n\n            if (options.applicationName) {\n                configParams = {\n                    applicationVersion:\n                        `${options.applicationName} (${\n                            browser.getName()})`\n                };\n            }\n\n            // userID is generated or given by the origin server\n            CallStats.backend.initialize(\n                CallStats.callStatsID,\n                CallStats.callStatsSecret,\n                CallStats.userID,\n                CallStats._initCallback,\n                undefined,\n                configParams);\n\n            const getWiFiStatsMethod = options.getWiFiStatsMethod;\n\n            if (getWiFiStatsMethod) {\n                CallStats.backend.attachWifiStatsHandler(getWiFiStatsMethod);\n\n                getWiFiStatsMethod().then(result => {\n                    if (result) {\n                        logger.info('Reported wifi addresses:'\n                            , JSON.parse(result).addresses);\n                    }\n                })\n                .catch(() => {});// eslint-disable-line no-empty-function\n            }\n\n            return true;\n        } catch (e) {\n            // The callstats.io API failed to initialize (e.g. because its\n            // download did not succeed in general or on time). Further attempts\n            // to utilize it cannot possibly succeed.\n            GlobalOnErrorHandler.callErrorHandler(e);\n            CallStats.backend = null;\n            logger.error(e);\n\n            return false;\n        }\n    }\n\n    /**\n     * Checks if the CallStats backend has been created. It does not mean that\n     * it has been initialized, but only that the API instance has been\n     * allocated successfully.\n     * @return {boolean} <tt>true</tt> if backend exists or <tt>false</tt>\n     * otherwise\n     */\n    static isBackendInitialized() {\n        return Boolean(CallStats.backend);\n    }\n\n    /**\n     * Notifies CallStats about active device.\n     * @param {{deviceList: {String:String}}} devicesData list of devices with\n     * their data\n     * @param {CallStats} cs callstats instance related to the event\n     */\n    static sendActiveDeviceListEvent(devicesData, cs) {\n        CallStats._reportEvent(cs, fabricEvent.activeDeviceList, devicesData);\n    }\n\n    /**\n     * Notifies CallStats that there is a log we want to report.\n     *\n     * @param {Error} e error to send or {String} message\n     * @param {CallStats} cs callstats instance related to the error (optional)\n     */\n    static sendApplicationLog(e, cs) {\n        try {\n            CallStats._reportError(\n                cs,\n                wrtcFuncNames.applicationLog,\n                e,\n                cs && cs.peerconnection);\n        } catch (error) {\n            // If sendApplicationLog fails it should not be printed to\n            // the logger, because it will try to push the logs again\n            // (through sendApplicationLog) and an endless loop is created.\n            if (console && (typeof console.error === 'function')) {\n                // FIXME send analytics event as well\n                console.error('sendApplicationLog failed', error);\n            }\n        }\n    }\n\n    /**\n     * Sends the given feedback through CallStats.\n     *\n     * @param {string} conferenceID the conference ID for which the feedback\n     * will be reported.\n     * @param overall an integer between 1 and 5 indicating the\n     * user feedback\n     * @param comment detailed feedback from the user.\n     */\n    static sendFeedback(conferenceID, overall, comment) {\n        if (CallStats.backend) {\n            CallStats.backend.sendUserFeedback(\n                conferenceID, {\n                    userID: CallStats.userID,\n                    overall,\n                    comment\n                });\n        } else {\n            logger.error('Failed to submit feedback to CallStats - no backend');\n        }\n    }\n\n    /**\n     * Notifies CallStats that getUserMedia failed.\n     *\n     * @param {Error} e error to send\n     * @param {CallStats} cs callstats instance related to the error (optional)\n     */\n    static sendGetUserMediaFailed(e, cs) {\n        CallStats._reportError(cs, wrtcFuncNames.getUserMedia, e, null);\n    }\n\n    /**\n     * Notifies CallStats for mute events\n     * @param mute {boolean} true for muted and false for not muted\n     * @param type {String} \"audio\"/\"video\"\n     * @param {CallStats} cs callstats instance related to the event\n     */\n    static sendMuteEvent(mute, type, cs) {\n        let event;\n\n        if (type === 'video') {\n            event = mute ? fabricEvent.videoPause : fabricEvent.videoResume;\n        } else {\n            event = mute ? fabricEvent.audioMute : fabricEvent.audioUnmute;\n        }\n\n        CallStats._reportEvent(cs, event);\n    }\n\n    /**\n     * Creates new CallStats instance that handles all callstats API calls for\n     * given {@link TraceablePeerConnection}. Each instance is meant to handle\n     * one CallStats fabric added with 'addFabric' API method for the\n     * {@link TraceablePeerConnection} instance passed in the constructor.\n     * @param {TraceablePeerConnection} tpc\n     * @param {Object} options\n     * @param {string} options.confID the conference ID that wil be used to\n     * report the session.\n     * @param {string} [options.remoteUserID='jitsi'] the remote user ID to\n     * which given <tt>tpc</tt> is connected.\n     */\n    constructor(tpc, options) {\n        this.confID = options.confID;\n        this.tpc = tpc;\n        this.peerconnection = tpc.peerconnection;\n        this.remoteUserID = options.remoteUserID || DEFAULT_REMOTE_USER;\n        this.hasFabric = false;\n\n        CallStats.fabrics.add(this);\n\n        if (CallStats.backendInitialized) {\n            this._addNewFabric();\n\n            // if this is the first fabric let's try to empty the\n            // report queue. Reports all events that we recorded between\n            // backend initialization and receiving the first fabric\n            if (CallStats.fabrics.size === 1) {\n                CallStats._emptyReportQueue(this);\n            }\n        }\n    }\n\n    /**\n     * Initializes CallStats fabric by calling \"addNewFabric\" for\n     * the peer connection associated with this instance.\n     * @return {boolean} true if the call was successful or false otherwise.\n     */\n    _addNewFabric() {\n        logger.info('addNewFabric', this.remoteUserID);\n        try {\n            const fabricAttributes = {\n                remoteEndpointType:\n                    this.tpc.isP2P\n                        ? CallStats.backend.endpointType.peer\n                        : CallStats.backend.endpointType.server\n            };\n            const ret\n                = CallStats.backend.addNewFabric(\n                    this.peerconnection,\n                    this.remoteUserID,\n                    CallStats.backend.fabricUsage.multiplex,\n                    this.confID,\n                    fabricAttributes,\n                    CallStats._addNewFabricCallback);\n\n            this.hasFabric = true;\n\n            const success = ret.status === 'success';\n\n            if (!success) {\n                logger.error('callstats fabric not initilized', ret.message);\n            }\n\n            return success;\n\n        } catch (error) {\n            GlobalOnErrorHandler.callErrorHandler(error);\n\n            return false;\n        }\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     * Lets CallStats module know where is given SSRC rendered by providing\n     * renderer tag ID.\n     * If the lib is not initialized yet queue the call for later, when it's\n     * ready.\n     * @param {number} ssrc the SSRC of the stream\n     * @param {boolean} isLocal indicates whether this the stream is local\n     * @param {string|null} streamEndpointId if the stream is not local the it\n     * needs to contain the stream owner's ID\n     * @param {string} usageLabel meaningful usage label of this stream like\n     *        'microphone', 'camera' or 'screen'.\n     * @param {string} containerId  the id of media 'audio' or 'video' tag which\n     *        renders the stream.\n     */\n    associateStreamWithVideoTag(\n            ssrc,\n            isLocal,\n            streamEndpointId,\n            usageLabel,\n            containerId) {\n        if (!CallStats.backend) {\n            return;\n        }\n\n        const callStatsId = isLocal ? CallStats.userID : streamEndpointId;\n\n        if (CallStats.backendInitialized) {\n            CallStats.backend.associateMstWithUserID(\n                this.peerconnection,\n                callStatsId,\n                this.confID,\n                ssrc,\n                usageLabel,\n                containerId);\n        } else {\n            CallStats.reportsQueue.push({\n                type: reportType.MST_WITH_USERID,\n                pc: this.peerconnection,\n                data: {\n                    callStatsId,\n                    containerId,\n                    ssrc,\n                    usageLabel\n                }\n            });\n        }\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Notifies CallStats that we are the new dominant speaker in the\n     * conference.\n     */\n    sendDominantSpeakerEvent() {\n        CallStats._reportEvent(this, fabricEvent.dominantSpeaker);\n    }\n\n    /**\n     * Notifies CallStats that the fabric for the underlying peerconnection was\n     * closed and no evens should be reported, after this call.\n     */\n    sendTerminateEvent() {\n        if (CallStats.backendInitialized) {\n            CallStats.backend.sendFabricEvent(\n                this.peerconnection,\n                CallStats.backend.fabricEvent.fabricTerminated,\n                this.confID);\n        }\n        CallStats.fabrics.delete(this);\n    }\n\n    /**\n     * Notifies CallStats for ice connection failed\n     */\n    sendIceConnectionFailedEvent() {\n        CallStats._reportError(\n            this,\n            wrtcFuncNames.iceConnectionFailure,\n            null,\n            this.peerconnection);\n    }\n\n    /**\n     * Notifies CallStats that peer connection failed to create offer.\n     *\n     * @param {Error} e error to send\n     */\n    sendCreateOfferFailed(e) {\n        CallStats._reportError(\n            this, wrtcFuncNames.createOffer, e, this.peerconnection);\n    }\n\n    /**\n     * Notifies CallStats that peer connection failed to create answer.\n     *\n     * @param {Error} e error to send\n     */\n    sendCreateAnswerFailed(e) {\n        CallStats._reportError(\n            this, wrtcFuncNames.createAnswer, e, this.peerconnection);\n    }\n\n    /**\n     * Sends either resume or hold event for the fabric associated with\n     * the underlying peerconnection.\n     * @param {boolean} isResume true to resume or false to hold\n     */\n    sendResumeOrHoldEvent(isResume) {\n        CallStats._reportEvent(\n            this,\n            isResume ? fabricEvent.fabricResume : fabricEvent.fabricHold);\n    }\n\n    /**\n     * Notifies CallStats for screen sharing events\n     * @param {boolean} start true for starting screen sharing and\n     * false for not stopping\n     * @param {string|null} ssrc - optional ssrc value, used only when\n     * starting screen sharing.\n     */\n    sendScreenSharingEvent(start, ssrc) {\n        let eventData;\n\n        if (ssrc) {\n            eventData = { ssrc };\n        }\n\n        CallStats._reportEvent(\n            this,\n            start ? fabricEvent.screenShareStart : fabricEvent.screenShareStop,\n            eventData);\n    }\n\n    /**\n     * Notifies CallStats that peer connection failed to set local description.\n     *\n     * @param {Error} e error to send\n     */\n    sendSetLocalDescFailed(e) {\n        CallStats._reportError(\n            this, wrtcFuncNames.setLocalDescription, e, this.peerconnection);\n    }\n\n    /**\n     * Notifies CallStats that peer connection failed to set remote description.\n     *\n     * @param {Error} e error to send\n     */\n    sendSetRemoteDescFailed(e) {\n        CallStats._reportError(\n            this, wrtcFuncNames.setRemoteDescription, e, this.peerconnection);\n    }\n\n    /**\n     * Notifies CallStats that peer connection failed to add ICE candidate.\n     *\n     * @param {Error} e error to send\n     */\n    sendAddIceCandidateFailed(e) {\n        CallStats._reportError(\n            this, wrtcFuncNames.addIceCandidate, e, this.peerconnection);\n    }\n}\n\n/**\n * The CallStats API backend instance\n * @type {callstats}\n */\nCallStats.backend = null;\n\n// some errors/events may happen before CallStats init\n// in this case we accumulate them in this array\n// and send them to callstats on init\nCallStats.reportsQueue = [];\n\n/**\n * Whether the library was successfully initialized(the backend) using its\n * initialize method.\n * @type {boolean}\n */\nCallStats.backendInitialized = false;\n\n/**\n * Part of the CallStats credentials - application ID\n * @type {string}\n */\nCallStats.callStatsID = null;\n\n/**\n * Part of the CallStats credentials - application secret\n * @type {string}\n */\nCallStats.callStatsSecret = null;\n\n/**\n * Local CallStats user ID structure. Can be set only once when\n * {@link backend} is initialized, so it's static for the time being.\n * See CallStats API for more info:\n * https://www.callstats.io/api/#userid\n * @type {object}\n */\nCallStats.userID = null;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/CallStats.js","/*! callstats  version = 3.53.4 2018-09-06 01-38-32 */\n\n!function() {\n    function a(b, c, d) {\n        function e(g, h) {\n            if (!c[g]) {\n                if (!b[g]) {\n                    var i = \"function\" == typeof require && require;\n                    if (!h && i) return i(g, !0);\n                    if (f) return f(g, !0);\n                    var j = new Error(\"Cannot find module '\" + g + \"'\");\n                    throw j.code = \"MODULE_NOT_FOUND\", j;\n                }\n                var k = c[g] = {\n                    exports: {}\n                };\n                b[g][0].call(k.exports, function(a) {\n                    return e(b[g][1][a] || a);\n                }, k, k.exports, a, b, c, d);\n            }\n            return c[g].exports;\n        }\n        for (var f = \"function\" == typeof require && require, g = 0; g < d.length; g++) e(d[g]);\n        return e;\n    }\n    return a;\n}()({\n    1: [ function(a, b, c) {\n        (function(a, d, e) {\n            !function(a) {\n                if (\"object\" == typeof c && void 0 !== b) b.exports = a(); else if (\"function\" == typeof define && define.amd) define([], a); else {\n                    var e;\n                    \"undefined\" != typeof window ? e = window : void 0 !== d ? e = d : \"undefined\" != typeof self && (e = self),\n                    e.Promise = a();\n                }\n            }(function() {\n                var b, c, f;\n                return function a(b, c, d) {\n                    function e(g, h) {\n                        if (!c[g]) {\n                            if (!b[g]) {\n                                var i = \"function\" == typeof _dereq_ && _dereq_;\n                                if (!h && i) return i(g, !0);\n                                if (f) return f(g, !0);\n                                var j = new Error(\"Cannot find module '\" + g + \"'\");\n                                throw j.code = \"MODULE_NOT_FOUND\", j;\n                            }\n                            var k = c[g] = {\n                                exports: {}\n                            };\n                            b[g][0].call(k.exports, function(a) {\n                                var c = b[g][1][a];\n                                return e(c || a);\n                            }, k, k.exports, a, b, c, d);\n                        }\n                        return c[g].exports;\n                    }\n                    for (var f = \"function\" == typeof _dereq_ && _dereq_, g = 0; g < d.length; g++) e(d[g]);\n                    return e;\n                }({\n                    1: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(a) {\n                            function b(a) {\n                                var b = new c(a), d = b.promise();\n                                return b.setHowMany(1), b.setUnwrap(), b.init(), d;\n                            }\n                            var c = a._SomePromiseArray;\n                            a.any = function(a) {\n                                return b(a);\n                            }, a.prototype.any = function() {\n                                return b(this);\n                            };\n                        };\n                    }, {} ],\n                    2: [ function(b, c, d) {\n                        \"use strict\";\n                        function e() {\n                            this._customScheduler = !1, this._isTickUsed = !1, this._lateQueue = new k(16),\n                            this._normalQueue = new k(16), this._haveDrainedQueues = !1, this._trampolineEnabled = !0;\n                            var a = this;\n                            this.drainQueues = function() {\n                                a._drainQueues();\n                            }, this._schedule = j;\n                        }\n                        function f(a, b, c) {\n                            this._lateQueue.push(a, b, c), this._queueTick();\n                        }\n                        function g(a, b, c) {\n                            this._normalQueue.push(a, b, c), this._queueTick();\n                        }\n                        function h(a) {\n                            this._normalQueue._pushOne(a), this._queueTick();\n                        }\n                        var i;\n                        try {\n                            throw new Error();\n                        } catch (a) {\n                            i = a;\n                        }\n                        var j = b(\"./schedule\"), k = b(\"./queue\"), l = b(\"./util\");\n                        e.prototype.setScheduler = function(a) {\n                            var b = this._schedule;\n                            return this._schedule = a, this._customScheduler = !0, b;\n                        }, e.prototype.hasCustomScheduler = function() {\n                            return this._customScheduler;\n                        }, e.prototype.enableTrampoline = function() {\n                            this._trampolineEnabled = !0;\n                        }, e.prototype.disableTrampolineIfNecessary = function() {\n                            l.hasDevTools && (this._trampolineEnabled = !1);\n                        }, e.prototype.haveItemsQueued = function() {\n                            return this._isTickUsed || this._haveDrainedQueues;\n                        }, e.prototype.fatalError = function(b, c) {\n                            c ? (a.stderr.write(\"Fatal \" + (b instanceof Error ? b.stack : b) + \"\\n\"), a.exit(2)) : this.throwLater(b);\n                        }, e.prototype.throwLater = function(a, b) {\n                            if (1 === arguments.length && (b = a, a = function() {\n                                throw b;\n                            }), \"undefined\" != typeof setTimeout) setTimeout(function() {\n                                a(b);\n                            }, 0); else try {\n                                this._schedule(function() {\n                                    a(b);\n                                });\n                            } catch (a) {\n                                throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                            }\n                        }, l.hasDevTools ? (e.prototype.invokeLater = function(a, b, c) {\n                            this._trampolineEnabled ? f.call(this, a, b, c) : this._schedule(function() {\n                                setTimeout(function() {\n                                    a.call(b, c);\n                                }, 100);\n                            });\n                        }, e.prototype.invoke = function(a, b, c) {\n                            this._trampolineEnabled ? g.call(this, a, b, c) : this._schedule(function() {\n                                a.call(b, c);\n                            });\n                        }, e.prototype.settlePromises = function(a) {\n                            this._trampolineEnabled ? h.call(this, a) : this._schedule(function() {\n                                a._settlePromises();\n                            });\n                        }) : (e.prototype.invokeLater = f, e.prototype.invoke = g, e.prototype.settlePromises = h),\n                        e.prototype._drainQueue = function(a) {\n                            for (;a.length() > 0; ) {\n                                var b = a.shift();\n                                if (\"function\" == typeof b) {\n                                    var c = a.shift(), d = a.shift();\n                                    b.call(c, d);\n                                } else b._settlePromises();\n                            }\n                        }, e.prototype._drainQueues = function() {\n                            this._drainQueue(this._normalQueue), this._reset(), this._haveDrainedQueues = !0,\n                            this._drainQueue(this._lateQueue);\n                        }, e.prototype._queueTick = function() {\n                            this._isTickUsed || (this._isTickUsed = !0, this._schedule(this.drainQueues));\n                        }, e.prototype._reset = function() {\n                            this._isTickUsed = !1;\n                        }, c.exports = e, c.exports.firstLineError = i;\n                    }, {\n                        \"./queue\": 26,\n                        \"./schedule\": 29,\n                        \"./util\": 36\n                    } ],\n                    3: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(a, b, c, d) {\n                            var e = !1, f = function(a, b) {\n                                this._reject(b);\n                            }, g = function(a, b) {\n                                b.promiseRejectionQueued = !0, b.bindingPromise._then(f, f, null, this, a);\n                            }, h = function(a, b) {\n                                0 == (50397184 & this._bitField) && this._resolveCallback(b.target);\n                            }, i = function(a, b) {\n                                b.promiseRejectionQueued || this._reject(a);\n                            };\n                            a.prototype.bind = function(f) {\n                                e || (e = !0, a.prototype._propagateFrom = d.propagateFromFunction(), a.prototype._boundValue = d.boundValueFunction());\n                                var j = c(f), k = new a(b);\n                                k._propagateFrom(this, 1);\n                                var l = this._target();\n                                if (k._setBoundTo(j), j instanceof a) {\n                                    var m = {\n                                        promiseRejectionQueued: !1,\n                                        promise: k,\n                                        target: l,\n                                        bindingPromise: j\n                                    };\n                                    l._then(b, g, void 0, k, m), j._then(h, i, void 0, k, m), k._setOnCancel(j);\n                                } else k._resolveCallback(l);\n                                return k;\n                            }, a.prototype._setBoundTo = function(a) {\n                                void 0 !== a ? (this._bitField = 2097152 | this._bitField, this._boundTo = a) : this._bitField = -2097153 & this._bitField;\n                            }, a.prototype._isBound = function() {\n                                return 2097152 == (2097152 & this._bitField);\n                            }, a.bind = function(b, c) {\n                                return a.resolve(c).bind(b);\n                            };\n                        };\n                    }, {} ],\n                    4: [ function(a, b, c) {\n                        \"use strict\";\n                        function d() {\n                            try {\n                                Promise === f && (Promise = e);\n                            } catch (a) {}\n                            return f;\n                        }\n                        var e;\n                        \"undefined\" != typeof Promise && (e = Promise);\n                        var f = a(\"./promise\")();\n                        f.noConflict = d, b.exports = f;\n                    }, {\n                        \"./promise\": 22\n                    } ],\n                    5: [ function(a, b, c) {\n                        \"use strict\";\n                        var d = Object.create;\n                        if (d) {\n                            var e = d(null), f = d(null);\n                            e[\" size\"] = f[\" size\"] = 0;\n                        }\n                        b.exports = function(b) {\n                            function c(a, c) {\n                                var d;\n                                if (null != a && (d = a[c]), \"function\" != typeof d) {\n                                    var e = \"Object \" + h.classString(a) + \" has no method '\" + h.toString(c) + \"'\";\n                                    throw new b.TypeError(e);\n                                }\n                                return d;\n                            }\n                            function d(a) {\n                                return c(a, this.pop()).apply(a, this);\n                            }\n                            function e(a) {\n                                return a[this];\n                            }\n                            function f(a) {\n                                var b = +this;\n                                return b < 0 && (b = Math.max(0, b + a.length)), a[b];\n                            }\n                            var g, h = a(\"./util\"), i = h.canEvaluate;\n                            h.isIdentifier;\n                            b.prototype.call = function(a) {\n                                var b = [].slice.call(arguments, 1);\n                                return b.push(a), this._then(d, void 0, void 0, b, void 0);\n                            }, b.prototype.get = function(a) {\n                                var b, c = \"number\" == typeof a;\n                                if (c) b = f; else if (i) {\n                                    var d = g(a);\n                                    b = null !== d ? d : e;\n                                } else b = e;\n                                return this._then(b, void 0, void 0, a, void 0);\n                            };\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    6: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d, e) {\n                            var f = a(\"./util\"), g = f.tryCatch, h = f.errorObj, i = b._async;\n                            b.prototype.break = b.prototype.cancel = function() {\n                                if (!e.cancellation()) return this._warn(\"cancellation is disabled\");\n                                for (var a = this, b = a; a._isCancellable(); ) {\n                                    if (!a._cancelBy(b)) {\n                                        b._isFollowing() ? b._followee().cancel() : b._cancelBranched();\n                                        break;\n                                    }\n                                    var c = a._cancellationParent;\n                                    if (null == c || !c._isCancellable()) {\n                                        a._isFollowing() ? a._followee().cancel() : a._cancelBranched();\n                                        break;\n                                    }\n                                    a._isFollowing() && a._followee().cancel(), a._setWillBeCancelled(), b = a, a = c;\n                                }\n                            }, b.prototype._branchHasCancelled = function() {\n                                this._branchesRemainingToCancel--;\n                            }, b.prototype._enoughBranchesHaveCancelled = function() {\n                                return void 0 === this._branchesRemainingToCancel || this._branchesRemainingToCancel <= 0;\n                            }, b.prototype._cancelBy = function(a) {\n                                return a === this ? (this._branchesRemainingToCancel = 0, this._invokeOnCancel(),\n                                !0) : (this._branchHasCancelled(), !!this._enoughBranchesHaveCancelled() && (this._invokeOnCancel(),\n                                !0));\n                            }, b.prototype._cancelBranched = function() {\n                                this._enoughBranchesHaveCancelled() && this._cancel();\n                            }, b.prototype._cancel = function() {\n                                this._isCancellable() && (this._setCancelled(), i.invoke(this._cancelPromises, this, void 0));\n                            }, b.prototype._cancelPromises = function() {\n                                this._length() > 0 && this._settlePromises();\n                            }, b.prototype._unsetOnCancel = function() {\n                                this._onCancelField = void 0;\n                            }, b.prototype._isCancellable = function() {\n                                return this.isPending() && !this._isCancelled();\n                            }, b.prototype.isCancellable = function() {\n                                return this.isPending() && !this.isCancelled();\n                            }, b.prototype._doInvokeOnCancel = function(a, b) {\n                                if (f.isArray(a)) for (var c = 0; c < a.length; ++c) this._doInvokeOnCancel(a[c], b); else if (void 0 !== a) if (\"function\" == typeof a) {\n                                    if (!b) {\n                                        var d = g(a).call(this._boundValue());\n                                        d === h && (this._attachExtraTrace(d.e), i.throwLater(d.e));\n                                    }\n                                } else a._resultCancelled(this);\n                            }, b.prototype._invokeOnCancel = function() {\n                                var a = this._onCancel();\n                                this._unsetOnCancel(), i.invoke(this._doInvokeOnCancel, this, a);\n                            }, b.prototype._invokeInternalOnCancel = function() {\n                                this._isCancellable() && (this._doInvokeOnCancel(this._onCancel(), !0), this._unsetOnCancel());\n                            }, b.prototype._resultCancelled = function() {\n                                this.cancel();\n                            };\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    7: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b) {\n                            function c(a, c, h) {\n                                return function(i) {\n                                    var j = h._boundValue();\n                                    a: for (var k = 0; k < a.length; ++k) {\n                                        var l = a[k];\n                                        if (l === Error || null != l && l.prototype instanceof Error) {\n                                            if (i instanceof l) return f(c).call(j, i);\n                                        } else if (\"function\" == typeof l) {\n                                            var m = f(l).call(j, i);\n                                            if (m === g) return m;\n                                            if (m) return f(c).call(j, i);\n                                        } else if (d.isObject(i)) {\n                                            for (var n = e(l), o = 0; o < n.length; ++o) {\n                                                var p = n[o];\n                                                if (l[p] != i[p]) continue a;\n                                            }\n                                            return f(c).call(j, i);\n                                        }\n                                    }\n                                    return b;\n                                };\n                            }\n                            var d = a(\"./util\"), e = a(\"./es5\").keys, f = d.tryCatch, g = d.errorObj;\n                            return c;\n                        };\n                    }, {\n                        \"./es5\": 13,\n                        \"./util\": 36\n                    } ],\n                    8: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(a) {\n                            function b() {\n                                this._trace = new b.CapturedTrace(d());\n                            }\n                            function c() {\n                                if (e) return new b();\n                            }\n                            function d() {\n                                var a = f.length - 1;\n                                if (a >= 0) return f[a];\n                            }\n                            var e = !1, f = [];\n                            return a.prototype._promiseCreated = function() {}, a.prototype._pushContext = function() {},\n                            a.prototype._popContext = function() {\n                                return null;\n                            }, a._peekContext = a.prototype._peekContext = function() {}, b.prototype._pushContext = function() {\n                                void 0 !== this._trace && (this._trace._promiseCreated = null, f.push(this._trace));\n                            }, b.prototype._popContext = function() {\n                                if (void 0 !== this._trace) {\n                                    var a = f.pop(), b = a._promiseCreated;\n                                    return a._promiseCreated = null, b;\n                                }\n                                return null;\n                            }, b.CapturedTrace = null, b.create = c, b.deactivateLongStackTraces = function() {},\n                            b.activateLongStackTraces = function() {\n                                var c = a.prototype._pushContext, f = a.prototype._popContext, g = a._peekContext, h = a.prototype._peekContext, i = a.prototype._promiseCreated;\n                                b.deactivateLongStackTraces = function() {\n                                    a.prototype._pushContext = c, a.prototype._popContext = f, a._peekContext = g, a.prototype._peekContext = h,\n                                    a.prototype._promiseCreated = i, e = !1;\n                                }, e = !0, a.prototype._pushContext = b.prototype._pushContext, a.prototype._popContext = b.prototype._popContext,\n                                a._peekContext = a.prototype._peekContext = d, a.prototype._promiseCreated = function() {\n                                    var a = this._peekContext();\n                                    a && null == a._promiseCreated && (a._promiseCreated = this);\n                                };\n                            }, b;\n                        };\n                    }, {} ],\n                    9: [ function(b, c, d) {\n                        \"use strict\";\n                        c.exports = function(c, d) {\n                            function e(a, b) {\n                                return {\n                                    promise: b\n                                };\n                            }\n                            function f() {\n                                return !1;\n                            }\n                            function g(a, b, c) {\n                                var d = this;\n                                try {\n                                    a(b, c, function(a) {\n                                        if (\"function\" != typeof a) throw new TypeError(\"onCancel must be a function, got: \" + N.toString(a));\n                                        d._attachCancellationCallback(a);\n                                    });\n                                } catch (a) {\n                                    return a;\n                                }\n                            }\n                            function h(a) {\n                                if (!this._isCancellable()) return this;\n                                var b = this._onCancel();\n                                void 0 !== b ? N.isArray(b) ? b.push(a) : this._setOnCancel([ b, a ]) : this._setOnCancel(a);\n                            }\n                            function i() {\n                                return this._onCancelField;\n                            }\n                            function j(a) {\n                                this._onCancelField = a;\n                            }\n                            function k() {\n                                this._cancellationParent = void 0, this._onCancelField = void 0;\n                            }\n                            function l(a, b) {\n                                if (0 != (1 & b)) {\n                                    this._cancellationParent = a;\n                                    var c = a._branchesRemainingToCancel;\n                                    void 0 === c && (c = 0), a._branchesRemainingToCancel = c + 1;\n                                }\n                                0 != (2 & b) && a._isBound() && this._setBoundTo(a._boundTo);\n                            }\n                            function m(a, b) {\n                                0 != (2 & b) && a._isBound() && this._setBoundTo(a._boundTo);\n                            }\n                            function n() {\n                                var a = this._boundTo;\n                                return void 0 !== a && a instanceof c ? a.isFulfilled() ? a.value() : void 0 : a;\n                            }\n                            function o() {\n                                this._trace = new G(this._peekContext());\n                            }\n                            function p(a, b) {\n                                if (O(a)) {\n                                    var c = this._trace;\n                                    if (void 0 !== c && b && (c = c._parent), void 0 !== c) c.attachExtraTrace(a); else if (!a.__stackCleaned__) {\n                                        var d = y(a);\n                                        N.notEnumerableProp(a, \"stack\", d.message + \"\\n\" + d.stack.join(\"\\n\")), N.notEnumerableProp(a, \"__stackCleaned__\", !0);\n                                    }\n                                }\n                            }\n                            function q(a, b, c, d, e) {\n                                if (void 0 === a && null !== b && Y) {\n                                    if (void 0 !== e && e._returnedNonUndefined()) return;\n                                    if (0 == (65535 & d._bitField)) return;\n                                    c && (c += \" \");\n                                    var f = \"\", g = \"\";\n                                    if (b._trace) {\n                                        for (var h = b._trace.stack.split(\"\\n\"), i = w(h), j = i.length - 1; j >= 0; --j) {\n                                            var k = i[j];\n                                            if (!Q.test(k)) {\n                                                var l = k.match(R);\n                                                l && (f = \"at \" + l[1] + \":\" + l[2] + \":\" + l[3] + \" \");\n                                                break;\n                                            }\n                                        }\n                                        if (i.length > 0) for (var m = i[0], j = 0; j < h.length; ++j) if (h[j] === m) {\n                                            j > 0 && (g = \"\\n\" + h[j - 1]);\n                                            break;\n                                        }\n                                    }\n                                    var n = \"a promise was created in a \" + c + \"handler \" + f + \"but was not returned from it, see http://goo.gl/rRqMUw\" + g;\n                                    d._warn(n, !0, b);\n                                }\n                            }\n                            function r(a, b) {\n                                var c = a + \" is deprecated and will be removed in a future version.\";\n                                return b && (c += \" Use \" + b + \" instead.\"), s(c);\n                            }\n                            function s(a, b, d) {\n                                if (ga.warnings) {\n                                    var e, f = new M(a);\n                                    if (b) d._attachExtraTrace(f); else if (ga.longStackTraces && (e = c._peekContext())) e.attachExtraTrace(f); else {\n                                        var g = y(f);\n                                        f.stack = g.message + \"\\n\" + g.stack.join(\"\\n\");\n                                    }\n                                    ba(\"warning\", f) || z(f, \"\", !0);\n                                }\n                            }\n                            function t(a, b) {\n                                for (var c = 0; c < b.length - 1; ++c) b[c].push(\"From previous event:\"), b[c] = b[c].join(\"\\n\");\n                                return c < b.length && (b[c] = b[c].join(\"\\n\")), a + \"\\n\" + b.join(\"\\n\");\n                            }\n                            function u(a) {\n                                for (var b = 0; b < a.length; ++b) (0 === a[b].length || b + 1 < a.length && a[b][0] === a[b + 1][0]) && (a.splice(b, 1),\n                                b--);\n                            }\n                            function v(a) {\n                                for (var b = a[0], c = 1; c < a.length; ++c) {\n                                    for (var d = a[c], e = b.length - 1, f = b[e], g = -1, h = d.length - 1; h >= 0; --h) if (d[h] === f) {\n                                        g = h;\n                                        break;\n                                    }\n                                    for (var h = g; h >= 0; --h) {\n                                        var i = d[h];\n                                        if (b[e] !== i) break;\n                                        b.pop(), e--;\n                                    }\n                                    b = d;\n                                }\n                            }\n                            function w(a) {\n                                for (var b = [], c = 0; c < a.length; ++c) {\n                                    var d = a[c], e = \"    (No stack trace)\" === d || S.test(d), f = e && da(d);\n                                    e && !f && (U && \" \" !== d.charAt(0) && (d = \"    \" + d), b.push(d));\n                                }\n                                return b;\n                            }\n                            function x(a) {\n                                for (var b = a.stack.replace(/\\s+$/g, \"\").split(\"\\n\"), c = 0; c < b.length; ++c) {\n                                    var d = b[c];\n                                    if (\"    (No stack trace)\" === d || S.test(d)) break;\n                                }\n                                return c > 0 && \"SyntaxError\" != a.name && (b = b.slice(c)), b;\n                            }\n                            function y(a) {\n                                var b = a.stack, c = a.toString();\n                                return b = \"string\" == typeof b && b.length > 0 ? x(a) : [ \"    (No stack trace)\" ],\n                                {\n                                    message: c,\n                                    stack: \"SyntaxError\" == a.name ? b : w(b)\n                                };\n                            }\n                            function z(a, b, c) {\n                                if (\"undefined\" != typeof console) {\n                                    var d;\n                                    if (N.isObject(a)) {\n                                        var e = a.stack;\n                                        d = b + T(e, a);\n                                    } else d = b + String(a);\n                                    \"function\" == typeof J ? J(d, c) : \"function\" != typeof console.log && \"object\" != typeof console.log || console.log(d);\n                                }\n                            }\n                            function A(a, b, c, d) {\n                                var e = !1;\n                                try {\n                                    \"function\" == typeof b && (e = !0, \"rejectionHandled\" === a ? b(d) : b(c, d));\n                                } catch (a) {\n                                    L.throwLater(a);\n                                }\n                                \"unhandledRejection\" === a ? ba(a, c, d) || e || z(c, \"Unhandled rejection \") : ba(a, d);\n                            }\n                            function B(a) {\n                                var b;\n                                if (\"function\" == typeof a) b = \"[function \" + (a.name || \"anonymous\") + \"]\"; else {\n                                    b = a && \"function\" == typeof a.toString ? a.toString() : N.toString(a);\n                                    if (/\\[object [a-zA-Z0-9$_]+\\]/.test(b)) try {\n                                        b = JSON.stringify(a);\n                                    } catch (a) {}\n                                    0 === b.length && (b = \"(empty array)\");\n                                }\n                                return \"(<\" + C(b) + \">, no stack trace)\";\n                            }\n                            function C(a) {\n                                return a.length < 41 ? a : a.substr(0, 38) + \"...\";\n                            }\n                            function D() {\n                                return \"function\" == typeof fa;\n                            }\n                            function E(a) {\n                                var b = a.match(ea);\n                                if (b) return {\n                                    fileName: b[1],\n                                    line: parseInt(b[2], 10)\n                                };\n                            }\n                            function F(a, b) {\n                                if (D()) {\n                                    for (var c, d, e = a.stack.split(\"\\n\"), f = b.stack.split(\"\\n\"), g = -1, h = -1, i = 0; i < e.length; ++i) {\n                                        var j = E(e[i]);\n                                        if (j) {\n                                            c = j.fileName, g = j.line;\n                                            break;\n                                        }\n                                    }\n                                    for (var i = 0; i < f.length; ++i) {\n                                        var j = E(f[i]);\n                                        if (j) {\n                                            d = j.fileName, h = j.line;\n                                            break;\n                                        }\n                                    }\n                                    g < 0 || h < 0 || !c || !d || c !== d || g >= h || (da = function(a) {\n                                        if (P.test(a)) return !0;\n                                        var b = E(a);\n                                        return !!(b && b.fileName === c && g <= b.line && b.line <= h);\n                                    });\n                                }\n                            }\n                            function G(a) {\n                                this._parent = a, this._promisesCreated = 0;\n                                var b = this._length = 1 + (void 0 === a ? 0 : a._length);\n                                fa(this, G), b > 32 && this.uncycle();\n                            }\n                            var H, I, J, K = c._getDomain, L = c._async, M = b(\"./errors\").Warning, N = b(\"./util\"), O = N.canAttachTrace, P = /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/, Q = /\\((?:timers\\.js):\\d+:\\d+\\)/, R = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/, S = null, T = null, U = !1, V = !(0 == N.env(\"BLUEBIRD_DEBUG\")), W = !(0 == N.env(\"BLUEBIRD_WARNINGS\") || !V && !N.env(\"BLUEBIRD_WARNINGS\")), X = !(0 == N.env(\"BLUEBIRD_LONG_STACK_TRACES\") || !V && !N.env(\"BLUEBIRD_LONG_STACK_TRACES\")), Y = 0 != N.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") && (W || !!N.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n                            c.prototype.suppressUnhandledRejections = function() {\n                                var a = this._target();\n                                a._bitField = -1048577 & a._bitField | 524288;\n                            }, c.prototype._ensurePossibleRejectionHandled = function() {\n                                if (0 == (524288 & this._bitField)) {\n                                    this._setRejectionIsUnhandled();\n                                    var a = this;\n                                    setTimeout(function() {\n                                        a._notifyUnhandledRejection();\n                                    }, 1);\n                                }\n                            }, c.prototype._notifyUnhandledRejectionIsHandled = function() {\n                                A(\"rejectionHandled\", H, void 0, this);\n                            }, c.prototype._setReturnedNonUndefined = function() {\n                                this._bitField = 268435456 | this._bitField;\n                            }, c.prototype._returnedNonUndefined = function() {\n                                return 0 != (268435456 & this._bitField);\n                            }, c.prototype._notifyUnhandledRejection = function() {\n                                if (this._isRejectionUnhandled()) {\n                                    var a = this._settledValue();\n                                    this._setUnhandledRejectionIsNotified(), A(\"unhandledRejection\", I, a, this);\n                                }\n                            }, c.prototype._setUnhandledRejectionIsNotified = function() {\n                                this._bitField = 262144 | this._bitField;\n                            }, c.prototype._unsetUnhandledRejectionIsNotified = function() {\n                                this._bitField = -262145 & this._bitField;\n                            }, c.prototype._isUnhandledRejectionNotified = function() {\n                                return (262144 & this._bitField) > 0;\n                            }, c.prototype._setRejectionIsUnhandled = function() {\n                                this._bitField = 1048576 | this._bitField;\n                            }, c.prototype._unsetRejectionIsUnhandled = function() {\n                                this._bitField = -1048577 & this._bitField, this._isUnhandledRejectionNotified() && (this._unsetUnhandledRejectionIsNotified(),\n                                this._notifyUnhandledRejectionIsHandled());\n                            }, c.prototype._isRejectionUnhandled = function() {\n                                return (1048576 & this._bitField) > 0;\n                            }, c.prototype._warn = function(a, b, c) {\n                                return s(a, b, c || this);\n                            }, c.onPossiblyUnhandledRejection = function(a) {\n                                var b = K();\n                                I = \"function\" == typeof a ? null === b ? a : N.domainBind(b, a) : void 0;\n                            }, c.onUnhandledRejectionHandled = function(a) {\n                                var b = K();\n                                H = \"function\" == typeof a ? null === b ? a : N.domainBind(b, a) : void 0;\n                            };\n                            var Z = function() {};\n                            c.longStackTraces = function() {\n                                if (L.haveItemsQueued() && !ga.longStackTraces) throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                                if (!ga.longStackTraces && D()) {\n                                    var a = c.prototype._captureStackTrace, b = c.prototype._attachExtraTrace;\n                                    ga.longStackTraces = !0, Z = function() {\n                                        if (L.haveItemsQueued() && !ga.longStackTraces) throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                                        c.prototype._captureStackTrace = a, c.prototype._attachExtraTrace = b, d.deactivateLongStackTraces(),\n                                        L.enableTrampoline(), ga.longStackTraces = !1;\n                                    }, c.prototype._captureStackTrace = o, c.prototype._attachExtraTrace = p, d.activateLongStackTraces(),\n                                    L.disableTrampolineIfNecessary();\n                                }\n                            }, c.hasLongStackTraces = function() {\n                                return ga.longStackTraces && D();\n                            };\n                            var $ = function() {\n                                try {\n                                    if (\"function\" == typeof CustomEvent) {\n                                        var a = new CustomEvent(\"CustomEvent\");\n                                        return N.global.dispatchEvent(a), function(a, b) {\n                                            var c = new CustomEvent(a.toLowerCase(), {\n                                                detail: b,\n                                                cancelable: !0\n                                            });\n                                            return !N.global.dispatchEvent(c);\n                                        };\n                                    }\n                                    if (\"function\" == typeof Event) {\n                                        var a = new Event(\"CustomEvent\");\n                                        return N.global.dispatchEvent(a), function(a, b) {\n                                            var c = new Event(a.toLowerCase(), {\n                                                cancelable: !0\n                                            });\n                                            return c.detail = b, !N.global.dispatchEvent(c);\n                                        };\n                                    }\n                                    var a = document.createEvent(\"CustomEvent\");\n                                    return a.initCustomEvent(\"testingtheevent\", !1, !0, {}), N.global.dispatchEvent(a),\n                                    function(a, b) {\n                                        var c = document.createEvent(\"CustomEvent\");\n                                        return c.initCustomEvent(a.toLowerCase(), !1, !0, b), !N.global.dispatchEvent(c);\n                                    };\n                                } catch (a) {}\n                                return function() {\n                                    return !1;\n                                };\n                            }(), _ = function() {\n                                return N.isNode ? function() {\n                                    return a.emit.apply(a, arguments);\n                                } : N.global ? function(a) {\n                                    var b = \"on\" + a.toLowerCase(), c = N.global[b];\n                                    return !!c && (c.apply(N.global, [].slice.call(arguments, 1)), !0);\n                                } : function() {\n                                    return !1;\n                                };\n                            }(), aa = {\n                                promiseCreated: e,\n                                promiseFulfilled: e,\n                                promiseRejected: e,\n                                promiseResolved: e,\n                                promiseCancelled: e,\n                                promiseChained: function(a, b, c) {\n                                    return {\n                                        promise: b,\n                                        child: c\n                                    };\n                                },\n                                warning: function(a, b) {\n                                    return {\n                                        warning: b\n                                    };\n                                },\n                                unhandledRejection: function(a, b, c) {\n                                    return {\n                                        reason: b,\n                                        promise: c\n                                    };\n                                },\n                                rejectionHandled: e\n                            }, ba = function(a) {\n                                var b = !1;\n                                try {\n                                    b = _.apply(null, arguments);\n                                } catch (a) {\n                                    L.throwLater(a), b = !0;\n                                }\n                                var c = !1;\n                                try {\n                                    c = $(a, aa[a].apply(null, arguments));\n                                } catch (a) {\n                                    L.throwLater(a), c = !0;\n                                }\n                                return c || b;\n                            };\n                            c.config = function(a) {\n                                if (a = Object(a), \"longStackTraces\" in a && (a.longStackTraces ? c.longStackTraces() : !a.longStackTraces && c.hasLongStackTraces() && Z()),\n                                \"warnings\" in a) {\n                                    var b = a.warnings;\n                                    ga.warnings = !!b, Y = ga.warnings, N.isObject(b) && \"wForgottenReturn\" in b && (Y = !!b.wForgottenReturn);\n                                }\n                                if (\"cancellation\" in a && a.cancellation && !ga.cancellation) {\n                                    if (L.haveItemsQueued()) throw new Error(\"cannot enable cancellation after promises are in use\");\n                                    c.prototype._clearCancellationData = k, c.prototype._propagateFrom = l, c.prototype._onCancel = i,\n                                    c.prototype._setOnCancel = j, c.prototype._attachCancellationCallback = h, c.prototype._execute = g,\n                                    ca = l, ga.cancellation = !0;\n                                }\n                                return \"monitoring\" in a && (a.monitoring && !ga.monitoring ? (ga.monitoring = !0,\n                                c.prototype._fireEvent = ba) : !a.monitoring && ga.monitoring && (ga.monitoring = !1,\n                                c.prototype._fireEvent = f)), c;\n                            }, c.prototype._fireEvent = f, c.prototype._execute = function(a, b, c) {\n                                try {\n                                    a(b, c);\n                                } catch (a) {\n                                    return a;\n                                }\n                            }, c.prototype._onCancel = function() {}, c.prototype._setOnCancel = function(a) {},\n                            c.prototype._attachCancellationCallback = function(a) {}, c.prototype._captureStackTrace = function() {},\n                            c.prototype._attachExtraTrace = function() {}, c.prototype._clearCancellationData = function() {},\n                            c.prototype._propagateFrom = function(a, b) {};\n                            var ca = m, da = function() {\n                                return !1;\n                            }, ea = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\n                            N.inherits(G, Error), d.CapturedTrace = G, G.prototype.uncycle = function() {\n                                var a = this._length;\n                                if (!(a < 2)) {\n                                    for (var b = [], c = {}, d = 0, e = this; void 0 !== e; ++d) b.push(e), e = e._parent;\n                                    a = this._length = d;\n                                    for (var d = a - 1; d >= 0; --d) {\n                                        var f = b[d].stack;\n                                        void 0 === c[f] && (c[f] = d);\n                                    }\n                                    for (var d = 0; d < a; ++d) {\n                                        var g = b[d].stack, h = c[g];\n                                        if (void 0 !== h && h !== d) {\n                                            h > 0 && (b[h - 1]._parent = void 0, b[h - 1]._length = 1), b[d]._parent = void 0,\n                                            b[d]._length = 1;\n                                            var i = d > 0 ? b[d - 1] : this;\n                                            h < a - 1 ? (i._parent = b[h + 1], i._parent.uncycle(), i._length = i._parent._length + 1) : (i._parent = void 0,\n                                            i._length = 1);\n                                            for (var j = i._length + 1, k = d - 2; k >= 0; --k) b[k]._length = j, j++;\n                                            return;\n                                        }\n                                    }\n                                }\n                            }, G.prototype.attachExtraTrace = function(a) {\n                                if (!a.__stackCleaned__) {\n                                    this.uncycle();\n                                    for (var b = y(a), c = b.message, d = [ b.stack ], e = this; void 0 !== e; ) d.push(w(e.stack.split(\"\\n\"))),\n                                    e = e._parent;\n                                    v(d), u(d), N.notEnumerableProp(a, \"stack\", t(c, d)), N.notEnumerableProp(a, \"__stackCleaned__\", !0);\n                                }\n                            };\n                            var fa = function() {\n                                var a = /^\\s*at\\s*/, b = function(a, b) {\n                                    return \"string\" == typeof a ? a : void 0 !== b.name && void 0 !== b.message ? b.toString() : B(b);\n                                };\n                                if (\"number\" == typeof Error.stackTraceLimit && \"function\" == typeof Error.captureStackTrace) {\n                                    Error.stackTraceLimit += 6, S = a, T = b;\n                                    var c = Error.captureStackTrace;\n                                    return da = function(a) {\n                                        return P.test(a);\n                                    }, function(a, b) {\n                                        Error.stackTraceLimit += 6, c(a, b), Error.stackTraceLimit -= 6;\n                                    };\n                                }\n                                var d = new Error();\n                                if (\"string\" == typeof d.stack && d.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) return S = /@/,\n                                T = b, U = !0, function(a) {\n                                    a.stack = new Error().stack;\n                                };\n                                var e;\n                                try {\n                                    throw new Error();\n                                } catch (a) {\n                                    e = \"stack\" in a;\n                                }\n                                return \"stack\" in d || !e || \"number\" != typeof Error.stackTraceLimit ? (T = function(a, b) {\n                                    return \"string\" == typeof a ? a : \"object\" != typeof b && \"function\" != typeof b || void 0 === b.name || void 0 === b.message ? B(b) : b.toString();\n                                }, null) : (S = a, T = b, function(a) {\n                                    Error.stackTraceLimit += 6;\n                                    try {\n                                        throw new Error();\n                                    } catch (b) {\n                                        a.stack = b.stack;\n                                    }\n                                    Error.stackTraceLimit -= 6;\n                                });\n                            }();\n                            \"undefined\" != typeof console && void 0 !== console.warn && (J = function(a) {\n                                console.warn(a);\n                            }, N.isNode && a.stderr.isTTY ? J = function(a, b) {\n                                var c = b ? \"\u001b[33m\" : \"\u001b[31m\";\n                                console.warn(c + a + \"\u001b[0m\\n\");\n                            } : N.isNode || \"string\" != typeof new Error().stack || (J = function(a, b) {\n                                console.warn(\"%c\" + a, b ? \"color: darkorange\" : \"color: red\");\n                            }));\n                            var ga = {\n                                warnings: W,\n                                longStackTraces: !1,\n                                cancellation: !1,\n                                monitoring: !1\n                            };\n                            return X && c.longStackTraces(), {\n                                longStackTraces: function() {\n                                    return ga.longStackTraces;\n                                },\n                                warnings: function() {\n                                    return ga.warnings;\n                                },\n                                cancellation: function() {\n                                    return ga.cancellation;\n                                },\n                                monitoring: function() {\n                                    return ga.monitoring;\n                                },\n                                propagateFromFunction: function() {\n                                    return ca;\n                                },\n                                boundValueFunction: function() {\n                                    return n;\n                                },\n                                checkForgottenReturns: q,\n                                setBounds: F,\n                                warn: s,\n                                deprecated: r,\n                                CapturedTrace: G,\n                                fireDomEvent: $,\n                                fireGlobalEvent: _\n                            };\n                        };\n                    }, {\n                        \"./errors\": 12,\n                        \"./util\": 36\n                    } ],\n                    10: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(a) {\n                            function b() {\n                                return this.value;\n                            }\n                            function c() {\n                                throw this.reason;\n                            }\n                            a.prototype.return = a.prototype.thenReturn = function(c) {\n                                return c instanceof a && c.suppressUnhandledRejections(), this._then(b, void 0, void 0, {\n                                    value: c\n                                }, void 0);\n                            }, a.prototype.throw = a.prototype.thenThrow = function(a) {\n                                return this._then(c, void 0, void 0, {\n                                    reason: a\n                                }, void 0);\n                            }, a.prototype.catchThrow = function(a) {\n                                if (arguments.length <= 1) return this._then(void 0, c, void 0, {\n                                    reason: a\n                                }, void 0);\n                                var b = arguments[1], d = function() {\n                                    throw b;\n                                };\n                                return this.caught(a, d);\n                            }, a.prototype.catchReturn = function(c) {\n                                if (arguments.length <= 1) return c instanceof a && c.suppressUnhandledRejections(),\n                                this._then(void 0, b, void 0, {\n                                    value: c\n                                }, void 0);\n                                var d = arguments[1];\n                                d instanceof a && d.suppressUnhandledRejections();\n                                var e = function() {\n                                    return d;\n                                };\n                                return this.caught(c, e);\n                            };\n                        };\n                    }, {} ],\n                    11: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(a, b) {\n                            function c() {\n                                return f(this);\n                            }\n                            function d(a, c) {\n                                return e(a, c, b, b);\n                            }\n                            var e = a.reduce, f = a.all;\n                            a.prototype.each = function(a) {\n                                return e(this, a, b, 0)._then(c, void 0, void 0, this, void 0);\n                            }, a.prototype.mapSeries = function(a) {\n                                return e(this, a, b, b);\n                            }, a.each = function(a, d) {\n                                return e(a, d, b, 0)._then(c, void 0, void 0, a, void 0);\n                            }, a.mapSeries = d;\n                        };\n                    }, {} ],\n                    12: [ function(a, b, c) {\n                        \"use strict\";\n                        function d(a, b) {\n                            function c(d) {\n                                if (!(this instanceof c)) return new c(d);\n                                l(this, \"message\", \"string\" == typeof d ? d : b), l(this, \"name\", a), Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : Error.call(this);\n                            }\n                            return k(c, Error), c;\n                        }\n                        function e(a) {\n                            if (!(this instanceof e)) return new e(a);\n                            l(this, \"name\", \"OperationalError\"), l(this, \"message\", a), this.cause = a, this.isOperational = !0,\n                            a instanceof Error ? (l(this, \"message\", a.message), l(this, \"stack\", a.stack)) : Error.captureStackTrace && Error.captureStackTrace(this, this.constructor);\n                        }\n                        var f, g, h = a(\"./es5\"), i = h.freeze, j = a(\"./util\"), k = j.inherits, l = j.notEnumerableProp, m = d(\"Warning\", \"warning\"), n = d(\"CancellationError\", \"cancellation error\"), o = d(\"TimeoutError\", \"timeout error\"), p = d(\"AggregateError\", \"aggregate error\");\n                        try {\n                            f = TypeError, g = RangeError;\n                        } catch (a) {\n                            f = d(\"TypeError\", \"type error\"), g = d(\"RangeError\", \"range error\");\n                        }\n                        for (var q = \"join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse\".split(\" \"), r = 0; r < q.length; ++r) \"function\" == typeof Array.prototype[q[r]] && (p.prototype[q[r]] = Array.prototype[q[r]]);\n                        h.defineProperty(p.prototype, \"length\", {\n                            value: 0,\n                            configurable: !1,\n                            writable: !0,\n                            enumerable: !0\n                        }), p.prototype.isOperational = !0;\n                        var s = 0;\n                        p.prototype.toString = function() {\n                            var a = Array(4 * s + 1).join(\" \"), b = \"\\n\" + a + \"AggregateError of:\\n\";\n                            s++, a = Array(4 * s + 1).join(\" \");\n                            for (var c = 0; c < this.length; ++c) {\n                                for (var d = this[c] === this ? \"[Circular AggregateError]\" : this[c] + \"\", e = d.split(\"\\n\"), f = 0; f < e.length; ++f) e[f] = a + e[f];\n                                d = e.join(\"\\n\"), b += d + \"\\n\";\n                            }\n                            return s--, b;\n                        }, k(e, Error);\n                        var t = Error.__BluebirdErrorTypes__;\n                        t || (t = i({\n                            CancellationError: n,\n                            TimeoutError: o,\n                            OperationalError: e,\n                            RejectionError: e,\n                            AggregateError: p\n                        }), h.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n                            value: t,\n                            writable: !1,\n                            enumerable: !1,\n                            configurable: !1\n                        })), b.exports = {\n                            Error: Error,\n                            TypeError: f,\n                            RangeError: g,\n                            CancellationError: t.CancellationError,\n                            OperationalError: t.OperationalError,\n                            TimeoutError: t.TimeoutError,\n                            AggregateError: t.AggregateError,\n                            Warning: m\n                        };\n                    }, {\n                        \"./es5\": 13,\n                        \"./util\": 36\n                    } ],\n                    13: [ function(a, b, c) {\n                        var d = function() {\n                            \"use strict\";\n                            return void 0 === this;\n                        }();\n                        if (d) b.exports = {\n                            freeze: Object.freeze,\n                            defineProperty: Object.defineProperty,\n                            getDescriptor: Object.getOwnPropertyDescriptor,\n                            keys: Object.keys,\n                            names: Object.getOwnPropertyNames,\n                            getPrototypeOf: Object.getPrototypeOf,\n                            isArray: Array.isArray,\n                            isES5: d,\n                            propertyIsWritable: function(a, b) {\n                                var c = Object.getOwnPropertyDescriptor(a, b);\n                                return !(c && !c.writable && !c.set);\n                            }\n                        }; else {\n                            var e = {}.hasOwnProperty, f = {}.toString, g = {}.constructor.prototype, h = function(a) {\n                                var b = [];\n                                for (var c in a) e.call(a, c) && b.push(c);\n                                return b;\n                            }, i = function(a, b) {\n                                return {\n                                    value: a[b]\n                                };\n                            }, j = function(a, b, c) {\n                                return a[b] = c.value, a;\n                            }, k = function(a) {\n                                return a;\n                            }, l = function(a) {\n                                try {\n                                    return Object(a).constructor.prototype;\n                                } catch (a) {\n                                    return g;\n                                }\n                            }, m = function(a) {\n                                try {\n                                    return \"[object Array]\" === f.call(a);\n                                } catch (a) {\n                                    return !1;\n                                }\n                            };\n                            b.exports = {\n                                isArray: m,\n                                keys: h,\n                                names: h,\n                                defineProperty: j,\n                                getDescriptor: i,\n                                freeze: k,\n                                getPrototypeOf: l,\n                                isES5: d,\n                                propertyIsWritable: function() {\n                                    return !0;\n                                }\n                            };\n                        }\n                    }, {} ],\n                    14: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(a, b) {\n                            var c = a.map;\n                            a.prototype.filter = function(a, d) {\n                                return c(this, a, d, b);\n                            }, a.filter = function(a, d, e) {\n                                return c(a, d, e, b);\n                            };\n                        };\n                    }, {} ],\n                    15: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d) {\n                            function e(a, b, c) {\n                                this.promise = a, this.type = b, this.handler = c, this.called = !1, this.cancelPromise = null;\n                            }\n                            function f(a) {\n                                this.finallyHandler = a;\n                            }\n                            function g(a, b) {\n                                return null != a.cancelPromise && (arguments.length > 1 ? a.cancelPromise._reject(b) : a.cancelPromise._cancel(),\n                                a.cancelPromise = null, !0);\n                            }\n                            function h() {\n                                return j.call(this, this.promise._target()._settledValue());\n                            }\n                            function i(a) {\n                                if (!g(this, a)) return m.e = a, m;\n                            }\n                            function j(a) {\n                                var e = this.promise, j = this.handler;\n                                if (!this.called) {\n                                    this.called = !0;\n                                    var k = this.isFinallyHandler() ? j.call(e._boundValue()) : j.call(e._boundValue(), a);\n                                    if (k === d) return k;\n                                    if (void 0 !== k) {\n                                        e._setReturnedNonUndefined();\n                                        var n = c(k, e);\n                                        if (n instanceof b) {\n                                            if (null != this.cancelPromise) {\n                                                if (n._isCancelled()) {\n                                                    var o = new l(\"late cancellation observer\");\n                                                    return e._attachExtraTrace(o), m.e = o, m;\n                                                }\n                                                n.isPending() && n._attachCancellationCallback(new f(this));\n                                            }\n                                            return n._then(h, i, void 0, this, void 0);\n                                        }\n                                    }\n                                }\n                                return e.isRejected() ? (g(this), m.e = a, m) : (g(this), a);\n                            }\n                            var k = a(\"./util\"), l = b.CancellationError, m = k.errorObj, n = a(\"./catch_filter\")(d);\n                            return e.prototype.isFinallyHandler = function() {\n                                return 0 === this.type;\n                            }, f.prototype._resultCancelled = function() {\n                                g(this.finallyHandler);\n                            }, b.prototype._passThrough = function(a, b, c, d) {\n                                return \"function\" != typeof a ? this.then() : this._then(c, d, void 0, new e(this, b, a), void 0);\n                            }, b.prototype.lastly = b.prototype.finally = function(a) {\n                                return this._passThrough(a, 0, j, j);\n                            }, b.prototype.tap = function(a) {\n                                return this._passThrough(a, 1, j);\n                            }, b.prototype.tapCatch = function(a) {\n                                var c = arguments.length;\n                                if (1 === c) return this._passThrough(a, 1, void 0, j);\n                                var d, e = new Array(c - 1), f = 0;\n                                for (d = 0; d < c - 1; ++d) {\n                                    var g = arguments[d];\n                                    if (!k.isObject(g)) return b.reject(new TypeError(\"tapCatch statement predicate: expecting an object but got \" + k.classString(g)));\n                                    e[f++] = g;\n                                }\n                                e.length = f;\n                                var h = arguments[d];\n                                return this._passThrough(n(e, h, this), 1, void 0, j);\n                            }, e;\n                        };\n                    }, {\n                        \"./catch_filter\": 7,\n                        \"./util\": 36\n                    } ],\n                    16: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d, e, f, g) {\n                            function h(a, c, d) {\n                                for (var f = 0; f < c.length; ++f) {\n                                    d._pushContext();\n                                    var g = n(c[f])(a);\n                                    if (d._popContext(), g === m) {\n                                        d._pushContext();\n                                        var h = b.reject(m.e);\n                                        return d._popContext(), h;\n                                    }\n                                    var i = e(g, d);\n                                    if (i instanceof b) return i;\n                                }\n                                return null;\n                            }\n                            function i(a, c, e, f) {\n                                if (g.cancellation()) {\n                                    var h = new b(d), i = this._finallyPromise = new b(d);\n                                    this._promise = h.lastly(function() {\n                                        return i;\n                                    }), h._captureStackTrace(), h._setOnCancel(this);\n                                } else {\n                                    (this._promise = new b(d))._captureStackTrace();\n                                }\n                                this._stack = f, this._generatorFunction = a, this._receiver = c, this._generator = void 0,\n                                this._yieldHandlers = \"function\" == typeof e ? [ e ].concat(o) : o, this._yieldedPromise = null,\n                                this._cancellationPhase = !1;\n                            }\n                            var j = a(\"./errors\"), k = j.TypeError, l = a(\"./util\"), m = l.errorObj, n = l.tryCatch, o = [];\n                            l.inherits(i, f), i.prototype._isResolved = function() {\n                                return null === this._promise;\n                            }, i.prototype._cleanup = function() {\n                                this._promise = this._generator = null, g.cancellation() && null !== this._finallyPromise && (this._finallyPromise._fulfill(),\n                                this._finallyPromise = null);\n                            }, i.prototype._promiseCancelled = function() {\n                                if (!this._isResolved()) {\n                                    var a, c = void 0 !== this._generator.return;\n                                    if (c) this._promise._pushContext(), a = n(this._generator.return).call(this._generator, void 0),\n                                    this._promise._popContext(); else {\n                                        var d = new b.CancellationError(\"generator .return() sentinel\");\n                                        b.coroutine.returnSentinel = d, this._promise._attachExtraTrace(d), this._promise._pushContext(),\n                                        a = n(this._generator.throw).call(this._generator, d), this._promise._popContext();\n                                    }\n                                    this._cancellationPhase = !0, this._yieldedPromise = null, this._continue(a);\n                                }\n                            }, i.prototype._promiseFulfilled = function(a) {\n                                this._yieldedPromise = null, this._promise._pushContext();\n                                var b = n(this._generator.next).call(this._generator, a);\n                                this._promise._popContext(), this._continue(b);\n                            }, i.prototype._promiseRejected = function(a) {\n                                this._yieldedPromise = null, this._promise._attachExtraTrace(a), this._promise._pushContext();\n                                var b = n(this._generator.throw).call(this._generator, a);\n                                this._promise._popContext(), this._continue(b);\n                            }, i.prototype._resultCancelled = function() {\n                                if (this._yieldedPromise instanceof b) {\n                                    var a = this._yieldedPromise;\n                                    this._yieldedPromise = null, a.cancel();\n                                }\n                            }, i.prototype.promise = function() {\n                                return this._promise;\n                            }, i.prototype._run = function() {\n                                this._generator = this._generatorFunction.call(this._receiver), this._receiver = this._generatorFunction = void 0,\n                                this._promiseFulfilled(void 0);\n                            }, i.prototype._continue = function(a) {\n                                var c = this._promise;\n                                if (a === m) return this._cleanup(), this._cancellationPhase ? c.cancel() : c._rejectCallback(a.e, !1);\n                                var d = a.value;\n                                if (!0 === a.done) return this._cleanup(), this._cancellationPhase ? c.cancel() : c._resolveCallback(d);\n                                var f = e(d, this._promise);\n                                if (!(f instanceof b) && null === (f = h(f, this._yieldHandlers, this._promise))) return void this._promiseRejected(new k(\"A value %s was yielded that could not be treated as a promise\\n\\n    See http://goo.gl/MqrFmX\\n\\n\".replace(\"%s\", String(d)) + \"From coroutine:\\n\" + this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")));\n                                f = f._target();\n                                var g = f._bitField;\n                                0 == (50397184 & g) ? (this._yieldedPromise = f, f._proxy(this, null)) : 0 != (33554432 & g) ? b._async.invoke(this._promiseFulfilled, this, f._value()) : 0 != (16777216 & g) ? b._async.invoke(this._promiseRejected, this, f._reason()) : this._promiseCancelled();\n                            }, b.coroutine = function(a, b) {\n                                if (\"function\" != typeof a) throw new k(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                                var c = Object(b).yieldHandler, d = i, e = new Error().stack;\n                                return function() {\n                                    var b = a.apply(this, arguments), f = new d(void 0, void 0, c, e), g = f.promise();\n                                    return f._generator = b, f._promiseFulfilled(void 0), g;\n                                };\n                            }, b.coroutine.addYieldHandler = function(a) {\n                                if (\"function\" != typeof a) throw new k(\"expecting a function but got \" + l.classString(a));\n                                o.push(a);\n                            }, b.spawn = function(a) {\n                                if (g.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\"), \"function\" != typeof a) return c(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                                var d = new i(a, this), e = d.promise();\n                                return d._run(b.spawn), e;\n                            };\n                        };\n                    }, {\n                        \"./errors\": 12,\n                        \"./util\": 36\n                    } ],\n                    17: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d, e, f, g) {\n                            var h = a(\"./util\");\n                            h.canEvaluate, h.tryCatch, h.errorObj;\n                            b.join = function() {\n                                var a, b = arguments.length - 1;\n                                if (b > 0 && \"function\" == typeof arguments[b]) {\n                                    a = arguments[b];\n                                    var d;\n                                }\n                                var e = [].slice.call(arguments);\n                                a && e.pop();\n                                var d = new c(e).promise();\n                                return void 0 !== a ? d.spread(a) : d;\n                            };\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    18: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d, e, f, g) {\n                            function h(a, b, c, d) {\n                                this.constructor$(a), this._promise._captureStackTrace();\n                                var e = j();\n                                this._callback = null === e ? b : k.domainBind(e, b), this._preservedValues = d === f ? new Array(this.length()) : null,\n                                this._limit = c, this._inFlight = 0, this._queue = [], n.invoke(this._asyncInit, this, void 0);\n                            }\n                            function i(a, c, e, f) {\n                                if (\"function\" != typeof c) return d(\"expecting a function but got \" + k.classString(c));\n                                var g = 0;\n                                if (void 0 !== e) {\n                                    if (\"object\" != typeof e || null === e) return b.reject(new TypeError(\"options argument must be an object but it is \" + k.classString(e)));\n                                    if (\"number\" != typeof e.concurrency) return b.reject(new TypeError(\"'concurrency' must be a number but it is \" + k.classString(e.concurrency)));\n                                    g = e.concurrency;\n                                }\n                                return g = \"number\" == typeof g && isFinite(g) && g >= 1 ? g : 0, new h(a, c, g, f).promise();\n                            }\n                            var j = b._getDomain, k = a(\"./util\"), l = k.tryCatch, m = k.errorObj, n = b._async;\n                            k.inherits(h, c), h.prototype._asyncInit = function() {\n                                this._init$(void 0, -2);\n                            }, h.prototype._init = function() {}, h.prototype._promiseFulfilled = function(a, c) {\n                                var d = this._values, f = this.length(), h = this._preservedValues, i = this._limit;\n                                if (c < 0) {\n                                    if (c = -1 * c - 1, d[c] = a, i >= 1 && (this._inFlight--, this._drainQueue(), this._isResolved())) return !0;\n                                } else {\n                                    if (i >= 1 && this._inFlight >= i) return d[c] = a, this._queue.push(c), !1;\n                                    null !== h && (h[c] = a);\n                                    var j = this._promise, k = this._callback, n = j._boundValue();\n                                    j._pushContext();\n                                    var o = l(k).call(n, a, c, f), p = j._popContext();\n                                    if (g.checkForgottenReturns(o, p, null !== h ? \"Promise.filter\" : \"Promise.map\", j),\n                                    o === m) return this._reject(o.e), !0;\n                                    var q = e(o, this._promise);\n                                    if (q instanceof b) {\n                                        q = q._target();\n                                        var r = q._bitField;\n                                        if (0 == (50397184 & r)) return i >= 1 && this._inFlight++, d[c] = q, q._proxy(this, -1 * (c + 1)),\n                                        !1;\n                                        if (0 == (33554432 & r)) return 0 != (16777216 & r) ? (this._reject(q._reason()),\n                                        !0) : (this._cancel(), !0);\n                                        o = q._value();\n                                    }\n                                    d[c] = o;\n                                }\n                                return ++this._totalResolved >= f && (null !== h ? this._filter(d, h) : this._resolve(d),\n                                !0);\n                            }, h.prototype._drainQueue = function() {\n                                for (var a = this._queue, b = this._limit, c = this._values; a.length > 0 && this._inFlight < b; ) {\n                                    if (this._isResolved()) return;\n                                    var d = a.pop();\n                                    this._promiseFulfilled(c[d], d);\n                                }\n                            }, h.prototype._filter = function(a, b) {\n                                for (var c = b.length, d = new Array(c), e = 0, f = 0; f < c; ++f) a[f] && (d[e++] = b[f]);\n                                d.length = e, this._resolve(d);\n                            }, h.prototype.preservedValues = function() {\n                                return this._preservedValues;\n                            }, b.prototype.map = function(a, b) {\n                                return i(this, a, b, null);\n                            }, b.map = function(a, b, c, d) {\n                                return i(a, b, c, d);\n                            };\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    19: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d, e, f) {\n                            var g = a(\"./util\"), h = g.tryCatch;\n                            b.method = function(a) {\n                                if (\"function\" != typeof a) throw new b.TypeError(\"expecting a function but got \" + g.classString(a));\n                                return function() {\n                                    var d = new b(c);\n                                    d._captureStackTrace(), d._pushContext();\n                                    var e = h(a).apply(this, arguments), g = d._popContext();\n                                    return f.checkForgottenReturns(e, g, \"Promise.method\", d), d._resolveFromSyncValue(e),\n                                    d;\n                                };\n                            }, b.attempt = b.try = function(a) {\n                                if (\"function\" != typeof a) return e(\"expecting a function but got \" + g.classString(a));\n                                var d = new b(c);\n                                d._captureStackTrace(), d._pushContext();\n                                var i;\n                                if (arguments.length > 1) {\n                                    f.deprecated(\"calling Promise.try with more than 1 argument\");\n                                    var j = arguments[1], k = arguments[2];\n                                    i = g.isArray(j) ? h(a).apply(k, j) : h(a).call(k, j);\n                                } else i = h(a)();\n                                var l = d._popContext();\n                                return f.checkForgottenReturns(i, l, \"Promise.try\", d), d._resolveFromSyncValue(i),\n                                d;\n                            }, b.prototype._resolveFromSyncValue = function(a) {\n                                a === g.errorObj ? this._rejectCallback(a.e, !1) : this._resolveCallback(a, !0);\n                            };\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    20: [ function(a, b, c) {\n                        \"use strict\";\n                        function d(a) {\n                            return a instanceof Error && k.getPrototypeOf(a) === Error.prototype;\n                        }\n                        function e(a) {\n                            var b;\n                            if (d(a)) {\n                                b = new j(a), b.name = a.name, b.message = a.message, b.stack = a.stack;\n                                for (var c = k.keys(a), e = 0; e < c.length; ++e) {\n                                    var f = c[e];\n                                    l.test(f) || (b[f] = a[f]);\n                                }\n                                return b;\n                            }\n                            return g.markAsOriginatingFromRejection(a), a;\n                        }\n                        function f(a, b) {\n                            return function(c, d) {\n                                if (null !== a) {\n                                    if (c) {\n                                        var f = e(h(c));\n                                        a._attachExtraTrace(f), a._reject(f);\n                                    } else if (b) {\n                                        var g = [].slice.call(arguments, 1);\n                                        a._fulfill(g);\n                                    } else a._fulfill(d);\n                                    a = null;\n                                }\n                            };\n                        }\n                        var g = a(\"./util\"), h = g.maybeWrapAsError, i = a(\"./errors\"), j = i.OperationalError, k = a(\"./es5\"), l = /^(?:name|message|stack|cause)$/;\n                        b.exports = f;\n                    }, {\n                        \"./errors\": 12,\n                        \"./es5\": 13,\n                        \"./util\": 36\n                    } ],\n                    21: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b) {\n                            function c(a, b) {\n                                var c = this;\n                                if (!f.isArray(a)) return d.call(c, a, b);\n                                var e = h(b).apply(c._boundValue(), [ null ].concat(a));\n                                e === i && g.throwLater(e.e);\n                            }\n                            function d(a, b) {\n                                var c = this, d = c._boundValue(), e = void 0 === a ? h(b).call(d, null) : h(b).call(d, null, a);\n                                e === i && g.throwLater(e.e);\n                            }\n                            function e(a, b) {\n                                var c = this;\n                                if (!a) {\n                                    var d = new Error(a + \"\");\n                                    d.cause = a, a = d;\n                                }\n                                var e = h(b).call(c._boundValue(), a);\n                                e === i && g.throwLater(e.e);\n                            }\n                            var f = a(\"./util\"), g = b._async, h = f.tryCatch, i = f.errorObj;\n                            b.prototype.asCallback = b.prototype.nodeify = function(a, b) {\n                                if (\"function\" == typeof a) {\n                                    var f = d;\n                                    void 0 !== b && Object(b).spread && (f = c), this._then(f, e, void 0, this, a);\n                                }\n                                return this;\n                            };\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    22: [ function(b, c, d) {\n                        \"use strict\";\n                        c.exports = function() {\n                            function d() {}\n                            function e(a, b) {\n                                if (null == a || a.constructor !== f) throw new t(\"the promise constructor cannot be invoked directly\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                                if (\"function\" != typeof b) throw new t(\"expecting a function but got \" + o.classString(b));\n                            }\n                            function f(a) {\n                                a !== v && e(this, a), this._bitField = 0, this._fulfillmentHandler0 = void 0, this._rejectionHandler0 = void 0,\n                                this._promise0 = void 0, this._receiver0 = void 0, this._resolveFromExecutor(a),\n                                this._promiseCreated(), this._fireEvent(\"promiseCreated\", this);\n                            }\n                            function g(a) {\n                                this.promise._resolveCallback(a);\n                            }\n                            function h(a) {\n                                this.promise._rejectCallback(a, !1);\n                            }\n                            function i(a) {\n                                var b = new f(v);\n                                b._fulfillmentHandler0 = a, b._rejectionHandler0 = a, b._promise0 = a, b._receiver0 = a;\n                            }\n                            var j, k = function() {\n                                return new t(\"circular promise resolution chain\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                            }, l = function() {\n                                return new f.PromiseInspection(this._target());\n                            }, m = function(a) {\n                                return f.reject(new t(a));\n                            }, n = {}, o = b(\"./util\");\n                            j = o.isNode ? function() {\n                                var b = a.domain;\n                                return void 0 === b && (b = null), b;\n                            } : function() {\n                                return null;\n                            }, o.notEnumerableProp(f, \"_getDomain\", j);\n                            var p = b(\"./es5\"), q = b(\"./async\"), r = new q();\n                            p.defineProperty(f, \"_async\", {\n                                value: r\n                            });\n                            var s = b(\"./errors\"), t = f.TypeError = s.TypeError;\n                            f.RangeError = s.RangeError;\n                            var u = f.CancellationError = s.CancellationError;\n                            f.TimeoutError = s.TimeoutError, f.OperationalError = s.OperationalError, f.RejectionError = s.OperationalError,\n                            f.AggregateError = s.AggregateError;\n                            var v = function() {}, w = {}, x = {}, y = b(\"./thenables\")(f, v), z = b(\"./promise_array\")(f, v, y, m, d), A = b(\"./context\")(f), B = A.create, C = b(\"./debuggability\")(f, A), D = (C.CapturedTrace,\n                            b(\"./finally\")(f, y, x)), E = b(\"./catch_filter\")(x), F = b(\"./nodeback\"), G = o.errorObj, H = o.tryCatch;\n                            return f.prototype.toString = function() {\n                                return \"[object Promise]\";\n                            }, f.prototype.caught = f.prototype.catch = function(a) {\n                                var b = arguments.length;\n                                if (b > 1) {\n                                    var c, d = new Array(b - 1), e = 0;\n                                    for (c = 0; c < b - 1; ++c) {\n                                        var f = arguments[c];\n                                        if (!o.isObject(f)) return m(\"Catch statement predicate: expecting an object but got \" + o.classString(f));\n                                        d[e++] = f;\n                                    }\n                                    return d.length = e, a = arguments[c], this.then(void 0, E(d, a, this));\n                                }\n                                return this.then(void 0, a);\n                            }, f.prototype.reflect = function() {\n                                return this._then(l, l, void 0, this, void 0);\n                            }, f.prototype.then = function(a, b) {\n                                if (C.warnings() && arguments.length > 0 && \"function\" != typeof a && \"function\" != typeof b) {\n                                    var c = \".then() only accepts functions but was passed: \" + o.classString(a);\n                                    arguments.length > 1 && (c += \", \" + o.classString(b)), this._warn(c);\n                                }\n                                return this._then(a, b, void 0, void 0, void 0);\n                            }, f.prototype.done = function(a, b) {\n                                this._then(a, b, void 0, void 0, void 0)._setIsFinal();\n                            }, f.prototype.spread = function(a) {\n                                return \"function\" != typeof a ? m(\"expecting a function but got \" + o.classString(a)) : this.all()._then(a, void 0, void 0, w, void 0);\n                            }, f.prototype.toJSON = function() {\n                                var a = {\n                                    isFulfilled: !1,\n                                    isRejected: !1,\n                                    fulfillmentValue: void 0,\n                                    rejectionReason: void 0\n                                };\n                                return this.isFulfilled() ? (a.fulfillmentValue = this.value(), a.isFulfilled = !0) : this.isRejected() && (a.rejectionReason = this.reason(),\n                                a.isRejected = !0), a;\n                            }, f.prototype.all = function() {\n                                return arguments.length > 0 && this._warn(\".all() was passed arguments but it does not take any\"),\n                                new z(this).promise();\n                            }, f.prototype.error = function(a) {\n                                return this.caught(o.originatesFromRejection, a);\n                            }, f.getNewLibraryCopy = c.exports, f.is = function(a) {\n                                return a instanceof f;\n                            }, f.fromNode = f.fromCallback = function(a) {\n                                var b = new f(v);\n                                b._captureStackTrace();\n                                var c = arguments.length > 1 && !!Object(arguments[1]).multiArgs, d = H(a)(F(b, c));\n                                return d === G && b._rejectCallback(d.e, !0), b._isFateSealed() || b._setAsyncGuaranteed(),\n                                b;\n                            }, f.all = function(a) {\n                                return new z(a).promise();\n                            }, f.cast = function(a) {\n                                var b = y(a);\n                                return b instanceof f || (b = new f(v), b._captureStackTrace(), b._setFulfilled(),\n                                b._rejectionHandler0 = a), b;\n                            }, f.resolve = f.fulfilled = f.cast, f.reject = f.rejected = function(a) {\n                                var b = new f(v);\n                                return b._captureStackTrace(), b._rejectCallback(a, !0), b;\n                            }, f.setScheduler = function(a) {\n                                if (\"function\" != typeof a) throw new t(\"expecting a function but got \" + o.classString(a));\n                                return r.setScheduler(a);\n                            }, f.prototype._then = function(a, b, c, d, e) {\n                                var g = void 0 !== e, h = g ? e : new f(v), i = this._target(), k = i._bitField;\n                                g || (h._propagateFrom(this, 3), h._captureStackTrace(), void 0 === d && 0 != (2097152 & this._bitField) && (d = 0 != (50397184 & k) ? this._boundValue() : i === this ? void 0 : this._boundTo),\n                                this._fireEvent(\"promiseChained\", this, h));\n                                var l = j();\n                                if (0 != (50397184 & k)) {\n                                    var m, n, p = i._settlePromiseCtx;\n                                    0 != (33554432 & k) ? (n = i._rejectionHandler0, m = a) : 0 != (16777216 & k) ? (n = i._fulfillmentHandler0,\n                                    m = b, i._unsetRejectionIsUnhandled()) : (p = i._settlePromiseLateCancellationObserver,\n                                    n = new u(\"late cancellation observer\"), i._attachExtraTrace(n), m = b), r.invoke(p, i, {\n                                        handler: null === l ? m : \"function\" == typeof m && o.domainBind(l, m),\n                                        promise: h,\n                                        receiver: d,\n                                        value: n\n                                    });\n                                } else i._addCallbacks(a, b, h, d, l);\n                                return h;\n                            }, f.prototype._length = function() {\n                                return 65535 & this._bitField;\n                            }, f.prototype._isFateSealed = function() {\n                                return 0 != (117506048 & this._bitField);\n                            }, f.prototype._isFollowing = function() {\n                                return 67108864 == (67108864 & this._bitField);\n                            }, f.prototype._setLength = function(a) {\n                                this._bitField = -65536 & this._bitField | 65535 & a;\n                            }, f.prototype._setFulfilled = function() {\n                                this._bitField = 33554432 | this._bitField, this._fireEvent(\"promiseFulfilled\", this);\n                            }, f.prototype._setRejected = function() {\n                                this._bitField = 16777216 | this._bitField, this._fireEvent(\"promiseRejected\", this);\n                            }, f.prototype._setFollowing = function() {\n                                this._bitField = 67108864 | this._bitField, this._fireEvent(\"promiseResolved\", this);\n                            }, f.prototype._setIsFinal = function() {\n                                this._bitField = 4194304 | this._bitField;\n                            }, f.prototype._isFinal = function() {\n                                return (4194304 & this._bitField) > 0;\n                            }, f.prototype._unsetCancelled = function() {\n                                this._bitField = -65537 & this._bitField;\n                            }, f.prototype._setCancelled = function() {\n                                this._bitField = 65536 | this._bitField, this._fireEvent(\"promiseCancelled\", this);\n                            }, f.prototype._setWillBeCancelled = function() {\n                                this._bitField = 8388608 | this._bitField;\n                            }, f.prototype._setAsyncGuaranteed = function() {\n                                r.hasCustomScheduler() || (this._bitField = 134217728 | this._bitField);\n                            }, f.prototype._receiverAt = function(a) {\n                                var b = 0 === a ? this._receiver0 : this[4 * a - 4 + 3];\n                                if (b !== n) return void 0 === b && this._isBound() ? this._boundValue() : b;\n                            }, f.prototype._promiseAt = function(a) {\n                                return this[4 * a - 4 + 2];\n                            }, f.prototype._fulfillmentHandlerAt = function(a) {\n                                return this[4 * a - 4 + 0];\n                            }, f.prototype._rejectionHandlerAt = function(a) {\n                                return this[4 * a - 4 + 1];\n                            }, f.prototype._boundValue = function() {}, f.prototype._migrateCallback0 = function(a) {\n                                var b = (a._bitField, a._fulfillmentHandler0), c = a._rejectionHandler0, d = a._promise0, e = a._receiverAt(0);\n                                void 0 === e && (e = n), this._addCallbacks(b, c, d, e, null);\n                            }, f.prototype._migrateCallbackAt = function(a, b) {\n                                var c = a._fulfillmentHandlerAt(b), d = a._rejectionHandlerAt(b), e = a._promiseAt(b), f = a._receiverAt(b);\n                                void 0 === f && (f = n), this._addCallbacks(c, d, e, f, null);\n                            }, f.prototype._addCallbacks = function(a, b, c, d, e) {\n                                var f = this._length();\n                                if (f >= 65531 && (f = 0, this._setLength(0)), 0 === f) this._promise0 = c, this._receiver0 = d,\n                                \"function\" == typeof a && (this._fulfillmentHandler0 = null === e ? a : o.domainBind(e, a)),\n                                \"function\" == typeof b && (this._rejectionHandler0 = null === e ? b : o.domainBind(e, b)); else {\n                                    var g = 4 * f - 4;\n                                    this[g + 2] = c, this[g + 3] = d, \"function\" == typeof a && (this[g + 0] = null === e ? a : o.domainBind(e, a)),\n                                    \"function\" == typeof b && (this[g + 1] = null === e ? b : o.domainBind(e, b));\n                                }\n                                return this._setLength(f + 1), f;\n                            }, f.prototype._proxy = function(a, b) {\n                                this._addCallbacks(void 0, void 0, b, a, null);\n                            }, f.prototype._resolveCallback = function(a, b) {\n                                if (0 == (117506048 & this._bitField)) {\n                                    if (a === this) return this._rejectCallback(k(), !1);\n                                    var c = y(a, this);\n                                    if (!(c instanceof f)) return this._fulfill(a);\n                                    b && this._propagateFrom(c, 2);\n                                    var d = c._target();\n                                    if (d === this) return void this._reject(k());\n                                    var e = d._bitField;\n                                    if (0 == (50397184 & e)) {\n                                        var g = this._length();\n                                        g > 0 && d._migrateCallback0(this);\n                                        for (var h = 1; h < g; ++h) d._migrateCallbackAt(this, h);\n                                        this._setFollowing(), this._setLength(0), this._setFollowee(d);\n                                    } else if (0 != (33554432 & e)) this._fulfill(d._value()); else if (0 != (16777216 & e)) this._reject(d._reason()); else {\n                                        var i = new u(\"late cancellation observer\");\n                                        d._attachExtraTrace(i), this._reject(i);\n                                    }\n                                }\n                            }, f.prototype._rejectCallback = function(a, b, c) {\n                                var d = o.ensureErrorObject(a), e = d === a;\n                                if (!e && !c && C.warnings()) {\n                                    var f = \"a promise was rejected with a non-error: \" + o.classString(a);\n                                    this._warn(f, !0);\n                                }\n                                this._attachExtraTrace(d, !!b && e), this._reject(a);\n                            }, f.prototype._resolveFromExecutor = function(a) {\n                                if (a !== v) {\n                                    var b = this;\n                                    this._captureStackTrace(), this._pushContext();\n                                    var c = !0, d = this._execute(a, function(a) {\n                                        b._resolveCallback(a);\n                                    }, function(a) {\n                                        b._rejectCallback(a, c);\n                                    });\n                                    c = !1, this._popContext(), void 0 !== d && b._rejectCallback(d, !0);\n                                }\n                            }, f.prototype._settlePromiseFromHandler = function(a, b, c, d) {\n                                var e = d._bitField;\n                                if (0 == (65536 & e)) {\n                                    d._pushContext();\n                                    var f;\n                                    b === w ? c && \"number\" == typeof c.length ? f = H(a).apply(this._boundValue(), c) : (f = G,\n                                    f.e = new t(\"cannot .spread() a non-array: \" + o.classString(c))) : f = H(a).call(b, c);\n                                    var g = d._popContext();\n                                    e = d._bitField, 0 == (65536 & e) && (f === x ? d._reject(c) : f === G ? d._rejectCallback(f.e, !1) : (C.checkForgottenReturns(f, g, \"\", d, this),\n                                    d._resolveCallback(f)));\n                                }\n                            }, f.prototype._target = function() {\n                                for (var a = this; a._isFollowing(); ) a = a._followee();\n                                return a;\n                            }, f.prototype._followee = function() {\n                                return this._rejectionHandler0;\n                            }, f.prototype._setFollowee = function(a) {\n                                this._rejectionHandler0 = a;\n                            }, f.prototype._settlePromise = function(a, b, c, e) {\n                                var g = a instanceof f, h = this._bitField, i = 0 != (134217728 & h);\n                                0 != (65536 & h) ? (g && a._invokeInternalOnCancel(), c instanceof D && c.isFinallyHandler() ? (c.cancelPromise = a,\n                                H(b).call(c, e) === G && a._reject(G.e)) : b === l ? a._fulfill(l.call(c)) : c instanceof d ? c._promiseCancelled(a) : g || a instanceof z ? a._cancel() : c.cancel()) : \"function\" == typeof b ? g ? (i && a._setAsyncGuaranteed(),\n                                this._settlePromiseFromHandler(b, c, e, a)) : b.call(c, e, a) : c instanceof d ? c._isResolved() || (0 != (33554432 & h) ? c._promiseFulfilled(e, a) : c._promiseRejected(e, a)) : g && (i && a._setAsyncGuaranteed(),\n                                0 != (33554432 & h) ? a._fulfill(e) : a._reject(e));\n                            }, f.prototype._settlePromiseLateCancellationObserver = function(a) {\n                                var b = a.handler, c = a.promise, d = a.receiver, e = a.value;\n                                \"function\" == typeof b ? c instanceof f ? this._settlePromiseFromHandler(b, d, e, c) : b.call(d, e, c) : c instanceof f && c._reject(e);\n                            }, f.prototype._settlePromiseCtx = function(a) {\n                                this._settlePromise(a.promise, a.handler, a.receiver, a.value);\n                            }, f.prototype._settlePromise0 = function(a, b, c) {\n                                var d = this._promise0, e = this._receiverAt(0);\n                                this._promise0 = void 0, this._receiver0 = void 0, this._settlePromise(d, a, e, b);\n                            }, f.prototype._clearCallbackDataAtIndex = function(a) {\n                                var b = 4 * a - 4;\n                                this[b + 2] = this[b + 3] = this[b + 0] = this[b + 1] = void 0;\n                            }, f.prototype._fulfill = function(a) {\n                                var b = this._bitField;\n                                if (!((117506048 & b) >>> 16)) {\n                                    if (a === this) {\n                                        var c = k();\n                                        return this._attachExtraTrace(c), this._reject(c);\n                                    }\n                                    this._setFulfilled(), this._rejectionHandler0 = a, (65535 & b) > 0 && (0 != (134217728 & b) ? this._settlePromises() : r.settlePromises(this));\n                                }\n                            }, f.prototype._reject = function(a) {\n                                var b = this._bitField;\n                                if (!((117506048 & b) >>> 16)) {\n                                    if (this._setRejected(), this._fulfillmentHandler0 = a, this._isFinal()) return r.fatalError(a, o.isNode);\n                                    (65535 & b) > 0 ? r.settlePromises(this) : this._ensurePossibleRejectionHandled();\n                                }\n                            }, f.prototype._fulfillPromises = function(a, b) {\n                                for (var c = 1; c < a; c++) {\n                                    var d = this._fulfillmentHandlerAt(c), e = this._promiseAt(c), f = this._receiverAt(c);\n                                    this._clearCallbackDataAtIndex(c), this._settlePromise(e, d, f, b);\n                                }\n                            }, f.prototype._rejectPromises = function(a, b) {\n                                for (var c = 1; c < a; c++) {\n                                    var d = this._rejectionHandlerAt(c), e = this._promiseAt(c), f = this._receiverAt(c);\n                                    this._clearCallbackDataAtIndex(c), this._settlePromise(e, d, f, b);\n                                }\n                            }, f.prototype._settlePromises = function() {\n                                var a = this._bitField, b = 65535 & a;\n                                if (b > 0) {\n                                    if (0 != (16842752 & a)) {\n                                        var c = this._fulfillmentHandler0;\n                                        this._settlePromise0(this._rejectionHandler0, c, a), this._rejectPromises(b, c);\n                                    } else {\n                                        var d = this._rejectionHandler0;\n                                        this._settlePromise0(this._fulfillmentHandler0, d, a), this._fulfillPromises(b, d);\n                                    }\n                                    this._setLength(0);\n                                }\n                                this._clearCancellationData();\n                            }, f.prototype._settledValue = function() {\n                                var a = this._bitField;\n                                return 0 != (33554432 & a) ? this._rejectionHandler0 : 0 != (16777216 & a) ? this._fulfillmentHandler0 : void 0;\n                            }, f.defer = f.pending = function() {\n                                return C.deprecated(\"Promise.defer\", \"new Promise\"), {\n                                    promise: new f(v),\n                                    resolve: g,\n                                    reject: h\n                                };\n                            }, o.notEnumerableProp(f, \"_makeSelfResolutionError\", k), b(\"./method\")(f, v, y, m, C),\n                            b(\"./bind\")(f, v, y, C), b(\"./cancel\")(f, z, m, C), b(\"./direct_resolve\")(f), b(\"./synchronous_inspection\")(f),\n                            b(\"./join\")(f, z, y, v, r, j), f.Promise = f, f.version = \"3.5.1\", b(\"./map.js\")(f, z, m, y, v, C),\n                            b(\"./call_get.js\")(f), b(\"./using.js\")(f, m, y, B, v, C), b(\"./timers.js\")(f, v, C),\n                            b(\"./generators.js\")(f, m, v, y, d, C), b(\"./nodeify.js\")(f), b(\"./promisify.js\")(f, v),\n                            b(\"./props.js\")(f, z, y, m), b(\"./race.js\")(f, v, y, m), b(\"./reduce.js\")(f, z, m, y, v, C),\n                            b(\"./settle.js\")(f, z, C), b(\"./some.js\")(f, z, m), b(\"./filter.js\")(f, v), b(\"./each.js\")(f, v),\n                            b(\"./any.js\")(f), o.toFastProperties(f), o.toFastProperties(f.prototype), i({\n                                a: 1\n                            }), i({\n                                b: 2\n                            }), i({\n                                c: 3\n                            }), i(1), i(function() {}), i(void 0), i(!1), i(new f(v)), C.setBounds(q.firstLineError, o.lastLineError),\n                            f;\n                        };\n                    }, {\n                        \"./any.js\": 1,\n                        \"./async\": 2,\n                        \"./bind\": 3,\n                        \"./call_get.js\": 5,\n                        \"./cancel\": 6,\n                        \"./catch_filter\": 7,\n                        \"./context\": 8,\n                        \"./debuggability\": 9,\n                        \"./direct_resolve\": 10,\n                        \"./each.js\": 11,\n                        \"./errors\": 12,\n                        \"./es5\": 13,\n                        \"./filter.js\": 14,\n                        \"./finally\": 15,\n                        \"./generators.js\": 16,\n                        \"./join\": 17,\n                        \"./map.js\": 18,\n                        \"./method\": 19,\n                        \"./nodeback\": 20,\n                        \"./nodeify.js\": 21,\n                        \"./promise_array\": 23,\n                        \"./promisify.js\": 24,\n                        \"./props.js\": 25,\n                        \"./race.js\": 27,\n                        \"./reduce.js\": 28,\n                        \"./settle.js\": 30,\n                        \"./some.js\": 31,\n                        \"./synchronous_inspection\": 32,\n                        \"./thenables\": 33,\n                        \"./timers.js\": 34,\n                        \"./using.js\": 35,\n                        \"./util\": 36\n                    } ],\n                    23: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d, e, f) {\n                            function g(a) {\n                                switch (a) {\n                                  case -2:\n                                    return [];\n\n                                  case -3:\n                                    return {};\n\n                                  case -6:\n                                    return new Map();\n                                }\n                            }\n                            function h(a) {\n                                var d = this._promise = new b(c);\n                                a instanceof b && d._propagateFrom(a, 3), d._setOnCancel(this), this._values = a,\n                                this._length = 0, this._totalResolved = 0, this._init(void 0, -2);\n                            }\n                            var i = a(\"./util\");\n                            i.isArray;\n                            return i.inherits(h, f), h.prototype.length = function() {\n                                return this._length;\n                            }, h.prototype.promise = function() {\n                                return this._promise;\n                            }, h.prototype._init = function a(c, f) {\n                                var h = d(this._values, this._promise);\n                                if (h instanceof b) {\n                                    h = h._target();\n                                    var j = h._bitField;\n                                    if (this._values = h, 0 == (50397184 & j)) return this._promise._setAsyncGuaranteed(),\n                                    h._then(a, this._reject, void 0, this, f);\n                                    if (0 == (33554432 & j)) return 0 != (16777216 & j) ? this._reject(h._reason()) : this._cancel();\n                                    h = h._value();\n                                }\n                                if (null === (h = i.asArray(h))) {\n                                    var k = e(\"expecting an array or an iterable object but got \" + i.classString(h)).reason();\n                                    return void this._promise._rejectCallback(k, !1);\n                                }\n                                if (0 === h.length) return void (-5 === f ? this._resolveEmptyArray() : this._resolve(g(f)));\n                                this._iterate(h);\n                            }, h.prototype._iterate = function(a) {\n                                var c = this.getActualLength(a.length);\n                                this._length = c, this._values = this.shouldCopyValues() ? new Array(c) : this._values;\n                                for (var e = this._promise, f = !1, g = null, h = 0; h < c; ++h) {\n                                    var i = d(a[h], e);\n                                    i instanceof b ? (i = i._target(), g = i._bitField) : g = null, f ? null !== g && i.suppressUnhandledRejections() : null !== g ? 0 == (50397184 & g) ? (i._proxy(this, h),\n                                    this._values[h] = i) : f = 0 != (33554432 & g) ? this._promiseFulfilled(i._value(), h) : 0 != (16777216 & g) ? this._promiseRejected(i._reason(), h) : this._promiseCancelled(h) : f = this._promiseFulfilled(i, h);\n                                }\n                                f || e._setAsyncGuaranteed();\n                            }, h.prototype._isResolved = function() {\n                                return null === this._values;\n                            }, h.prototype._resolve = function(a) {\n                                this._values = null, this._promise._fulfill(a);\n                            }, h.prototype._cancel = function() {\n                                !this._isResolved() && this._promise._isCancellable() && (this._values = null, this._promise._cancel());\n                            }, h.prototype._reject = function(a) {\n                                this._values = null, this._promise._rejectCallback(a, !1);\n                            }, h.prototype._promiseFulfilled = function(a, b) {\n                                return this._values[b] = a, ++this._totalResolved >= this._length && (this._resolve(this._values),\n                                !0);\n                            }, h.prototype._promiseCancelled = function() {\n                                return this._cancel(), !0;\n                            }, h.prototype._promiseRejected = function(a) {\n                                return this._totalResolved++, this._reject(a), !0;\n                            }, h.prototype._resultCancelled = function() {\n                                if (!this._isResolved()) {\n                                    var a = this._values;\n                                    if (this._cancel(), a instanceof b) a.cancel(); else for (var c = 0; c < a.length; ++c) a[c] instanceof b && a[c].cancel();\n                                }\n                            }, h.prototype.shouldCopyValues = function() {\n                                return !0;\n                            }, h.prototype.getActualLength = function(a) {\n                                return a;\n                            }, h;\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    24: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c) {\n                            function d(a) {\n                                return !v.test(a);\n                            }\n                            function e(a) {\n                                try {\n                                    return !0 === a.__isPromisified__;\n                                } catch (a) {\n                                    return !1;\n                                }\n                            }\n                            function f(a, b, c) {\n                                var d = n.getDataPropertyOrDefault(a, b + c, t);\n                                return !!d && e(d);\n                            }\n                            function g(a, b, c) {\n                                for (var d = 0; d < a.length; d += 2) {\n                                    var e = a[d];\n                                    if (c.test(e)) for (var f = e.replace(c, \"\"), g = 0; g < a.length; g += 2) if (a[g] === f) throw new s(\"Cannot promisify an API that has normal methods with '%s'-suffix\\n\\n    See http://goo.gl/MqrFmX\\n\".replace(\"%s\", b));\n                                }\n                            }\n                            function h(a, b, c, d) {\n                                for (var h = n.inheritedDataKeys(a), i = [], j = 0; j < h.length; ++j) {\n                                    var k = h[j], l = a[k], m = d === w || w(k, l, a);\n                                    \"function\" != typeof l || e(l) || f(a, k, b) || !d(k, l, a, m) || i.push(k, l);\n                                }\n                                return g(i, b, c), i;\n                            }\n                            function i(a, d, e, f, g, h) {\n                                function i() {\n                                    var e = d;\n                                    d === m && (e = this);\n                                    var f = new b(c);\n                                    f._captureStackTrace();\n                                    var g = \"string\" == typeof k && this !== j ? this[k] : a, i = o(f, h);\n                                    try {\n                                        g.apply(e, p(arguments, i));\n                                    } catch (a) {\n                                        f._rejectCallback(q(a), !0, !0);\n                                    }\n                                    return f._isFateSealed() || f._setAsyncGuaranteed(), f;\n                                }\n                                var j = function() {\n                                    return this;\n                                }(), k = a;\n                                return \"string\" == typeof k && (a = f), n.notEnumerableProp(i, \"__isPromisified__\", !0),\n                                i;\n                            }\n                            function j(a, b, c, d, e) {\n                                for (var f = new RegExp(x(b) + \"$\"), g = h(a, b, f, c), i = 0, j = g.length; i < j; i += 2) {\n                                    var k = g[i], l = g[i + 1], o = k + b;\n                                    if (d === y) a[o] = y(k, m, k, l, b, e); else {\n                                        var p = d(l, function() {\n                                            return y(k, m, k, l, b, e);\n                                        });\n                                        n.notEnumerableProp(p, \"__isPromisified__\", !0), a[o] = p;\n                                    }\n                                }\n                                return n.toFastProperties(a), a;\n                            }\n                            function k(a, b, c) {\n                                return y(a, b, void 0, a, null, c);\n                            }\n                            var l, m = {}, n = a(\"./util\"), o = a(\"./nodeback\"), p = n.withAppended, q = n.maybeWrapAsError, r = n.canEvaluate, s = a(\"./errors\").TypeError, t = {\n                                __isPromisified__: !0\n                            }, u = [ \"arity\", \"length\", \"name\", \"arguments\", \"caller\", \"callee\", \"prototype\", \"__isPromisified__\" ], v = new RegExp(\"^(?:\" + u.join(\"|\") + \")$\"), w = function(a) {\n                                return n.isIdentifier(a) && \"_\" !== a.charAt(0) && \"constructor\" !== a;\n                            }, x = function(a) {\n                                return a.replace(/([$])/, \"\\\\$\");\n                            }, y = r ? l : i;\n                            b.promisify = function(a, b) {\n                                if (\"function\" != typeof a) throw new s(\"expecting a function but got \" + n.classString(a));\n                                if (e(a)) return a;\n                                b = Object(b);\n                                var c = void 0 === b.context ? m : b.context, f = !!b.multiArgs, g = k(a, c, f);\n                                return n.copyDescriptors(a, g, d), g;\n                            }, b.promisifyAll = function(a, b) {\n                                if (\"function\" != typeof a && \"object\" != typeof a) throw new s(\"the target of promisifyAll must be an object or a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                                b = Object(b);\n                                var c = !!b.multiArgs, d = b.suffix;\n                                \"string\" != typeof d && (d = \"Async\");\n                                var e = b.filter;\n                                \"function\" != typeof e && (e = w);\n                                var f = b.promisifier;\n                                if (\"function\" != typeof f && (f = y), !n.isIdentifier(d)) throw new RangeError(\"suffix must be a valid identifier\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                                for (var g = n.inheritedDataKeys(a), h = 0; h < g.length; ++h) {\n                                    var i = a[g[h]];\n                                    \"constructor\" !== g[h] && n.isClass(i) && (j(i.prototype, d, e, f, c), j(i, d, e, f, c));\n                                }\n                                return j(a, d, e, f, c);\n                            };\n                        };\n                    }, {\n                        \"./errors\": 12,\n                        \"./nodeback\": 20,\n                        \"./util\": 36\n                    } ],\n                    25: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d, e) {\n                            function f(a) {\n                                var b, c = !1;\n                                if (void 0 !== h && a instanceof h) b = l(a), c = !0; else {\n                                    var d = k.keys(a), e = d.length;\n                                    b = new Array(2 * e);\n                                    for (var f = 0; f < e; ++f) {\n                                        var g = d[f];\n                                        b[f] = a[g], b[f + e] = g;\n                                    }\n                                }\n                                this.constructor$(b), this._isMap = c, this._init$(void 0, c ? -6 : -3);\n                            }\n                            function g(a) {\n                                var c, g = d(a);\n                                return j(g) ? (c = g instanceof b ? g._then(b.props, void 0, void 0, void 0, void 0) : new f(g).promise(),\n                                g instanceof b && c._propagateFrom(g, 2), c) : e(\"cannot await properties of a non-object\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                            }\n                            var h, i = a(\"./util\"), j = i.isObject, k = a(\"./es5\");\n                            \"function\" == typeof Map && (h = Map);\n                            var l = function() {\n                                function a(a, d) {\n                                    this[b] = a, this[b + c] = d, b++;\n                                }\n                                var b = 0, c = 0;\n                                return function(d) {\n                                    c = d.size, b = 0;\n                                    var e = new Array(2 * d.size);\n                                    return d.forEach(a, e), e;\n                                };\n                            }(), m = function(a) {\n                                for (var b = new h(), c = a.length / 2 | 0, d = 0; d < c; ++d) {\n                                    var e = a[c + d], f = a[d];\n                                    b.set(e, f);\n                                }\n                                return b;\n                            };\n                            i.inherits(f, c), f.prototype._init = function() {}, f.prototype._promiseFulfilled = function(a, b) {\n                                if (this._values[b] = a, ++this._totalResolved >= this._length) {\n                                    var c;\n                                    if (this._isMap) c = m(this._values); else {\n                                        c = {};\n                                        for (var d = this.length(), e = 0, f = this.length(); e < f; ++e) c[this._values[e + d]] = this._values[e];\n                                    }\n                                    return this._resolve(c), !0;\n                                }\n                                return !1;\n                            }, f.prototype.shouldCopyValues = function() {\n                                return !1;\n                            }, f.prototype.getActualLength = function(a) {\n                                return a >> 1;\n                            }, b.prototype.props = function() {\n                                return g(this);\n                            }, b.props = function(a) {\n                                return g(a);\n                            };\n                        };\n                    }, {\n                        \"./es5\": 13,\n                        \"./util\": 36\n                    } ],\n                    26: [ function(a, b, c) {\n                        \"use strict\";\n                        function d(a, b, c, d, e) {\n                            for (var f = 0; f < e; ++f) c[f + d] = a[f + b], a[f + b] = void 0;\n                        }\n                        function e(a) {\n                            this._capacity = a, this._length = 0, this._front = 0;\n                        }\n                        e.prototype._willBeOverCapacity = function(a) {\n                            return this._capacity < a;\n                        }, e.prototype._pushOne = function(a) {\n                            var b = this.length();\n                            this._checkCapacity(b + 1), this[this._front + b & this._capacity - 1] = a, this._length = b + 1;\n                        }, e.prototype.push = function(a, b, c) {\n                            var d = this.length() + 3;\n                            if (this._willBeOverCapacity(d)) return this._pushOne(a), this._pushOne(b), void this._pushOne(c);\n                            var e = this._front + d - 3;\n                            this._checkCapacity(d);\n                            var f = this._capacity - 1;\n                            this[e + 0 & f] = a, this[e + 1 & f] = b, this[e + 2 & f] = c, this._length = d;\n                        }, e.prototype.shift = function() {\n                            var a = this._front, b = this[a];\n                            return this[a] = void 0, this._front = a + 1 & this._capacity - 1, this._length--,\n                            b;\n                        }, e.prototype.length = function() {\n                            return this._length;\n                        }, e.prototype._checkCapacity = function(a) {\n                            this._capacity < a && this._resizeTo(this._capacity << 1);\n                        }, e.prototype._resizeTo = function(a) {\n                            var b = this._capacity;\n                            this._capacity = a, d(this, 0, this, b, this._front + this._length & b - 1);\n                        }, b.exports = e;\n                    }, {} ],\n                    27: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d, e) {\n                            function f(a, f) {\n                                var i = d(a);\n                                if (i instanceof b) return h(i);\n                                if (null === (a = g.asArray(a))) return e(\"expecting an array or an iterable object but got \" + g.classString(a));\n                                var j = new b(c);\n                                void 0 !== f && j._propagateFrom(f, 3);\n                                for (var k = j._fulfill, l = j._reject, m = 0, n = a.length; m < n; ++m) {\n                                    var o = a[m];\n                                    (void 0 !== o || m in a) && b.cast(o)._then(k, l, void 0, j, null);\n                                }\n                                return j;\n                            }\n                            var g = a(\"./util\"), h = function(a) {\n                                return a.then(function(b) {\n                                    return f(b, a);\n                                });\n                            };\n                            b.race = function(a) {\n                                return f(a, void 0);\n                            }, b.prototype.race = function() {\n                                return f(this, void 0);\n                            };\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    28: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d, e, f, g) {\n                            function h(a, c, d, e) {\n                                this.constructor$(a);\n                                var g = m();\n                                this._fn = null === g ? c : n.domainBind(g, c), void 0 !== d && (d = b.resolve(d),\n                                d._attachCancellationCallback(this)), this._initialValue = d, this._currentCancellable = null,\n                                this._eachValues = e === f ? Array(this._length) : 0 === e ? null : void 0, this._promise._captureStackTrace(),\n                                this._init$(void 0, -5);\n                            }\n                            function i(a, b) {\n                                this.isFulfilled() ? b._resolve(a) : b._reject(a);\n                            }\n                            function j(a, b, c, e) {\n                                return \"function\" != typeof b ? d(\"expecting a function but got \" + n.classString(b)) : new h(a, b, c, e).promise();\n                            }\n                            function k(a) {\n                                this.accum = a, this.array._gotAccum(a);\n                                var c = e(this.value, this.array._promise);\n                                return c instanceof b ? (this.array._currentCancellable = c, c._then(l, void 0, void 0, this, void 0)) : l.call(this, c);\n                            }\n                            function l(a) {\n                                var c = this.array, d = c._promise, e = o(c._fn);\n                                d._pushContext();\n                                var f;\n                                (f = void 0 !== c._eachValues ? e.call(d._boundValue(), a, this.index, this.length) : e.call(d._boundValue(), this.accum, a, this.index, this.length)) instanceof b && (c._currentCancellable = f);\n                                var h = d._popContext();\n                                return g.checkForgottenReturns(f, h, void 0 !== c._eachValues ? \"Promise.each\" : \"Promise.reduce\", d),\n                                f;\n                            }\n                            var m = b._getDomain, n = a(\"./util\"), o = n.tryCatch;\n                            n.inherits(h, c), h.prototype._gotAccum = function(a) {\n                                void 0 !== this._eachValues && null !== this._eachValues && a !== f && this._eachValues.push(a);\n                            }, h.prototype._eachComplete = function(a) {\n                                return null !== this._eachValues && this._eachValues.push(a), this._eachValues;\n                            }, h.prototype._init = function() {}, h.prototype._resolveEmptyArray = function() {\n                                this._resolve(void 0 !== this._eachValues ? this._eachValues : this._initialValue);\n                            }, h.prototype.shouldCopyValues = function() {\n                                return !1;\n                            }, h.prototype._resolve = function(a) {\n                                this._promise._resolveCallback(a), this._values = null;\n                            }, h.prototype._resultCancelled = function(a) {\n                                if (a === this._initialValue) return this._cancel();\n                                this._isResolved() || (this._resultCancelled$(), this._currentCancellable instanceof b && this._currentCancellable.cancel(),\n                                this._initialValue instanceof b && this._initialValue.cancel());\n                            }, h.prototype._iterate = function(a) {\n                                this._values = a;\n                                var c, d, e = a.length;\n                                if (void 0 !== this._initialValue ? (c = this._initialValue, d = 0) : (c = b.resolve(a[0]),\n                                d = 1), this._currentCancellable = c, !c.isRejected()) for (;d < e; ++d) {\n                                    var f = {\n                                        accum: null,\n                                        value: a[d],\n                                        index: d,\n                                        length: e,\n                                        array: this\n                                    };\n                                    c = c._then(k, void 0, void 0, f, void 0);\n                                }\n                                void 0 !== this._eachValues && (c = c._then(this._eachComplete, void 0, void 0, this, void 0)),\n                                c._then(i, i, void 0, c, this);\n                            }, b.prototype.reduce = function(a, b) {\n                                return j(this, a, b, null);\n                            }, b.reduce = function(a, b, c, d) {\n                                return j(a, b, c, d);\n                            };\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    29: [ function(b, c, f) {\n                        \"use strict\";\n                        var g, h = b(\"./util\"), i = function() {\n                            throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                        }, j = h.getNativePromise();\n                        if (h.isNode && \"undefined\" == typeof MutationObserver) {\n                            var k = d.setImmediate, l = a.nextTick;\n                            g = h.isRecentNode ? function(a) {\n                                k.call(d, a);\n                            } : function(b) {\n                                l.call(a, b);\n                            };\n                        } else if (\"function\" == typeof j && \"function\" == typeof j.resolve) {\n                            var m = j.resolve();\n                            g = function(a) {\n                                m.then(a);\n                            };\n                        } else g = \"undefined\" == typeof MutationObserver || \"undefined\" != typeof window && window.navigator && (window.navigator.standalone || window.cordova) ? void 0 !== e ? function(a) {\n                            e(a);\n                        } : \"undefined\" != typeof setTimeout ? function(a) {\n                            setTimeout(a, 0);\n                        } : i : function() {\n                            var a = document.createElement(\"div\"), b = {\n                                attributes: !0\n                            }, c = !1, d = document.createElement(\"div\");\n                            new MutationObserver(function() {\n                                a.classList.toggle(\"foo\"), c = !1;\n                            }).observe(d, b);\n                            var e = function() {\n                                c || (c = !0, d.classList.toggle(\"foo\"));\n                            };\n                            return function(c) {\n                                var d = new MutationObserver(function() {\n                                    d.disconnect(), c();\n                                });\n                                d.observe(a, b), e();\n                            };\n                        }();\n                        c.exports = g;\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    30: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d) {\n                            function e(a) {\n                                this.constructor$(a);\n                            }\n                            var f = b.PromiseInspection;\n                            a(\"./util\").inherits(e, c), e.prototype._promiseResolved = function(a, b) {\n                                return this._values[a] = b, ++this._totalResolved >= this._length && (this._resolve(this._values),\n                                !0);\n                            }, e.prototype._promiseFulfilled = function(a, b) {\n                                var c = new f();\n                                return c._bitField = 33554432, c._settledValueField = a, this._promiseResolved(b, c);\n                            }, e.prototype._promiseRejected = function(a, b) {\n                                var c = new f();\n                                return c._bitField = 16777216, c._settledValueField = a, this._promiseResolved(b, c);\n                            }, b.settle = function(a) {\n                                return d.deprecated(\".settle()\", \".reflect()\"), new e(a).promise();\n                            }, b.prototype.settle = function() {\n                                return b.settle(this);\n                            };\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    31: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d) {\n                            function e(a) {\n                                this.constructor$(a), this._howMany = 0, this._unwrap = !1, this._initialized = !1;\n                            }\n                            function f(a, b) {\n                                if ((0 | b) !== b || b < 0) return d(\"expecting a positive integer\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                                var c = new e(a), f = c.promise();\n                                return c.setHowMany(b), c.init(), f;\n                            }\n                            var g = a(\"./util\"), h = a(\"./errors\").RangeError, i = a(\"./errors\").AggregateError, j = g.isArray, k = {};\n                            g.inherits(e, c), e.prototype._init = function() {\n                                if (this._initialized) {\n                                    if (0 === this._howMany) return void this._resolve([]);\n                                    this._init$(void 0, -5);\n                                    var a = j(this._values);\n                                    !this._isResolved() && a && this._howMany > this._canPossiblyFulfill() && this._reject(this._getRangeError(this.length()));\n                                }\n                            }, e.prototype.init = function() {\n                                this._initialized = !0, this._init();\n                            }, e.prototype.setUnwrap = function() {\n                                this._unwrap = !0;\n                            }, e.prototype.howMany = function() {\n                                return this._howMany;\n                            }, e.prototype.setHowMany = function(a) {\n                                this._howMany = a;\n                            }, e.prototype._promiseFulfilled = function(a) {\n                                return this._addFulfilled(a), this._fulfilled() === this.howMany() && (this._values.length = this.howMany(),\n                                1 === this.howMany() && this._unwrap ? this._resolve(this._values[0]) : this._resolve(this._values),\n                                !0);\n                            }, e.prototype._promiseRejected = function(a) {\n                                return this._addRejected(a), this._checkOutcome();\n                            }, e.prototype._promiseCancelled = function() {\n                                return this._values instanceof b || null == this._values ? this._cancel() : (this._addRejected(k),\n                                this._checkOutcome());\n                            }, e.prototype._checkOutcome = function() {\n                                if (this.howMany() > this._canPossiblyFulfill()) {\n                                    for (var a = new i(), b = this.length(); b < this._values.length; ++b) this._values[b] !== k && a.push(this._values[b]);\n                                    return a.length > 0 ? this._reject(a) : this._cancel(), !0;\n                                }\n                                return !1;\n                            }, e.prototype._fulfilled = function() {\n                                return this._totalResolved;\n                            }, e.prototype._rejected = function() {\n                                return this._values.length - this.length();\n                            }, e.prototype._addRejected = function(a) {\n                                this._values.push(a);\n                            }, e.prototype._addFulfilled = function(a) {\n                                this._values[this._totalResolved++] = a;\n                            }, e.prototype._canPossiblyFulfill = function() {\n                                return this.length() - this._rejected();\n                            }, e.prototype._getRangeError = function(a) {\n                                var b = \"Input array must contain at least \" + this._howMany + \" items but contains only \" + a + \" items\";\n                                return new h(b);\n                            }, e.prototype._resolveEmptyArray = function() {\n                                this._reject(this._getRangeError(0));\n                            }, b.some = function(a, b) {\n                                return f(a, b);\n                            }, b.prototype.some = function(a) {\n                                return f(this, a);\n                            }, b._SomePromiseArray = e;\n                        };\n                    }, {\n                        \"./errors\": 12,\n                        \"./util\": 36\n                    } ],\n                    32: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(a) {\n                            function b(a) {\n                                void 0 !== a ? (a = a._target(), this._bitField = a._bitField, this._settledValueField = a._isFateSealed() ? a._settledValue() : void 0) : (this._bitField = 0,\n                                this._settledValueField = void 0);\n                            }\n                            b.prototype._settledValue = function() {\n                                return this._settledValueField;\n                            };\n                            var c = b.prototype.value = function() {\n                                if (!this.isFulfilled()) throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                                return this._settledValue();\n                            }, d = b.prototype.error = b.prototype.reason = function() {\n                                if (!this.isRejected()) throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                                return this._settledValue();\n                            }, e = b.prototype.isFulfilled = function() {\n                                return 0 != (33554432 & this._bitField);\n                            }, f = b.prototype.isRejected = function() {\n                                return 0 != (16777216 & this._bitField);\n                            }, g = b.prototype.isPending = function() {\n                                return 0 == (50397184 & this._bitField);\n                            }, h = b.prototype.isResolved = function() {\n                                return 0 != (50331648 & this._bitField);\n                            };\n                            b.prototype.isCancelled = function() {\n                                return 0 != (8454144 & this._bitField);\n                            }, a.prototype.__isCancelled = function() {\n                                return 65536 == (65536 & this._bitField);\n                            }, a.prototype._isCancelled = function() {\n                                return this._target().__isCancelled();\n                            }, a.prototype.isCancelled = function() {\n                                return 0 != (8454144 & this._target()._bitField);\n                            }, a.prototype.isPending = function() {\n                                return g.call(this._target());\n                            }, a.prototype.isRejected = function() {\n                                return f.call(this._target());\n                            }, a.prototype.isFulfilled = function() {\n                                return e.call(this._target());\n                            }, a.prototype.isResolved = function() {\n                                return h.call(this._target());\n                            }, a.prototype.value = function() {\n                                return c.call(this._target());\n                            }, a.prototype.reason = function() {\n                                var a = this._target();\n                                return a._unsetRejectionIsUnhandled(), d.call(a);\n                            }, a.prototype._value = function() {\n                                return this._settledValue();\n                            }, a.prototype._reason = function() {\n                                return this._unsetRejectionIsUnhandled(), this._settledValue();\n                            }, a.PromiseInspection = b;\n                        };\n                    }, {} ],\n                    33: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c) {\n                            function d(a, d) {\n                                if (k(a)) {\n                                    if (a instanceof b) return a;\n                                    var e = f(a);\n                                    if (e === j) {\n                                        d && d._pushContext();\n                                        var i = b.reject(e.e);\n                                        return d && d._popContext(), i;\n                                    }\n                                    if (\"function\" == typeof e) {\n                                        if (g(a)) {\n                                            var i = new b(c);\n                                            return a._then(i._fulfill, i._reject, void 0, i, null), i;\n                                        }\n                                        return h(a, e, d);\n                                    }\n                                }\n                                return a;\n                            }\n                            function e(a) {\n                                return a.then;\n                            }\n                            function f(a) {\n                                try {\n                                    return e(a);\n                                } catch (a) {\n                                    return j.e = a, j;\n                                }\n                            }\n                            function g(a) {\n                                try {\n                                    return l.call(a, \"_promise0\");\n                                } catch (a) {\n                                    return !1;\n                                }\n                            }\n                            function h(a, d, e) {\n                                function f(a) {\n                                    h && (h._resolveCallback(a), h = null);\n                                }\n                                function g(a) {\n                                    h && (h._rejectCallback(a, l, !0), h = null);\n                                }\n                                var h = new b(c), k = h;\n                                e && e._pushContext(), h._captureStackTrace(), e && e._popContext();\n                                var l = !0, m = i.tryCatch(d).call(a, f, g);\n                                return l = !1, h && m === j && (h._rejectCallback(m.e, !0, !0), h = null), k;\n                            }\n                            var i = a(\"./util\"), j = i.errorObj, k = i.isObject, l = {}.hasOwnProperty;\n                            return d;\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    34: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d) {\n                            function e(a) {\n                                this.handle = a;\n                            }\n                            function f(a) {\n                                return clearTimeout(this.handle), a;\n                            }\n                            function g(a) {\n                                throw clearTimeout(this.handle), a;\n                            }\n                            var h = a(\"./util\"), i = b.TimeoutError;\n                            e.prototype._resultCancelled = function() {\n                                clearTimeout(this.handle);\n                            };\n                            var j = function(a) {\n                                return k(+this).thenReturn(a);\n                            }, k = b.delay = function(a, f) {\n                                var g, h;\n                                return void 0 !== f ? (g = b.resolve(f)._then(j, null, null, a, void 0), d.cancellation() && f instanceof b && g._setOnCancel(f)) : (g = new b(c),\n                                h = setTimeout(function() {\n                                    g._fulfill();\n                                }, +a), d.cancellation() && g._setOnCancel(new e(h)), g._captureStackTrace()), g._setAsyncGuaranteed(),\n                                g;\n                            };\n                            b.prototype.delay = function(a) {\n                                return k(a, this);\n                            };\n                            var l = function(a, b, c) {\n                                var d;\n                                d = \"string\" != typeof b ? b instanceof Error ? b : new i(\"operation timed out\") : new i(b),\n                                h.markAsOriginatingFromRejection(d), a._attachExtraTrace(d), a._reject(d), null != c && c.cancel();\n                            };\n                            b.prototype.timeout = function(a, b) {\n                                a = +a;\n                                var c, h, i = new e(setTimeout(function() {\n                                    c.isPending() && l(c, b, h);\n                                }, a));\n                                return d.cancellation() ? (h = this.then(), c = h._then(f, g, void 0, i, void 0),\n                                c._setOnCancel(i)) : c = this._then(f, g, void 0, i, void 0), c;\n                            };\n                        };\n                    }, {\n                        \"./util\": 36\n                    } ],\n                    35: [ function(a, b, c) {\n                        \"use strict\";\n                        b.exports = function(b, c, d, e, f, g) {\n                            function h(a) {\n                                setTimeout(function() {\n                                    throw a;\n                                }, 0);\n                            }\n                            function i(a) {\n                                var b = d(a);\n                                return b !== a && \"function\" == typeof a._isDisposable && \"function\" == typeof a._getDisposer && a._isDisposable() && b._setDisposable(a._getDisposer()),\n                                b;\n                            }\n                            function j(a, c) {\n                                function e() {\n                                    if (g >= j) return k._fulfill();\n                                    var f = i(a[g++]);\n                                    if (f instanceof b && f._isDisposable()) {\n                                        try {\n                                            f = d(f._getDisposer().tryDispose(c), a.promise);\n                                        } catch (a) {\n                                            return h(a);\n                                        }\n                                        if (f instanceof b) return f._then(e, h, null, null, null);\n                                    }\n                                    e();\n                                }\n                                var g = 0, j = a.length, k = new b(f);\n                                return e(), k;\n                            }\n                            function k(a, b, c) {\n                                this._data = a, this._promise = b, this._context = c;\n                            }\n                            function l(a, b, c) {\n                                this.constructor$(a, b, c);\n                            }\n                            function m(a) {\n                                return k.isDisposer(a) ? (this.resources[this.index]._setDisposable(a), a.promise()) : a;\n                            }\n                            function n(a) {\n                                this.length = a, this.promise = null, this[a - 1] = null;\n                            }\n                            var o = a(\"./util\"), p = a(\"./errors\").TypeError, q = a(\"./util\").inherits, r = o.errorObj, s = o.tryCatch, t = {};\n                            k.prototype.data = function() {\n                                return this._data;\n                            }, k.prototype.promise = function() {\n                                return this._promise;\n                            }, k.prototype.resource = function() {\n                                return this.promise().isFulfilled() ? this.promise().value() : t;\n                            }, k.prototype.tryDispose = function(a) {\n                                var b = this.resource(), c = this._context;\n                                void 0 !== c && c._pushContext();\n                                var d = b !== t ? this.doDispose(b, a) : null;\n                                return void 0 !== c && c._popContext(), this._promise._unsetDisposable(), this._data = null,\n                                d;\n                            }, k.isDisposer = function(a) {\n                                return null != a && \"function\" == typeof a.resource && \"function\" == typeof a.tryDispose;\n                            }, q(l, k), l.prototype.doDispose = function(a, b) {\n                                return this.data().call(a, a, b);\n                            }, n.prototype._resultCancelled = function() {\n                                for (var a = this.length, c = 0; c < a; ++c) {\n                                    var d = this[c];\n                                    d instanceof b && d.cancel();\n                                }\n                            }, b.using = function() {\n                                var a = arguments.length;\n                                if (a < 2) return c(\"you must pass at least 2 arguments to Promise.using\");\n                                var e = arguments[a - 1];\n                                if (\"function\" != typeof e) return c(\"expecting a function but got \" + o.classString(e));\n                                var f, h = !0;\n                                2 === a && Array.isArray(arguments[0]) ? (f = arguments[0], a = f.length, h = !1) : (f = arguments,\n                                a--);\n                                for (var i = new n(a), l = 0; l < a; ++l) {\n                                    var p = f[l];\n                                    if (k.isDisposer(p)) {\n                                        var q = p;\n                                        p = p.promise(), p._setDisposable(q);\n                                    } else {\n                                        var t = d(p);\n                                        t instanceof b && (p = t._then(m, null, null, {\n                                            resources: i,\n                                            index: l\n                                        }, void 0));\n                                    }\n                                    i[l] = p;\n                                }\n                                for (var u = new Array(i.length), l = 0; l < u.length; ++l) u[l] = b.resolve(i[l]).reflect();\n                                var v = b.all(u).then(function(a) {\n                                    for (var b = 0; b < a.length; ++b) {\n                                        var c = a[b];\n                                        if (c.isRejected()) return r.e = c.error(), r;\n                                        if (!c.isFulfilled()) return void v.cancel();\n                                        a[b] = c.value();\n                                    }\n                                    w._pushContext(), e = s(e);\n                                    var d = h ? e.apply(void 0, a) : e(a), f = w._popContext();\n                                    return g.checkForgottenReturns(d, f, \"Promise.using\", w), d;\n                                }), w = v.lastly(function() {\n                                    var a = new b.PromiseInspection(v);\n                                    return j(i, a);\n                                });\n                                return i.promise = w, w._setOnCancel(i), w;\n                            }, b.prototype._setDisposable = function(a) {\n                                this._bitField = 131072 | this._bitField, this._disposer = a;\n                            }, b.prototype._isDisposable = function() {\n                                return (131072 & this._bitField) > 0;\n                            }, b.prototype._getDisposer = function() {\n                                return this._disposer;\n                            }, b.prototype._unsetDisposable = function() {\n                                this._bitField = -131073 & this._bitField, this._disposer = void 0;\n                            }, b.prototype.disposer = function(a) {\n                                if (\"function\" == typeof a) return new l(a, this, e());\n                                throw new p();\n                            };\n                        };\n                    }, {\n                        \"./errors\": 12,\n                        \"./util\": 36\n                    } ],\n                    36: [ function(b, c, e) {\n                        \"use strict\";\n                        function f() {\n                            try {\n                                var a = F;\n                                return F = null, a.apply(this, arguments);\n                            } catch (a) {\n                                return E.e = a, E;\n                            }\n                        }\n                        function g(a) {\n                            return F = a, f;\n                        }\n                        function h(a) {\n                            return null == a || !0 === a || !1 === a || \"string\" == typeof a || \"number\" == typeof a;\n                        }\n                        function i(a) {\n                            return \"function\" == typeof a || \"object\" == typeof a && null !== a;\n                        }\n                        function j(a) {\n                            return h(a) ? new Error(s(a)) : a;\n                        }\n                        function k(a, b) {\n                            var c, d = a.length, e = new Array(d + 1);\n                            for (c = 0; c < d; ++c) e[c] = a[c];\n                            return e[c] = b, e;\n                        }\n                        function l(a, b, c) {\n                            if (!C.isES5) return {}.hasOwnProperty.call(a, b) ? a[b] : void 0;\n                            var d = Object.getOwnPropertyDescriptor(a, b);\n                            return null != d ? null == d.get && null == d.set ? d.value : c : void 0;\n                        }\n                        function m(a, b, c) {\n                            if (h(a)) return a;\n                            var d = {\n                                value: c,\n                                configurable: !0,\n                                enumerable: !1,\n                                writable: !0\n                            };\n                            return C.defineProperty(a, b, d), a;\n                        }\n                        function n(a) {\n                            throw a;\n                        }\n                        function o(a) {\n                            try {\n                                if (\"function\" == typeof a) {\n                                    var b = C.names(a.prototype), c = C.isES5 && b.length > 1, d = b.length > 0 && !(1 === b.length && \"constructor\" === b[0]), e = J.test(a + \"\") && C.names(a).length > 0;\n                                    if (c || d || e) return !0;\n                                }\n                                return !1;\n                            } catch (a) {\n                                return !1;\n                            }\n                        }\n                        function p(a) {\n                            function b() {}\n                            b.prototype = a;\n                            for (var c = 8; c--; ) new b();\n                            return a;\n                        }\n                        function q(a) {\n                            return K.test(a);\n                        }\n                        function r(a, b, c) {\n                            for (var d = new Array(a), e = 0; e < a; ++e) d[e] = b + e + c;\n                            return d;\n                        }\n                        function s(a) {\n                            try {\n                                return a + \"\";\n                            } catch (a) {\n                                return \"[no string representation]\";\n                            }\n                        }\n                        function t(a) {\n                            return a instanceof Error || null !== a && \"object\" == typeof a && \"string\" == typeof a.message && \"string\" == typeof a.name;\n                        }\n                        function u(a) {\n                            try {\n                                m(a, \"isOperational\", !0);\n                            } catch (a) {}\n                        }\n                        function v(a) {\n                            return null != a && (a instanceof Error.__BluebirdErrorTypes__.OperationalError || !0 === a.isOperational);\n                        }\n                        function w(a) {\n                            return t(a) && C.propertyIsWritable(a, \"stack\");\n                        }\n                        function x(a) {\n                            return {}.toString.call(a);\n                        }\n                        function y(a, b, c) {\n                            for (var d = C.names(a), e = 0; e < d.length; ++e) {\n                                var f = d[e];\n                                if (c(f)) try {\n                                    C.defineProperty(b, f, C.getDescriptor(a, f));\n                                } catch (a) {}\n                            }\n                        }\n                        function z(b) {\n                            return P ? a.env[b] : void 0;\n                        }\n                        function A() {\n                            if (\"function\" == typeof Promise) try {\n                                var a = new Promise(function() {});\n                                if (\"[object Promise]\" === {}.toString.call(a)) return Promise;\n                            } catch (a) {}\n                        }\n                        function B(a, b) {\n                            return a.bind(b);\n                        }\n                        var C = b(\"./es5\"), D = \"undefined\" == typeof navigator, E = {\n                            e: {}\n                        }, F, G = \"undefined\" != typeof self ? self : \"undefined\" != typeof window ? window : void 0 !== d ? d : void 0 !== this ? this : null, H = function(a, b) {\n                            function c() {\n                                this.constructor = a, this.constructor$ = b;\n                                for (var c in b.prototype) d.call(b.prototype, c) && \"$\" !== c.charAt(c.length - 1) && (this[c + \"$\"] = b.prototype[c]);\n                            }\n                            var d = {}.hasOwnProperty;\n                            return c.prototype = b.prototype, a.prototype = new c(), a.prototype;\n                        }, I = function() {\n                            var a = [ Array.prototype, Object.prototype, Function.prototype ], b = function(b) {\n                                for (var c = 0; c < a.length; ++c) if (a[c] === b) return !0;\n                                return !1;\n                            };\n                            if (C.isES5) {\n                                var c = Object.getOwnPropertyNames;\n                                return function(a) {\n                                    for (var d = [], e = Object.create(null); null != a && !b(a); ) {\n                                        var f;\n                                        try {\n                                            f = c(a);\n                                        } catch (a) {\n                                            return d;\n                                        }\n                                        for (var g = 0; g < f.length; ++g) {\n                                            var h = f[g];\n                                            if (!e[h]) {\n                                                e[h] = !0;\n                                                var i = Object.getOwnPropertyDescriptor(a, h);\n                                                null != i && null == i.get && null == i.set && d.push(h);\n                                            }\n                                        }\n                                        a = C.getPrototypeOf(a);\n                                    }\n                                    return d;\n                                };\n                            }\n                            var d = {}.hasOwnProperty;\n                            return function(c) {\n                                if (b(c)) return [];\n                                var e = [];\n                                a: for (var f in c) if (d.call(c, f)) e.push(f); else {\n                                    for (var g = 0; g < a.length; ++g) if (d.call(a[g], f)) continue a;\n                                    e.push(f);\n                                }\n                                return e;\n                            };\n                        }(), J = /this\\s*\\.\\s*\\S+\\s*=/, K = /^[a-z$_][a-z$_0-9]*$/i, L = function() {\n                            return \"stack\" in new Error() ? function(a) {\n                                return w(a) ? a : new Error(s(a));\n                            } : function(a) {\n                                if (w(a)) return a;\n                                try {\n                                    throw new Error(s(a));\n                                } catch (a) {\n                                    return a;\n                                }\n                            };\n                        }(), M = function(a) {\n                            return C.isArray(a) ? a : null;\n                        };\n                        if (\"undefined\" != typeof Symbol && Symbol.iterator) {\n                            var N = \"function\" == typeof Array.from ? function(a) {\n                                return Array.from(a);\n                            } : function(a) {\n                                for (var b, c = [], d = a[Symbol.iterator](); !(b = d.next()).done; ) c.push(b.value);\n                                return c;\n                            };\n                            M = function(a) {\n                                return C.isArray(a) ? a : null != a && \"function\" == typeof a[Symbol.iterator] ? N(a) : null;\n                            };\n                        }\n                        var O = void 0 !== a && \"[object process]\" === x(a).toLowerCase(), P = void 0 !== a && void 0 !== a.env, Q = {\n                            isClass: o,\n                            isIdentifier: q,\n                            inheritedDataKeys: I,\n                            getDataPropertyOrDefault: l,\n                            thrower: n,\n                            isArray: C.isArray,\n                            asArray: M,\n                            notEnumerableProp: m,\n                            isPrimitive: h,\n                            isObject: i,\n                            isError: t,\n                            canEvaluate: D,\n                            errorObj: E,\n                            tryCatch: g,\n                            inherits: H,\n                            withAppended: k,\n                            maybeWrapAsError: j,\n                            toFastProperties: p,\n                            filledRange: r,\n                            toString: s,\n                            canAttachTrace: w,\n                            ensureErrorObject: L,\n                            originatesFromRejection: v,\n                            markAsOriginatingFromRejection: u,\n                            classString: x,\n                            copyDescriptors: y,\n                            hasDevTools: \"undefined\" != typeof chrome && chrome && \"function\" == typeof chrome.loadTimes,\n                            isNode: O,\n                            hasEnvVariables: P,\n                            env: z,\n                            global: G,\n                            getNativePromise: A,\n                            domainBind: B\n                        };\n                        Q.isRecentNode = Q.isNode && function() {\n                            var b = a.versions.node.split(\".\").map(Number);\n                            return 0 === b[0] && b[1] > 10 || b[0] > 0;\n                        }(), Q.isNode && Q.toFastProperties(a);\n                        try {\n                            throw new Error();\n                        } catch (a) {\n                            Q.lastLineError = a;\n                        }\n                        c.exports = Q;\n                    }, {\n                        \"./es5\": 13\n                    } ]\n                }, {}, [ 4 ])(4);\n            }), \"undefined\" != typeof window && null !== window ? window.P = window.Promise : \"undefined\" != typeof self && null !== self && (self.P = self.Promise);\n        }).call(this, a(\"_process\"), \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : \"undefined\" != typeof window ? window : {}, a(\"timers\").setImmediate);\n    }, {\n        _process: 15,\n        timers: 16\n    } ],\n    2: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.PreCallTest = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./turnConnection\"), g = a(\"./tests/rttTest\"), h = a(\"./tests/throughputTest\"), i = a(\"./utility/resultsHandler\"), j = a(\"./utility/onlineCheck\"), k = a(\"./utility/stats/detectbrowser\"), l = a(\"bluebird\"), m = {\n            RTT: \"rtt\",\n            THROUGHPUT: \"throughput\"\n        }, n = function() {\n            function a() {\n                d(this, a), this.browserInfo = (0, k.detect)(), this.onlineCheck = new j.OnlineCheck(),\n                this.callsInProgress = 0, this.turnTests = [ m.RTT, m.THROUGHPUT ], this.active = !1,\n                this.rtt = null, this.resultsHandler = null;\n            }\n            return e(a, [ {\n                key: \"start\",\n                value: function(a, b, c) {\n                    if (this.browserInfo.browserName !== k.Constants.browserName.msie) if (this.iceServers = a,\n                    this.callback = c, this.active) this.callback && this.callback(null, \"Not started: already in progress\"); else if (0 < this.callsInProgress) this.callback && this.callback(null, \"Not started: call in progress\"); else if (a) {\n                        this.turnTestCounter = 0, this.resultsHandler = new i.ResultsHandler(), this.resultsHandler.setProvider(b);\n                        var d = {\n                            type: \"browser\",\n                            os: this.browserInfo.os,\n                            osVersion: this.browserInfo.osVersion,\n                            buildName: this.browserInfo.browserName,\n                            buildVersion: this.browserInfo.browserVersion\n                        };\n                        this.resultsHandler.add(\"endpointInfo\", d), this.onlineCheck.start(), this.active = !0,\n                        this._start();\n                    } else this.callback && this.callback(null, \"Not started: no ICE servers given\"); else this.callback && this.callback(null, \"Not started: disabled for IE\");\n                }\n            }, {\n                key: \"_start\",\n                value: function() {\n                    var a = this;\n                    this.active && (this.turnConnection = new f.TurnConnection(this.browserInfo), this.turnConnection.connect(this.iceServers).then(function() {\n                        a.active ? (a.resultsHandler && a.resultsHandler.setStatusSuccess(), a.startTurnTests().then(function() {\n                            a.stop();\n                        }, function(b) {\n                            a.stop();\n                        })) : a.stop();\n                    }, function(b) {\n                        var c = b.continueFlag;\n                        if (a.resultsHandler.failure(b), !c) {\n                            a.turnConnection.disconnect(), a.active = !1;\n                            var d = \"\";\n                            try {\n                                d = b.stack;\n                            } catch (c) {\n                                d = b.toString();\n                            }\n                            return d && \"\" !== d || (d = b.toString()), a.resultsHandler && a.resultsHandler.setStatusFailed(),\n                            void a.callback(null, d);\n                        }\n                        a.resultsHandler.setStatusFailed(), a.resultsHandler.getFailureNumber() >= 10 ? a.stop() : (a.turnConnection.disconnect(),\n                        setTimeout(function() {\n                            a._start();\n                        }, 0));\n                    }));\n                }\n            }, {\n                key: \"stop\",\n                value: function() {\n                    var a = this;\n                    if (this.browserInfo.browserName !== k.Constants.browserName.msie && this.active) {\n                        this.active = !1, this.activeTurnTest && this.activeTurnTest.forceStop();\n                        var b = this.onlineCheck.stop();\n                        this.resultsHandler && this.resultsHandler.add(\"onlineStatus\", b), this.turnConnection.getIceResults().then(function(b) {\n                            a.resultsHandler && a.resultsHandler.add(\"ice\", b), a.turnConnection.disconnect(),\n                            a.sendResults();\n                        }, function(b) {\n                            a.resultsHandler && a.resultsHandler.failure(b), a.turnConnection.disconnect(),\n                            a.sendResults();\n                        });\n                    }\n                }\n            }, {\n                key: \"sendResults\",\n                value: function() {\n                    if (this.resultsHandler) {\n                        var a = this.resultsHandler.getResults();\n                        this.resultsHandler = null, this.callback && this.callback(a, null);\n                    } else this.callback && this.callback(null, \"No results present\");\n                }\n            }, {\n                key: \"callStarts\",\n                value: function() {\n                    this.callsInProgress += 1, this.resultsHandler && this.resultsHandler.setStatusStopped(),\n                    this.stop();\n                }\n            }, {\n                key: \"callFinished\",\n                value: function() {\n                    this.callsInProgress -= 1;\n                }\n            }, {\n                key: \"getId\",\n                value: function() {\n                    return this.resultsHandler ? this.resultsHandler.getId() : null;\n                }\n            }, {\n                key: \"crashDisconnect\",\n                value: function() {\n                    try {\n                        this.turnConnection.disconnect();\n                    } catch (a) {}\n                }\n            }, {\n                key: \"startTurnTests\",\n                value: function() {\n                    var a = this;\n                    if (this.turnTestCounter >= this.turnTests.length) return new l(function(a, b) {\n                        a();\n                    });\n                    var b = this.turnTests[this.turnTestCounter], c = null;\n                    switch (b) {\n                      case m.RTT:\n                        c = new g.RttTest(this.turnConnection);\n                        break;\n\n                      case m.THROUGHPUT:\n                        c = new h.ThroughputTest(this.turnConnection, this.rtt);\n                        break;\n\n                      default:\n                        return new l(function(a, c) {\n                            c(new Error(\"Unknown test: \" + b));\n                        });\n                    }\n                    return this.activeTurnTest = c, this.active ? c.start().then(function() {\n                        return a.handleTestResults(b, c.getResults()), a.turnTestCounter += 1, a.activeTurnTest = null,\n                        a.startTurnTests();\n                    }, function(d) {\n                        return a.handleTestResults(b, c.getResults(), d), a.turnTestCounter += 1, a.activeTurnTest = null,\n                        a.startTurnTests();\n                    }) : new l(function(a, b) {\n                        b(new Error(\"Test trying to start while testing is not active\"));\n                    });\n                }\n            }, {\n                key: \"handleTestResults\",\n                value: function(a, b) {\n                    null == (2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null) && a == m.RTT && (this.rtt = b.median),\n                    this.resultsHandler && this.resultsHandler.add(a, b);\n                }\n            } ]), a;\n        }();\n        c.PreCallTest = n;\n    }, {\n        \"./tests/rttTest\": 3,\n        \"./tests/throughputTest\": 4,\n        \"./turnConnection\": 6,\n        \"./utility/onlineCheck\": 8,\n        \"./utility/resultsHandler\": 10,\n        \"./utility/stats/detectbrowser\": 11,\n        bluebird: 1\n    } ],\n    3: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function e(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function f(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.RttTest = void 0;\n        var g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = function a(b, c, d) {\n            null === b && (b = Function.prototype);\n            var e = Object.getOwnPropertyDescriptor(b, c);\n            if (void 0 === e) {\n                var f = Object.getPrototypeOf(b);\n                return null === f ? void 0 : a(f, c, d);\n            }\n            if (\"value\" in e) return e.value;\n            var g = e.get;\n            return void 0 !== g ? g.call(d) : void 0;\n        }, i = a(\"../utility/timestamps\"), j = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(i), k = a(\"./turnTest\"), l = function(a) {\n            function b(a) {\n                d(this, b);\n                var c = e(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));\n                return c.sendTimer = null, c.countSent = 0, c.rtts = [], c;\n            }\n            return f(b, k.TurnTest), g(b, [ {\n                key: \"initiate\",\n                value: function() {\n                    this.results.startTimestamp = j.getCurrent(), this.sendPing();\n                }\n            }, {\n                key: \"handleMessage\",\n                value: function(a) {\n                    if (this.isActive()) {\n                        var b = parseInt(a, 10), c = this.calculateRtt(b);\n                        this.rtts.push(c), this.countSent < 10 ? this.sendPing() : this.calculateMetrics();\n                    }\n                }\n            }, {\n                key: \"handleError\",\n                value: function(a) {\n                    this.fillResults(), this.failed(a);\n                }\n            }, {\n                key: \"sendPing\",\n                value: function() {\n                    if (this.isActive()) {\n                        var a = j.getCurrent();\n                        this.send(a.toString()), this.countSent += 1, this.sendTimer && (clearTimeout(this.sendTimer),\n                        this.sendTimer = null), this.countSent < 10 ? this.sendTimer = setTimeout(this.sendPing.bind(this), 100) : this.sendTimer = setTimeout(this.calculateMetrics.bind(this), 500);\n                    }\n                }\n            }, {\n                key: \"calculateRtt\",\n                value: function(a) {\n                    return j.getCurrent() - a;\n                }\n            }, {\n                key: \"calculateMetrics\",\n                value: function() {\n                    this.sendTimer && (clearTimeout(this.sendTimer), this.sendTimer = null), this.fillResults(),\n                    this.finished();\n                }\n            }, {\n                key: \"fillResults\",\n                value: function() {\n                    this.results.sentMessages = this.countSent, this.results.unAckedMessages = this.countSent - this.rtts.length,\n                    this.results.maxMessages = 10, this.results.forceStopped = this.forceStopped, this.results.median = this.median(),\n                    this.results.average = this.average(), this.results.variance = this.variance(),\n                    this.results.endTimestamp = j.getCurrent();\n                }\n            }, {\n                key: \"median\",\n                value: function() {\n                    if (0 == this.rtts.length) return null;\n                    this.rtts.sort();\n                    var a = Math.floor(this.rtts.length / 2);\n                    return this.rtts[a];\n                }\n            }, {\n                key: \"average\",\n                value: function() {\n                    if (0 == this.rtts.length) return null;\n                    for (var a = 0, b = 0; b < this.rtts.length; b++) a += this.rtts[b];\n                    return a / this.rtts.length;\n                }\n            }, {\n                key: \"variance\",\n                value: function() {\n                    if (0 == this.rtts.length) return null;\n                    for (var a = 0, b = this.average(), c = 0; c < this.rtts.length; c++) {\n                        var d = this.rtts[c];\n                        a += Math.pow(d - b, 2);\n                    }\n                    return a /= this.rtts.length;\n                }\n            }, {\n                key: \"stop\",\n                value: function() {\n                    this.isActive() && (h(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"stop\", this).call(this),\n                    this.fillResults());\n                }\n            } ]), b;\n        }();\n        c.RttTest = l;\n    }, {\n        \"../utility/timestamps\": 14,\n        \"./turnTest\": 5\n    } ],\n    4: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function e(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function f(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.ThroughputTest = void 0;\n        var g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = function a(b, c, d) {\n            null === b && (b = Function.prototype);\n            var e = Object.getOwnPropertyDescriptor(b, c);\n            if (void 0 === e) {\n                var f = Object.getPrototypeOf(b);\n                return null === f ? void 0 : a(f, c, d);\n            }\n            if (\"value\" in e) return e.value;\n            var g = e.get;\n            return void 0 !== g ? g.call(d) : void 0;\n        }, i = a(\"../utility/timestamps\"), j = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(i), k = a(\"../utility/messageMaker\"), l = a(\"./turnTest\"), m = function(a) {\n            function b(a, c) {\n                d(this, b);\n                var f = e(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));\n                if (f.sentBytes = 0, f.receivedBytes = 0, f.secondHalfBytes = 0, f.secondHalfStart = null,\n                f.bufferEmpty = 0, f.chunkSize = 1200, f.messageMaker = new k.MessageMaker(f.chunkSize),\n                f.duration = 5e3, null != c) {\n                    var g = 50 * c;\n                    f.duration = Math.max(Math.min(g, 1e4), 1e3);\n                }\n                return f.sendTimer = null, f.lastMessage = null, f.intervals = [], f.intervalStart = 0,\n                f.intervalLength = 100, f.intervalBytes = 0, f;\n            }\n            return f(b, l.TurnTest), g(b, [ {\n                key: \"initiate\",\n                value: function() {\n                    if (window && window.csioReactNative) {\n                        this.handleError(new Error(\"Not running throughput test for react-native\"));\n                    } else this.startSend();\n                }\n            }, {\n                key: \"handleMessage\",\n                value: function(a) {\n                    var b = this;\n                    if (this.isActive()) {\n                        this.lastMessage = a, this.receivedBytes += a.length;\n                        var c = j.getCurrent();\n                        if (this.sendTimer || (this.results.startTimestamp = c, this.sendTimer = setTimeout(function() {\n                            b.stop(), b.finished();\n                        }, this.duration)), 0 == this.intervalStart && (this.intervalStart = c), this.intervalBytes += a.length,\n                        c - this.intervalStart >= this.intervalLength) {\n                            var d = c - this.intervalStart, e = this.averageThroughput(this.intervalBytes, d), f = null;\n                            try {\n                                f = c - JSON.parse(this.lastMessage).timestamp;\n                            } catch (a) {}\n                            this.intervals.push({\n                                startTimestamp: this.intervalStart,\n                                endTimestamp: c,\n                                bytesReceived: this.intervalBytes,\n                                average: e,\n                                rtt: f\n                            }), this.intervalStart = c, this.intervalBytes = 0;\n                        }\n                        this.results.startTimestamp && c - this.results.startTimestamp > this.duration / 2 && (this.secondHalfStart || (this.secondHalfStart = c),\n                        this.secondHalfBytes += a.length);\n                    }\n                }\n            }, {\n                key: \"handleError\",\n                value: function(a) {\n                    this.stop(), this.failed(a);\n                }\n            }, {\n                key: \"averageThroughput\",\n                value: function(a, b) {\n                    return a / (b / 1e3) * 8 / 1024;\n                }\n            }, {\n                key: \"bufferListener\",\n                value: function() {\n                    this.sendChannel.removeEventListener(\"bufferedamountlow\", this.bufferListener.bind(this)),\n                    this.fillBuffer();\n                }\n            }, {\n                key: \"fillBuffer\",\n                value: function() {\n                    for (0 == this.sendChannel.bufferedAmount && (this.bufferEmpty += 1); this.isActive(); ) {\n                        if (this.sendChannel.bufferedAmount > this.bufferFullThreshold) return void (this.usePolling ? setTimeout(this.fillBuffer.bind(this), 250) : this.sendChannel.addEventListener(\"bufferedamountlow\", this.bufferListener.bind(this)));\n                        var a = this.messageMaker.make(this.sentBytes);\n                        this.sentBytes += a.length, this.send(a);\n                    }\n                    this.sendChannel.removeEventListener(\"bufferedamountlow\", this.bufferListener.bind(this));\n                }\n            }, {\n                key: \"startSend\",\n                value: function() {\n                    this.isActive() && (this.bufferFullThreshold = 1e3 * this.chunkSize, this.sendChannel = this.connection.sendChannel,\n                    this.usePolling = !0, \"number\" == typeof this.sendChannel.bufferedAmountLowThreshold && (this.usePolling = !1,\n                    this.sendChannel.bufferedAmountLowThreshold = this.bufferFullThreshold / 10), setTimeout(this.fillBuffer.bind(this), 0));\n                }\n            }, {\n                key: \"fillResults\",\n                value: function() {\n                    this.results.endTimestamp = j.getCurrent(), this.results.maxDuration = this.duration,\n                    this.results.forceStopped = this.forceStopped, this.results.bufferEmpty = this.bufferEmpty,\n                    this.results.intervals = this.intervals, this.results.bytesPrepared = this.sentBytes,\n                    this.results.bytesReceived = this.receivedBytes;\n                    var a = 0, b = 0;\n                    this.secondHalfStart && (a = this.results.endTimestamp - this.secondHalfStart, b = this.averageThroughput(this.secondHalfBytes, a));\n                    var c = this.results.endTimestamp - this.results.startTimestamp, d = this.averageThroughput(this.receivedBytes, c);\n                    b < d && (b = d), this.results.average = b;\n                    var e = null;\n                    try {\n                        e = JSON.parse(this.lastMessage);\n                    } catch (a) {\n                        return;\n                    }\n                    if (e) {\n                        var f = e.sentBytes + this.lastMessage.length;\n                        this.results.bytesSent = f, this.results.fractionLostBytes = 1 - this.receivedBytes / f;\n                    } else this.results.bytesSent = -1, this.results.fractionLostBytes = -1;\n                }\n            }, {\n                key: \"stop\",\n                value: function() {\n                    this.isActive() && (clearTimeout(this.sendTimer), this.sendTimer = null, h(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"stop\", this).call(this),\n                    this.fillResults());\n                }\n            } ]), b;\n        }();\n        c.ThroughputTest = m;\n    }, {\n        \"../utility/messageMaker\": 7,\n        \"../utility/timestamps\": 14,\n        \"./turnTest\": 5\n    } ],\n    5: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"bluebird\"), g = function() {\n            function a(b) {\n                d(this, a), this.connection = b, this.active = !1, this.results = {};\n            }\n            return e(a, [ {\n                key: \"getResults\",\n                value: function() {\n                    return this.results;\n                }\n            }, {\n                key: \"start\",\n                value: function() {\n                    var a = this, b = new f(function(b, c) {\n                        a.resolveCb = b, a.rejectCb = c;\n                    });\n                    return this.connection.setMessageCallback(this.handleMessage.bind(this)), this.connection.setErrorCallback(this.handleError.bind(this)),\n                    this.active = !0, this.forceStopped = !1, this.initiate(), b;\n                }\n            }, {\n                key: \"stop\",\n                value: function() {\n                    this.active = !1;\n                }\n            }, {\n                key: \"forceStop\",\n                value: function() {\n                    this.forceStopped = !0, this.stop(), this.finished();\n                }\n            }, {\n                key: \"isActive\",\n                value: function() {\n                    return this.active;\n                }\n            }, {\n                key: \"initiate\",\n                value: function() {}\n            }, {\n                key: \"handleMessage\",\n                value: function(a) {}\n            }, {\n                key: \"handleError\",\n                value: function(a) {}\n            }, {\n                key: \"send\",\n                value: function(a) {\n                    this.connection.send(a);\n                }\n            }, {\n                key: \"finished\",\n                value: function() {\n                    this.active = !1, this.resolveCb && (this.resolveCb(), this.resolveCb = null);\n                }\n            }, {\n                key: \"failed\",\n                value: function(a) {\n                    this.active = !1, this.rejectCb && (this.rejectCb(a), this.rejectCb = null);\n                }\n            } ]), a;\n        }();\n        c.TurnTest = g;\n    }, {\n        bluebird: 1\n    } ],\n    6: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.TurnConnection = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./utility/parsedIceCandidate\"), g = a(\"./utility/stats/getstatshandler\"), h = a(\"./utility/stats/detectbrowser\"), i = a(\"bluebird\"), j = function() {\n            function a(b) {\n                d(this, a), this.reset(), this.statshandler = new g.GetStatsHandler(b);\n            }\n            return e(a, [ {\n                key: \"reset\",\n                value: function() {\n                    this.disconnect(), this.iceServers = null, this.pctpc1 = null, this.pctpc2 = null,\n                    this.sendChannel = null, this.messageCallback = null, this.errorCallback = null,\n                    this.parsedIceResults = {}, this.resolveCb = null, this.rejectCb = null;\n                }\n            }, {\n                key: \"setMessageCallback\",\n                value: function(a) {\n                    this.messageCallback = a;\n                }\n            }, {\n                key: \"setErrorCallback\",\n                value: function(a) {\n                    this.errorCallback = a;\n                }\n            }, {\n                key: \"send\",\n                value: function(a) {\n                    if (this.sendChannel) try {\n                        this.sendChannel.send(a);\n                    } catch (a) {\n                        this.raiseSendError(a);\n                    } else this.raiseSendError(new Error(\"No send channel\"));\n                }\n            }, {\n                key: \"raiseSendError\",\n                value: function(a) {\n                    this.errorCallback && this.errorCallback(a);\n                }\n            }, {\n                key: \"assignEvent\",\n                value: function(a, b, c) {\n                    a.addEventListener ? a.addEventListener(b, c.bind(this), !1) : a.attachEvent && (b = \"on\" + b,\n                    a.attachEvent(b, c.bind(this)));\n                }\n            }, {\n                key: \"connect\",\n                value: function(a) {\n                    var b = this;\n                    this.reset();\n                    var c = new i(function(a, c) {\n                        b.resolveCb = a, b.rejectCb = c;\n                    });\n                    this.iceServers = a;\n                    var d = null;\n                    try {\n                        if (RTCPeerConnection ? d = RTCPeerConnection : webkitRTCPeerConnection ? d = webkitRTCPeerConnection : mozRTCPeerConnection ? d = mozRTCPeerConnection : window && window.RTCPeerConnection && (d = window.RTCPeerConnection),\n                        !d) {\n                            var e = new Error(\"RTCPeerConnection not found\");\n                            return e.continueFlag = !1, this.rejectCb(e), c;\n                        }\n                    } catch (e) {\n                        return e.continueFlag = !1, this.rejectCb(e), c;\n                    }\n                    var f = {\n                        iceTransportPolicy: \"all\",\n                        iceServers: this.iceServers\n                    };\n                    try {\n                        this.pctpc1 = new d(f), this.pctpc2 = new d(f);\n                    } catch (e) {\n                        return this.rejectDisconnect(!1, e), c;\n                    }\n                    this.connectionTimer = setTimeout(function() {\n                        delete b.connectionTimer, b.rejectDisconnect(!1, new Error(\"Connection timeout\"));\n                    }, 3e4);\n                    try {\n                        this.sendChannel = this.pctpc1.createDataChannel(\"precalltest\", {\n                            ordered: !1,\n                            maxRetransmits: 0\n                        }), this.sendChannel.binaryType = \"arraybuffer\", this.assignEvent(this.sendChannel, \"error\", function(a) {\n                            b.raiseSendError(a), b.rejectDisconnect(!0, a);\n                        }), this.assignEvent(this.pctpc2, \"datachannel\", function(a) {\n                            var c = a.channel;\n                            b.assignEvent(c, \"open\", function(a) {\n                                b.resolveCb && (b.resolveCb(), b.resolveCb = null);\n                            }), b.assignEvent(c, \"close\", function(a) {\n                                b && b.disconnect && b.disconnect();\n                            }), b.assignEvent(c, \"message\", function(a) {\n                                b.messageCallback && b.messageCallback(a.data);\n                            }), b.assignEvent(c, \"error\", function(a) {\n                                b.errorCallback && b.errorCallback(a), b.rejectDisconnect(!0, a);\n                            });\n                        });\n                    } catch (e) {\n                        return this.rejectDisconnect(!1, e), c;\n                    }\n                    try {\n                        this.assignEvent(this.pctpc1, \"icecandidate\", function(a) {\n                            b.onIceCandidate(b.pctpc1, a);\n                        }), this.assignEvent(this.pctpc1, \"iceconnectionstatechange\", function(a) {\n                            b.onIceStateChange(b.pctpc1, a);\n                        }), this.assignEvent(this.pctpc2, \"icecandidate\", function(a) {\n                            b.onIceCandidate(b.pctpc2, a);\n                        }), this.assignEvent(this.pctpc2, \"iceconnectionstatechange\", function(a) {\n                            b.onIceStateChange(b.pctpc2, a);\n                        }), this.pctpc1.createOffer().then(function(a, c) {\n                            b.onCreateOfferSuccess(a);\n                        }, function(a) {\n                            b.onCreateOfferError(b.pctpc1, a);\n                        });\n                    } catch (e) {\n                        return this.rejectDisconnect(!1, e), c;\n                    }\n                    return c;\n                }\n            }, {\n                key: \"rejectDisconnect\",\n                value: function(a, b) {\n                    this.disconnect(), this.rejectCb && (b.continueFlag = a, this.rejectCb(b)), this.resolveCb = null,\n                    this.rejectCb = null;\n                }\n            }, {\n                key: \"disconnect\",\n                value: function() {\n                    if (clearTimeout(this.connectionTimer), clearTimeout(this.iceTimer), this.pctpc1) try {\n                        this.pctpc1.close();\n                    } catch (a) {}\n                    if (this.pctpc1 = null, this.pctpc2) try {\n                        this.pctpc2.close();\n                    } catch (a) {}\n                    this.pctpc2 = null;\n                }\n            }, {\n                key: \"getName\",\n                value: function(a) {\n                    return a === this.pctpc1 ? \"pctpc1\" : \"pctpc2\";\n                }\n            }, {\n                key: \"getOtherPc\",\n                value: function(a) {\n                    return a === this.pctpc1 ? this.pctpc2 : this.pctpc1;\n                }\n            }, {\n                key: \"onCreateOfferError\",\n                value: function(a, b) {\n                    this.rejectDisconnect(!1, b);\n                }\n            }, {\n                key: \"onCreateAnswerError\",\n                value: function(a, b) {\n                    this.rejectDisconnect(!1, b);\n                }\n            }, {\n                key: \"onCreateOfferSuccess\",\n                value: function(a) {\n                    var b = this;\n                    try {\n                        this.pctpc1.setLocalDescription(a).then(function() {\n                            b.onSetLocalSuccess(b.pctpc1);\n                        }, function(a) {\n                            b.onSetSessionDescriptionError(b.pctpc1, a);\n                        }), this.pctpc2.setRemoteDescription(a).then(function() {\n                            b.onSetRemoteSuccess(b.pctpc2);\n                        }, function(a) {\n                            b.onSetRemoteSessionDescriptionError(b.pctpc2, a);\n                        }), this.pctpc2.createAnswer().then(function(a) {\n                            b.onCreateAnswerSuccess(a);\n                        }, function(a) {\n                            b.onCreateAnswerError(b.pctpc2, a);\n                        });\n                    } catch (a) {\n                        this.rejectDisconnect(!1, a);\n                    }\n                }\n            }, {\n                key: \"onSetLocalSuccess\",\n                value: function(a) {}\n            }, {\n                key: \"onSetRemoteSuccess\",\n                value: function(a) {}\n            }, {\n                key: \"onSetSessionDescriptionError\",\n                value: function(a, b) {\n                    this.rejectDisconnect(!1, b);\n                }\n            }, {\n                key: \"onSetRemoteSessionDescriptionError\",\n                value: function(a, b) {\n                    this.rejectDisconnect(!1, b);\n                }\n            }, {\n                key: \"onCreateAnswerSuccess\",\n                value: function(a) {\n                    var b = this;\n                    try {\n                        this.pctpc2.setLocalDescription(a).then(function() {\n                            b.onSetLocalSuccess(b.pctpc2);\n                        }, function(a) {\n                            b.onSetSessionDescriptionError(b.pctpc2, a);\n                        }), this.pctpc1.setRemoteDescription(a).then(function() {\n                            b.onSetRemoteSuccess(b.pctpc1);\n                        }, function(a) {\n                            b.onSetRemoteSessionDescriptionError(b.pctpc1, a);\n                        });\n                    } catch (a) {\n                        this.rejectDisconnect(!1, a);\n                    }\n                }\n            }, {\n                key: \"onIceCandidate\",\n                value: function(a, b) {\n                    var c = this;\n                    try {\n                        if (!b.candidate) return;\n                        var d = new f.ParsedIceCandidate(b.candidate);\n                        if (a == this.pctpc1 && this.statshandler.codeBase == h.Constants.codeBaseType.chrome && (d.isRelay() && (d.isTypeTransportUdp() && (this.parsedIceResults.relayUdpGathered = !0),\n                        d.isTypeTransportTcp() && (this.parsedIceResults.relayTcpGathered = !0), d.isTypeTransportTls() && (this.parsedIceResults.relayTlsGathered = !0)),\n                        d.isServerReflexive() && (this.parsedIceResults.srflxGathered = !0)), !d.isRelay()) return;\n                        this.getOtherPc(a).addIceCandidate(b.candidate).then(function() {\n                            c.onAddIceCandidateSuccess(a);\n                        }, function(b) {\n                            c.onAddIceCandidateError(a, b, d.isRelay());\n                        });\n                    } catch (b) {\n                        this.rejectDisconnect(!1, b);\n                    }\n                }\n            }, {\n                key: \"onAddIceCandidateSuccess\",\n                value: function(a) {}\n            }, {\n                key: \"onAddIceCandidateError\",\n                value: function(a, b, c) {\n                    c && this.rejectDisconnect(!1, b);\n                }\n            }, {\n                key: \"onIceStateChange\",\n                value: function(a, b) {\n                    var c = this;\n                    try {\n                        var d = \"(?)\";\n                        a && (d = a.iceConnectionState), \"failed\" === d && this.rejectDisconnect(!0, new Error(\"ICE failure\")),\n                        \"checking\" !== d || this.iceTimer || (this.iceTimer = setTimeout(function() {\n                            delete c.iceTimer, c.rejectDisconnect(!0, new Error(\"ICE timeout\"));\n                        }, 1e4)), \"completed\" !== d && \"connected\" !== d || (clearTimeout(this.iceTimer),\n                        delete this.iceTimer);\n                    } catch (a) {\n                        this.rejectDisconnect(!1, a);\n                    }\n                }\n            }, {\n                key: \"getIceResults\",\n                value: function() {\n                    var a = this;\n                    return new i(function(b, c) {\n                        for (var d = JSON.parse(JSON.stringify(a.iceServers)), e = 0; e < d.length; e++) {\n                            var f = d[e];\n                            d.hasOwnProperty(f) || delete f.credential;\n                        }\n                        var g = {\n                            turnIpAddress: \"\",\n                            turnIpVersion: \"\",\n                            turnTransport: \"\",\n                            iceServers: d,\n                            ipv6Supported: !1,\n                            ipv4Supported: !1,\n                            relayTlsGathered: !1,\n                            relayTcpGathered: !1,\n                            relayUdpGathered: !1,\n                            srflxGathered: !1,\n                            relayTlsSuccess: !1,\n                            relayTcpSuccess: !1,\n                            relayUdpSuccess: !1,\n                            srflxSuccess: !1\n                        };\n                        for (var h in a.parsedIceResults) a.parsedIceResults.hasOwnProperty(h) && (g[h] = a.parsedIceResults[h]);\n                        a.pctpc1 ? a.statshandler.getIceCandidates(a.pctpc1).then(function(a) {\n                            for (var c = 0; c < a.iceCandidatePairs.length; c++) {\n                                var d = a.iceCandidatePairs[c];\n                                if (d.googActiveConnection || d.selected) for (var e = 0; e < a.localCandidates.length; e++) {\n                                    var f = a.localCandidates[e], h = null;\n                                    if (h = f.ip ? f.ip : f.ipAddress, f.id == d.localCandidateId) {\n                                        var i = -1 !== (g.turnIpAddress = h).indexOf(\":\");\n                                        g.turnIpVersion = i ? \"ipv6\" : \"ipv4\", g.turnTransport = f.mozLocalTransport;\n                                    }\n                                    \"relay\" !== f.candidateType && \"relayed\" !== f.candidateType || (\"udp\" === f.mozLocalTransport && (g.relayUdpSuccess = !0),\n                                    \"tcp\" === f.mozLocalTransport && (g.relayTcpSuccess = !0), \"tls\" === f.mozLocalTransport && (g.relayTlsSuccess = !0)),\n                                    -1 !== h.indexOf(\":\") ? g.ipv6Supported = !0 : g.ipv4Supported = !0;\n                                }\n                            }\n                            for (var j = 0; j < a.localCandidates.length; j++) {\n                                var k = a.localCandidates[j];\n                                \"relay\" !== k.candidateType && \"relayed\" !== k.candidateType || (\"udp\" === k.mozLocalTransport && (g.relayUdpGathered = !0),\n                                \"tcp\" === k.mozLocalTransport && (g.relayTcpGathered = !0), \"tls\" === k.mozLocalTransport && (g.relayTlsGathered = !0)),\n                                \"srflx\" !== k.candidateType && \"serverreflexive\" !== k.candidateType || (g.srflxGathered = !0);\n                            }\n                            for (var l = 0; l < a.iceCandidatePairs.length; l++) {\n                                var m = a.iceCandidatePairs[l];\n                                if (\"succeeded\" === m.state) for (var n = 0; n < a.localCandidates.length; n++) {\n                                    var o = a.localCandidates[n];\n                                    o.id == m.localCandidateId && (\"relay\" !== o.candidateType && \"relayed\" !== o.candidateType || (\"udp\" === o.mozLocalTransport && (g.relayUdpSuccess = !0),\n                                    \"tcp\" === o.mozLocalTransport && (g.relayTcpSuccess = !0), \"tls\" === o.mozLocalTransport && (g.relayTlsSuccess = !0)),\n                                    \"srflx\" !== o.candidateType && \"serverreflexive\" !== o.candidateType || (g.srflxSuccess = !0));\n                                }\n                            }\n                            b(g);\n                        }, function(a) {\n                            c(a);\n                        }) : c(new Error(\"PC not available for stats\"));\n                    }, function(a) {\n                        reject(a);\n                    });\n                }\n            } ]), a;\n        }();\n        c.TurnConnection = j;\n    }, {\n        \"./utility/parsedIceCandidate\": 9,\n        \"./utility/stats/detectbrowser\": 11,\n        \"./utility/stats/getstatshandler\": 12,\n        bluebird: 1\n    } ],\n    7: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function e(a) {\n            for (var b = \"\", c = 0; c < a; c++) b += String.fromCharCode(35 + 58 * Math.random());\n            return b;\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.randomAsciiString = c.MessageMaker = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../utility/timestamps\"), h = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(g), i = function() {\n            function a() {\n                var b = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 1200;\n                d(this, a), this.message = {\n                    timestamp: \"\",\n                    sentBytes: 1e4,\n                    padding: \"\"\n                };\n                var c = e(b - h.getCurrent().toString().length - JSON.stringify(this.message).length);\n                this.message.padding = c;\n            }\n            return f(a, [ {\n                key: \"make\",\n                value: function(a) {\n                    return this.message.timestamp = h.getCurrent(), this.message.sentBytes = a, JSON.stringify(this.message);\n                }\n            } ]), a;\n        }();\n        c.MessageMaker = i, c.randomAsciiString = e;\n    }, {\n        \"../utility/timestamps\": 14\n    } ],\n    8: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.OnlineCheck = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./timestamps\"), g = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(f), h = function() {\n            function a() {\n                d(this, a), this.active = !1;\n            }\n            return e(a, [ {\n                key: \"start\",\n                value: function() {\n                    var a = this;\n                    this.active = !0, this.onlineCheck = [], window && window.addEventListener && \"function\" == typeof window.addEventListener && (window.addEventListener(\"offline\", function() {\n                        a.addEntry();\n                    }), window.addEventListener(\"online\", function() {\n                        a.addEntry();\n                    }), this.addEntry());\n                }\n            }, {\n                key: \"addEntry\",\n                value: function() {\n                    if (this.active) {\n                        var a = g.getCurrent();\n                        if (navigator && navigator.onLine) {\n                            var b = navigator.onLine;\n                            this.onlineCheck.push({\n                                timestamp: a,\n                                online: b\n                            });\n                        }\n                    }\n                }\n            }, {\n                key: \"stop\",\n                value: function() {\n                    var a = this;\n                    return this.active = !1, window && window.removeEventListener && \"function\" == typeof window.removeEventListener && (window.removeEventListener(\"offline\", function() {\n                        a.addEntry();\n                    }), window.removeEventListener(\"online\", function() {\n                        a.addEntry();\n                    })), this.onlineCheck;\n                }\n            } ]), a;\n        }();\n        c.OnlineCheck = h;\n    }, {\n        \"./timestamps\": 14\n    } ],\n    9: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a(b) {\n                d(this, a), this.iceCandidateStr = b.candidate, this.parse();\n            }\n            return e(a, [ {\n                key: \"parse\",\n                value: function() {\n                    var a = this.iceCandidateStr.split(\" \");\n                    a.length < 8 || (this.protocol = \"1\" === a[1] ? \"rtp\" : \"rtcp\", this.transport = a[2],\n                    this.typeTransport = this.extractTypeTransport(a[3]), this.ipv6 = -1 !== a[4].indexOf(\":\"),\n                    this.ipAddress = a[4], this.port = a[5], this.type = a[7]);\n                }\n            }, {\n                key: \"extractTypeTransport\",\n                value: function(a) {\n                    var b = \"None\", c = a >> 24;\n                    if (\"rtp\" === this.protocol && 0 <= c && c <= 2) switch (c) {\n                      case 0:\n                        b = \"TLS\";\n                        break;\n\n                      case 1:\n                        b = \"TCP\";\n                        break;\n\n                      case 2:\n                        b = \"UDP\";\n                    }\n                    return b;\n                }\n            }, {\n                key: \"getString\",\n                value: function() {\n                    return this.iceCandidateStr;\n                }\n            }, {\n                key: \"getType\",\n                value: function() {\n                    return this.type;\n                }\n            }, {\n                key: \"isHost\",\n                value: function() {\n                    return \"host\" === this.type.toLowerCase();\n                }\n            }, {\n                key: \"isServerReflexive\",\n                value: function() {\n                    return \"srflx\" === this.type.toLowerCase();\n                }\n            }, {\n                key: \"isPeerReflexive\",\n                value: function() {\n                    return \"prflx\" === this.type.toLowerCase();\n                }\n            }, {\n                key: \"isRelay\",\n                value: function() {\n                    return \"relay\" === this.type.toLowerCase() || \"relayed\" === this.type.toLowerCase();\n                }\n            }, {\n                key: \"getTypeTransport\",\n                value: function() {\n                    return this.typeTransport;\n                }\n            }, {\n                key: \"isTypeTransportUdp\",\n                value: function() {\n                    return \"UDP\" === this.typeTransport;\n                }\n            }, {\n                key: \"isTypeTransportTcp\",\n                value: function() {\n                    return \"TCP\" === this.typeTransport;\n                }\n            }, {\n                key: \"isTypeTransportTls\",\n                value: function() {\n                    return \"TLS\" === this.typeTransport;\n                }\n            }, {\n                key: \"getTransport\",\n                value: function() {\n                    return this.transport;\n                }\n            }, {\n                key: \"isUdp\",\n                value: function() {\n                    return \"udp\" === this.transport.toLowerCase();\n                }\n            }, {\n                key: \"isTcp\",\n                value: function() {\n                    return \"tcp\" === this.transport.toLowerCase();\n                }\n            }, {\n                key: \"getProtocol\",\n                value: function() {\n                    return this.protocol;\n                }\n            }, {\n                key: \"isRtp\",\n                value: function() {\n                    return \"rtp\" === this.protocol;\n                }\n            }, {\n                key: \"isRtcp\",\n                value: function() {\n                    return \"rtcp\" === this.protocol;\n                }\n            }, {\n                key: \"isIpv6\",\n                value: function() {\n                    return this.ipv6;\n                }\n            }, {\n                key: \"getIpAddress\",\n                value: function() {\n                    return this.ipAddress;\n                }\n            }, {\n                key: \"getPort\",\n                value: function() {\n                    return this.port;\n                }\n            } ]), a;\n        }();\n        c.ParsedIceCandidate = f;\n    }, {} ],\n    10: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.ResultsHandler = void 0;\n        var e = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(a) {\n            return typeof a;\n        } : function(a) {\n            return a && \"function\" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? \"symbol\" : typeof a;\n        }, f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"./timestamps\"), h = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(g), i = a(\"./messageMaker\"), j = {\n            success: \"success\",\n            stopped: \"stopped\",\n            failed: \"failed\"\n        }, k = function() {\n            function a() {\n                d(this, a), this.start = h.getCurrent(), this.id = Math.trunc(this.start) + \"-\" + (0,\n                i.randomAsciiString)(20), this.version = \"1.4.0\", this.failures = [], this.results = {},\n                this.status = j.success, this.provider = \"callstats\";\n            }\n            return f(a, [ {\n                key: \"setStatusStopped\",\n                value: function() {\n                    this.status !== j.failed && (this.status = j.stopped);\n                }\n            }, {\n                key: \"setStatusFailed\",\n                value: function() {\n                    this.status = j.failed;\n                }\n            }, {\n                key: \"setStatusSuccess\",\n                value: function() {\n                    this.status !== j.stopped && (this.status = j.success);\n                }\n            }, {\n                key: \"setProvider\",\n                value: function(a) {\n                    a && (this.provider = a);\n                }\n            }, {\n                key: \"getResults\",\n                value: function() {\n                    return {\n                        id: this.id,\n                        version: this.version,\n                        status: this.status,\n                        startTimestamp: this.start,\n                        endTimestamp: h.getCurrent(),\n                        failures: this.failures,\n                        tests: this.results,\n                        provider: this.provider\n                    };\n                }\n            }, {\n                key: \"getFailureNumber\",\n                value: function() {\n                    return this.failures.length;\n                }\n            }, {\n                key: \"getId\",\n                value: function() {\n                    return this.id;\n                }\n            }, {\n                key: \"add\",\n                value: function(a, b) {\n                    (this.results[a] = b).hasOwnProperty(\"forceStopped\") && 1 == b.forceStopped && this.setStatusStopped();\n                }\n            }, {\n                key: \"failure\",\n                value: function(a) {\n                    \"object\" === (void 0 === a ? \"undefined\" : e(a)) && (a = a.toString());\n                    var b = {\n                        timestamp: h.getCurrent(),\n                        reason: a\n                    };\n                    this.failures.push(b);\n                }\n            } ]), a;\n        }();\n        c.ResultsHandler = k;\n    }, {\n        \"./messageMaker\": 7,\n        \"./timestamps\": 14\n    } ],\n    11: [ function(a, b, c) {\n        \"use strict\";\n        function d() {\n            var a = e.browserName.chrome, b = null, c = null, d = null, f = null, g = e.codeBaseType.chrome;\n            if (window && (!window.navigator || !window.navigator.userAgent || window.csioReactNative)) return window && window.csioGetOsName && (b = window.csioGetOsName()),\n            window && window.csioGetOsVer && (c = window.csioGetOsVer()), window && window.csioReactNative && (d = \"react-native\"),\n            {\n                browserName: a,\n                codeBase: g,\n                os: b,\n                osVersion: c,\n                userAgent: d\n            };\n            var h = (d = navigator.userAgent).toLowerCase(), i = void 0, j = void 0;\n            (f = navigator.appVersion) && (i = f.toLowerCase(), j = \"\" + parseFloat(i));\n            var k = void 0, l = \"Version\";\n            -1 !== (k = h.indexOf(\"opera\")) ? (a = e.browserName.opera, j = h.substring(k + 6),\n            -1 !== (k = h.indexOf(l)) && (j = h.substring(k + 8)), g = e.codeBaseType.chrome) : -1 !== (k = h.indexOf(\"opr\")) ? (a = e.browserName.opera,\n            j = h.substring(k + 4), -1 !== (k = h.indexOf(l)) && (j = h.substring(k + 8)), g = e.codeBaseType.chrome) : -1 !== (k = h.indexOf(\"msie\")) ? (a = e.browserName.msie,\n            j = h.substring(k + 5), g = e.codeBaseType.chrome) : -1 !== (k = h.indexOf(\"edge\")) ? (a = e.browserName.edge,\n            j = h.substring(k + 5), g = e.codeBaseType.edge) : -1 !== (k = h.indexOf(\"chrome\")) ? (a = e.browserName.chrome,\n            j = h.substring(k + 7), g = e.codeBaseType.chrome) : -1 !== (k = h.indexOf(\"safari\")) ? (a = e.browserName.safari,\n            j = h.substring(k + 7), -1 !== (k = h.indexOf(l)) && (j = h.substring(k + 8)), g = e.codeBaseType.chrome) : -1 !== (k = h.indexOf(\"firefox\")) ? (a = e.browserName.firefox,\n            j = h.substring(k + 8), g = e.codeBaseType.firefox) : -1 !== (k = h.indexOf(\"trident\")) && (a = e.browserName.msie,\n            k = h.indexOf(\"rv\"), j = h.substring(k + 3, k + 7), g = e.codeBaseType.chrome);\n            var m = [ {\n                s: \"Windows 3.11\",\n                r: /win16/\n            }, {\n                s: \"Windows 95\",\n                r: /(windows 95|win95|windows_95)/\n            }, {\n                s: \"Windows ME\",\n                r: /(win 9x 4.90|windows me)/\n            }, {\n                s: \"Windows 98\",\n                r: /(windows 98|win98)/\n            }, {\n                s: \"Windows CE\",\n                r: /windows ce/\n            }, {\n                s: \"Windows 2000\",\n                r: /(windows nt 5.0|windows 2000)/\n            }, {\n                s: \"Windows XP\",\n                r: /(windows nt 5.1|windows xp)/\n            }, {\n                s: \"Windows Server 2003\",\n                r: /windows nt 5.2/\n            }, {\n                s: \"Windows Vista\",\n                r: /windows nt 6.0/\n            }, {\n                s: \"Windows 7\",\n                r: /(windows 7|windows nt 6.1)/\n            }, {\n                s: \"Windows 8.1\",\n                r: /(windows 8.1|windows nt 6.3)/\n            }, {\n                s: \"Windows 8\",\n                r: /(windows 8|windows nt 6.2)/\n            }, {\n                s: \"Windows 10\",\n                r: /(windows 10|windows nt 10.0)/\n            }, {\n                s: \"Windows NT 4.0\",\n                r: /(windows nt 4.0|winnt4.0|winnt|windows nt)/\n            }, {\n                s: \"Windows ME\",\n                r: /windows me/\n            }, {\n                s: \"Android\",\n                r: /android/\n            }, {\n                s: \"Open BSD\",\n                r: /openbsd/\n            }, {\n                s: \"Sun OS\",\n                r: /sunos/\n            }, {\n                s: \"Linux\",\n                r: /(linux|x11)/\n            }, {\n                s: \"iOS\",\n                r: /(iphone|ipad|ipod)/\n            }, {\n                s: \"Mac OS X\",\n                r: /mac os x/\n            }, {\n                s: \"Mac OS\",\n                r: /(macppc|macintel|mac_powerpc|macintosh)/\n            }, {\n                s: \"QNX\",\n                r: /qnx/\n            }, {\n                s: \"UNIX\",\n                r: /unix/\n            }, {\n                s: \"BeOS\",\n                r: /beos/\n            }, {\n                s: \"OS/2\",\n                r: /os\\/2/\n            }, {\n                s: \"Search Bot\",\n                r: /(nuhk|googlebot|yammybot|openbot|slurp|msnbot|ask jeeves\\/teoma|ia_archiver)/\n            } ], n = void 0, o = void 0;\n            for (n in m) if (m.hasOwnProperty(n) && (o = m[n]).r.test(h)) {\n                b = o.s;\n                break;\n            }\n            switch (b && /Windows/.test(b) && (c = /Windows (.*)/.exec(b)[1], b = e.osName.windows),\n            b) {\n              case e.osName.mac:\n                c = /mac os x (10[\\.\\_\\d]+)/.exec(h)[1];\n                break;\n\n              case e.osName.android:\n                c = /android ([\\.\\_\\d]+)/.exec(h)[1];\n                break;\n\n              case e.osName.ios:\n                if (!i) break;\n                if (!(c = /os (\\d+)_(\\d+)_?(\\d+)?/.exec(i))) break;\n                c = c[1] + \".\" + c[2] + \".\" + (0 | c[3]);\n            }\n            return {\n                browserName: a,\n                browserVersion: j.toString(),\n                os: b,\n                osVersion: c,\n                codeBase: g,\n                userAgent: d\n            };\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.detect = d;\n        var e = c.Constants = {\n            codeBaseType: {\n                chrome: \"Chrome\",\n                firefox: \"Firefox\",\n                edge: \"Edge\",\n                plugin: \"Plugin\"\n            },\n            browserName: {\n                chrome: \"Chrome\",\n                firefox: \"Firefox\",\n                edge: \"Edge\",\n                msie: \"Microsoft Internet Explorer\",\n                safari: \"Safari\"\n            },\n            osName: {\n                windows: \"Windows\",\n                mac: \"Mac OS X\",\n                android: \"Android\",\n                ios: \"iOS\"\n            }\n        };\n    }, {} ],\n    12: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.GetStatsHandler = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./detectbrowser\"), g = a(\"./statsadapter\"), h = a(\"bluebird\"), i = function() {\n            function a(b) {\n                d(this, a), this.codeBase = b.codeBase, this.browserName = b.browserName, this.adapter = new g.StatsAdapter(this.codeBase, this.browserName),\n                this.isPromiseBased = !0;\n            }\n            return e(a, [ {\n                key: \"getIceCandidates\",\n                value: function(a) {\n                    var b = this;\n                    return new h(function(c, d) {\n                        b.csioGetStats(b.iceCandidatesHandler.bind(b), a, function(a) {\n                            c(a);\n                        });\n                    });\n                }\n            }, {\n                key: \"iceCandidatesHandler\",\n                value: function(a, b) {\n                    b(this.adapter.getIceCandidates(a));\n                }\n            }, {\n                key: \"csioGetStats\",\n                value: function(a, b, c) {\n                    var d = f.Constants.codeBaseType.firefox, e = f.Constants.codeBaseType.chrome, g = f.Constants.codeBaseType.edge, h = f.Constants.browserName.safari;\n                    b && (this.codeBase === d ? this.getStatsFirefox(a, b, c) : this.browserName === h ? this.getStatsSafari(a, b, c) : this.codeBase === e ? this.getStatsChrome(a, b, c) : this.codeBase === g && this.getStatsEdge(a, b, c));\n                }\n            }, {\n                key: \"getStatsFirefox\",\n                value: function(a, b, c) {\n                    var d = this;\n                    if (d.isPromiseBased) try {\n                        b.getStats().then(function(b) {\n                            a(b, c);\n                        }).catch(function(e) {\n                            d.isPromiseBased = !1, b.getStats(null, function(b) {\n                                a(b, c);\n                            }, function() {});\n                        });\n                    } catch (e) {\n                        d.isPromiseBased = !1, b.getStats(null, function(b) {\n                            a(b, c);\n                        }, function() {});\n                    } else b.getStats(null, function(b) {\n                        a(b, c);\n                    }, function() {});\n                }\n            }, {\n                key: \"getStatsChrome\",\n                value: function(a, b, c) {\n                    var d = this;\n                    if (window && window.csioReactNative) b.getStats(null, function(b) {\n                        a(b, c);\n                    }, function(a) {}); else if (d.isPromiseBased) try {\n                        b.getStats().then(function(b) {\n                            a(b, c);\n                        }).catch(function(e) {\n                            d.isPromiseBased = !1, b.getStats(function(b) {\n                                a(b, c);\n                            });\n                        });\n                    } catch (d) {\n                        isPromiseBased = !1, b.getStats(function(b) {\n                            a(b, c);\n                        });\n                    } else b.getStats(function(b) {\n                        a(b, c);\n                    });\n                }\n            }, {\n                key: \"getStatsEdge\",\n                value: function(a, b, c) {\n                    b.getStats().then(function(b) {\n                        a(b, c);\n                    }).catch(function(a) {});\n                }\n            }, {\n                key: \"getStatsSafari\",\n                value: function(a, b, c) {\n                    b.getStats().then(function(b) {\n                        a(b, c);\n                    }).catch(function(a) {});\n                }\n            } ]), a;\n        }();\n        c.GetStatsHandler = i;\n    }, {\n        \"./detectbrowser\": 11,\n        \"./statsadapter\": 13,\n        bluebird: 1\n    } ],\n    13: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.StatsAdapter = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./detectbrowser\"), g = function() {\n            function a(b, c) {\n                d(this, a), this.codeBase = b, this.browser = c;\n            }\n            return e(a, [ {\n                key: \"getIceCandidates\",\n                value: function(a) {\n                    if (!a) return {\n                        localCandidates: [],\n                        remoteCandidates: [],\n                        iceCandidatePairs: []\n                    };\n                    var b = this.extractRawStats(a);\n                    return this.processRawStatsForIceInfo(b);\n                }\n            }, {\n                key: \"extractRawStats\",\n                value: function(a) {\n                    var b = [], c = void 0, d = f.Constants.codeBaseType.firefox, e = f.Constants.codeBaseType.chrome, g = f.Constants.browserName.safari;\n                    if (this.codeBase === d && this.browser !== g) a.forEach(function(a) {\n                        b.push(a);\n                    }); else if (this.codeBase === e && this.browser !== g) a && a.result ? b = a.result() : a && a.forEach && (b = [],\n                    a.forEach(function(a) {\n                        b.push(a);\n                    })); else for (c in a) a.hasOwnProperty(c) && b.push(a[c]);\n                    return b;\n                }\n            }, {\n                key: \"processRawStatsForIceInfo\",\n                value: function(a) {\n                    var b = [], c = [], d = [], e = void 0;\n                    if (!a) return {\n                        localCandidates: b,\n                        remoteCandidates: c,\n                        iceCandidatePairs: d\n                    };\n                    for (var f = 0; f < a.length; ++f) {\n                        var g = this.getParsedStats(a[f]), h = this.statsClassifier(g);\n                        if (h.candidatePair) d.push(h.candidatePair); else if (h.transportStats) {\n                            if (\"transport\" === h.transportStats.type) {\n                                e = h.transportStats.selectedCandidatePairId;\n                                continue;\n                            }\n                            d.push(h.transportStats);\n                        } else if (h.localCandidate) {\n                            var i = h.localCandidate;\n                            if (\"relay\" == i.candidateType || \"relayed\" == i.candidateType) {\n                                if (!i.mozLocalTransport) {\n                                    var j = i.priority >> 24;\n                                    i.mozLocalTransport = this.formatRelayType(j);\n                                }\n                                i.mozLocalTransport = i.mozLocalTransport.toLowerCase();\n                            }\n                            b.push(i);\n                        } else h.remoteCandidate && c.push(h.remoteCandidate);\n                    }\n                    if (e) for (var k = 0; k < d.length; ++k) d[k].id === e && (d[k].googActiveConnection = \"true\");\n                    return {\n                        localCandidates: b,\n                        remoteCandidates: c,\n                        iceCandidatePairs: d\n                    };\n                }\n            }, {\n                key: \"getParsedStats\",\n                value: function(a) {\n                    var b = {};\n                    if (a.timestamp instanceof Date && (b.timestamp = a.timestamp.getTime().toString()),\n                    a.type && (b.type = a.type), a.names) for (var c = a.names(), d = 0; d < c.length; ++d) b[c[d]] = a.stat(c[d]); else Object.assign(b, a);\n                    if (b.values) {\n                        for (var e = 0; e < b.values.length; e++) {\n                            var f = b.values[e];\n                            Object.assign(b, f);\n                        }\n                        delete b.values;\n                    }\n                    return b;\n                }\n            }, {\n                key: \"statsClassifier\",\n                value: function(a) {\n                    var b = {}, c = function() {\n                        for (var b = arguments.length, c = Array(b), d = 0; d < b; d++) c[d] = arguments[d];\n                        for (var e = 0; e < c.length; e++) {\n                            var f = c[e];\n                            if (a.type === f) return !0;\n                        }\n                        return !1;\n                    }, d = c(\"inbound-rtp\", \"inboundrtp\"), e = \"true\" === a.isRemote || !0 === a.isRemote;\n                    return d || c(\"outbound-rtp\", \"outboundrtp\") ? (b.tracks = {}, b.tracks.data = a,\n                    b.tracks.ssrc = a.ssrc, b.tracks.streamType = d ? \"inbound\" : \"outbound\", b.tracks.reportType = \"local\",\n                    void 0 !== a.isRemote && (b.tracks.reportType = e ? \"remote\" : \"local\")) : c(\"candidatepair\") && a.selected ? b.transportStats = a : c(\"localcandidate\", \"local-candidate\") ? b.localCandidate = a : c(\"remotecandidate\", \"remote-candidate\") ? b.remoteCandidate = a : c(\"transport\", \"googCandidatePair\") ? b.transportStats = a : c(\"VideoBwe\") ? b.bwe = a : c(\"track\") ? b.trackStats = a : c(\"candidate-pair\") ? b.candidatePair = a : c(\"codec\") ? b.codec = a : c(\"ssrc\") && (b.tracks = {},\n                    b.tracks.data = a, b.tracks.ssrc = a.ssrc, b.tracks.reportType = \"local\", b.tracks.streamType = a.bytesSent ? \"outbound\" : \"inbound\"),\n                    b;\n                }\n            }, {\n                key: \"formatRelayType\",\n                value: function(a) {\n                    var b = \"none\";\n                    switch (a) {\n                      case 0:\n                        b = \"tls\";\n                        break;\n\n                      case 1:\n                        b = \"tcp\";\n                        break;\n\n                      case 2:\n                        b = \"udp\";\n                    }\n                    return b;\n                }\n            } ]), a;\n        }();\n        c.StatsAdapter = g;\n    }, {\n        \"./detectbrowser\": 11\n    } ],\n    14: [ function(a, b, c) {\n        \"use strict\";\n        function d() {\n            return window && window.performance && window.performance.now && window.performance.timing && window.performance.timing.navigationStart ? window.performance.now() + window.performance.timing.navigationStart : Date.now();\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.getCurrent = d;\n    }, {} ],\n    15: [ function(a, b, c) {\n        function d() {\n            throw new Error(\"setTimeout has not been defined\");\n        }\n        function e() {\n            throw new Error(\"clearTimeout has not been defined\");\n        }\n        function f(a) {\n            if (l === setTimeout) return setTimeout(a, 0);\n            if ((l === d || !l) && setTimeout) return l = setTimeout, setTimeout(a, 0);\n            try {\n                return l(a, 0);\n            } catch (b) {\n                try {\n                    return l.call(null, a, 0);\n                } catch (b) {\n                    return l.call(this, a, 0);\n                }\n            }\n        }\n        function g(a) {\n            if (m === clearTimeout) return clearTimeout(a);\n            if ((m === e || !m) && clearTimeout) return m = clearTimeout, clearTimeout(a);\n            try {\n                return m(a);\n            } catch (b) {\n                try {\n                    return m.call(null, a);\n                } catch (b) {\n                    return m.call(this, a);\n                }\n            }\n        }\n        function h() {\n            q && o && (q = !1, o.length ? p = o.concat(p) : r = -1, p.length && i());\n        }\n        function i() {\n            if (!q) {\n                var a = f(h);\n                q = !0;\n                for (var b = p.length; b; ) {\n                    for (o = p, p = []; ++r < b; ) o && o[r].run();\n                    r = -1, b = p.length;\n                }\n                o = null, q = !1, g(a);\n            }\n        }\n        function j(a, b) {\n            this.fun = a, this.array = b;\n        }\n        function k() {}\n        var l, m, n = b.exports = {};\n        !function() {\n            try {\n                l = \"function\" == typeof setTimeout ? setTimeout : d;\n            } catch (a) {\n                l = d;\n            }\n            try {\n                m = \"function\" == typeof clearTimeout ? clearTimeout : e;\n            } catch (a) {\n                m = e;\n            }\n        }();\n        var o, p = [], q = !1, r = -1;\n        n.nextTick = function(a) {\n            var b = new Array(arguments.length - 1);\n            if (arguments.length > 1) for (var c = 1; c < arguments.length; c++) b[c - 1] = arguments[c];\n            p.push(new j(a, b)), 1 !== p.length || q || f(i);\n        }, j.prototype.run = function() {\n            this.fun.apply(null, this.array);\n        }, n.title = \"browser\", n.browser = !0, n.env = {}, n.argv = [], n.version = \"\",\n        n.versions = {}, n.on = k, n.addListener = k, n.once = k, n.off = k, n.removeListener = k,\n        n.removeAllListeners = k, n.emit = k, n.prependListener = k, n.prependOnceListener = k,\n        n.listeners = function(a) {\n            return [];\n        }, n.binding = function(a) {\n            throw new Error(\"process.binding is not supported\");\n        }, n.cwd = function() {\n            return \"/\";\n        }, n.chdir = function(a) {\n            throw new Error(\"process.chdir is not supported\");\n        }, n.umask = function() {\n            return 0;\n        };\n    }, {} ],\n    16: [ function(a, b, c) {\n        (function(b, d) {\n            function e(a, b) {\n                this._id = a, this._clearFn = b;\n            }\n            var f = a(\"process/browser.js\").nextTick, g = Function.prototype.apply, h = Array.prototype.slice, i = {}, j = 0;\n            c.setTimeout = function() {\n                return new e(g.call(setTimeout, window, arguments), clearTimeout);\n            }, c.setInterval = function() {\n                return new e(g.call(setInterval, window, arguments), clearInterval);\n            }, c.clearTimeout = c.clearInterval = function(a) {\n                a.close();\n            }, e.prototype.unref = e.prototype.ref = function() {}, e.prototype.close = function() {\n                this._clearFn.call(window, this._id);\n            }, c.enroll = function(a, b) {\n                clearTimeout(a._idleTimeoutId), a._idleTimeout = b;\n            }, c.unenroll = function(a) {\n                clearTimeout(a._idleTimeoutId), a._idleTimeout = -1;\n            }, c._unrefActive = c.active = function(a) {\n                clearTimeout(a._idleTimeoutId);\n                var b = a._idleTimeout;\n                b >= 0 && (a._idleTimeoutId = setTimeout(function() {\n                    a._onTimeout && a._onTimeout();\n                }, b));\n            }, c.setImmediate = \"function\" == typeof b ? b : function(a) {\n                var b = j++, d = !(arguments.length < 2) && h.call(arguments, 1);\n                return i[b] = !0, f(function() {\n                    i[b] && (d ? a.apply(null, d) : a.call(null), c.clearImmediate(b));\n                }), b;\n            }, c.clearImmediate = \"function\" == typeof d ? d : function(a) {\n                delete i[a];\n            };\n        }).call(this, a(\"timers\").setImmediate, a(\"timers\").clearImmediate);\n    }, {\n        \"process/browser.js\": 15,\n        timers: 16\n    } ],\n    17: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a() {\n                var b = this;\n                d(this, a), this.batteryManager = null, \"function\" == typeof navigator.getBattery && navigator.getBattery().then(function(a) {\n                    b.batteryManager = a;\n                });\n            }\n            return e(a, [ {\n                key: \"getLevel\",\n                value: function() {\n                    return this.batteryManager ? this.batteryManager.level : -1;\n                }\n            }, {\n                key: \"getCharging\",\n                value: function() {\n                    return this.batteryManager ? this.batteryManager.charging : null;\n                }\n            } ]), a;\n        }();\n        c.Battery = f;\n    }, {} ],\n    18: [ function(a, b, c) {\n        \"use strict\";\n        function d() {\n            var a = f.browserName.chrome, b = null, c = null, d = null, e = null, g = f.codeBaseType.chrome;\n            if (!window.navigator.userAgent || window.csioReactNative) return window && window.csioGetOsName && (b = window.csioGetOsName()),\n            window && window.csioGetOsVer && (c = window.csioGetOsVer()), window && window.csioReactNative && (d = \"react-native\"),\n            {\n                browserName: a,\n                codeBase: g,\n                os: b,\n                osVersion: c,\n                userAgent: d,\n                browserVersion: null\n            };\n            d = navigator.userAgent;\n            var h = d.toLowerCase();\n            e = navigator.appVersion;\n            var i = void 0, j = void 0;\n            e && (i = e.toLowerCase(), j = \"\" + parseFloat(i));\n            var k = void 0;\n            -1 !== (k = h.indexOf(\"opera\")) ? (a = f.browserName.opera, j = h.substring(k + 6),\n            -1 !== (k = h.indexOf(\"Version\")) && (j = h.substring(k + 8)), g = f.codeBaseType.chrome) : -1 !== (k = h.indexOf(\"opr\")) ? (a = f.browserName.opera,\n            j = h.substring(k + 4), -1 !== (k = h.indexOf(\"Version\")) && (j = h.substring(k + 8)),\n            g = f.codeBaseType.chrome) : -1 !== (k = h.indexOf(\"msie\")) ? (a = f.browserName.msie,\n            j = h.substring(k + 5), g = f.codeBaseType.chrome) : -1 !== (k = h.indexOf(\"edge\")) ? (a = f.browserName.edge,\n            j = h.substring(k + 5), g = f.codeBaseType.edge) : -1 !== (k = h.indexOf(\"chrome\")) ? (a = f.browserName.chrome,\n            j = h.substring(k + 7), g = f.codeBaseType.chrome) : -1 !== (k = h.indexOf(\"safari\")) ? (a = f.browserName.safari,\n            j = h.substring(k + 7), -1 !== (k = h.indexOf(\"Version\")) && (j = h.substring(k + 8)),\n            g = f.codeBaseType.chrome) : -1 !== (k = h.indexOf(\"firefox\")) ? (a = f.browserName.firefox,\n            j = h.substring(k + 8), g = f.codeBaseType.firefox) : -1 !== (k = h.indexOf(\"trident\")) && (a = f.browserName.msie,\n            k = h.indexOf(\"rv\"), j = h.substring(k + 3, k + 7), g = f.codeBaseType.chrome);\n            var l = [ {\n                s: \"Windows 3.11\",\n                r: /win16/\n            }, {\n                s: \"Windows 95\",\n                r: /(windows 95|win95|windows_95)/\n            }, {\n                s: \"Windows ME\",\n                r: /(win 9x 4.90|windows me)/\n            }, {\n                s: \"Windows 98\",\n                r: /(windows 98|win98)/\n            }, {\n                s: \"Windows CE\",\n                r: /windows ce/\n            }, {\n                s: \"Windows 2000\",\n                r: /(windows nt 5.0|windows 2000)/\n            }, {\n                s: \"Windows XP\",\n                r: /(windows nt 5.1|windows xp)/\n            }, {\n                s: \"Windows Server 2003\",\n                r: /windows nt 5.2/\n            }, {\n                s: \"Windows Vista\",\n                r: /windows nt 6.0/\n            }, {\n                s: \"Windows 7\",\n                r: /(windows 7|windows nt 6.1)/\n            }, {\n                s: \"Windows 8.1\",\n                r: /(windows 8.1|windows nt 6.3)/\n            }, {\n                s: \"Windows 8\",\n                r: /(windows 8|windows nt 6.2)/\n            }, {\n                s: \"Windows 10\",\n                r: /(windows 10|windows nt 10.0)/\n            }, {\n                s: \"Windows NT 4.0\",\n                r: /(windows nt 4.0|winnt4.0|winnt|windows nt)/\n            }, {\n                s: \"Windows ME\",\n                r: /windows me/\n            }, {\n                s: \"Android\",\n                r: /android/\n            }, {\n                s: \"Open BSD\",\n                r: /openbsd/\n            }, {\n                s: \"Sun OS\",\n                r: /sunos/\n            }, {\n                s: \"Linux\",\n                r: /(linux|x11)/\n            }, {\n                s: \"iOS\",\n                r: /(iphone|ipad|ipod)/\n            }, {\n                s: \"Mac OS X\",\n                r: /mac os x/\n            }, {\n                s: \"Mac OS\",\n                r: /(macppc|macintel|mac_powerpc|macintosh)/\n            }, {\n                s: \"QNX\",\n                r: /qnx/\n            }, {\n                s: \"UNIX\",\n                r: /unix/\n            }, {\n                s: \"BeOS\",\n                r: /beos/\n            }, {\n                s: \"OS/2\",\n                r: /os\\/2/\n            }, {\n                s: \"Search Bot\",\n                r: /(nuhk|googlebot|yammybot|openbot|slurp|msnbot|ask jeeves\\/teoma|ia_archiver)/\n            } ], m = void 0, n = void 0;\n            for (m in l) if (l.hasOwnProperty(m) && (n = l[m], n.r.test(h))) {\n                b = n.s;\n                break;\n            }\n            switch (b && /Windows/.test(b) && (c = /Windows (.*)/.exec(b)[1], b = f.osName.windows),\n            b) {\n              case f.osName.mac:\n                c = /mac os x (10[\\.\\_\\d]+)/.exec(h)[1];\n                break;\n\n              case f.osName.android:\n                c = /android ([\\.\\_\\d]+)/.exec(h)[1];\n                break;\n\n              case f.osName.ios:\n                if (!i) break;\n                if (!(c = /os (\\d+)_(\\d+)_?(\\d+)?/.exec(i))) break;\n                c = c[1] + \".\" + c[2] + \".\" + (0 | c[3]);\n            }\n            return {\n                browserName: a,\n                browserVersion: j.toString(),\n                os: b,\n                osVersion: c,\n                codeBase: g,\n                userAgent: d\n            };\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.detect = d;\n        var e = a(\"../config/constants\"), f = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(e);\n    }, {\n        \"../config/constants\": 33\n    } ],\n    19: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.Devices = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../config/constants\"), h = d(g), i = a(\"../utility/registry\"), j = a(\"../utility/csiologger\"), k = d(j), l = a(\"../utility/utils\"), m = d(l), n = function() {\n            function a(b, c) {\n                e(this, a), this.conferenceId = b, this.pc = c, this.devices = null, this.emb = i.Registry.getEventMessageBuilder();\n            }\n            return f(a, [ {\n                key: \"collectConnected\",\n                value: function() {\n                    var a = this;\n                    if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {\n                        var b = this;\n                        navigator.mediaDevices.enumerateDevices().then(function(c) {\n                            var d = m.normalizeMediaDeviceList(c);\n                            b.sendConnected(d), setTimeout(a.collectConnected.bind(b), 1e4);\n                        }).catch(function(c) {\n                            setTimeout(a.collectConnected.bind(b), 1e4);\n                        });\n                    }\n                }\n            }, {\n                key: \"sendConnected\",\n                value: function(a) {\n                    this.devices ? this.compare(a) || (this.devices = a, this.send()) : (this.devices = a,\n                    this.send());\n                }\n            }, {\n                key: \"compare\",\n                value: function(a) {\n                    return self.devices.sort().toString() === a.sort().toString();\n                }\n            }, {\n                key: \"send\",\n                value: function() {\n                    var a = {\n                        mediaDeviceList: this.devices\n                    };\n                    k.log(\"sending connectedDevice\", h.internalFabricEvent.connectedDeviceList, a),\n                    this.emb.make(h.internalFabricEvent.connectedDeviceList, this.conferenceId, this.pc, a);\n                }\n            } ]), a;\n        }();\n        c.Devices = n;\n    }, {\n        \"../config/constants\": 33,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"../utility/utils\": 101\n    } ],\n    20: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (b) try {\n                window && window.localStorage && window.localStorage.setItem(a, b);\n            } catch (a) {\n                return;\n            }\n        }\n        function e(a) {\n            try {\n                if (window && window.localStorage) return window.localStorage.getItem(a);\n            } catch (a) {\n                return null;\n            }\n            return null;\n        }\n        function f(a) {\n            try {\n                window && window.localStorage && window.localStorage.removeItem(a);\n            } catch (a) {\n                return;\n            }\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.store = d, c.get = e, c.remove = f;\n    }, {} ],\n    21: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (b) try {\n                window && window.sessionStorage && window.sessionStorage.setItem(a, b);\n            } catch (a) {\n                return;\n            }\n        }\n        function e(a) {\n            try {\n                if (window && window.sessionStorage) return window.sessionStorage.getItem(a);\n            } catch (a) {\n                return null;\n            }\n            return null;\n        }\n        function f(a) {\n            try {\n                window && window.sessionStorage && window.sessionStorage.removeItem(a);\n            } catch (a) {\n                return;\n            }\n        }\n        function g(a, b) {\n            if (a) {\n                var c = JSON.parse(e(\"csio_ucid_data\"));\n                c || (c = {}), c[a] || (c[a] = {}), c[a].ucID = b, d(\"csio_ucid_data\", JSON.stringify(c));\n            }\n        }\n        function h(a) {\n            if (!a) return null;\n            var b = JSON.parse(e(\"csio_ucid_data\"));\n            return b && b[a] ? b[a].ucID : null;\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.store = d, c.get = e, c.remove = f, c.storeUcId = g, c.getUcId = h;\n    }, {} ],\n    22: [ function(a, b, c) {\n        (function(c) {\n            \"use strict\";\n            function d(a) {\n                if (a && a.__esModule) return a;\n                var b = {};\n                if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n                return b.default = a, b;\n            }\n            function e(a, b) {\n                if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n            }\n            function f(a, b) {\n                var c = {};\n                return c.status = a, b && (c.message = b), c;\n            }\n            function g(a, b) {\n                return a + \": \" + b + \" \" + (arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : \"\");\n            }\n            function h() {\n                var a = null, b = r.Registry.getEndpoint().getBrowserName();\n                return \"Firefox\" === b ? a = mozRTCPeerConnection : \"Chrome\" === b || \"Opera\" === b ? a = webkitRTCPeerConnection : \"Safari\" === b ? t.log(\"Browser type Safari\") : \"Edge\" === b && (a = window.RTCPeerConnection),\n                a;\n            }\n            function i(a) {\n                if (null === a) return !1;\n                var b = r.Registry.getEndpoint().getCodeBase();\n                if (b === m.codeBaseType.firefox) return \"undefined\" != typeof mozRTCPeerConnection && a instanceof mozRTCPeerConnection || \"undefined\" != typeof RTCPeerConnection && a instanceof RTCPeerConnection;\n                if (b === m.codeBaseType.edge || \"function\" == typeof a) return !0;\n                var c = h();\n                return null !== c && a instanceof c || void 0 !== a.createOffer;\n            }\n            var j = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(a) {\n                return typeof a;\n            } : function(a) {\n                return a && \"function\" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? \"symbol\" : typeof a;\n            }, k = function() {\n                function a(a, b) {\n                    for (var c = 0; c < b.length; c++) {\n                        var d = b[c];\n                        d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                        Object.defineProperty(a, d.key, d);\n                    }\n                }\n                return function(b, c, d) {\n                    return c && a(b.prototype, c), d && a(b, d), b;\n                };\n            }(), l = a(\"./config/constants\"), m = d(l), n = a(\"./config/settings\"), o = d(n), p = a(\"./config/callstatserrors\"), q = a(\"./fsm/mainfsm\"), r = a(\"./utility/registry\"), s = a(\"./utility/csiologger\"), t = d(s), u = a(\"./utility/onerroreventlistner\"), v = d(u), w = a(\"./utility/utils\"), x = d(w);\n            v.setErrorEventListener(), x.assignPollyfill(), x.isIntegerPollyfill();\n            var y = null, z = function() {\n                function a() {\n                    e(this, a), y = new q.MainFSM();\n                }\n                return k(a, [ {\n                    key: \"initialize\",\n                    value: function(a, b, c, d, e, h) {\n                        if (!a || !c || !b) {\n                            var i = g(\"initialize\", p.csErrorStrings.argumentError);\n                            return t.error(i), f(m.callstatsAPIReturnStatus.failure, i);\n                        }\n                        if (d && \"function\" != typeof d) {\n                            var j = g(\"initialize\", p.csErrorStrings.argumentError);\n                            t.warn(j), d = null;\n                        }\n                        if (e && \"function\" != typeof e) {\n                            var k = g(\"initialize\", p.csErrorStrings.argumentError);\n                            t.warn(k), e = null;\n                        }\n                        if (\"function\" != typeof b && !(window.crypto && (window.crypto.subtle || window.crypto.webkitSubtle) || window.msCrypto && window.msCrypto.subtle || window.csioReactNative)) {\n                            var l = g(\"initialize\", p.csErrorStrings.cryptoError);\n                            return t.error(l), d && d(p.csError.tokenGenerationError, p.csErrorStrings.cryptoError),\n                            f(m.callstatsAPIReturnStatus.failure, l);\n                        }\n                        try {\n                            y.fire(q.MainEvents.onInitialize, a, c, b, d, e, h), y.run();\n                        } catch (a) {\n                            r.Registry.getGenericEventHandler().sendEvent(m.logEvents.error, {\n                                msg: \"initialize: Error\",\n                                error: a.message + \":\" + a.stack\n                            }), t.error(\"initialize: Error\", a);\n                        }\n                        return f(m.callstatsAPIReturnStatus.success);\n                    }\n                }, {\n                    key: \"addNewFabric\",\n                    value: function(a, b, c, d, e, h) {\n                        var j = null, k = m.endpointType.peer, l = m.transmissionDirection.sendrecv;\n                        if (void 0 === b) {\n                            var n = g(\"addNewFabric\", p.csErrorStrings.argumentError);\n                            return t.error(n), f(m.callstatsAPIReturnStatus.failure, n);\n                        }\n                        if (void 0 === d) {\n                            var o = g(\"addNewFabric\", p.csErrorStrings.argumentError);\n                            return t.error(o), f(m.callstatsAPIReturnStatus.failure, o);\n                        }\n                        if (d || (d = m.tmpConferenceId), !a || !c) {\n                            var s = g(\"addNewFabric\", p.csErrorStrings.argumentError);\n                            return t.error(s), f(m.callstatsAPIReturnStatus.failure, s);\n                        }\n                        if (h && \"function\" == typeof h && (j = h), e && \"function\" == typeof e && (j = e),\n                        e && \"function\" != typeof e) {\n                            if (e.remoteEndpointType) {\n                                if (!m.endpointType.hasOwnProperty(e.remoteEndpointType)) {\n                                    var u = g(\"addNewFabric\", p.csErrorStrings.invalidEndPointType, e.remoteEndpointType);\n                                    return t.error(u), f(m.callstatsAPIReturnStatus.failure, u);\n                                }\n                                k = e.remoteEndpointType;\n                            }\n                            if (e.fabricTransmissionDirection) {\n                                if (!m.transmissionDirection.hasOwnProperty(e.fabricTransmissionDirection)) {\n                                    var v = g(\"addNewFabric\", p.csErrorStrings.invalidTransmissionDirection, e.fabricTransmissionDirection);\n                                    return t.error(v), f(m.callstatsAPIReturnStatus.failure, v);\n                                }\n                                l = e.fabricTransmissionDirection;\n                            }\n                        }\n                        if (!m.fabricUsage.hasOwnProperty(c) || c instanceof Function) {\n                            var w = g(\"addNewFabric\", p.csErrorStrings.fabricUsageInvalid, c);\n                            return t.error(w), f(m.callstatsAPIReturnStatus.failure, w);\n                        }\n                        if (!i(a)) {\n                            var x = g(\"addNewFabric\", p.csErrorStrings.pcInvalid);\n                            return t.error(x), f(m.callstatsAPIReturnStatus.failure, x);\n                        }\n                        var z = r.Registry.getConferenceManager().get(d);\n                        if (z) {\n                            if (z.getPeerConnectionManager().getPcHandler(a)) return f(m.callstatsAPIReturnStatus.success);\n                        }\n                        if (!r.Registry.getCredentials().getAppId() || !r.Registry.getCredentials().getUserId()) {\n                            var A = g(\"addNewFabric\", p.csErrorStrings.notInitialized);\n                            return t.error(A), f(m.callstatsAPIReturnStatus.failure, A);\n                        }\n                        try {\n                            y.fire(q.MainEvents.onAddNewFabric, a, b, c, d, k, l, j), y.run();\n                        } catch (a) {\n                            r.Registry.getGenericEventHandler().sendEvent(m.logEvents.error, {\n                                msg: \"addNewFabric: Error\",\n                                error: a.message + \":\" + a.stack\n                            }), t.error(\"addNewFabric: Error\", a);\n                        }\n                        return f(m.callstatsAPIReturnStatus.success);\n                    }\n                }, {\n                    key: \"sendFabricEvent\",\n                    value: function(a, b, c, d) {\n                        if (t.log(\"sendFabricEvent \", b), c || (c = m.tmpConferenceId), !a || !b) {\n                            var e = g(\"sendFabricEvent\", p.csErrorStrings.argumentError);\n                            return t.error(e), f(m.callstatsAPIReturnStatus.failure, e);\n                        }\n                        if (b === m.fabricEvent.fabricSetupFailed) {\n                            var h = g(\"sendFabricEvent\", p.csErrorStrings.fabricEventUnsupported, b);\n                            return t.error(h), f(m.callstatsAPIReturnStatus.failure, h);\n                        }\n                        if (!m.fabricEvent.hasOwnProperty(b) && !m.internalFabricEvent.hasOwnProperty(b)) {\n                            var i = g(\"sendFabricEvent\", p.csErrorStrings.fabricEventInvalid, b);\n                            return t.error(i), f(m.callstatsAPIReturnStatus.failure, i);\n                        }\n                        if (!(b !== m.fabricEvent.activeDeviceList || d && d.deviceList)) {\n                            var j = g(\"sendFabricEvent \", p.csErrorStrings.argumentError);\n                            return t.error(j), f(m.callstatsAPIReturnStatus.failure, j);\n                        }\n                        var k = r.Registry.getConferenceManager().get(c);\n                        if (!r.Registry.getCredentials().getAppId() || !r.Registry.getCredentials().getUserId() || !k) {\n                            var l = g(\"sendFabricEvent \", p.csErrorStrings.notInitialized);\n                            return t.error(l), f(m.callstatsAPIReturnStatus.failure, l);\n                        }\n                        if (!k.getPeerConnectionManager().getPcHandler(a)) {\n                            var n = g(\"sendFabricEvent \", p.csErrorStrings.pcInvalid);\n                            return t.error(n), f(m.callstatsAPIReturnStatus.failure, n);\n                        }\n                        try {\n                            y.fire(q.MainEvents.onSendFabricEvent, a, b, c, d), y.run();\n                        } catch (a) {\n                            r.Registry.getGenericEventHandler().sendEvent(m.logEvents.error, {\n                                msg: \"sendFabricEvent: Error\",\n                                error: a.message + \":\" + a.stack\n                            }), t.error(\"sendFabricEvent: Error\", a);\n                        }\n                        return f(m.callstatsAPIReturnStatus.success);\n                    }\n                }, {\n                    key: \"sendUserFeedback\",\n                    value: function(a, b, c) {\n                        if (!b || !a) {\n                            var d = g(\"sendUserFeedback\", p.csErrorStrings.argumentError);\n                            return t.error(d), c && \"function\" == typeof c && c(m.callstatsAPIReturnStatus.failure, d),\n                            f(m.callstatsAPIReturnStatus.failure, d);\n                        }\n                        if (\"object\" !== (void 0 === b ? \"undefined\" : j(b))) {\n                            var e = g(\"sendUserFeedback\", p.csErrorStrings.argumentError);\n                            return t.error(e), c && \"function\" == typeof c && c(m.callstatsAPIReturnStatus.failure, e),\n                            f(m.callstatsAPIReturnStatus.failure, e);\n                        }\n                        if (0 === Object.keys(b).length) {\n                            var h = g(\"sendUserFeedback\", p.csErrorStrings.argumentError);\n                            return t.error(h), c && \"function\" == typeof c && c(m.callstatsAPIReturnStatus.failure, h),\n                            f(m.callstatsAPIReturnStatus.failure, h);\n                        }\n                        try {\n                            y.fire(q.MainEvents.onSendUserFeedback, a, b, c), y.run();\n                        } catch (a) {\n                            r.Registry.getGenericEventHandler().sendEvent(m.logEvents.error, {\n                                msg: \"sendUserFeedback: Error\",\n                                error: a.message + \":\" + a.stack\n                            }), t.error(\"sendUserFeedback: Error\", a);\n                        }\n                        return c && \"function\" == typeof c && c(m.callstatsAPIReturnStatus.success, \"userFeedback Event sent successfully\"),\n                        f(m.callstatsAPIReturnStatus.success);\n                    }\n                }, {\n                    key: \"associateMstWithUserID\",\n                    value: function(a, b, c, d, e, h) {\n                        if (c || (c = m.tmpConferenceId), !a || !d || !e) {\n                            var j = g(\"associateMstWithUserID\", p.csErrorStrings.argumentError);\n                            return t.error(j), f(m.callstatsAPIReturnStatus.failure, j);\n                        }\n                        if (!i(a)) {\n                            var k = g(\"associateMstWithUserID\", p.csErrorStrings.pcInvalid);\n                            return t.error(k), f(m.callstatsAPIReturnStatus.failure, k);\n                        }\n                        var l = r.Registry.getConferenceManager().get(c);\n                        if (!l) {\n                            var n = g(\"associateMstWithUserID\", p.csErrorStrings.confereneDoesNotExist);\n                            return t.error(n), f(m.callstatsAPIReturnStatus.failure, n);\n                        }\n                        if (!l.getPeerConnectionManager().getPcHandler(a)) {\n                            var o = g(\"associateMstWithUserID\", p.csErrorStrings.pcInvalid);\n                            return t.error(o), f(m.callstatsAPIReturnStatus.failure, o);\n                        }\n                        h && \"string\" != typeof h && (t.error(\"associateMstWithUserID: Invalid videoTag\"),\n                        h = null);\n                        try {\n                            y.fire(q.MainEvents.onAssociateMstWithUserID, a, b, c, d, e, h), y.run();\n                        } catch (a) {\n                            r.Registry.getGenericEventHandler().sendEvent(m.logEvents.error, {\n                                msg: \"associateMstWithUserID: Error\",\n                                error: a.message + \":\" + a.stack\n                            }), t.error(\"associateMstWithUserID: Error\", a);\n                        }\n                        return f(m.callstatsAPIReturnStatus.success);\n                    }\n                }, {\n                    key: \"reportError\",\n                    value: function(a, b, c, d, e, h) {\n                        if (b || (b = m.tmpConferenceId), void 0 === a || !c) {\n                            var i = g(\"reportError\", p.csErrorStrings.argumentError);\n                            return t.error(i), f(m.callstatsAPIReturnStatus.failure, i);\n                        }\n                        if (!m.webRTCFunctions.hasOwnProperty(c)) {\n                            var j = g(\"reportError\", p.csErrorStrings.webRTCFunctionsInvalid, c);\n                            return t.error(j), f(m.callstatsAPIReturnStatus.failure, j);\n                        }\n                        if (void 0 === d && t.warn(\"reportError: Missing DOM error parameter\"), !r.Registry.getCredentials().getAppId() || !r.Registry.getCredentials().getUserId()) {\n                            var k = g(\"reportError\", p.csErrorStrings.notInitialized);\n                            return t.error(k), f(m.callstatsAPIReturnStatus.failure, k);\n                        }\n                        try {\n                            y.fire(q.MainEvents.onReportError, a, b, c, d, e, h), y.run();\n                        } catch (a) {\n                            r.Registry.getGenericEventHandler().sendEvent(m.logEvents.error, {\n                                msg: \"reportError: Error\",\n                                error: a.message + \":\" + a.stack\n                            }), t.error(\"reportError: Error\", a);\n                        }\n                        return f(m.callstatsAPIReturnStatus.success);\n                    }\n                }, {\n                    key: \"setProxyConfig\",\n                    value: function(a) {\n                        if (window && !window.csioproxy) {\n                            var b = g(\"setProxyConfig\", p.csErrorStrings.setProxyConfigInvokeError);\n                            return t.error(b), f(m.callstatsAPIReturnStatus.failure, b);\n                        }\n                        if (!a) {\n                            var c = g(\"setProxyConfig\", p.csErrorStrings.argumentError);\n                            return t.error(c), f(m.callstatsAPIReturnStatus.failure, c);\n                        }\n                        try {\n                            y.fire(q.MainEvents.onSetProxyConfig, a), y.run();\n                        } catch (a) {\n                            r.Registry.getGenericEventHandler().sendEvent(m.logEvents.error, {\n                                msg: \"setProxyConfig: Error\",\n                                error: a.message + \":\" + a.stack\n                            }), t.error(\"setProxyConfig: Error\", a);\n                        }\n                        return f(m.callstatsAPIReturnStatus.success);\n                    }\n                }, {\n                    key: \"attachWifiStatsHandler\",\n                    value: function(a) {\n                        if (!a) {\n                            var b = g(\"attachWifiStatsHandler\", p.csErrorStrings.argumentError);\n                            return t.error(b), f(m.callstatsAPIReturnStatus.failure, b);\n                        }\n                        if (\"function\" != typeof a) {\n                            var c = g(\"attachWifiStatsHandler\", p.csErrorStrings.argumentError);\n                            return t.error(c), f(m.callstatsAPIReturnStatus.failure, c);\n                        }\n                        try {\n                            y.fire(q.MainEvents.onAttachWifiStatsHandler, a), y.run();\n                        } catch (a) {\n                            r.Registry.getGenericEventHandler().sendEvent(m.logEvents.error, {\n                                msg: \"attachWifiStatsHandler: Error\",\n                                error: a.message + \":\" + a.stack\n                            }), t.error(\"attachWifiStatsHandler: Error\", a);\n                        }\n                        return f(m.callstatsAPIReturnStatus.success);\n                    }\n                }, {\n                    key: \"setIdentifiers\",\n                    value: function(a, b) {\n                        if (!a) {\n                            var c = g(\"setIdentifiers\", p.csErrorStrings.argumentError);\n                            return t.error(c), f(m.callstatsAPIReturnStatus.failure, c);\n                        }\n                        try {\n                            y.fire(q.MainEvents.onSetIdentifiers, a, b), y.run();\n                        } catch (a) {\n                            r.Registry.getGenericEventHandler().sendEvent(m.logEvents.error, {\n                                msg: \"setIdentifiers: Error\",\n                                error: a.message + \":\" + a.stack\n                            }), t.error(\"setIdentifiers: Error\", a);\n                        }\n                        return f(m.callstatsAPIReturnStatus.success);\n                    }\n                }, {\n                    key: \"makePrecallTest\",\n                    value: function(a, b) {\n                        if (!r.Registry.getAuthenticator().getToken() || !r.Registry.getCredentials().getAppId()) {\n                            var c = g(\"makePrecallTest\", p.csErrorStrings.notInitialized);\n                            return t.error(c), f(m.callstatsAPIReturnStatus.failure, c);\n                        }\n                        if (!r.Registry.getAuthenticator().getIceServers()) {\n                            var d = g(\"makePrecallTest\", p.csErrorStrings.notInitialized);\n                            return t.error(d), f(m.callstatsAPIReturnStatus.failure, d);\n                        }\n                        if (!r.Registry.getCredentials().getCollectSDP()) {\n                            var e = g(\"makePrecallTest\", p.csErrorStrings.apiaccesserror);\n                            return t.error(e), f(m.callstatsAPIReturnStatus.failure, e);\n                        }\n                        try {\n                            y.fire(q.MainEvents.onMakePrecallTest, a, b), y.run();\n                        } catch (a) {\n                            r.Registry.getGenericEventHandler().sendEvent(m.logEvents.error, {\n                                msg: \"on: Error\",\n                                error: a.message + \":\" + a.stack\n                            }), t.error(\"makePrecallTest: Error\", a);\n                        }\n                        return f(m.callstatsAPIReturnStatus.success);\n                    }\n                }, {\n                    key: \"on\",\n                    value: function(a, b) {\n                        if (!b || \"function\" != typeof b) {\n                            var c = g(\"on\", p.csErrorStrings.argumentError);\n                            return t.error(c), f(m.callstatsAPIReturnStatus.failure, c);\n                        }\n                        if (!a || !m.callbackFunctions.hasOwnProperty(a)) {\n                            var d = g(\"on\", p.csErrorStrings.argumentError);\n                            return t.error(d), f(m.callstatsAPIReturnStatus.failure, d);\n                        }\n                        try {\n                            y.fire(q.MainEvents.onOn, a, b), y.run();\n                        } catch (a) {\n                            r.Registry.getGenericEventHandler().sendEvent(m.logEvents.error, {\n                                msg: \"on: Error\",\n                                error: a.message + \":\" + a.stack\n                            }), t.error(\"on: Error\", a);\n                        }\n                        return f(m.callstatsAPIReturnStatus.success);\n                    }\n                }, {\n                    key: \"fabricUsage\",\n                    get: function() {\n                        return this.constructor.fabricUsage;\n                    }\n                }, {\n                    key: \"fabricEvent\",\n                    get: function() {\n                        return this.constructor.fabricEvent;\n                    }\n                }, {\n                    key: \"webRTCFunctions\",\n                    get: function() {\n                        return this.constructor.webRTCFunctions;\n                    }\n                }, {\n                    key: \"csError\",\n                    get: function() {\n                        return this.constructor.csError;\n                    }\n                }, {\n                    key: \"qualityRating\",\n                    get: function() {\n                        return this.constructor.qualityRating;\n                    }\n                }, {\n                    key: \"callStatsAPIReturnStatus\",\n                    get: function() {\n                        return this.constructor.callStatsAPIReturnStatus;\n                    }\n                }, {\n                    key: \"version\",\n                    get: function() {\n                        return this.constructor.version;\n                    }\n                }, {\n                    key: \"userIDType\",\n                    get: function() {\n                        return this.constructor.userIDType;\n                    }\n                }, {\n                    key: \"transmissionDirection\",\n                    get: function() {\n                        return this.constructor.transmissionDirection;\n                    }\n                }, {\n                    key: \"endpointType\",\n                    get: function() {\n                        return this.constructor.endpointType;\n                    }\n                } ]), a;\n            }();\n            z.fabricUsage = m.fabricUsage, z.fabricEvent = m.fabricEvent, z.webRTCFunctions = m.webRTCFunctions,\n            z.csError = p.csError, z.qualityRating = m.qualityRating, z.callStatsAPIReturnStatus = m.callstatsAPIReturnStatus,\n            z.version = o.version, z.userIDType = m.userIdType, z.endpointType = m.endpointType,\n            z.transmissionDirection = m.transmissionDirection, function() {\n                function a() {\n                    return new z();\n                }\n                \"function\" == typeof define && define.amd ? define(\"callstats\", [], a) : c.callstats = a,\n                module.exports = a;\n            }(\"undefined\" != typeof window && window);\n        }).call(this, \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : \"undefined\" != typeof window ? window : {});\n    }, {\n        \"./config/callstatserrors\": 32,\n        \"./config/constants\": 33,\n        \"./config/settings\": 34,\n        \"./fsm/mainfsm\": 35,\n        \"./utility/csiologger\": 88,\n        \"./utility/onerroreventlistner\": 94,\n        \"./utility/registry\": 95,\n        \"./utility/utils\": 101\n    } ],\n    23: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (Array.isArray(a)) {\n                for (var b = 0, c = Array(a.length); b < a.length; b++) c[b] = a[b];\n                return c;\n            }\n            return Array.from(a);\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.BinaryTree = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"./binarytreenode.js\"), h = a(\"../utility/csiologger\"), i = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(h), j = function() {\n            function a(b) {\n                e(this, a), this.root = null, this.top = null, this.bottom = null, this.comparator = b,\n                this.node_counter = 0, this.duplicate_counter = 0;\n            }\n            return f(a, [ {\n                key: \"getTopNode\",\n                value: function() {\n                    return this.top;\n                }\n            }, {\n                key: \"getTopValue\",\n                value: function() {\n                    return null === this.top ? null : this.top.peek();\n                }\n            }, {\n                key: \"getBottomValue\",\n                value: function() {\n                    return null === this.bottom ? null : this.bottom.peek();\n                }\n            }, {\n                key: \"getBottomNode\",\n                value: function() {\n                    return this.bottom;\n                }\n            }, {\n                key: \"getDuplicatedCounter\",\n                value: function() {\n                    return this.duplicate_counter;\n                }\n            }, {\n                key: \"getNodeCounter\",\n                value: function() {\n                    return this.node_counter;\n                }\n            }, {\n                key: \"getSize\",\n                value: function() {\n                    return this.duplicate_counter + this.node_counter;\n                }\n            }, {\n                key: \"insertNodeAtTop\",\n                value: function(a) {\n                    a && this.inserting(a.getValues(), this.top);\n                }\n            }, {\n                key: \"insertNodeAtBottom\",\n                value: function(a) {\n                    a && this.inserting(a.getValues(), this.bottom);\n                }\n            }, {\n                key: \"insert\",\n                value: function(a) {\n                    this.inserting([ a ], this.root);\n                }\n            }, {\n                key: \"createNode\",\n                value: function(a) {\n                    var b = new (Function.prototype.bind.apply(g.BinaryTreeNode, [ null ].concat(d(a))))();\n                    return null === this.top ? this.top = b : this.comparator(this.top.peek(), b.peek()) < 0 && (this.top = b),\n                    null === this.bottom ? this.bottom = b : this.comparator(b.peek(), this.bottom.peek()) < 0 && (this.bottom = b),\n                    b;\n                }\n            }, {\n                key: \"inserting\",\n                value: function(a, b) {\n                    if (null === this.root) return this.root = this.createNode(a), this.node_counter = 1,\n                    void (this.duplicate_counter += a.length - 1);\n                    for (var c = null, d = b, e = 0; null !== d; ) {\n                        if (0 === (e = this.comparator(a[0], d.peek()))) return d.concat(a), this.duplicate_counter += a.length,\n                        void d.find(a[0]);\n                        c = d, d = e < 0 ? d.getLeft() : d.getRight();\n                    }\n                    ++this.node_counter, this.duplicate_counter += a.length - 1, d = this.createNode(a),\n                    e < 0 ? c.setLeft(d) : c.setRight(d);\n                }\n            }, {\n                key: \"getRightist\",\n                value: function(a) {\n                    for (var b = null; null !== a.right; ) b = a, a = a.right;\n                    return [ a, b ];\n                }\n            }, {\n                key: \"getLeftist\",\n                value: function(a) {\n                    for (var b = null; null !== a.getLeft(); ) b = a, a = a.getLeft();\n                    return [ a, b ];\n                }\n            }, {\n                key: \"popBottomNode\",\n                value: function() {\n                    if (null === this.bottom) return null;\n                    var a = this.search(this.bottom.peek()), b = a[0], c = a[1];\n                    return null === b ? null : (this.replaceNode(b, c, b.getRight()), this.disposeNode(b),\n                    --this.node_counter, this.duplicate_counter -= b.getLength() - 1, b.setRight(null),\n                    b);\n                }\n            }, {\n                key: \"popTopNode\",\n                value: function() {\n                    if (null === this.top) return null;\n                    var a = this.search(this.top.peek()), b = a[0], c = a[1];\n                    return null === b ? null : (this.replaceNode(b, c, b.getLeft()), this.disposeNode(b),\n                    --this.node_counter, this.duplicate_counter -= b.getLength() - 1, b.setLeft(null),\n                    b);\n                }\n            }, {\n                key: \"search\",\n                value: function(a) {\n                    for (var b = this.root, c = null, d = void 0; null !== b; ) {\n                        if (0 === (d = this.comparator(a, b.peek()))) return b.find(a) ? [ b, c ] : [ null, null ];\n                        c = b, b = d < 0 ? b.getLeft() : b.getRight();\n                    }\n                    return [ null, null ];\n                }\n            }, {\n                key: \"replaceNode\",\n                value: function(a, b, c) {\n                    null !== b ? b.left === a ? b.left = c : b.right = c : this.root = c;\n                }\n            }, {\n                key: \"disposeNode\",\n                value: function(a) {\n                    if (null !== a) {\n                        if (null === this.root) return void (this.bottom = this.top = null);\n                        if (0 === this.comparator(this.top.peek(), a.peek())) {\n                            var b = this.getRightist(this.root);\n                            this.top = b[0];\n                        }\n                        if (0 === this.comparator(this.bottom.peek(), a.peek())) {\n                            var c = this.getLeftist(this.root);\n                            this.bottom = c[0];\n                        }\n                    }\n                }\n            }, {\n                key: \"delete\",\n                value: function(a) {\n                    var b = this.search(a), c = b[0], d = b[1];\n                    if (null === c) return !1;\n                    if (1 < c.getLength()) return c.remove(a), --this.duplicate_counter, !0;\n                    if (--this.node_counter, null === c.getLeft() && null === c.getRight()) this.replaceNode(c, d, null); else if (null === c.getLeft()) this.replaceNode(c, d, c.getRight()); else if (null === c.getRight()) this.replaceNode(c, d, c.getLeft()); else {\n                        for (var e = c.getLeft(), f = c; null !== e.getRight(); f = e, e = e.getRight()) ;\n                        var g = e.getLeft();\n                        f === c ? f.setLeft(g) : f.setRight(g), c.setValues(e.getValues());\n                    }\n                    return this.disposeNode(c), !0;\n                }\n            }, {\n                key: \"logging\",\n                value: function() {\n                    if (null === this.root) return void i.log(\"This tree is empty Duplicate Counter: \" + this.duplicate_counter);\n                    i.log(\"Size of the tree: \" + this.getSize() + \" Node: \" + this.getNodeCounter() + \" Duplicates: \" + this.getDuplicatedCounter() + \" Top: \" + this.getTopNode().toString() + \" Bottom: \" + this.getBottomNode().toString()),\n                    function a(b, c, d) {\n                        if (null !== b) {\n                            for (var e = \"-\", f = 0; f < c; ++f) e += \"--\";\n                            i.log(e + \"> (\" + d + \") [\" + b.toString() + \"]\"), null !== b.getLeft() && a(b.getLeft(), c + 1, \"Left\"),\n                            null !== b.getRight() && a(b.getRight(), c + 1, \"Right\");\n                        }\n                    }(this.root, 0, \"Root\");\n                }\n            } ]), a;\n        }();\n        c.BinaryTree = j;\n    }, {\n        \"../utility/csiologger\": 88,\n        \"./binarytreenode.js\": 24\n    } ],\n    24: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a() {\n                d(this, a);\n                for (var b = arguments.length, c = Array(b), e = 0; e < b; e++) c[e] = arguments[e];\n                this.values = c, this.left = null, this.right = null;\n            }\n            return e(a, [ {\n                key: \"getRight\",\n                value: function() {\n                    return this.right;\n                }\n            }, {\n                key: \"setRight\",\n                value: function(a) {\n                    this.right = a;\n                }\n            }, {\n                key: \"getLeft\",\n                value: function() {\n                    return this.left;\n                }\n            }, {\n                key: \"setLeft\",\n                value: function(a) {\n                    this.left = a;\n                }\n            }, {\n                key: \"push\",\n                value: function(a) {\n                    this.values.push(a);\n                }\n            }, {\n                key: \"concat\",\n                value: function(a) {\n                    this.values = this.values.concat(a);\n                }\n            }, {\n                key: \"pop\",\n                value: function() {\n                    return this.values.length < 1 ? null : this.values.shift();\n                }\n            }, {\n                key: \"remove\",\n                value: function(a) {\n                    this.values.splice(this.values.indexOf(a), 1);\n                }\n            }, {\n                key: \"setValues\",\n                value: function(a) {\n                    this.values = a;\n                }\n            }, {\n                key: \"getValues\",\n                value: function() {\n                    return this.values;\n                }\n            }, {\n                key: \"hasValue\",\n                value: function() {\n                    return 0 < this.values.length;\n                }\n            }, {\n                key: \"getLength\",\n                value: function() {\n                    return this.values.length;\n                }\n            }, {\n                key: \"peek\",\n                value: function() {\n                    return this.values.length < 1 ? null : this.values[0];\n                }\n            }, {\n                key: \"find\",\n                value: function(a) {\n                    return this.values.find(function(b) {\n                        return b === a;\n                    });\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    return this.values.toString();\n                }\n            } ]), a;\n        }();\n        c.BinaryTreeNode = f;\n    }, {} ],\n    25: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.Cache = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"../utility/csiologger\"), g = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(f), h = function() {\n            function a() {\n                d(this, a), this.queue = [], this.priority = [];\n            }\n            return e(a, [ {\n                key: \"add\",\n                value: function(a) {\n                    var b = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];\n                    if (this.length() > 1e6) return void g.error(\"Maximum cached items reached, dropping.\");\n                    b ? this.priority.push(a) : this.queue.push(a);\n                }\n            }, {\n                key: \"pop\",\n                value: function() {\n                    return this.priority.length > 0 ? this.priority.shift() : this.queue.shift();\n                }\n            }, {\n                key: \"peak\",\n                value: function() {\n                    return this.priority.length > 0 ? this.priority[0] : this.queue.length > 0 ? this.queue[0] : null;\n                }\n            }, {\n                key: \"length\",\n                value: function() {\n                    return this.queue.length + this.priority.length;\n                }\n            }, {\n                key: \"updateConferenceId\",\n                value: function(a) {\n                    for (var b = 0; b < this.queue.length; ++b) {\n                        this.queue[b].updateConferenceId(a);\n                    }\n                    for (var c = 0; c < this.priority.length; ++c) {\n                        this.priority[c].updateConferenceId(a);\n                    }\n                }\n            } ]), a;\n        }();\n        c.Cache = h;\n    }, {\n        \"../utility/csiologger\": 88\n    } ],\n    26: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.Component = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./port\"), g = a(\"../utility/csiologger\"), h = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(g), i = function() {\n            function a() {\n                var b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : \"Unknown\";\n                d(this, a), this.name = b, this.ports = new Map();\n            }\n            return e(a, [ {\n                key: \"bindPort\",\n                value: function(a, b) {\n                    var c = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this;\n                    if (this.ports.has(a)) return void h.warn(\"Port (\" + a + \") for \" + this.name + \" already exists.\");\n                    this.ports.set(a, new f.Port(b, c));\n                }\n            }, {\n                key: \"declarePort\",\n                value: function(a) {\n                    if (this.ports.has(a)) return void h.warn(\"Port (\" + a + \") for \" + this.name + \" already exists.\");\n                    this.ports.set(a, null);\n                }\n            }, {\n                key: \"getPort\",\n                value: function(a) {\n                    return this.ports.get(a);\n                }\n            }, {\n                key: \"isConnected\",\n                value: function(a) {\n                    return !!this.ports.has(a) && null !== this.ports.get(a);\n                }\n            }, {\n                key: \"connect\",\n                value: function(a, b) {\n                    if (!this.ports.has(a)) return void h.warn(\"Port (\" + a + \") for \" + this.name + \" does not exists.\");\n                    this.ports.set(a, b);\n                }\n            }, {\n                key: \"transmit\",\n                value: function(a) {\n                    var b = this.ports.get(a);\n                    if (void 0 === b) return void h.warn(\"Port (\" + a + \") for \" + this.name + \" does not exists.\");\n                    if (null === b) return void h.warn(\"Port (\" + a + \") for \" + this.name + \" is not connected.\");\n                    for (var c = arguments.length, d = Array(c > 1 ? c - 1 : 0), e = 1; e < c; e++) d[e - 1] = arguments[e];\n                    b.transmit(d);\n                }\n            }, {\n                key: \"request\",\n                value: function(a) {\n                    var b = this.ports.get(a);\n                    if (void 0 === b) return h.warn(\"Port (\" + a + \") for \" + this.name + \" does not exists.\"),\n                    null;\n                    if (null === b) return h.warn(\"Port (\" + a + \") for \" + this.name + \" is not connected.\"),\n                    null;\n                    for (var c = arguments.length, d = Array(c > 1 ? c - 1 : 0), e = 1; e < c; e++) d[e - 1] = arguments[e];\n                    return b.request(d);\n                }\n            } ]), a;\n        }();\n        c.Component = i;\n    }, {\n        \"../utility/csiologger\": 88,\n        \"./port\": 27\n    } ],\n    27: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a(b) {\n                var c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;\n                d(this, a), this.target = b, this.object = c;\n            }\n            return e(a, [ {\n                key: \"transmit\",\n                value: function(a) {\n                    this.target.apply(this.object, a);\n                }\n            }, {\n                key: \"request\",\n                value: function(a) {\n                    return this.target.apply(this.object, a);\n                }\n            } ]), a;\n        }();\n        c.Port = f;\n    }, {} ],\n    28: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.SlidingWindow = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./switem\"), g = a(\"../utility/timestamps\"), h = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(g), i = function() {\n            function a(b, c) {\n                d(this, a), this.items = [], this.plugins = [], this.postProcesses = [], this.preProcesses = [],\n                this.timeoutInMs = c, this.maxItemsNum = b, this.minItemsNum = 0;\n            }\n            return e(a, [ {\n                key: \"setMaxItemsNum\",\n                value: function(a) {\n                    this.maxItemsNum = a;\n                }\n            }, {\n                key: \"setTimeoutInMs\",\n                value: function(a) {\n                    this.timeoutInMs = a;\n                }\n            }, {\n                key: \"setMinItemsNum\",\n                value: function(a) {\n                    this.minItemsNum = a;\n                }\n            }, {\n                key: \"refresh\",\n                value: function() {\n                    var a = h.getCurrent();\n                    if (!(this.items.length <= this.minItemsNum)) {\n                        for (;0 < this.maxItemsNum && this.maxItemsNum <= this.items.length; ) this.remove();\n                        this.timeoutInMs && this.timeoutInMs < a - this.items[0].getCreated() && (this.remove(),\n                        this.refresh());\n                    }\n                }\n            }, {\n                key: \"getLength\",\n                value: function() {\n                    return this.items.length;\n                }\n            }, {\n                key: \"add\",\n                value: function(a) {\n                    this.refresh(), this.items.push(new f.SWItem(a));\n                    for (var b = 0; b < this.preProcesses.length; b++) {\n                        (0, this.preProcesses[b])(a);\n                    }\n                    for (var c = 0; c < this.plugins.length; c++) {\n                        this.plugins[c].add(a);\n                    }\n                    for (var d = 0; d < this.postProcesses.length; d++) {\n                        (0, this.postProcesses[d])(a);\n                    }\n                }\n            }, {\n                key: \"remove\",\n                value: function() {\n                    for (var a = this.items.shift(), b = 0; b < this.plugins.length; b++) {\n                        this.plugins[b].remove(a.value);\n                    }\n                }\n            }, {\n                key: \"peek\",\n                value: function() {\n                    var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;\n                    return this.items.length <= a ? null : this.items[this.items.length - a - 1].getValue();\n                }\n            }, {\n                key: \"attach\",\n                value: function(a) {\n                    this.plugins.push(a);\n                }\n            }, {\n                key: \"addPreProcess\",\n                value: function(a) {\n                    this.preProcesses.push(a);\n                }\n            }, {\n                key: \"addPostProcess\",\n                value: function(a) {\n                    this.postProcesses.push(a);\n                }\n            }, {\n                key: \"detach\",\n                value: function(a) {\n                    this.plugins = this.plugins.filter(function(b) {\n                        return b !== a;\n                    });\n                }\n            } ]), a;\n        }();\n        c.SlidingWindow = i;\n    }, {\n        \"../utility/timestamps\": 99,\n        \"./switem\": 29\n    } ],\n    29: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.SWItem = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"../utility/timestamps\"), g = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(f), h = function() {\n            function a(b) {\n                d(this, a), this.value = b, this.created = g.getCurrent();\n            }\n            return e(a, [ {\n                key: \"getValue\",\n                value: function() {\n                    return this.value;\n                }\n            }, {\n                key: \"getCreated\",\n                value: function() {\n                    return this.created;\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    return \"\";\n                }\n            } ]), a;\n        }();\n        c.SWItem = h;\n    }, {\n        \"../utility/timestamps\": 99\n    } ],\n    30: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.Conference = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../peerconnection/peerconnectionmanager\"), h = a(\"../config/settings\"), i = d(h), j = a(\"../utility/registry\"), k = a(\"../browserapi/sessionstorage\"), l = d(k), m = function() {\n            function a(b, c) {\n                e(this, a), this.conferenceId = b, this.startTime, this.peerConnectionManager = new g.PeerConnectionManager(),\n                this.credentials = c, this.ucId = null, this.url = null, this.userJoinedSent = !1;\n            }\n            return f(a, [ {\n                key: \"getCredentials\",\n                value: function() {\n                    return this.credentials;\n                }\n            }, {\n                key: \"getUcId\",\n                value: function() {\n                    return this.ucId;\n                }\n            }, {\n                key: \"setUcId\",\n                value: function(a) {\n                    this.ucId = a, this.url = i.conferenceBaseUrl + j.Registry.getCredentials().getAppId() + \"/conferences/\" + encodeURIComponent(this.conferenceId) + \"/\" + a + \"/general\",\n                    l.storeUcId(this.conferenceId, a);\n                }\n            }, {\n                key: \"getPeerConnectionManager\",\n                value: function() {\n                    return this.peerConnectionManager;\n                }\n            }, {\n                key: \"getUrl\",\n                value: function() {\n                    return this.url;\n                }\n            }, {\n                key: \"updateConferenceId\",\n                value: function(a) {\n                    this.conferenceId = a, this.peerConnectionManager.updateConferenceId(a);\n                }\n            }, {\n                key: \"close\",\n                value: function(a) {}\n            } ]), a;\n        }();\n        c.Conference = m;\n    }, {\n        \"../browserapi/sessionstorage\": 21,\n        \"../config/settings\": 34,\n        \"../peerconnection/peerconnectionmanager\": 42,\n        \"../utility/registry\": 95\n    } ],\n    31: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.ConferenceManager = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./conference\"), g = a(\"../config/constants\"), h = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(g), i = function() {\n            function a() {\n                d(this, a), this.conferenceMap = new Map();\n            }\n            return e(a, [ {\n                key: \"add\",\n                value: function(a, b) {\n                    if (!this.get(a)) {\n                        var c = new f.Conference(a, b);\n                        this.conferenceMap.set(a, c);\n                    }\n                }\n            }, {\n                key: \"get\",\n                value: function(a) {\n                    return this.conferenceMap.get(a);\n                }\n            }, {\n                key: \"getConferenceForPc\",\n                value: function(a) {\n                    var b = null;\n                    return a ? (this.conferenceMap.forEach(function(c, d) {\n                        var e = c.getPeerConnectionManager().getPcHandler(a);\n                        e && e.getConferenceId() === d && (b = c);\n                    }), b) : b;\n                }\n            }, {\n                key: \"getConferenceForPcHash\",\n                value: function(a) {\n                    var b = null;\n                    return a ? (this.conferenceMap.forEach(function(c, d) {\n                        var e = c.getPeerConnectionManager().getPcHandlerByHash(a);\n                        e && e.getConferenceId() === d && (b = c);\n                    }), b) : b;\n                }\n            }, {\n                key: \"updateConferenceId\",\n                value: function(a) {\n                    var b = h.tmpConferenceId, c = this.get(b);\n                    c && (c.updateConferenceId(a), this.conferenceMap.set(a, c), this.conferenceMap.delete(b));\n                }\n            }, {\n                key: \"getConferenceIds\",\n                value: function() {\n                    var a = [];\n                    return this.conferenceMap.forEach(function(b, c) {\n                        a.push(c);\n                    }), a;\n                }\n            } ]), a;\n        }();\n        c.ConferenceManager = i;\n    }, {\n        \"../config/constants\": 33,\n        \"./conference\": 30\n    } ],\n    32: [ function(a, b, c) {\n        \"use strict\";\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        c.csError = {\n            httpError: \"httpError\",\n            authError: \"authError\",\n            wsChannelFailure: \"wsChannelFailure\",\n            success: \"success\",\n            csProtoError: \"csProtoError\",\n            appConnectivityError: \"appConnectivityError\",\n            tokenGenerationError: \"tokenGenerationError\",\n            ok: \"OK\",\n            authOngoing: \"authOngoing\",\n            invalidWebRTCFunctionName: \"Invalid WebRTC function name\",\n            invalidEndPointType: \"Invalid EndPoint Type\",\n            invalidTransmissionDirection: \"Invalid fabric transmission direction\"\n        }, c.csErrorStrings = {\n            argumentError: \"Argument missing/invalid\",\n            cryptoError: \"Browser does not support Web Cryptography API. App secret based authentication requires Web Cryptography API\",\n            fabricEventUnsupported: \"Unsupported fabricEvent\",\n            fabricEventInvalid: \"Invalid fabricEvents value\",\n            fabricUsageInvalid: \"Invalid fabricUsage value\",\n            notInitialized: \"SDK is not initialized or no Fabrics added\",\n            pcInvalid: \"Invalid PeerConnection object passed\",\n            confereneDoesNotExist: \"conferenceId does not exist\",\n            webRTCFunctionsInvalid: \"Invalid webRTC functionName value\",\n            setProxyConfigInvokeError: \"cannot be called if window.csioproxy is false\",\n            invalidWebRTCFunctionName: \"Invalid WebRTC function name\",\n            invalidEndPointType: \"Invalid EndPoint Type\",\n            invalidTransmissionDirection: \"Invalid fabric transmission direction\",\n            apiaccesserror: \"API access Error\"\n        }, c.csErrorReason = {\n            csProtoError: \"Protocol fields cannot be empty.\",\n            csNoAuthState: \"Authentication state unavailable in server.\"\n        }, c.internalErrors = {\n            authOngoing: \"authOngoing\"\n        }, c.authErrorActions = {\n            RETRY: 0,\n            GET_NEW_TOKEN: 1,\n            REPORT_ERROR: 2\n        };\n    }, {} ],\n    33: [ function(a, b, c) {\n        \"use strict\";\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        c.logEvents = {\n            stateMachine: \"stateMachine\",\n            log: \"log\",\n            timing: \"timing\",\n            error: \"error\",\n            getStatsError: \"getStatsError\",\n            restResponseError: \"restResponseError\"\n        }, c.fabricEvent = {\n            fabricSetupFailed: \"fabricSetupFailed\",\n            fabricHold: \"fabricHold\",\n            fabricResume: \"fabricResume\",\n            audioMute: \"audioMute\",\n            audioUnmute: \"audioUnmute\",\n            videoPause: \"videoPause\",\n            videoResume: \"videoResume\",\n            fabricUsageEvent: \"fabricUsageEvent\",\n            fabricTerminated: \"fabricTerminated\",\n            screenShareStart: \"screenShareStart\",\n            screenShareStop: \"screenShareStop\",\n            dominantSpeaker: \"dominantSpeaker\",\n            activeDeviceList: \"activeDeviceList\",\n            applicationErrorLog: \"applicationErrorLog\"\n        }, c.internalFabricEvent = {\n            fabricSetup: \"fabricSetup\",\n            fabricSetupFailed: \"fabricSetupFailed\",\n            userJoined: \"userJoined\",\n            userLeft: \"userLeft\",\n            userAlive: \"userAlive\",\n            ssrcMap: \"ssrcMap\",\n            mediaPlaybackStart: \"mediaPlaybackStart\",\n            mediaPlaybackSuspended: \"mediaPlaybackSuspended\",\n            mediaPlaybackStalled: \"mediaPlaybackStalled\",\n            oneWayMedia: \"oneWayMedia\",\n            fabricStateChange: \"fabricStateChange\",\n            iceDisruptionStart: \"iceDisruptionStart\",\n            iceDisruptionEnd: \"iceDisruptionEnd\",\n            fabricTransportSwitch: \"fabricTransportSwitch\",\n            iceConnectionDisruptionStart: \"iceConnectionDisruptionStart\",\n            iceConnectionDisruptionEnd: \"iceConnectionDisruptionEnd\",\n            iceAborted: \"iceAborted\",\n            iceTerminated: \"iceTerminated\",\n            iceFailed: \"iceFailed\",\n            iceRestarted: \"iceRestarted\",\n            fabricDropped: \"fabricDropped\",\n            connectedDeviceList: \"connectedDeviceList\",\n            sdpSubmission: \"sdpSubmissionEvent\",\n            sendingThroughputObservations: \"sendingThroughputObservations\",\n            limitationObservations: \"limitationObservations\",\n            userDetails: \"userDetails\"\n        }, c.callstatsChannels = {\n            sdpSubmission: \"sdpSubmissionEvent\",\n            processedStats: \"processedStats\",\n            callstatsEvent: \"callStatsEvent\",\n            userFeedback: \"userFeedbackEvent\",\n            preCallTest: \"preCallTest\",\n            senderConfiguration: \"senderConfiguration\"\n        }, c.precalltestEvents = {\n            results: \"preCallTestResults\",\n            associate: \"preCallTestAssociate\"\n        }, c.callstatsAPIReturnStatus = {\n            success: \"success\",\n            failure: \"failure\"\n        }, c.fabricUsage = {\n            audio: \"audio\",\n            video: \"video\",\n            data: \"data\",\n            screen: \"screen\",\n            multiplex: \"multiplex\",\n            unbundled: \"unbundled\"\n        }, c.userIdType = {\n            local: \"local\",\n            remote: \"remote\"\n        }, c.qualityRating = {\n            excellent: 5,\n            good: 4,\n            fair: 3,\n            poor: 2,\n            bad: 1\n        }, c.reportType = {\n            local: \"local\",\n            remote: \"remote\",\n            inbound: \"inbound\",\n            outbound: \"outbound\"\n        }, c.avQualityRatings = {\n            excellent: \"excellent\",\n            fair: \"fair\",\n            bad: \"bad\",\n            unknown: \"unknown\"\n        }, c.fabricState = {\n            established: \"established\",\n            initializing: \"initializing\",\n            failed: \"failed\",\n            disrupted: \"disrupted\",\n            hold: \"hold\",\n            checkingDisrupted: \"checkingDisrupted\",\n            terminated: \"terminated\"\n        }, c.webRTCFunctions = {\n            createOffer: \"createOffer\",\n            createAnswer: \"createAnswer\",\n            setLocalDescription: \"setLocalDescription\",\n            setRemoteDescription: \"setRemoteDescription\",\n            addIceCandidate: \"addIceCandidate\",\n            getUserMedia: \"getUserMedia\",\n            iceConnectionFailure: \"iceConnectionFailure\",\n            signalingError: \"signalingError\",\n            applicationError: \"applicationError\",\n            applicationLog: \"applicationLog\"\n        }, c.callFailureReasons = {\n            mediaConfigError: \"MediaConfigError\",\n            negotiationFailure: \"NegotiationFailure\",\n            sdpError: \"SDPGenerationError\",\n            iceFailure: \"IceConnectionFailure\",\n            transportFailure: \"TransportFailure\",\n            signalingError: \"SignalingError\",\n            applicationError: \"ApplicationError\",\n            applicationLog: \"ApplicationLog\",\n            invalidWebRTCFunctionName: \"Invalid WebRTC function name\"\n        }, c.throughputThreshold = {\n            video: {\n                green: 1024,\n                red: 256\n            },\n            audio: {\n                green: 30,\n                red: 8\n            }\n        }, c.currOverPrevFrameRateThreshold = {\n            video: {\n                green: .8,\n                red: .3\n            }\n        }, c.rttThreshold = {\n            video: {\n                green: 400,\n                red: 1e3\n            }\n        }, c.fractionalLossThreshold = {\n            video: {\n                green: .1,\n                red: .5\n            },\n            audio: {\n                green: .15,\n                red: .3\n            }\n        }, c.eModelThreshold = {\n            audio: {\n                green: 240,\n                red: 400\n            }\n        }, c.codeBaseType = {\n            chrome: \"Chrome\",\n            firefox: \"Firefox\",\n            edge: \"Edge\",\n            plugin: \"Plugin\"\n        }, c.browserName = {\n            chrome: \"Chrome\",\n            firefox: \"Firefox\",\n            edge: \"Edge\",\n            msie: \"Microsoft Internet Explorer\",\n            safari: \"Safari\",\n            opera: \"Opera\"\n        }, c.osName = {\n            windows: \"Windows\",\n            mac: \"Mac OS X\",\n            android: \"Android\",\n            ios: \"iOS\"\n        }, c.mediaType = {\n            audio: \"audio\",\n            video: \"video\"\n        }, c.streamType = {\n            inbound: \"inbound\",\n            outbound: \"outbound\"\n        }, c.fabricStateChangeType = {\n            signalingState: \"signalingState\",\n            iceConnectionState: \"iceConnectionState\",\n            iceGatheringState: \"iceGatheringState\"\n        }, c.transportType = {\n            rest: \"rest\",\n            ws: \"ws\"\n        }, c.wsConnectionState = {\n            initiated: \"initiated\",\n            connected: \"connected\",\n            closed: \"closed\"\n        }, c.csCallBackMessages = {\n            authSuccessful: \"SDK authentication successful.\",\n            authFailed: \"SDK authentication failed.\",\n            authProtocolInvalid: \"Fatal authentication error. Invalid auth protocol message.\",\n            authOngoing: \"Authentication on going.\",\n            wsConnected: \"WebSocket establishment successful.\",\n            wsClosed: \"WebSocket server closed.\",\n            wsFailed: \"WebSocket establishment failed.\"\n        }, c.oneWayMediaTypes = {\n            audio: \"audio\",\n            video: \"video\",\n            screen: \"screen\"\n        }, c.limitationType = {\n            cpu: \"cpu\",\n            network: \"network\"\n        }, c.qualityDisruptionTypes = {\n            qpchange: \"qpchange\"\n        }, c.callbackFunctions = {\n            stats: \"stats\",\n            defaultConfig: \"defaultConfig\",\n            recommendedConfig: \"recommendedConfig\",\n            preCallTestResults: \"preCallTestResults\",\n            preCallTest: \"preCallTest\"\n        }, c.endpointType = {\n            peer: \"peer\",\n            server: \"server\"\n        }, c.transmissionDirection = {\n            sendonly: \"sendonly\",\n            receiveonly: \"receiveonly\",\n            sendrecv: \"sendrecv\",\n            inactive: \"inactive\"\n        }, c.tmpConferenceId = \"csio-conf-id-tmp\";\n    }, {} ],\n    34: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            c.configServiceUrl = m = a;\n        }\n        function e(a) {\n            c.authServiceUrl = n = a;\n        }\n        function f(a) {\n            c.conferenceBaseUrl = o = a;\n        }\n        function g(a) {\n            c.wsUrl = p = a;\n        }\n        function h(a) {\n            c.restEventUrl = q = a;\n        }\n        function i(a) {\n            c.restStatsUrl = r = a;\n        }\n        function j(a) {\n            c.baseUrl = s = a;\n        }\n        function k(a) {\n            c.qmodelThresholdsAPIUrl = t = a;\n        }\n        function l(a) {\n            c.transportType = u = a;\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.setConfigServiceUrl = d, c.setAuthServiceUrl = e, c.setConferenceBaseUrl = f,\n        c.setWsUrl = g, c.setRestEventUrl = h, c.setRestStatsUrl = i, c.setBaseUrl = j,\n        c.setQmodelThresholdsAPIUrl = k, c.setTransportType = l;\n        var m = (c.version = \"3.53.4\", c.configServiceUrl = \"https://appsettings.callstats.io/v1/apps/\"), n = c.authServiceUrl = \"https://auth.callstats.io/\", o = (c.authRetryTimeout = 5e3,\n        c.conferenceBaseUrl = \"https://dashboard.callstats.io/apps/\"), p = c.wsUrl = \"wss://collector.callstats.io:443/csiows/collectCallStats\", q = c.restEventUrl = \"https://events.callstats.io/v1/apps/\", r = c.restStatsUrl = \"https://stats.callstats.io/v1/apps/\", s = c.baseUrl = \"https://collector.callstats.io:443/\", t = c.qmodelThresholdsAPIUrl = \"https://dashboard.callstats.io/api-internal/v1/qmodelthresholds\", u = (c.csioDebug = \"false\",\n        c.transportType = \"@@transportType\");\n    }, {} ],\n    35: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a) {\n            if (Array.isArray(a)) {\n                for (var b = 0, c = Array(a.length); b < a.length; b++) c[b] = a[b];\n                return c;\n            }\n            return Array.from(a);\n        }\n        function f(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function g(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function h(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        function i() {\n            Array.prototype.find || Object.defineProperty(Array.prototype, \"find\", {\n                value: function(a) {\n                    if (null === this) throw new TypeError(\"Array.prototype.find called on null or undefined\");\n                    if (\"function\" != typeof a) throw new TypeError(\"predicate must be a function\");\n                    for (var b = Object(this), c = b.length >>> 0, d = arguments[1], e = void 0, f = 0; f < c; f++) if (e = b[f],\n                    a.call(d, e, f, b)) return e;\n                }\n            });\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.MainFSM = c.MainEvents = void 0;\n        var j = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(a) {\n            return typeof a;\n        } : function(a) {\n            return a && \"function\" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? \"symbol\" : typeof a;\n        }, k = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), l = a(\"./statemachine\"), m = a(\"../utility/registry\"), n = a(\"../utility/csiologger\"), o = d(n), p = a(\"../utility/utils\"), q = d(p), r = a(\"../utility/timestamps\"), s = d(r), t = a(\"../config/constants\"), u = d(t), v = a(\"../config/settings\"), w = d(v), x = a(\"./utility\"), y = d(x), z = a(\"../statspipeline/statsadapter\"), A = a(\"../statspipeline/statsparser\"), B = a(\"../statspipeline/statsmonitor\"), C = a(\"../statspipeline/statstransmitter\"), D = a(\"../statspipeline/statsassembler\"), E = {\n            Created: \"Created\",\n            Initializing: \"Initializing\",\n            Idle: \"Idle\",\n            Run: \"Run\"\n        }, F = c.MainEvents = {\n            onStart: \"onStart\",\n            onInitialize: \"onInitialize\",\n            onAddNewFabric: \"onAddNewFabric\",\n            onSendFabricEvent: \"onSendFabricEvent\",\n            onReportError: \"onReportError\",\n            onAssociateMstWithUserID: \"onAssociateMstWithUserID\",\n            onSetProxyConfig: \"onSetProxyConfig\",\n            onAttachWifiStatsHandler: \"onAttachWifiStatsHandler\",\n            onSendUserFeedback: \"onSendUserFeedback\",\n            onOn: \"onOn\",\n            onSetIdentifiers: \"onSetIdentifiers\",\n            onMakePrecallTest: \"onMakePrecallTest\"\n        }, G = {\n            onServicesFinished: \"onServicesFinished\"\n        }, H = function(a) {\n            function b() {\n                f(this, b);\n                var a = g(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, E.Created));\n                return o.log(\"FSM:\", a.getState()), a.fire(F.onStart), a.run(), i(), a;\n            }\n            return h(b, a), k(b, [ {\n                key: \"proceed\",\n                value: function(a, b) {\n                    switch (this.getState()) {\n                      case E.Created:\n                        switch (a) {\n                          case F.onStart:\n                            this.onStart.apply(this, e(b));\n                            break;\n\n                          case F.onInitialize:\n                            this.setState(E.Initializing), o.log(\"FSM:\", this.getState()), this.onInitialize.apply(this, e(b));\n                            break;\n\n                          case F.onOn:\n                            this.onOn.apply(this, e(b));\n                            break;\n\n                          case F.onSetProxyConfig:\n                            this.onSetProxyConfig.apply(this, e(b));\n                        }\n                        break;\n\n                      case E.Initializing:\n                        switch (a) {\n                          case G.onServicesFinished:\n                            this.onServicesFinished() && (this.setState(E.Idle), o.log(\"FSM:\", this.getState()));\n                            break;\n\n                          case F.onAddNewFabric:\n                            this.onAddNewFabric.apply(this, e(b));\n                            break;\n\n                          case F.onSendFabricEvent:\n                            this.onSendFabricEvent.apply(this, e(b));\n                            break;\n\n                          case F.onReportError:\n                            this.onReportError.apply(this, e(b));\n                            break;\n\n                          case F.onAssociateMstWithUserID:\n                            this.onAssociateMstWithUserID.apply(this, e(b));\n                            break;\n\n                          case F.onSendUserFeedback:\n                            this.onSendUserFeedback.apply(this, e(b));\n                            break;\n\n                          case F.onAttachWifiStatsHandler:\n                            this.onAttachWifiStatsHandler.apply(this, e(b));\n                            break;\n\n                          case F.onOn:\n                            this.onOn.apply(this, e(b));\n                            break;\n\n                          case F.onMakePrecallTest:\n                            this.onMakePrecallTest.apply(this, e(b));\n                            break;\n\n                          case F.onSetIdentifiers:\n                            this.onSetIdentifiers.apply(this, e(b));\n                            break;\n\n                          case F.onSetProxyConfig:\n                            this.onSetProxyConfig.apply(this, e(b));\n                        }\n                        break;\n\n                      case E.Idle:\n                      case E.Run:\n                        switch (a) {\n                          case F.onAddNewFabric:\n                            this.onAddNewFabric.apply(this, e(b));\n                            break;\n\n                          case F.onSendFabricEvent:\n                            this.onSendFabricEvent.apply(this, e(b));\n                            break;\n\n                          case F.onReportError:\n                            this.onReportError.apply(this, e(b));\n                            break;\n\n                          case F.onAssociateMstWithUserID:\n                            this.onAssociateMstWithUserID.apply(this, e(b));\n                            break;\n\n                          case F.onSendUserFeedback:\n                            this.onSendUserFeedback.apply(this, e(b));\n                            break;\n\n                          case F.onAttachWifiStatsHandler:\n                            this.onAttachWifiStatsHandler.apply(this, e(b));\n                            break;\n\n                          case F.onOn:\n                            this.onOn.apply(this, e(b));\n                            break;\n\n                          case F.onSetProxyConfig:\n                            this.onSetProxyConfig.apply(this, e(b));\n                            break;\n\n                          case F.onMakePrecallTest:\n                            this.onMakePrecallTest.apply(this, e(b));\n                            break;\n\n                          case F.onSetIdentifiers:\n                            this.onSetIdentifiers.apply(this, e(b));\n                        }\n                    }\n                }\n            }, {\n                key: \"onStart\",\n                value: function() {\n                    m.Registry.getEndpoint().setup(), this.authenticator = m.Registry.getAuthenticator(),\n                    this.configservicewrapper = m.Registry.getConfigServiceWrapper(), this.precalltest = m.Registry.getPreCallTest(),\n                    this.precalltestIds = [];\n                    var a = m.Registry.getStatsAdapter(), b = m.Registry.getStatsParser(), c = m.Registry.getStatsMonitor(), d = m.Registry.getStatsTransmitter(), e = m.Registry.getStatsAssembler();\n                    a.connect(z.StatsAdapterIO.RawStatsOut, b.getPort(A.StatsParserIO.RawStatsIn)),\n                    b.connect(A.StatsParserIO.PcStatsTupleOut, c.getPort(B.StatsMonitorIO.PcStatsTupleIn)),\n                    c.connect(B.StatsMonitorIO.StatsTupleOut, e.getPort(D.StatsAssemblerIO.StatsTupleIn)),\n                    e.connect(D.StatsAssemblerIO.CallstatsOut, d.getPort(C.StatsTransmitterIO.CallstatsIn)),\n                    a.connect(z.StatsAdapterIO.UnprocessedOut, d.getPort(C.StatsTransmitterIO.UnprocessedIn));\n                }\n            }, {\n                key: \"setupConnection\",\n                value: function() {\n                    var a = this;\n                    this.connectionManager = m.Registry.getConnectionManager(), this.connectionManager.setupCollectorConnection(m.Registry.getCredentials().getTransportType()),\n                    this.connectionManager.setup().then(function() {\n                        o.log(\"Connected to connectionManager\"), a.fire(G.onServicesFinished), a.run();\n                    }).catch(function(a) {\n                        return o.log(\"Could not connect to connectionManager\", a);\n                    });\n                }\n            }, {\n                key: \"setup\",\n                value: function() {\n                    var a = this;\n                    this.clocksync = m.Registry.getClockSync(), this.clocksync.initiate().then(function() {\n                        o.log(\"Clocksync completed\"), a.fire(G.onServicesFinished), a.run();\n                    }).catch(function(a) {\n                        return o.log(\"Could not finish ClockSync\", a);\n                    });\n                }\n            }, {\n                key: \"onInitialize\",\n                value: function(a, b, c, d, e, f) {\n                    var g = this, h = m.Registry.getCredentials();\n                    if (h.setAppId(a), h.setUserId(b), m.Registry.getCallbacks().set(u.callbackFunctions.stats, e),\n                    this.doPrecalltest = !0, f) {\n                        if (!0 === f.disableBeforeUnloadHandler && this.setBeforeUnloadHandler(), f.applicationVersion) {\n                            m.Registry.getEndpoint().setAppVersion(f.applicationVersion);\n                        }\n                        f.transportType && w.setTransportType(f.transportType), f.disablePrecalltest && (this.doPrecalltest = !1);\n                    }\n                    this.setup(), this.authenticator.initiate(c, d).then(function(a) {\n                        o.log(\"Authentication complete\"), g.setupConnection();\n                        var b = m.Registry.getCredentials().getStatsSubmissionInterval();\n                        m.Registry.getStatsMonitor().setIntervals(b, b), g.fire(G.onServicesFinished), g.run();\n                        var c = g.authenticator.getIceServers();\n                        c && g.doPrecalltest && g.precalltest.start(c, \"callstats\", g.precalltestCallback.bind(g)),\n                        g.configservicewrapper.initiateInternalConfig().then(function() {\n                            o.log(\"ConfigService internal config:\", g.configservicewrapper.getInternalConfig()),\n                            g.fire(G.onServicesFinished), g.run();\n                        }, function(a) {\n                            return o.log(a);\n                        }), g.configservicewrapper.initiateAppConfig().then(function() {\n                            var a = m.Registry.getCallbacks().get(u.callbackFunctions.defaultConfig), b = g.configservicewrapper.getAppDefaultConfig();\n                            a && b && a(b);\n                            var c = m.Registry.getCallbacks().get(u.callbackFunctions.recommendedConfig), d = g.configservicewrapper.getAppRecommendedConfig();\n                            c && d && c(d), g.fire(G.onServicesFinished), g.run();\n                        }, function(a) {\n                            return o.log(a);\n                        });\n                    }, function(a) {\n                        o.log(a);\n                    });\n                }\n            }, {\n                key: \"precalltestCallback\",\n                value: function(a, b) {\n                    var c = m.Registry.getCallbacks().get(u.callbackFunctions.preCallTestResults), d = m.Registry.getCallbacks().get(u.callbackFunctions.preCallTest);\n                    if (d && d(a), c) {\n                        if (b) {\n                            var e = {\n                                msg: \"precalltest error: \" + b\n                            };\n                            return o.warn(\"backendlog\", e), m.Registry.getGenericEventHandler().sendEvent(u.logEvents.log, e),\n                            void c(u.callstatsAPIReturnStatus.failure, null);\n                        }\n                        var f = y.getPublicPrecalltestResults(a);\n                        c(u.callstatsAPIReturnStatus.success, f);\n                    }\n                    a && (this.precalltestIds.push(a.id), a.tests && a.tests.ice && (\"\" === a.tests.ice.turnIpAddress && delete a.tests.ice.turnIpAddress,\n                    \"\" === a.tests.ice.turnIpVersion && delete a.tests.ice.turnIpVersion, \"\" === a.tests.ice.turnTransport && delete a.tests.ice.turnTransport),\n                    o.log(\"sending preCallTest results\", a), m.Registry.getEventMessageBuilder().make(u.precalltestEvents.results, null, null, {\n                        results: a\n                    }));\n                }\n            }, {\n                key: \"setBeforeUnloadHandler\",\n                value: function() {\n                    window && window.addEventListener && (o.log(\"setBeforeUnloadHandler\"), window.addEventListener(\"beforeunload\", function(a) {\n                        return m.Registry.getConferenceManager().conferenceMap.forEach(function(a, b) {\n                            a && a.getPeerConnectionManager().pcHandlers.forEach(function(a, b) {\n                                m.Registry.getEventMessageBuilder().make(u.internalFabricEvent.userLeft, a.getConferenceId(), a.getPeerConnection());\n                            });\n                        }), \"Are you sure you want to close the call?\";\n                    }));\n                }\n            }, {\n                key: \"onServicesFinished\",\n                value: function() {\n                    return !!(this.connectionManager && this.connectionManager.isReady() && this.clocksync.isCompleted() && this.authenticator.isCompleted()) && (m.Registry.getTransmissionManager().trySend(),\n                    !0);\n                }\n            }, {\n                key: \"onAddNewFabric\",\n                value: function(a, b, c, d, e, f, g) {\n                    o.warn(\"FSM onAddNewFabric\"), m.Registry.getConferenceManager().add(d, m.Registry.getCredentials());\n                    var h = m.Registry.getConferenceManager().get(d);\n                    h.getPeerConnectionManager().addPcHandler(a, b, c, d, e, f, g);\n                    var i = {\n                        endpointInfo: m.Registry.getEndpoint().serialize()\n                    };\n                    m.Registry.getCredentials().getUserIdObject() && (i.localUserIDObject = m.Registry.getCredentials().getUserIdObject()),\n                    h.userJoinedSent || (m.Registry.getEventMessageBuilder().make(u.internalFabricEvent.userJoined, d, a, i),\n                    h.userJoinedSent = !0, m.Registry.getCredentials().getTransportType() === u.transportType.rest && i.localUserIDObject && i.localUserIDObject.userName && m.Registry.getEventMessageBuilder().make(u.internalFabricEvent.userDetails, d, a, {\n                        userName: String(i.localUserIDObject.userName)\n                    }));\n                    var j = this.precalltestIds;\n                    this.precalltestIds = [];\n                    var k = this.precalltest.getId();\n                    k && j.push(k), j.length > 0 && m.Registry.getEventMessageBuilder().make(u.precalltestEvents.associate, d, a, {\n                        ids: j\n                    });\n                }\n            }, {\n                key: \"onSendFabricEvent\",\n                value: function(a, b, c, d) {\n                    o.warn(\"FSM onSendFabricEvent\");\n                    var e = {};\n                    if (d && (e = d, e.ssrc && (e.ssrc = String(e.ssrc))), b === u.fabricEvent.activeDeviceList) {\n                        e = {\n                            mediaDeviceList: q.normalizeMediaDeviceList(d.deviceList)\n                        };\n                    }\n                    m.Registry.getEventMessageBuilder().make(b, c, a, e);\n                    var f = m.Registry.getConferenceManager().get(c);\n                    if (f) {\n                        var g = f.getPeerConnectionManager().getPcHandler(a);\n                        b !== u.fabricEvent.fabricTerminated && b !== u.internalFabricEvent.fabricSetupFailed || (g.stopUserAliveHandler(),\n                        g.setPcState(u.fabricState.terminated), g.stopStatsPolling()), b === u.fabricEvent.fabricHold && (g.setPcState(u.fabricState.hold),\n                        g.stopStatsPolling()), b === u.fabricEvent.fabricResume && (g.setPcState(u.fabricState.established),\n                        g.startStatsPolling());\n                    }\n                }\n            }, {\n                key: \"onReportError\",\n                value: function(a, b, c, d, e, f) {\n                    o.warn(\"FSM onReportError\");\n                    var g = {\n                        failureDelay: 0,\n                        reason: this.callFailureClassifier(c),\n                        function: c,\n                        magicKey: m.Registry.getEndpoint().getMagicKey(),\n                        endpoint: m.Registry.getEndpoint().serialize(),\n                        level: \"debug\"\n                    };\n                    if (d) {\n                        var h = this.formatDomError(d);\n                        g.message = h.message, g.messageType = h.messageType, g.name = d.name, g.stack = d.stack;\n                    }\n                    if (a) {\n                        var i = m.Registry.getConferenceManager().get(b), j = void 0;\n                        if (i && (j = i.getPeerConnectionManager().getPcHandler(a)), !j) return void o.error(\"onReportError: No handler found for given PeerConnection!\");\n                        if (g.failureDelay = s.getCurrent() - j.getStartTime(), g.fabricState = j.getPcState(),\n                        g.iceConnectionState = j.getIceConnectionState(), (e || f || a && \"closed\" !== a.signalingState) && m.Registry.getCredentials().getCollectSDP() && c === u.fabricEvent.fabricSetupFailed) {\n                            var k = {};\n                            k.localSDP = this.pickSDP(a, e, \"localDescription\"), k.remoteSDP = this.pickSDP(a, f, \"remoteDescription\"),\n                            m.Registry.getEventMessageBuilder().make(u.callstatsChannels.sdpSubmission, b, a, k);\n                        }\n                    }\n                    c === u.webRTCFunctions.applicationLog || c === u.webRTCFunctions.applicationError ? m.Registry.getEventMessageBuilder().make(u.fabricEvent.applicationErrorLog, b, a, g) : c === u.webRTCFunctions.iceConnectionFailure ? this.handleIceConnectionFailure(a, b, g) : (m.Registry.getEventMessageBuilder().make(u.fabricEvent.fabricSetupFailed, b, a, g),\n                    c === u.webRTCFunctions.getUserMedia && this.handleGUMErrors(b));\n                }\n            }, {\n                key: \"onAssociateMstWithUserID\",\n                value: function(a, b, c, d, e, f) {\n                    var g = m.Registry.getConferenceManager().get(c);\n                    if (g) {\n                        var h = g.getPeerConnectionManager().getPcHandler(a);\n                        \"string\" != typeof d && (d += \"\"), h.updateSSRCInfo(d, b, e, f);\n                    }\n                }\n            }, {\n                key: \"onAttachWifiStatsHandler\",\n                value: function(a) {\n                    m.Registry.getWifiStatsExecutor().setGetWifiStatsMethod(a);\n                }\n            }, {\n                key: \"onSetProxyConfig\",\n                value: function(a) {\n                    o.warn(\"FSM onSetProxyConfig\"), a.collectorURL && w.setBaseUrl(a.collectorURL),\n                    a.authServiceURL && w.setAuthServiceUrl(a.authServiceURL), a.csioInternalAPIURL && w.setQmodelThresholdsAPIUrl(a.csioInternalAPIURL),\n                    a.wsURL && w.setWsUrl(a.wsURL), a.restEventURL && w.setRestEventUrl(a.restEventURL),\n                    a.restStatsURL && w.setRestStatsUrl(a.restStatsURL), a.appSettingsURL && w.setConfigServiceUrl(a.appSettingsURL);\n                }\n            }, {\n                key: \"onSendUserFeedback\",\n                value: function(a, b, c) {\n                    var d = {\n                        feedback: {\n                            overallRating: b.overall\n                        }\n                    };\n                    b.video && (d.feedback.videoQualityRating = b.video), b.audio && (d.feedback.audioQualityRating = b.audio),\n                    b.comment && (d.feedback.comments = b.comment), m.Registry.getEventMessageBuilder().make(u.callstatsChannels.userFeedback, a, null, d);\n                }\n            }, {\n                key: \"onOn\",\n                value: function(a, b) {\n                    m.Registry.getCallbacks().set(a, b);\n                }\n            }, {\n                key: \"onSetIdentifiers\",\n                value: function(a, b) {\n                    if (a.conferenceID && (m.Registry.getConferenceManager().updateConferenceId(a.conferenceID),\n                    m.Registry.getTransmissionManager().updateConferenceId(a.conferenceID), m.Registry.getTransmissionManager().trySend()),\n                    a.remoteUserID && b) {\n                        var c = m.Registry.getConferenceManager().getConferenceForPc(b);\n                        if (!c) return void o.log(\"onSetIdentifiers conference not found\");\n                        var d = c.getPeerConnectionManager().getPcHandler(b);\n                        if (!d) return void o.log(\"pcHandler not found\");\n                        d.updateRemoteId(a.remoteUserID), m.Registry.getTransmissionManager().trySend();\n                    }\n                }\n            }, {\n                key: \"onMakePrecallTest\",\n                value: function(a, b) {\n                    var c = this, d = a, e = b || \"callstats\";\n                    a || (d = this.authenticator.getIceServers(), e = \"callstats\"), c.precalltest.start(d, e, c.precalltestCallback.bind(c));\n                }\n            }, {\n                key: \"handleIceConnectionFailure\",\n                value: function(a, b, c) {\n                    if (a) {\n                        var d = m.Registry.getConferenceManager().get(b), e = void 0;\n                        if (d && (e = d.getPeerConnectionManager().getPcHandler(a)), e) if (e.isFabricSetupSent()) {\n                            var f = {};\n                            f.localIceCandidates = [], f.remoteIceCandidates = [], f.iceCandidatePairs = [],\n                            f.delay = s.getCurrent() - e.getStartTime(), f.currIceConnectionState = \"failed\",\n                            f.prevIceConnectionState = \"disconnected\", m.Registry.getEventMessageBuilder().make(u.internalFabricEvent.iceFailed, b, a, f);\n                        } else c.failureDelay = s.getCurrent() - e.getStartTime(), c.fabricState = e.getPcState(),\n                        c.iceConnectionState = e.getIceConnectionState(), m.Registry.getEventMessageBuilder().make(u.fabricEvent.fabricSetupFailed, b, a, c);\n                    }\n                }\n            }, {\n                key: \"handleGUMErrors\",\n                value: function(a) {\n                    var b = m.Registry.getConferenceManager().get(a);\n                    if (b || (m.Registry.getConferenceManager().add(a, m.Registry.getCredentials()),\n                    b = m.Registry.getConferenceManager().get(a)), !b.getUcId()) {\n                        var c = {\n                            endpointInfo: m.Registry.getEndpoint().serialize()\n                        };\n                        m.Registry.getEventMessageBuilder().make(u.internalFabricEvent.userJoined, a, null, c),\n                        b.userJoinedSent = !0;\n                    }\n                }\n            }, {\n                key: \"callFailureClassifier\",\n                value: function(a) {\n                    var b = void 0;\n                    return u.webRTCFunctions.hasOwnProperty(a) ? a === u.webRTCFunctions.createOffer || a === u.webRTCFunctions.createAnswer || a === u.webRTCFunctions.setRemoteDescription ? b = u.callFailureReasons.negotiationFailure : a === u.webRTCFunctions.setLocalDescription ? b = u.callFailureReasons.sdpError : a === u.webRTCFunctions.addIceCandidate ? b = u.callFailureReasons.sdpError : a === u.webRTCFunctions.getUserMedia ? b = u.callFailureReasons.mediaConfigError : a === u.webRTCFunctions.iceConnectionFailure ? b = u.callFailureReasons.iceFailure : a === u.webRTCFunctions.signalingError ? b = u.callFailureReasons.signalingError : (a === u.webRTCFunctions.applicationLog || u.webRTCFunctions.applicationError) && (b = u.callFailureReasons.applicationLog) : b = u.callFailureReasons.invalidWebRTCFunctionName,\n                    b;\n                }\n            }, {\n                key: \"formatDomError\",\n                value: function(a) {\n                    var b = {}, c = {};\n                    a && (window.DOMException && a instanceof window.DOMException ? (c.message = a.message,\n                    c.name = a.name, b.messageType = \"domError\") : \"object\" === (void 0 === a ? \"undefined\" : j(a)) ? (a.message && (c.message = a.message),\n                    a.name && (c.name = a.name), a.constraintName && (c.name = a.constraintName), a.stack && (c.stack = a.stack),\n                    b.messageType = \"json\") : (c = a, b.messageType = \"text\"));\n                    var d = this.truncateLog(c);\n                    return \"object\" === (void 0 === d ? \"undefined\" : j(d)) ? b.message = JSON.stringify(d) : b.message = d,\n                    b;\n                }\n            }, {\n                key: \"pickSDP\",\n                value: function(a, b, c) {\n                    return b || (a && a[c] ? a[c].sdp : \"\");\n                }\n            }, {\n                key: \"truncateString\",\n                value: function(a) {\n                    return a.length > 2e4 && (o.log(\"Log exceeds 20kb, It will be truncated\"), a = a.substring(0, 2e4)),\n                    a;\n                }\n            }, {\n                key: \"truncateLog\",\n                value: function(a) {\n                    return a ? (\"string\" == typeof a ? a = this.truncateString(a) : \"object\" === (void 0 === a ? \"undefined\" : j(a)) && a.message && (a.message = this.truncateString(a.message)),\n                    a) : a;\n                }\n            } ]), b;\n        }(l.StateMachine);\n        c.MainFSM = H;\n    }, {\n        \"../config/constants\": 33,\n        \"../config/settings\": 34,\n        \"../statspipeline/statsadapter\": 69,\n        \"../statspipeline/statsassembler\": 70,\n        \"../statspipeline/statsmonitor\": 72,\n        \"../statspipeline/statsparser\": 73,\n        \"../statspipeline/statstransmitter\": 74,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"../utility/timestamps\": 99,\n        \"../utility/utils\": 101,\n        \"./statemachine\": 37,\n        \"./utility\": 38\n    } ],\n    36: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a(b, c) {\n                d(this, a), this.type = b, this.args = void 0 !== c ? c : null;\n            }\n            return e(a, [ {\n                key: \"getType\",\n                value: function() {\n                    return this.type;\n                }\n            }, {\n                key: \"getArgs\",\n                value: function() {\n                    return this.args;\n                }\n            } ]), a;\n        }();\n        c.ProgramEvent = f;\n    }, {} ],\n    37: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.StateMachine = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./programevent\"), g = a(\"../utility/csiologger\"), h = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(g), i = function() {\n            function a(b) {\n                d(this, a), this.events = [], this.state = b;\n            }\n            return e(a, [ {\n                key: \"fire\",\n                value: function(a) {\n                    for (var b = arguments.length, c = Array(b > 1 ? b - 1 : 0), d = 1; d < b; d++) c[d - 1] = arguments[d];\n                    var e = new f.ProgramEvent(a, c);\n                    this.events.push(e);\n                }\n            }, {\n                key: \"proceed\",\n                value: function(a, b) {\n                    h.warn(\"You need to overwrite the proceed function inan extended StateMachine\");\n                }\n            }, {\n                key: \"setState\",\n                value: function(a) {\n                    this.state = a;\n                }\n            }, {\n                key: \"getState\",\n                value: function() {\n                    return this.state;\n                }\n            }, {\n                key: \"run\",\n                value: function() {\n                    if (!(this.events.length < 1)) {\n                        var a = this.events.shift();\n                        this.proceed(a.getType(), a.getArgs());\n                    }\n                }\n            } ]), a;\n        }();\n        c.StateMachine = i;\n    }, {\n        \"../utility/csiologger\": 88,\n        \"./programevent\": 36\n    } ],\n    38: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            var b = {\n                mediaConnectivity: !1,\n                throughput: null,\n                fractionalLoss: null,\n                rtt: null\n            };\n            return a && a.tests ? (b.provider = a.provider, a.tests.rtt && (b.rtt = a.tests.rtt.median,\n            b.mediaConnectivity = !0), a.tests.throughput && (b.throughput = a.tests.throughput.average,\n            b.fractionalLoss = Math.max(a.tests.throughput.fractionLostBytes, 0), b.mediaConnectivity = !0),\n            a.tests.ice && (a.tests.ice.relayTcpSuccess || a.tests.ice.relayTlsSuccess || a.tests.ice.relayUdpSuccess) && (b.mediaConnectivity = !0),\n            b) : b;\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.getPublicPrecalltestResults = d;\n    }, {} ],\n    39: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.GetStatsHandler = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../config/constants\"), h = d(g), i = a(\"../statspipeline/statsadapter\"), j = a(\"../utility/registry\"), k = a(\"../utility/rttregistry\"), l = a(\"../utility/csiologger\"), m = d(l), n = function() {\n            function a(b, c, d, f, g) {\n                e(this, a), this.pc = b, this.interval = d, this.codeBase = f, this.browserName = g,\n                this.getStatsTimer = null, this.isPromiseBased = !0, this.pcHash = c, this.genericevent = j.Registry.getGenericEventHandler();\n            }\n            return f(a, [ {\n                key: \"startStatsPolling\",\n                value: function() {\n                    var a = this;\n                    a.getStatsTimer || (m.log(\"startStatsPolling for \", a.pcHash), this.getStatsTimer = setInterval(function() {\n                        a.csioGetStats(a.statsHandler, a.pcHash);\n                    }, a.interval));\n                }\n            }, {\n                key: \"stopStatsPolling\",\n                value: function() {\n                    this.getStatsTimer && (clearInterval(this.getStatsTimer), this.getStatsTimer = null);\n                }\n            }, {\n                key: \"csioGetStats\",\n                value: function(a, b) {\n                    var c = h.codeBaseType.firefox, d = h.codeBaseType.chrome, e = h.codeBaseType.edge, f = h.browserName.safari;\n                    if (this.pc) {\n                        if (\"closed\" === this.pc.iceConnectionState) return void this.stopStatsPolling();\n                        try {\n                            this.isTemaSys() ? this.getStatsTemasys(a, b) : this.codeBase === c ? this.getStatsFirefox(a, b) : this.browserName === f ? this.getStatsSafari(a, b) : this.codeBase === d ? this.getStatsChrome(a, b) : this.codeBase === e && this.getStatsEdge(a, b);\n                        } catch (a) {\n                            m.log(\"csioGetStats: Error \", a);\n                        }\n                    }\n                }\n            }, {\n                key: \"getStatsTemasys\",\n                value: function(a, b) {\n                    this.pc.getStats(null, function(c) {\n                        a(c, b);\n                    }, function(a) {\n                        m.log(\"getStatsTemasys error\", a);\n                    });\n                }\n            }, {\n                key: \"getStatsFirefox\",\n                value: function(a, b) {\n                    var c = this, d = this.pc;\n                    if (!c.isPromiseBased) return void d.getStats(null, function(c) {\n                        a(c, b);\n                    });\n                    try {\n                        d.getStats().then(function(c) {\n                            a(c, b);\n                        }).catch(function(e) {\n                            c.isPromiseBased = !1, d.getStats(null, function(c) {\n                                a(c, b);\n                            });\n                        });\n                    } catch (e) {\n                        c.isPromiseBased = !1, c.genericevent.sendEvent(h.logEvents.getStatsError, {\n                            msg: \"Firefox getStats reports error \",\n                            error: e.message + \":\" + e.stack\n                        }), d.getStats(null, function(c) {\n                            a(c, b);\n                        });\n                    }\n                }\n            }, {\n                key: \"getStatsChrome\",\n                value: function(a, b) {\n                    var c = this, d = c.pc;\n                    if (window && window.csioReactNative) return void d.getStats(null, function(c) {\n                        a(c, b);\n                    }, function(a) {\n                        c.genericevent.sendEvent(h.logEvents.getStatsError, {\n                            msg: \"react-native getStats reports error\",\n                            error: a.message + \":\" + a.stack\n                        });\n                    });\n                    if (!c.isPromiseBased) return void d.getStats(function(c) {\n                        a(c, b);\n                    });\n                    try {\n                        d.getStats().then(function(c) {\n                            (0, k.getRTTRegistry)().update(d), a(c, b);\n                        }).catch(function(e) {\n                            m.log(\"Chrome getStats Error \", e), c.isPromiseBased = !1, c.genericevent.sendEvent(h.logEvents.getStatsError, {\n                                msg: \"Chrome getStats reports error\",\n                                error: e.message + \":\" + e.stack\n                            }), d.getStats(function(c) {\n                                a(c, b);\n                            });\n                        });\n                    } catch (e) {\n                        c.isPromiseBased = !1, c.genericevent.sendEvent(h.logEvents.getStatsError, {\n                            msg: \"Chrome getStats reports error\",\n                            error: e.message + \":\" + e.stack\n                        }), d.getStats(function(c) {\n                            a(c, b);\n                        });\n                    }\n                }\n            }, {\n                key: \"getStatsEdge\",\n                value: function(a, b) {\n                    var c = this;\n                    c.pc.getStats().then(function(c) {\n                        a(c, b);\n                    }).catch(function(d) {\n                        a({}, b), d ? c.genericevent.sendEvent(h.logEvents.getStatsError, {\n                            msg: \"Edge getStats reports error\",\n                            error: d.message + \":\" + d.stack\n                        }) : c.genericevent.sendEvent(h.logEvents.getStatsError, {\n                            msg: \"Edge getStats reports error\"\n                        });\n                    });\n                }\n            }, {\n                key: \"getStatsSafari\",\n                value: function(a, b) {\n                    var c = this;\n                    c.pc.getStats().then(function(c) {\n                        a(c, b);\n                    }).catch(function(a) {\n                        c.genericevent.sendEvent(h.logEvents.getStatsError, {\n                            msg: \"Safari getStats reports error\",\n                            error: a.message + \":\" + a.stack\n                        });\n                    });\n                }\n            }, {\n                key: \"statsHandler\",\n                value: function(a, b) {\n                    var c = j.Registry.getStatsAdapter();\n                    if (a && c) try {\n                        c.transmit(i.StatsAdapterIO.RawStatsIn, a, b);\n                    } catch (a) {\n                        m.log(\"statsHandler 123: Error \", a), j.Registry.getGenericEventHandler().sendEvent(h.logEvents.error, {\n                            msg: \"statsHandler: Error\",\n                            error: a.message + \":\" + a.stack\n                        });\n                    }\n                }\n            }, {\n                key: \"iceCandidatesHandler\",\n                value: function(a, b) {\n                    var c = j.Registry.getStatsAdapter(), d = void 0;\n                    d = c.getIceCandidates(a), b(d);\n                }\n            }, {\n                key: \"getIceCandidates\",\n                value: function() {\n                    var a = this;\n                    return new Promise(function(b, c) {\n                        a.csioGetStats(a.iceCandidatesHandler, function(a) {\n                            b(a);\n                        });\n                    });\n                }\n            }, {\n                key: \"isTemaSys\",\n                value: function() {\n                    return !!(window && window.AdapterJS && window.AdapterJS.WebRTCPlugin && window.AdapterJS.WebRTCPlugin.plugin);\n                }\n            } ]), a;\n        }();\n        c.GetStatsHandler = n;\n    }, {\n        \"../config/constants\": 33,\n        \"../statspipeline/statsadapter\": 69,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"../utility/rttregistry\": 96\n    } ],\n    40: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.PcCallbackHandler = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../config/constants\"), h = d(g), i = a(\"../utility/registry\"), j = a(\"../utility/timestamps\"), k = d(j), l = a(\"../config/callstatserrors\"), m = d(l), n = a(\"../utility/csiologger\"), o = d(n), p = function() {\n            function a(b, c, d, f, g, j) {\n                var l = this;\n                e(this, a), c && (this.conferenceId = b, this.pc = c, this.getStatsHandler = d,\n                this.userAlive = f, this.callback = j, this.remoteId = g, this.clocksync = i.Registry.getClockSync(),\n                this.emb = i.Registry.getEventMessageBuilder(), this.precalltest = i.Registry.getPreCallTest(),\n                this.genericevent = i.Registry.getGenericEventHandler(), this.iceCandidates = [],\n                this.iceConnectionState = c.iceConnectionState, this.iceGatheringState = c.iceGatheringState,\n                this.signalingState = c.signalingState, this.oldIceConnectionState = \"\", this.oldIceGatheringState = \"\",\n                this.iceConnectionStateTS = \"\", this.negotiationNeeded = 0, this.pcState = h.fabricState.initializing,\n                this.disruptedTS = 0, this.connectionDisruptedTS = 0, this.startTime = k.getCurrent(),\n                this.established = !1, this.activeIceCandidatePair = null, this.prevActiveIceCandidatePair = null,\n                this.localIceCandidates = [], this.remoteIceCandidates = [], this.iceCandidatePairs = [],\n                this.iceConnectivityDelay = 0, this.iceGatheringDelay = 0, this.fabricSetupSent = !1,\n                this.pc && this.pc.addEventListener ? (this.pc.addEventListener(\"icecandidate\", this.iceCandidateCallback.bind(this), !1),\n                this.pc.addEventListener(\"iceconnectionstatechange\", this.iceConnectionStateChangeCallback.bind(this), !1),\n                this.pc.addEventListener(\"signalingstatechange\", this.pcSignalingStateChangeCallback.bind(this), !1),\n                this.pc.addEventListener(\"negotiationneeded\", this.pcNegotiationNeededCallback.bind(this), !1)) : this.pc && this.pc.attachEvent ? (o.info(\"attachEvent\"),\n                this.pc.attachEvent(\"onicecandidate\", this.iceCandidateCallback.bind(this)), this.pc.attachEvent(\"oniceconnectionstatechange\", this.iceConnectionStateChangeCallback.bind(this)),\n                this.pc.attachEvent(\"onsignalingstatechange\", this.pcSignalingStateChangeCallback.bind(this)),\n                this.pc.attachEvent(\"onnegotiationneeded\", this.pcNegotiationNeededCallback.bind(this))) : o.error(\"callstats cannot monitor or collect stats\"),\n                !c || \"connected\" !== c.iceConnectionState && \"completed\" !== c.iceConnectionState || (this.pcState = h.fabricState.established,\n                this.getStatsHandler.getIceCandidates().then(function(a) {\n                    l.localIceCandidates = a.localIceCandidates, l.remoteIceCandidates = a.remoteIceCandidates,\n                    l.iceCandidatePairs = a.iceCandidatePairs, l.prevActiveIceCandidatePair = l.activeIceCandidatePair,\n                    l.activeIceCandidatePair = l.getActiveIceCandidatePair(), l.sendfabricSetup(), l.startStatsPolling();\n                })));\n            }\n            return f(a, [ {\n                key: \"iceCandidateCallback\",\n                value: function(a) {\n                    if (a && a.candidate) {\n                        var b = a.candidate.candidate.split(\" \");\n                        if (\"0\" !== b[4] && \"0\" !== b[5]) {\n                            var c = -1 !== b[4].indexOf(\":\"), d = \"1\" === b[1] ? \"rtp\" : \"rtcp\", e = {\n                                transport: b[2],\n                                protocol: d,\n                                typePreference: b[3],\n                                address: c ? \"[\" + b[4] + \"]:\" + b[5] : b[4] + \":\" + b[5],\n                                type: b[7],\n                                media: a.candidate.sdpMid\n                            };\n                            -1 === this.iceCandidates.indexOf(e) && (this.iceCandidates.push(e), o.warn(\"CALLBACK: ICE candidate\", e));\n                        }\n                    }\n                }\n            }, {\n                key: \"iceConnectionStateChangeCallback\",\n                value: function(a) {\n                    var b = this;\n                    if (a) {\n                        o.log(\"pc states \", this.pc.iceGatheringState, this.pc.iceConnectionState), this.iceConnectionStateTS = this.clocksync.getSynchronizedTimestamp(),\n                        this.handleIceGatheringState(), this.handleIceConnectionState(), o.log(\"states \", this.iceGatheringState, this.iceConnectionState),\n                        \"complete\" === this.iceGatheringState && \"checking\" === this.iceConnectionState && this.handleIceChecking();\n                        var c = {\n                            prevIceConnectionState: this.oldIceConnectionState,\n                            currIceConnectionState: this.iceConnectionState\n                        }, d = this.iceConnectionState;\n                        this.getStatsHandler.getIceCandidates().then(function(a) {\n                            b.localIceCandidates = a.localIceCandidates, b.remoteIceCandidates = a.remoteIceCandidates,\n                            b.iceCandidatePairs = a.iceCandidatePairs, b.prevActiveIceCandidatePair = b.activeIceCandidatePair,\n                            b.activeIceCandidatePair = b.getActiveIceCandidatePair(), \"connected\" === d || \"completed\" === d ? b.handleIceConnectedOrCompleted(c) : \"failed\" === d ? b.handleIceFailed(c) : \"disconnected\" === d ? b.handleIceDisconnected(c) : \"closed\" === d ? b.handleIceClosed(c) : \"new\" === d && b.handleIceRestart(c);\n                        });\n                    }\n                }\n            }, {\n                key: \"sendFabricStateChange\",\n                value: function(a) {\n                    this.emb.make(h.internalFabricEvent.fabricStateChange, this.conferenceId, this.pc, a);\n                }\n            }, {\n                key: \"handleIceConnectionState\",\n                value: function() {\n                    this.oldIceConnectionState = this.iceConnectionState, this.iceConnectionState = this.pc.iceConnectionState,\n                    o.warn(\"CALLBACK: ICE connection state change\", this.oldIceConnectionState, \"->\", this.iceConnectionState);\n                    var a = {\n                        changedState: h.fabricStateChangeType.iceConnectionState,\n                        prevState: this.oldIceConnectionState,\n                        newState: this.iceConnectionState\n                    };\n                    this.sendFabricStateChange(a);\n                }\n            }, {\n                key: \"handleIceGatheringState\",\n                value: function() {\n                    if (this.iceGatheringState !== this.pc.iceGatheringState) {\n                        \"complete\" === this.pc.iceGatheringState && (this.iceGatheringDelay = k.getCurrent() - this.startTime),\n                        this.oldIceGatheringState = this.iceGatheringState, this.iceGatheringState = this.pc.iceGatheringState,\n                        o.warn(\"CALLBACK: ICE gathering state change\", this.oldIceGatheringState, \"->\", this.iceGatheringState);\n                        var a = {\n                            changedState: h.fabricStateChangeType.iceGatheringState,\n                            prevState: this.oldIceGatheringState,\n                            newState: this.iceGatheringState\n                        };\n                        this.sendFabricStateChange(a);\n                    }\n                }\n            }, {\n                key: \"handleIceChecking\",\n                value: function() {\n                    var a = k.getCurrent();\n                    if (\"disconnected\" === this.oldIceConnectionState && (this.pcState === h.fabricState.checkingDisrupted || this.pcState === h.fabricState.disrupted)) {\n                        var b = {\n                            prevIceConnectionState: this.oldIceConnectionState,\n                            currIceConnectionState: this.iceConnectionState,\n                            delay: a - this.connectionDisruptedTS\n                        };\n                        this.pcState === h.fabricState.disrupted && (b.prevIceCandidatePair = this.prevActiveIceCandidatePair,\n                        b.currIceCandidatePair = this.activeIceCandidatePair, b.delay = a - this.disruptedTS,\n                        this.emb.make(h.internalFabricEvent.iceDisruptionEnd, this.conferenceId, this.pc, b)),\n                        this.pcState = h.fabricState.initializing, this.emb.make(h.internalFabricEvent.iceConnectionDisruptionEnd, this.conferenceId, this.pc, b);\n                    }\n                }\n            }, {\n                key: \"handleIceConnectedOrCompleted\",\n                value: function(a) {\n                    var b = k.getCurrent();\n                    this.pcState === h.fabricState.disrupted && (a.prevIceCandidatePair = this.prevActiveIceCandidatePair,\n                    a.currIceCandidatePair = this.activeIceCandidatePair, a.delay = b - this.disruptedTS,\n                    this.emb.make(h.internalFabricEvent.iceDisruptionEnd, this.conferenceId, this.pc, a)),\n                    this.iceConnectivityDelay = b - this.startTime, this.established = !0, this.pcState = h.fabricState.established,\n                    this.sendfabricSetup(), this.startStatsPolling();\n                }\n            }, {\n                key: \"sendfabricSetup\",\n                value: function() {\n                    if (this.fabricSetupSent) return void o.log(\"fabricSetup has been sent already\");\n                    var a = {\n                        delay: k.getCurrent() - this.startTime,\n                        iceGatheringDelay: this.iceGatheringDelay,\n                        iceConnectivityDelay: this.iceConnectivityDelay,\n                        localIceCandidates: this.localIceCandidates,\n                        remoteIceCandidates: this.remoteIceCandidates,\n                        iceCandidatePairs: this.iceCandidatePairs\n                    }, b = this.getActiveIceCandidatePair();\n                    b && (a.selectedCandidatePairID = b.id), this.fabricSetupSent = !0;\n                    var c = void 0;\n                    if (this.conferenceId) {\n                        c = i.Registry.getConferenceManager().get(this.conferenceId).getPeerConnectionManager().getPcHandler(this.pc),\n                        a.remoteEndpointType = c.getRemoteEndpointType(), a.fabricTransmissionDirection = c.getFabricTransmissionDirection();\n                    }\n                    this.pcState = h.fabricState.established, this.emb.make(h.internalFabricEvent.fabricSetup, this.conferenceId, this.pc, a);\n                }\n            }, {\n                key: \"isFabricSetupSent\",\n                value: function() {\n                    return this.fabricSetupSent;\n                }\n            }, {\n                key: \"startStatsPolling\",\n                value: function() {\n                    this.getStatsHandler.startStatsPolling();\n                }\n            }, {\n                key: \"stopStatsPolling\",\n                value: function() {\n                    this.getStatsHandler.stopStatsPolling();\n                }\n            }, {\n                key: \"handleIceFailed\",\n                value: function(a) {\n                    a.currIceCandidatePair = this.activeIceCandidatePair, a.failureDelay = k.getCurrent() - this.startTime,\n                    a.delay = k.getCurrent() - this.startTime, this.pcState = h.fabricState.failed,\n                    \"checking\" === a.prevIceConnectionState ? this.sendIceFailed(a) : \"completed\" === a.prevIceConnectionState || \"connected\" === a.prevIceConnectionState ? this.emb.make(h.internalFabricEvent.fabricDropped, this.conferenceId, this.pc, a) : \"disconnected\" === a.prevIceConnectionState && this.established ? this.emb.make(h.internalFabricEvent.fabricDropped, this.conferenceId, this.pc, a) : \"disconnected\" === a.prevIceConnectionState && this.sendIceFailed(a);\n                }\n            }, {\n                key: \"getActiveIceCandidatePair\",\n                value: function() {\n                    var a = null, b = this.iceCandidatePairs;\n                    if (b && b.length > 0) {\n                        var c = b.filter(function(a) {\n                            return \"true\" === a.selected || \"true\" === a.googActiveConnection || !0 === a.selected || !0 === a.googActiveConnection;\n                        });\n                        c.length > 0 && (a = c[0]);\n                    }\n                    return a;\n                }\n            }, {\n                key: \"sendIceFailed\",\n                value: function(a) {\n                    a.localIceCandidates = this.localIceCandidates, a.remoteIceCandidates = this.remoteIceCandidates,\n                    a.iceCandidatePairs = this.iceCandidatePairs, o.log(\"sending icefailed \", a), this.emb.make(h.internalFabricEvent.iceFailed, this.conferenceId, this.pc, a);\n                }\n            }, {\n                key: \"sendFabricTransportSwitch\",\n                value: function(a) {\n                    var b = this, c = {};\n                    c.prevIceCandidatePair = b.activeIceCandidatePair, c.relayType = a, c.currIceConnectionState = b.iceConnectionState,\n                    c.prevIceConnectionState = b.oldIceConnectionState, c.switchDelay = null, b.getStatsHandler.getIceCandidates().then(function(a) {\n                        b.localIceCandidates = a.localIceCandidates, b.remoteIceCandidates = a.remoteIceCandidates,\n                        b.iceCandidatePairs = a.iceCandidatePairs, b.activeIceCandidatePair = b.getActiveIceCandidatePair(),\n                        c.currIceCandidatePair = b.activeIceCandidatePair, c.localIceCandidates = b.localIceCandidates,\n                        c.remoteIceCandidates = b.remoteIceCandidates, o.log(\"sending fabric transport switch \", c),\n                        \"completed\" !== c.currIceConnectionState && \"connected\" !== c.currIceConnectionState || \"completed\" !== c.prevIceConnectionState && \"connected\" !== c.prevIceConnectionState || b.emb.make(h.internalFabricEvent.fabricTransportSwitch, b.conferenceId, b.pc, c);\n                    });\n                }\n            }, {\n                key: \"handleIceDisconnected\",\n                value: function(a) {\n                    var b = k.getCurrent();\n                    this.startTime = b, a.prevIceConnectionStateTs = this.iceConnectionStateTS, a.currIceCandidatePair = this.activeIceCandidatePair,\n                    \"connected\" === a.prevIceConnectionState || \"completed\" === a.prevIceConnectionState ? (this.pcState = h.fabricState.disrupted,\n                    this.disruptedTS = b, this.emb.make(h.internalFabricEvent.iceDisruptionStart, this.conferenceId, this.pc, a),\n                    this.callback && this.callback(m.csError.appConnectivityError, \"Connectivity check for PC object to \" + this.remoteId + \" failed.\")) : \"checking\" === a.prevIceConnectionState && (this.pcState = h.fabricState.checkingDisrupted,\n                    this.connectionDisruptedTS = b, this.emb.make(h.internalFabricEvent.iceConnectionDisruptionStart, this.conferenceId, this.pc, a),\n                    this.callback && this.callback(m.csError.appConnectivityError, \"Connectivity check for PC object to \" + this.remoteId + \" failed.\"));\n                }\n            }, {\n                key: \"handleIceClosed\",\n                value: function(a) {\n                    \"new\" === a.prevIceConnectionState || \"checking\" === a.prevIceConnectionState ? (a.failureDelay = k.getCurrent() - this.startTime,\n                    a.localIceCandidates = this.localIceCandidates, a.remoteIceCandidates = this.remoteIceCandidates,\n                    a.iceCandidatePairs = this.iceCandidatePairs, this.emb.make(h.internalFabricEvent.iceAborted, this.conferenceId, this.pc, a)) : \"connected\" !== a.prevIceConnectionState && \"completed\" !== a.prevIceConnectionState || (a.prevIceCandidatePair = this.activeIceCandidatePair,\n                    this.emb.make(h.internalFabricEvent.iceTerminated, this.conferenceId, this.pc, a)),\n                    this.pcState = h.fabricState.terminated, this.stopStatsPolling();\n                }\n            }, {\n                key: \"handleIceRestart\",\n                value: function(a) {\n                    a.prevIceCandidatePair = this.prevActiveIceCandidatePair, \"new\" !== a.prevIceConnectionState && (o.log(\"iceRestarted sending\"),\n                    this.established = !1, this.emb.make(h.internalFabricEvent.iceRestarted, this.conferenceId, this.pc, a));\n                }\n            }, {\n                key: \"pcSignalingStateChangeCallback\",\n                value: function(a) {\n                    var b = this;\n                    if (a) {\n                        var c = this.signalingState;\n                        this.signalingState = this.pc.signalingState, o.warn(\"CALLBACK: signaling state change\", c, \"->\", this.signalingState);\n                        var d = {\n                            changedState: h.fabricStateChangeType.signalingState,\n                            prevState: c,\n                            newState: this.signalingState\n                        };\n                        this.sendFabricStateChange(d), \"have-remote-offer\" !== this.signalingState && \"stable\" !== this.signalingState || (this.precalltest.callStarts(),\n                        this.genericevent.sendEvent(h.logEvents.log, {\n                            msg: \"precalltest told to stop \"\n                        })), \"closed\" === this.signalingState && (this.emb.make(h.fabricEvent.fabricTerminated, this.conferenceId, this.pc),\n                        this.userAlive.stop(), this.precalltest.callFinished(), this.stopStatsPolling(),\n                        this.pcState = h.fabricState.terminated), \"have-local-offer\" !== this.signalingState && \"have-local-pranswer\" !== this.signalingState && \"stable\" !== this.signalingState || (o.log(this.signalingState, \".. requesting sender config.\"),\n                        i.Registry.getConfigServiceWrapper().initiateSenderConfig(this.pc).then(function() {\n                            var a = i.Registry.getConfigServiceWrapper().getSenderConfig();\n                            o.log(\"Sender config:\", a);\n                            var c = h.callstatsChannels.senderConfiguration;\n                            a && i.Registry.getEventMessageBuilder().make(c, b.conferenceId, b.pc, a);\n                        }).catch(function(a) {\n                            o.warn(a);\n                        }));\n                    }\n                }\n            }, {\n                key: \"pcNegotiationNeededCallback\",\n                value: function(a) {\n                    a && (this.negotiationNeeded++, this.startTime = k.getCurrent(), o.warn(\"CALLBACK: negotiation needed\", this.negotiationNeeded));\n                }\n            } ]), a;\n        }();\n        c.PcCallbackHandler = p;\n    }, {\n        \"../config/callstatserrors\": 32,\n        \"../config/constants\": 33,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"../utility/timestamps\": 99\n    } ],\n    41: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.PeerConnectionHandler = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../utility/registry\"), h = a(\"../peerconnection/pccallbackhandler\"), i = a(\"../browserapi/devices\"), j = a(\"./useralivehandler\"), k = a(\"./getstatshandler\"), l = a(\"../config/constants\"), m = d(l), n = a(\"../utility/timestamps\"), o = d(n), p = a(\"../utility/csiologger\"), q = d(p), r = function() {\n            function a(b) {\n                e(this, a), this.pc = b.pc, this.remoteId = b.remoteId, this.fabricUsage = b.fabricUsage,\n                this.callback = b.callback, this.conferenceId = b.conferenceId, this.remoteEndpointType = b.remoteEndpointType,\n                this.fabricTransmissionDirection = b.fabricTransmissionDirection, this.clocksync = g.Registry.getClockSync(),\n                this.startTime = this.clocksync.getSynchronizedTimestamp(), this.credentials = g.Registry.getCredentials(),\n                this.pcHash = this.generatePcHash(), this.ssrcMap = new Map(), this.localSdp = null,\n                this.remoteSdp = null, this.transportInfo = null, this.userAliveHandler = new j.UserAliveHandler(this.conferenceId, this.pc),\n                this.userAliveHandler.start(), this.emb = g.Registry.getEventMessageBuilder(), this.devices = new i.Devices(this.conferenceId, this.pc);\n                var c = g.Registry.getEndpoint();\n                this.getStatsHandler = new k.GetStatsHandler(this.pc, this.pcHash, 5e3, c.getCodeBase(), c.getBrowserName()),\n                this.pcCallbackHandler = new h.PcCallbackHandler(this.conferenceId, this.pc, this.getStatsHandler, this.userAliveHandler, this.remoteId, this.callback),\n                this.devices.collectConnected(), this.fabricTransmissionDirection || (this.fabricTransmissionDirection = \"sendrecv\"),\n                this.remoteEndpointType || (this.remoteEndpointType = \"peer\");\n            }\n            return f(a, [ {\n                key: \"getFabricTransmissionDirection\",\n                value: function() {\n                    return this.fabricTransmissionDirection;\n                }\n            }, {\n                key: \"getRemoteEndpointType\",\n                value: function() {\n                    return this.remoteEndpointType;\n                }\n            }, {\n                key: \"stopUserAliveHandler\",\n                value: function() {\n                    this.userAliveHandler.stop();\n                }\n            }, {\n                key: \"getPcState\",\n                value: function() {\n                    return this.pcCallbackHandler.pcState;\n                }\n            }, {\n                key: \"stopStatsPolling\",\n                value: function() {\n                    this.getStatsHandler.stopStatsPolling();\n                }\n            }, {\n                key: \"startStatsPolling\",\n                value: function() {\n                    this.getStatsHandler.startStatsPolling();\n                }\n            }, {\n                key: \"setPcState\",\n                value: function(a) {\n                    a in m.fabricState ? this.pcCallbackHandler.pcState = a : q.error(\"setPcState: Invalid state\");\n                }\n            }, {\n                key: \"getAppId\",\n                value: function() {\n                    return this.credentials.getAppId();\n                }\n            }, {\n                key: \"getLocalId\",\n                value: function() {\n                    return this.credentials.getUserId();\n                }\n            }, {\n                key: \"getConferenceId\",\n                value: function() {\n                    return this.conferenceId;\n                }\n            }, {\n                key: \"getPeerConnection\",\n                value: function() {\n                    return this.pc;\n                }\n            }, {\n                key: \"getRemoteId\",\n                value: function() {\n                    return this.remoteId;\n                }\n            }, {\n                key: \"isFabricSetupSent\",\n                value: function() {\n                    return this.pcCallbackHandler.isFabricSetupSent();\n                }\n            }, {\n                key: \"getStartTime\",\n                value: function() {\n                    return this.startTime;\n                }\n            }, {\n                key: \"getCallback\",\n                value: function() {\n                    return this.callback;\n                }\n            }, {\n                key: \"getPcHash\",\n                value: function() {\n                    return this.pcHash;\n                }\n            }, {\n                key: \"getIceCandidates\",\n                value: function() {\n                    return this.pcCallbackHandler ? this.pcCallbackHandler.iceCandidates : null;\n                }\n            }, {\n                key: \"getIceConnectionState\",\n                value: function() {\n                    return this.pcCallbackHandler ? this.pcCallbackHandler.iceConnectionState : null;\n                }\n            }, {\n                key: \"getNegotiationsNumber\",\n                value: function() {\n                    return this.pcCallbackHandler ? this.pcCallbackHandler.negotiationNeeded : 0;\n                }\n            }, {\n                key: \"sendFabricTransportSwitch\",\n                value: function(a) {\n                    this.pcCallbackHandler && this.pcCallbackHandler.sendFabricTransportSwitch(a);\n                }\n            }, {\n                key: \"getSdp\",\n                value: function() {\n                    return {\n                        localSdp: this.localSdp,\n                        remoteSdp: this.remoteSdp\n                    };\n                }\n            }, {\n                key: \"setSdp\",\n                value: function(a, b) {\n                    this.localSdp = a, this.remoteSdp = b;\n                }\n            }, {\n                key: \"generatePcHash\",\n                value: function() {\n                    var a = (Math.random() + 1).toString(36);\n                    return a.substring(2, a.length);\n                }\n            }, {\n                key: \"getTransportInfo\",\n                value: function() {\n                    return this.transportInfo;\n                }\n            }, {\n                key: \"setTransportInfo\",\n                value: function(a) {\n                    this.transportInfo = a;\n                }\n            }, {\n                key: \"updateSDP\",\n                value: function(a) {\n                    var b = this, c = void 0, d = void 0;\n                    if (this.pc && this.pc.localDescription && (c = this.pc.localDescription.sdp), this.pc && this.pc.remoteDescription && (d = this.pc.remoteDescription.sdp),\n                    c && d && (c !== this.localSdp || d !== this.remoteSdp)) {\n                        this.parseSDP(c, m.streamType.outbound), this.parseSDP(d, m.streamType.inbound);\n                        var e = {\n                            localSDP: c !== this.localSdp ? c : \"\",\n                            remoteSDP: d !== this.remoteSdp ? d : \"\"\n                        };\n                        \"\" === c && \"\" === remoteSDP || !g.Registry.getCredentials().getCollectSDP() || this.emb.make(m.internalFabricEvent.sdpSubmission, this.conferenceId, this.pc, e),\n                        a && a.forEach(function(a) {\n                            var c = String(a.data.ssrc), d = b.ssrcMap.get(c);\n                            d || (d = {}), d.mediaType = a.data.mediaType, d.reportType = a.reportType, d.ssrc = c,\n                            b.ssrcMap.set(c, d);\n                        });\n                        var f = [];\n                        this.ssrcMap.forEach(function(a, b) {\n                            a.msid && a.mslabel && a.label && f.push(a);\n                        });\n                        for (var h = {\n                            ssrcData: f\n                        }, i = 0; i < h.ssrcData.length; i += 1) {\n                            h.ssrcData[i].userID = g.Registry.getCredentials().getUserId();\n                        }\n                        this.emb.make(m.internalFabricEvent.ssrcMap, this.conferenceId, this.pc, h), this.setSdp(c, d);\n                    }\n                }\n            }, {\n                key: \"parseSDP\",\n                value: function(a, b) {\n                    var c = this, d = RegExp.prototype.test.bind(/^([a-z])=(.*)/), e = /^ssrc:(\\d*) ([\\w_]*):(.*)/, f = /^ssrc-group:SIM (\\d*)/;\n                    a.split(/(\\r\\n|\\r|\\n)/).filter(d).forEach(function(a) {\n                        var d = a[0], g = a.slice(2);\n                        if (\"a\" === d && e.test(g)) {\n                            var h = g.match(e), i = h[1], j = h[2], k = h[3], l = c.ssrcMap.get(i);\n                            if (l || (l = {}), l.ssrc = i, l[j] = k, l.localStartTime = o.getCurrent(), l.syncedStartTime = c.clocksync.getSynchronizedTimestamp(),\n                            l.streamType = b, !f.test(g)) return void c.ssrcMap.set(i, l);\n                            l.ssrcGroup = {}, l.ssrcGroup[b] = {}, l.ssrcGroup[b].simulcastGroup = g.match(/\\d+/g),\n                            c.ssrcMap.set(i, l);\n                        }\n                    });\n                }\n            }, {\n                key: \"getSSRCInfo\",\n                value: function(a) {\n                    return this.ssrcMap.get(a);\n                }\n            }, {\n                key: \"setupVideoTagMethods\",\n                value: function(a, b) {\n                    var c = this, d = document.getElementById(a);\n                    d && (d.oncanplay = function() {\n                        var a = {\n                            ssrc: String(b),\n                            highResTs: o.getCurrent()\n                        };\n                        c.emb.make(m.internalFabricEvent.mediaPlaybackStart, c.conferenceId, c.pc, a);\n                    }, d.onsuspend = function() {\n                        var a = {\n                            ssrc: String(b),\n                            highResTs: o.getCurrent()\n                        };\n                        c.emb.make(m.internalFabricEvent.mediaPlaybackSuspended, c.conferenceId, c.pc, a);\n                    });\n                }\n            }, {\n                key: \"updateSSRCInfo\",\n                value: function(a, b, c, d) {\n                    var e = this.ssrcMap.get(a);\n                    e || (e = {}), e.ssrc = a, e.remoteUserID = b, e.usageLabel = c, e.associatedVideoTag = d,\n                    this.ssrcMap.set(a, e), d && b !== this.credentials.getUserId() && this.setupVideoTagMethods(d, a);\n                }\n            }, {\n                key: \"updateConferenceId\",\n                value: function(a) {\n                    this.conferenceId = a, this.userAliveHandler.updateConferenceId(a);\n                }\n            }, {\n                key: \"updateRemoteId\",\n                value: function(a) {\n                    this.remoteId = a;\n                }\n            } ], [ {\n                key: \"Builder\",\n                get: function() {\n                    return function() {\n                        function b() {\n                            e(this, b);\n                        }\n                        return f(b, [ {\n                            key: \"withPc\",\n                            value: function(a) {\n                                return this.pc = a, this;\n                            }\n                        }, {\n                            key: \"withRemoteId\",\n                            value: function(a) {\n                                return this.remoteId = a, this;\n                            }\n                        }, {\n                            key: \"withFabricUsage\",\n                            value: function(a) {\n                                return this.fabricUsage = a, this;\n                            }\n                        }, {\n                            key: \"withConferenceId\",\n                            value: function(a) {\n                                return this.conferenceId = a, this;\n                            }\n                        }, {\n                            key: \"withRemoteEndpointType\",\n                            value: function(a) {\n                                return this.remoteEndpointType = a, this;\n                            }\n                        }, {\n                            key: \"withFabricTransmissionDirection\",\n                            value: function(a) {\n                                return this.fabricTransmissionDirection = a, this;\n                            }\n                        }, {\n                            key: \"withCallback\",\n                            value: function(a) {\n                                return this.callback = a, this;\n                            }\n                        }, {\n                            key: \"make\",\n                            value: function() {\n                                return new a(this);\n                            }\n                        } ]), b;\n                    }();\n                }\n            } ]), a;\n        }();\n        c.PeerConnectionHandler = r;\n    }, {\n        \"../browserapi/devices\": 19,\n        \"../config/constants\": 33,\n        \"../peerconnection/pccallbackhandler\": 40,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"../utility/timestamps\": 99,\n        \"./getstatshandler\": 39,\n        \"./useralivehandler\": 43\n    } ],\n    42: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.PeerConnectionManager = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./peerconnectionhandler\"), g = function() {\n            function a() {\n                d(this, a), this.pcHandlers = new Map();\n            }\n            return e(a, [ {\n                key: \"removePcHandler\",\n                value: function(a) {\n                    var b = this.getPcHandler(a);\n                    if (b) {\n                        var c = b.getPcHash();\n                        this.pcHandlers.delete(c);\n                    }\n                }\n            }, {\n                key: \"addPcHandler\",\n                value: function(a, b, c, d, e, g, h) {\n                    if (!this.getPcHandler(a)) {\n                        var i = new f.PeerConnectionHandler.Builder().withPc(a).withRemoteId(b).withFabricUsage(c).withConferenceId(d).withRemoteEndpointType(e).withFabricTransmissionDirection(g).withCallback(h).make();\n                        this.pcHandlers.set(i.getPcHash(), i);\n                    }\n                }\n            }, {\n                key: \"getPcHandler\",\n                value: function(a) {\n                    var b = null;\n                    return a ? (this.pcHandlers.forEach(function(c, d) {\n                        c && c.getPeerConnection() === a && (b = c);\n                    }), b) : b;\n                }\n            }, {\n                key: \"getPcHandlerByHash\",\n                value: function(a) {\n                    return a && this.pcHandlers.has(a) ? this.pcHandlers.get(a) : null;\n                }\n            }, {\n                key: \"updateConferenceId\",\n                value: function(a) {\n                    this.pcHandlers.forEach(function(b, c) {\n                        b.updateConferenceId(a);\n                    });\n                }\n            } ]), a;\n        }();\n        c.PeerConnectionManager = g;\n    }, {\n        \"./peerconnectionhandler\": 41\n    } ],\n    43: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function e(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function f(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.UserAliveHandler = void 0;\n        var g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = a(\"../config/constants\"), i = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(h), j = a(\"../utility/timeoutprocess\"), k = a(\"../utility/registry\"), l = 1e4, m = function(a) {\n            function b(a, c) {\n                d(this, b);\n                var f = e(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, l));\n                return f.emb = k.Registry.getEventMessageBuilder(), f.pc = c, f.conferenceId = a,\n                f.setCallback(f.send), f;\n            }\n            return f(b, a), g(b, [ {\n                key: \"send\",\n                value: function() {\n                    this.conferenceId !== i.tmpConferenceId && this.pc && this.emb.make(i.internalFabricEvent.userAlive, this.conferenceId, this.pc);\n                }\n            }, {\n                key: \"updateConferenceId\",\n                value: function(a) {\n                    this.conferenceId = a;\n                }\n            } ]), b;\n        }(j.TimeoutProcess);\n        c.UserAliveHandler = m;\n    }, {\n        \"../config/constants\": 33,\n        \"../utility/registry\": 95,\n        \"../utility/timeoutprocess\": 98\n    } ],\n    44: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function f(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function g(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.Authenticator = void 0;\n        var h = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), i = function a(b, c, d) {\n            null === b && (b = Function.prototype);\n            var e = Object.getOwnPropertyDescriptor(b, c);\n            if (void 0 === e) {\n                var f = Object.getPrototypeOf(b);\n                return null === f ? void 0 : a(f, c, d);\n            }\n            if (\"value\" in e) return e.value;\n            var g = e.get;\n            if (void 0 !== g) return g.call(d);\n        }, j = a(\"./jwt/jwt\"), k = a(\"./jwt/jwttoken\"), l = a(\"../config/settings\"), m = d(l), n = a(\"../utility/base64\"), o = d(n), p = a(\"../config/callstatserrors\"), q = d(p), r = a(\"../config/constants\"), s = d(r), t = a(\"../browserapi/localstorage\"), u = d(t), v = a(\"../utility/json\"), w = d(v), x = a(\"./xmlhttp\"), y = a(\"./xmlhttpservice\"), z = a(\"../utility/registry\"), A = a(\"../utility/csiologger\"), B = d(A), C = m.authRetryTimeout, D = function(a) {\n            function b() {\n                e(this, b);\n                var a = f(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, \"Authenticator\"));\n                return a.clockSync = z.Registry.getClockSync(), a.credentials = z.Registry.getCredentials(),\n                a;\n            }\n            return g(b, a), h(b, [ {\n                key: \"initiate\",\n                value: function(a, c) {\n                    var d = this;\n                    return this.inProgress ? (c && c(q.csError.authOngoing, null), new Promise(function(a, b) {\n                        b(new Error(d.name + \": in progress\"));\n                    })) : this.credentials.getAppId() && this.credentials.getUserId() ? (this.initCallback = c,\n                    \"function\" == typeof a ? (this.setTokenGenerator(a), i(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"initiate\", this).call(this)) : new Promise(function(c, e) {\n                        d.createTokenGenerator(a).then(function(a) {\n                            d.setTokenGenerator(a), i(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"initiate\", d).call(d).then(function() {\n                                c();\n                            }, function(a) {\n                                e(a);\n                            });\n                        }, function(a) {\n                            e(new Error(d.name + \": tokenGenerator creation problem (\" + a + \")\"));\n                        });\n                    })) : new Promise(function(a, b) {\n                        b(new Error(d.name + \": credentials not set\"));\n                    });\n                }\n            }, {\n                key: \"getToken\",\n                value: function() {\n                    var a = null;\n                    return this.token && (a = this.token.getToken()), a;\n                }\n            }, {\n                key: \"isTokenValid\",\n                value: function() {\n                    return !!this.token && this.token.isValid(this.credentials);\n                }\n            }, {\n                key: \"getElapsed\",\n                value: function() {\n                    return this.isCompleted() ? this.elapsed : null;\n                }\n            }, {\n                key: \"getIceServers\",\n                value: function() {\n                    return this.iceServers;\n                }\n            }, {\n                key: \"reset\",\n                value: function() {\n                    this.token = null, this.reauthTimer = null, this.renew = !1, this.credentials = null,\n                    this.jwt = new j.Jwt(), this.tokenGenerator = function(a, b) {\n                        b(\"Token generator is not set\");\n                    }, this.elapsed = 0, this.iceServers = null, i(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"reset\", this).call(this);\n                }\n            }, {\n                key: \"setupToken\",\n                value: function(a) {\n                    u.store(\"csio_auth_data\", JSON.stringify(a)), this.token = new k.JwtToken(a, this.clockSync);\n                }\n            }, {\n                key: \"clearReauthTimer\",\n                value: function() {\n                    null !== this.reauthTimer && (clearTimeout(this.reauthTimer), this.reauthTimer = null);\n                }\n            }, {\n                key: \"setupReauthTimer\",\n                value: function(a) {\n                    var b = this;\n                    b.clearReauthTimer(), b.reauthTimer = setTimeout(function() {\n                        b.reAuthenticate();\n                    }, a);\n                }\n            }, {\n                key: \"reAuthenticate\",\n                value: function() {\n                    this.inProgress || (this.inProgress = !0, this.token = null, this.sendRequest());\n                }\n            }, {\n                key: \"handleErrorActions\",\n                value: function(a) {\n                    if (0 !== a.length) {\n                        var b = a.shift();\n                        if (b.action === q.authErrorActions.RETRY) {\n                            var c = b.params.timeout ? b.params.timeout : m.authRetryTimeout;\n                            this.setupReauthTimer(c), this.handleErrorActions(a);\n                        }\n                        b.action === q.authErrorActions.GET_NEW_TOKEN && (this.renew = !0, this.handleErrorActions(a)),\n                        b.action === q.authErrorActions.REPORT_ERROR && (B.error(this.name + \": \" + b.params.errorReason),\n                        this.handleErrorActions(a));\n                    }\n                }\n            }, {\n                key: \"setTokenGenerator\",\n                value: function(a) {\n                    this.tokenGenerator = a;\n                }\n            }, {\n                key: \"handleResponse\",\n                value: function(a) {\n                    var b = a.getXhr(), c = a.getElapsed(), d = w.parse(b.response);\n                    if (!d) return B.error(this.name + \": invalid authentication response\"), void this.sendNextRequest();\n                    if (d[\"urn:x-callstats:auth:errorActions\"] && d[\"urn:x-callstats:auth:errorActions\"].length > 0) return void this.handleErrorActions(d[\"urn:x-callstats:auth:errorActions\"]);\n                    if (200 === b.status) {\n                        if (\"bearer\" !== d.token_type) return B.error(this.name + \": successful, but token type was not bearer. Scheduling retry.\"),\n                        void this.sendNextRequest();\n                        this.setupToken(d.access_token), d.iceServers && (this.iceServers = d.iceServers);\n                        var e = parseInt(1e3 * parseInt(d.expires_in) * .9);\n                        return this.setupReauthTimer(e), this.renew = !1, this.initCallback && this.initCallback(q.csError.success, s.csCallBackMessages.authSuccessful),\n                        this.elapsed = c, void this.completeProcess();\n                    }\n                    B.error(\"Authentication failed, but no error actions were defined in response.\"),\n                    this.sendNextRequest();\n                }\n            }, {\n                key: \"request\",\n                value: function() {\n                    var a = this;\n                    this.clearReauthTimer();\n                    var b = new Promise(function(b, c) {\n                        a.tempResolve = b, a.tempReject = c;\n                    });\n                    return this.tokenGenerator(this.renew, function(b, c) {\n                        if (null !== b) return a.initCallback && a.initCallback(q.csError.tokenGenerationError, b.toString()),\n                        a.rejectCb(new Error(a.name + \": tokenGenerationError\")), B.error(\"tokenGenerationError \", b),\n                        null;\n                        var d = m.authServiceUrl + \"authenticate\", e = {\n                            client_id: a.credentials.userId + \"@\" + a.credentials.getAppId(),\n                            code: c,\n                            grant_type: \"authorization_code\"\n                        }, f = {\n                            \"Content-Type\": \"application/x-www-form-urlencoded\"\n                        };\n                        (0, x.sendPostRequest)(d, f, C, e).then(function(b) {\n                            a.tempResolve(b);\n                        }, function(b) {\n                            a.tempReject(b);\n                        });\n                    }), b;\n                }\n            }, {\n                key: \"tokenGeneratorCreator\",\n                value: function(a, b) {\n                    var c = this;\n                    return function(d, e) {\n                        var f = null, g = {\n                            alg: \"HS256\"\n                        };\n                        if (!d && null !== f) return e(null, f);\n                        var h = c.credentials, i = {\n                            userID: h.getUserId(),\n                            appID: h.getAppId()\n                        };\n                        b && (i.keyId = b), c.jwt.sign(g, i, a).then(function(a) {\n                            f = a, e(null, a);\n                        }).catch(function(a) {\n                            e(a);\n                        });\n                    };\n                }\n            }, {\n                key: \"createTokenGenerator\",\n                value: function(a) {\n                    var b = this;\n                    return new Promise(function(c, d) {\n                        var e = null;\n                        a.indexOf(\":\") > -1 && (e = o.strtohex(a.split(\":\")[0]), a = a.split(\":\")[1]), b.jwt.importKey(a).then(function(d) {\n                            a = null;\n                            var f = b.tokenGeneratorCreator(d, e);\n                            c(f);\n                        }).catch(function(a) {\n                            B.error(b.name + \": could not import key (\" + a + \")\"), d(a);\n                        });\n                    });\n                }\n            } ]), b;\n        }(y.XMLHttpService);\n        c.Authenticator = D;\n    }, {\n        \"../browserapi/localstorage\": 20,\n        \"../config/callstatserrors\": 32,\n        \"../config/constants\": 33,\n        \"../config/settings\": 34,\n        \"../utility/base64\": 85,\n        \"../utility/csiologger\": 88,\n        \"../utility/json\": 93,\n        \"../utility/registry\": 95,\n        \"./jwt/jwt\": 52,\n        \"./jwt/jwttoken\": 53,\n        \"./xmlhttp\": 58,\n        \"./xmlhttpservice\": 59\n    } ],\n    45: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.GenericEventHandler = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../config/settings\"), h = d(g), i = a(\"./xmlhttp\"), j = a(\"../utility/registry\"), k = a(\"../utility/csiologger\"), l = d(k), m = function() {\n            function a() {\n                e(this, a), this.credentials = j.Registry.getCredentials(), this.enabled = !1;\n            }\n            return f(a, [ {\n                key: \"enable\",\n                value: function() {\n                    this.enabled = !0;\n                }\n            }, {\n                key: \"disable\",\n                value: function() {\n                    this.enabled = !1;\n                }\n            }, {\n                key: \"sendEvent\",\n                value: function(a, b) {\n                    this.send(a, b).then(function(a) {\n                        l.log(\"Got generic response: %o\", a);\n                    }).catch(function(a) {\n                        l.log(\"Got error for generic request\", a);\n                    });\n                }\n            }, {\n                key: \"send\",\n                value: function(a, b) {\n                    if (!this.enabled) return new Promise(function(a, b) {\n                        b(new Error(\"GenericEvent Error: not enabled\"));\n                    });\n                    var c = this;\n                    return new Promise(function(d, e) {\n                        var f = {\n                            \"Content-Type\": \"application/json\"\n                        }, g = {\n                            appID: c.credentials.appId,\n                            userID: encodeURIComponent(c.credentials.userId),\n                            version: h.version,\n                            eventType: a,\n                            data: b\n                        }, j = h.baseUrl + \"generics\";\n                        (0, i.sendPostRequest)(j, f, 5e3, g).then(function(a) {\n                            d(a.getXhr().response);\n                        }, function(a) {\n                            e(a);\n                        });\n                    });\n                }\n            } ]), a;\n        }();\n        c.GenericEventHandler = m;\n    }, {\n        \"../config/settings\": 34,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"./xmlhttp\": 58\n    } ],\n    46: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function f(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function g(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.ClockSync = void 0;\n        var h = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), i = function a(b, c, d) {\n            null === b && (b = Function.prototype);\n            var e = Object.getOwnPropertyDescriptor(b, c);\n            if (void 0 === e) {\n                var f = Object.getPrototypeOf(b);\n                return null === f ? void 0 : a(f, c, d);\n            }\n            if (\"value\" in e) return e.value;\n            var g = e.get;\n            if (void 0 !== g) return g.call(d);\n        }, j = a(\"../config/settings\"), k = d(j), l = a(\"./xmlhttp\"), m = a(\"../utility/timestamps\"), n = d(m), o = a(\"./xmlhttpservice\"), p = a(\"../utility/registry\"), q = a(\"../config/constants\"), r = d(q), s = function(a) {\n            function b() {\n                e(this, b);\n                var a = f(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, \"ClockSync\"));\n                return a.currentOffset = 0, a.completed = !1, a;\n            }\n            return g(b, a), h(b, [ {\n                key: \"initiate\",\n                value: function() {\n                    return this.startTime = n.getCurrent(), i(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"initiate\", this).call(this);\n                }\n            }, {\n                key: \"getSynchronizedTimestamp\",\n                value: function() {\n                    return n.getCurrent() + this.currentOffset;\n                }\n            }, {\n                key: \"getElapsed\",\n                value: function() {\n                    return this.isCompleted() ? this.endTime - this.startTime : null;\n                }\n            }, {\n                key: \"getOffset\",\n                value: function() {\n                    return this.currentOffset;\n                }\n            }, {\n                key: \"reset\",\n                value: function() {\n                    this.currentOffset = 0, this.offsetResults = [], this.startTime = 0, this.endTime = 0,\n                    i(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"reset\", this).call(this);\n                }\n            }, {\n                key: \"request\",\n                value: function() {\n                    var a = k.baseUrl + \"clockSync\";\n                    return (0, l.sendGetRequest)(a, null, 5e3);\n                }\n            }, {\n                key: \"handleResponse\",\n                value: function(a) {\n                    var b = a.getXhr(), c = a.getElapsed(), d = JSON.parse(b.response), e = n.getCurrent();\n                    this.handleMessage(d, c, e);\n                }\n            }, {\n                key: \"handleMessage\",\n                value: function(a, b, c) {\n                    var d = b / 2;\n                    d > 6e4 ? this.offsetResults = [] : this.addOffset(a, d, c), this.offsetResults.length >= 5 ? (this.calculateOffset(),\n                    this.endTime = n.getCurrent(), this.completeProcess()) : this.sendRequest();\n                }\n            }, {\n                key: \"isCompleted\",\n                value: function() {\n                    return this.completed;\n                }\n            }, {\n                key: \"addOffset\",\n                value: function(a, b, c) {\n                    var d = a.now + b, e = d - c;\n                    this.offsetResults.push(e);\n                }\n            }, {\n                key: \"calculateOffset\",\n                value: function() {\n                    var a = this.offsetResults.reduce(function(a, b) {\n                        return a + b;\n                    });\n                    this.currentOffset = a / this.offsetResults.length, this.currentOffset = isNaN(this.currentOffset) ? 0 : this.currentOffset,\n                    p.Registry.getGenericEventHandler().sendEvent(r.logEvents.log, {\n                        msg: \"clockSync Done, offset is: \" + this.currentOffset + \"results length\" + this.offsetResults.length\n                    }), this.offsetResults = [], this.completed = !0;\n                }\n            } ]), b;\n        }(o.XMLHttpService);\n        c.ClockSync = s;\n    }, {\n        \"../config/constants\": 33,\n        \"../config/settings\": 34,\n        \"../utility/registry\": 95,\n        \"../utility/timestamps\": 99,\n        \"./xmlhttp\": 58,\n        \"./xmlhttpservice\": 59\n    } ],\n    47: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a() {\n                d(this, a), this.connected = !1, this.reconnected = !1, this.conferenceUrl = {};\n            }\n            return e(a, [ {\n                key: \"setup\",\n                value: function() {\n                    return new Promise(function(a, b) {\n                        a();\n                    });\n                }\n            }, {\n                key: \"isReady\",\n                value: function() {\n                    return this.connected;\n                }\n            }, {\n                key: \"send\",\n                value: function(a) {}\n            } ]), a;\n        }();\n        c.CollectorConnection = f;\n    }, {} ],\n    48: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function e(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function f(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.ConfigServiceGet = void 0;\n        var g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = function a(b, c, d) {\n            null === b && (b = Function.prototype);\n            var e = Object.getOwnPropertyDescriptor(b, c);\n            if (void 0 === e) {\n                var f = Object.getPrototypeOf(b);\n                return null === f ? void 0 : a(f, c, d);\n            }\n            if (\"value\" in e) return e.value;\n            var g = e.get;\n            if (void 0 !== g) return g.call(d);\n        }, i = a(\"../xmlhttp\"), j = a(\"../xmlhttpservice\"), k = a(\"../../utility/registry\"), l = function(a) {\n            function b() {\n                return d(this, b), e(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, \"ConfigService\"));\n            }\n            return f(b, a), g(b, [ {\n                key: \"initiate\",\n                value: function(a) {\n                    var c = this;\n                    return this.url = a, this.authToken = k.Registry.getAuthenticator().getToken(),\n                    this.authToken ? h(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"initiate\", this).call(this) : new Promise(function(a, b) {\n                        b(new Error(c.name + \": authToken has to be string\"));\n                    });\n                }\n            }, {\n                key: \"getConfig\",\n                value: function() {\n                    return this.config;\n                }\n            }, {\n                key: \"getElapsed\",\n                value: function() {\n                    return this.isCompleted() ? this.elapsed : null;\n                }\n            }, {\n                key: \"reset\",\n                value: function() {\n                    this.authToken = null, this.url = null, this.config = null, this.elapsed = 0, h(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"reset\", this).call(this);\n                }\n            }, {\n                key: \"request\",\n                value: function() {\n                    var a = {\n                        Authorization: \"Bearer \" + this.authToken\n                    };\n                    return (0, i.sendGetRequest)(this.url, a, 2e3);\n                }\n            }, {\n                key: \"handleResponse\",\n                value: function(a) {\n                    var b = a.getXhr(), c = a.getElapsed();\n                    this.config = JSON.parse(b.response), this.elapsed = c, this.completeProcess();\n                }\n            } ]), b;\n        }(j.XMLHttpService);\n        c.ConfigServiceGet = l;\n    }, {\n        \"../../utility/registry\": 95,\n        \"../xmlhttp\": 58,\n        \"../xmlhttpservice\": 59\n    } ],\n    49: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function e(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function f(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.ConfigServicePost = void 0;\n        var g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = function a(b, c, d) {\n            null === b && (b = Function.prototype);\n            var e = Object.getOwnPropertyDescriptor(b, c);\n            if (void 0 === e) {\n                var f = Object.getPrototypeOf(b);\n                return null === f ? void 0 : a(f, c, d);\n            }\n            if (\"value\" in e) return e.value;\n            var g = e.get;\n            if (void 0 !== g) return g.call(d);\n        }, i = a(\"../xmlhttp\"), j = a(\"./configserviceget\"), k = function(a) {\n            function b() {\n                return d(this, b), e(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this));\n            }\n            return f(b, a), g(b, [ {\n                key: \"initiate\",\n                value: function(a, c) {\n                    return this.body = c, h(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"initiate\", this).call(this, a);\n                }\n            }, {\n                key: \"request\",\n                value: function() {\n                    var a = {\n                        Authorization: \"Bearer \" + this.authToken\n                    };\n                    return a[\"Content-Type\"] = \"application/json\", (0, i.sendPostRequest)(this.url, a, 2e3, this.body);\n                }\n            } ]), b;\n        }(j.ConfigServiceGet);\n        c.ConfigServicePost = k;\n    }, {\n        \"../xmlhttp\": 58,\n        \"./configserviceget\": 48\n    } ],\n    50: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.ConfigServiceWrapper = void 0;\n        var f = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(a) {\n            return typeof a;\n        } : function(a) {\n            return a && \"function\" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? \"symbol\" : typeof a;\n        }, g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = a(\"./configserviceget\"), i = a(\"./configservicepost\"), j = a(\"../../config/settings\"), k = d(j), l = a(\"../../utility/registry\"), m = a(\"../../utility/csiologger\"), n = d(m), o = function() {\n            function a() {\n                e(this, a), this.internalConfigService = new h.ConfigServiceGet(), this.appConfigService = new h.ConfigServiceGet(),\n                this.senderConfigService = new i.ConfigServicePost(), this.defaultSenderConfig = null;\n            }\n            return g(a, [ {\n                key: \"initiateInternalConfig\",\n                value: function() {\n                    var a = this, b = l.Registry.getCredentials().getAppId();\n                    if (!b) return new Promise(function(b, c) {\n                        n.log(\"appId has to be string\"), c(new Error(a.internalConfigService.name + \": appId has to be string\"));\n                    });\n                    var c = k.configServiceUrl + b;\n                    return this.internalConfigService.initiate(c + \"/configurations/internal\");\n                }\n            }, {\n                key: \"initiateAppConfig\",\n                value: function() {\n                    var a = this, b = l.Registry.getCredentials().getAppId();\n                    if (!b) return new Promise(function(b, c) {\n                        n.log(\"appId has to be string\"), c(new Error(a.appConfigService.name + \": appId has to be string\"));\n                    });\n                    var c = k.configServiceUrl + b;\n                    return this.appConfigService.initiate(c + \"/configurations\");\n                }\n            }, {\n                key: \"initiateSenderConfig\",\n                value: function(a) {\n                    var b = this;\n                    if (this.senderConfigService.getConfig()) return new Promise(function(a, c) {\n                        n.log(\"sender config already present\"), c(new Error(b.senderConfigService.name + \": sender config already present\"));\n                    });\n                    var c = l.Registry.getCredentials().getAppId(), d = l.Registry.getCredentials().getUserId();\n                    if (!c || !d) return new Promise(function(a, c) {\n                        n.log(\"appId and userId have to be string\"), c(new Error(b.senderConfigService.name + \": appId and userId have to be string\"));\n                    });\n                    if (this.defaultSenderConfig = this.getCurrentVideoSenderConfig(a), !this.defaultSenderConfig) return new Promise(function(a, c) {\n                        n.log(\"Could not obtain a sender config\"), c(new Error(b.senderConfigService.name + \": Could not obtain a sender config\"));\n                    });\n                    var e = k.configServiceUrl + c, f = {\n                        app_id: c,\n                        local_id: d,\n                        rtc_rtp_parameters: this.defaultSenderConfig\n                    };\n                    return this.senderConfigService.initiate(e + \"/configurations\", f);\n                }\n            }, {\n                key: \"getInternalConfig\",\n                value: function() {\n                    return this.internalConfigService.getConfig();\n                }\n            }, {\n                key: \"getAppDefaultConfig\",\n                value: function() {\n                    var a = this.appConfigService.getConfig(), b = {\n                        peerConnection: null,\n                        media: null\n                    };\n                    return a.default ? (a.default.peerConnection && (b.peerConnection = a.default.peerConnection),\n                    a.default.media && (b.media = a.default.media), b) : b;\n                }\n            }, {\n                key: \"getAppRecommendedConfig\",\n                value: function() {\n                    var a = this.appConfigService.getConfig(), b = {};\n                    return a.recommended ? (a.recommended.peerConnection && (b.peerConnection = a.recommended.peerConnection),\n                    a.recommended.media && (b.media = a.recommended.media), b) : b;\n                }\n            }, {\n                key: \"getSenderConfig\",\n                value: function() {\n                    var a = this.senderConfigService.getConfig();\n                    return a && a.recommended && a.recommended.sender ? a.recommended.sender : null;\n                }\n            }, {\n                key: \"getDefaultSenderConfig\",\n                value: function() {\n                    return this.defaultSenderConfig ? this.defaultSenderConfig : null;\n                }\n            }, {\n                key: \"getInternalElapsed\",\n                value: function() {\n                    return this.internalConfigService.getElapsed();\n                }\n            }, {\n                key: \"getAppElapsed\",\n                value: function() {\n                    return this.appConfigService.getElapsed();\n                }\n            }, {\n                key: \"getSenderElapsed\",\n                value: function() {\n                    return this.senderConfigService.getElapsed();\n                }\n            }, {\n                key: \"getCurrentVideoSenderConfig\",\n                value: function(a) {\n                    var b = {\n                        encodings: [ {\n                            maxBitrate: 0\n                        } ]\n                    }, c = l.Registry.getConferenceManager().getConferenceForPc(a);\n                    if (!c) return n.warn(\"No conference found for PC, skipping\"), null;\n                    if (c.getPeerConnectionManager().pcHandlers.size > 1) return n.warn(\"Multiple PCs found, skipping\"),\n                    null;\n                    if (!a.getSenders || \"function\" != typeof a.getSenders) return n.warn(\"Get senders error\"),\n                    b;\n                    for (var d = a.getSenders(), e = void 0, g = 0; g < d.length; g += 1) {\n                        var h = d[g];\n                        if (\"object\" !== (void 0 === h ? \"undefined\" : f(h)) || !h.track || \"object\" !== f(h.track) || !h.track.kind) return n.warn(\"Access senders error\"),\n                        null;\n                        if (\"video\" === h.track.kind) {\n                            if (e) return n.warn(\"Multiple video sender, skipping\"), null;\n                            e = h;\n                        }\n                    }\n                    if (!e) return n.warn(\"No video sender found\"), null;\n                    if (!e.getParameters || \"function\" != typeof e.getParameters) return n.warn(\"Sender getParameters error\"),\n                    b;\n                    var i = e.getParameters();\n                    return \"object\" !== (void 0 === i ? \"undefined\" : f(i)) ? null : (\"encodings\" in i || (i.encodings = []),\n                    0 === i.encodings.length && i.encodings.push({\n                        maxBitrate: 0\n                    }), i);\n                }\n            } ]), a;\n        }();\n        c.ConfigServiceWrapper = o;\n    }, {\n        \"../../config/settings\": 34,\n        \"../../utility/csiologger\": 88,\n        \"../../utility/registry\": 95,\n        \"./configserviceget\": 48,\n        \"./configservicepost\": 49\n    } ],\n    51: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.ConnectionManager = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"../config/constants\"), g = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(f), h = a(\"./wscollectorconnection\"), i = a(\"./restcollectorconnection\"), j = a(\"../utility/registry\"), k = function() {\n            function a() {\n                d(this, a), this.connection = null;\n            }\n            return e(a, [ {\n                key: \"setupCollectorConnection\",\n                value: function(a) {\n                    a === g.transportType.rest ? this.connection = new i.RestCollectorConnection() : this.connection = new h.WsCollectorConnection();\n                }\n            }, {\n                key: \"setup\",\n                value: function() {\n                    return this.connection ? this.connection.setup() : new Promise(function(a, b) {\n                        b();\n                    });\n                }\n            }, {\n                key: \"isReady\",\n                value: function() {\n                    return !!this.connection && this.connection.isReady();\n                }\n            }, {\n                key: \"send\",\n                value: function(a) {\n                    if (!this.connection) return void j.Registry.getGenericEventHandler().sendEvent(g.logEvents.error, {\n                        msg: \"Connection not available to the collector\"\n                    });\n                    this.connection.send(a);\n                }\n            } ]), a;\n        }();\n        c.ConnectionManager = k;\n    }, {\n        \"../config/constants\": 33,\n        \"../utility/registry\": 95,\n        \"./restcollectorconnection\": 54,\n        \"./wscollectorconnection\": 57\n    } ],\n    52: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.Jwt = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../../utility/base64\"), h = d(g), i = a(\"../../utility/csiologger\"), j = d(i), k = a(\"../../utility/registry\"), l = a(\"../../config/constants\"), m = d(l), n = function() {\n            function a() {\n                e(this, a), this.cryptotype = null, window.crypto && window.crypto.subtle ? (this.cryptotype = \"standard\",\n                this.subtlecrypto = window.crypto.subtle) : window.crypto && !window.crypto.subtle && window.crypto.webkitSubtle ? (this.cryptotype = \"webkit\",\n                this.subtlecrypto = window.crypto.webkitSubtle) : window.msCrypto && window.msCrypto.subtle ? (this.cryptotype = \"ie\",\n                this.subtlecrypto = window.msCrypto.subtle) : (this.subtlecrypto = null, j.info(\"WebCryptography API not supported in this browser.\")),\n                this.browserName = k.Registry.getEndpoint().getBrowserName();\n            }\n            return f(a, [ {\n                key: \"sign\",\n                value: function(a, b, c) {\n                    var d = this;\n                    return new Promise(function(e, f) {\n                        \"HS256\" !== a.alg && f(\"Use header.alg=HS256\"), a = JSON.stringify(a), \"string\" != typeof b && (b = JSON.stringify(b));\n                        var g = h.urlencodeUnicode(a) + \".\" + h.urlencodeUnicode(b);\n                        window.csioReactNative && window.csiosign(g, c, function(a, b) {\n                            if (a) return j.log(\"Token sign error\", a), void f(error);\n                            e(b);\n                        });\n                        var i = new ArrayBuffer(g.length), k = new Uint8Array(i), l = {\n                            name: \"HMAC\"\n                        };\n                        \"ie\" !== d.cryptotype && \"webkit\" !== d.cryptotype && d.browserName !== m.browserName.edge || (l.hash = {\n                            name: \"sha-256\"\n                        });\n                        for (var n = g.length - 1; n >= 0; n--) k[n] = g.charCodeAt(n);\n                        var o = d.subtlecrypto.sign(l, c, k);\n                        \"ie\" === d.cryptotype ? (o.onerror = f, o.oncomplete = function(a) {\n                            g = d.buildToken(a.target.result, g), e(g);\n                        }) : o.then(function(a) {\n                            g = d.buildToken(a, g), e(g);\n                        }).catch(function(a) {\n                            f(a);\n                        });\n                    });\n                }\n            }, {\n                key: \"buildToken\",\n                value: function(a, b) {\n                    for (var c = \"\", d = new Uint8Array(a), e = d.byteLength, f = 0; f < e; f++) c += String.fromCharCode(d[f]);\n                    return b += \".\" + h.urlencode(c);\n                }\n            }, {\n                key: \"decode\",\n                value: function(a) {\n                    try {\n                        var b = a.split(\".\")[1], c = h.decode(b);\n                        return JSON.parse(c);\n                    } catch (a) {\n                        return j.error(\"Could not decode token. \"), null;\n                    }\n                }\n            }, {\n                key: \"importKey\",\n                value: function(a) {\n                    var b = this;\n                    return new Promise(function(c, d) {\n                        if (window.csioReactNative) return void c(a);\n                        if (\"webkit\" === b.cryptotype) for (;a.length < 32; ) a += \"\\0\";\n                        var e = {\n                            kty: \"oct\",\n                            k: h.urlencode(a),\n                            alg: \"HS256\"\n                        }, f = {\n                            name: \"HMAC\",\n                            hash: {\n                                name: \"SHA-256\"\n                            }\n                        };\n                        if (\"ie\" === b.cryptotype ? e.extractable = !1 : e.ext = !1, \"webkit\" === b.cryptotype && (f = null,\n                        e.use = \"sig\"), \"ie\" === b.cryptotype || \"webkit\" === b.cryptotype) {\n                            var g = JSON.stringify(e);\n                            e = new Uint8Array(g.length);\n                            for (var i = 0; i < g.length; i++) e[i] = g.charCodeAt(i);\n                        }\n                        var j = b.subtlecrypto.importKey(\"jwk\", e, f, !1, [ \"sign\" ]);\n                        \"ie\" === b.cryptotype ? (j.onerror = d, j.oncomplete = function(a) {\n                            c(a.target.result);\n                        }) : j.then(c).catch(d);\n                    });\n                }\n            } ]), a;\n        }();\n        c.Jwt = n;\n    }, {\n        \"../../config/constants\": 33,\n        \"../../utility/base64\": 85,\n        \"../../utility/csiologger\": 88,\n        \"../../utility/registry\": 95\n    } ],\n    53: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.JwtToken = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"./jwt\"), h = a(\"../../utility/registry\"), i = a(\"../../config/constants\"), j = d(i), k = a(\"../../utility/csiologger\"), l = d(k), m = function() {\n            function a(b) {\n                e(this, a), this.token = b, this.statsSubmissionInterval = 15e3, this.collectSDP = !1,\n                this.appId = null, this.userId = null, this.tokenPayload = null, this.jwt = new g.Jwt(),\n                this.expires = null, this.clockSync = h.Registry.getClockSync(), this.adaptiveInterval = !1,\n                this.transportType = j.transportType.rest, this.setupTokenPayload(), this.restApiTransport = !1;\n            }\n            return f(a, [ {\n                key: \"getToken\",\n                value: function() {\n                    return this.token;\n                }\n            }, {\n                key: \"setupTokenPayload\",\n                value: function() {\n                    var a = this.jwt.decode(this.token);\n                    if (this.statsSubmissionInterval = parseInt(a.submissionInterval, 10), this.collectSDP = a.collectSDP,\n                    this.adaptiveInterval = a.adaptiveInterval, this.appId = a.appID, this.userId = a.userID,\n                    this.restApiTransport = a.restApiTransport, navigator.mozGetUserMedia) {\n                        var b = a.expiry.split(\" \").join(\"T\");\n                        this.expires = Date.parse(b);\n                    } else this.expires = new Date(a.expiry);\n                    this.restApiTransport ? this.transportType = j.transportType.rest : this.transportType = j.transportType.ws,\n                    l.info(\"transportType is \", this.transportType, this.restApiTransport), h.Registry.getCredentials().setStatsSubmissionInterval(this.statsSubmissionInterval),\n                    h.Registry.getCredentials().setCollectSDP(this.collectSDP), h.Registry.getCredentials().setTransportType(this.transportType),\n                    h.Registry.getCredentials().setAdaptiveInterval(this.adaptiveInterval);\n                }\n            }, {\n                key: \"isValid\",\n                value: function(a) {\n                    var b = this, c = !1;\n                    if (null !== b.token && b.appId === a.appId && b.userId === encodeURIComponent(a.userId)) {\n                        new Date(this.clockSync.getSynchronizedTimestamp()) < b.expires && (c = !0);\n                    }\n                    return c;\n                }\n            } ]), a;\n        }();\n        c.JwtToken = m;\n    }, {\n        \"../../config/constants\": 33,\n        \"../../utility/csiologger\": 88,\n        \"../../utility/registry\": 95,\n        \"./jwt\": 52\n    } ],\n    54: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function f(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function g(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.RestCollectorConnection = void 0;\n        var h = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), i = a(\"../utility/registry\"), j = a(\"./xmlhttp\"), k = a(\"./collectorconnection\"), l = a(\"./restrelays\"), m = a(\"../config/constants\"), n = d(m), o = a(\"../utility/csiologger\"), p = d(o), q = function(a) {\n            function b() {\n                e(this, b);\n                var a = f(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this));\n                return a.relays = new l.RestRelays(), a;\n            }\n            return g(b, a), h(b, [ {\n                key: \"isReady\",\n                value: function() {\n                    return !0;\n                }\n            }, {\n                key: \"send\",\n                value: function(a) {\n                    var b = {\n                        \"Content-Type\": \"application/json\",\n                        Authorization: \"Bearer \" + i.Registry.getAuthenticator().getToken()\n                    }, c = a.eventType, d = a.confID, e = a.ucID, f = this.relays, g = f.getRequestUrl(c, d, e);\n                    if (!g) return void p.warn(\"No action for message type: \" + c);\n                    var h = this.getMessage(c, a);\n                    p.log(\"sending \", g, a), (0, j.sendPostRequest)(g, b, 5e3, h).then(function(b) {\n                        if (!b || !b.xhr) return void p.log(\"Response for request is null\");\n                        var e = JSON.parse(b.xhr.response);\n                        e && \"success\" !== e.status && (i.Registry.getGenericEventHandler().sendEvent(n.logEvents.restResponseError, {\n                            msg: \"response failure \" + d + \":\" + c + \":\" + e.msg + \":\" + e.status + JSON.stringify(a)\n                        }), p.error(\"Response error:\", e.msg, a)), f.handleResponse(c, e, d);\n                    }, function(a) {\n                        p.error(a);\n                    });\n                }\n            }, {\n                key: \"getMessage\",\n                value: function(a, b) {\n                    delete b.confID, delete b.channel, delete b.token, delete b.appID, delete b.action,\n                    delete b.ucID, delete b.version, delete b.timeShift;\n                    var c = decodeURIComponent(b.localID);\n                    b.localID = c;\n                    var d = decodeURIComponent(b.remoteID);\n                    return b.remoteID = d, a === n.callstatsChannels.processedStats && (b.eventType = \"stats\"),\n                    b;\n                }\n            } ]), b;\n        }(k.CollectorConnection);\n        c.RestCollectorConnection = q;\n    }, {\n        \"../config/constants\": 33,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"./collectorconnection\": 47,\n        \"./restrelays\": 55,\n        \"./xmlhttp\": 58\n    } ],\n    55: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function f() {\n            var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;\n            return function(c, d, e) {\n                \"success\" === c.status ? a && a(c, d) : b && b(c);\n            };\n        }\n        function g(a) {\n            var b = f();\n            return new Map([ [ j.fabricEvent.fabricTerminated, new r(l.restEventUrl, \"/events/fabric/terminated\", b) ], [ j.fabricEvent.audioMute, new r(l.restEventUrl, \"/events/media/actions\", b) ], [ j.fabricEvent.audioUnmute, new r(l.restEventUrl, \"/events/media/actions\", b) ], [ j.fabricEvent.videoPause, new r(l.restEventUrl, \"/events/media/actions\", b) ], [ j.fabricEvent.videoResume, new r(l.restEventUrl, \"/events/media/actions\", b) ], [ j.fabricEvent.screenShareStart, new r(l.restEventUrl, \"/events/media/actions\", b) ], [ j.fabricEvent.screenShareStop, new r(l.restEventUrl, \"/events/media/actions\", b) ], [ j.fabricEvent.activeDeviceList, new r(l.restEventUrl, \"/events/devices/list\", b) ], [ j.fabricEvent.applicationErrorLog, new r(l.restEventUrl, \"/events/app/logs\", b) ], [ j.fabricEvent.dominantSpeaker, new r(l.restEventUrl, \"/events/dominantspeaker\", b) ], [ j.fabricEvent.fabricHold, new r(l.restEventUrl, \"/events/fabric/actions\", b) ], [ j.fabricEvent.fabricResume, new r(l.restEventUrl, \"/events/fabric/actions\", b) ], [ j.internalFabricEvent.fabricSetup, new r(l.restEventUrl, \"/events/fabric/setup\", b) ], [ j.fabricEvent.fabricSetupFailed, new r(l.restEventUrl, \"/events/fabric/setupfailed\", b) ], [ j.internalFabricEvent.userJoined, new r(l.restEventUrl, \"\", f(function(a, b) {\n                b = decodeURIComponent(b);\n                var c = m.Registry.getConferenceManager().get(b);\n                c && (p.log(\"UcId is - \", a.ucID, b), c.setUcId(a.ucID), m.Registry.getTransmissionManager().trySend());\n            })) ], [ j.internalFabricEvent.userLeft, new r(l.restEventUrl, \"/events/user/left\", b) ], [ j.internalFabricEvent.userAlive, new r(l.restEventUrl, \"/events/user/alive\", b) ], [ j.internalFabricEvent.fabricTransportSwitch, new r(l.restEventUrl, \"/events/fabric/transportchange\", b) ], [ j.internalFabricEvent.mediaPlaybackStart, new r(l.restEventUrl, \"/events/media/pipeline\", b) ], [ j.internalFabricEvent.mediaPlaybackSuspended, new r(l.restEventUrl, \"/events/media/pipeline\", b) ], [ j.internalFabricEvent.mediaPlaybackStalled, new r(l.restEventUrl, \"/events/media/pipeline\", b) ], [ j.internalFabricEvent.ssrcMap, new r(l.restEventUrl, \"/events/ssrcmap\", b) ], [ j.internalFabricEvent.connectedDeviceList, new r(l.restEventUrl, \"/events/devices/list\", b) ], [ j.internalFabricEvent.sdpSubmission, new r(l.restEventUrl, \"/events/sdp\", b) ], [ j.internalFabricEvent.iceDisruptionStart, new r(l.restEventUrl, \"/events/ice/status\", b) ], [ j.internalFabricEvent.iceDisruptionEnd, new r(l.restEventUrl, \"/events/ice/status\", b) ], [ j.internalFabricEvent.iceConnectionDisruptionStart, new r(l.restEventUrl, \"/events/ice/status\", b) ], [ j.internalFabricEvent.iceConnectionDisruptionEnd, new r(l.restEventUrl, \"/events/ice/status\", b) ], [ j.internalFabricEvent.iceAborted, new r(l.restEventUrl, \"/events/ice/status\", b) ], [ j.internalFabricEvent.iceTerminated, new r(l.restEventUrl, \"/events/ice/status\", b) ], [ j.internalFabricEvent.iceFailed, new r(l.restEventUrl, \"/events/ice/status\", b) ], [ j.internalFabricEvent.iceRestarted, new r(l.restEventUrl, \"/events/ice/status\", b) ], [ j.internalFabricEvent.fabricDropped, new r(l.restEventUrl, \"/events/fabric/status\", b) ], [ j.callstatsChannels.processedStats, new r(l.restStatsUrl, \"/stats\", b) ], [ j.internalFabricEvent.fabricStateChange, new r(l.restEventUrl, \"/events/fabric/statechange\", b) ], [ j.callstatsChannels.userFeedback, new r(l.restEventUrl, \"/events/feedback\", b) ], [ j.precalltestEvents.results, new r(l.restEventUrl, \"/events/precall\", b) ], [ j.precalltestEvents.associate, new r(l.restEventUrl, \"/events/precall\", b) ], [ j.internalFabricEvent.userDetails, new r(l.restEventUrl, \"/events/userdetails\", b) ] ]);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.RestRelays = void 0;\n        var h = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), i = a(\"../config/constants\"), j = d(i), k = a(\"../config/settings\"), l = d(k), m = a(\"../utility/registry\"), n = a(\"../utility/url\"), o = a(\"../utility/csiologger\"), p = d(o), q = function() {\n            function a() {\n                e(this, a), this.items = g();\n            }\n            return h(a, [ {\n                key: \"getRequestUrl\",\n                value: function(a, b, c) {\n                    return this.items.has(a) ? this.items.get(a).getRequestUrl(a, b, c) : (p.warn(\"EventType Unsupported \", a),\n                    null);\n                }\n            }, {\n                key: \"handleResponse\",\n                value: function(a, b, c) {\n                    if (!this.items.has(a)) return void p.warn(\"No response handler for event type \" + a);\n                    this.items.get(a).handleResponse(b, c, a);\n                }\n            } ]), a;\n        }(), r = function() {\n            function a(b, c) {\n                var d = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;\n                e(this, a), this.baseUrl = b, this.urlAppendix = c, this.responseHandler = d;\n            }\n            return h(a, [ {\n                key: \"getRequestUrl\",\n                value: function(a, b, c) {\n                    return this.makeRequestUrl(a, b, c), this.requestUrl.toString();\n                }\n            }, {\n                key: \"makeRequestUrl\",\n                value: function(a, b, c) {\n                    a === j.precalltestEvents.results ? this.requestUrl = new n.Url(this.baseUrl, m.Registry.getCredentials().getAppId(), this.urlAppendix) : (a === j.internalFabricEvent.userJoined && c && (c = \"\"),\n                    this.requestUrl = new n.Url(this.baseUrl, m.Registry.getCredentials().getAppId() + \"/conferences/\" + b, c, this.urlAppendix));\n                }\n            }, {\n                key: \"handleResponse\",\n                value: function(a, b, c) {\n                    this.responseHandler(a, b, c);\n                }\n            } ]), a;\n        }();\n        c.RestRelays = q;\n    }, {\n        \"../config/constants\": 33,\n        \"../config/settings\": 34,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"../utility/url\": 100\n    } ],\n    56: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.TransmissionManager = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../utility/timestamps\"), h = d(g), i = a(\"../collections/cache\"), j = a(\"../utility/registry\"), k = a(\"../config/constants\"), l = d(k), m = a(\"../utility/csiologger\"), n = d(m), o = function() {\n            function a() {\n                e(this, a), this.cache = [], this.connectionManager = j.Registry.getConnectionManager(),\n                this.lastTS = 0, this.timerStarted = !1, this.lastUserAliveTS = {};\n            }\n            return f(a, [ {\n                key: \"send\",\n                value: function(a) {\n                    (a.isCachable() || a.canBeSent()) && (this.cache[a.getConferenceId()] || (this.cache[a.getConferenceId()] = new i.Cache()),\n                    this.cache[a.getConferenceId()].add(a, a.isPriority()), this.trySend());\n                }\n            }, {\n                key: \"trySend\",\n                value: function() {\n                    if (!this.connectionManager.isReady()) return void this.setupConnection();\n                    if (!this.timerStarted) return this.timeToSend() ? void (this.sendMessage() && this.startTimer()) : void (this.getCacheLength() > 0 && this.startTimer());\n                }\n            }, {\n                key: \"setupConnection\",\n                value: function() {\n                    this.connectionManager.setup().then(function() {\n                        n.log(\"Connected to connectionManager\");\n                    }).catch(function(a) {\n                        return n.log(\"Could not connect to connectionManager\", a);\n                    });\n                }\n            }, {\n                key: \"canSendUserAlive\",\n                value: function(a, b) {\n                    return !this.lastUserAliveTS[b] || !(a - this.lastUserAliveTS[b] < 9e3);\n                }\n            }, {\n                key: \"sendMessage\",\n                value: function() {\n                    var a = void 0, b = void 0;\n                    if (0 === this.getCacheLength()) return !1;\n                    for (var c in this.cache) if (this.cache.hasOwnProperty(c) && (b = c, (a = this.cache[b].peak()) && a.canBeSent())) break;\n                    if (!a || !a.canBeSent()) return !1;\n                    if (a = this.cache[b].pop(), this.lastTS = h.getCurrent(), a.eventType === l.internalFabricEvent.userAlive) {\n                        if (!this.canSendUserAlive(this.lastTS, b)) return !0;\n                        this.lastUserAliveTS[b] = this.lastTS;\n                    }\n                    return n.log(\"sending message type :\", a.eventType, a.toJson()), this.connectionManager.send(a.toJson()),\n                    !0;\n                }\n            }, {\n                key: \"startTimer\",\n                value: function() {\n                    var a = this;\n                    this.timerStarted || 0 != this.getCacheLength() && (this.timerStarted = !0, setTimeout(function() {\n                        a.timerStarted = !1, a.trySend();\n                    }, 200));\n                }\n            }, {\n                key: \"timeToSend\",\n                value: function() {\n                    return h.getCurrent() >= this.lastTS + 200;\n                }\n            }, {\n                key: \"getCacheLength\",\n                value: function() {\n                    var a = 0;\n                    for (var b in this.cache) this.cache.hasOwnProperty(b) && (a += this.cache[b].length());\n                    return a;\n                }\n            }, {\n                key: \"updateConferenceId\",\n                value: function(a) {\n                    var b = l.tmpConferenceId;\n                    this.cache[b] && this.cache[b].updateConferenceId(a);\n                }\n            } ]), a;\n        }();\n        c.TransmissionManager = o;\n    }, {\n        \"../collections/cache\": 25,\n        \"../config/constants\": 33,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"../utility/timestamps\": 99\n    } ],\n    57: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function f(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function g(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.WsCollectorConnection = void 0;\n        var h = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), i = a(\"../config/callstatserrors\"), j = d(i), k = a(\"../config/constants\"), l = d(k), m = a(\"../config/settings\"), n = d(m), o = a(\"../utility/registry\"), p = a(\"../utility/csiologger\"), q = d(p), r = a(\"./collectorconnection\"), s = function(a) {\n            function b() {\n                e(this, b);\n                var a = f(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this));\n                return a.wsConnection = null, a.wsConnectionState = l.wsConnectionState.closed,\n                a.connected = !1, a.reconnected = !1, a;\n            }\n            return g(b, a), h(b, [ {\n                key: \"onOpenHandler\",\n                value: function() {\n                    var a = this;\n                    a.wsConnectionState = l.wsConnectionState.connected, a.connected ? a.reconnected = !0 : a.connected = !0,\n                    a.reconnected = !1;\n                }\n            }, {\n                key: \"onCloseHandler\",\n                value: function() {\n                    var a = this;\n                    a.wsConnectionState = l.wsConnectionState.closed, q.log(\"**** Connection to the backend closed.\"),\n                    a.wsConnection && (a.wsConnection = null);\n                }\n            }, {\n                key: \"onErrorHandler\",\n                value: function(a) {\n                    var b = this;\n                    b.wsConnectionState = l.wsConnectionState.closed, q.log(\"**** Connection establishment to the backend failed.\"),\n                    b.callback && b.callback(j.csError.wsChannelFailure, \"WebSocket establishment failed.\", a);\n                }\n            }, {\n                key: \"onMessageHandler\",\n                value: function(a) {\n                    var b = a.data, c = JSON.parse(b);\n                    if (\"200 OK\" === c.status) {\n                        if (\"feedback\" === c.event) window.localStorage.removeItem(\"feedback\"); else if (c.event === l.internalFabricEvent.userJoined) {\n                            var d = o.Registry.getConferenceManager().get(decodeURIComponent(c.conferenceID));\n                            d && d.setUcId(c.ucID), q.log(\"UcId =\", c.ucID), o.Registry.getTransmissionManager().trySend();\n                        }\n                    } else q.error(\"Collector error:\", c.reason);\n                }\n            }, {\n                key: \"setup\",\n                value: function() {\n                    var a = this;\n                    return new Promise(function(b, c) {\n                        if (a.wsConnectionState === l.wsConnectionState.initiated || a.wsConnectionState === l.wsConnectionState.connected) return q.log(\"setupWebSocketConnection is called when already connected!\"),\n                        a.callback && a.callback(j.csError.success, l.csCallBackMessages.wsConnected), void b();\n                        a.wsConnectionState = l.wsConnectionState.initiated, q.log(\"creating new WebSocket\", n.wsUrl),\n                        a.wsConnection = new WebSocket(n.wsUrl, \"echo-protocol\"), a.wsConnection.onopen = function() {\n                            b(), a.onOpenHandler();\n                        }, a.wsConnection.onclose = function() {\n                            a.onCloseHandler();\n                        }, a.wsConnection.onerror = function(b) {\n                            c(b), a.onErrorHandler(b);\n                        }, a.wsConnection.onmessage = function(b) {\n                            a.onMessageHandler(b);\n                        };\n                    });\n                }\n            }, {\n                key: \"isReady\",\n                value: function() {\n                    var a = this;\n                    return !(!a.wsConnection || 1 !== a.wsConnection.readyState);\n                }\n            }, {\n                key: \"getState\",\n                value: function() {\n                    var a = this;\n                    return a.wsConnection ? a.wsConnection.readyState : -1;\n                }\n            }, {\n                key: \"send\",\n                value: function(a) {\n                    this.wsConnection.send(JSON.stringify(a));\n                }\n            } ]), b;\n        }(r.CollectorConnection);\n        c.WsCollectorConnection = s;\n    }, {\n        \"../config/callstatserrors\": 32,\n        \"../config/constants\": 33,\n        \"../config/settings\": 34,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"./collectorconnection\": 47\n    } ],\n    58: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function f(a, b, c, d, e) {\n            return new Promise(function(f, g) {\n                var h = null, i = null, j = null, l = new XMLHttpRequest(), p = n.Registry.getEndpoint().getBrowserName();\n                if (!l) return void g(new Error(\"creating instance failed\"));\n                h = k.getCurrent(), l.open(a, b), p !== m.browserName.msie && (l.timeout = d);\n                for (var q in c) c.hasOwnProperty(q) && l.setRequestHeader(q, c[q]);\n                var r = null;\n                if (\"POST\" === a) {\n                    if (\"application/x-www-form-urlencoded\" === c[\"Content-Type\"]) {\n                        var s = [];\n                        for (var t in e) e.hasOwnProperty(t) && s.push(encodeURIComponent(t) + \"=\" + encodeURIComponent(e[t]));\n                        r = s.join(\"&\");\n                    }\n                    \"application/json\" === c[\"Content-Type\"] && (r = JSON.stringify(e));\n                }\n                l.onload = function() {\n                    i = k.getCurrent(), j = i - h;\n                    var a = new o(l, j);\n                    f(a);\n                }, l.ontimeout = function() {\n                    g(new Error(\"connection timeout\"));\n                }, l.onreadystatechange = function() {\n                    4 === l.readyState && 0 === l.status && g(new Error(\"no server response received\"));\n                }, l.send(r);\n            });\n        }\n        function g(a, b, c) {\n            return f(\"GET\", a, b, c, null);\n        }\n        function h(a, b, c, d) {\n            return f(\"POST\", a, b, c, d);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var i = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }();\n        c.sendGetRequest = g, c.sendPostRequest = h;\n        var j = a(\"../utility/timestamps\"), k = d(j), l = a(\"../config/constants\"), m = d(l), n = a(\"../utility/registry\"), o = function() {\n            function a(b, c) {\n                e(this, a), this.xhr = b, this.elapsed = c;\n            }\n            return i(a, [ {\n                key: \"getXhr\",\n                value: function() {\n                    return this.xhr;\n                }\n            }, {\n                key: \"getElapsed\",\n                value: function() {\n                    return this.elapsed;\n                }\n            } ]), a;\n        }();\n    }, {\n        \"../config/constants\": 33,\n        \"../utility/registry\": 95,\n        \"../utility/timestamps\": 99\n    } ],\n    59: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.XMLHttpService = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"../utility/sigmoid\"), g = a(\"../utility/csiologger\"), h = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(g), i = 100, j = 1e4, k = function() {\n            function a() {\n                var b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : \"XMLHttpService\", c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : i, e = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : j;\n                d(this, a), this.name = b, this.minRetryTimeout = c, this.sigmoid = new f.Sigmoid(e - c, 15, .5),\n                this.reset();\n            }\n            return e(a, [ {\n                key: \"reset\",\n                value: function() {\n                    this.inProgress = !1, this.completed = !1, this.resolveCb && this.rejectCb(new Error(this.name + \": resetting\")),\n                    this.resolveCb = null, this.rejectCb = null;\n                }\n            }, {\n                key: \"initiate\",\n                value: function() {\n                    var a = this;\n                    if (this.inProgress) return new Promise(function(b, c) {\n                        c(new Error(a.name + \": in progress\"));\n                    });\n                    var b = new Promise(function(b, c) {\n                        a.resolveCb = b, a.rejectCb = c;\n                    });\n                    return this.inProgress = !0, this.sendRequest(), b;\n                }\n            }, {\n                key: \"isCompleted\",\n                value: function() {\n                    return this.completed;\n                }\n            }, {\n                key: \"handleSendError\",\n                value: function(a) {\n                    h.log(this.name + \": send next request (\" + a + \")\"), this.sendNextRequest();\n                }\n            }, {\n                key: \"handleResponseProxy\",\n                value: function(a) {\n                    this.handleResponse(a), this.resetTimeout();\n                }\n            }, {\n                key: \"handleResponse\",\n                value: function(a) {\n                    h.error(this.name + \": handleResponse() not implemented\"), this.completeProcess();\n                }\n            }, {\n                key: \"completeProcess\",\n                value: function() {\n                    this.inProgress = !1, this.completed = !0, this.resolveCb.apply(this, arguments);\n                }\n            }, {\n                key: \"request\",\n                value: function() {\n                    return h.error(this.name + \": request() not implemented!\"), new Promise(function(a, b) {\n                        a();\n                    });\n                }\n            }, {\n                key: \"sendRequest\",\n                value: function() {\n                    if (this.inProgress) {\n                        var a = this.request();\n                        a && a.then(this.handleResponseProxy.bind(this), this.handleSendError.bind(this));\n                    }\n                }\n            }, {\n                key: \"sendNextRequest\",\n                value: function() {\n                    setTimeout(this.sendRequest.bind(this), this.getTimeout());\n                }\n            }, {\n                key: \"resetTimeout\",\n                value: function() {\n                    this.sigmoid.reset();\n                }\n            }, {\n                key: \"getTimeout\",\n                value: function() {\n                    return this.minRetryTimeout + this.sigmoid.getActual();\n                }\n            } ]), a;\n        }();\n        c.XMLHttpService = k;\n    }, {\n        \"../utility/csiologger\": 88,\n        \"../utility/sigmoid\": 97\n    } ],\n    60: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.Measurement = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./resolution\"), g = a(\"./validator\"), h = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(g), i = function() {\n            function a() {\n                d(this, a), this.pcHash = null, this.ssrc = null, this.streamType = null, this.mediaType = null,\n                this.resolution = null, this.frameRateReceived = null, this.frameHeight = null,\n                this.frameWidth = null, this.droppedFramesNum = null, this.framesReceived = null,\n                this.rtt = null, this.jitter = null, this.lostPackets = -1, this.receivedPackets = -1,\n                this.sentPackets = -1, this.discardedPackets = -1, this.sentBytes = -1, this.receivedBytes = -1,\n                this.track = null, this.fractionLost = 0;\n            }\n            return e(a, null, [ {\n                key: \"make\",\n                value: function(b, c, d, e, f, g, i, j, k, l, m, n, o, p, q, r, s, t) {\n                    var u = new a(), v = function(a, b) {\n                        -1 === [ void 0, null ].indexOf(b) && (u[a] = b);\n                    };\n                    return v(\"pcHash\", b), v(\"ssrc\", c), v(\"streamType\", d), v(\"mediaType\", e), v(\"frameRateReceived\", f),\n                    v(\"frameHeight\", h.checkForNan(parseInt(g, 10))), v(\"frameWidth\", h.checkForNan(parseInt(i, 10))),\n                    v(\"droppedFramesNum\", j), v(\"framesReceived\", k), v(\"rtt\", l), v(\"jitter\", m), v(\"lostPackets\", n),\n                    v(\"receivedPackets\", o), v(\"sentPackets\", p), v(\"discardedPackets\", q), v(\"sentBytes\", r),\n                    v(\"receivedBytes\", s), v(\"track\", t), u.setFrameRateReceived(f), u;\n                }\n            } ]), e(a, [ {\n                key: \"getPcHash\",\n                value: function() {\n                    return this.pcHash;\n                }\n            }, {\n                key: \"getSSRC\",\n                value: function() {\n                    return this.ssrc;\n                }\n            }, {\n                key: \"getStreamType\",\n                value: function() {\n                    return this.streamType;\n                }\n            }, {\n                key: \"getMediaType\",\n                value: function() {\n                    return this.mediaType;\n                }\n            }, {\n                key: \"getResolution\",\n                value: function() {\n                    return this.resolution ? this.resolution.toString() : null;\n                }\n            }, {\n                key: \"getFrameRateReceived\",\n                value: function() {\n                    return this.frameRateReceived;\n                }\n            }, {\n                key: \"getFrameHeight\",\n                value: function() {\n                    return this.frameHeight;\n                }\n            }, {\n                key: \"getFrameWidth\",\n                value: function() {\n                    return this.frameWidth;\n                }\n            }, {\n                key: \"getDroppedFramesNum\",\n                value: function() {\n                    return this.droppedFramesNum;\n                }\n            }, {\n                key: \"getFramesReceived\",\n                value: function() {\n                    return this.framesReceived;\n                }\n            }, {\n                key: \"setFrameRateReceived\",\n                value: function(a) {\n                    this.frameRateReceived = a, void 0 !== this.frameRateReceived && void 0 !== this.frameWidth && void 0 !== this.frameHeight && this.frameWidth > 0 && this.frameHeight > 0 ? this.resolution = new f.Resolution(this.frameWidth, this.frameHeight, this.frameRateReceived) : this.resolution = null;\n                }\n            }, {\n                key: \"getJitter\",\n                value: function() {\n                    return this.jitter;\n                }\n            }, {\n                key: \"getRTT\",\n                value: function() {\n                    return this.rtt;\n                }\n            }, {\n                key: \"getLostPackets\",\n                value: function() {\n                    return this.lostPackets;\n                }\n            }, {\n                key: \"getDiscardedPackets\",\n                value: function() {\n                    return this.discardedPackets;\n                }\n            }, {\n                key: \"getReceivedPackets\",\n                value: function() {\n                    return this.receivedPackets;\n                }\n            }, {\n                key: \"getSentPackets\",\n                value: function() {\n                    return this.sentPackets;\n                }\n            }, {\n                key: \"getSentBytes\",\n                value: function() {\n                    return this.sentBytes;\n                }\n            }, {\n                key: \"getReceivedBytes\",\n                value: function() {\n                    return this.receivedBytes;\n                }\n            }, {\n                key: \"setFractionLost\",\n                value: function(a) {\n                    this.fractionLost = void 0 === a ? null : a;\n                }\n            }, {\n                key: \"getFractionLost\",\n                value: function() {\n                    return this.fractionLost;\n                }\n            }, {\n                key: \"extractTrack\",\n                value: function() {\n                    var a = this.track;\n                    return this.track = null, a;\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    return \"pcHash: \" + this.pcHash + \", ssrc: \" + this.ssrc + \", streamType: \" + this.streamType + \", mediaType: \" + this.mediaType + \", frameRateReceived: \" + this.frameRateReceived + \", frameHeight: \" + this.frameHeight + \", frameWidth: \" + this.frameWidth + \", droppedFramesNum: \" + this.droppedFramesNum + \", rtt: \" + this.rtt + \", jitter: \" + this.jitter + \", lostPackets: \" + this.lostPackets + \", receivedPackets: \" + this.receivedPackets + \", sentPackets: \" + this.sentPackets + \", discardedPackets: \" + this.discardedPackets + \", sentBytes: \" + this.sentBytes + \", receivedBytes: \" + this.receivedBytes;\n                }\n            } ]), a;\n        }();\n        c.Measurement = i;\n    }, {\n        \"./resolution\": 68,\n        \"./validator\": 83\n    } ],\n    61: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.CPULimitationObserver = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../../config/constants\"), h = d(g), i = a(\"../../utility/timestamps\"), j = d(i), k = function() {\n            function a() {\n                e(this, a), this.ewmaDiscardedPackets = 0, this.ewmaLostPackets = 0, this.ewmaDroppedFrames = 0,\n                this.last = 0, this.noticed = 0;\n            }\n            return f(a, [ {\n                key: \"test\",\n                value: function(a) {\n                    var b = a.discardedPackets, c = a.lostPackets;\n                    if (!c || c < 1 || !b || b < 1) return !1;\n                    if (0 === this.last) return this.last = j.getCurrent(), this.ewmaLostPackets = c,\n                    this.ewmaDiscardedPackets = b, !1;\n                    var d = j.getCurrent(), e = Math.max(d - this.last, 1), f = Math.min((5e3 - e) / 5e3, .9), g = a.droppedFrames;\n                    return this.ewmaLostPackets = this.ewmaLostPackets * f + c, this.ewmaDroppedFrames = this.ewmaDroppedFrames * f + g,\n                    this.ewmaDiscardedPackets = this.ewmaDiscardedPackets * f + b, !(!g || g < 1) && (!(1 < this.ewmaLostPackets || 1 < this.ewmaDiscardedPackets) && (!(d - this.noticed < 1e4) && (!(this.ewmaDroppedFrames < 1) && (this.noticed = d,\n                    !0))));\n                }\n            } ]), a;\n        }(), l = function() {\n            function a(b) {\n                e(this, a), this.notifyCallback = b, this.inbVideoTesters = new Map();\n            }\n            return f(a, [ {\n                key: \"accept\",\n                value: function(a) {\n                    for (var b = a.filter(function(a) {\n                        return a.getMediaType() === h.mediaType.video && a.getStreamType() === h.streamType.inbound;\n                    }), c = 0; c < b.length; ++c) {\n                        var d = b[c];\n                        this.checkInboundVideo(d);\n                    }\n                }\n            }, {\n                key: \"checkInboundVideo\",\n                value: function(a) {\n                    var b = a.peek(), c = a.getSSRC();\n                    if (this.inbVideoTesters.has(c) || this.inbVideoTesters.set(c, new k()), this.inbVideoTesters.get(c).test(b)) {\n                        var d = {\n                            reason: h.limitationType.cpu,\n                            ssrc: c\n                        };\n                        this.notifyCallback(d);\n                    }\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    return \"CPULimitationObserver\";\n                }\n            } ]), a;\n        }();\n        c.CPULimitationObserver = l;\n    }, {\n        \"../../config/constants\": 33,\n        \"../../utility/timestamps\": 99\n    } ],\n    62: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.OneWayMediaObserver = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../../config/constants\"), h = d(g), i = a(\"../onewaymediadisruption\"), j = a(\"../../utility/timestamps\"), k = d(j), l = function() {\n            function a(b) {\n                e(this, a), this.notifierCallback = b, this.inbOneWayAudioDisruption = {\n                    sent: !1,\n                    started: 0,\n                    hasTrafficTs: 0\n                }, this.outbOneWayAudioDisruption = {\n                    sent: !1,\n                    started: 0,\n                    hasTrafficTs: 0\n                };\n            }\n            return f(a, [ {\n                key: \"accept\",\n                value: function(a) {\n                    var b = a.filter(function(a) {\n                        return a.getMediaType() == h.mediaType.audio && a.getStreamType() === h.streamType.inbound;\n                    }), c = a.filter(function(a) {\n                        return a.getMediaType() == h.mediaType.audio && a.getStreamType() === h.streamType.outbound;\n                    }), d = [ this.getInbOneWayAudioDisruption(b, c), this.getOutbOneWayAudioDisruption(b, c) ], e = d.filter(function(a) {\n                        return null !== a;\n                    });\n                    0 < e.length && this.notifierCallback(e);\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    return \"DisruptionObserver\";\n                }\n            }, {\n                key: \"getInbOneWayAudioDisruption\",\n                value: function(a, b) {\n                    var c = this.inbOneWayAudioDisruption;\n                    if (c.sent) return null;\n                    var d = b.filter(function(a) {\n                        return 0 === a.getStartTime();\n                    }).length < 1, e = b.filter(function(a) {\n                        return !a.hasTraffic();\n                    }).length < 1;\n                    if (!d || e) return null;\n                    var f = a.filter(function(a) {\n                        return !a.hasTraffic();\n                    }).length < 1;\n                    return 0 < a.length && f ? (c.started = 0, null) : 0 === c.started ? (c.started = k.getCurrent(),\n                    null) : k.getCurrent() - 5e3 < c.started ? null : (c.sent = !0, new i.OneWayMediaDisruption(h.oneWayMediaTypes.audio));\n                }\n            }, {\n                key: \"getOutbOneWayAudioDisruption\",\n                value: function(a, b) {\n                    var c = this.outbOneWayAudioDisruption;\n                    if (c.sent) return null;\n                    var d = a.filter(function(a) {\n                        return 0 === a.getStartTime();\n                    }).length < 1, e = a.filter(function(a) {\n                        return !a.hasTraffic();\n                    }).length < 1;\n                    if (!d || !e) return null;\n                    var f = b.filter(function(a) {\n                        return !a.hasTraffic();\n                    }).length < 1;\n                    return 0 < b.length && f ? (c.started = 0, null) : 0 === c.started ? (c.started = k.getCurrent(),\n                    null) : k.getCurrent() - 5e3 < c.started ? null : (c.sent = !0, new i.OneWayMediaDisruption(h.oneWayMediaTypes.audio));\n                }\n            } ]), a;\n        }();\n        c.OneWayMediaObserver = l;\n    }, {\n        \"../../config/constants\": 33,\n        \"../../utility/timestamps\": 99,\n        \"../onewaymediadisruption\": 66\n    } ],\n    63: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.QPSumObserver = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../../config/constants\"), h = d(g), i = a(\"../../utility/timestamps\"), j = d(i), k = function() {\n            function a(b) {\n                e(this, a), this.lastQpSum = null, this.qpAvg = null, this.noticed = 0;\n            }\n            return f(a, [ {\n                key: \"test\",\n                value: function(a) {\n                    var b = a.getTrack();\n                    if (!b || !b.data || !b.data.qpSum) return !1;\n                    if (!this.lastQpSum) return this.lastQpSum = b.data.qpSum, !1;\n                    var c = b.data.qpSum - this.lastQpSum;\n                    if (this.lastQpSum = b.data.qpSum, null === this.qpAvg) this.qpAvg = c; else {\n                        this.qpAvg = .2 * c + .8 * this.qpAvg;\n                    }\n                    var d = Math.max(2 * this.qpAvg, 1);\n                    if (c < this.qpAvg + d) return !1;\n                    var e = j.getCurrent();\n                    return this.noticed < e - 1e4;\n                }\n            } ]), a;\n        }(), l = function() {\n            function a(b) {\n                e(this, a), this.notifyCallback = b, this.testers = new Map();\n            }\n            return f(a, [ {\n                key: \"accept\",\n                value: function(a) {\n                    for (var b = 0; b < a.length; ++b) {\n                        var c = a[b];\n                        if (c.getMediaType() === h.mediaType.video) {\n                            var d = c.getSSRC();\n                            this.testers.has(d) || this.testers.set(d, new k(c));\n                            if (this.testers.get(d).test(c)) {\n                                var e = {\n                                    reason: h.qualityDisruptionTypes.qpchange\n                                };\n                                this.notifyCallback(e);\n                            }\n                        }\n                    }\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    return \"QPSumObserver\";\n                }\n            } ]), a;\n        }();\n        c.QPSumObserver = l;\n    }, {\n        \"../../config/constants\": 33,\n        \"../../utility/timestamps\": 99\n    } ],\n    64: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.SendingTrigger = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../../utility/timestamps\"), h = d(g), i = a(\"../validator\"), j = d(i), k = 1e3, l = 3e4, m = function() {\n            function a(b, c, d) {\n                e(this, a), this.last = null, this.actual = 0, this.name = b, this.alpha = c, this.supplier = d;\n            }\n            return f(a, [ {\n                key: \"update\",\n                value: function(a) {\n                    if (null === this.last) return void (this.last = a);\n                    var b = Math.abs(a - this.last);\n                    this.actual = b * this.alpha + this.actual * (1 - this.alpha), this.last = a;\n                }\n            }, {\n                key: \"doTest\",\n                value: function(a) {\n                    var b = this.last;\n                    return this.update(a), null !== b && b + this.supplier(this.actual) < a;\n                }\n            } ]), a;\n        }(), n = function() {\n            function a() {\n                e(this, a);\n                var b = this;\n                this.marginFactor = 1, this.rttTester = new m(\"RTT Tester\", .2, function(a) {\n                    return Math.max(50, a) * b.marginFactor;\n                }), this.throughputTester = new m(\"Throughput Tester\", .1, function(a) {\n                    return Math.max(100, a) * b.marginFactor;\n                }), this.FLTester = new m(\"FL Tester\", .1, function(a) {\n                    return Math.max(.2, a) * b.marginFactor;\n                }), this.lastDecreased = h.getCurrent();\n            }\n            return f(a, [ {\n                key: \"test\",\n                value: function(a) {\n                    var b = a.peek();\n                    if (!b) return !1;\n                    var c = a.getTrack(), d = c.data, e = b.getRTT(), f = j.checkForNan(parseInt(d.csioIntBRKbps, 10)), g = b.getFractionLost();\n                    if (this.rttTester.doTest(e) || this.throughputTester.doTest(f) || this.FLTester.doTest(g)) return this.marginFactor = Math.min(2 * this.marginFactor, 15),\n                    !0;\n                    var i = h.getCurrent();\n                    return 3e3 < i - this.lastChanged && (this.marginFactor = Math.max(this.marginFactor - .5, 1),\n                    this.lastDecreased = i), !1;\n                }\n            } ]), a;\n        }(), o = function() {\n            function a(b) {\n                e(this, a), this.notifyCallback = b, this.minInterval = k, this.maxInterval = l,\n                this.notified = 0, this.testers = new Map();\n            }\n            return f(a, [ {\n                key: \"setup\",\n                value: function(a, b) {\n                    this.minInterval = a, this.maxInterval = b;\n                }\n            }, {\n                key: \"accept\",\n                value: function(a) {\n                    var b = h.getCurrent(), c = b - this.notified;\n                    if (this.minInterval === this.maxInterval) return void (this.minInterval <= c && (this.notifyCallback(),\n                    this.notified = b));\n                    if (!(c < this.minInterval)) {\n                        if (c < this.maxInterval) {\n                            if (!1 === this.doSend(a)) return;\n                        }\n                        this.notifyCallback(), this.notified = b;\n                    }\n                }\n            }, {\n                key: \"setIntervals\",\n                value: function(a, b) {\n                    this.minInterval = a, this.maxInterval = b;\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    return \"SendingTrigger\";\n                }\n            }, {\n                key: \"doSend\",\n                value: function(a) {\n                    for (var b = 0; b < a.length; ++b) {\n                        var c = a[b], d = c.getSSRC();\n                        this.testers.has(d) || this.testers.set(d, new n());\n                        if (this.testers.get(d).test(c)) return !0;\n                    }\n                    return !1;\n                }\n            } ]), a;\n        }();\n        c.SendingTrigger = o;\n    }, {\n        \"../../utility/timestamps\": 99,\n        \"../validator\": 83\n    } ],\n    65: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.ThroughputObserver = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../../config/constants\"), h = d(g), i = a(\"../../utility/timestamps\"), j = d(i), k = function() {\n            function a(b) {\n                e(this, a), this.notifierCallback = b, this.observations = new Map();\n            }\n            return f(a, [ {\n                key: \"accept\",\n                value: function(a) {\n                    var b = a.filter(function(a) {\n                        return a.getMediaType() === h.mediaType.video && a.getStreamType() === h.streamType.outbound;\n                    });\n                    if (!(b.length < 1)) {\n                        var c = this;\n                        b.forEach(function(a) {\n                            c.observe(a);\n                        });\n                    }\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    return \"ThroughputObserver\";\n                }\n            }, {\n                key: \"getObservations\",\n                value: function(a) {\n                    if (this.observations.has(a)) return this.observations.get(a);\n                    var b = {\n                        ssrc: 0,\n                        started: 0,\n                        max: 0,\n                        maxTs: 0,\n                        stable: 0,\n                        stableTs: 0,\n                        ready: !1,\n                        maxVerified: !1,\n                        stableVerified: !1\n                    };\n                    return this.observations.set(a, b), this.observations.get(a);\n                }\n            }, {\n                key: \"observe\",\n                value: function(a) {\n                    var b = a.getSSRC(), c = this.getObservations(b), d = j.getCurrent();\n                    if (!0 !== c.ready) {\n                        if (0 === c.started) return c.ssrc = b, void (c.started = d);\n                        var e = a.getTrack(), f = e.data, g = f.csioIntBRKbps, h = Math.min(50, .05 * g);\n                        if (c.max < g ? (c.max = g, c.maxTs = d) : 1e4 < d - c.maxTs && (c.maxVerified = !0),\n                        !(d - c.started < 15e3) && (g - h < f.csioAvgBRKbps && f.csioAvgBRKbps < g + h && (c.stableTs = d,\n                        c.stable = g, c.stableVerified = !0), c.stableVerified && c.maxVerified)) {\n                            var i = {\n                                ssrc: String(c.ssrc),\n                                maxsendingKBitrate: c.max,\n                                timeToMaxSendingKBitrate: c.maxTs - c.started,\n                                stablesendingKBitrate: c.stable,\n                                timeToStableSendingKBitrate: c.stableTs - c.started\n                            };\n                            this.notifierCallback(i), c.ready = !0;\n                        }\n                    }\n                }\n            } ]), a;\n        }();\n        c.ThroughputObserver = k;\n    }, {\n        \"../../config/constants\": 33,\n        \"../../utility/timestamps\": 99\n    } ],\n    66: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a(b) {\n                var c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : \"0\";\n                d(this, a), this.mediaType = b, this.ssrc = c;\n            }\n            return e(a, [ {\n                key: \"getContent\",\n                value: function() {\n                    var a = this;\n                    return {\n                        mediaType: a.mediaType,\n                        ssrc: a.ssrc\n                    };\n                }\n            } ]), a;\n        }();\n        c.OneWayMediaDisruption = f;\n    }, {} ],\n    67: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a(b, c, e, f, g, h) {\n                d(this, a), this.candidatePair = b, this.codec = c, this.pcHash = e, this.trackStats = f,\n                this.transportStats = g, this.measurements = h;\n            }\n            return e(a, [ {\n                key: \"getCandidatePair\",\n                value: function() {\n                    return this.candidatePair;\n                }\n            }, {\n                key: \"getCodec\",\n                value: function() {\n                    return this.codec;\n                }\n            }, {\n                key: \"getPcHash\",\n                value: function() {\n                    return this.pcHash;\n                }\n            }, {\n                key: \"getTrackStats\",\n                value: function() {\n                    return this.trackStats;\n                }\n            }, {\n                key: \"getTransportStats\",\n                value: function() {\n                    return this.transportStats;\n                }\n            }, {\n                key: \"getMeasurements\",\n                value: function() {\n                    return this.measurements;\n                }\n            } ]), a;\n        }();\n        c.PcStats = f;\n    }, {} ],\n    68: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a(b, c, e) {\n                d(this, a), this.width = b, this.height = c, this.frameRate = e;\n            }\n            return e(a, [ {\n                key: \"getWidth\",\n                value: function() {\n                    return this.width;\n                }\n            }, {\n                key: \"getHeight\",\n                value: function() {\n                    return this.height;\n                }\n            }, {\n                key: \"getFrameRate\",\n                value: function() {\n                    return this.frameRate;\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    return this.width && this.height && this.frameRate ? this.width.toString() + \"X\" + this.height.toString() + \"X\" + this.frameRate.toString() : null;\n                }\n            } ]), a;\n        }();\n        c.Resolution = f;\n    }, {} ],\n    69: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function f(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function g(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.StatsAdapter = c.StatsAdapterIO = void 0;\n        var h = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), i = a(\"../config/constants\"), j = d(i), k = a(\"../collections/component\"), l = a(\"../utility/registry\"), m = a(\"../utility/hash\"), n = d(m), o = c.StatsAdapterIO = {\n            RawStatsIn: \"RawStatsIn\",\n            RawStatsOut: \"RawStatsOut\",\n            UnprocessedOut: \"UnprocessedOut\"\n        }, p = function(a) {\n            function b(a, c) {\n                e(this, b);\n                var d = f(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, \"StatsAdapter\"));\n                return d.bindPort(o.RawStatsIn, d.receiveRawData, d), d.declarePort(o.RawStatsOut),\n                d.declarePort(o.UnprocessedOut), d.codeBase = a, d.browser = c, d;\n            }\n            return g(b, a), h(b, [ {\n                key: \"receiveRawData\",\n                value: function(a, b) {\n                    if (a) {\n                        var c = this.extractRawStats(a);\n                        if (c) {\n                            window && window.csioReactNative && (c = this.removeValues(c)), this.isConnected(o.UnprocessedOut) && this.transmit(o.UnprocessedOut, c, b);\n                            var d = this.processRawStats(c, b);\n                            if (d && d.transportStats) for (var e = 0; e < d.transportStats.length; e++) d.transportStats[e].hash = this.getTransportHash(d.transportStats[e]);\n                            d && d.transportStats && this.checkTransportStatsUpdates(d.transportStats, b), d && d.trackStats && (d = this.backFillTrackStats(d)),\n                            d && d.transportStats && d.candidatePair && (d = this.backFillCandidatePairStats(d)),\n                            d.pcHash = b, this.transmit(o.RawStatsOut, d);\n                        }\n                    }\n                }\n            }, {\n                key: \"removeValues\",\n                value: function(a) {\n                    for (var b = 0; b < a.length; ++b) {\n                        var c = a[b];\n                        if (c && c.values) {\n                            for (var d = 0; d < c.values.length; ++d) Object.assign(c, c.values[d]);\n                            delete c.values;\n                        }\n                    }\n                    return a;\n                }\n            }, {\n                key: \"getIceCandidates\",\n                value: function(a) {\n                    if (!a) return {\n                        localIceCandidates: [],\n                        remoteIceCandidates: [],\n                        iceCandidatePairs: []\n                    };\n                    var b = this.extractRawStats(a);\n                    return this.processRawStatsForIceInfo(b);\n                }\n            }, {\n                key: \"extractRawStats\",\n                value: function(a) {\n                    var b = [];\n                    if (a && a.result) b = a.result(); else if (a && a.forEach) a.forEach(function(a) {\n                        b.push(a);\n                    }); else for (var c in a) a.hasOwnProperty(c) && b.push(a[c]);\n                    return b;\n                }\n            }, {\n                key: \"normalizeIceCandidates\",\n                value: function(a) {\n                    for (var b = 0; b < a.length; b += 1) {\n                        var c = a[b];\n                        c.transport = c.protocol ? c.protocol : \"udp\", c.ip = c.ip ? c.ip : c.ipAddress,\n                        c.port = c.portNumber ? Number(c.portNumber) : c.port, \"ssltcp\" === c.transport && (c.transport = \"tcp\"),\n                        c.id || (c.id = \"csio\" + c.port);\n                    }\n                    return a;\n                }\n            }, {\n                key: \"normalizeCanidatePairs\",\n                value: function(a) {\n                    for (var b = 0; b < a.length; b += 1) {\n                        var c = a[b];\n                        \"in-progress\" === c.state && (c.state = \"inprogress\"), c.state || (c.state = \"succeeded\"),\n                        c.nominated || (c.nominated = \"true\" === c.googActiveConnection), c.priority || (c.priority = 123),\n                        c.id || (c.id = \"csio\" + c.priority);\n                    }\n                    return a;\n                }\n            }, {\n                key: \"processRawStatsForIceInfo\",\n                value: function(a) {\n                    var b = [], c = [], d = [], e = void 0;\n                    if (!a) return {\n                        localIceCandidates: b,\n                        remoteIceCandidates: c,\n                        iceCandidatePairs: d\n                    };\n                    for (var f = 0; f < a.length; ++f) {\n                        var g = this.getParsedStats(a[f]), h = this.statsClassifier(g);\n                        if (h.candidatePair) d.push(h.candidatePair); else if (h.transportStats) {\n                            if (\"transport\" === h.transportStats.type) {\n                                e = h.transportStats.selectedCandidatePairId;\n                                continue;\n                            }\n                            d.push(h.transportStats);\n                        } else h.localCandidate ? b.push(h.localCandidate) : h.remoteCandidate && c.push(h.remoteCandidate);\n                    }\n                    if (e) for (var i = 0; i < d.length; ++i) d[i].id === e && (d[i].googActiveConnection = \"true\");\n                    return {\n                        localIceCandidates: this.normalizeIceCandidates(b),\n                        remoteIceCandidates: this.normalizeIceCandidates(c),\n                        iceCandidatePairs: this.normalizeCanidatePairs(d)\n                    };\n                }\n            }, {\n                key: \"processRawStats\",\n                value: function(a, b) {\n                    var c = {}, d = {}, e = {};\n                    c.tracks = [], c.candidatePair = [], c.transportStats = [], c.trackStats = [], c.codec = [];\n                    for (var f = 0; f < a.length; f++) {\n                        var g = this.getParsedStats(a[f]), h = this.statsClassifier(g);\n                        h.tracks ? c.tracks.push(h.tracks) : h.candidatePair ? c.candidatePair.push(h.candidatePair) : h.transportStats ? this.codeBase !== j.codeBaseType.firefox ? (parseInt(h.transportStats.bytesReceived, 10) > 0 || parseInt(h.transportStats.bytesSent, 10) > 0) && (c.transportStats.push(h.transportStats),\n                        \"true\" !== h.transportStats.googActiveConnection && !0 !== h.transportStats.googActiveConnection || (c.activeConnectionIndex = h.transportStats.length)) : \"true\" !== h.transportStats.selected && !0 !== h.transportStats.selected || (c.transportStats.push(h.transportStats),\n                        c.activeConnectionIndex = h.transportStats.length) : h.bwe ? c.bwe = h.bwe : h.trackStats ? c.trackStats.push(h.trackStats) : h.codec ? c.codec.push(h.codec) : h.localCandidate ? d[h.localCandidate.id] = h.localCandidate : h.remoteCandidate && (e[h.remoteCandidate.id] = h.remoteCandidate);\n                    }\n                    if (c.tracks) {\n                        var i = l.Registry.getConferenceManager().getConferenceForPcHash(b), k = void 0;\n                        i && (k = i.getPeerConnectionManager().getPcHandlerByHash(b)), c.tracks.forEach(function(a) {\n                            var b = k.getSSRCInfo(a.data.ssrc);\n                            void 0 !== b && b.localStartTime || k && (k.updateSDP(c.tracks), b = k.getSSRCInfo(a.data.ssrc)),\n                            b && (a.cname = b.cname, a.msid = b.msid, a.associatedVideoTag = b.associatedVideoTag,\n                            a.usageLabel = b.usageLabel);\n                        });\n                    }\n                    return c.transportStats && this.codeBase === j.codeBaseType.firefox && (c.transportStats = this.getAddressInfoFromCandidates(c.transportStats, d, e)),\n                    c;\n                }\n            }, {\n                key: \"getParsedStats\",\n                value: function(a) {\n                    var b = {};\n                    if (a.timestamp instanceof Date && (b.timestamp = a.timestamp.getTime().toString()),\n                    a.type && (b.type = a.type), a.names) {\n                        for (var c = a.names(), d = 0; d < c.length; ++d) b[c[d]] = a.stat(c[d]);\n                        a.id && (b.id = a.id);\n                    } else Object.assign(b, a);\n                    if (b.values) {\n                        for (var e = 0; e < b.values.length; ++e) Object.assign(b, b.values[e]);\n                        delete b.values;\n                    }\n                    return b;\n                }\n            }, {\n                key: \"statsClassifier\",\n                value: function(a) {\n                    var b = {}, c = function() {\n                        for (var b = arguments.length, c = Array(b), d = 0; d < b; d++) c[d] = arguments[d];\n                        return -1 !== c.indexOf(a.type);\n                    }, d = c(\"inbound-rtp\", \"inboundrtp\", \"remote-inbound-rtp\"), e = c(\"outbound-rtp\", \"outboundrtp\", \"remote-outbound-rtp\"), f = a.isRemote ? \"true\" === a.isRemote || !0 === a.isRemote : null;\n                    return null === f && (f = c(\"remote-inbound-rtp\", \"remote-outbound-rtp\")), d || e ? (b.tracks = {},\n                    b.tracks.data = a, b.tracks.ssrc = a.ssrc, b.tracks.streamType = d ? \"inbound\" : \"outbound\",\n                    b.tracks.reportType = f ? \"remote\" : \"local\") : c(\"candidatepair\") && a.selected ? b.transportStats = a : c(\"localcandidate\", \"local-candidate\") ? b.localCandidate = a : c(\"remotecandidate\", \"remote-candidate\") ? b.remoteCandidate = a : c(\"transport\", \"googCandidatePair\") ? b.transportStats = a : c(\"VideoBwe\") ? b.bwe = a : c(\"track\") ? b.trackStats = a : c(\"candidate-pair\") ? b.candidatePair = a : c(\"codec\") ? b.codec = a : c(\"ssrc\") && (b.tracks = {},\n                    b.tracks.data = a, b.tracks.ssrc = a.ssrc, b.tracks.reportType = \"local\", b.tracks.streamType = a.bytesSent ? \"outbound\" : \"inbound\"),\n                    b;\n                }\n            }, {\n                key: \"getAddressInfoFromCandidates\",\n                value: function(a, b, c) {\n                    for (var d = void 0, e = void 0, f = 0; f < a.length; f++) d = b[a[f].localCandidateId],\n                    e = c[a[f].remoteCandidateId], d && e && (a[f].localAddr = d.ipAddress + \":\" + d.portNumber,\n                    a[f].remoteAddr = e.ipAddress + \":\" + e.portNumber, a[f].localAddrType = d.candidateType,\n                    a[f].remoteAddrType = e.candidateType, a[f].transportType = d.transport);\n                    return a;\n                }\n            }, {\n                key: \"getTransportHash\",\n                value: function(a) {\n                    var b = void 0;\n                    return a && (this.codeBase === j.codeBaseType.chrome ? a.googLocalAddress ? (b = a.googLocalAddress,\n                    b.concat(\":\", a.googRemoteAddress)) : a.selectedCandidatePairId && (b = a.selectedCandidatePairId) : this.codeBase === j.codeBaseType.firefox && (b = a.localAddr,\n                    b.concat(\":\", a.remoteAddr))), n.generateHash(b);\n                }\n            }, {\n                key: \"backFillTrackStats\",\n                value: function(a) {\n                    for (var b = a.tracks.length, c = void 0, d = void 0, e = void 0, f = 0; f < b; f++) c = a.tracks[f],\n                    c.data.trackId && (d = this.getStatsForId(a.trackStats, c.data.trackId)) && (a.tracks[f].data = this.mergeObjects(a.tracks[f].data, d)),\n                    c.data.codecId && (e = this.getStatsForId(a.codec, c.data.codecId)) && (a.tracks[f].data = this.mergeObjects(a.tracks[f].data, e));\n                    return a;\n                }\n            }, {\n                key: \"backFillCandidatePairStats\",\n                value: function(a) {\n                    for (var b = a.transportStats.length, c = void 0, d = void 0, e = 0; e < b; e++) d = a.transportStats[e],\n                    d.selectedCandidatePairId && (c = this.getStatsForId(a.candidatePair, d.selectedCandidatePairId)) && (a.transportStats[e] = this.mergeObjects(a.transportStats[e], c));\n                    return a;\n                }\n            }, {\n                key: \"mergeObjects\",\n                value: function(a, b) {\n                    for (var c in b) b.hasOwnProperty(c) && \"id\" !== c && \"type\" !== c && (a[c] = b[c]);\n                    return a;\n                }\n            }, {\n                key: \"getStatsForId\",\n                value: function(a, b) {\n                    if (a) {\n                        var c = a.filter(function(a) {\n                            return a.id === b;\n                        });\n                        if (c.length > 0) return c[0];\n                    }\n                }\n            }, {\n                key: \"formatRelayType\",\n                value: function(a) {\n                    var b = \"None\";\n                    switch (a) {\n                      case 0:\n                        b = \"TURN/TLS\";\n                        break;\n\n                      case 1:\n                        b = \"TURN/TCP\";\n                        break;\n\n                      case 2:\n                        b = \"TURN/UDP\";\n                    }\n                    return b;\n                }\n            }, {\n                key: \"getRelayType\",\n                value: function(a, b) {\n                    var c = this, d = void 0, e = function(b) {\n                        if (b.typePreference) {\n                            var e = b.typePreference >> 24;\n                            return \"rtp\" === b.protocol && b.address === a && (e >= 0 && e <= 2 && (d = c.formatTypePreference(e)),\n                            !0);\n                        }\n                        return !1;\n                    };\n                    return b.getIceCandidates().some(e), d;\n                }\n            }, {\n                key: \"getTransportInfo\",\n                value: function(a, b) {\n                    for (var c = {}, d = !1, e = 0; e < a.length; e++) {\n                        var f = a[e];\n                        if (navigator.mozGetUserMedia && \"candidatepair\" === f.type && (\"true\" === f.selected || !0 === f.selected)) {\n                            c.foundActive = !0, c.localAddr = f.localAddr, c.remoteAddr = f.remoteAddr, c.localAddrType = f.localAddrType,\n                            c.remoteAddrType = f.remoteAddrType, c.transportType = f.transportType, c.localCandidateId = f.localCandidateId,\n                            c.remoteCandidateId = f.remoteCandidateId;\n                            break;\n                        }\n                        if (\"googCandidatePair\" === f.type && (\"true\" === f.googActiveConnection || !0 === f.googActiveConnection)) {\n                            c.foundActive = !0, c.localAddr = f.googLocalAddress, c.remoteAddr = f.googRemoteAddress,\n                            c.localAddrType = f.googLocalCandidateType, c.remoteAddrType = f.googRemoteCandidateType,\n                            c.transportType = f.googTransportType;\n                            break;\n                        }\n                        if (\"transport\" === f.type) {\n                            d = !0, f.selectedCandidatePairId && (c.selectedCandidatePairId = f.selectedCandidatePairId);\n                            break;\n                        }\n                    }\n                    return d && c.localAddr && (c.ipv6 = 0 === c.localAddr.indexOf(\"[\"), c.relayType = getRelayType(c.localAddr, b)),\n                    c;\n                }\n            }, {\n                key: \"sendFabricTransportSwitch\",\n                value: function(a, b) {\n                    a.sendFabricTransportSwitch(b);\n                }\n            }, {\n                key: \"checkTransportStatsUpdates\",\n                value: function(a, b) {\n                    var c = l.Registry.getConferenceManager().getConferenceForPcHash(b);\n                    if (c) {\n                        var d = c.getPeerConnectionManager().getPcHandlerByHash(b);\n                        if (d) {\n                            var e = this.getTransportInfo(a, d), f = d.getTransportInfo();\n                            f && (f.localAddr === e.localAddr && f.remoteAddr === e.remoteAddr && f.transportType === e.transportType && f.selectedCandidatePairId === e.selectedCandidatePairId && f.localCandidateId === e.localCandidateId && f.remoteCandidateId === e.remoteCandidateId || (d.setTransportInfo(e),\n                            this.sendFabricTransportSwitch(d, e.relayType)));\n                        }\n                    }\n                }\n            } ]), b;\n        }(k.Component);\n        c.StatsAdapter = p;\n    }, {\n        \"../collections/component\": 26,\n        \"../config/constants\": 33,\n        \"../utility/hash\": 92,\n        \"../utility/registry\": 95\n    } ],\n    70: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function e(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function f(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.StatsAssembler = c.StatsAssemblerIO = void 0;\n        var g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = a(\"../collections/component\"), i = c.StatsAssemblerIO = {\n            StatsTupleIn: \"StatsTupleIn\",\n            CallstatsOut: \"CallstatsOut\"\n        }, j = function(a) {\n            function b() {\n                d(this, b);\n                var a = e(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, \"StatsAssembler\"));\n                return a.pcHashes = [], a.bindPort(i.StatsTupleIn, a.receiveStats, a), a.declarePort(i.CallstatsOut),\n                a;\n            }\n            return f(b, a), g(b, [ {\n                key: \"receiveStats\",\n                value: function(a) {\n                    for (var b = this, c = 0; c < a.tracks.length; c++) {\n                        (function(c) {\n                            var d = a.tracks[c];\n                            if (b.pcHashes.find(function(a) {\n                                return a === d.pcHash;\n                            })) return \"continue\";\n                            b.pcHashes.push(d.pcHash);\n                        })(c);\n                    }\n                    for (var d = a.getTransportStats(), c = 0; c < this.pcHashes.length; c++) {\n                        var e = this.pcHashes[c], f = {};\n                        f.codec = a.getCodec(), f.trackStats = a.getTrackStats(), f.tracks = [];\n                        for (var g = 0; g < a.tracks.length; g++) {\n                            var h = a.tracks[g];\n                            h.pcHash === e && f.tracks.push(h);\n                        }\n                        var j = d.get(e);\n                        1 == j.length ? f.Transport = j[0] : f.Transport = j, this.transmit(i.CallstatsOut, e, f);\n                    }\n                }\n            } ]), b;\n        }(h.Component);\n        c.StatsAssembler = j;\n    }, {\n        \"../collections/component\": 26\n    } ],\n    71: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.StatsCallbackBuilder = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"../utility/registry\"), g = function() {\n            function a() {\n                d(this, a), this.callback = null;\n            }\n            return e(a, [ {\n                key: \"setCallback\",\n                value: function(a) {\n                    this.callback = a;\n                }\n            }, {\n                key: \"buildStats\",\n                value: function(a, b) {\n                    this.callback && this.buildFromUnifiedFormat(a, b);\n                }\n            }, {\n                key: \"getConnectionState\",\n                value: function() {\n                    return !0 === navigator.onLine ? \"online\" : \"offline\";\n                }\n            }, {\n                key: \"buildConferenceUrl\",\n                value: function(a) {\n                    var b = a.getConferenceId(), c = f.Registry.getConferenceManager().get(b);\n                    return c ? c.getUrl() : null;\n                }\n            }, {\n                key: \"buildFromUnifiedFormat\",\n                value: function(a, b) {\n                    var c = {};\n                    c.connectionState = this.getConnectionState(), c.conferenceURL = this.buildConferenceUrl(b),\n                    c.fabricState = b.getPcState(), c.streams = {}, c.mediaStreamTracks = [];\n                    for (var d = 0; d < a.length; d++) {\n                        var e = a[d];\n                        if (\"inbound-rtp\" === e.type || \"outbound-rtp\" === e.type || \"ssrc\" === e.type || \"inboundrtp\" === e.type || \"outboundrtp\" === e.type) {\n                            var f = {\n                                ssrc: e.ssrc,\n                                statsType: e.type,\n                                fractionLoss: e.csioIntFL,\n                                bitrate: e.csioIntBRKbps,\n                                quality: e.csioMark,\n                                mediaType: e.csioMediaType,\n                                jitter: e.jitter,\n                                audioOutputLevel: e.audioOutputLevel,\n                                audioIntputLevel: e.audioInputLevel,\n                                audioLevel: e.audioLevel,\n                                averageRTT: e.csioAvgRtt,\n                                averageJitter: e.csioAvgJitter,\n                                packetLossPercentage: e.csioPktLossPercentage,\n                                rtt: e.roundTripTime,\n                                packetRate: e.csioIntPR,\n                                remoteUserID: b.getRemoteId()\n                            }, g = b.getSSRCInfo(e.ssrc + \"\");\n                            if (g && (f.cname = g.cname, f.msid = g.msid, f.usageLabel = g.usageLabel, f.associatedVideoTag = g.associatedVideoTag),\n                            e.hasOwnProperty(\"googRtt\") && (f.rtt = e.googRtt), e.hasOwnProperty(\"mozRtt\") && (f.rtt = e.mozRtt),\n                            e.hasOwnProperty(\"googJitterReceived\") && (f.jitter = e.googJitterReceived), \"inboundrtp\" === f.statsType) f.statsType = \"inbound-rtp\"; else if (\"outboundrtp\" === f.statsType) f.statsType = \"outbound-rtp\"; else if (\"ssrc\" === f.statsType) {\n                                var h = e.id;\n                                h.indexOf(\"send\") > 0 ? f.statsType = \"outbound-rtp\" : f.statsType = \"inbound-rtp\";\n                            }\n                            \"remote-inbound-rtp\" !== f.statsType && \"remote-outbound-rtp\" !== f.statsType && (!0 !== e.isRemote && \"true\" !== e.isRemote || (f.statsType = \"remote-\" + f.statsType)),\n                            c.streams[e.ssrc] = f, c.mediaStreamTracks.push(f);\n                        }\n                    }\n                    this.callback(c);\n                }\n            } ]), a;\n        }();\n        c.StatsCallbackBuilder = g;\n    }, {\n        \"../utility/registry\": 95\n    } ],\n    72: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function f(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function g(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.StatsMonitor = c.StatsMonitorIO = void 0;\n        var h = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), i = a(\"../collections/component\"), j = a(\"./tracksmonitor\"), k = a(\"./transportsmonitor\"), l = a(\"./statstuple\"), m = a(\"../utility/registry\"), n = a(\"./monitorhooks/sendingtrigger\"), o = a(\"./monitorhooks/onewaymediaobserver\"), p = a(\"./monitorhooks/throughputobserver\"), q = a(\"./monitorhooks/cpulimitationobserver\"), r = a(\"./monitorhooks/qpsumobserver\"), s = a(\"../config/constants\"), t = d(s), u = a(\"../utility/csiologger\"), v = d(u), w = c.StatsMonitorIO = {\n            PcStatsTupleIn: \"PcStatsTupleIn\",\n            StatsTupleOut: \"StatsTupleOut\"\n        }, x = function(a) {\n            function b(a) {\n                e(this, b);\n                var c = f(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, \"StatsMonitor\"));\n                return c.bindPort(w.PcStatsTupleIn, c.receive, c), c.declarePort(w.StatsTupleOut),\n                c.lastPcStats = null, c.lastPcHash = null, c.tracksmonitor = new j.TracksMonitor(),\n                c.transportsmonitor = new k.TransportsMonitor(a), c.candidatepairs = new Map(),\n                c.monitorhooks = [], c.sendingTrigger = new n.SendingTrigger(c.sendStatsTuple.bind(c)),\n                c.oneWayMediaObserver = new o.OneWayMediaObserver(c.sendDisruptions.bind(c)), c.throughputObserver = new p.ThroughputObserver(c.sendThroughputObservations.bind(c)),\n                c.cpuLimitationObserver = new q.CPULimitationObserver(c.sendCPULimitationObservations.bind(c)),\n                c.qpSumObserver = new r.QPSumObserver(c.sendQPSumDistortions.bind(c)), c.setupHooks(),\n                c;\n            }\n            return g(b, a), h(b, [ {\n                key: \"setupHooks\",\n                value: function() {\n                    this.monitorhooks.push(this.sendingTrigger.accept.bind(this.sendingTrigger)), this.monitorhooks.push(this.oneWayMediaObserver.accept.bind(this.oneWayMediaObserver)),\n                    this.monitorhooks.push(this.throughputObserver.accept.bind(this.throughputObserver)),\n                    this.monitorhooks.push(this.cpuLimitationObserver.accept.bind(this.cpuLimitationObserver)),\n                    this.monitorhooks.push(this.qpSumObserver.accept.bind(this.qpSumObserver));\n                }\n            }, {\n                key: \"setIntervals\",\n                value: function(a, b) {\n                    this.sendingTrigger.setup(a, b);\n                }\n            }, {\n                key: \"receive\",\n                value: function(a) {\n                    var b = a.getPcHash(), c = a.getMeasurements();\n                    this.candidatepairs.set(b, a.getCandidatePair()), this.transportsmonitor.set(b, a.getTransportStats());\n                    for (var d = 0; d < c.length; d++) {\n                        var e = c[d], f = this.tracksmonitor.getMonitor(e);\n                        f ? f.add(e) : v.warn(\"No monitor for ssrc \" + e.getSSRC());\n                    }\n                    this.lastPcStats = a, this.lastPcHash = b;\n                    for (var g = this.tracksmonitor.getMonitors(), h = this.monitorhooks, i = 0; i < h.length; i++) {\n                        (0, h[i])(g);\n                    }\n                }\n            }, {\n                key: \"getCandidatePairs\",\n                value: function() {\n                    var a = [];\n                    return this.candidatepairs.forEach(function(b, c) {\n                        var d = [ c, b ];\n                        a.push(d);\n                    }), a;\n                }\n            }, {\n                key: \"sendStatsTuple\",\n                value: function() {\n                    var a = new l.StatsTuple(this.getCandidatePairs(), this.lastPcStats.getCodec(), this.lastPcStats.getTrackStats(), this.transportsmonitor.getIntervalStats(), this.tracksmonitor.extractTracks());\n                    this.transmit(w.StatsTupleOut, a);\n                }\n            }, {\n                key: \"sendDisruptions\",\n                value: function(a) {\n                    var b = this;\n                    a.forEach(function(a) {\n                        b.sendEventMsg(t.internalFabricEvent.oneWayMedia, a.getContent());\n                    });\n                }\n            }, {\n                key: \"sendCPULimitationObservations\",\n                value: function(a) {}\n            }, {\n                key: \"sendQPSumDistortions\",\n                value: function(a) {}\n            }, {\n                key: \"sendThroughputObservations\",\n                value: function(a) {\n                    this.sendEventMsg(t.internalFabricEvent.sendingThroughputObservations, a);\n                }\n            }, {\n                key: \"sendEventMsg\",\n                value: function(a, b) {\n                    if (this.lastPcHash) {\n                        var c = m.Registry.getConferenceManager().getConferenceForPcHash(this.lastPcHash);\n                        if (c) {\n                            var d = c.getPeerConnectionManager().getPcHandlerByHash(this.lastPcHash), e = d.getPeerConnection(), f = d.getConferenceId();\n                            m.Registry.getEventMessageBuilder().make(a, f, e, b);\n                        }\n                    }\n                }\n            } ]), b;\n        }(i.Component);\n        c.StatsMonitor = x;\n    }, {\n        \"../collections/component\": 26,\n        \"../config/constants\": 33,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"./monitorhooks/cpulimitationobserver\": 61,\n        \"./monitorhooks/onewaymediaobserver\": 62,\n        \"./monitorhooks/qpsumobserver\": 63,\n        \"./monitorhooks/sendingtrigger\": 64,\n        \"./monitorhooks/throughputobserver\": 65,\n        \"./statstuple\": 75,\n        \"./tracksmonitor\": 81,\n        \"./transportsmonitor\": 82\n    } ],\n    73: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function f(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function g(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.StatsParser = c.StatsParserIO = void 0;\n        var h = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), i = a(\"../collections/component\"), j = a(\"./measurement\"), k = a(\"./pcstats\"), l = a(\"../utility/rttregistry\"), m = a(\"./validator\"), n = d(m), o = a(\"../config/constants\"), p = d(o), q = a(\"../utility/csiologger\"), r = d(q), s = c.StatsParserIO = {\n            RawStatsIn: \"RawStatsIn\",\n            PcStatsTupleOut: \"PcStatsTupleOut\"\n        }, t = function(a) {\n            function b() {\n                e(this, b);\n                var a = f(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, \"StatsParser\"));\n                return a.bindPort(s.RawStatsIn, a.receive, a), a.declarePort(s.PcStatsTupleOut),\n                a;\n            }\n            return g(b, a), h(b, [ {\n                key: \"receive\",\n                value: function(a) {\n                    if (null === a) return void r.warn(\"Stats object can not be null\");\n                    for (var b = a.tracks, c = [], d = 0; d < b.length; ++d) {\n                        var e = b[d];\n                        if (e && e.data) {\n                            var f = j.Measurement.make(a.pcHash, this.getSSRC(e), this.getStreamType(e), this.getMediaType(e), this.getFrameRateReceived(e), this.getFrameHeight(e), this.getFrameWidth(e), this.getDroppedFramesNum(e), this.getFramesReceived(e), this.getRTT(e), this.getJitter(e), this.getLostPackets(e), this.getReceivedPackets(e), this.getSentPackets(e), this.getDiscardedPackets(e), this.getSentBytes(e), this.getReceivedBytes(e), e);\n                            c.push(f);\n                        } else r.log(\"No track or track.data.\");\n                    }\n                    var g = new k.PcStats(a.candidatePair, a.codec, a.pcHash, a.trackStats, a.transportStats, c);\n                    this.transmit(s.PcStatsTupleOut, g);\n                }\n            }, {\n                key: \"getSSRC\",\n                value: function(a) {\n                    return a.ssrc;\n                }\n            }, {\n                key: \"getStreamType\",\n                value: function(a) {\n                    return a.streamType === p.streamType.inbound ? p.streamType.inbound : a.streamType === p.streamType.outbound ? p.streamType.outbound : void 0;\n                }\n            }, {\n                key: \"getSentBytes\",\n                value: function(a) {\n                    if (void 0 === a.data.bytesSent) return -1;\n                    var b = n.checkForNan(parseInt(a.data.bytesSent, 10));\n                    return null !== b ? b : -1;\n                }\n            }, {\n                key: \"getReceivedBytes\",\n                value: function(a) {\n                    if (void 0 === a.data.bytesReceived) return -1;\n                    var b = n.checkForNan(parseInt(a.data.bytesReceived, 10));\n                    return null !== b ? b : -1;\n                }\n            }, {\n                key: \"getReceivedPackets\",\n                value: function(a) {\n                    if (void 0 === a.data.packetsReceived) return -1;\n                    var b = n.checkForNegativeValue(parseInt(a.data.packetsReceived, 10));\n                    return null !== b ? b : -1;\n                }\n            }, {\n                key: \"getSentPackets\",\n                value: function(a) {\n                    if (void 0 === a.data.packetsSent) return -1;\n                    var b = n.checkForNegativeValue(parseInt(a.data.packetsSent, 10));\n                    return null !== b ? b : -1;\n                }\n            }, {\n                key: \"getDiscardedPackets\",\n                value: function(a) {\n                    if (void 0 === a.data.discardedPackets) return -1;\n                    var b = n.checkForNan(parseInt(a.data.discardedPackets, 10));\n                    return null !== b ? b : -1;\n                }\n            }, {\n                key: \"getLostPackets\",\n                value: function(a) {\n                    if (void 0 === a.data.packetsLost) return -1;\n                    var b = n.checkForNegativeValue(parseInt(a.data.packetsLost, 10));\n                    return null !== b ? b : -1;\n                }\n            }, {\n                key: \"getDroppedFramesNum\",\n                value: function(a) {\n                    if (void 0 === a.data.droppedFrames) return -1;\n                    var b = n.checkForNegativeValue(parseInt(a.data.droppedFrames, 10));\n                    return null !== b ? b : -1;\n                }\n            }, {\n                key: \"getFramesReceived\",\n                value: function(a) {\n                    if (void 0 === a.data.framesReceived) return -1;\n                    var b = n.checkForNegativeValue(parseInt(a.data.framesReceived, 10));\n                    return null !== b ? b : -1;\n                }\n            }, {\n                key: \"getFrameRateReceived\",\n                value: function(a) {\n                    var b = null;\n                    return void 0 !== a.data.googFrameRateOutput ? b = parseInt(a.data.googFrameRateOutput, 10) : void 0 !== a.data.googFrameRateDecoded ? b = parseInt(a.data.googFrameRateDecoded, 10) : void 0 !== a.data.googFrameRateReceived ? b = parseInt(a.data.googFrameRateReceived, 10) : void 0 !== a.data.googFrameRateSent ? b = parseInt(a.data.googFrameRateSent, 10) : void 0 !== a.data.framerateMean ? b = parseInt(a.data.framerateMean, 10) : void 0 !== a.data.framesPerSecond && (b = parseInt(a.data.framesPerSecond, 10)),\n                    void 0 !== b && (b = n.checkForNegativeValue(b)), b;\n                }\n            }, {\n                key: \"getFrameHeight\",\n                value: function(a) {\n                    var b = void 0;\n                    return void 0 !== a.data.googFrameHeightReceived ? b = a.data.googFrameHeightReceived : void 0 !== a.data.googFrameHeightSent ? b = a.data.googFrameHeightSent : void 0 !== a.data.frameHeight && (b = a.data.frameHeight),\n                    b;\n                }\n            }, {\n                key: \"getJitter\",\n                value: function(a) {\n                    return void 0 !== a.data.googJitterReceived ? n.checkForNan(parseFloat(a.data.googJitterReceived, 10)) : void 0 !== a.data.jitter ? n.checkForNan(parseFloat(a.data.jitter, 10)) : void 0;\n                }\n            }, {\n                key: \"getFrameWidth\",\n                value: function(a) {\n                    return void 0 !== a.data.googFrameWidthReceived ? a.data.googFrameWidthReceived : void 0 !== a.data.googFrameWidthSent ? a.data.googFrameWidthSent : void 0 !== a.data.frameWidth ? a.data.frameWidth : void 0;\n                }\n            }, {\n                key: \"getRTT\",\n                value: function(a) {\n                    var b = function(a) {\n                        return isNaN(a) || a < 0 ? null : a;\n                    };\n                    if (void 0 !== a.data.googRtt) return b(parseFloat(a.data.googRtt, 10));\n                    if (void 0 !== a.data.mozRtt) return b(parseFloat(a.data.mozRtt, 10));\n                    if (a.data.roundTripTime) return b(parseFloat(a.data.roundTripTime, 10));\n                    var c = this.getSSRC(a), d = (0, l.getRTTRegistry)().getRTT(c);\n                    return d && (a.data.roundTripTime = d), d;\n                }\n            }, {\n                key: \"getMediaType\",\n                value: function(a) {\n                    var b = p.mediaType.unknown;\n                    return a.data && void 0 !== a.data.mediaType ? a.data.mediaType : (void 0 !== a.data.googFrameRateReceived || void 0 !== a.data.googFrameRateSent ? b = p.mediaType.video : void 0 !== a.data.audioInputLevel || void 0 !== a.data.audioOutputLevel ? b = p.mediaType.audio : a.data.mediaType ? b = a.data.mediaType : void 0 !== a.data.framerateMean && (b = p.mediaType.video),\n                    b);\n                }\n            } ]), b;\n        }(i.Component);\n        c.StatsParser = t;\n    }, {\n        \"../collections/component\": 26,\n        \"../config/constants\": 33,\n        \"../utility/csiologger\": 88,\n        \"../utility/rttregistry\": 96,\n        \"./measurement\": 60,\n        \"./pcstats\": 67,\n        \"./validator\": 83\n    } ],\n    74: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function f(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function g(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.StatsTransmitter = c.StatsTransmitterIO = void 0;\n        var h = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), i = a(\"../collections/component\"), j = a(\"../utility/registry\"), k = a(\"../config/constants\"), l = d(k), m = a(\"../utility/csiologger\"), n = d(m), o = c.StatsTransmitterIO = {\n            CallstatsIn: \"CallstatsIn\",\n            UnprocessedIn: \"UnprocessedIn\"\n        }, p = function(a) {\n            function b() {\n                e(this, b);\n                var a = f(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, \"StatsTransmitter\"));\n                return a.battery = j.Registry.getBattery(), a.lastUnprocessedStats = {}, a.bindPort(o.CallstatsIn, a.receiveCallstats, a),\n                a.bindPort(o.UnprocessedIn, a.receiveUnprocessed, a), a;\n            }\n            return g(b, a), h(b, [ {\n                key: \"receiveUnprocessed\",\n                value: function(a, b) {\n                    this.lastUnprocessedStats[b] = a;\n                }\n            }, {\n                key: \"receiveCallstats\",\n                value: function(a, b) {\n                    var c = null;\n                    if (!(c = this.getUnifiedFormat(b, a))) return void n.warn(\"Content can not be sent\");\n                    this.send(a, c);\n                }\n            }, {\n                key: \"send\",\n                value: function(a, b) {\n                    var c = j.Registry.getConferenceManager().getConferenceForPcHash(a);\n                    if (c) {\n                        var d = c.getPeerConnectionManager().getPcHandlerByHash(a);\n                        if (d) {\n                            var e = d.getPcState();\n                            if (e !== l.fabricState.terminated && e !== l.fabricState.hold) {\n                                j.Registry.getEventMessageBuilder().make(l.callstatsChannels.processedStats, d.getConferenceId(), d.getPeerConnection(), b),\n                                this.sendToStatsCallback(b.stats, d);\n                            }\n                        }\n                    }\n                }\n            }, {\n                key: \"sendToStatsCallback\",\n                value: function(a, b) {\n                    var c = j.Registry.getStatsCallbackBuilder();\n                    c && c.buildStats(a, b);\n                }\n            }, {\n                key: \"getUnifiedFormat\",\n                value: function(a, b) {\n                    for (var c = this.lastUnprocessedStats[b], d = [], e = 0; e < c.length; e++) {\n                        var f = c[e], g = {};\n                        if (f.id && (g.id = f.id), f.timestamp && (g.timestamp = f.timestamp), f.type && (g.type = f.type),\n                        f.names) for (var h = f.names(), i = 0; i < h.length; ++i) g[h[i]] = f.stat(h[i]); else Object.assign(g, f);\n                        if (g.values) {\n                            for (var k = 0; k < g.values.length; ++k) Object.assign(g, g.values[k]);\n                            delete g.values;\n                        }\n                        var l = function(b) {\n                            for (var c = 0; c < a.tracks.length; c++) {\n                                var d = a.tracks[c];\n                                if (d.data.id === b.id && d.data.type === b.type) return d.data;\n                            }\n                            return b.id === a.Transport.id && b.type === a.Transport.type ? a.Transport : null;\n                        }(f);\n                        if (l) {\n                            for (var m in l) if (l.hasOwnProperty(m)) {\n                                if (\"id\" === m || \"type\" === m || \"timestamp\" === m) continue;\n                                g[m] = l[m];\n                            }\n                            d.push(g);\n                        } else d.push(g);\n                    }\n                    var n = {\n                        stats: d\n                    };\n                    return n.wifiStats = j.Registry.getWifiStatsExecutor().getWifiStats(), n.batteryStatus = {},\n                    n.batteryStatus.batteryLevel = this.battery.getLevel(), n.batteryStatus.isBatteryCharging = this.battery.getCharging(),\n                    n;\n                }\n            } ]), b;\n        }(i.Component);\n        c.StatsTransmitter = p;\n    }, {\n        \"../collections/component\": 26,\n        \"../config/constants\": 33,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95\n    } ],\n    75: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a(b, c, e, f, g) {\n                d(this, a), this.candidatePairs = b, this.codec = c, this.trackStats = e, this.transportStats = f,\n                this.tracks = g;\n            }\n            return e(a, [ {\n                key: \"getCandidatePairs\",\n                value: function() {\n                    return this.candidatePairs;\n                }\n            }, {\n                key: \"getCodec\",\n                value: function() {\n                    return this.codec;\n                }\n            }, {\n                key: \"getTrackStats\",\n                value: function() {\n                    return this.trackStats;\n                }\n            }, {\n                key: \"getTransportStats\",\n                value: function() {\n                    return this.transportStats;\n                }\n            }, {\n                key: \"getTracks\",\n                value: function() {\n                    return this.tracks;\n                }\n            } ]), a;\n        }();\n        c.StatsTuple = f;\n    }, {} ],\n    76: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function e(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function f(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.SWAvg = void 0;\n        var g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = a(\"./swplugin\"), i = function(a) {\n            function b(a, c) {\n                var f = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;\n                d(this, b);\n                var g = e(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a, c, f));\n                return g.sum = 0, g.counter = 0, g;\n            }\n            return f(b, a), g(b, [ {\n                key: \"add\",\n                value: function(a) {\n                    this.filter(a) && (this.sum += this.extract(a), ++this.counter, this.calculate());\n                }\n            }, {\n                key: \"remove\",\n                value: function(a) {\n                    this.filter(a) && (this.sum -= this.extract(a), --this.counter, this.calculate());\n                }\n            }, {\n                key: \"calculate\",\n                value: function() {\n                    var a = 0;\n                    if (this.counter < 1) return void this.notify(a);\n                    a = this.sum / this.counter, this.notify(a);\n                }\n            } ]), b;\n        }(h.SWPlugin);\n        c.SWAvg = i;\n    }, {\n        \"./swplugin\": 79\n    } ],\n    77: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function e(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function f(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.SWBTreePercentile = void 0;\n        var g = function() {\n            function a(a, b) {\n                var c = [], d = !0, e = !1, f = void 0;\n                try {\n                    for (var g, h = a[Symbol.iterator](); !(d = (g = h.next()).done) && (c.push(g.value),\n                    !b || c.length !== b); d = !0) ;\n                } catch (a) {\n                    e = !0, f = a;\n                } finally {\n                    try {\n                        !d && h.return && h.return();\n                    } finally {\n                        if (e) throw f;\n                    }\n                }\n                return c;\n            }\n            return function(b, c) {\n                if (Array.isArray(b)) return b;\n                if (Symbol.iterator in Object(b)) return a(b, c);\n                throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n            };\n        }(), h = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), i = a(\"./swplugin\"), j = a(\"../../collections/binarytree\"), k = function(a) {\n            function b(a, c, f, g) {\n                var h = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null, i = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : null, k = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : null;\n                d(this, b);\n                var l = e(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, f, g, i));\n                if (99 < a || a < 1) throw new RangeError(\"Percentile parameter must be between 1 and 99\");\n                return l.comparator = c, l.percentile = a, l.meanCalcer = k, l.estimator = h, l.ratio = a / (100 - a),\n                l.maxtree = new j.BinaryTree(c), l.mintree = new j.BinaryTree(c), l.ratio < 1 ? l.required = 1 / l.ratio + 1 : 1 < l.ratio ? l.required = l.ratio + 1 : l.required = 2,\n                l.result = null, l;\n            }\n            return f(b, a), h(b, [ {\n                key: \"add\",\n                value: function(a) {\n                    if (this.filter(a)) {\n                        if (this.maxtree.getNodeCounter() < 1) return this.maxtree.insert(a), void this.calculate();\n                        this.comparator(a, this.maxtree.getTopValue()) <= 0 ? this.maxtree.insert(a) : this.mintree.insert(a),\n                        this.balancing(), this.calculate();\n                    }\n                }\n            }, {\n                key: \"remove\",\n                value: function(a) {\n                    if (this.filter(a)) {\n                        var b = this.mintree.getNodeCounter();\n                        this.maxtree.getNodeCounter() < 1 ? this.mintree.delete(a) : b < 1 ? this.maxtree.delete(a) : this.comparator(a, this.maxtree.getTopValue()) <= 0 ? this.maxtree.delete(a) : this.mintree.delete(a),\n                        this.calculate();\n                    }\n                }\n            }, {\n                key: \"getThresholds\",\n                value: function() {\n                    var a = this.mintree.getSize(), b = this.maxtree.getSize(), c = a + 1, d = b + 1;\n                    return 1 < this.ratio ? (c = Math.ceil(a * this.ratio), d = Math.floor(b / this.ratio) + 1) : this.ratio < 1 && (c = Math.floor(a * this.ratio) + 1,\n                    d = Math.ceil(b / this.ratio)), [ c, d ];\n                }\n            }, {\n                key: \"balancing\",\n                value: function() {\n                    var a = this.mintree, b = this.maxtree, c = a.getSize(), d = b.getSize();\n                    if (!(d + c < this.required)) {\n                        if (c < 1) return void a.insertNodeAtBottom(b.popTopNode());\n                        for (d < 1 && b.insertNodeAtTop(a.popBottomNode()); ;) {\n                            var e = 1 < a.getNodeCounter(), f = 1 < b.getNodeCounter(), h = a.getBottomNode().getLength(), i = b.getTopNode().getLength();\n                            if (a.getNodeCounter() < 1 || b.getNodeCounter() < 1) break;\n                            var j = this.getThresholds(), k = g(j, 2), l = k[0], m = k[1];\n                            if (f &= c + i <= m, e &= d + h <= l, c = a.getSize(), d = b.getSize(), l < d && f) a.insertNodeAtBottom(b.popTopNode()); else {\n                                if (!(m < c && e)) break;\n                                b.insertNodeAtTop(a.popBottomNode());\n                            }\n                        }\n                    }\n                }\n            }, {\n                key: \"getMean\",\n                value: function(a, b) {\n                    return this.meanCalcer ? this.meanCalcer(a, b) : a;\n                }\n            }, {\n                key: \"estimate\",\n                value: function(a, b) {\n                    return this.estimator ? this.estimator(a, b) : null;\n                }\n            }, {\n                key: \"calculate\",\n                value: function() {\n                    var a = null, b = this.mintree, c = this.maxtree, d = b.getSize(), e = c.getSize(), f = e + d;\n                    if (!(f < 1)) {\n                        if (f < this.required || d < 1 || e < 1) {\n                            if (0 == f) return;\n                            var g = void 0, h = void 0;\n                            d < 1 ? (g = this.maxtree.getBottomValue(), h = this.maxtree.getTopValue()) : e < 1 ? (g = this.mintree.getBottomValue(),\n                            h = this.mintree.getTopValue()) : (h = this.mintree.getTopValue(), g = this.maxtree.getBottomValue());\n                            var i = this.estimate(g, h);\n                            return void this.notify(i);\n                        }\n                        var j = c.getTopNode(), k = b.getBottomNode();\n                        if (j || k) {\n                            if (!j) {\n                                var l = this.extract(k);\n                                return void this.notify(l);\n                            }\n                            if (!k) {\n                                var m = this.extract(j);\n                                return void this.notify(m);\n                            }\n                            var n = f * (this.percentile / 100);\n                            if (!Number.isInteger(n)) {\n                                var o = e / d;\n                                a = this.ratio < o ? j.peek() : o < this.ratio ? k.peek() : this.ratio < 1 ? k.peek() : j.peek();\n                            } else {\n                                var p = Math.floor(n);\n                                a = Math.ceil(n + 1) <= e ? j.peek() : p <= e ? this.getMean(j.peek(), k.peek()) : k.peek();\n                            }\n                            var q = this.extract(a);\n                            this.notify(q);\n                        }\n                    }\n                }\n            } ]), b;\n        }(i.SWPlugin);\n        c.SWBTreePercentile = k;\n    }, {\n        \"../../collections/binarytree\": 23,\n        \"./swplugin\": 79\n    } ],\n    78: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function e(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function f(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.SWFunctor = void 0;\n        var g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = a(\"./swplugin\"), i = function(a) {\n            function b(a, c) {\n                var f = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;\n                d(this, b);\n                var g = e(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, null, null, f));\n                return g.addFunc = a, g.remFunc = c, g;\n            }\n            return f(b, a), g(b, [ {\n                key: \"add\",\n                value: function(a) {\n                    this.filter(a) && this.addFunc && this.addFunc(a);\n                }\n            }, {\n                key: \"remove\",\n                value: function(a) {\n                    this.filter(a) && this.remFunc && this.remFunc(a);\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    return \"SWFuncPlugin\";\n                }\n            } ]), b;\n        }(h.SWPlugin);\n        c.SWFunctor = i;\n    }, {\n        \"./swplugin\": 79\n    } ],\n    79: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.SWPlugin = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"../../utility/csiologger\"), g = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(f), h = function() {\n            function a(b, c) {\n                var e = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;\n                d(this, a), this.extractorFnc = b, this.notifierFnc = c, this.filterFunc = e;\n            }\n            return e(a, [ {\n                key: \"notify\",\n                value: function(a) {\n                    if (!this.notifierFnc) return void g.warn(\"Failed notification for \" + this.toString());\n                    this.notifierFnc(a);\n                }\n            }, {\n                key: \"extract\",\n                value: function(a) {\n                    return this.extractorFnc ? this.extractorFnc(a) : (g.warn(this.toString() + \" tried to extract without extractorFnc\"),\n                    null);\n                }\n            }, {\n                key: \"filter\",\n                value: function(a) {\n                    return !this.filterFunc || this.filterFunc(a);\n                }\n            }, {\n                key: \"add\",\n                value: function(a) {\n                    g.log(\"Abstract method is called width value: \" + a);\n                }\n            }, {\n                key: \"remove\",\n                value: function(a) {\n                    g.log(\"Abstract method is called with value: \" + a);\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    return \"SWPlugin\";\n                }\n            } ]), a;\n        }();\n        c.SWPlugin = h;\n    }, {\n        \"../../utility/csiologger\": 88\n    } ],\n    80: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!a) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            return !b || \"object\" != typeof b && \"function\" != typeof b ? a : b;\n        }\n        function f(a, b) {\n            if (\"function\" != typeof b && null !== b) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof b);\n            a.prototype = Object.create(b && b.prototype, {\n                constructor: {\n                    value: a,\n                    enumerable: !1,\n                    writable: !0,\n                    configurable: !0\n                }\n            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n        }\n        function g(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function h(a, b) {\n            return b.green <= a ? t.avQualityRatings.excellent : b.red < a ? t.avQualityRatings.fair : t.avQualityRatings.bad;\n        }\n        function i(a, b) {\n            return b.red < a ? t.avQualityRatings.bad : b.green <= a ? t.avQualityRatings.fair : t.avQualityRatings.excellent;\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.TrackMonitor = void 0;\n        var j = function a(b, c, d) {\n            null === b && (b = Function.prototype);\n            var e = Object.getOwnPropertyDescriptor(b, c);\n            if (void 0 === e) {\n                var f = Object.getPrototypeOf(b);\n                return null === f ? void 0 : a(f, c, d);\n            }\n            if (\"value\" in e) return e.value;\n            var g = e.get;\n            if (void 0 !== g) return g.call(d);\n        }, k = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), l = a(\"../utility/registry\"), m = a(\"../collections/slidingwindow\"), n = a(\"../statspipeline/swplugins/swavg\"), o = a(\"../statspipeline/swplugins/swbtreepercentile\"), p = a(\"../statspipeline/swplugins/swfunctor\"), q = a(\"../utility/timestamps\"), r = d(q), s = a(\"../config/constants\"), t = d(s), u = a(\"../utility/csiologger\"), v = d(u), w = a(\"../utility/rttregistry\"), x = function() {\n            function a() {\n                g(this, a), this.evaluators = [];\n            }\n            return k(a, [ {\n                key: \"addEvaluator\",\n                value: function(a) {\n                    var b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, c = {\n                        processFnc: a,\n                        weight: b\n                    };\n                    this.evaluators.push(c);\n                }\n            }, {\n                key: \"getQuality\",\n                value: function(a) {\n                    for (var b = 0, c = [], d = 0, e = 0; e < this.evaluators.length; e++) {\n                        var f = this.evaluators[e], g = 0, h = f.processFnc ? f.processFnc(a) : 0;\n                        if (h) {\n                            if (h === t.avQualityRatings.bad) g = t.qualityRating.bad; else if (h === t.avQualityRatings.fair) g = t.qualityRating.fair; else if (h === t.avQualityRatings.excellent) g = t.qualityRating.excellent; else if (h === t.avQualityRatings.unknown) continue;\n                            b += f.weight, c.push({\n                                result: g,\n                                weight: f.weight\n                            });\n                        }\n                    }\n                    for (var i = 0; i < c.length; i++) {\n                        var j = c[i];\n                        d += j.result * (j.weight / b);\n                    }\n                    return d = Math.floor(d), d === t.qualityRating.excellent ? t.avQualityRatings.excellent : d === t.qualityRating.good ? t.avQualityRatings.fair : d === t.qualityRating.fair ? t.avQualityRatings.fair : d === t.qualityRating.poor ? t.avQualityRatings.fair : d === t.qualityRating.bad ? t.avQualityRatings.bad : void 0;\n                }\n            } ]), a;\n        }(), y = function(a) {\n            function b(a, c, d, f) {\n                g(this, b);\n                var h = e(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a, c));\n                return h.thresholds = [], h.enableThresholds = !1, h.requestTime = 0, h.started = 0,\n                h.created = r.getCurrent(), h.mediaType = f, h.streamType = d, h.qualityHelper = new x(),\n                h.metrics = h.makeTrack(), h.lastTrack = {}, h.prevFrameRateMean = null, h.ssrc = null,\n                h.scsHelper = {\n                    total: 0,\n                    above: 0,\n                    ccDriven: 0,\n                    sumMaxBitrateDiff: 0,\n                    sumThroughputDiff: 0,\n                    prevCsioAvgBRKbps: 0\n                }, h;\n            }\n            return f(b, a), k(b, null, [ {\n                key: \"make\",\n                value: function(a, c, d, e) {\n                    var f = new b(a, c, d, e), g = f.metrics;\n                    return f.attach(new n.SWAvg(function(a) {\n                        return a.getJitter();\n                    }, function(a) {\n                        g.csioAvgJitter = a;\n                    }, function(a) {\n                        var b = a.getJitter();\n                        return null !== b && void 0 !== b;\n                    })), f.attach(new n.SWAvg(function(a) {\n                        return a.getRTT();\n                    }, function(a) {\n                        g.csioAvgRtt = a;\n                    }, function(a) {\n                        var b = a.getRTT();\n                        return null !== b && void 0 !== b;\n                    })), f.attach(new o.SWBTreePercentile(95, function(a, b) {\n                        var c = a.getJitter(), d = b.getJitter();\n                        return c == d ? 0 : c < d ? -1 : 1;\n                    }, function(a) {\n                        return a.getJitter();\n                    }, function(a) {\n                        g.csioPercentileJitter = a;\n                    }, function(a, b) {\n                        return b ? b.getJitter() : a ? a.getJitter() : void 0;\n                    }, function(a) {\n                        var b = a.getJitter();\n                        return null !== b && void 0 !== b;\n                    }, function(a, b) {\n                        return a;\n                    })), f.attach(new o.SWBTreePercentile(95, function(a, b) {\n                        var c = a.getRTT(), d = b.getRTT();\n                        return c == d ? 0 : c < d ? -1 : 1;\n                    }, function(a) {\n                        return a.getRTT();\n                    }, function(a) {\n                        g.csioSig2Latency = a, g.csioeM = a + 40;\n                    }, function(a, b) {\n                        return b ? b.getRTT() : a ? a.getRTT() : void 0;\n                    }, function(a) {\n                        var b = a.getRTT();\n                        return null !== b && void 0 !== b;\n                    }, function(a, b) {\n                        return a;\n                    })), d === t.streamType.inbound ? b.setupInboundMonitor(f) : d === t.streamType.outbound ? b.setupOutboundMonitor(f) : v.warn(\"Unrecognized streamType (\" + d + \") at TrackMonitor\"),\n                    e === t.mediaType.audio ? b.setupAudioMonitor(f) : e === t.mediaType.video ? b.setupVideoMonitor(f) : v.warn(\"Unrecognized mediaType (\" + e + \") at TrackMonitor\"),\n                    d === t.streamType.inbound && e === t.mediaType.audio ? b.setupInbAudioQualityEvaluator(f) : d === t.streamType.inbound && e === t.mediaType.video ? b.setupInbVideoQualityEvaluator(f) : d === t.streamType.outbound && e === t.mediaType.audio ? b.setupOutbAudioQualityEvaluator(f) : d === t.streamType.outbound && e === t.mediaType.video && (b.setupOutbVideoQualityEvaluator(f),\n                    b.setupSCSValidator(f)), f.addPostProcess(function(a) {\n                        g.csioMark = f.getQuality(a);\n                    }), f;\n                }\n            }, {\n                key: \"setupInbAudioQualityEvaluator\",\n                value: function(a) {\n                    var b = a.metrics;\n                    a.addQualityEvaluator(function(a) {\n                        return void 0 === b.csioIntBRKbps || null === b.csioIntBRKbps || b.csioIntBRKbps < 0 ? t.avQualityRatings.unknown : h(b.csioIntBRKbps, t.throughputThreshold.audio);\n                    }), a.addQualityEvaluator(function(a) {\n                        return void 0 === b.csioIntFL || null === b.csioIntFL || b.csioIntFL < 0 ? t.avQualityRatings.unknown : i(b.csioIntFL, t.fractionalLossThreshold.audio);\n                    }), a.addQualityEvaluator(function(a) {\n                        return void 0 === b.csioeM || null === b.csioeM ? t.avQualityRatings.unknown : i(b.csioeM, t.eModelThreshold.audio);\n                    });\n                }\n            }, {\n                key: \"setupOutbAudioQualityEvaluator\",\n                value: function(a) {\n                    var b = a.metrics;\n                    a.addQualityEvaluator(function(a) {\n                        return void 0 === b.csioIntBRKbps || null === b.csioIntBRKbps || b.csioIntBRKbps < 0 ? t.avQualityRatings.unknown : h(b.csioIntBRKbps, t.throughputThreshold.audio);\n                    }), a.addQualityEvaluator(function(a) {\n                        return void 0 === b.csioeM || null === b.csioeM ? t.avQualityRatings.unknown : i(b.csioeM, t.eModelThreshold.audio);\n                    });\n                }\n            }, {\n                key: \"setupInbVideoQualityEvaluator\",\n                value: function(a) {\n                    var b = a.metrics;\n                    a.addQualityEvaluator(function(a) {\n                        return void 0 === b.csioIntBRKbps || null === b.csioIntBRKbps || b.csioIntBRKbps < 0 ? t.avQualityRatings.unknown : h(b.csioIntBRKbps, t.throughputThreshold.video);\n                    }), a.addQualityEvaluator(function(c) {\n                        return void 0 === b.csioFrameRateMean || null === b.csioFrameRateMean ? t.avQualityRatings.unknown : b.csioFrameRateMean && a.prevFrameRateMean ? h(b.csioFrameRateMean / a.prevFrameRateMean, t.currOverPrevFrameRateThreshold.video) : t.avQualityRatings.bad;\n                    }), a.addQualityEvaluator(function(a) {\n                        return void 0 === b.csioSig2Latency || null === b.csioSig2Latency ? t.avQualityRatings.unknown : i(b.csioSig2Latency, t.rttThreshold.video);\n                    });\n                }\n            }, {\n                key: \"setupOutbVideoQualityEvaluator\",\n                value: function(a) {\n                    var b = a.metrics;\n                    a.addQualityEvaluator(function(a) {\n                        return void 0 == b.csioIntBRKbps || null == b.csioIntBRKbps ? t.avQualityRatings.unknown : h(b.csioIntBRKbps, t.throughputThreshold.video);\n                    }), a.addQualityEvaluator(function(c) {\n                        return void 0 === b.csioFrameRateMean || null === b.csioFrameRateMean ? t.avQualityRatings.unknown : b.csioFrameRateMean && a.prevFrameRateMean ? h(b.csioFrameRateMean / a.prevFrameRateMean, t.currOverPrevFrameRateThreshold.video) : t.avQualityRatings.bad;\n                    }), a.addQualityEvaluator(function(a) {\n                        return void 0 === b.csioSig2Latency || null === b.csioSig2Latency ? t.avQualityRatings.unknown : i(b.csioSig2Latency, t.rttThreshold.video);\n                    });\n                }\n            }, {\n                key: \"setupInboundMonitor\",\n                value: function(a) {\n                    var b = a.metrics;\n                    a.addPreProcess(function(c) {\n                        var d = c.getLostPackets(), e = c.getReceivedPackets(), f = a.getRequestedMeasurement(), g = 0, h = 0;\n                        f ? (g = d - f.getLostPackets(), h = e - f.getReceivedPackets()) : (g = d, h = e);\n                        var i = 0;\n                        if ((0 < g || 0 < h) && (i = g / (h + g)), b.csioIntPktLoss = g, b.csioIntFL = i,\n                        c.setFractionLost(i), !c.getFrameRateReceived() && c.getFramesReceived() && 0 < a.started) {\n                            var j = c.getFramesReceived(), k = r.getCurrent() - a.started;\n                            b.csioEstFrameRatePerSecond = 1e3 * j / k;\n                            var l = c.getSSRC(), m = (0, w.getRTTRegistry)().getFrameRate(l);\n                            m && (b.legacyFrameRatePerSecond = m);\n                        }\n                    }), a.attach(new p.SWFunctor(function(c) {\n                        var d = r.getCurrent(), e = c.getResolution(), f = a.getRequestedMeasurement(), g = a.getRequestTime(), h = c.getLostPackets(), i = 8 * c.getReceivedBytes(), j = c.getReceivedPackets(), k = d - a.getStartTime(), m = 0, n = 0, o = 0, p = 0, q = 1e3, s = Math.max(d - a.getStartTime(), q);\n                        f ? (p = j - f.getReceivedPackets(), m = i - 8 * f.getReceivedBytes(), n = h - f.getLostPackets(),\n                        o = Math.max(d - g, q)) : (q = (l.Registry.getCredentials().getAdaptiveInterval(),\n                        l.Registry.getCredentials().getStatsSubmissionInterval()), s = Math.max(d - a.getStartTime(), q),\n                        p = j, m = i, n = h, o = Math.max(s, q)), b.csioIntPktRcv = p, b.csioIntPR = p / (o / 1e3),\n                        b.csioAvgBRKbps = i / s, b.csioIntBRKbps = m / o, b.csioAvgPacketSize = c.getReceivedBytes() / j,\n                        b.csioIntMs = k, b.csioTimeElapseMs = o, b.csiores = e, b.csioPktLostPercentage = n / m * 100;\n                    }, null, null)), a.attach(new o.SWBTreePercentile(95, function(a, b) {\n                        var c = a.getFractionLost(), d = b.getFractionLost();\n                        return c == d ? 0 : c < d ? -1 : 1;\n                    }, function(a) {\n                        return a.getFractionLost();\n                    }, function(a) {\n                        b.csioPercentileFl = a;\n                    }, function(a, b) {\n                        return b ? b.getFractionLost() : a ? a.getFractionLost() : void 0;\n                    }, function(a) {\n                        var b = a.getFractionLost();\n                        return null !== b && void 0 !== b;\n                    }, function(a, b) {\n                        return a;\n                    }));\n                }\n            }, {\n                key: \"setupOutboundMonitor\",\n                value: function(a) {\n                    var b = a.metrics;\n                    a.addPreProcess(function(c) {\n                        var d = c.getLostPackets(), e = c.getSentPackets(), f = a.getRequestedMeasurement(), g = 0, h = 0;\n                        f ? (g = d - f.getLostPackets(), h = e - f.getSentPackets()) : (g = d, h = e);\n                        var i = 0;\n                        (0 < g || 0 < h) && (i = g / (h + g)), b.csioIntPktLoss = g, b.csioIntFL = i, c.setFractionLost(i);\n                    }), a.attach(new p.SWFunctor(function(c) {\n                        var d = r.getCurrent(), e = c.getResolution(), f = a.getRequestedMeasurement(), g = a.getRequestTime(), h = c.getLostPackets(), i = 8 * c.getSentBytes(), j = c.getSentPackets(), k = d - a.getStartTime(), m = 0, n = 0, o = 0, p = 0, q = 1e3, s = Math.max(d - a.getStartTime(), q);\n                        f ? (p = j - f.getSentPackets(), m = i - 8 * f.getSentBytes(), n = h - f.getLostPackets(),\n                        o = Math.max(d - g, q)) : (q = (l.Registry.getCredentials().getAdaptiveInterval(),\n                        l.Registry.getCredentials().getStatsSubmissionInterval()), s = Math.max(d - a.getStartTime(), q),\n                        p = j, m = i, n = h, o = Math.max(s, q)), b.csioIntPktRcv = p, b.csioAvgBRKbps = i / s,\n                        b.csioIntBRKbps = m / o, b.csioIntPR = p / (o / 1e3), b.csioAvgPacketSize = c.getSentBytes() / j,\n                        b.csioIntMs = k, b.csioTimeElapseMs = o, b.csiores = e, b.csioPktLostPercentage = n / m * 100;\n                    }, null, null)), a.attach(new o.SWBTreePercentile(95, function(a, b) {\n                        var c = a.getFractionLost(), d = b.getFractionLost();\n                        return c == d ? 0 : c < d ? -1 : 1;\n                    }, function(a) {\n                        return a.getFractionLost();\n                    }, function(a) {\n                        b.csioPercentileFl = a;\n                    }, function(a, b) {\n                        return b ? b.getFractionLost() : a ? a.getFractionLost() : void 0;\n                    }, function(a) {\n                        var b = a.getFractionLost();\n                        return null !== b && void 0 !== b;\n                    }, function(a, b) {\n                        return a;\n                    }));\n                }\n            }, {\n                key: \"setupAudioMonitor\",\n                value: function(a) {\n                    var b = a.metrics;\n                    a.attach(new p.SWFunctor(function(a) {\n                        b.csioMediaType = t.mediaType.audio;\n                    }, null, null));\n                }\n            }, {\n                key: \"setupVideoMonitor\",\n                value: function(a) {\n                    var b = a.metrics;\n                    a.attach(new n.SWAvg(function(a) {\n                        return a.getFrameRateReceived();\n                    }, function(c) {\n                        a.prevFrameRateMean = b.csioFrameRateMean, b.csioFrameRateMean = c;\n                    }, function(a) {\n                        var b = a.getFrameRateReceived();\n                        return null !== b && void 0 !== b;\n                    })), a.attach(new n.SWAvg(function(a) {\n                        return a.getFrameHeight();\n                    }, function(a) {\n                        b.csioFrameHeightMean = a;\n                    }, function(a) {\n                        var b = a.getFrameHeight();\n                        return null !== b && void 0 !== b;\n                    })), a.attach(new n.SWAvg(function(a) {\n                        return a.getFrameWidth();\n                    }, function(a) {\n                        b.csioFrameWidthMean = a;\n                    }, function(a) {\n                        var b = a.getFrameWidth();\n                        return null !== b && void 0 !== b;\n                    })), a.attach(new o.SWBTreePercentile(95, function(a, b) {\n                        var c = a.getFrameRateReceived(), d = b.getFrameRateReceived();\n                        return c == d ? 0 : c < d ? -1 : 1;\n                    }, function(a) {\n                        return a.getFrameRateReceived();\n                    }, function(a) {\n                        b.csioFrameRate95Percentile = a;\n                    }, function(a, b) {\n                        return b ? b.getFrameRateReceived() : a ? a.getFrameRateReceived() : void 0;\n                    }, function(a) {\n                        var b = a.getFrameRateReceived();\n                        return null !== b && void 0 !== b;\n                    }, function(a, b) {\n                        return a;\n                    })), a.attach(new o.SWBTreePercentile(50, function(a, b) {\n                        var c = a.getFrameRateReceived(), d = b.getFrameRateReceived();\n                        return c == d ? 0 : c < d ? -1 : 1;\n                    }, function(a) {\n                        return a.getFrameRateReceived();\n                    }, function(a) {\n                        b.csioFrameRate50Percentile = a;\n                    }, function(a, b) {\n                        return b ? b.getFrameRateReceived() : a ? a.getFrameRateReceived() : void 0;\n                    }, function(a) {\n                        var b = a.getFrameRateReceived();\n                        return null !== b && void 0 !== b;\n                    }, function(a, b) {\n                        return a;\n                    })), a.attach(new o.SWBTreePercentile(95, function(a, b) {\n                        var c = a.getFrameHeight(), d = b.getFrameHeight();\n                        return c == d ? 0 : c < d ? -1 : 1;\n                    }, function(a) {\n                        return a.getFrameHeight();\n                    }, function(a) {\n                        b.csioFrameHeight95Percentile = a;\n                    }, function(a, b) {\n                        return b ? b.getFrameHeight() : a ? a.getFrameHeight() : void 0;\n                    }, function(a) {\n                        var b = a.getFrameHeight();\n                        return null !== b && void 0 !== b;\n                    }, function(a, b) {\n                        return a;\n                    })), a.attach(new o.SWBTreePercentile(50, function(a, b) {\n                        var c = a.getFrameHeight(), d = b.getFrameHeight();\n                        return c == d ? 0 : c < d ? -1 : 1;\n                    }, function(a) {\n                        return a.getFrameHeight();\n                    }, function(a) {\n                        b.csioFrameHeight50Percentile = a;\n                    }, function(a, b) {\n                        return b ? b.getFrameHeight() : a ? a.getFrameHeight() : void 0;\n                    }, function(a) {\n                        var b = a.getFrameHeight();\n                        return null !== b && void 0 !== b;\n                    }, function(a, b) {\n                        return a;\n                    })), a.attach(new o.SWBTreePercentile(95, function(a, b) {\n                        var c = a.getFrameWidth(), d = b.getFrameWidth();\n                        return c == d ? 0 : c < d ? -1 : 1;\n                    }, function(a) {\n                        return a.getFrameWidth();\n                    }, function(a) {\n                        b.csioFrameWidth95Percentile = a;\n                    }, function(a, b) {\n                        return b ? b.getFrameWidth() : a ? a.getFrameWidth() : void 0;\n                    }, function(a) {\n                        var b = a.getFrameWidth();\n                        return null !== b && void 0 !== b;\n                    }, function(a, b) {\n                        return a;\n                    })), a.attach(new o.SWBTreePercentile(50, function(a, b) {\n                        var c = a.getFrameWidth(), d = b.getFrameWidth();\n                        return c == d ? 0 : c < d ? -1 : 1;\n                    }, function(a) {\n                        return a.getFrameWidth();\n                    }, function(a) {\n                        b.csioFrameWidth50Percentile = a;\n                    }, function(a, b) {\n                        return b ? b.getFrameWidth() : a ? a.getFrameWidth() : void 0;\n                    }, function(a) {\n                        var b = a.getFrameWidth();\n                        return null !== b && void 0 !== b;\n                    }, function(a, b) {\n                        return a;\n                    })), a.attach(new p.SWFunctor(function(a) {\n                        b.csioMediaType = t.mediaType.video;\n                    }, null, null));\n                }\n            }, {\n                key: \"setupSCSValidator\",\n                value: function(a) {\n                    var b = a.metrics;\n                    a.attach(new p.SWFunctor(function(c) {\n                        var d = l.Registry.getConfigServiceWrapper().getSenderConfig();\n                        if (!d || !d.rtc_rtp_parameters || !d.rtc_rtp_parameters.encodings) return b.csioSCSValidationSampleCount = null,\n                        b.csioAvgMaxBitrateDiff = null, b.csioAvgDeltaThroughput = null, b.csioMaxBitrateAboveRatio = null,\n                        void (b.csioCCDrivenRatio = null);\n                        var e = 0;\n                        d.rtc_rtp_parameters.encodings.forEach(function(a) {\n                            a && (e = Math.max(e, a.maxBitrate));\n                        });\n                        var f = 0, g = l.Registry.getConfigServiceWrapper().getDefaultSenderConfig();\n                        if (g && g.encodings) {\n                            g.encodings.forEach(function(a) {\n                                f = Math.max(f, a.maxBitrate);\n                            });\n                            var h = 0, i = 0, j = null, k = null, m = a.getSCSHelper();\n                            0 < f && .9 * f < 1e3 * b.csioAvgBRKbps ? (h = e - f, k = !1) : (h = e - 1e3 * b.csioAvgBRKbps,\n                            k = !0), j = 0 < h, i = b.csioAvgBRKbps - b.prevCsioAvgBRKbps, m.prevCsioAvgBRKbps = b.csioAvgBRKbps,\n                            b.csioSCSValidationSampleCount = ++m.total, m.sumMaxBitrateDiff += h, b.csioAvgMaxBitrateDiff = m.sumMaxBitrateDiff / m.total,\n                            m.sumThroughputDiff += i, b.csioAvgDeltaThroughput = m.sumThroughputDiff / m.total,\n                            j && (m.above += 1), b.csioMaxBitrateAboveRatio = m.above / m.total, k && (m.ccDriven += 1),\n                            b.csioCCDrivenRatio = m.ccDriven / m.total;\n                        }\n                    }, null, null));\n                }\n            } ]), k(b, [ {\n                key: \"makeTrack\",\n                value: function() {\n                    var a = {};\n                    return a.csioMediaType = void 0, a.csioMark = void 0, a.csioIntBRKbps = void 0,\n                    a.csioAvgBRKbps = void 0, a.csioIntFL = void 0, a.csioIntMs = void 0, a.csioIntPR = void 0,\n                    a.csioPercentileFl = void 0, a.csioAvgJitter = void 0, a.csioAvgRtt = void 0, a.csioPercentileJitter = void 0,\n                    a.csioSig2Latency = void 0, a.csioTimeElapseMs = void 0, a.csioeM = void 0, a.csiores = void 0,\n                    a.csioFrameWidth95Percentile = void 0, a.csioFrameWidth50Percentile = void 0, a.csioFrameHeight95Percentile = void 0,\n                    a.csioFrameHeight50Percentile = void 0, a.csioFrameRate95Percentile = void 0, a.csioFrameRate50Percentile = void 0,\n                    a.csioFrameWidthMean = void 0, a.csioFrameHeightMean = void 0, a.csioFrameRateMean = void 0,\n                    a.csioIntPktRcv = void 0, a.csioSCSValidationSampleCount = null, a.csioAvgMaxBitrateDiff = null,\n                    a.csioAvgDeltaThroughput = null, a.csioMaxBitrateAboveRatio = null, a.csioCCDrivenRatio = null,\n                    a;\n                }\n            }, {\n                key: \"getSSRC\",\n                value: function() {\n                    return this.ssrc;\n                }\n            }, {\n                key: \"add\",\n                value: function(a) {\n                    this.ssrc = a.getSSRC(), this.lastTrack = a.extractTrack(), this.lastTrack.pcHash = a.getPcHash(),\n                    0 === this.started && (this.started = r.getCurrent()), j(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"add\", this).call(this, a);\n                }\n            }, {\n                key: \"hasTraffic\",\n                value: function() {\n                    return 0 < this.metrics.csioIntBRKbps;\n                }\n            }, {\n                key: \"getTrack\",\n                value: function() {\n                    var a = this.lastTrack;\n                    return Object.assign(a.data, this.metrics), a;\n                }\n            }, {\n                key: \"extractTrack\",\n                value: function() {\n                    var a = this.lastTrack;\n                    return Object.assign(a.data, this.metrics), this.requestTime = r.getCurrent(), this.requestedMeasurement = this.peek(),\n                    a;\n                }\n            }, {\n                key: \"getMediaType\",\n                value: function() {\n                    return this.mediaType;\n                }\n            }, {\n                key: \"getStreamType\",\n                value: function() {\n                    return this.streamType;\n                }\n            }, {\n                key: \"getStartTime\",\n                value: function() {\n                    return this.started;\n                }\n            }, {\n                key: \"getCreationTime\",\n                value: function() {\n                    return this.created;\n                }\n            }, {\n                key: \"getRequestTime\",\n                value: function() {\n                    return Math.max(this.started, this.requestTime);\n                }\n            }, {\n                key: \"getRequestedMeasurement\",\n                value: function() {\n                    return this.requestedMeasurement;\n                }\n            }, {\n                key: \"getSCSHelper\",\n                value: function() {\n                    return this.scsHelper;\n                }\n            }, {\n                key: \"addQualityEvaluator\",\n                value: function(a) {\n                    var b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;\n                    this.qualityHelper.addEvaluator(a, b);\n                }\n            }, {\n                key: \"getQuality\",\n                value: function(a) {\n                    return this.qualityHelper.getQuality(a);\n                }\n            }, {\n                key: \"addPreProcess\",\n                value: function(a) {\n                    j(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"addPreProcess\", this).call(this, a);\n                }\n            }, {\n                key: \"addPostProcess\",\n                value: function(a) {\n                    j(b.prototype.__proto__ || Object.getPrototypeOf(b.prototype), \"addPostProcess\", this).call(this, a);\n                }\n            } ]), b;\n        }(m.SlidingWindow);\n        c.TrackMonitor = y;\n    }, {\n        \"../collections/slidingwindow\": 28,\n        \"../config/constants\": 33,\n        \"../statspipeline/swplugins/swavg\": 76,\n        \"../statspipeline/swplugins/swbtreepercentile\": 77,\n        \"../statspipeline/swplugins/swfunctor\": 78,\n        \"../utility/csiologger\": 88,\n        \"../utility/registry\": 95,\n        \"../utility/rttregistry\": 96,\n        \"../utility/timestamps\": 99\n    } ],\n    81: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.TracksMonitor = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./trackmonitor\"), g = a(\"../config/constants\"), h = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(g), i = function() {\n            function a() {\n                d(this, a), this.inbMonitors = new Map(), this.outbMonitors = new Map();\n            }\n            return e(a, [ {\n                key: \"getMonitor\",\n                value: function(a) {\n                    var b = a.getStreamType(), c = a.getMediaType(), d = a.getSSRC(), e = null;\n                    return b === h.streamType.inbound ? c === h.mediaType.audio ? e = this.getInbAudioMonitor(d) : c === h.mediaType.video && (e = this.getInbVideoMonitor(d)) : b === h.streamType.outbound && (c === h.mediaType.audio ? e = this.getOutbAudioMonitor(d) : c === h.mediaType.video && (e = this.getOutbVideoMonitor(d))),\n                    e;\n                }\n            }, {\n                key: \"extractTracks\",\n                value: function() {\n                    var a = [];\n                    return this.outbMonitors.forEach(function(b, c) {\n                        a.push(b.extractTrack());\n                    }), this.inbMonitors.forEach(function(b, c) {\n                        a.push(b.extractTrack());\n                    }), a;\n                }\n            }, {\n                key: \"getTracks\",\n                value: function() {\n                    var a = [];\n                    return this.outbMonitors.forEach(function(b, c) {\n                        a.push(b.getTrack());\n                    }), this.inbMonitors.forEach(function(b, c) {\n                        a.push(b.getTrack());\n                    }), a;\n                }\n            }, {\n                key: \"getMonitors\",\n                value: function() {\n                    var a = [];\n                    return this.outbMonitors.forEach(function(b, c) {\n                        a.push(b);\n                    }), this.inbMonitors.forEach(function(b, c) {\n                        a.push(b);\n                    }), a;\n                }\n            }, {\n                key: \"getInbAudioMonitor\",\n                value: function(a) {\n                    var b = this.inbMonitors.get(a);\n                    return b || (b = f.TrackMonitor.make(1e3, 3e4, h.streamType.inbound, h.mediaType.audio),\n                    this.inbMonitors.set(a, b)), b;\n                }\n            }, {\n                key: \"getInbVideoMonitor\",\n                value: function(a) {\n                    var b = this.inbMonitors.get(a);\n                    return b || (b = f.TrackMonitor.make(1e3, 3e4, h.streamType.inbound, h.mediaType.video),\n                    this.inbMonitors.set(a, b)), b;\n                }\n            }, {\n                key: \"getOutbAudioMonitor\",\n                value: function(a) {\n                    var b = this.outbMonitors.get(a);\n                    return b || (b = f.TrackMonitor.make(1e3, 3e4, h.streamType.outbound, h.mediaType.audio),\n                    this.outbMonitors.set(a, b)), b;\n                }\n            }, {\n                key: \"getOutbVideoMonitor\",\n                value: function(a) {\n                    var b = this.outbMonitors.get(a);\n                    return b || (b = f.TrackMonitor.make(1e3, 3e4, h.streamType.outbound, h.mediaType.video),\n                    this.outbMonitors.set(a, b)), b;\n                }\n            } ]), a;\n        }();\n        c.TracksMonitor = i;\n    }, {\n        \"../config/constants\": 33,\n        \"./trackmonitor\": 80\n    } ],\n    82: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.TransportsMonitor = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../config/constants\"), h = d(g), i = a(\"../utility/timestamps\"), j = d(i), k = a(\"../utility/rttregistry\"), l = function() {\n            function a(b) {\n                e(this, a), this.previous = b, this.actual = b, this.outdated = j.getCurrent();\n            }\n            return f(a, [ {\n                key: \"setActual\",\n                value: function(a) {\n                    this.actual = a;\n                }\n            }, {\n                key: \"outdate\",\n                value: function() {\n                    this.previous = this.actual, this.outdated = j.getCurrent();\n                }\n            }, {\n                key: \"getActual\",\n                value: function() {\n                    return this.actual;\n                }\n            }, {\n                key: \"getPrevious\",\n                value: function() {\n                    return this.previous;\n                }\n            }, {\n                key: \"getElapsedTime\",\n                value: function() {\n                    return j.getCurrent() - this.outdated;\n                }\n            } ]), a;\n        }(), m = function() {\n            function a(b) {\n                e(this, a), this.stats = new Map(), this.codeBase = b;\n            }\n            return f(a, [ {\n                key: \"set\",\n                value: function(a, b) {\n                    var c = this.stats.get(a);\n                    if (!c) return void this.stats.set(a, new l(b));\n                    c.setActual(b);\n                }\n            }, {\n                key: \"getIntervalStats\",\n                value: function() {\n                    var a = this, b = new Map();\n                    return this.stats.forEach(function(c, d) {\n                        b.set(d, a.getIntervalStat(c)), c.outdate();\n                    }), b;\n                }\n            }, {\n                key: \"getIntervalStat\",\n                value: function(a) {\n                    var b = null;\n                    switch (this.codeBase) {\n                      case h.codeBaseType.chrome:\n                        b = this.getIntervalStatForChrome(a);\n                        break;\n\n                      default:\n                        b = a.getActual();\n                    }\n                    return b;\n                }\n            }, {\n                key: \"getIntervalStatForChrome\",\n                value: function(a) {\n                    var b = a.getActual(), c = a.getPrevious(), d = a.getElapsedTime();\n                    if (!c) return actual;\n                    for (var e = 0; e < b.length; ++e) {\n                        var f = b[e], g = c[e];\n                        if (!g || !f) return b;\n                        var i = parseInt(g.bytesReceived, 10), j = parseInt(g.bytesSent, 10);\n                        f.csioReceivedBwKbps = 8 * (parseInt(f.bytesReceived, 10) - i) / d, f.csioSentBwKbps = 8 * (parseInt(f.bytesSent, 10) - j) / d,\n                        f.csioIntBytesReceived = parseInt(f.bytesReceived, 10) - i, f.csioIntBytesSent = parseInt(f.bytesSent, 10) - j,\n                        void 0 !== g.packetsSent && void 0 !== f.packetsSent && (f.csioSentPacketRate = (parseInt(f.packetsSent, 10) - parseInt(g.packetsSent, 10)) / (d / 1e3),\n                        f.csioIntPacketsSent = parseInt(f.packetsSent, 10) - parseInt(g.packetsSent, 10)),\n                        void 0 !== g.packetsReceived && void 0 !== f.packetsReceived && (f.csioReceivedPacketRate = (parseInt(f.packetsReceived, 10) - parseInt(g.packetsReceived, 10)) / (d / 1e3),\n                        f.csioIntPacketsReceived = parseInt(f.packetsReceived, 10) - parseInt(g.packetsReceived, 10)),\n                        this.codeBase == h.codeBaseType.chrome && (f.currentRoundTripTime = (0, k.getRTTRegistry)().getTransportRTT());\n                    }\n                    return b;\n                }\n            } ]), a;\n        }();\n        c.TransportsMonitor = m;\n    }, {\n        \"../config/constants\": 33,\n        \"../utility/rttregistry\": 96,\n        \"../utility/timestamps\": 99\n    } ],\n    83: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            return isNaN(a) ? null : a;\n        }\n        function e(a) {\n            return null !== d(a) && 0 < a ? a : null;\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.checkForNan = d, c.checkForNegativeValue = e;\n    }, {} ],\n    84: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a() {\n                d(this, a), this.getWifiStatsMethod = null, this.wifiStats = null, this.interval = 1e4;\n            }\n            return e(a, [ {\n                key: \"setGetWifiStatsMethod\",\n                value: function(a) {\n                    this.getWifiStatsMethod = a, this.wifiStatsHandler();\n                }\n            }, {\n                key: \"getWifiStats\",\n                value: function() {\n                    return this.wifiStats;\n                }\n            }, {\n                key: \"wifiStatsHandler\",\n                value: function() {\n                    var a = this;\n                    a.getWifiStatsMethod && a.getWifiStatsMethod().then(function(b) {\n                        a.wifiStats = JSON.parse(b), setTimeout(function() {\n                            a.wifiStatsHandler();\n                        }, a.interval);\n                    }).catch(function() {\n                        setTimeout(function() {\n                            a.wifiStatsHandler();\n                        }, a.interval);\n                    });\n                }\n            } ]), a;\n        }();\n        c.WifiStatsExecutor = f;\n    }, {} ],\n    85: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            return window.btoa(a);\n        }\n        function e(a) {\n            return window.atob(a);\n        }\n        function f(a) {\n            return d(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g, function(a, b) {\n                return String.fromCharCode(\"0x\" + b);\n            }));\n        }\n        function g(a) {\n            return d(a).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/\\=+$/, \"\");\n        }\n        function h(a) {\n            return f(a).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/\\=+$/, \"\");\n        }\n        function i(a) {\n            for (var b = e(a.replace(/[ \\r\\n]+$/, \"\")), c = [], d = 0; d < b.length; ++d) {\n                var f = b.charCodeAt(d).toString(16);\n                1 === f.length && (f = \"0\" + f), c.push(f);\n            }\n            return c.join(\"\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.encode = d, c.decode = e, c.urlencode = g, c.urlencodeUnicode = h, c.strtohex = i;\n    }, {} ],\n    86: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.Callbacks = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../config/constants\"), h = d(g), i = a(\"./registry\"), j = a(\"./csiologger\"), k = d(j), l = function() {\n            function a() {\n                e(this, a), this.callbacks = {};\n            }\n            return f(a, [ {\n                key: \"set\",\n                value: function(a, b) {\n                    if (\"function\" == typeof b) return h.callbackFunctions.hasOwnProperty(a) ? (this.callbacks[a] = b,\n                    void (a === h.callbackFunctions.stats && i.Registry.getStatsCallbackBuilder().setCallback(b))) : void k.error(\"Couldn't set callback: \" + a);\n                }\n            }, {\n                key: \"get\",\n                value: function(a) {\n                    return this.callbacks.hasOwnProperty(a) ? this.callbacks[a] : null;\n                }\n            } ]), a;\n        }();\n        c.Callbacks = l;\n    }, {\n        \"../config/constants\": 33,\n        \"./csiologger\": 88,\n        \"./registry\": 95\n    } ],\n    87: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.Credentials = void 0;\n        var f = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(a) {\n            return typeof a;\n        } : function(a) {\n            return a && \"function\" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? \"symbol\" : typeof a;\n        }, g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = a(\"../config/constants\"), i = d(h), j = a(\"./csiologger\"), k = d(j), l = function() {\n            function a() {\n                e(this, a), this.appId = null, this.userId = null, this.userIdObject = null, this.deviceId = null,\n                this.statsSubmissionInterval = 15e3, this.collectSDP = !1, this.transportType = i.transportType.rest,\n                this.adaptiveInterval = !1;\n            }\n            return g(a, [ {\n                key: \"getAppId\",\n                value: function() {\n                    return this.appId;\n                }\n            }, {\n                key: \"setAppId\",\n                value: function(a) {\n                    this.appId = \"string\" == typeof a ? parseInt(a, 10) : a;\n                }\n            }, {\n                key: \"getUserId\",\n                value: function() {\n                    return this.userId;\n                }\n            }, {\n                key: \"setUserId\",\n                value: function(a) {\n                    \"object\" === (void 0 === a ? \"undefined\" : f(a)) ? (this.userId = a.aliasName, this.setUserIdObject(a)) : this.userId = a;\n                }\n            }, {\n                key: \"getUserIdObject\",\n                value: function() {\n                    return this.userIdObject;\n                }\n            }, {\n                key: \"setUserIdObject\",\n                value: function(a) {\n                    this.userIdObject = a;\n                }\n            }, {\n                key: \"getStatsSubmissionInterval\",\n                value: function() {\n                    return this.statsSubmissionInterval;\n                }\n            }, {\n                key: \"setStatsSubmissionInterval\",\n                value: function(a) {\n                    k.log(\"setStatsSubmissionInterval is \", a), this.statsSubmissionInterval = a;\n                }\n            }, {\n                key: \"getCollectSDP\",\n                value: function() {\n                    return this.collectSDP;\n                }\n            }, {\n                key: \"setCollectSDP\",\n                value: function(a) {\n                    this.collectSDP = a;\n                }\n            }, {\n                key: \"getTransportType\",\n                value: function() {\n                    return this.transportType;\n                }\n            }, {\n                key: \"setTransportType\",\n                value: function(a) {\n                    this.transportType = a;\n                }\n            }, {\n                key: \"getAdaptiveInterval\",\n                value: function() {\n                    return this.adaptiveInterval;\n                }\n            }, {\n                key: \"setAdaptiveInterval\",\n                value: function(a) {\n                    this.adaptiveInterval = a;\n                }\n            } ]), a;\n        }();\n        c.Credentials = l;\n    }, {\n        \"../config/constants\": 33,\n        \"./csiologger\": 88\n    } ],\n    88: [ function(a, b, c) {\n        \"use strict\";\n        function d() {\n            if (\"true\" === i.csioDebug) {\n                var a;\n                (a = console).info.apply(a, arguments);\n            }\n        }\n        function e() {\n            if (\"true\" === i.csioDebug) {\n                var a;\n                (a = console).log.apply(a, arguments);\n            }\n        }\n        function f() {\n            if (\"true\" === i.csioDebug) {\n                var a;\n                (a = console).warn.apply(a, arguments);\n            }\n        }\n        function g() {\n            var a;\n            (a = console).warn.apply(a, arguments);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.info = d, c.log = e, c.warn = f, c.error = g;\n        var h = a(\"../config/settings\"), i = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(h);\n    }, {\n        \"../config/settings\": 34\n    } ],\n    89: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.Endpoint = void 0;\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = a(\"../browserapi/localstorage\"), h = d(g), i = a(\"../browserapi/detectbrowser\"), j = d(i), k = a(\"../utility/timestamps\"), l = d(k), m = a(\"../utility/hash\"), n = d(m), o = function() {\n            function a() {\n                e(this, a), this.id = null, this.appversion = null, this.magicKey = Math.floor(4294967296 * Math.random()),\n                this.browserName = null, this.browserVersion = null, this.osName = null, this.osVersion = null,\n                this.codeBase = null, this.userAgent = null, this.retrieveId();\n            }\n            return f(a, [ {\n                key: \"setup\",\n                value: function() {\n                    var a = j.detect();\n                    this.browserName = a.browserName, this.browserVersion = a.browserVersion, this.osName = a.os,\n                    this.osVersion = a.osVersion, this.codeBase = a.codeBase, this.userAgent = a.userAgent;\n                }\n            }, {\n                key: \"retrieveId\",\n                value: function() {\n                    var a = this, b = h.get(\"endpointID\");\n                    if (null === b) {\n                        var c = l.getCurrent(), d = Math.random() * c;\n                        n.generateSHA256(d.toString(), function(b) {\n                            a.id = b, h.store(\"endpointID\", b);\n                        });\n                    } else this.id = b;\n                }\n            }, {\n                key: \"getId\",\n                value: function() {\n                    return this.id;\n                }\n            }, {\n                key: \"getAppVersion\",\n                value: function() {\n                    return this.appversion;\n                }\n            }, {\n                key: \"setAppVersion\",\n                value: function(a) {\n                    this.appversion = a;\n                }\n            }, {\n                key: \"getMagicKey\",\n                value: function() {\n                    return this.magicKey;\n                }\n            }, {\n                key: \"getBrowserName\",\n                value: function() {\n                    return this.browserName;\n                }\n            }, {\n                key: \"getBrowserVersion\",\n                value: function() {\n                    return this.browserVersion;\n                }\n            }, {\n                key: \"getOsName\",\n                value: function() {\n                    return this.osName;\n                }\n            }, {\n                key: \"getOsVersion\",\n                value: function() {\n                    return this.osVersion;\n                }\n            }, {\n                key: \"getCodeBase\",\n                value: function() {\n                    return this.codeBase;\n                }\n            }, {\n                key: \"getUserAgent\",\n                value: function() {\n                    return this.userAgent;\n                }\n            }, {\n                key: \"serialize\",\n                value: function() {\n                    return {\n                        type: \"browser\",\n                        buildName: this.browserName,\n                        buildVersion: this.browserVersion,\n                        appVersion: this.appversion,\n                        os: this.osName,\n                        osVersion: this.osVersion,\n                        userAgent: this.userAgent\n                    };\n                }\n            } ]), a;\n        }();\n        c.Endpoint = o;\n    }, {\n        \"../browserapi/detectbrowser\": 18,\n        \"../browserapi/localstorage\": 20,\n        \"../utility/hash\": 92,\n        \"../utility/timestamps\": 99\n    } ],\n    90: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.EventMessage = void 0;\n        var f = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(a) {\n            return typeof a;\n        } : function(a) {\n            return a && \"function\" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? \"symbol\" : typeof a;\n        }, g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = a(\"../config/constants\"), i = d(h), j = a(\"../config/settings\"), k = d(j), l = a(\"./registry\"), m = a(\"./csiologger\"), n = d(m), o = function() {\n            function a(b, c, d, f) {\n                e(this, a), this.eventType = b, this.customEntries = d, this.pcHandler = f, this.auth = l.Registry.getAuthenticator(),\n                this.clocksync = l.Registry.getClockSync(), this.timestamp = this.clocksync.getSynchronizedTimestamp(),\n                this.conferenceId = c, this.clockUnSynced = !this.clocksync.isCompleted();\n            }\n            return g(a, [ {\n                key: \"updateConferenceId\",\n                value: function(a) {\n                    n.log(\"updating conferenceId to \", this.eventType, this.conferenceId, a), this.conferenceId = a;\n                }\n            }, {\n                key: \"toJson\",\n                value: function() {\n                    if (!this.canBeSent()) return null;\n                    var a = this.getCommonHeader();\n                    return Object.assign(a, this.customEntries), this.eventType === i.internalFabricEvent.userJoined && delete a.connectionID,\n                    a;\n                }\n            }, {\n                key: \"getCallback\",\n                value: function() {\n                    return this.pcHandler ? this.pcHandler.getCallback() : null;\n                }\n            }, {\n                key: \"canBeSent\",\n                value: function() {\n                    var a = void 0, b = i.tmpConferenceId;\n                    if (this.conferenceId === b) return !1;\n                    if (this.pcHandler && !this.pcHandler.getRemoteId()) return !1;\n                    if (this.eventType !== i.precalltestEvents.results) {\n                        var c = l.Registry.getConferenceManager().get(this.conferenceId);\n                        if (!c) return !1;\n                        a = c.getUcId();\n                    }\n                    return !!this.auth.getToken() && (this.auth.isTokenValid() ? !!(this.isPriority() || this.clocksync.isCompleted() && a) && !(this.eventType === i.internalFabricEvent.userAlive && !a) : (this.auth.reAuthenticate(),\n                    !1));\n                }\n            }, {\n                key: \"isCachable\",\n                value: function() {\n                    return -1 === [ i.internalFabricEvent.userAlive ].indexOf(this.eventType);\n                }\n            }, {\n                key: \"isPriority\",\n                value: function() {\n                    var a = !1;\n                    return this.eventType !== i.internalFabricEvent.userJoined && this.eventType !== i.precalltestEvents.results && this.eventType !== i.internalFabricEvent.userAlive || (a = !0),\n                    a;\n                }\n            }, {\n                key: \"getConferenceId\",\n                value: function() {\n                    return this.conferenceId;\n                }\n            }, {\n                key: \"getCommonHeader\",\n                value: function() {\n                    var a = {\n                        version: k.version,\n                        callstatsVersion: k.version,\n                        channel: this.decideChannel(),\n                        timestamp: this.timestamp,\n                        action: this.eventType,\n                        eventType: this.eventType,\n                        localID: encodeURIComponent(l.Registry.getCredentials().getUserId()),\n                        timeShift: 0,\n                        appID: l.Registry.getCredentials().getAppId(),\n                        deviceID: l.Registry.getEndpoint().getId(),\n                        token: this.auth.getToken(),\n                        confID: encodeURIComponent(this.conferenceId)\n                    };\n                    this.clockUnSynced && (a.timestamp += this.clocksync.getOffset());\n                    var b = l.Registry.getConferenceManager().get(this.conferenceId);\n                    return a.ucID = b ? b.getUcId() : null, this.pcHandler ? (a.remoteID = encodeURIComponent(this.pcHandler.getRemoteId()),\n                    a.connectionID = this.pcHandler.getPcHash()) : (a.remoteID = encodeURIComponent(l.Registry.getCredentials().getUserId()),\n                    a.connectionID = encodeURIComponent(l.Registry.getCredentials().getUserId())), a.remoteID || (a.remoteID = encodeURIComponent(l.Registry.getCredentials().getUserId())),\n                    a;\n                }\n            }, {\n                key: \"decideChannel\",\n                value: function() {\n                    if (this.eventType == i.callstatsChannels.sdpSubmission) return i.callstatsChannels.sdpSubmission;\n                    if (this.eventType == i.callstatsChannels.userFeedback) return i.callstatsChannels.userFeedback;\n                    if (this.eventType == i.callstatsChannels.processedStats) return i.callstatsChannels.processedStats;\n                    for (var a in i.precalltestEvents) if (this.eventType == i.precalltestEvents[a]) return i.callstatsChannels.preCallTest;\n                    return i.callstatsChannels.callstatsEvent;\n                }\n            } ], [ {\n                key: \"checkCustomEntries\",\n                value: function(a, b) {\n                    if (!p[a]) return n.error(\"eventType not recognized:\", a), !1;\n                    var c = p[a];\n                    for (var d in c) if (!b.hasOwnProperty(d) || f(b[d]) !== c[d]) return n.error(\"customEntries for\", a, \"should have\", d, \"of type\", c[d]),\n                    !1;\n                    return !0;\n                }\n            } ]), a;\n        }(), p = {};\n        p[i.internalFabricEvent.userJoined] = {\n            endpointInfo: \"object\"\n        }, p[i.internalFabricEvent.userLeft] = {}, p[i.internalFabricEvent.userAlive] = {},\n        p[i.internalFabricEvent.userDetails] = {\n            userName: \"string\"\n        }, p[i.internalFabricEvent.connectedDeviceList] = {\n            mediaDeviceList: \"object\"\n        }, p[i.fabricEvent.activeDeviceList] = {\n            mediaDeviceList: \"object\"\n        }, p[i.fabricEvent.audioMute] = {}, p[i.fabricEvent.audioUnmute] = {}, p[i.fabricEvent.videoPause] = {},\n        p[i.fabricEvent.videoResume] = {}, p[i.fabricEvent.screenShareStart] = {}, p[i.fabricEvent.screenShareStop] = {},\n        p[i.internalFabricEvent.mediaPlaybackStart] = {\n            ssrc: \"string\"\n        }, p[i.internalFabricEvent.mediaPlaybackSuspended] = {\n            ssrc: \"string\"\n        }, p[i.internalFabricEvent.mediaPlaybackStalled] = {\n            ssrc: \"string\"\n        }, p[i.internalFabricEvent.oneWayMedia] = {\n            mediaType: \"string\",\n            ssrc: \"string\"\n        }, p[i.internalFabricEvent.fabricSetup] = {\n            localIceCandidates: \"object\",\n            remoteIceCandidates: \"object\",\n            iceCandidatePairs: \"object\"\n        }, p[i.fabricEvent.fabricSetupFailed] = {\n            failureDelay: \"number\",\n            reason: \"string\",\n            function: \"string\",\n            endpoint: \"object\"\n        }, p[i.internalFabricEvent.fabricStateChange] = {\n            changedState: \"string\",\n            prevState: \"string\",\n            newState: \"string\"\n        }, p[i.internalFabricEvent.fabricDropped] = {\n            prevIceConnectionState: \"string\",\n            currIceConnectionState: \"string\",\n            currIceCandidatePair: \"object\",\n            failureDelay: \"number\"\n        }, p[i.internalFabricEvent.iceConnectionDisruptionStart] = {\n            prevIceConnectionState: \"string\",\n            currIceConnectionState: \"string\",\n            prevIceConnectionStateTs: \"number\",\n            currIceCandidatePair: \"object\"\n        }, p[i.internalFabricEvent.iceConnectionDisruptionEnd] = {\n            prevIceConnectionState: \"string\",\n            currIceConnectionState: \"string\",\n            delay: \"number\"\n        }, p[i.internalFabricEvent.iceDisruptionStart] = {\n            prevIceConnectionState: \"string\",\n            currIceConnectionState: \"string\",\n            prevIceConnectionStateTs: \"number\",\n            currIceCandidatePair: \"object\"\n        }, p[i.internalFabricEvent.iceDisruptionEnd] = {\n            prevIceConnectionState: \"string\",\n            currIceConnectionState: \"string\",\n            prevIceCandidatePair: \"object\"\n        }, p[i.internalFabricEvent.iceFailed] = {\n            localIceCandidates: \"object\",\n            prevIceConnectionState: \"string\",\n            currIceConnectionState: \"string\",\n            currIceCandidatePair: \"object\",\n            failureDelay: \"number\"\n        }, p[i.internalFabricEvent.iceAborted] = {\n            prevIceConnectionState: \"string\",\n            currIceConnectionState: \"string\"\n        }, p[i.internalFabricEvent.iceRestarted] = {\n            prevIceConnectionState: \"string\",\n            currIceConnectionState: \"string\",\n            prevIceCandidatePair: \"object\"\n        }, p[i.internalFabricEvent.fabricTransportSwitch] = {\n            prevIceCandidatePair: \"object\",\n            currIceCandidatePair: \"object\"\n        }, p[i.internalFabricEvent.iceTerminated] = {\n            prevIceConnectionState: \"string\",\n            currIceConnectionState: \"string\"\n        }, p[i.fabricEvent.fabricTerminated] = {}, p[i.fabricEvent.fabricHold] = {}, p[i.fabricEvent.fabricResume] = {},\n        p[i.callstatsChannels.sdpSubmission] = {\n            localSDP: \"string\",\n            remoteSDP: \"string\"\n        }, p[i.internalFabricEvent.ssrcMap] = {\n            ssrcData: \"object\"\n        }, p[i.callstatsChannels.userFeedback] = {\n            feedback: \"object\"\n        }, p[i.internalFabricEvent.sendingThroughputObservations] = {\n            ssrc: \"string\",\n            maxsendingKBitrate: \"number\",\n            timeToMaxSendingKBitrate: \"number\",\n            stablesendingKBitrate: \"number\",\n            timeToStableSendingKBitrate: \"number\"\n        }, p[i.fabricEvent.dominantSpeaker] = {}, p[i.fabricEvent.applicationErrorLog] = {\n            message: \"string\",\n            messageType: \"string\"\n        }, p[i.callstatsChannels.processedStats] = {\n            stats: \"object\"\n        }, p[i.callstatsChannels.senderConfiguration] = {\n            rtc_rtp_parameters: \"object\"\n        }, p[i.internalFabricEvent.limitationObservations] = {\n            reason: \"string\"\n        }, p[i.qualityDisruptionTypes.qpchange] = {\n            reason: \"string\"\n        }, p[i.precalltestEvents.results] = {\n            results: \"object\"\n        }, p[i.precalltestEvents.associate] = {\n            ids: \"object\"\n        }, c.EventMessage = o;\n    }, {\n        \"../config/constants\": 33,\n        \"../config/settings\": 34,\n        \"./csiologger\": 88,\n        \"./registry\": 95\n    } ],\n    91: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.EventMessageBuilder = void 0;\n        var f = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(a) {\n            return typeof a;\n        } : function(a) {\n            return a && \"function\" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? \"symbol\" : typeof a;\n        }, g = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), h = a(\"./eventmessage\"), i = a(\"../config/constants\"), j = d(i), k = a(\"./registry\"), l = a(\"./csiologger\"), m = d(l), n = function() {\n            function a() {\n                e(this, a), this.transmissionmanager = k.Registry.getTransmissionManager();\n            }\n            return g(a, [ {\n                key: \"make\",\n                value: function(a, b, c) {\n                    var d = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {};\n                    if (\"string\" != typeof a || null === d || \"object\" !== (void 0 === d ? \"undefined\" : f(d))) return m.error(\"failed typeof checks:\", a, void 0 === a ? \"undefined\" : f(a), void 0 === d ? \"undefined\" : f(d), d),\n                    k.Registry.getGenericEventHandler().sendEvent(j.logEvents.error, {\n                        msg: \"failed typeof checks:\" + a + \":\" + (void 0 === d ? \"undefined\" : f(d)) + \":\" + (void 0 === a ? \"undefined\" : f(a))\n                    }), !1;\n                    if (null === b && a !== j.precalltestEvents.results) return m.error(\"failed conferenceId checks:\", a, b),\n                    k.Registry.getGenericEventHandler().sendEvent(j.logEvents.error, {\n                        msg: \"failed conferenceId checks:\" + a\n                    }), !1;\n                    if (!c && a !== j.callstatsChannels.userFeedback && a !== j.fabricEvent.applicationErrorLog && a !== j.fabricEvent.fabricSetupFailed && a !== j.internalFabricEvent.userJoined && a !== j.precalltestEvents.results) return m.error(\"peerconnection cannot be null\", a),\n                    k.Registry.getGenericEventHandler().sendEvent(j.logEvents.error, {\n                        msg: \"peerconnection cannot be null\" + a\n                    }), !1;\n                    if (!h.EventMessage.checkCustomEntries(a, d)) return m.error(\"failed checks:\", a, d),\n                    k.Registry.getGenericEventHandler().sendEvent(j.logEvents.error, {\n                        msg: \"failed customEntries checks:\" + a\n                    }), !1;\n                    var e = void 0;\n                    if (b) {\n                        var g = k.Registry.getConferenceManager().get(b);\n                        g && c && (e = g.getPeerConnectionManager().getPcHandler(c));\n                    }\n                    var i = new h.EventMessage(a, b, d, e);\n                    return this.transmissionmanager.send(i), !0;\n                }\n            } ]), a;\n        }();\n        c.EventMessageBuilder = n;\n    }, {\n        \"../config/constants\": 33,\n        \"./csiologger\": 88,\n        \"./eventmessage\": 90,\n        \"./registry\": 95\n    } ],\n    92: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            var c = {\n                name: \"SHA-256\"\n            };\n            if (window.crypto) {\n                var d = window.crypto.subtle || window.crypto.webkitSubtle;\n                if (!d) return void e(a, b);\n                d.digest(c, f(a)).then(function(a) {\n                    b(g(a));\n                }).catch(function() {\n                    e(a, b);\n                });\n            } else if (window.msCrypto) {\n                if (!window.msCrypto.subtle) return void e(a, b);\n                var h = window.msCrypto.subtle.digest(c, f(a));\n                h.oncomplete = function(a) {\n                    a.target && b(g(a.target.result));\n                }, h.onerror = function() {\n                    e(a, b);\n                };\n            } else e(a, b);\n        }\n        function e(a) {\n            var b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, c = 0;\n            if (!a) return c;\n            for (var d = 0, e = a.length; d < e; d++) {\n                c = (c << 5) - c + a.charCodeAt(d), c |= 0;\n            }\n            return b && b(c + \"\"), c + \"\";\n        }\n        function f(a) {\n            for (var b = [], c = 0; c < a.length; ++c) {\n                var d = a.charCodeAt(c);\n                d < 128 ? b[b.length] = d : d > 127 && d < 2048 ? (b[b.length] = d >> 6 | 192, b[b.length] = 63 & d | 128) : (b[b.length] = d >> 12 | 224,\n                b[b.length] = d >> 6 & 63 | 128, b[b.length] = 63 & d | 128);\n            }\n            return new Uint8Array(b).buffer;\n        }\n        function g(a) {\n            for (var b = new DataView(a), c = \"\", d = void 0, e = 0; e < b.byteLength; e++) d = b.getUint8(e).toString(16),\n            d.length < 2 && (d = \"0\" + d), c += d;\n            return c;\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.generateSHA256 = d, c.generateHash = e;\n    }, {} ],\n    93: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            return !!/^[\\],:{}\\s]*$/.test(a.replace(/\\\\[\"\\\\\\/bfnrtu]/g, \"@\").replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, \"]\").replace(/(?:^|:|,)(?:\\s*\\[)+/g, \"\"));\n        }\n        function e(a) {\n            var b = null;\n            return null === a ? b : (d(a) && (b = JSON.parse(a)), b);\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.isValid = d, c.parse = e;\n    }, {} ],\n    94: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }\n        function e() {\n            window && window.addEventListener && window.addEventListener(\"error\", function(a) {\n                var b = f.Registry.getGenericEventHandler();\n                if (a && a.filename && a.filename.indexOf(\"callstats\") > -1) {\n                    for (var c = !1, d = {\n                        fileName: a.filename,\n                        line: a.lineno,\n                        col: a.colno,\n                        jsVersion: h.version,\n                        eventType: \"error\",\n                        message: a.message,\n                        pageURL: window.location.href\n                    }, e = f.Registry.getConferenceManager().getConferenceIds(), g = 0; g < e.length; g++) d.conferenceID = e[g],\n                    b.sendEvent(j.logEvents.error, d), c = !0;\n                    c || b.sendEvent(j.logEvents.error, d);\n                }\n            });\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.setErrorEventListener = e;\n        var f = a(\"./registry\"), g = a(\"../config/settings\"), h = d(g), i = a(\"../config/constants\"), j = d(i);\n    }, {\n        \"../config/constants\": 33,\n        \"../config/settings\": 34,\n        \"./registry\": 95\n    } ],\n    95: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.Registry = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"../services/clocksync\"), g = a(\"../services/configservice/configservicewrapper\"), h = a(\"../services/authenticator\"), i = a(\"../services/backendlog\"), j = a(\"../services/transmissionmanager\"), k = a(\"./eventmessagebuilder\"), l = a(\"../conference/conferencemanager\"), m = a(\"../utility/credentials\"), n = a(\"../statspipeline/statsadapter\"), o = a(\"../statspipeline/statsparser\"), p = a(\"../statspipeline/statsmonitor\"), q = a(\"../statspipeline/statstransmitter\"), r = a(\"../statspipeline/statsassembler\"), s = a(\"../utility/endpoint\"), t = a(\"../browserapi/battery\"), u = a(\"precalltest\"), v = a(\"../statspipeline/wifistatsexecutor\"), w = a(\"./callbacks\"), x = a(\"../statspipeline/statscallbackbuilder\"), y = a(\"../services/connectionmanager\"), z = null, A = null, B = null, C = null, D = null, E = null, F = null, G = null, H = null, I = null, J = null, K = null, L = null, M = null, N = null, O = null, P = null, Q = null, R = null, S = null, T = function() {\n            function a() {\n                d(this, a);\n            }\n            return e(a, null, [ {\n                key: \"getConferenceManager\",\n                value: function() {\n                    return O || (O = new l.ConferenceManager()), O;\n                }\n            }, {\n                key: \"getStatsCallbackBuilder\",\n                value: function() {\n                    return R || (R = new x.StatsCallbackBuilder()), R;\n                }\n            }, {\n                key: \"getClockSync\",\n                value: function() {\n                    return A || (A = new f.ClockSync()), A;\n                }\n            }, {\n                key: \"getWifiStatsExecutor\",\n                value: function() {\n                    return P || (P = new v.WifiStatsExecutor()), P;\n                }\n            }, {\n                key: \"getAuthenticator\",\n                value: function() {\n                    return B || (B = new h.Authenticator()), B;\n                }\n            }, {\n                key: \"getConfigServiceWrapper\",\n                value: function() {\n                    return C || (C = new g.ConfigServiceWrapper()), C;\n                }\n            }, {\n                key: \"getGenericEventHandler\",\n                value: function() {\n                    return D || (D = new i.GenericEventHandler(), D.enable()), D;\n                }\n            }, {\n                key: \"getConnectionManager\",\n                value: function() {\n                    return S || (S = new y.ConnectionManager()), S;\n                }\n            }, {\n                key: \"getTransmissionManager\",\n                value: function() {\n                    return E || (E = new j.TransmissionManager()), E;\n                }\n            }, {\n                key: \"getEventMessageBuilder\",\n                value: function() {\n                    return F || (F = new k.EventMessageBuilder()), F;\n                }\n            }, {\n                key: \"getCredentials\",\n                value: function() {\n                    return G || (G = new m.Credentials()), G;\n                }\n            }, {\n                key: \"getEndpoint\",\n                value: function() {\n                    return H || (H = new s.Endpoint()), H;\n                }\n            }, {\n                key: \"getStatsAdapter\",\n                value: function() {\n                    if (!I) {\n                        var b = a.getEndpoint().getCodeBase(), c = a.getEndpoint().getBrowserName();\n                        I = new n.StatsAdapter(b, c);\n                    }\n                    return I;\n                }\n            }, {\n                key: \"getPreCallTest\",\n                value: function() {\n                    return z || (z = new u.PreCallTest()), z;\n                }\n            }, {\n                key: \"getStatsParser\",\n                value: function() {\n                    return J || (J = new o.StatsParser()), J;\n                }\n            }, {\n                key: \"getStatsMonitor\",\n                value: function() {\n                    if (!K) {\n                        var b = a.getEndpoint().getCodeBase();\n                        K = new p.StatsMonitor(b);\n                    }\n                    return K;\n                }\n            }, {\n                key: \"getStatsTransmitter\",\n                value: function() {\n                    return L || (L = new q.StatsTransmitter()), L;\n                }\n            }, {\n                key: \"getStatsAssembler\",\n                value: function() {\n                    return M || (M = new r.StatsAssembler()), M;\n                }\n            }, {\n                key: \"getBattery\",\n                value: function() {\n                    return N || (N = new t.Battery()), N;\n                }\n            }, {\n                key: \"getCallbacks\",\n                value: function() {\n                    return Q || (Q = new w.Callbacks()), Q;\n                }\n            } ]), a;\n        }();\n        c.Registry = T;\n    }, {\n        \"../browserapi/battery\": 17,\n        \"../conference/conferencemanager\": 31,\n        \"../services/authenticator\": 44,\n        \"../services/backendlog\": 45,\n        \"../services/clocksync\": 46,\n        \"../services/configservice/configservicewrapper\": 50,\n        \"../services/connectionmanager\": 51,\n        \"../services/transmissionmanager\": 56,\n        \"../statspipeline/statsadapter\": 69,\n        \"../statspipeline/statsassembler\": 70,\n        \"../statspipeline/statscallbackbuilder\": 71,\n        \"../statspipeline/statsmonitor\": 72,\n        \"../statspipeline/statsparser\": 73,\n        \"../statspipeline/statstransmitter\": 74,\n        \"../statspipeline/wifistatsexecutor\": 84,\n        \"../utility/credentials\": 87,\n        \"../utility/endpoint\": 89,\n        \"./callbacks\": 86,\n        \"./eventmessagebuilder\": 91,\n        precalltest: 2\n    } ],\n    96: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        function e() {\n            return null === i && (i = new j()), i;\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }();\n        c.getRTTRegistry = e;\n        var g = a(\"../statspipeline/validator\"), h = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(g), i = null, j = function() {\n            function a() {\n                d(this, a), this.rtts = new Map(), this.frameRates = new Map(), this.transportRTT = null;\n            }\n            return f(a, [ {\n                key: \"getFrameRateReceived\",\n                value: function(a) {\n                    for (var b = null, c = [ \"googFrameRateOutput\", \"googFrameRateDecoded\", \"googFrameRateReceived\", \"googFrameRateSent\", \"framerateMean\", \"framesPerSecond\" ], d = 0, e = c.length; d < e; d++) {\n                        var f = c[d];\n                        if (void 0 !== (b = a.stat(f))) break;\n                    }\n                    return b;\n                }\n            }, {\n                key: \"update\",\n                value: function(a) {\n                    var b = this;\n                    a.getStats(function(a) {\n                        for (var c = [], d = a.result(), e = 0; e < d.length; ++e) {\n                            var f = d[e];\n                            if (\"googCandidatePair\" !== f.type) {\n                                if (\"ssrc\" === f.type) {\n                                    var g = b.getFrameRateReceived(f), i = f.stat(\"googRtt\"), j = f.stat(\"ssrc\");\n                                    i && b.rtts.set(h.checkForNan(parseInt(j, 10)), h.checkForNan(parseInt(i, 10))),\n                                    g && b.frameRates.set(h.checkForNan(parseInt(j, 10)), h.checkForNan(parseInt(g, 10)));\n                                }\n                            } else {\n                                var k = f.stat(\"googRtt\");\n                                c.push(k);\n                            }\n                        }\n                        b.transportRTT = Math.max.apply(Math, c);\n                    });\n                }\n            }, {\n                key: \"getTransportRTT\",\n                value: function() {\n                    return this.transportRTT;\n                }\n            }, {\n                key: \"getRTT\",\n                value: function(a) {\n                    var b = h.checkForNan(parseInt(a, 10));\n                    return this.rtts.has(b) ? this.rtts.get(b) : null;\n                }\n            }, {\n                key: \"getFrameRate\",\n                value: function(a) {\n                    var b = h.checkForNan(parseInt(a, 10));\n                    return this.frameRates.has(b) ? this.frameRates.get(b) : null;\n                }\n            } ]), a;\n        }();\n    }, {\n        \"../statspipeline/validator\": 83\n    } ],\n    97: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = function() {\n            function a(b, c, e) {\n                d(this, a), this.max = b, this.midpoint = c, this.stepness = e, this.actualStep = 0,\n                this.reset();\n            }\n            return e(a, [ {\n                key: \"reset\",\n                value: function() {\n                    this.actualStep = 0;\n                }\n            }, {\n                key: \"setMidpoint\",\n                value: function(a) {\n                    this.midpoint = a;\n                }\n            }, {\n                key: \"setMax\",\n                value: function(a) {\n                    this.max = a;\n                }\n            }, {\n                key: \"setStepness\",\n                value: function(a) {\n                    this.stepness = a;\n                }\n            }, {\n                key: \"increaseActualStep\",\n                value: function(a) {\n                    this.actualStep += a;\n                }\n            }, {\n                key: \"getActual\",\n                value: function() {\n                    var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1;\n                    return this.actualStep += a, this.max / (1 + Math.exp(-1 * this.stepness * (this.actualStep - this.midpoint)));\n                }\n            } ]), a;\n        }();\n        c.Sigmoid = f;\n    }, {} ],\n    98: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.TimeoutProcess = void 0;\n        var e = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), f = a(\"./csiologger\"), g = function(a) {\n            if (a && a.__esModule) return a;\n            var b = {};\n            if (null != a) for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && (b[c] = a[c]);\n            return b.default = a, b;\n        }(f), h = function() {\n            function a(b) {\n                d(this, a), this.interval = b, this.timerId = null, this.callback = function() {\n                    g.warn(\"no callback function set\", this);\n                };\n            }\n            return e(a, [ {\n                key: \"setCallback\",\n                value: function(a) {\n                    this.callback = a;\n                }\n            }, {\n                key: \"start\",\n                value: function() {\n                    var a = this;\n                    this.timerId = setInterval(function() {\n                        a.callback();\n                    }, this.interval);\n                }\n            }, {\n                key: \"stop\",\n                value: function() {\n                    clearInterval(this.timerId), this.timerId = null;\n                }\n            }, {\n                key: \"isStarted\",\n                value: function() {\n                    return null !== this.timerId;\n                }\n            } ]), a;\n        }();\n        c.TimeoutProcess = h;\n    }, {\n        \"./csiologger\": 88\n    } ],\n    99: [ function(a, b, c) {\n        \"use strict\";\n        function d() {\n            return window && window.performance && window.performance.now && window.performance.timing && window.performance.timing.navigationStart ? window.performance.now() + window.performance.timing.navigationStart : Date.now();\n        }\n        function e() {\n            return window && window.performance && window.performance.now ? window.performance.now() : null;\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.getCurrent = d, c.getSinceOrigin = e;\n    }, {} ],\n    100: [ function(a, b, c) {\n        \"use strict\";\n        function d(a, b) {\n            if (!(a instanceof b)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        });\n        var e = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(a) {\n            return typeof a;\n        } : function(a) {\n            return a && \"function\" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? \"symbol\" : typeof a;\n        }, f = function() {\n            function a(a, b) {\n                for (var c = 0; c < b.length; c++) {\n                    var d = b[c];\n                    d.enumerable = d.enumerable || !1, d.configurable = !0, \"value\" in d && (d.writable = !0),\n                    Object.defineProperty(a, d.key, d);\n                }\n            }\n            return function(b, c, d) {\n                return c && a(b.prototype, c), d && a(b, d), b;\n            };\n        }(), g = function() {\n            function a(b) {\n                d(this, a), this.base = b;\n                for (var c = arguments.length, e = Array(c > 1 ? c - 1 : 0), f = 1; f < c; f++) e[f - 1] = arguments[f];\n                this.appendixes = e;\n            }\n            return f(a, null, [ {\n                key: \"concat\",\n                value: function(a, b) {\n                    if (!b) return a;\n                    if (!a) return b;\n                    var c = \"/\" === a.substr(a.length - 1), d = \"/\" === b.substring(0, 1);\n                    return c || d ? c && d ? a + b.substring(1) : a + b : a + \"/\" + b;\n                }\n            } ]), f(a, [ {\n                key: \"append\",\n                value: function(a) {\n                    this.appendixes.push(a);\n                }\n            }, {\n                key: \"toString\",\n                value: function() {\n                    var b = this.getString(this.base), c = this;\n                    return this.appendixes.forEach(function(d) {\n                        if (null !== d && void 0 !== d) {\n                            var e = c.getString(d);\n                            b = a.concat(b, e);\n                        }\n                    }), b;\n                }\n            }, {\n                key: \"getString\",\n                value: function(a) {\n                    switch (void 0 === a ? \"undefined\" : e(a)) {\n                      case \"function\":\n                        return this.getString(a());\n\n                      case \"number\":\n                        return a + \"\";\n\n                      case \"string\":\n                      default:\n                        return a;\n                    }\n                }\n            } ]), a;\n        }();\n        c.Url = g;\n    }, {} ],\n    101: [ function(a, b, c) {\n        \"use strict\";\n        function d(a) {\n            var b = [];\n            if (!a) return b;\n            for (var c = 0; c < a.length; c++) {\n                var d = {};\n                d.mediaDeviceID = a[c].deviceId, d.groupID = a[c].groupId, d.kind = a[c].kind, d.label = a[c].label,\n                b.push(d);\n            }\n            return b;\n        }\n        function e() {\n            Number.isInteger || (Number.isInteger = Number.isInteger || function(a) {\n                return \"number\" == typeof a && isFinite(a) && Math.floor(a) === a;\n            });\n        }\n        function f() {\n            \"function\" != typeof Object.assign && Object.defineProperty(Object, \"assign\", {\n                value: function(a, b) {\n                    if (null == a) throw new TypeError(\"Cannot convert undefined or null to object\");\n                    for (var c = Object(a), d = 1; d < arguments.length; d++) {\n                        var e = arguments[d];\n                        if (null != e) for (var f in e) Object.prototype.hasOwnProperty.call(e, f) && (c[f] = e[f]);\n                    }\n                    return c;\n                },\n                writable: !0,\n                configurable: !0\n            });\n        }\n        Object.defineProperty(c, \"__esModule\", {\n            value: !0\n        }), c.normalizeMediaDeviceList = d, c.isIntegerPollyfill = e, c.assignPollyfill = f;\n    }, {} ]\n}, {}, [ 22 ]);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-native-callstats/callstats.js\n// module id = 72\n// module chunks = 0","import browser from '../browser';\nimport { browsers } from 'js-utils';\n\nimport * as StatisticsEvents from '../../service/statistics/Events';\nimport * as MediaType from '../../service/RTC/MediaType';\n\nconst GlobalOnErrorHandler = require('../util/GlobalOnErrorHandler');\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\n\n/**\n * The lib-jitsi-meet browser-agnostic names of the browser-specific keys\n * reported by RTCPeerConnection#getStats mapped by browser.\n */\nconst KEYS_BY_BROWSER_TYPE = {};\n\nKEYS_BY_BROWSER_TYPE[browsers.FIREFOX] = {\n    'ssrc': 'ssrc',\n    'packetsReceived': 'packetsReceived',\n    'packetsLost': 'packetsLost',\n    'packetsSent': 'packetsSent',\n    'bytesReceived': 'bytesReceived',\n    'bytesSent': 'bytesSent',\n    'framerateMean': 'framerateMean',\n    'ip': 'ipAddress',\n    'port': 'portNumber',\n    'protocol': 'transport'\n};\nKEYS_BY_BROWSER_TYPE[browsers.CHROME] = {\n    'receiveBandwidth': 'googAvailableReceiveBandwidth',\n    'sendBandwidth': 'googAvailableSendBandwidth',\n    'remoteAddress': 'googRemoteAddress',\n    'transportType': 'googTransportType',\n    'localAddress': 'googLocalAddress',\n    'activeConnection': 'googActiveConnection',\n    'ssrc': 'ssrc',\n    'packetsReceived': 'packetsReceived',\n    'packetsSent': 'packetsSent',\n    'packetsLost': 'packetsLost',\n    'bytesReceived': 'bytesReceived',\n    'bytesSent': 'bytesSent',\n    'googFrameHeightReceived': 'googFrameHeightReceived',\n    'googFrameWidthReceived': 'googFrameWidthReceived',\n    'googFrameHeightSent': 'googFrameHeightSent',\n    'googFrameWidthSent': 'googFrameWidthSent',\n    'googFrameRateReceived': 'googFrameRateReceived',\n    'googFrameRateSent': 'googFrameRateSent',\n    'audioInputLevel': 'audioInputLevel',\n    'audioOutputLevel': 'audioOutputLevel',\n    'currentRoundTripTime': 'googRtt',\n    'remoteCandidateType': 'googRemoteCandidateType',\n    'localCandidateType': 'googLocalCandidateType',\n    'ip': 'ip',\n    'port': 'port',\n    'protocol': 'protocol'\n};\nKEYS_BY_BROWSER_TYPE[browsers.EDGE] = {\n    'sendBandwidth': 'googAvailableSendBandwidth',\n    'remoteAddress': 'remoteAddress',\n    'transportType': 'protocol',\n    'localAddress': 'localAddress',\n    'activeConnection': 'activeConnection',\n    'ssrc': 'ssrc',\n    'packetsReceived': 'packetsReceived',\n    'packetsSent': 'packetsSent',\n    'packetsLost': 'packetsLost',\n    'bytesReceived': 'bytesReceived',\n    'bytesSent': 'bytesSent',\n    'googFrameHeightReceived': 'frameHeight',\n    'googFrameWidthReceived': 'frameWidth',\n    'googFrameHeightSent': 'frameHeight',\n    'googFrameWidthSent': 'frameWidth',\n    'googFrameRateReceived': 'framesPerSecond',\n    'googFrameRateSent': 'framesPerSecond',\n    'audioInputLevel': 'audioLevel',\n    'audioOutputLevel': 'audioLevel',\n    'currentRoundTripTime': 'roundTripTime'\n};\nKEYS_BY_BROWSER_TYPE[browsers.OPERA]\n    = KEYS_BY_BROWSER_TYPE[browsers.CHROME];\nKEYS_BY_BROWSER_TYPE[browsers.NWJS]\n    = KEYS_BY_BROWSER_TYPE[browsers.CHROME];\nKEYS_BY_BROWSER_TYPE[browsers.ELECTRON]\n    = KEYS_BY_BROWSER_TYPE[browsers.CHROME];\nKEYS_BY_BROWSER_TYPE[browsers.SAFARI]\n    = KEYS_BY_BROWSER_TYPE[browsers.CHROME];\nKEYS_BY_BROWSER_TYPE[browsers.REACT_NATIVE]\n    = KEYS_BY_BROWSER_TYPE[browsers.CHROME];\n\n/**\n * Calculates packet lost percent using the number of lost packets and the\n * number of all packet.\n * @param lostPackets the number of lost packets\n * @param totalPackets the number of all packets.\n * @returns {number} packet loss percent\n */\nfunction calculatePacketLoss(lostPackets, totalPackets) {\n    if (!totalPackets || totalPackets <= 0\n            || !lostPackets || lostPackets <= 0) {\n        return 0;\n    }\n\n    return Math.round((lostPackets / totalPackets) * 100);\n}\n\n/**\n * Holds \"statistics\" for a single SSRC.\n * @constructor\n */\nfunction SsrcStats() {\n    this.loss = {};\n    this.bitrate = {\n        download: 0,\n        upload: 0\n    };\n    this.resolution = {};\n    this.framerate = 0;\n}\n\n/**\n * Sets the \"loss\" object.\n * @param loss the value to set.\n */\nSsrcStats.prototype.setLoss = function(loss) {\n    this.loss = loss || {};\n};\n\n/**\n * Sets resolution that belong to the ssrc represented by this instance.\n * @param resolution new resolution value to be set.\n */\nSsrcStats.prototype.setResolution = function(resolution) {\n    this.resolution = resolution || {};\n};\n\n/**\n * Adds the \"download\" and \"upload\" fields from the \"bitrate\" parameter to\n * the respective fields of the \"bitrate\" field of this object.\n * @param bitrate an object holding the values to add.\n */\nSsrcStats.prototype.addBitrate = function(bitrate) {\n    this.bitrate.download += bitrate.download;\n    this.bitrate.upload += bitrate.upload;\n};\n\n/**\n * Resets the bit rate for given <tt>ssrc</tt> that belong to the peer\n * represented by this instance.\n */\nSsrcStats.prototype.resetBitrate = function() {\n    this.bitrate.download = 0;\n    this.bitrate.upload = 0;\n};\n\n/**\n * Sets the \"framerate\".\n * @param framerate the value to set.\n */\nSsrcStats.prototype.setFramerate = function(framerate) {\n    this.framerate = framerate || 0;\n};\n\n/**\n *\n */\nfunction ConferenceStats() {\n\n    /**\n     * The bandwidth\n     * @type {{}}\n     */\n    this.bandwidth = {};\n\n    /**\n     * The bit rate\n     * @type {{}}\n     */\n    this.bitrate = {};\n\n    /**\n     * The packet loss rate\n     * @type {{}}\n     */\n    this.packetLoss = null;\n\n    /**\n     * Array with the transport information.\n     * @type {Array}\n     */\n    this.transport = [];\n}\n\n/* eslint-disable max-params */\n\n/**\n * <tt>StatsCollector</tt> registers for stats updates of given\n * <tt>peerconnection</tt> in given <tt>interval</tt>. On each update particular\n * stats are extracted and put in {@link SsrcStats} objects. Once the processing\n * is done <tt>audioLevelsUpdateCallback</tt> is called with <tt>this</tt>\n * instance as an event source.\n *\n * @param peerconnection WebRTC PeerConnection object.\n * @param audioLevelsInterval\n * @param statsInterval stats refresh interval given in ms.\n * @param eventEmitter\n * @constructor\n */\nexport default function StatsCollector(\n        peerconnection,\n        audioLevelsInterval,\n        statsInterval,\n        eventEmitter) {\n    // StatsCollector depends entirely on the format of the reports returned by\n    // RTCPeerConnection#getStats. Given that the value of\n    // browser#getName() is very unlikely to change at runtime, it\n    // makes sense to discover whether StatsCollector supports the executing\n    // browser as soon as possible. Otherwise, (1) getStatValue would have to\n    // needlessly check a \"static\" condition multiple times very very often and\n    // (2) the lack of support for the executing browser would be discovered and\n    // reported multiple times very very often too late in the execution in some\n    // totally unrelated callback.\n    /**\n     * The browser type supported by this StatsCollector. In other words, the\n     * type of the browser which initialized this StatsCollector\n     * instance.\n     * @private\n     */\n    this._browserType = browser.getName();\n    const keys = KEYS_BY_BROWSER_TYPE[this._browserType];\n\n    if (!keys) {\n        // eslint-disable-next-line no-throw-literal\n        throw `The browser type '${this._browserType}' isn't supported!`;\n    }\n\n    /**\n     * Whether to use the Promise-based getStats API or not.\n     * @type {boolean}\n     */\n    this._usesPromiseGetStats\n        = browser.isSafariWithWebrtc() || browser.isFirefox();\n\n    /**\n     * The function which is to be used to retrieve the value associated in a\n     * report returned by RTCPeerConnection#getStats with a lib-jitsi-meet\n     * browser-agnostic name/key.\n     *\n     * @function\n     * @private\n     */\n    this._getStatValue\n        = this._usesPromiseGetStats\n            ? this._defineNewGetStatValueMethod(keys)\n            : this._defineGetStatValueMethod(keys);\n\n    this.peerconnection = peerconnection;\n    this.baselineAudioLevelsReport = null;\n    this.currentAudioLevelsReport = null;\n    this.currentStatsReport = null;\n    this.previousStatsReport = null;\n    this.audioLevelsIntervalId = null;\n    this.eventEmitter = eventEmitter;\n    this.conferenceStats = new ConferenceStats();\n\n    // Updates stats interval\n    this.audioLevelsIntervalMilis = audioLevelsInterval;\n\n    this.statsIntervalId = null;\n    this.statsIntervalMilis = statsInterval;\n\n    /**\n     * Maps SSRC numbers to {@link SsrcStats}.\n     * @type {Map<number,SsrcStats}\n     */\n    this.ssrc2stats = new Map();\n}\n\n/* eslint-enable max-params */\n\n/**\n * Stops stats updates.\n */\nStatsCollector.prototype.stop = function() {\n    if (this.audioLevelsIntervalId) {\n        clearInterval(this.audioLevelsIntervalId);\n        this.audioLevelsIntervalId = null;\n    }\n\n    if (this.statsIntervalId) {\n        clearInterval(this.statsIntervalId);\n        this.statsIntervalId = null;\n    }\n};\n\n/**\n * Callback passed to <tt>getStats</tt> method.\n * @param error an error that occurred on <tt>getStats</tt> call.\n */\nStatsCollector.prototype.errorCallback = function(error) {\n    GlobalOnErrorHandler.callErrorHandler(error);\n    logger.error('Get stats error', error);\n    this.stop();\n};\n\n/**\n * Starts stats updates.\n */\nStatsCollector.prototype.start = function(startAudioLevelStats) {\n    const self = this;\n\n    if (startAudioLevelStats) {\n        this.audioLevelsIntervalId = setInterval(\n            () => {\n                // Interval updates\n                self.peerconnection.getStats(\n                    report => {\n                        let results = null;\n\n                        if (!report || !report.result\n                            || typeof report.result !== 'function') {\n                            results = report;\n                        } else {\n                            results = report.result();\n                        }\n                        self.currentAudioLevelsReport = results;\n                        if (this._usesPromiseGetStats) {\n                            self.processNewAudioLevelReport();\n                        } else {\n                            self.processAudioLevelReport();\n                        }\n\n                        self.baselineAudioLevelsReport\n                            = self.currentAudioLevelsReport;\n                    },\n                    self.errorCallback\n                );\n            },\n            self.audioLevelsIntervalMilis\n        );\n    }\n\n    if (browser.supportsRtpStatistics()) {\n        this.statsIntervalId = setInterval(\n            () => {\n                // Interval updates\n                self.peerconnection.getStats(\n                    report => {\n                        let results = null;\n\n                        if (!report || !report.result\n                            || typeof report.result !== 'function') {\n                            // firefox\n                            results = report;\n                        } else {\n                            // chrome\n                            results = report.result();\n                        }\n\n                        self.currentStatsReport = results;\n                        try {\n                            if (this._usesPromiseGetStats) {\n                                self.processNewStatsReport();\n                            } else {\n                                self.processStatsReport();\n                            }\n                        } catch (e) {\n                            GlobalOnErrorHandler.callErrorHandler(e);\n                            logger.error(`Unsupported key:${e}`, e);\n                        }\n\n                        self.previousStatsReport = self.currentStatsReport;\n                    },\n                    self.errorCallback\n                );\n            },\n            self.statsIntervalMilis\n        );\n    }\n};\n\n/**\n * Defines a function which (1) is to be used as a StatsCollector method and (2)\n * gets the value from a specific report returned by RTCPeerConnection#getStats\n * associated with a lib-jitsi-meet browser-agnostic name.\n *\n * @param {Object.<string,string>} keys the map of LibJitsi browser-agnostic\n * names to RTCPeerConnection#getStats browser-specific keys\n */\nStatsCollector.prototype._defineGetStatValueMethod = function(keys) {\n    // Define the function which converts a lib-jitsi-meet browser-asnostic name\n    // to a browser-specific key of a report returned by\n    // RTCPeerConnection#getStats.\n    const keyFromName = function(name) {\n        const key = keys[name];\n\n        if (key) {\n            return key;\n        }\n\n        // eslint-disable-next-line no-throw-literal\n        throw `The property '${name}' isn't supported!`;\n    };\n\n    // Define the function which retrieves the value from a specific report\n    // returned by RTCPeerConnection#getStats associated with a given\n    // browser-specific key.\n    let itemStatByKey;\n\n    switch (this._browserType) {\n    case browsers.CHROME:\n    case browsers.OPERA:\n    case browsers.NWJS:\n    case browsers.ELECTRON:\n        // TODO What about other types of browser which are based on Chrome such\n        // as NW.js? Every time we want to support a new type browser we have to\n        // go and add more conditions (here and in multiple other places).\n        // Cannot we do a feature detection instead of a browser type check? For\n        // example, if item has a stat property of type function, then it's very\n        // likely that whoever defined it wanted you to call it in order to\n        // retrieve the value associated with a specific key.\n        itemStatByKey = (item, key) => item.stat(key);\n        break;\n    case browsers.REACT_NATIVE:\n        // The implementation provided by react-native-webrtc follows the\n        // Objective-C WebRTC API: RTCStatsReport has a values property of type\n        // Array in which each element is a key-value pair.\n        itemStatByKey = function(item, key) {\n            let value;\n\n            item.values.some(pair => {\n                if (pair.hasOwnProperty(key)) {\n                    value = pair[key];\n\n                    return true;\n                }\n\n                return false;\n\n            });\n\n            return value;\n        };\n        break;\n    case browsers.EDGE:\n        itemStatByKey = (item, key) => item[key];\n        break;\n    default:\n        itemStatByKey = (item, key) => item[key];\n    }\n\n    // Compose the 2 functions defined above to get a function which retrieves\n    // the value from a specific report returned by RTCPeerConnection#getStats\n    // associated with a specific lib-jitsi-meet browser-agnostic name.\n    return (item, name) => itemStatByKey(item, keyFromName(name));\n};\n\n/**\n * Obtains a stat value from given stat and converts it to a non-negative\n * number. If the value is either invalid or negative then 0 will be returned.\n * @param report\n * @param {string} name\n * @return {number}\n * @private\n */\nStatsCollector.prototype.getNonNegativeStat = function(report, name) {\n    let value = this._getStatValue(report, name);\n\n    if (typeof value !== 'number') {\n        value = Number(value);\n    }\n\n    if (isNaN(value)) {\n        return 0;\n    }\n\n    return Math.max(0, value);\n};\n\n/* eslint-disable no-continue */\n\n/**\n * Stats processing logic.\n */\nStatsCollector.prototype.processStatsReport = function() {\n    if (!this.previousStatsReport) {\n        return;\n    }\n\n    const getStatValue = this._getStatValue;\n    const byteSentStats = {};\n\n    for (const idx in this.currentStatsReport) {\n        if (!this.currentStatsReport.hasOwnProperty(idx)) {\n            continue;\n        }\n        const now = this.currentStatsReport[idx];\n\n        // The browser API may return \"undefined\" values in the array\n        if (!now) {\n            continue;\n        }\n\n        try {\n            const receiveBandwidth = getStatValue(now, 'receiveBandwidth');\n            const sendBandwidth = getStatValue(now, 'sendBandwidth');\n\n            if (receiveBandwidth || sendBandwidth) {\n                this.conferenceStats.bandwidth = {\n                    'download': Math.round(receiveBandwidth / 1000),\n                    'upload': Math.round(sendBandwidth / 1000)\n                };\n            }\n        } catch (e) { /* not supported*/ }\n\n        if (now.type === 'googCandidatePair') {\n            let active, ip, localCandidateType, localip,\n                remoteCandidateType, rtt, type;\n\n            try {\n                active = getStatValue(now, 'activeConnection');\n                if (!active) {\n                    continue;\n                }\n\n                ip = getStatValue(now, 'remoteAddress');\n                type = getStatValue(now, 'transportType');\n                localip = getStatValue(now, 'localAddress');\n                localCandidateType = getStatValue(now, 'localCandidateType');\n                remoteCandidateType = getStatValue(now, 'remoteCandidateType');\n                rtt = this.getNonNegativeStat(now, 'currentRoundTripTime');\n            } catch (e) { /* not supported*/ }\n            if (!ip || !type || !localip || active !== 'true') {\n                continue;\n            }\n\n            // Save the address unless it has been saved already.\n            const conferenceStatsTransport = this.conferenceStats.transport;\n\n            if (!conferenceStatsTransport.some(\n                    t =>\n                        t.ip === ip\n                            && t.type === type\n                            && t.localip === localip)) {\n                conferenceStatsTransport.push({\n                    ip,\n                    type,\n                    localip,\n                    p2p: this.peerconnection.isP2P,\n                    localCandidateType,\n                    remoteCandidateType,\n                    rtt\n                });\n            }\n            continue;\n        }\n\n        if (now.type === 'candidatepair') {\n            // we need succeeded and selected pairs only\n            if (now.state !== 'succeeded' || !now.selected) {\n                continue;\n            }\n\n            const local = this.currentStatsReport[now.localCandidateId];\n            const remote = this.currentStatsReport[now.remoteCandidateId];\n\n            this.conferenceStats.transport.push({\n                ip: `${remote.ipAddress}:${remote.portNumber}`,\n                type: local.transport,\n                localip: `${local.ipAddress}:${local.portNumber}`,\n                p2p: this.peerconnection.isP2P,\n                localCandidateType: local.candidateType,\n                remoteCandidateType: remote.candidateType\n            });\n        }\n\n        // NOTE: Edge's proprietary stats via RTCIceTransport.msGetStats().\n        if (now.msType === 'transportdiagnostics') {\n            this.conferenceStats.transport.push({\n                ip: now.remoteAddress,\n                type: now.protocol,\n                localip: now.localAddress,\n                p2p: this.peerconnection.isP2P\n            });\n        }\n\n        if (now.type !== 'ssrc' && now.type !== 'outboundrtp'\n            && now.type !== 'inboundrtp' && now.type !== 'track') {\n            continue;\n        }\n\n        // NOTE: In Edge, stats with type \"inboundrtp\" and \"outboundrtp\" are\n        // completely useless, so ignore them.\n        if (browser.isEdge()\n            && (now.type === 'inboundrtp' || now.type === 'outboundrtp')) {\n            continue;\n        }\n\n        const before = this.previousStatsReport[idx];\n        let ssrc = this.getNonNegativeStat(now, 'ssrc');\n\n        // If type=\"track\", take the first SSRC from ssrcIds.\n        if (now.type === 'track' && Array.isArray(now.ssrcIds)) {\n            ssrc = Number(now.ssrcIds[0]);\n        }\n\n        if (!before || !ssrc) {\n            continue;\n        }\n\n        // isRemote is available only in FF and is ignored in case of chrome\n        // according to the spec\n        // https://www.w3.org/TR/webrtc-stats/#dom-rtcrtpstreamstats-isremote\n        // when isRemote is true indicates that the measurements were done at\n        // the remote endpoint and reported in an RTCP RR/XR.\n        // Fixes a problem where we are calculating local stats wrong adding\n        // the sent bytes to the local download bitrate.\n        // In new W3 stats spec, type=\"track\" has a remoteSource boolean\n        // property.\n        // Edge uses the new format, so skip this check.\n        if (!browser.isEdge()\n                && (now.isRemote === true || now.remoteSource === true)) {\n            continue;\n        }\n\n        let ssrcStats = this.ssrc2stats.get(ssrc);\n\n        if (!ssrcStats) {\n            ssrcStats = new SsrcStats();\n            this.ssrc2stats.set(ssrc, ssrcStats);\n        }\n\n        let isDownloadStream = true;\n        let key = 'packetsReceived';\n        let packetsNow = getStatValue(now, key);\n\n        if (typeof packetsNow === 'undefined'\n            || packetsNow === null || packetsNow === '') {\n            isDownloadStream = false;\n            key = 'packetsSent';\n            packetsNow = getStatValue(now, key);\n            if (typeof packetsNow === 'undefined' || packetsNow === null) {\n                logger.warn('No packetsReceived nor packetsSent stat found');\n            }\n        }\n        if (!packetsNow || packetsNow < 0) {\n            packetsNow = 0;\n        }\n\n        const packetsBefore = this.getNonNegativeStat(before, key);\n        const packetsDiff = Math.max(0, packetsNow - packetsBefore);\n\n        const packetsLostNow\n            = this.getNonNegativeStat(now, 'packetsLost');\n        const packetsLostBefore\n            = this.getNonNegativeStat(before, 'packetsLost');\n        const packetsLostDiff = Math.max(0, packetsLostNow - packetsLostBefore);\n\n        ssrcStats.setLoss({\n            packetsTotal: packetsDiff + packetsLostDiff,\n            packetsLost: packetsLostDiff,\n            isDownloadStream\n        });\n\n        const bytesReceivedNow\n            = this.getNonNegativeStat(now, 'bytesReceived');\n        const bytesReceivedBefore\n            = this.getNonNegativeStat(before, 'bytesReceived');\n        const bytesReceived\n            = Math.max(0, bytesReceivedNow - bytesReceivedBefore);\n\n        let bytesSent = 0;\n\n        // TODO: clean this mess up!\n        let nowBytesTransmitted = getStatValue(now, 'bytesSent');\n\n        if (typeof nowBytesTransmitted === 'number'\n            || typeof nowBytesTransmitted === 'string') {\n            nowBytesTransmitted = Number(nowBytesTransmitted);\n            if (!isNaN(nowBytesTransmitted)) {\n                byteSentStats[ssrc] = nowBytesTransmitted;\n                if (nowBytesTransmitted > 0) {\n                    bytesSent = nowBytesTransmitted\n                        - getStatValue(before, 'bytesSent');\n                }\n            }\n        }\n        bytesSent = Math.max(0, bytesSent);\n\n        const timeMs = now.timestamp - before.timestamp;\n        let bitrateReceivedKbps = 0, bitrateSentKbps = 0;\n\n        if (timeMs > 0) {\n            // TODO is there any reason to round here?\n            bitrateReceivedKbps = Math.round((bytesReceived * 8) / timeMs);\n            bitrateSentKbps = Math.round((bytesSent * 8) / timeMs);\n        }\n\n        ssrcStats.addBitrate({\n            'download': bitrateReceivedKbps,\n            'upload': bitrateSentKbps\n        });\n\n        const resolution = {\n            height: null,\n            width: null\n        };\n\n        try {\n            let height, width;\n\n            if ((height = getStatValue(now, 'googFrameHeightReceived'))\n                && (width = getStatValue(now, 'googFrameWidthReceived'))) {\n                resolution.height = height;\n                resolution.width = width;\n            } else if ((height = getStatValue(now, 'googFrameHeightSent'))\n                && (width = getStatValue(now, 'googFrameWidthSent'))) {\n                resolution.height = height;\n                resolution.width = width;\n            }\n        } catch (e) { /* not supported*/ }\n\n        // Tries to get frame rate\n        let frameRate;\n\n        try {\n            frameRate = getStatValue(now, 'googFrameRateReceived')\n                || getStatValue(now, 'googFrameRateSent') || 0;\n        } catch (e) {\n            // if it fails with previous properties(chrome),\n            // let's try with another one (FF)\n            try {\n                frameRate = this.getNonNegativeStat(now, 'framerateMean');\n            } catch (err) { /* not supported*/ }\n        }\n        ssrcStats.setFramerate(Math.round(frameRate || 0));\n\n        if (resolution.height && resolution.width) {\n            ssrcStats.setResolution(resolution);\n        } else {\n            ssrcStats.setResolution(null);\n        }\n    }\n\n    this.eventEmitter.emit(\n        StatisticsEvents.BYTE_SENT_STATS, this.peerconnection, byteSentStats);\n\n    this._processAndEmitReport();\n};\n\n/**\n *\n */\nStatsCollector.prototype._processAndEmitReport = function() {\n    // process stats\n    const totalPackets = {\n        download: 0,\n        upload: 0\n    };\n    const lostPackets = {\n        download: 0,\n        upload: 0\n    };\n    let bitrateDownload = 0;\n    let bitrateUpload = 0;\n    const resolutions = {};\n    const framerates = {};\n    let audioBitrateDownload = 0;\n    let audioBitrateUpload = 0;\n    let videoBitrateDownload = 0;\n    let videoBitrateUpload = 0;\n\n    for (const [ ssrc, ssrcStats ] of this.ssrc2stats) {\n        // process packet loss stats\n        const loss = ssrcStats.loss;\n        const type = loss.isDownloadStream ? 'download' : 'upload';\n\n        totalPackets[type] += loss.packetsTotal;\n        lostPackets[type] += loss.packetsLost;\n\n        // process bitrate stats\n        bitrateDownload += ssrcStats.bitrate.download;\n        bitrateUpload += ssrcStats.bitrate.upload;\n\n        // collect resolutions and framerates\n        const track = this.peerconnection.getTrackBySSRC(ssrc);\n\n        if (track) {\n            if (track.isAudioTrack()) {\n                audioBitrateDownload += ssrcStats.bitrate.download;\n                audioBitrateUpload += ssrcStats.bitrate.upload;\n            } else {\n                videoBitrateDownload += ssrcStats.bitrate.download;\n                videoBitrateUpload += ssrcStats.bitrate.upload;\n            }\n\n            const participantId = track.getParticipantId();\n\n            if (participantId) {\n                const resolution = ssrcStats.resolution;\n\n                if (resolution.width\n                        && resolution.height\n                        && resolution.width !== -1\n                        && resolution.height !== -1) {\n                    const userResolutions = resolutions[participantId] || {};\n\n                    userResolutions[ssrc] = resolution;\n                    resolutions[participantId] = userResolutions;\n                }\n                if (ssrcStats.framerate !== 0) {\n                    const userFramerates = framerates[participantId] || {};\n\n                    userFramerates[ssrc] = ssrcStats.framerate;\n                    framerates[participantId] = userFramerates;\n                }\n            } else {\n                logger.error(`No participant ID returned by ${track}`);\n            }\n        } else if (this.peerconnection.isP2P) {\n            // NOTE For JVB connection there are JVB tracks reported in\n            // the stats, but they do not have corresponding JitsiRemoteTrack\n            // instances stored in TPC. It is not trivial to figure out that\n            // a SSRC belongs to JVB, so we print this error ony for the P2P\n            // connection for the time being.\n            //\n            // Also there will be reports for tracks removed from the session,\n            // for the users who have left the conference.\n            logger.error(\n                `JitsiTrack not found for SSRC ${ssrc}`\n                    + ` in ${this.peerconnection}`);\n        }\n\n        ssrcStats.resetBitrate();\n    }\n\n    this.conferenceStats.bitrate = {\n        'upload': bitrateUpload,\n        'download': bitrateDownload\n    };\n\n    this.conferenceStats.bitrate.audio = {\n        'upload': audioBitrateUpload,\n        'download': audioBitrateDownload\n    };\n\n    this.conferenceStats.bitrate.video = {\n        'upload': videoBitrateUpload,\n        'download': videoBitrateDownload\n    };\n\n    this.conferenceStats.packetLoss = {\n        total:\n            calculatePacketLoss(\n                lostPackets.download + lostPackets.upload,\n                totalPackets.download + totalPackets.upload),\n        download:\n            calculatePacketLoss(lostPackets.download, totalPackets.download),\n        upload:\n            calculatePacketLoss(lostPackets.upload, totalPackets.upload)\n    };\n\n    this.eventEmitter.emit(\n        StatisticsEvents.CONNECTION_STATS,\n        this.peerconnection,\n        {\n            'bandwidth': this.conferenceStats.bandwidth,\n            'bitrate': this.conferenceStats.bitrate,\n            'packetLoss': this.conferenceStats.packetLoss,\n            'resolution': resolutions,\n            'framerate': framerates,\n            'transport': this.conferenceStats.transport\n        });\n    this.conferenceStats.transport = [];\n};\n\n/**\n * Stats processing logic.\n */\nStatsCollector.prototype.processAudioLevelReport = function() {\n    if (!this.baselineAudioLevelsReport) {\n        return;\n    }\n\n    const getStatValue = this._getStatValue;\n\n    for (const idx in this.currentAudioLevelsReport) {\n        if (!this.currentAudioLevelsReport.hasOwnProperty(idx)) {\n            continue;\n        }\n\n        const now = this.currentAudioLevelsReport[idx];\n\n        if (now.type !== 'ssrc' && now.type !== 'track') {\n            continue;\n        }\n\n        const before = this.baselineAudioLevelsReport[idx];\n        let ssrc = this.getNonNegativeStat(now, 'ssrc');\n\n        if (!ssrc && Array.isArray(now.ssrcIds)) {\n            ssrc = Number(now.ssrcIds[0]);\n        }\n\n        if (!before) {\n            logger.warn(`${ssrc} not enough data`);\n            continue;\n        }\n\n        if (!ssrc) {\n            if ((Date.now() - now.timestamp) < 3000) {\n                logger.warn('No ssrc: ');\n            }\n            continue;\n        }\n\n        // Audio level\n        let audioLevel;\n\n        try {\n            audioLevel\n                = getStatValue(now, 'audioInputLevel')\n                    || getStatValue(now, 'audioOutputLevel');\n        } catch (e) { /* not supported*/\n            logger.warn('Audio Levels are not available in the statistics.');\n            clearInterval(this.audioLevelsIntervalId);\n\n            return;\n        }\n\n        if (audioLevel) {\n            let isLocal;\n\n            // If type=\"ssrc\" (legacy) check whether they are received packets.\n            if (now.type === 'ssrc') {\n                isLocal = !getStatValue(now, 'packetsReceived');\n\n            // If type=\"track\", check remoteSource boolean property.\n            } else {\n                isLocal = !now.remoteSource;\n            }\n\n            // According to the W3C WebRTC Stats spec, audioLevel should be in\n            // 0..1 range (0 == silence). However browsers don't behave that\n            // way so we must convert it to 0..1.\n            //\n            // In Edge the range is -100..0 (-100 == silence) measured in dB,\n            // so convert to linear. The levels are set to 0 for remote tracks,\n            // so don't convert those, since 0 means \"the maximum\" in Edge.\n            if (browser.isEdge()) {\n                audioLevel = audioLevel < 0 ? Math.pow(10, audioLevel / 20) : 0;\n\n            // TODO: Can't find specs about what this value really is, but it\n            // seems to vary between 0 and around 32k.\n            } else {\n                audioLevel = audioLevel / 32767;\n            }\n\n            this.eventEmitter.emit(\n                StatisticsEvents.AUDIO_LEVEL,\n                this.peerconnection,\n                ssrc,\n                audioLevel,\n                isLocal);\n        }\n    }\n};\n\n/* eslint-enable no-continue */\n\n/**\n * New promised based getStats report processing.\n * Tested with chrome, firefox and safari. Not switching it on for chrome as\n * frameRate stat is missing and calculating it using framesSent,\n * gives values double the values seen in webrtc-internals.\n * https://w3c.github.io/webrtc-stats/\n */\n\n/**\n * Defines a function which (1) is to be used as a StatsCollector method and (2)\n * gets the value from a specific report returned by RTCPeerConnection#getStats\n * associated with a lib-jitsi-meet browser-agnostic name in case of using\n * Promised based getStats.\n *\n * @param {Object.<string,string>} keys the map of LibJitsi browser-agnostic\n * names to RTCPeerConnection#getStats browser-specific keys\n */\nStatsCollector.prototype._defineNewGetStatValueMethod = function(keys) {\n    // Define the function which converts a lib-jitsi-meet browser-asnostic name\n    // to a browser-specific key of a report returned by\n    // RTCPeerConnection#getStats.\n    const keyFromName = function(name) {\n        const key = keys[name];\n\n        if (key) {\n            return key;\n        }\n\n        // eslint-disable-next-line no-throw-literal\n        throw `The property '${name}' isn't supported!`;\n    };\n\n    // Compose the 2 functions defined above to get a function which retrieves\n    // the value from a specific report returned by RTCPeerConnection#getStats\n    // associated with a specific lib-jitsi-meet browser-agnostic name.\n    return (item, name) => item[keyFromName(name)];\n};\n\n/**\n * Converts the value to a non-negative number.\n * If the value is either invalid or negative then 0 will be returned.\n * @param {*} v\n * @return {number}\n * @private\n */\nStatsCollector.prototype.getNonNegativeValue = function(v) {\n    let value = v;\n\n    if (typeof value !== 'number') {\n        value = Number(value);\n    }\n\n    if (isNaN(value)) {\n        return 0;\n    }\n\n    return Math.max(0, value);\n};\n\n/**\n * Calculates bitrate between before and now using a supplied field name and its\n * value in the stats.\n * @param {RTCInboundRtpStreamStats|RTCSentRtpStreamStats} now the current stats\n * @param {RTCInboundRtpStreamStats|RTCSentRtpStreamStats} before the\n * previous stats.\n * @param fieldName the field to use for calculations.\n * @return {number} the calculated bitrate between now and before.\n * @private\n */\nStatsCollector.prototype._calculateBitrate = function(now, before, fieldName) {\n    const bytesNow = this.getNonNegativeValue(now[fieldName]);\n    const bytesBefore = this.getNonNegativeValue(before[fieldName]);\n    const bytesProcessed = Math.max(0, bytesNow - bytesBefore);\n\n    const timeMs = now.timestamp - before.timestamp;\n    let bitrateKbps = 0;\n\n    if (timeMs > 0) {\n        // TODO is there any reason to round here?\n        bitrateKbps = Math.round((bytesProcessed * 8) / timeMs);\n    }\n\n    return bitrateKbps;\n};\n\n/**\n * Stats processing new getStats logic.\n */\nStatsCollector.prototype.processNewStatsReport = function() {\n    if (!this.previousStatsReport) {\n        return;\n    }\n\n    const getStatValue = this._getStatValue;\n    const byteSentStats = {};\n\n    this.currentStatsReport.forEach(now => {\n\n        // RTCIceCandidatePairStats\n        // https://w3c.github.io/webrtc-stats/#candidatepair-dict*\n        if (now.type === 'candidate-pair'\n            && now.nominated\n            && now.state === 'succeeded') {\n\n            const availableIncomingBitrate = now.availableIncomingBitrate;\n            const availableOutgoingBitrate = now.availableOutgoingBitrate;\n\n            if (availableIncomingBitrate || availableOutgoingBitrate) {\n                this.conferenceStats.bandwidth = {\n                    'download': Math.round(availableIncomingBitrate / 1000),\n                    'upload': Math.round(availableOutgoingBitrate / 1000)\n                };\n            }\n\n            const remoteUsedCandidate\n                = this.currentStatsReport.get(now.remoteCandidateId);\n            const localUsedCandidate\n                = this.currentStatsReport.get(now.localCandidateId);\n\n            // RTCIceCandidateStats\n            // https://w3c.github.io/webrtc-stats/#icecandidate-dict*\n            // safari currently does not provide ice candidates in stats\n            if (remoteUsedCandidate && localUsedCandidate) {\n                // FF uses non-standard ipAddress, portNumber, transport\n                // instead of ip, port, protocol\n                const remoteIpAddress = getStatValue(remoteUsedCandidate, 'ip');\n                const remotePort = getStatValue(remoteUsedCandidate, 'port');\n                const ip = `${remoteIpAddress}:${remotePort}`;\n\n                const localIpAddress = getStatValue(localUsedCandidate, 'ip');\n                const localPort = getStatValue(localUsedCandidate, 'port');\n\n                const localIp = `${localIpAddress}:${localPort}`;\n                const type = getStatValue(remoteUsedCandidate, 'protocol');\n\n                // Save the address unless it has been saved already.\n                const conferenceStatsTransport = this.conferenceStats.transport;\n\n                if (!conferenceStatsTransport.some(\n                        t =>\n                            t.ip === ip\n                            && t.type === type\n                            && t.localip === localIp)) {\n                    conferenceStatsTransport.push({\n                        ip,\n                        type,\n                        localIp,\n                        p2p: this.peerconnection.isP2P,\n                        localCandidateType: localUsedCandidate.candidateType,\n                        remoteCandidateType: remoteUsedCandidate.candidateType,\n                        networkType: localUsedCandidate.networkType,\n                        rtt: now.currentRoundTripTime * 1000\n                    });\n                }\n            }\n\n        // RTCReceivedRtpStreamStats\n        // https://w3c.github.io/webrtc-stats/#receivedrtpstats-dict*\n        // RTCSentRtpStreamStats\n        // https://w3c.github.io/webrtc-stats/#sentrtpstats-dict*\n        } else if (now.type === 'inbound-rtp' || now.type === 'outbound-rtp') {\n            const before = this.previousStatsReport.get(now.id);\n            const ssrc = this.getNonNegativeValue(now.ssrc);\n\n            if (!before || !ssrc) {\n                return;\n            }\n\n            let ssrcStats = this.ssrc2stats.get(ssrc);\n\n            if (!ssrcStats) {\n                ssrcStats = new SsrcStats();\n                this.ssrc2stats.set(ssrc, ssrcStats);\n            }\n\n            let isDownloadStream = true;\n            let key = 'packetsReceived';\n\n            if (now.type === 'outbound-rtp') {\n                isDownloadStream = false;\n                key = 'packetsSent';\n            }\n\n            let packetsNow = now[key];\n\n            if (!packetsNow || packetsNow < 0) {\n                packetsNow = 0;\n            }\n\n            const packetsBefore = this.getNonNegativeValue(before[key]);\n            const packetsDiff = Math.max(0, packetsNow - packetsBefore);\n\n            const packetsLostNow\n                = this.getNonNegativeValue(now.packetsLost);\n            const packetsLostBefore\n                = this.getNonNegativeValue(before.packetsLost);\n            const packetsLostDiff\n                = Math.max(0, packetsLostNow - packetsLostBefore);\n\n            ssrcStats.setLoss({\n                packetsTotal: packetsDiff + packetsLostDiff,\n                packetsLost: packetsLostDiff,\n                isDownloadStream\n            });\n\n            if (now.type === 'inbound-rtp') {\n\n                ssrcStats.addBitrate({\n                    'download': this._calculateBitrate(\n                                    now, before, 'bytesReceived'),\n                    'upload': 0\n                });\n\n                // RTCInboundRtpStreamStats\n                // https://w3c.github.io/webrtc-stats/#inboundrtpstats-dict*\n                // TODO: can we use framesDecoded for frame rate, available\n                // in chrome\n            } else {\n                byteSentStats[ssrc] = this.getNonNegativeValue(now.bytesSent);\n                ssrcStats.addBitrate({\n                    'download': 0,\n                    'upload': this._calculateBitrate(\n                                now, before, 'bytesSent')\n                });\n\n                // RTCOutboundRtpStreamStats\n                // https://w3c.github.io/webrtc-stats/#outboundrtpstats-dict*\n                // TODO: can we use framesEncoded for frame rate, available\n                // in chrome\n            }\n\n            // FF has framerateMean out of spec\n            const framerateMean = now.framerateMean;\n\n            if (framerateMean) {\n                ssrcStats.setFramerate(Math.round(framerateMean || 0));\n            }\n\n        // track for resolution\n        // RTCVideoHandlerStats\n        // https://w3c.github.io/webrtc-stats/#vststats-dict*\n        // RTCMediaHandlerStats\n        // https://w3c.github.io/webrtc-stats/#mststats-dict*\n        } else if (now.type === 'track') {\n\n            const resolution = {\n                height: now.frameHeight,\n                width: now.frameWidth\n            };\n\n            // Tries to get frame rate\n            let frameRate = now.framesPerSecond;\n\n            if (!frameRate) {\n                // we need to calculate it\n                const before = this.previousStatsReport.get(now.id);\n\n                if (before) {\n                    const timeMs = now.timestamp - before.timestamp;\n\n                    if (timeMs > 0 && now.framesSent) {\n                        const numberOfFramesSinceBefore\n                            = now.framesSent - before.framesSent;\n\n                        frameRate = (numberOfFramesSinceBefore / timeMs) * 1000;\n                    }\n                }\n\n                if (!frameRate) {\n                    return;\n                }\n            }\n\n            const trackIdentifier = now.trackIdentifier;\n            const ssrc = this.peerconnection.getSsrcByTrackId(trackIdentifier);\n            let ssrcStats = this.ssrc2stats.get(ssrc);\n\n            if (!ssrcStats) {\n                ssrcStats = new SsrcStats();\n                this.ssrc2stats.set(ssrc, ssrcStats);\n            }\n            ssrcStats.setFramerate(Math.round(frameRate || 0));\n\n            if (resolution.height && resolution.width) {\n                ssrcStats.setResolution(resolution);\n            } else {\n                ssrcStats.setResolution(null);\n            }\n        }\n    });\n\n    this.eventEmitter.emit(\n        StatisticsEvents.BYTE_SENT_STATS, this.peerconnection, byteSentStats);\n\n    this._processAndEmitReport();\n};\n\n/**\n * Stats processing logic.\n */\nStatsCollector.prototype.processNewAudioLevelReport = function() {\n    if (!this.baselineAudioLevelsReport) {\n        return;\n    }\n\n    this.currentAudioLevelsReport.forEach(now => {\n        if (now.type !== 'track') {\n            return;\n        }\n\n        // Audio level\n        const audioLevel = now.audioLevel;\n\n        if (!audioLevel) {\n            return;\n        }\n\n        const trackIdentifier = now.trackIdentifier;\n        const ssrc = this.peerconnection.getSsrcByTrackId(trackIdentifier);\n\n        if (ssrc) {\n            const isLocal\n                = ssrc === this.peerconnection.getLocalSSRC(\n                this.peerconnection.getLocalTracks(MediaType.AUDIO));\n\n            this.eventEmitter.emit(\n                StatisticsEvents.AUDIO_LEVEL,\n                this.peerconnection,\n                ssrc,\n                audioLevel,\n                isLocal);\n        }\n    });\n};\n\n/**\n * End new promised based getStats processing methods.\n */\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/RTPStatsCollector.js","/*!\n * currentExecutingScript\n * Get the currently executing script, regardless of its source/trigger/synchronicity. Similar to HTML5's `document.currentScript` but arguably much more useful!\n * Copyright (c) 2015 James M. Greene\n * Licensed MIT\n * https://github.com/JamesMGreene/currentExecutingScript\n * v0.1.3\n */\n(function(root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof exports === \"object\") {\n    // CommonJS-like environments that support `module.exports`,\n    // like Node.js. Does not work with strict CommonJS!\n    module.exports = factory();\n  } else {\n    // Browser globals (`root` is `window`)\n    root.currentExecutingScript = factory();\n  }\n}(\n  // Current context/scope\n  this || window,\n\n  // Factory function to return the export\n  function() {\n\nvar scriptReadyRegex = /^(interactive|loaded|complete)$/;\n\n// This page's URL (minus query string and fragment identifer hash, if any)\nvar fullPageUrl = !!window.location ? window.location.href : null;\nvar pageUrl = fullPageUrl ? fullPageUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\") || null : null;\n\n// Live NodeList collection\nvar scripts = document.getElementsByTagName(\"script\");\n\n// Check if the browser supports the `readyState` property on `script` elements\nvar supportsScriptReadyState = \"readyState\" in (scripts[0] || document.createElement(\"script\"));\n\n// Lousy browser detection for [not] Opera\nvar isNotOpera = !window.opera || window.opera.toString() !== \"[object Opera]\";\n\n// Detect if `document.currentScript` is supported\nvar hasNativeCurrentScriptAccessor = \"currentScript\" in document;\n\nvar originalStackDepthConfig;\n// Detect if the V8 Error Stack Trace API is supported\nif (\"stackTraceLimit\" in Error && Error.stackTraceLimit !== Infinity) {\n  originalStackDepthConfig = Error.stackTraceLimit;\n  Error.stackTraceLimit = Infinity;\n}\n\n\n// In some browsers (e.g. Chrome), you can get the current stack from an Error\n// object instance without needing to throw it. Avoiding an unnecessary\n// use of `throw` saves time and performance.\nvar hasStackBeforeThrowing = false,\n    hasStackAfterThrowing = false;\n(function() {\n  try {\n    var err = new Error();\n    hasStackBeforeThrowing = typeof err.stack === \"string\" && !!err.stack;\n    throw err;\n  }\n  catch (thrownErr) {\n    hasStackAfterThrowing = typeof thrownErr.stack === \"string\" && !!thrownErr.stack;\n  }\n})();\n\n\n// Normalize whitespace within a string\nfunction normalizeWhitespace(str) {\n  return str ? str.replace(/^\\s+$|\\s+$/g, \"\").replace(/\\s\\s+/g, \" \") : \"\";\n}\n\n// Get script object based on the `src` URL\nfunction getScriptFromUrl(url, eligibleScripts) {\n  var i,\n      script = null;\n\n  eligibleScripts = eligibleScripts || scripts;\n\n  if (typeof url === \"string\" && url) {\n    for (i = eligibleScripts.length; i--; ) {\n      if (eligibleScripts[i].src === url) {\n        // NOTE: Could check if the same script URL is used by more than one `script` element\n        // here... but let's not. That would yield less useful results in \"loose\" detection. ;)\n        script = eligibleScripts[i];\n        break;\n      }\n    }\n  }\n  return script;\n}\n\n// Get script object based on the caller function's source code body (text)\nfunction getInlineScriptFromCallerSource(callerFnSource, eligibleScripts) {\n  var i, inlineScriptText,\n      script = null,\n      callerSourceText = normalizeWhitespace(callerFnSource);\n\n  eligibleScripts = eligibleScripts || scripts;\n\n  if (callerFnSource && callerSourceText) {\n    for (i = eligibleScripts.length; i--; ) {\n      // Only look at inline scripts\n      if (!eligibleScripts[i].hasAttribute(\"src\")) {\n        inlineScriptText = normalizeWhitespace(eligibleScripts[i].text);\n        if (inlineScriptText.indexOf(callerSourceText) !== -1) {\n          // If more than one match is found, don't return any\n          if (script) {\n            script = null;\n            break;\n          }\n          script = eligibleScripts[i];\n        }\n      }\n    }\n  }\n\n  return script;\n}\n\n// If there is only a single inline script on the page, return it; otherwise `null`\nfunction getSoleInlineScript(eligibleScripts) {\n  var i, len,\n      script = null;\n  eligibleScripts = eligibleScripts || scripts;\n  for (i = 0, len = eligibleScripts.length; i < len; i++) {\n    if (!eligibleScripts[i].hasAttribute(\"src\")) {\n      if (script) {\n        script = null;\n        break;\n      }\n      script = eligibleScripts[i];\n    }\n  }\n  return script;\n}\n\n// Get the currently executing script URL from an Error stack trace\nfunction getScriptUrlFromStack(stack, skipStackDepth) {\n  var matches, remainingStack,\n      url = null,\n      ignoreMessage = typeof skipStackDepth === \"number\";\n  skipStackDepth = ignoreMessage ? Math.round(skipStackDepth) : 0;\n  if (typeof stack === \"string\" && stack) {\n    if (ignoreMessage) {\n      matches = stack.match(/(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?/);\n    }\n    else {\n      matches = stack.match(/^(?:|[^:@]*@|.+\\)@(?=data:text\\/javascript|blob|http[s]?|file)|.+?\\s+(?: at |@)(?:[^:\\(]+ )*[\\(]?)(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?/);\n\n      if (!(matches && matches[1])) {\n        matches = stack.match(/\\)@(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?/);\n      }\n    }\n\n    if (matches && matches[1]) {\n      if (skipStackDepth > 0) {\n        remainingStack = stack.slice(stack.indexOf(matches[0]) + matches[0].length);\n        url = getScriptUrlFromStack(remainingStack, (skipStackDepth - 1));\n      }\n      else {\n        url = matches[1];\n      }\n    }\n\n    // TODO: Handle more edge cases!\n    // Fixes #1\n    // See https://github.com/JamesMGreene/currentExecutingScript/issues/1\n\n    // ???\n\n  }\n  return url;\n}\n\n\n// Get the farthest currently executing (i.e. yes, EXECUTING) `script` DOM\n// element for the caller function, regardless of whether it is that `script`\n// DOM element is currently being evaluated for the first time. The farthest\n// currently executing `script` DOM element would typically be considered the\n// originator of the current execution stack.\nfunction _farthestExecutingScript() {\n  /*jshint noarg:false */\n\n  // TODO: Implement!\n  // Fixes #3\n  // See https://github.com/JamesMGreene/currentExecutingScript/issues/3\n  return null;\n\n/*\n  // Yes, this IS possible, i.e. if a script removes other scripts (or itself)\n  if (scripts.length === 0) {\n    return null;\n  }\n\n  // Guaranteed accurate in IE 6-10.\n  // Not accurate/supported in any other browsers.\n  if (isNotOpera && supportsScriptReadyState) {\n    for (var i = scripts.length; i--; ) {\n      if (scripts[i].readyState === \"interactive\") {\n        return scripts[i];\n      }\n    }\n  }\n\n  var stack,\n      e = new Error();\n  if (hasStackBeforeThrowing) {\n    stack = e.stack;\n  }\n  if (!stack && hasStackAfterThrowing) {\n    try {\n      throw e;\n    }\n    catch (err) {\n      // NOTE: Cannot use `err.sourceURL` or `err.fileName` as they will always be THIS script\n      stack = err.stack;\n    }\n  }\n  if (stack) {\n    var url = getScriptUrlFromStack(stack, skipStackDepth);\n    var script = getScriptFromUrl(url, scripts );\n    if (!script && pageUrl && url === pageUrl) {\n      // Try to find the correct inline script by searching through\n      // inline scripts' text content for the caller function's source\n      // code to be present. If the caller function's source code is\n      // not available, see if there is only one inline script element\n      // in the DOM and return that (even though it may be wrong)\n\n      // TODO: Implement!\n      // Fixes #4 in part\n      // See https://github.com/JamesMGreene/currentExecutingScript/issues/4\n\n      var callerFn = _farthestExecutingScript.caller || null,\n          callerFnStack = [],\n          callerFnSource = null;\n\n      while (callerFn) {\n        callerFnStack.push(callerFn);\n        callerFn = callerFn.caller || null;\n      }\n      callerFn = callerFnStack.slice(-1)[0];\n      callerFnSource = callerFn ? (\"\" + callerFn) : null;\n\n\n      if (callerFnSource) {\n        script = getInlineScriptFromCallerSource(callerFnSource);\n      }\n      else {\n        // NOTE: This is a loose assumption that could be inaccurate!\n        //\n        // Inaccuracies:\n        //  - If the inline script that initiated the call was also removed from the DOM.\n        //  - If the call was initiated by an element's inline event handler,\n        //    e.g. `<a onclick=\"(function() { alert(currentExecutingScript()); }()\">click</a>`\n        script = getSoleInlineScript();\n      }\n    }\n    return script;\n  }\n\n  // NOTE: This is a loose assumption that could be inaccurate!\n  //\n  // Inaccuracies:\n  //  - If a script is created dynamically and appended to some position\n  //    other than the very end of the document.\n  //  - If multiple scripts are created dynamically and all appended to the\n  //    same position within the document (and do not have their `async` attributes\n  //    set to `false`, at least in browsers that support async script evaluation.\n  //    other than the very end of the document.\n  //  - If any scripts are added with the `async` attribute set to `true` in a browser\n  //    that supports it.\n  //  - May get confused by `script` elements within `svg` elements\n  return scripts[scripts.length - 1] || null;\n*/\n}\n\n\n// Get the originating currently executing (i.e. yes, EXECUTING) `script` DOM\n// element or attribute node (e.g. `onclick`) for the caller function,\n// regardless of whether it is that `script` DOM element is currently being\n// evaluated for the first time. The originating currently executing `script`\n// DOM element [or attribute node] is the originator of the current execution stack.\nfunction _originatingExecutingScript() {\n  // TODO: Implement!\n  // Fixes #2\n  // See https://github.com/JamesMGreene/currentExecutingScript/issues/2\n  return null;\n}\n\n// Get the nearest currently executing (i.e. yes, EXECUTING) `script` DOM\n// element for the caller function, regardless of whether it is that `script`\n// DOM element is currently being evaluated for the first time.\nfunction _nearestExecutingScript() {\n  /*jshint noarg:false */\n\n  // Yes, this IS possible, i.e. if a script removes other scripts (or itself)\n  if (scripts.length === 0) {\n    return null;\n  }\n\n  var i, e, stack, url, script,\n      eligibleScripts = [],\n      skipStackDepth = _nearestExecutingScript.skipStackDepth || 1,\n\n      // TODO: Implement!\n      // Fixes #4 in part\n      // See https://github.com/JamesMGreene/currentExecutingScript/issues/4\n      callerFnSource = null;  //(\"\" + (_nearestExecutingScript.caller || \"\")) || null;\n\n  // This part will only help in IE 6-10.\n  for (i = 0; i < scripts.length; i++) {\n    if (isNotOpera && supportsScriptReadyState) {\n      if (scriptReadyRegex.test(scripts[i].readyState)) {\n        eligibleScripts.push(scripts[i]);\n      }\n    }\n    else {\n      eligibleScripts.push(scripts[i]);\n    }\n  }\n\n  e = new Error();\n  if (hasStackBeforeThrowing) {\n    stack = e.stack;\n  }\n  if (!stack && hasStackAfterThrowing) {\n    try {\n      throw e;\n    }\n    catch (err) {\n      // NOTE: Cannot use `err.sourceURL` or `err.fileName` as they will always be THIS script\n      stack = err.stack;\n    }\n  }\n\n  if (stack) {\n    url = getScriptUrlFromStack(stack, skipStackDepth);\n    script = getScriptFromUrl(url, eligibleScripts);\n\n    if (!script && pageUrl && url === pageUrl) {\n      // Try to find the correct inline script by searching through\n      // inline scripts' text content for the caller function's source\n      // code to be present.\n      if (callerFnSource) {\n        script = getInlineScriptFromCallerSource(callerFnSource, eligibleScripts);\n      }\n      // If the caller function's source code is not available, see if\n      // there is only one inline script element in the DOM and return\n      // that (even though it may be wrong)...\n      else {\n        // NOTE: This is a loose assumption that could be inaccurate!\n        //\n        // Inaccuracies:\n        //  - If the inline script that initiated the call was also removed from the DOM.\n        //  - If the call was initiated by an element's inline event handler,\n        //    e.g. `<a onclick=\"(function() { alert(currentExecutingScript()); }()\">click</a>`\n        script = getSoleInlineScript(eligibleScripts);\n      }\n    }\n  }\n\n  //\n  // Welcome to the Island of Inaccurate Assumptions!\n  // NOTE: ALL of the following are loose assumptions that could be inaccurate!\n  //\n\n  if (!script) {\n    // Inaccuracies:\n    //  - If the inline script that initiated the call was also removed from the DOM.\n    //  - If the call was initiated by an element's inline event handler,\n    //    e.g. `<a onclick=\"(function() { alert(currentExecutingScript()); }()\">click</a>`\n    if (eligibleScripts.length === 1) {\n      script = eligibleScripts[0];\n    }\n  }\n\n  if (!script) {\n    // Inaccuracies:\n    //  - If script currently being synchronously evaluated by the parser is the\n    //    originator of this call stack but NOT the source script of the caller/invocation\n    //    e.g.\n    //    ```html\n    //    <script id=\"a\">\n    //    function getCurrentScriptCallerFn() {\n    //      return currentExecutingScript.near();\n    //    }\n    //    </script>\n    //    <script id=\"b\">\n    //    // Should get `script[id=\"a\"]` but will get `script[id=\"b\"]` instead\n    //    getCurrentScriptCallerFn();\n    //    </script>\n    if (hasNativeCurrentScriptAccessor) {\n      script = document.currentScript;\n    }\n  }\n\n  if (!script) {\n    // Inaccuracies:\n    //  - If script currently being synchronously evaluated by the parser is the\n    //    originator of this call stack but NOT the source script of the caller/invocation\n    //    e.g.\n    //    ```html\n    //    <script id=\"a\">\n    //    function getCurrentScriptCallerFn() {\n    //      return currentExecutingScript.near();\n    //    }\n    //    </script>\n    //    <script id=\"b\">\n    //    // Should get `script[id=\"a\"]` but will get `script[id=\"b\"]` instead\n    //    getCurrentScriptCallerFn();\n    //    </script>\n    if (isNotOpera && supportsScriptReadyState) {\n      for (i = eligibleScripts.length; i--; ) {\n        if (eligibleScripts[i].readyState === \"interactive\") {\n          script = eligibleScripts[i];\n          break;\n        }\n      }\n    }\n  }\n\n  if (!script) {\n    // Inaccuracies:\n    //  - If a script is created dynamically and appended to some position\n    //    other than the very end of the document.\n    //  - If multiple scripts are created dynamically and all appended to the\n    //    same position within the document (and do not have their `async` attributes\n    //    set to `false`, at least in browsers that support async script evaluation.\n    //    other than the very end of the document.\n    //  - If any scripts are added with the `async` attribute set to `true` in a browser\n    //    that supports it.\n    //  - May get confused by `script` elements within `svg` elements\n    //  - If script currently being synchronously evaluated by the parser is the\n    //    originator of this call stack but NOT the source script of the caller/invocation\n    //    e.g.\n    //    ```html\n    //    <script id=\"a\">\n    //    function getCurrentScriptCallerFn() {\n    //      return currentExecutingScript.near();\n    //    }\n    //    </script>\n    //    <script id=\"b\">\n    //    // Should get `script[id=\"a\"]` but will get `script[id=\"b\"]` instead\n    //    getCurrentScriptCallerFn();\n    //    </script>\n    //    ```\n    script = eligibleScripts[eligibleScripts.length - 1] || null;\n  }\n\n  return script;\n}\n\n// Default stack depth to skip over when analyzing call stack frames\n_nearestExecutingScript.skipStackDepth = 1;\n\n\n\n    //\n    // Export the API\n    //\n    var currentExecutingScript    = _nearestExecutingScript;      // default\n    currentExecutingScript.near   = _nearestExecutingScript;\n    currentExecutingScript.far    = _farthestExecutingScript;\n    currentExecutingScript.origin = _originatingExecutingScript;\n\n\n    // Just return a value to define the module export.\n    // This example returns an object, but the module\n    // can return a function as the exported value.\n    return currentExecutingScript;\n  })\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/current-executing-script/dist/currentExecutingScript.js\n// module id = 74\n// module chunks = 0","const Constants = {\n    LOCAL_JID: 'local'\n};\n\nmodule.exports = Constants;\n\n\n\n// WEBPACK FOOTER //\n// ./service/statistics/constants.js","import Statistics from '../statistics/statistics';\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\n\n/**\n * The constant for the name of the focus component.\n * @type {string}\n */\nComponentsVersions.FOCUS_COMPONENT = 'focus';\n\n/**\n * The constant for the name of the videobridge component.\n * @type {string}\n */\nComponentsVersions.VIDEOBRIDGE_COMPONENT = 'videobridge';\n\n/**\n * The constant for the name of the XMPP server component.\n * @type {string}\n */\nComponentsVersions.XMPP_SERVER_COMPONENT = 'xmpp';\n\n/**\n * Creates new instance of <tt>ComponentsVersions</tt> which will be discovering\n * the versions of conferencing system components in given\n * <tt>JitsiConference</tt>.\n * @param conference <tt>JitsiConference</tt> instance which will be used to\n *        listen for focus presence updates.\n * @constructor\n */\nexport default function ComponentsVersions(conference) {\n\n    this.versions = {};\n\n    this.conference = conference;\n    this.conference.addCommandListener(\n        'versions', this.processPresence.bind(this));\n}\n\nComponentsVersions.prototype.processPresence\n    = function(node, mucResource, mucJid) {\n        if (node.attributes.xmlns !== 'http://jitsi.org/jitmeet') {\n            logger.warn('Ignored presence versions node - invalid xmlns', node);\n\n            return;\n        }\n\n        if (!this.conference._isFocus(mucJid)) {\n            logger.warn(\n                `Received versions not from the focus user: ${node}`,\n                mucJid);\n\n            return;\n        }\n\n        const log = [];\n\n        node.children.forEach(item => {\n\n            const componentName = item.attributes.name;\n\n            if (componentName !== ComponentsVersions.FOCUS_COMPONENT\n            && componentName !== ComponentsVersions.XMPP_SERVER_COMPONENT\n            && componentName !== ComponentsVersions.VIDEOBRIDGE_COMPONENT) {\n                logger.warn(\n                    `Received version for not supported component name: ${\n                        componentName}`);\n\n                return;\n            }\n\n            const version = item.value;\n\n            if (this.versions[componentName] !== version) {\n                this.versions[componentName] = version;\n                logger.info(`Got ${componentName} version: ${version}`);\n\n                log.push({\n                    id: 'component_version',\n                    component: componentName,\n                    version\n                });\n            }\n        });\n\n        // logs versions to stats\n        if (log.length > 0) {\n            Statistics.sendLog(JSON.stringify(log));\n        }\n    };\n\n/**\n * Obtains the version of conferencing system component.\n * @param componentName the name of the component for which we want to obtain\n *        the version.\n * @returns {String} which describes the version of the component identified by\n *          given <tt>componentName</tt> or <tt>undefined</tt> if not found.\n */\nComponentsVersions.prototype.getComponentVersion = function(componentName) {\n    return this.versions[componentName];\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/version/ComponentsVersions.js","import * as ConnectionQualityEvents\n    from '../../service/connectivity/ConnectionQualityEvents';\nimport * as ConferenceEvents from '../../JitsiConferenceEvents';\nimport { getLogger } from 'jitsi-meet-logger';\n\nconst XMPPEvents = require('../../service/xmpp/XMPPEvents');\nconst VideoType = require('../../service/RTC/VideoType');\nconst Resolutions = require('../../service/RTC/Resolutions');\n\nconst logger = getLogger(__filename);\n\n/**\n * The value to use for the \"type\" field for messages sent by ConnectionQuality\n * over the data channel.\n */\nconst STATS_MESSAGE_TYPE = 'stats';\n\n/**\n * See media/engine/simulcast.ss from webrtc.org\n */\nconst kSimulcastFormats = [\n    { width: 1920,\n        height: 1080,\n        layers: 3,\n        max: 5000,\n        target: 4000,\n        min: 800 },\n    { width: 1280,\n        height: 720,\n        layers: 3,\n        max: 2500,\n        target: 2500,\n        min: 600 },\n    { width: 960,\n        height: 540,\n        layers: 3,\n        max: 900,\n        target: 900,\n        min: 450 },\n    { width: 640,\n        height: 360,\n        layers: 2,\n        max: 700,\n        target: 500,\n        min: 150 },\n    { width: 480,\n        height: 270,\n        layers: 2,\n        max: 450,\n        target: 350,\n        min: 150 },\n    { width: 320,\n        height: 180,\n        layers: 1,\n        max: 200,\n        target: 150,\n        min: 30 }\n];\n\n/**\n * The maximum bitrate to use as a measurement against the participant's current\n * bitrate. This cap helps in the cases where the participant's bitrate is high\n * but not enough to fulfill high targets, such as with 1080p.\n */\nconst MAX_TARGET_BITRATE = 2500;\n\n/**\n * The initial bitrate for video in kbps.\n */\nlet startBitrate = 800;\n\n\n/**\n * The current cap (in kbps) put on the video stream (or null if there isn't\n * a cap).  If there is a cap, we'll take it into account when calculating\n * the current quality.\n */\nlet videoBitrateCap = null;\n\n/**\n * Gets the expected bitrate (in kbps) in perfect network conditions.\n * @param simulcast {boolean} whether simulcast is enabled or not.\n * @param resolution {Resolution} the resolution.\n * @param millisSinceStart {number} the number of milliseconds since sending\n * video started.\n */\nfunction getTarget(simulcast, resolution, millisSinceStart) {\n    // Completely ignore the bitrate in the first 5 seconds, as the first\n    // event seems to fire very early and the value is suspicious and causes\n    // false positives.\n    if (millisSinceStart < 15000) {\n        return 1;\n    }\n\n    let target = 0;\n    let height = Math.min(resolution.height, resolution.width);\n\n    if (simulcast) {\n        // Find the first format with height no bigger than ours.\n        let simulcastFormat = kSimulcastFormats.find(f => f.height <= height);\n\n        if (simulcastFormat) {\n            // Sum the target fields from all simulcast layers for the given\n            // resolution (e.g. 720p + 360p + 180p).\n            for (height = simulcastFormat.height; height >= 180; height /= 2) {\n                const targetHeight = height;\n\n                simulcastFormat\n                    = kSimulcastFormats.find(f => f.height === targetHeight);\n                if (simulcastFormat) {\n                    target += simulcastFormat.target;\n                } else {\n                    break;\n                }\n            }\n        }\n    } else {\n        // See GetMaxDefaultVideoBitrateKbps in\n        // media/engine/webrtcvideoengine2.cc from webrtc.org\n        const pixels = resolution.width * resolution.height;\n\n        if (pixels <= 320 * 240) {\n            target = 600;\n        } else if (pixels <= 640 * 480) {\n            target = 1700;\n        } else if (pixels <= 960 * 540) {\n            target = 2000;\n        } else {\n            target = 2500;\n        }\n    }\n\n    // Allow for an additional 1 second for ramp up -- delay any initial drop\n    // of connection quality by 1 second.\n    return Math.min(target, rampUp(Math.max(0, millisSinceStart - 1000)));\n}\n\n/**\n * Gets the bitrate to which GCC would have ramped up in perfect network\n * conditions after millisSinceStart milliseconds.\n * @param millisSinceStart {number} the number of milliseconds since sending\n * video was enabled.\n */\nfunction rampUp(millisSinceStart) {\n    if (millisSinceStart > 60000) {\n        return Number.MAX_SAFE_INTEGER;\n    }\n\n    // According to GCC the send side bandwidth estimation grows with at most\n    // 8% per second.\n    // https://tools.ietf.org/html/draft-ietf-rmcat-gcc-02#section-5.5\n    return startBitrate * Math.pow(1.08, millisSinceStart / 1000);\n}\n\n/**\n * A class which monitors the local statistics coming from the RTC modules, and\n * calculates a \"connection quality\" value, in percent, for the media\n * connection. A value of 100% indicates a very good network connection, and a\n * value of 0% indicates a poor connection.\n */\nexport default class ConnectionQuality {\n    /**\n     *\n     * @param conference\n     * @param eventEmitter\n     * @param options\n     */\n    constructor(conference, eventEmitter, options) {\n        this.eventEmitter = eventEmitter;\n\n        /**\n         * The owning JitsiConference.\n         */\n        this._conference = conference;\n\n        /**\n         * Holds statistics about the local connection quality.\n         */\n        this._localStats = {\n            connectionQuality: 100,\n            jvbRTT: undefined\n        };\n\n        /**\n         * The time this._localStats.connectionQuality was last updated.\n         */\n        this._lastConnectionQualityUpdate = -1;\n\n        /**\n         * Maps a participant ID to an object holding connection quality\n         * statistics received from this participant.\n         */\n        this._remoteStats = {};\n\n        /**\n         * The time that the ICE state last changed to CONNECTED. We use this\n         * to calculate how much time we as a sender have had to ramp-up.\n         */\n        this._timeIceConnected = -1;\n\n        /**\n         * The time that local video was unmuted. We use this to calculate how\n         * much time we as a sender have had to ramp-up.\n         */\n        this._timeVideoUnmuted = -1;\n\n        /**\n         * The time at which a video bitrate cap was last removed.  We use\n         * this to calculate how much time we, as a sender, have had to\n         * ramp-up\n         */\n        this._timeLastBwCapRemoved = -1;\n\n        // We assume a global startBitrate value for the sake of simplicity.\n        if (options.startBitrate && options.startBitrate > 0) {\n            startBitrate = options.startBitrate;\n        }\n\n        // TODO: consider ignoring these events and letting the user of\n        // lib-jitsi-meet handle these separately.\n        conference.on(\n            ConferenceEvents.CONNECTION_INTERRUPTED,\n            () => {\n                this._updateLocalConnectionQuality(0);\n                this.eventEmitter.emit(\n                    ConnectionQualityEvents.LOCAL_STATS_UPDATED,\n                    this._localStats);\n                this._broadcastLocalStats();\n            });\n\n        conference.room.addListener(\n            XMPPEvents.ICE_CONNECTION_STATE_CHANGED,\n            (jingleSession, newState) => {\n                if (!jingleSession.isP2P && newState === 'connected') {\n                    this._timeIceConnected = window.performance.now();\n                }\n            });\n\n        // Listen to DataChannel message from other participants in the\n        // conference, and update the _remoteStats field accordingly.\n        conference.on(\n            ConferenceEvents.ENDPOINT_MESSAGE_RECEIVED,\n            (participant, payload) => {\n                if (payload.type === STATS_MESSAGE_TYPE) {\n                    this._updateRemoteStats(\n                        participant.getId(), payload.values);\n                }\n            });\n\n        // Listen to local statistics events originating from the RTC module\n        // and update the _localStats field.\n        // Oh, and by the way, the resolutions of all remote participants are\n        // also piggy-backed in these \"local\" statistics. It's obvious, really,\n        // if one carefully reads the *code* (but not the docs) in\n        // UI/VideoLayout/VideoLayout.js#updateLocalConnectionStats in\n        // jitsi-meet\n        // TODO: We should keep track of the remote resolution in _remoteStats,\n        // and notify about changes via separate events.\n        conference.statistics.addConnectionStatsListener(\n            this._updateLocalStats.bind(this));\n\n        // Save the last time we were unmuted.\n        conference.on(\n            ConferenceEvents.TRACK_MUTE_CHANGED,\n            track => {\n                if (track.isVideoTrack()) {\n                    if (track.isMuted()) {\n                        this._timeVideoUnmuted = -1;\n                    } else {\n                        this._maybeUpdateUnmuteTime();\n                    }\n                }\n            });\n        conference.on(\n            ConferenceEvents.TRACK_ADDED,\n            track => {\n                if (track.isVideoTrack() && !track.isMuted()) {\n                    this._maybeUpdateUnmuteTime();\n                }\n            });\n    }\n\n    /**\n     * Sets _timeVideoUnmuted if it was previously unset. If it was already set,\n     * doesn't change it.\n     */\n    _maybeUpdateUnmuteTime() {\n        if (this._timeVideoUnmuted < 0) {\n            this._timeVideoUnmuted = window.performance.now();\n        }\n    }\n\n    /**\n     * Calculates a new \"connection quality\" value.\n     * @param videoType {VideoType} the type of the video source (camera or\n     * a screen capture).\n     * @param isMuted {boolean} whether the local video is muted.\n     * @param resolutionName {Resolution} the input resolution used by the\n     * camera.\n     * @returns {*} the newly calculated connection quality.\n     */\n    _calculateConnectionQuality(videoType, isMuted, resolutionName) {\n\n        // resolutionName is an index into Resolutions (where \"720\" is\n        // \"1280x720\" and \"960\" is \"960x720\" ...).\n        const resolution = Resolutions[resolutionName];\n\n        let quality = 100;\n        let packetLoss;\n\n        // TODO: take into account packet loss for received streams\n\n        if (this._localStats.packetLoss) {\n            packetLoss = this._localStats.packetLoss.upload;\n\n            // Ugly Hack Alert (UHA):\n            // The packet loss for the upload direction is calculated based on\n            // incoming RTCP Receiver Reports. Since we don't have RTCP\n            // termination for audio, these reports come from the actual\n            // receivers in the conference and therefore the reported packet\n            // loss includes loss from the bridge to the receiver.\n            // When we are sending video this effect is small, because the\n            // number of video packets is much larger than the number of audio\n            // packets (and our calculation is based on the total number of\n            // received and lost packets).\n            // When video is muted, however, the effect might be significant,\n            // but we don't know what it is. We do know that it is positive, so\n            // as a temporary solution, until RTCP termination is implemented\n            // for the audio streams, we relax the packet loss checks here.\n            if (isMuted) {\n                packetLoss *= 0.5;\n            }\n        }\n\n        if (isMuted || !resolution || videoType === VideoType.DESKTOP\n            || this._timeIceConnected < 0\n            || this._timeVideoUnmuted < 0) {\n\n            // Calculate a value based on packet loss only.\n            if (packetLoss === undefined) {\n                logger.error('Cannot calculate connection quality, unknown '\n                    + 'packet loss.');\n                quality = 100;\n            } else if (packetLoss <= 2) {\n                quality = 100; // Full 5 bars.\n            } else if (packetLoss <= 4) {\n                quality = 70; // 4 bars\n            } else if (packetLoss <= 6) {\n                quality = 50; // 3 bars\n            } else if (packetLoss <= 8) {\n                quality = 30; // 2 bars\n            } else if (packetLoss <= 12) {\n                quality = 10; // 1 bars\n            } else {\n                quality = 0; // Still 1 bar, but slower climb-up.\n            }\n        } else {\n            // Calculate a value based on the sending bitrate.\n\n            // Figure out if simulcast is in use\n            const activeTPC = this._conference.getActivePeerConnection();\n            const isSimulcastOn\n                = Boolean(activeTPC && activeTPC.isSimulcastOn());\n\n            const newVideoBitrateCap\n                = activeTPC && activeTPC.bandwidthLimiter\n                && activeTPC.bandwidthLimiter.getBandwidthLimit('video');\n\n            // If we had a cap set but there isn't one now, then it has\n            // just been 'lifted', so we should treat this like a new\n            // ramp up.\n            if (!newVideoBitrateCap && videoBitrateCap) {\n                this._timeLastBwCapRemoved = window.performance.now();\n\n                // Set the start bitrate to whatever we were just capped to\n                startBitrate = videoBitrateCap;\n            }\n            videoBitrateCap = newVideoBitrateCap;\n\n            // time since sending of video was enabled.\n            const millisSinceStart = window.performance.now()\n                - Math.max(this._timeVideoUnmuted,\n                    this._timeIceConnected,\n                    this._timeLastBwCapRemoved);\n\n            // expected sending bitrate in perfect conditions\n            let target\n                = getTarget(isSimulcastOn, resolution, millisSinceStart);\n\n            target = Math.min(0.9 * target, MAX_TARGET_BITRATE);\n\n            if (videoBitrateCap) {\n                target = Math.min(target, videoBitrateCap);\n            }\n\n            quality = 100 * this._localStats.bitrate.upload / target;\n\n            // Whatever the bitrate, drop early if there is significant loss\n            if (packetLoss && packetLoss >= 10) {\n                quality = Math.min(quality, 30);\n            }\n        }\n\n        // Make sure that the quality doesn't climb quickly\n        if (this._lastConnectionQualityUpdate > 0) {\n            const maxIncreasePerSecond = 2;\n            const prevConnectionQuality = this._localStats.connectionQuality;\n            const diffSeconds\n                = (window.performance.now() - this._lastConnectionQualityUpdate)\n                    / 1000;\n\n            quality\n                = Math.min(\n                    quality,\n                    prevConnectionQuality\n                        + (diffSeconds * maxIncreasePerSecond));\n        }\n\n        return Math.min(100, quality);\n    }\n\n    /**\n     * Updates the localConnectionQuality value\n     * @param values {number} the new value. Should be in [0, 100].\n     */\n    _updateLocalConnectionQuality(value) {\n        this._localStats.connectionQuality = value;\n        this._lastConnectionQualityUpdate = window.performance.now();\n    }\n\n    /**\n     * Broadcasts the local statistics to all other participants in the\n     * conference.\n     */\n    _broadcastLocalStats() {\n        // Send only the data that remote participants care about.\n        const data = {\n            bitrate: this._localStats.bitrate,\n            packetLoss: this._localStats.packetLoss,\n            connectionQuality: this._localStats.connectionQuality,\n            jvbRTT: this._localStats.jvbRTT\n        };\n\n        try {\n            this._conference.broadcastEndpointMessage({\n                type: STATS_MESSAGE_TYPE,\n                values: data });\n        } catch (e) {\n            // We often hit this in the beginning of a call, before the data\n            // channel is ready. It is not a big problem, because we will\n            // send the statistics again after a few seconds, and the error is\n            // already logged elsewhere. So just ignore it.\n\n            // let errorMsg = \"Failed to broadcast local stats\";\n            // logger.error(errorMsg, e);\n            // GlobalOnErrorHandler.callErrorHandler(\n            //    new Error(errorMsg + \": \" + e));\n        }\n    }\n\n    /**\n     * Updates the local statistics\n     * @param {TraceablePeerConnection} tpc the peerconnection which emitted\n     * the stats\n     * @param data new statistics\n     */\n    _updateLocalStats(tpc, data) {\n        // Update jvbRTT\n        if (!tpc.isP2P) {\n            const jvbRTT\n                = data.transport\n                    && data.transport.length && data.transport[0].rtt;\n\n            this._localStats.jvbRTT = jvbRTT ? jvbRTT : undefined;\n        }\n\n        // Do not continue with processing of other stats if they do not\n        // originate from the active peerconnection\n        if (tpc !== this._conference.getActivePeerConnection()) {\n            return;\n        }\n\n        let key;\n        const updateLocalConnectionQuality\n            = !this._conference.isConnectionInterrupted();\n        const localVideoTrack\n            = this._conference.getLocalVideoTrack();\n        const videoType\n            = localVideoTrack ? localVideoTrack.videoType : undefined;\n        const isMuted = localVideoTrack ? localVideoTrack.isMuted() : true;\n        const resolution = localVideoTrack ? localVideoTrack.resolution : null;\n\n        if (!isMuted) {\n            this._maybeUpdateUnmuteTime();\n        }\n\n        // Copy the fields already in 'data'.\n        for (key in data) {\n            if (data.hasOwnProperty(key)) {\n                this._localStats[key] = data[key];\n            }\n        }\n\n        // And re-calculate the connectionQuality field.\n        if (updateLocalConnectionQuality) {\n            this._updateLocalConnectionQuality(\n                this._calculateConnectionQuality(\n                    videoType,\n                    isMuted,\n                    resolution));\n        }\n\n        this.eventEmitter.emit(\n            ConnectionQualityEvents.LOCAL_STATS_UPDATED,\n            this._localStats);\n        this._broadcastLocalStats();\n    }\n\n    /**\n     * Updates remote statistics\n     * @param id the id of the remote participant\n     * @param data the statistics received\n     */\n    _updateRemoteStats(id, data) {\n        // Use only the fields we need\n        this._remoteStats[id] = {\n            bitrate: data.bitrate,\n            packetLoss: data.packetLoss,\n            connectionQuality: data.connectionQuality,\n            jvbRTT: data.jvbRTT\n        };\n\n        this.eventEmitter.emit(\n            ConnectionQualityEvents.REMOTE_STATS_UPDATED,\n            id,\n            this._remoteStats[id]);\n    }\n\n    /**\n     * Returns the local statistics.\n     * Exported only for use in jitsi-meet-torture.\n     */\n    getStats() {\n        return this._localStats;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/connectivity/ConnectionQuality.js","/* global __filename */\nimport { getLogger } from 'jitsi-meet-logger';\nimport { createE2eRttEvent } from '../../service/statistics/AnalyticsEvents';\nimport * as E2ePingEvents\n    from '../../service/e2eping/E2ePingEvents';\nimport * as JitsiConferenceEvents from '../../JitsiConferenceEvents';\nimport Statistics from '../statistics/statistics';\n\nconst logger = getLogger(__filename);\n\n/**\n * The 'type' of a message which designates an e2e ping request.\n * @type {string}\n */\nconst E2E_PING_REQUEST = 'e2e-ping-request';\n\n/**\n * The 'type' of a message which designates an e2e ping response.\n * @type {string}\n */\nconst E2E_PING_RESPONSE = 'e2e-ping-response';\n\n/**\n * Saves e2e ping related state for a single JitsiParticipant.\n */\nclass ParticipantWrapper {\n    /**\n     * Creates a ParticipantWrapper\n     * @param {JitsiParticipant} participant - The remote participant that this\n     * object wraps.\n     * @param {E2ePing} e2eping\n     */\n    constructor(participant, e2eping) {\n        // The JitsiParticipant\n        this.participant = participant;\n\n        // The E2ePing\n        this.e2eping = e2eping;\n\n        // Caches the ID\n        this.id = participant.getId();\n\n        // Recently sent requests\n        this.requests = {};\n\n        // The ID of the last sent request. We just increment it for each new\n        // request. Start at 1 so we can consider only thruthy values valid.\n        this.lastRequestId = 1;\n\n        this.clearIntervals = this.clearIntervals.bind(this);\n        this.sendRequest = this.sendRequest.bind(this);\n        this.handleResponse = this.handleResponse.bind(this);\n        this.maybeSendAnalytics = this.maybeSendAnalytics.bind(this);\n        this.sendAnalytics = this.sendAnalytics.bind(this);\n\n        // If the data channel was already open (this is likely a participant\n        // joining an existing conference) send a request immediately.\n        if (e2eping.isDataChannelOpen) {\n            this.sendRequest();\n        }\n\n        this.pingInterval = window.setInterval(\n            this.sendRequest, e2eping.pingIntervalMs);\n        this.analyticsInterval = window.setTimeout(\n            this.maybeSendAnalytics, this.e2eping.analyticsIntervalMs);\n    }\n\n    /**\n     * Clears the interval which sends pings.\n     * @type {*}\n     */\n    clearIntervals() {\n        if (this.pingInterval) {\n            window.clearInterval(this.pingInterval);\n        }\n        if (this.analyticsInterval) {\n            window.clearInterval(this.analyticsInterval);\n        }\n    }\n\n    /**\n     * Sends the next ping request.\n     * @type {*}\n     */\n    sendRequest() {\n        const requestId = this.lastRequestId++;\n        const requestMessage = {\n            type: E2E_PING_REQUEST,\n            id: requestId\n        };\n\n        this.e2eping.sendMessage(requestMessage, this.id);\n        this.requests[requestId] = {\n            id: requestId,\n            timeSent: window.performance.now()\n        };\n    }\n\n    /**\n     * Handles a response from this participant.\n     * @type {*}\n     */\n    handleResponse(response) {\n        const request = this.requests[response.id];\n\n        if (request) {\n            request.rtt = window.performance.now() - request.timeSent;\n            this.e2eping.eventEmitter.emit(\n                E2ePingEvents.E2E_RTT_CHANGED,\n                this.participant,\n                request.rtt);\n        }\n\n        this.maybeSendAnalytics();\n    }\n\n    /**\n     * Goes over the requests, clearing ones which we don't need anymore, and\n     * if it finds at least one request with a valid RTT in the last\n     * 'analyticsIntervalMs' then sends an analytics event.\n     * @type {*}\n     */\n    maybeSendAnalytics() {\n        const now = window.performance.now();\n\n        // The RTT we'll report is the minimum RTT measured in the last\n        // analyticsInterval\n        let rtt = Infinity;\n        let request, requestId;\n\n        // It's time to send analytics. Clean up all requests and find the\n        for (requestId in this.requests) {\n            if (this.requests.hasOwnProperty(requestId)) {\n                request = this.requests[requestId];\n\n                if (request.timeSent < now - this.e2eping.analyticsIntervalMs) {\n                    // An old request. We don't care about it anymore.\n                    delete this.requests[requestId];\n                } else if (request.rtt) {\n                    rtt = Math.min(rtt, request.rtt);\n                }\n            }\n        }\n\n        if (rtt < Infinity) {\n            this.sendAnalytics(rtt);\n        }\n    }\n\n    /**\n     * Sends an analytics event for this participant with the given RTT.\n     * @type {*}\n     */\n    sendAnalytics(rtt) {\n        Statistics.sendAnalytics(createE2eRttEvent(\n            this.id,\n            this.participant.getProperty('region'),\n            rtt));\n    }\n}\n\n/**\n * Implements end-to-end ping (from one conference participant to another) via\n * the jitsi-videobridge channel (either WebRTC data channel or web socket).\n *\n * TODO: use a broadcast message instead of individual pings to each remote\n * participant.\n *\n * This class:\n * 1. Sends periodic ping requests to all other participants in the\n * conference.\n * 2. Responds to ping requests from other participants.\n * 3. Fires events with the end-to-end RTT to each participant whenever a\n * response is received.\n * 4. Fires analytics events with the end-to-end RTT periodically.\n */\nexport default class E2ePing {\n    /**\n     * @param {JitsiConference} conference - The conference.\n     * @param {Function} sendMessage - The function to use to send a message.\n     * @param {Object} options\n     */\n    constructor(conference, options, sendMessage) {\n        this.conference = conference;\n        this.eventEmitter = conference.eventEmitter;\n        this.sendMessage = sendMessage;\n\n        // The interval at which pings will be sent (<= 0 disables sending).\n        this.pingIntervalMs = 10000;\n\n        // The interval at which analytics events will be sent.\n        this.analyticsIntervalMs = 60000;\n\n        // Maps a participant ID to its ParticipantWrapper\n        this.participants = {};\n\n        // Whether the WebRTC channel has been opened or not.\n        this.isDataChannelOpen = false;\n\n        if (options && options.e2eping) {\n            if (typeof options.e2eping.pingInterval === 'number') {\n                this.pingIntervalMs = options.e2eping.pingInterval;\n            }\n            if (typeof options.e2eping.analyticsInterval === 'number') {\n                this.analyticsIntervalMs = options.e2eping.analyticsInterval;\n            }\n\n            // We want to report at most once a ping interval.\n            if (this.analyticsIntervalMs > 0 && this.analyticsIntervalMs\n                < this.pingIntervalMs) {\n                this.analyticsIntervalMs = this.pingIntervalMs;\n            }\n        }\n        logger.info(\n            `Initializing e2e ping; pingInterval=${\n                this.pingIntervalMs}, analyticsInterval=${\n                this.analyticsIntervalMs}.`);\n\n        this.participantJoined = this.participantJoined.bind(this);\n        conference.on(\n            JitsiConferenceEvents.USER_JOINED,\n            this.participantJoined);\n\n        this.participantLeft = this.participantLeft.bind(this);\n        conference.on(\n            JitsiConferenceEvents.USER_LEFT,\n            this.participantLeft);\n\n        this.messageReceived = this.messageReceived.bind(this);\n        conference.on(\n            JitsiConferenceEvents.ENDPOINT_MESSAGE_RECEIVED,\n            this.messageReceived);\n\n        this.dataChannelOpened = this.dataChannelOpened.bind(this);\n        conference.on(\n            JitsiConferenceEvents.DATA_CHANNEL_OPENED,\n            this.dataChannelOpened);\n    }\n\n    /**\n     * Notifies this instance that the communications channel has been opened\n     * and it can now send messages via sendMessage.\n     */\n    dataChannelOpened() {\n        this.isDataChannelOpen = true;\n\n        // We don't want to wait the whole interval before sending the first\n        // request, but we can't send it immediately after the participant joins\n        // either, because our data channel might not have initialized.\n        // So once the data channel initializes, send requests to everyone.\n        // Wait an additional 200ms to give a chance to the remote side (if it\n        // also just connected as is the case for the first 2 participants in a\n        // conference) to open its data channel.\n        for (const id in this.participants) {\n            if (this.participants.hasOwnProperty(id)) {\n                const participantWrapper = this.participants[id];\n\n                window.setTimeout(participantWrapper.sendRequest, 200);\n            }\n        }\n    }\n\n    /**\n     * Handles a message that was received.\n     *\n     * @param participant - The message sender.\n     * @param payload - The payload of the message.\n     */\n    messageReceived(participant, payload) {\n        // Listen to E2E PING requests and responses from other participants\n        // in the conference.\n        if (payload.type === E2E_PING_REQUEST) {\n            this.handleRequest(participant.getId(), payload);\n        } else if (payload.type === E2E_PING_RESPONSE) {\n            this.handleResponse(participant.getId(), payload);\n        }\n    }\n\n    /**\n     * Handles a participant joining the conference. Starts to send ping\n     * requests to the participant.\n     *\n     * @param {String} id - The ID of the participant.\n     * @param {JitsiParticipant} participant - The participant that joined.\n     */\n    participantJoined(id, participant) {\n        if (this.pingIntervalMs <= 0) {\n            return;\n        }\n\n        if (this.participants[id]) {\n            logger.info(\n                `Participant wrapper already exists for ${id}. Clearing.`);\n            this.participants[id].clearIntervals();\n            delete this.participants[id];\n        }\n\n        this.participants[id] = new ParticipantWrapper(participant, this);\n    }\n\n    /**\n     * Handles a participant leaving the conference. Stops sending requests.\n     *\n     * @param {String} id - The ID of the participant.\n     */\n    participantLeft(id) {\n        if (this.pingIntervalMs <= 0) {\n            return;\n        }\n\n        if (this.participants[id]) {\n            this.participants[id].clearIntervals();\n            delete this.participants[id];\n        }\n    }\n\n    /**\n     * Handles a ping request coming from another participant.\n     *\n     * @param {string} participantId - The ID of the participant who sent the\n     * request.\n     * @param {Object} request - The request.\n     */\n    handleRequest(participantId, request) {\n        // If it's a valid request, just send a response.\n        if (request && request.id) {\n            const response = {\n                type: E2E_PING_RESPONSE,\n                id: request.id\n            };\n\n            this.sendMessage(response, participantId);\n        } else {\n            logger.info(\n                `Received an invalid e2e ping request from ${participantId}.`);\n        }\n    }\n\n    /**\n     * Handles a ping response coming from another participant\n     * @param {string} participantId - The ID of the participant who sent the\n     * response.\n     * @param {Object} response - The response.\n     */\n    handleResponse(participantId, response) {\n        const participantWrapper = this.participants[participantId];\n\n        if (participantWrapper) {\n            participantWrapper.handleResponse(response);\n        }\n    }\n\n    /**\n     * Stops this E2ePing (i.e. stop sending requests).\n     */\n    stop() {\n        logger.info('Stopping e2eping');\n\n        this.conference.off(\n            JitsiConferenceEvents.USER_JOINED,\n            this.participantJoined);\n        this.conference.off(\n            JitsiConferenceEvents.USER_LEFT,\n            this.participantLeft);\n        this.conference.off(\n            JitsiConferenceEvents.ENDPOINT_MESSAGE_RECEIVED,\n            this.messageReceived);\n        this.conference.off(\n            JitsiConferenceEvents.DATA_CHANNEL_OPENED,\n            this.dataChannelOpened);\n\n        for (const id in this.participants) {\n            if (this.participants.hasOwnProperty(id)) {\n                this.participants[id].clearIntervals();\n            }\n        }\n\n        this.participants = {};\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./modules/e2eping/e2eping.js","import {\n    CONNECTION_DISCONNECTED,\n    CONNECTION_ESTABLISHED,\n    CONNECTION_FAILED\n} from './JitsiConnectionEvents';\nimport XMPP from './modules/xmpp/xmpp';\n\n/**\n * @typedef {Object} UpgradeRoleError\n *\n * @property {JitsiConnectionErrors} [connectionError] - One of\n * {@link JitsiConnectionErrors} which occurred when trying to connect to the\n * XMPP server.\n * @property {String} [authenticationError] - One of XMPP error conditions\n * returned by Jicofo on authentication attempt. See\n * {@link https://xmpp.org/rfcs/rfc3920.html#streams-error}.\n * @property {String} [message] - More details about the error.\n * @property {Object} [credentials] - The credentials that failed the\n * authentication.\n * @property {String} [credentials.jid] - The XMPP ID part of the credentials\n * that failed the authentication.\n * @property {string} [credentials.password] - The password part of the\n * credentials that failed the authentication.\n *\n * NOTE If neither one of the errors is present, then the operation has been\n * canceled.\n */\n\n/* eslint-disable no-invalid-this */\n\n/**\n * Connects to the XMPP server using the specified credentials and contacts\n * Jicofo in order to obtain a session ID (which is then stored in the local\n * storage). The user's role of the parent conference will be upgraded to\n * moderator (by Jicofo). It's also used to join the conference when starting\n * from anonymous domain and only authenticated users are allowed to create new\n * rooms.\n *\n * @param {Object} options\n * @param {string} options.id - XMPP user's ID to log in. For example,\n * user@xmpp-server.com.\n * @param {string} options.password - XMPP user's password to log in with.\n * @param {string} [options.roomPassword] - The password to join the MUC with.\n * @param {Function} [options.onLoginSuccessful] - Callback called when logging\n * into the XMPP server was successful. The next step will be to obtain a new\n * session ID from Jicofo and join the MUC using it which will effectively\n * upgrade the user's role to moderator.\n * @returns {Object} A <tt>thenable</tt> which (1) settles when the process of\n * authenticating and upgrading the role of the specified XMPP user finishes and\n * (2) has a <tt>cancel</tt> method that allows the caller to interrupt the\n * process. If the process finishes successfully, the session ID has been stored\n * in the settings and the <tt>thenable</tt> is resolved. If the process\n * finishes with failure, the <tt>thenable</tt> is rejected with reason of type\n * {@link UpgradeRoleError} which will have either <tt>connectionError</tt> or\n * <tt>authenticationError</tt> property set depending on which of the steps has\n * failed. If <tt>cancel</tt> is called before the process finishes, then the\n * thenable will be rejected with an empty object (i.e. no error property will\n * be set on the rejection reason).\n */\nexport default function authenticateAndUpgradeRole({\n    // 1. Log the specified XMPP user in.\n    id,\n    password,\n\n    // 2. Let the API client/consumer know as soon as the XMPP user has been\n    //    successfully logged in.\n    onLoginSuccessful,\n\n    // 3. Join the MUC.\n    roomPassword\n}) {\n    let canceled = false;\n    let rejectPromise;\n    let xmpp = new XMPP(this.connection.options);\n\n    const process = new Promise((resolve, reject) => {\n        // The process is represented by a Thenable with a cancel method. The\n        // Thenable is implemented using Promise and the cancel using the\n        // Promise's reject function.\n        rejectPromise = reject;\n\n\n        xmpp.addListener(\n            CONNECTION_DISCONNECTED,\n            () => {\n                xmpp = undefined;\n            });\n        xmpp.addListener(\n            CONNECTION_ESTABLISHED,\n            () => {\n                if (canceled) {\n                    return;\n                }\n\n                // Let the caller know that the XMPP login was successful.\n                onLoginSuccessful && onLoginSuccessful();\n\n                // Now authenticate with Jicofo and get a new session ID.\n                const room\n                    = xmpp.createRoom(this.options.name, this.options.config);\n\n                room.moderator.authenticate()\n                    .then(() => {\n                        xmpp && xmpp.disconnect();\n\n                        if (canceled) {\n                            return;\n                        }\n\n                        // At this point we should have the new session ID\n                        // stored in the settings. Jicofo will allow to join the\n                        // room.\n                        this.join(roomPassword);\n\n                        resolve();\n                    })\n                    .catch(({ error, message }) => {\n                        xmpp.disconnect();\n\n                        reject({\n                            authenticationError: error,\n                            message\n                        });\n                    });\n            });\n        xmpp.addListener(\n            CONNECTION_FAILED,\n            (connectionError, message, credentials) => {\n                reject({\n                    connectionError,\n                    credentials,\n                    message\n                });\n                xmpp = undefined;\n            });\n\n        canceled || xmpp.connect(id, password);\n    });\n\n    /**\n     * Cancels the process, if it's in progress, of authenticating and upgrading\n     * the role of the local participant/user.\n     *\n     * @public\n     * @returns {void}\n     */\n    process.cancel = () => {\n        canceled = true;\n        rejectPromise({});\n        xmpp && xmpp.disconnect();\n    };\n\n    return process;\n}\n\n/* eslint-enable no-invalid-this */\n\n\n\n// WEBPACK FOOTER //\n// ./authenticateAndUpgradeRole.js","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(require('strophe.js')) :\n\ttypeof define === 'function' && define.amd ? define(['strophe.js'], factory) :\n\t(factory(global.window));\n}(this, (function (strophe_js) { 'use strict';\n\nstrophe_js.Strophe.addConnectionPlugin('disco',\n{\n    _connection: null,\n    _identities : [],\n    _features : [],\n    _items : [],\n    /** Function: init\n     * Plugin init\n     *\n     * Parameters:\n     *   (Strophe.Connection) conn - Strophe connection\n     */\n    init: function(conn)\n    {\n    this._connection = conn;\n        this._identities = [];\n        this._features   = [];\n        this._items      = [];\n        // disco info\n        conn.addHandler(this._onDiscoInfo.bind(this), strophe_js.Strophe.NS.DISCO_INFO, 'iq', 'get', null, null);\n        // disco items\n        conn.addHandler(this._onDiscoItems.bind(this), strophe_js.Strophe.NS.DISCO_ITEMS, 'iq', 'get', null, null);\n    },\n    /** Function: addIdentity\n     * See http://xmpp.org/registrar/disco-categories.html\n     * Parameters:\n     *   (String) category - category of identity (like client, automation, etc ...)\n     *   (String) type - type of identity (like pc, web, bot , etc ...)\n     *   (String) name - name of identity in natural language\n     *   (String) lang - lang of name parameter\n     *\n     * Returns:\n     *   Boolean\n     */\n    addIdentity: function(category, type, name, lang)\n    {\n        for (var i=0; i<this._identities.length; i++)\n        {\n            if (this._identities[i].category == category &&\n                this._identities[i].type == type &&\n                this._identities[i].name == name &&\n                this._identities[i].lang == lang)\n            {\n                return false;\n            }\n        }\n        this._identities.push({category: category, type: type, name: name, lang: lang});\n        return true;\n    },\n    /** Function: addFeature\n     *\n     * Parameters:\n     *   (String) var_name - feature name (like jabber:iq:version)\n     *\n     * Returns:\n     *   boolean\n     */\n    addFeature: function(var_name)\n    {\n        for (var i=0; i<this._features.length; i++)\n        {\n             if (this._features[i] == var_name)\n                 return false;\n        }\n        this._features.push(var_name);\n        return true;\n    },\n    /** Function: removeFeature\n     *\n     * Parameters:\n     *   (String) var_name - feature name (like jabber:iq:version)\n     *\n     * Returns:\n     *   boolean\n     */\n    removeFeature: function(var_name)\n    {\n        for (var i=0; i<this._features.length; i++)\n        {\n             if (this._features[i] === var_name){\n                 this._features.splice(i,1);\n                 return true;\n             }\n        }\n        return false;\n    },\n    /** Function: addItem\n     *\n     * Parameters:\n     *   (String) jid\n     *   (String) name\n     *   (String) node\n     *   (Function) call_back\n     *\n     * Returns:\n     *   boolean\n     */\n    addItem: function(jid, name, node, call_back)\n    {\n        if (node && !call_back)\n            return false;\n        this._items.push({jid: jid, name: name, node: node, call_back: call_back});\n        return true;\n    },\n    /** Function: info\n     * Info query\n     *\n     * Parameters:\n     *   (Function) call_back\n     *   (String) jid\n     *   (String) node\n     */\n    info: function(jid, node, success, error, timeout)\n    {\n        var attrs = {xmlns: strophe_js.Strophe.NS.DISCO_INFO};\n        if (node)\n            attrs.node = node;\n\n        var info = strophe_js.$iq({from:this._connection.jid,\n                         to:jid, type:'get'}).c('query', attrs);\n        this._connection.sendIQ(info, success, error, timeout);\n    },\n    /** Function: items\n     * Items query\n     *\n     * Parameters:\n     *   (Function) call_back\n     *   (String) jid\n     *   (String) node\n     */\n    items: function(jid, node, success, error, timeout)\n    {\n        var attrs = {xmlns: strophe_js.Strophe.NS.DISCO_ITEMS};\n        if (node)\n            attrs.node = node;\n\n        var items = strophe_js.$iq({from:this._connection.jid,\n                         to:jid, type:'get'}).c('query', attrs);\n        this._connection.sendIQ(items, success, error, timeout);\n    },\n\n    /** PrivateFunction: _buildIQResult\n     */\n    _buildIQResult: function(stanza, query_attrs)\n    {\n        var id   =  stanza.getAttribute('id');\n        var from = stanza.getAttribute('from');\n        var iqresult = strophe_js.$iq({type: 'result', id: id});\n\n        if (from !== null) {\n            iqresult.attrs({to: from});\n        }\n\n        return iqresult.c('query', query_attrs);\n    },\n\n    /** PrivateFunction: _onDiscoInfo\n     * Called when receive info request\n     */\n    _onDiscoInfo: function(stanza)\n    {\n        var node = stanza.getElementsByTagName('query')[0].getAttribute('node');\n        var attrs = {xmlns: strophe_js.Strophe.NS.DISCO_INFO};\n        var i;\n        if (node)\n        {\n            attrs.node = node;\n        }\n        var iqresult = this._buildIQResult(stanza, attrs);\n        for (i=0; i<this._identities.length; i++)\n        {\n            attrs = {category: this._identities[i].category,\n                         type    : this._identities[i].type};\n            if (this._identities[i].name)\n                attrs.name = this._identities[i].name;\n            if (this._identities[i].lang)\n                attrs['xml:lang'] = this._identities[i].lang;\n            iqresult.c('identity', attrs).up();\n        }\n        for (i=0; i<this._features.length; i++)\n        {\n            iqresult.c('feature', {'var':this._features[i]}).up();\n        }\n        this._connection.send(iqresult.tree());\n        return true;\n    },\n    /** PrivateFunction: _onDiscoItems\n     * Called when receive items request\n     */\n    _onDiscoItems: function(stanza)\n    {\n        var query_attrs = {xmlns: strophe_js.Strophe.NS.DISCO_ITEMS};\n        var node = stanza.getElementsByTagName('query')[0].getAttribute('node');\n        var items, i;\n        if (node)\n        {\n            query_attrs.node = node;\n            items = [];\n            for (i = 0; i < this._items.length; i++)\n            {\n                if (this._items[i].node == node)\n                {\n                    items = this._items[i].call_back(stanza);\n                    break;\n                }\n            }\n        }\n        else\n        {\n            items = this._items;\n        }\n        var iqresult = this._buildIQResult(stanza, query_attrs);\n        for (i = 0; i < items.length; i++)\n        {\n            var attrs = {jid:  items[i].jid};\n            if (items[i].name)\n                attrs.name = items[i].name;\n            if (items[i].node)\n                attrs.node = items[i].node;\n            iqresult.c('item', attrs).up();\n        }\n        this._connection.send(iqresult.tree());\n        return true;\n    }\n});\n\n})));\n//# sourceMappingURL=strophe.disco.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/strophejs-plugin-disco/lib/strophe.disco.js\n// module id = 80\n// module chunks = 0","/* global $ */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport { Strophe } from 'strophe.js';\n\nimport ChatRoom from './ChatRoom';\nimport { ConnectionPluginListenable } from './ConnectionPlugin';\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\n\nconst logger = getLogger(__filename);\n\n/**\n * MUC connection plugin.\n */\nclass MucConnectionPlugin extends ConnectionPluginListenable {\n    /**\n     *\n     * @param xmpp\n     */\n    constructor(xmpp) {\n        super();\n        this.xmpp = xmpp;\n        this.rooms = {};\n    }\n\n    /**\n     *\n     * @param connection\n     */\n    init(connection) {\n        super.init(connection);\n\n        // add handlers (just once)\n        this.connection.addHandler(this.onPresence.bind(this), null,\n            'presence', null, null, null, null);\n        this.connection.addHandler(this.onPresenceUnavailable.bind(this),\n            null, 'presence', 'unavailable', null);\n        this.connection.addHandler(this.onPresenceError.bind(this), null,\n            'presence', 'error', null);\n        this.connection.addHandler(this.onMessage.bind(this), null,\n            'message', null, null);\n        this.connection.addHandler(this.onMute.bind(this),\n            'http://jitsi.org/jitmeet/audio', 'iq', 'set', null, null);\n    }\n\n    /**\n     *\n     * @param jid\n     * @param password\n     * @param options\n     */\n    createRoom(jid, password, options) {\n        const roomJid = Strophe.getBareJidFromJid(jid);\n\n        if (this.rooms[roomJid]) {\n            const errmsg = 'You are already in the room!';\n\n            logger.error(errmsg);\n            throw new Error(errmsg);\n        }\n        this.rooms[roomJid] = new ChatRoom(this.connection, jid,\n            password, this.xmpp, options);\n        this.eventEmitter.emit(\n            XMPPEvents.EMUC_ROOM_ADDED, this.rooms[roomJid]);\n\n        return this.rooms[roomJid];\n    }\n\n    /**\n     *\n     * @param jid\n     */\n    doLeave(jid) {\n        this.eventEmitter.emit(\n            XMPPEvents.EMUC_ROOM_REMOVED, this.rooms[jid]);\n        delete this.rooms[jid];\n    }\n\n    /**\n     *\n     * @param pres\n     */\n    onPresence(pres) {\n        const from = pres.getAttribute('from');\n\n        // What is this for? A workaround for something?\n        if (pres.getAttribute('type')) {\n            return true;\n        }\n\n        const room = this.rooms[Strophe.getBareJidFromJid(from)];\n\n        if (!room) {\n            return;\n        }\n\n        // Parse status.\n        if ($(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]'\n            + '>status[code=\"201\"]').length) {\n            room.createNonAnonymousRoom();\n        }\n\n        room.onPresence(pres);\n\n        return true;\n    }\n\n    /**\n     *\n     * @param pres\n     */\n    onPresenceUnavailable(pres) {\n        const from = pres.getAttribute('from');\n        const room = this.rooms[Strophe.getBareJidFromJid(from)];\n\n        if (!room) {\n            return;\n        }\n\n        room.onPresenceUnavailable(pres, from);\n\n        return true;\n    }\n\n    /**\n     *\n     * @param pres\n     */\n    onPresenceError(pres) {\n        const from = pres.getAttribute('from');\n        const room = this.rooms[Strophe.getBareJidFromJid(from)];\n\n        if (!room) {\n            return;\n        }\n\n        room.onPresenceError(pres, from);\n\n        return true;\n    }\n\n    /**\n     *\n     * @param msg\n     */\n    onMessage(msg) {\n        // FIXME: this is a hack. but jingle on muc makes nickchanges hard\n        const from = msg.getAttribute('from');\n        const room = this.rooms[Strophe.getBareJidFromJid(from)];\n\n        if (!room) {\n            return;\n        }\n\n        room.onMessage(msg, from);\n\n        return true;\n    }\n\n    /**\n     * TODO: Document\n     * @param iq\n     */\n    onMute(iq) {\n        const from = iq.getAttribute('from');\n        const room = this.rooms[Strophe.getBareJidFromJid(from)];\n\n        // XXX What are the semantics of the return value? Why is it sometimes\n        // undefined and sometimes a boolean?\n        if (!room) {\n            return;\n        }\n\n        room.onMute(iq);\n\n        return true;\n    }\n}\n\n/**\n *\n * @param XMPP\n */\nexport default function(XMPP) {\n    Strophe.addConnectionPlugin('emuc', new MucConnectionPlugin(XMPP));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.emuc.js","/* global $, Promise */\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\n\nimport { $iq, Strophe } from 'strophe.js';\n\nconst XMPPEvents = require('../../service/xmpp/XMPPEvents');\nconst AuthenticationEvents\n    = require('../../service/authentication/AuthenticationEvents');\nconst GlobalOnErrorHandler = require('../util/GlobalOnErrorHandler');\n\nimport browser from '../browser';\nimport Settings from '../settings/Settings';\n\n/**\n *\n * @param step\n */\nfunction createExpBackoffTimer(step) {\n    let count = 1;\n\n    return function(reset) {\n        // Reset call\n        if (reset) {\n            count = 1;\n\n            return;\n        }\n\n        // Calculate next timeout\n        const timeout = Math.pow(2, count - 1);\n\n        count += 1;\n\n        return timeout * step;\n    };\n}\n\n/* eslint-disable max-params */\n\n/**\n *\n * @param roomName\n * @param xmpp\n * @param emitter\n * @param options\n */\nexport default function Moderator(roomName, xmpp, emitter, options) {\n    this.roomName = roomName;\n    this.xmppService = xmpp;\n    this.getNextTimeout = createExpBackoffTimer(1000);\n    this.getNextErrorTimeout = createExpBackoffTimer(1000);\n\n    // External authentication stuff\n    this.externalAuthEnabled = false;\n    this.options = options;\n\n    // Sip gateway can be enabled by configuring Jigasi host in config.js or\n    // it will be enabled automatically if focus detects the component through\n    // service discovery.\n    this.sipGatewayEnabled\n        = this.options.connection.hosts\n            && this.options.connection.hosts.call_control !== undefined;\n\n    this.eventEmitter = emitter;\n\n    this.connection = this.xmppService.connection;\n\n    // FIXME: Message listener that talks to POPUP window\n    /**\n     *\n     * @param event\n     */\n    function listener(event) {\n        if (event.data && event.data.sessionId) {\n            if (event.origin !== window.location.origin) {\n                logger.warn(\n                    `Ignoring sessionId from different origin: ${\n                        event.origin}`);\n\n                return;\n            }\n            Settings.sessionId = event.data.sessionId;\n\n            // After popup is closed we will authenticate\n        }\n    }\n\n    // Register\n    if (window.addEventListener) {\n        window.addEventListener('message', listener, false);\n    } else {\n        window.attachEvent('onmessage', listener);\n    }\n}\n\n/* eslint-enable max-params */\n\nModerator.prototype.isExternalAuthEnabled = function() {\n    return this.externalAuthEnabled;\n};\n\nModerator.prototype.isSipGatewayEnabled = function() {\n    return this.sipGatewayEnabled;\n};\n\nModerator.prototype.onMucMemberLeft = function(jid) {\n    logger.info(`Someone left is it focus ? ${jid}`);\n    const resource = Strophe.getResourceFromJid(jid);\n\n    if (resource === 'focus') {\n        logger.info(\n            'Focus has left the room - leaving conference');\n        this.eventEmitter.emit(XMPPEvents.FOCUS_LEFT);\n    }\n};\n\nModerator.prototype.setFocusUserJid = function(focusJid) {\n    if (!this.focusUserJid) {\n        this.focusUserJid = focusJid;\n        logger.info(`Focus jid set to:  ${this.focusUserJid}`);\n    }\n};\n\nModerator.prototype.getFocusUserJid = function() {\n    return this.focusUserJid;\n};\n\nModerator.prototype.getFocusComponent = function() {\n    // Get focus component address\n    let focusComponent = this.options.connection.hosts.focus;\n\n    // If not specified use default:  'focus.domain'\n\n    if (!focusComponent) {\n        focusComponent = `focus.${this.options.connection.hosts.domain}`;\n    }\n\n    return focusComponent;\n};\n\nModerator.prototype.createConferenceIq = function() {\n    // Generate create conference IQ\n    const elem = $iq({ to: this.getFocusComponent(),\n        type: 'set' });\n\n    // Session Id used for authentication\n    const { sessionId } = Settings;\n    const machineUID = Settings.machineId;\n    const config = this.options.conference;\n\n    logger.info(`Session ID: ${sessionId} machine UID: ${machineUID}`);\n\n    elem.c('conference', {\n        xmlns: 'http://jitsi.org/protocol/focus',\n        room: this.roomName,\n        'machine-uid': machineUID\n    });\n\n    if (sessionId) {\n        elem.attrs({ 'session-id': sessionId });\n    }\n    if (this.options.connection.enforcedBridge !== undefined) {\n        elem.c(\n            'property', {\n                name: 'enforcedBridge',\n                value: this.options.connection.enforcedBridge\n            }).up();\n    }\n\n    // Tell the focus we have Jigasi configured\n    if (this.options.connection.hosts !== undefined\n        && this.options.connection.hosts.call_control !== undefined) {\n        elem.c(\n            'property', {\n                name: 'call_control',\n                value: this.options.connection.hosts.call_control\n            }).up();\n    }\n    if (config.channelLastN !== undefined) {\n        elem.c(\n            'property', {\n                name: 'channelLastN',\n                value: config.channelLastN\n            }).up();\n    }\n    elem.c(\n        'property', {\n            name: 'disableRtx',\n            value: Boolean(config.disableRtx)\n        }).up();\n\n    if (config.enableTcc !== undefined) {\n        elem.c(\n                'property', {\n                    name: 'enableTcc',\n                    value: Boolean(config.enableTcc)\n                }).up();\n    }\n    if (config.enableRemb !== undefined) {\n        elem.c(\n                'property', {\n                    name: 'enableRemb',\n                    value: Boolean(config.enableRemb)\n                }).up();\n    }\n    if (config.minParticipants !== undefined) {\n        elem.c(\n                'property', {\n                    name: 'minParticipants',\n                    value: config.minParticipants\n                }).up();\n    }\n\n    elem.c(\n        'property', {\n            name: 'enableLipSync',\n            value: this.options.connection.enableLipSync !== false\n        }).up();\n    if (config.audioPacketDelay !== undefined) {\n        elem.c(\n            'property', {\n                name: 'audioPacketDelay',\n                value: config.audioPacketDelay\n            }).up();\n    }\n    if (config.startBitrate) {\n        elem.c(\n            'property', {\n                name: 'startBitrate',\n                value: config.startBitrate\n            }).up();\n    }\n    if (config.minBitrate) {\n        elem.c(\n            'property', {\n                name: 'minBitrate',\n                value: config.minBitrate\n            }).up();\n    }\n    if (config.testing && config.testing.octo\n        && typeof config.testing.octo.probability === 'number') {\n        if (Math.random() < config.testing.octo.probability) {\n            elem.c(\n                'property', {\n                    name: 'octo',\n                    value: true\n                }).up();\n        }\n    }\n\n    let openSctp;\n\n    switch (this.options.conference.openBridgeChannel) {\n    case 'datachannel':\n    case true:\n    case undefined:\n        openSctp = true;\n        break;\n    case 'websocket':\n        openSctp = false;\n        break;\n    }\n\n    if (openSctp && !browser.supportsDataChannels()) {\n        openSctp = false;\n    }\n\n    elem.c(\n        'property', {\n            name: 'openSctp',\n            value: openSctp\n        }).up();\n\n    if (this.options.conference.startAudioMuted !== undefined) {\n        elem.c(\n            'property', {\n                name: 'startAudioMuted',\n                value: this.options.conference.startAudioMuted\n            }).up();\n    }\n    if (this.options.conference.startVideoMuted !== undefined) {\n        elem.c(\n            'property', {\n                name: 'startVideoMuted',\n                value: this.options.conference.startVideoMuted\n            }).up();\n    }\n    if (this.options.conference.stereo !== undefined) {\n        elem.c(\n            'property', {\n                name: 'stereo',\n                value: this.options.conference.stereo\n            }).up();\n    }\n    if (this.options.conference.useRoomAsSharedDocumentName !== undefined) {\n        elem.c(\n            'property', {\n                name: 'useRoomAsSharedDocumentName',\n                value: this.options.conference.useRoomAsSharedDocumentName\n            }).up();\n    }\n    elem.up();\n\n    return elem;\n};\n\n\nModerator.prototype.parseSessionId = function(resultIq) {\n    // eslint-disable-next-line newline-per-chained-call\n    const sessionId = $(resultIq).find('conference').attr('session-id');\n\n    if (sessionId) {\n        logger.info(`Received sessionId:  ${sessionId}`);\n        Settings.sessionId = sessionId;\n    }\n};\n\nModerator.prototype.parseConfigOptions = function(resultIq) {\n    // eslint-disable-next-line newline-per-chained-call\n    this.setFocusUserJid($(resultIq).find('conference').attr('focusjid'));\n\n    const authenticationEnabled\n        = $(resultIq).find(\n            '>conference>property'\n            + '[name=\\'authentication\\'][value=\\'true\\']').length > 0;\n\n    logger.info(`Authentication enabled: ${authenticationEnabled}`);\n\n    this.externalAuthEnabled = $(resultIq).find(\n        '>conference>property'\n            + '[name=\\'externalAuth\\'][value=\\'true\\']').length > 0;\n\n    logger.info(\n        `External authentication enabled: ${this.externalAuthEnabled}`);\n\n    if (!this.externalAuthEnabled) {\n        // We expect to receive sessionId in 'internal' authentication mode\n        this.parseSessionId(resultIq);\n    }\n\n    // eslint-disable-next-line newline-per-chained-call\n    const authIdentity = $(resultIq).find('>conference').attr('identity');\n\n    this.eventEmitter.emit(AuthenticationEvents.IDENTITY_UPDATED,\n        authenticationEnabled, authIdentity);\n\n    // Check if focus has auto-detected Jigasi component(this will be also\n    // included if we have passed our host from the config)\n    if ($(resultIq).find(\n        '>conference>property'\n        + '[name=\\'sipGatewayEnabled\\'][value=\\'true\\']').length) {\n        this.sipGatewayEnabled = true;\n    }\n\n    logger.info(`Sip gateway enabled:  ${this.sipGatewayEnabled}`);\n};\n\n// FIXME We need to show the fact that we're waiting for the focus to the user\n// (or that the focus is not available)\n/**\n * Allocates the conference focus.\n *\n * @param {Function} callback - the function to be called back upon the\n * successful allocation of the conference focus\n */\nModerator.prototype.allocateConferenceFocus = function(callback) {\n    // Try to use focus user JID from the config\n    this.setFocusUserJid(this.options.connection.focusUserJid);\n\n    // Send create conference IQ\n    this.connection.sendIQ(\n        this.createConferenceIq(),\n        result => this._allocateConferenceFocusSuccess(result, callback),\n        error => this._allocateConferenceFocusError(error, callback));\n\n    // XXX We're pressed for time here because we're beginning a complex and/or\n    // lengthy conference-establishment process which supposedly involves\n    // multiple RTTs. We don't have the time to wait for Strophe to decide to\n    // send our IQ.\n    this.connection.flush();\n};\n\n/**\n * Invoked by {@link #allocateConferenceFocus} upon its request receiving an\n * error result.\n *\n * @param error - the error result of the request that\n * {@link #allocateConferenceFocus} sent\n * @param {Function} callback - the function to be called back upon the\n * successful allocation of the conference focus\n */\nModerator.prototype._allocateConferenceFocusError = function(error, callback) {\n    // If the session is invalid, remove and try again without session ID to get\n    // a new one\n    const invalidSession\n        = $(error).find('>error>session-invalid').length\n            || $(error).find('>error>not-acceptable').length;\n\n    if (invalidSession) {\n        logger.info('Session expired! - removing');\n        Settings.sessionId = undefined;\n    }\n    if ($(error).find('>error>graceful-shutdown').length) {\n        this.eventEmitter.emit(XMPPEvents.GRACEFUL_SHUTDOWN);\n\n        return;\n    }\n\n    // Check for error returned by the reservation system\n    const reservationErr = $(error).find('>error>reservation-error');\n\n    if (reservationErr.length) {\n        // Trigger error event\n        const errorCode = reservationErr.attr('error-code');\n        const errorTextNode = $(error).find('>error>text');\n        let errorMsg;\n\n        if (errorTextNode) {\n            errorMsg = errorTextNode.text();\n        }\n        this.eventEmitter.emit(\n            XMPPEvents.RESERVATION_ERROR,\n            errorCode,\n            errorMsg);\n\n        return;\n    }\n\n    // Not authorized to create new room\n    if ($(error).find('>error>not-authorized').length) {\n        logger.warn('Unauthorized to start the conference', error);\n        const toDomain = Strophe.getDomainFromJid(error.getAttribute('to'));\n\n        if (toDomain !== this.options.connection.hosts.anonymousdomain) {\n            // FIXME \"is external\" should come either from the focus or\n            // config.js\n            this.externalAuthEnabled = true;\n        }\n        this.eventEmitter.emit(XMPPEvents.AUTHENTICATION_REQUIRED);\n\n        return;\n    }\n    const waitMs = this.getNextErrorTimeout();\n    const errmsg = `Focus error, retry after ${waitMs}`;\n\n    GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n    logger.error(errmsg, error);\n\n    // Show message\n    const focusComponent = this.getFocusComponent();\n    const retrySec = waitMs / 1000;\n\n    // FIXME: message is duplicated ? Do not show in case of session invalid\n    // which means just a retry\n\n    if (!invalidSession) {\n        this.eventEmitter.emit(\n            XMPPEvents.FOCUS_DISCONNECTED,\n            focusComponent,\n            retrySec);\n    }\n\n    // Reset response timeout\n    this.getNextTimeout(true);\n    window.setTimeout(() => this.allocateConferenceFocus(callback), waitMs);\n};\n\n/**\n * Invoked by {@link #allocateConferenceFocus} upon its request receiving a\n * success (i.e. non-error) result.\n *\n * @param result - the success (i.e. non-error) result of the request that\n * {@link #allocateConferenceFocus} sent\n * @param {Function} callback - the function to be called back upon the\n * successful allocation of the conference focus\n */\nModerator.prototype._allocateConferenceFocusSuccess = function(\n        result,\n        callback) {\n    // Setup config options\n    this.parseConfigOptions(result);\n\n    // Reset the error timeout (because we haven't failed here).\n    this.getNextErrorTimeout(true);\n\n    // eslint-disable-next-line newline-per-chained-call\n    if ($(result).find('conference').attr('ready') === 'true') {\n        // Reset the non-error timeout (because we've succeeded here).\n        this.getNextTimeout(true);\n\n        // Exec callback\n        callback();\n    } else {\n        const waitMs = this.getNextTimeout();\n\n        logger.info(`Waiting for the focus... ${waitMs}`);\n        window.setTimeout(() => this.allocateConferenceFocus(callback),\n            waitMs);\n    }\n};\n\nModerator.prototype.authenticate = function() {\n    return new Promise((resolve, reject) => {\n        this.connection.sendIQ(\n            this.createConferenceIq(),\n            result => {\n                this.parseSessionId(result);\n                resolve();\n            },\n            errorIq => reject({\n                error: $(errorIq).find('iq>error :first')\n                    .prop('tagName'),\n                message: $(errorIq).find('iq>error>text')\n                    .text()\n            })\n        );\n    });\n};\n\nModerator.prototype.getLoginUrl = function(urlCallback, failureCallback) {\n    this._getLoginUrl(/* popup */ false, urlCallback, failureCallback);\n};\n\n/**\n *\n * @param {boolean} popup false for {@link Moderator#getLoginUrl} or true for\n * {@link Moderator#getPopupLoginUrl}\n * @param urlCb\n * @param failureCb\n */\nModerator.prototype._getLoginUrl = function(popup, urlCb, failureCb) {\n    const iq = $iq({ to: this.getFocusComponent(),\n        type: 'get' });\n    const attrs = {\n        xmlns: 'http://jitsi.org/protocol/focus',\n        room: this.roomName,\n        'machine-uid': Settings.machineId\n    };\n    let str = 'auth url'; // for logger\n\n    if (popup) {\n        attrs.popup = true;\n        str = `POPUP ${str}`;\n    }\n    iq.c('login-url', attrs);\n\n    /**\n     * Implements a failure callback which reports an error message and an error\n     * through (1) GlobalOnErrorHandler, (2) logger, and (3) failureCb.\n     *\n     * @param {string} errmsg the error messsage to report\n     * @param {*} error the error to report (in addition to errmsg)\n     */\n    function reportError(errmsg, err) {\n        GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n        logger.error(errmsg, err);\n        failureCb(err);\n    }\n    this.connection.sendIQ(\n        iq,\n        result => {\n            // eslint-disable-next-line newline-per-chained-call\n            let url = $(result).find('login-url').attr('url');\n\n            url = decodeURIComponent(url);\n            if (url) {\n                logger.info(`Got ${str}: ${url}`);\n                urlCb(url);\n            } else {\n                reportError(`Failed to get ${str} from the focus`, result);\n            }\n        },\n        reportError.bind(undefined, `Get ${str} error`)\n    );\n};\n\nModerator.prototype.getPopupLoginUrl = function(urlCallback, failureCallback) {\n    this._getLoginUrl(/* popup */ true, urlCallback, failureCallback);\n};\n\nModerator.prototype.logout = function(callback) {\n    const iq = $iq({ to: this.getFocusComponent(),\n        type: 'set' });\n    const { sessionId } = Settings;\n\n    if (!sessionId) {\n        callback();\n\n        return;\n    }\n    iq.c('logout', {\n        xmlns: 'http://jitsi.org/protocol/focus',\n        'session-id': sessionId\n    });\n    this.connection.sendIQ(\n        iq,\n        result => {\n            // eslint-disable-next-line newline-per-chained-call\n            let logoutUrl = $(result).find('logout').attr('logout-url');\n\n            if (logoutUrl) {\n                logoutUrl = decodeURIComponent(logoutUrl);\n            }\n            logger.info(`Log out OK, url: ${logoutUrl}`, result);\n            Settings.sessionId = undefined;\n            callback(logoutUrl);\n        },\n        error => {\n            const errmsg = 'Logout error';\n\n            GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n            logger.error(errmsg, error);\n        }\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/moderator.js","/* global $, __filename */\n\nimport {\n    ACTION_JINGLE_TR_RECEIVED,\n    ACTION_JINGLE_TR_SUCCESS,\n    createJingleEvent\n} from '../../service/statistics/AnalyticsEvents';\nimport { getLogger } from 'jitsi-meet-logger';\nimport { $iq, Strophe } from 'strophe.js';\n\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\nimport RandomUtil from '../util/RandomUtil';\nimport Statistics from '../statistics/statistics';\n\nimport JingleSessionPC from './JingleSessionPC';\nimport ConnectionPlugin from './ConnectionPlugin';\n\nconst logger = getLogger(__filename);\n\n// XXX Strophe is build around the idea of chaining function calls so allow long\n// function call chains.\n/* eslint-disable newline-per-chained-call */\n\n/**\n *\n */\nclass JingleConnectionPlugin extends ConnectionPlugin {\n    /**\n     * Creates new <tt>JingleConnectionPlugin</tt>\n     * @param {XMPP} xmpp\n     * @param {EventEmitter} eventEmitter\n     * @param {Object} iceConfig an object that holds the iceConfig to be passed\n     * to the p2p and the jvb <tt>PeerConnection</tt>.\n     */\n    constructor(xmpp, eventEmitter, iceConfig) {\n        super();\n        this.xmpp = xmpp;\n        this.eventEmitter = eventEmitter;\n        this.sessions = {};\n        this.jvbIceConfig = iceConfig.jvb;\n        this.p2pIceConfig = iceConfig.p2p;\n        this.mediaConstraints = {\n            offerToReceiveAudio: true,\n            offerToReceiveVideo: true\n        };\n    }\n\n    /**\n     *\n     * @param connection\n     */\n    init(connection) {\n        super.init(connection);\n        this.connection.addHandler(this.onJingle.bind(this),\n            'urn:xmpp:jingle:1', 'iq', 'set', null, null);\n    }\n\n    /**\n     *\n     * @param iq\n     */\n    onJingle(iq) {\n        const sid = $(iq).find('jingle').attr('sid');\n        const action = $(iq).find('jingle').attr('action');\n        const fromJid = iq.getAttribute('from');\n\n        // send ack first\n        const ack = $iq({ type: 'result',\n            to: fromJid,\n            id: iq.getAttribute('id')\n        });\n\n        logger.log(`on jingle ${action} from ${fromJid}`, iq);\n        let sess = this.sessions[sid];\n\n        if (action !== 'session-initiate') {\n            if (!sess) {\n                ack.attrs({ type: 'error' });\n                ack.c('error', { type: 'cancel' })\n                    .c('item-not-found', {\n                        xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'\n                    })\n                    .up()\n                    .c('unknown-session', {\n                        xmlns: 'urn:xmpp:jingle:errors:1'\n                    });\n                logger.warn('invalid session id', iq);\n                this.connection.send(ack);\n\n                return true;\n            }\n\n            // local jid is not checked\n            if (fromJid !== sess.remoteJid) {\n                logger.warn(\n                    'jid mismatch for session id', sid, sess.remoteJid, iq);\n                ack.attrs({ type: 'error' });\n                ack.c('error', { type: 'cancel' })\n                    .c('item-not-found', {\n                        xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'\n                    })\n                    .up()\n                    .c('unknown-session', {\n                        xmlns: 'urn:xmpp:jingle:errors:1'\n                    });\n                this.connection.send(ack);\n\n                return true;\n            }\n        } else if (sess !== undefined) {\n            // Existing session with same session id. This might be out-of-order\n            // if the sess.remoteJid is the same as from.\n            ack.attrs({ type: 'error' });\n            ack.c('error', { type: 'cancel' })\n                .c('service-unavailable', {\n                    xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'\n                })\n                .up();\n            logger.warn('duplicate session id', sid, iq);\n            this.connection.send(ack);\n\n            return true;\n        }\n        const now = window.performance.now();\n\n        // FIXME that should work most of the time, but we'd have to\n        // think how secure it is to assume that user with \"focus\"\n        // nickname is Jicofo.\n        const isP2P = Strophe.getResourceFromJid(fromJid) !== 'focus';\n\n        // see http://xmpp.org/extensions/xep-0166.html#concepts-session\n\n        switch (action) {\n        case 'session-initiate': {\n            logger.log('(TIME) received session-initiate:\\t', now);\n            const startMuted = $(iq).find('jingle>startmuted');\n\n            if (startMuted && startMuted.length > 0) {\n                const audioMuted = startMuted.attr('audio');\n                const videoMuted = startMuted.attr('video');\n\n                this.eventEmitter.emit(\n                    XMPPEvents.START_MUTED_FROM_FOCUS,\n                    audioMuted === 'true',\n                    videoMuted === 'true');\n            }\n\n            logger.info(\n                `Marking session from ${fromJid\n                } as ${isP2P ? '' : '*not*'} P2P`);\n            sess\n                = new JingleSessionPC(\n                    $(iq).find('jingle').attr('sid'),\n                    $(iq).attr('to'),\n                    fromJid,\n                    this.connection,\n                    this.mediaConstraints,\n                    isP2P ? this.p2pIceConfig : this.jvbIceConfig,\n                    isP2P,\n                    /* initiator */ false);\n\n            this.sessions[sess.sid] = sess;\n\n            this.eventEmitter.emit(XMPPEvents.CALL_INCOMING,\n                sess, $(iq).find('>jingle'), now);\n            break;\n        }\n        case 'session-accept': {\n            this.eventEmitter.emit(\n                XMPPEvents.CALL_ACCEPTED, sess, $(iq).find('>jingle'));\n            break;\n        }\n        case 'content-modify': {\n            sess.modifyContents($(iq).find('>jingle'));\n            break;\n        }\n        case 'transport-info': {\n            this.eventEmitter.emit(\n                XMPPEvents.TRANSPORT_INFO, sess, $(iq).find('>jingle'));\n            break;\n        }\n        case 'session-terminate': {\n            logger.log('terminating...', sess.sid);\n            let reasonCondition = null;\n            let reasonText = null;\n\n            if ($(iq).find('>jingle>reason').length) {\n                reasonCondition\n                    = $(iq).find('>jingle>reason>:first')[0].tagName;\n                reasonText = $(iq).find('>jingle>reason>text').text();\n            }\n            this.terminate(sess.sid, reasonCondition, reasonText);\n            this.eventEmitter.emit(XMPPEvents.CALL_ENDED,\n                sess, reasonCondition, reasonText);\n            break;\n        }\n        case 'transport-replace':\n            logger.info('(TIME) Start transport replace', now);\n            Statistics.sendAnalytics(createJingleEvent(\n                ACTION_JINGLE_TR_RECEIVED,\n                {\n                    p2p: isP2P,\n                    value: now\n                }));\n\n            sess.replaceTransport($(iq).find('>jingle'), () => {\n                const successTime = window.performance.now();\n\n                logger.info('(TIME) Transport replace success!', successTime);\n                Statistics.sendAnalytics(createJingleEvent(\n                    ACTION_JINGLE_TR_SUCCESS,\n                    {\n                        p2p: isP2P,\n                        value: successTime\n                    }));\n            }, error => {\n                GlobalOnErrorHandler.callErrorHandler(error);\n                logger.error('Transport replace failed', error);\n                sess.sendTransportReject();\n            });\n            break;\n        case 'addsource': // FIXME: proprietary, un-jingleish\n        case 'source-add': // FIXME: proprietary\n            sess.addRemoteStream($(iq).find('>jingle>content'));\n            break;\n        case 'removesource': // FIXME: proprietary, un-jingleish\n        case 'source-remove': // FIXME: proprietary\n            sess.removeRemoteStream($(iq).find('>jingle>content'));\n            break;\n        default:\n            logger.warn('jingle action not implemented', action);\n            ack.attrs({ type: 'error' });\n            ack.c('error', { type: 'cancel' })\n                .c('bad-request',\n                    { xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas' })\n                .up();\n            break;\n        }\n        this.connection.send(ack);\n\n        return true;\n    }\n\n    /**\n     * Creates new <tt>JingleSessionPC</tt> meant to be used in a direct P2P\n     * connection, configured as 'initiator'.\n     * @param {string} me our JID\n     * @param {string} peer remote participant's JID\n     * @return {JingleSessionPC}\n     */\n    newP2PJingleSession(me, peer) {\n        const sess\n            = new JingleSessionPC(\n                RandomUtil.randomHexString(12),\n                me,\n                peer,\n                this.connection,\n                this.mediaConstraints,\n                this.p2pIceConfig,\n                /* P2P */ true,\n                /* initiator */ true);\n\n        this.sessions[sess.sid] = sess;\n\n        return sess;\n    }\n\n    /**\n     *\n     * @param sid\n     * @param reasonCondition\n     * @param reasonText\n     */\n    terminate(sid, reasonCondition, reasonText) {\n        if (this.sessions.hasOwnProperty(sid)) {\n            if (this.sessions[sid].state !== 'ended') {\n                this.sessions[sid].onTerminated(reasonCondition, reasonText);\n            }\n            delete this.sessions[sid];\n        }\n    }\n\n    /**\n     *\n     */\n    getStunAndTurnCredentials() {\n        // get stun and turn configuration from server via xep-0215\n        // uses time-limited credentials as described in\n        // http://tools.ietf.org/html/draft-uberti-behave-turn-rest-00\n        //\n        // See https://modules.prosody.im/mod_turncredentials.html\n        // for a prosody module which implements this.\n        //\n        // Currently, this doesn't work with updateIce and therefore credentials\n        // with a long validity have to be fetched before creating the\n        // peerconnection.\n        // TODO: implement refresh via updateIce as described in\n        //      https://code.google.com/p/webrtc/issues/detail?id=1650\n        this.connection.sendIQ(\n            $iq({ type: 'get',\n                to: this.connection.domain })\n                .c('services', { xmlns: 'urn:xmpp:extdisco:1' }),\n            res => {\n                const iceservers = [];\n\n                $(res).find('>services>service').each((idx, el) => {\n                    // eslint-disable-next-line no-param-reassign\n                    el = $(el);\n                    const dict = {};\n                    const type = el.attr('type');\n\n                    switch (type) {\n                    case 'stun':\n                        dict.url = `stun:${el.attr('host')}`;\n                        if (el.attr('port')) {\n                            dict.url += `:${el.attr('port')}`;\n                        }\n                        iceservers.push(dict);\n                        break;\n                    case 'turn':\n                    case 'turns': {\n                        dict.url = `${type}:`;\n                        const username = el.attr('username');\n\n                        // https://code.google.com/p/webrtc/issues/detail\n                        // ?id=1508\n\n                        if (username) {\n                            const match\n                                = navigator.userAgent.match(\n                                    /Chrom(e|ium)\\/([0-9]+)\\./);\n\n                            if (match && parseInt(match[2], 10) < 28) {\n                                dict.url += `${username}@`;\n                            } else {\n                                // only works in M28\n                                dict.username = username;\n                            }\n                        }\n                        dict.url += el.attr('host');\n                        const port = el.attr('port');\n\n                        if (port) {\n                            dict.url += `:${el.attr('port')}`;\n                        }\n                        const transport = el.attr('transport');\n\n                        if (transport && transport !== 'udp') {\n                            dict.url += `?transport=${transport}`;\n                        }\n\n                        dict.credential = el.attr('password')\n                                || dict.credential;\n                        iceservers.push(dict);\n                        break;\n                    }\n                    }\n                });\n\n                const options = this.xmpp.options;\n\n                if (options.useStunTurn) {\n                    // we want to filter and leave only tcp/turns candidates\n                    // which make sense for the jvb connections\n                    this.jvbIceConfig.iceServers\n                        = iceservers.filter(s => s.url.startsWith('turns'));\n                }\n\n                if (options.p2p && options.p2p.useStunTurn) {\n                    this.p2pIceConfig.iceServers = iceservers;\n                }\n\n            }, err => {\n                logger.warn('getting turn credentials failed', err);\n                logger.warn('is mod_turncredentials or similar installed?');\n            });\n\n        // implement push?\n    }\n\n    /**\n     * Returns the data saved in 'updateLog' in a format to be logged.\n     */\n    getLog() {\n        const data = {};\n\n        Object.keys(this.sessions).forEach(sid => {\n            const session = this.sessions[sid];\n            const pc = session.peerconnection;\n\n            if (pc && pc.updateLog) {\n                // FIXME: should probably be a .dump call\n                data[`jingle_${sid}`] = {\n                    updateLog: pc.updateLog,\n                    stats: pc.stats,\n                    url: window.location.href\n                };\n            }\n        });\n\n        return data;\n    }\n}\n\n/* eslint-enable newline-per-chained-call */\n\n/**\n *\n * @param XMPP\n * @param eventEmitter\n * @param iceConfig\n */\nexport default function initJingle(XMPP, eventEmitter, iceConfig) {\n    Strophe.addConnectionPlugin(\n        'jingle',\n        new JingleConnectionPlugin(XMPP, eventEmitter, iceConfig));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.jingle.js","/* global __filename, $ */\n\nimport {\n    ICE_DURATION,\n    ICE_STATE_CHANGED\n} from '../../service/statistics/AnalyticsEvents';\nimport async from 'async';\nimport { getLogger } from 'jitsi-meet-logger';\nimport { $iq, Strophe } from 'strophe.js';\nimport { integerHash } from '../util/StringUtils';\n\nimport JingleSession from './JingleSession';\nimport * as JingleSessionState from './JingleSessionState';\nimport SDP from './SDP';\nimport SDPDiffer from './SDPDiffer';\nimport SDPUtil from './SDPUtil';\nimport SignalingLayerImpl from './SignalingLayerImpl';\n\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport Statistics from '../statistics/statistics';\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\n\nconst logger = getLogger(__filename);\n\n/**\n * Constant tells how long we're going to wait for IQ response, before timeout\n * error is  triggered.\n * @type {number}\n */\nconst IQ_TIMEOUT = 10000;\n\n/*\n * The default number of samples (per stat) to keep when webrtc stats gathering\n * is enabled in TraceablePeerConnection.\n */\nconst DEFAULT_MAX_STATS = 300;\n\n/**\n * @typedef {Object} JingleSessionPCOptions\n * @property {Object} abTesting - A/B testing related options (ask George).\n * @property {boolean} abTesting.enableSuspendVideoTest - enables the suspend\n * video test ?(ask George).\n * @property {boolean} disableH264 - Described in the config.js[1].\n * @property {boolean} disableRtx - Described in the config.js[1].\n * @property {boolean} disableSimulcast - Described in the config.js[1].\n * @property {boolean} enableLayerSuspension - Described in the config.js[1].\n * @property {boolean} failICE - it's an option used in the tests. Set to\n * <tt>true</tt> to block any real candidates and make the ICE fail.\n * @property {boolean} gatherStats - Described in the config.js[1].\n * @property {object} p2p - Peer to peer related options (FIXME those could be\n * fetched from config.p2p on the upper level).\n * @property {boolean} p2p.disableH264 - Described in the config.js[1].\n * @property {boolean} p2p.preferH264 - Described in the config.js[1].\n * @property {boolean} preferH264 - Described in the config.js[1].\n * @property {Object} testing - Testing and/or experimental options.\n * @property {boolean} testing.enableFirefoxSimulcast - Described in the\n * config.js[1].\n * @property {boolean} webrtcIceUdpDisable - Described in the config.js[1].\n * @property {boolean} webrtcIceTcpDisable - Described in the config.js[1].\n *\n * [1]: https://github.com/jitsi/jitsi-meet/blob/master/config.js\n */\n/**\n *\n */\nexport default class JingleSessionPC extends JingleSession {\n    /**\n     * Parses 'senders' attribute of the video content.\n     * @param {jQuery} jingleContents\n     * @return {string|null} one of the values of content \"senders\" attribute\n     * defined by Jingle. If there is no \"senders\" attribute or if the value is\n     * invalid then <tt>null</tt> will be returned.\n     * @private\n     */\n    static parseVideoSenders(jingleContents) {\n        const videoContents = jingleContents.find('>content[name=\"video\"]');\n\n        if (videoContents.length) {\n            const senders = videoContents[0].getAttribute('senders');\n\n            if (senders === 'both'\n                || senders === 'initiator'\n                || senders === 'responder'\n                || senders === 'none') {\n                return senders;\n            }\n        }\n\n        return null;\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     * Creates new <tt>JingleSessionPC</tt>\n     * @param {string} sid the Jingle Session ID - random string which\n     * identifies the session\n     * @param {string} localJid our JID\n     * @param {string} remoteJid remote peer JID\n     * @param {Strophe.Connection} connection Strophe XMPP connection instance\n     * used to send packets.\n     * @param mediaConstraints the media constraints object passed to\n     * createOffer/Answer, as defined by the WebRTC standard\n     * @param iceConfig the ICE servers config object as defined by the WebRTC\n     * standard.\n     * @param {boolean} isP2P indicates whether this instance is\n     * meant to be used in a direct, peer to peer connection or <tt>false</tt>\n     * if it's a JVB connection.\n     * @param {boolean} isInitiator indicates if it will be the side which\n     * initiates the session.\n     * @constructor\n     *\n     * @implements {SignalingLayer}\n     */\n    constructor(\n            sid,\n            localJid,\n            remoteJid,\n            connection,\n            mediaConstraints,\n            iceConfig,\n            isP2P,\n            isInitiator) {\n        super(\n            sid,\n            localJid,\n            remoteJid, connection, mediaConstraints, iceConfig, isInitiator);\n\n        /**\n         * Stores result of {@link window.performance.now()} at the time when\n         * ICE enters 'checking' state.\n         * @type {number|null} null if no value has been stored yet\n         * @private\n         */\n        this._iceCheckingStartedTimestamp = null;\n\n        /**\n         * Stores result of {@link window.performance.now()} at the time when\n         * first ICE candidate is spawned by the peerconnection to mark when\n         * ICE gathering started. That's, because ICE gathering state changed\n         * events are not supported by most of the browsers, so we try something\n         * that will work everywhere. It may not be as accurate, but given that\n         * 'host' candidate usually comes first, the delay should be minimal.\n         * @type {number|null} null if no value has been stored yet\n         * @private\n         */\n        this._gatheringStartedTimestamp = null;\n\n        /**\n         * Indicates whether or not this session is willing to send/receive\n         * video media. When set to <tt>false</tt> the underlying peer\n         * connection will disable local video transfer and the remote peer will\n         * be will be asked to stop sending video via 'content-modify' IQ\n         * (the senders attribute of video contents will be adjusted\n         * accordingly). Note that this notification is sent only in P2P\n         * session, because Jicofo does not support it yet. Obviously when\n         * the value is changed from <tt>false</tt> to <tt>true</tt> another\n         * notification will be sent to resume video transfer on the remote\n         * side.\n         * @type {boolean}\n         * @private\n         */\n        this._localVideoActive = true;\n\n        /**\n         * Indicates whether or not the remote peer has video transfer active.\n         * When set to <tt>true</tt> it means that remote peer is neither\n         * sending nor willing to receive video. In such case we'll ask\n         * our peerconnection to stop sending video by calling\n         * {@link TraceablePeerConnection.setVideoTransferActive} with\n         * <tt>false</tt>.\n         * @type {boolean}\n         * @private\n         */\n        this._remoteVideoActive = true;\n\n        /**\n         * Marks that ICE gathering duration has been reported already. That\n         * prevents reporting it again, after eventual 'transport-replace' (JVB\n         * conference migration/ICE restart).\n         * @type {boolean}\n         * @private\n         */\n        this._gatheringReported = false;\n\n        this.lasticecandidate = false;\n        this.closed = false;\n\n        /**\n         * Indicates whether or not this <tt>JingleSessionPC</tt> is used in\n         * a peer to peer type of session.\n         * @type {boolean} <tt>true</tt> if it's a peer to peer\n         * session or <tt>false</tt> if it's a JVB session\n         */\n        this.isP2P = isP2P;\n\n        /**\n         * The signaling layer implementation.\n         * @type {SignalingLayerImpl}\n         */\n        this.signalingLayer = new SignalingLayerImpl();\n\n        this.modificationQueue\n            = async.queue(this._processQueueTasks.bind(this), 1);\n\n        /**\n         * Flag used to guarantee that the connection established event is\n         * triggered just once.\n         * @type {boolean}\n         */\n        this.wasConnected = false;\n\n        /**\n         * Keeps track of how long (in ms) it took from ICE start to ICE\n         * connect.\n         *\n         * @type {number}\n         */\n        this.establishmentDuration = undefined;\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Checks whether or not this session instance has been ended and eventually\n     * logs a message which mentions that given <tt>actionName</tt> was\n     * cancelled.\n     * @param {string} actionName\n     * @return {boolean} <tt>true</tt> if this {@link JingleSessionPC} has\n     * entered {@link JingleSessionState.ENDED} or <tt>false</tt> otherwise.\n     * @private\n     */\n    _assertNotEnded(actionName) {\n        if (this.state === JingleSessionState.ENDED) {\n            logger.log(\n                `The session has ended - cancelling action: ${actionName}`);\n\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * @inheritDoc\n     * @param {JingleSessionPCOptions} options  - a set of config options.\n     */\n    doInitialize(options) {\n        this.failICE = Boolean(options.failICE);\n        this.lasticecandidate = false;\n        this.options = options;\n\n        /**\n         * {@code true} if reconnect is in progress.\n         * @type {boolean}\n         */\n        this.isReconnect = false;\n\n        /**\n         * Set to {@code true} if the connection was ever stable\n         * @type {boolean}\n         */\n        this.wasstable = false;\n        this.webrtcIceUdpDisable = Boolean(options.webrtcIceUdpDisable);\n        this.webrtcIceTcpDisable = Boolean(options.webrtcIceTcpDisable);\n\n        const pcOptions = { disableRtx: options.disableRtx };\n\n        if (options.gatherStats) {\n            pcOptions.maxstats = DEFAULT_MAX_STATS;\n        }\n\n        if (this.isP2P) {\n            // simulcast needs to be disabled for P2P (121) calls\n            pcOptions.disableSimulcast = true;\n            pcOptions.disableH264 = options.p2p && options.p2p.disableH264;\n            pcOptions.preferH264 = options.p2p && options.p2p.preferH264;\n\n            const abtestSuspendVideo = this._abtestSuspendVideoEnabled(options);\n\n            if (typeof abtestSuspendVideo !== 'undefined') {\n                pcOptions.abtestSuspendVideo = abtestSuspendVideo;\n            }\n        } else {\n            // H264 does not support simulcast, so it needs to be disabled.\n            pcOptions.disableSimulcast\n                = options.disableSimulcast\n                    || (options.preferH264 && !options.disableH264);\n            pcOptions.preferH264 = options.preferH264;\n            pcOptions.enableFirefoxSimulcast\n                = options.testing && options.testing.enableFirefoxSimulcast;\n            pcOptions.enableLayerSuspension = options.enableLayerSuspension;\n        }\n\n        this.peerconnection\n            = this.rtc.createPeerConnection(\n                    this.signalingLayer,\n                    this.iceConfig,\n                    this.isP2P,\n                    pcOptions);\n\n        this.peerconnection.onicecandidate = ev => {\n            if (!ev) {\n                // There was an incomplete check for ev before which left\n                // the last line of the function unprotected from a potential\n                // throw of an exception. Consequently, it may be argued that\n                // the check is unnecessary. Anyway, I'm leaving it and making\n                // the check complete.\n                return;\n            }\n\n            // XXX this is broken, candidate is not parsed.\n            const candidate = ev.candidate;\n            const now = window.performance.now();\n\n            if (candidate) {\n                if (this._gatheringStartedTimestamp === null) {\n                    this._gatheringStartedTimestamp = now;\n                }\n\n                // Discard candidates of disabled protocols.\n                let protocol = candidate.protocol;\n\n                if (typeof protocol === 'string') {\n                    protocol = protocol.toLowerCase();\n                    if (protocol === 'tcp' || protocol === 'ssltcp') {\n                        if (this.webrtcIceTcpDisable) {\n                            return;\n                        }\n                    } else if (protocol === 'udp') {\n                        if (this.webrtcIceUdpDisable) {\n                            return;\n                        }\n                    }\n                }\n            } else if (!this._gatheringReported) {\n                // End of gathering\n                Statistics.sendAnalytics(\n                    ICE_DURATION,\n                    {\n                        phase: 'gathering',\n                        value: now - this._gatheringStartedTimestamp,\n                        p2p: this.isP2P,\n                        initiator: this.isInitiator\n                    });\n                this._gatheringReported = true;\n            }\n            this.sendIceCandidate(candidate);\n        };\n\n        // Note there is a change in the spec about closed:\n        // This value moved into the RTCPeerConnectionState enum in\n        // the May 13, 2016 draft of the specification, as it reflects the state\n        // of the RTCPeerConnection, not the signaling connection. You now\n        // detect a closed connection by checking for connectionState to be\n        // \"closed\" instead.\n        // I suppose at some point this will be moved to onconnectionstatechange\n        this.peerconnection.onsignalingstatechange = () => {\n            if (!this.peerconnection) {\n                return;\n            }\n            if (this.peerconnection.signalingState === 'stable') {\n                this.wasstable = true;\n            } else if (\n                (this.peerconnection.signalingState === 'closed'\n                || this.peerconnection.connectionState === 'closed')\n                && !this.closed) {\n                this.room.eventEmitter.emit(XMPPEvents.SUSPEND_DETECTED, this);\n            }\n        };\n\n        /**\n         * The oniceconnectionstatechange event handler contains the code to\n         * execute when the iceconnectionstatechange event, of type Event,\n         * is received by this RTCPeerConnection. Such an event is sent when\n         * the value of RTCPeerConnection.iceConnectionState changes.\n         */\n        this.peerconnection.oniceconnectionstatechange = () => {\n            if (!this.peerconnection\n                    || !this._assertNotEnded('oniceconnectionstatechange')) {\n                return;\n            }\n            const now = window.performance.now();\n\n            if (!this.isP2P) {\n                this.room.connectionTimes[\n                    `ice.state.${this.peerconnection.iceConnectionState}`]\n                    = now;\n            }\n            logger.log(\n                `(TIME) ICE ${this.peerconnection.iceConnectionState}`\n                    + ` P2P? ${this.isP2P}:\\t`,\n                now);\n\n            Statistics.sendAnalytics(\n                ICE_STATE_CHANGED,\n                {\n                    p2p: this.isP2P,\n                    state: this.peerconnection.iceConnectionState,\n                    'signaling_state': this.peerconnection.signalingState,\n                    reconnect: this.isReconnect,\n                    value: now\n                });\n\n            this.room.eventEmitter.emit(\n                XMPPEvents.ICE_CONNECTION_STATE_CHANGED,\n                this,\n                this.peerconnection.iceConnectionState);\n            switch (this.peerconnection.iceConnectionState) {\n            case 'checking':\n                this._iceCheckingStartedTimestamp = now;\n                break;\n            case 'connected':\n                // Informs interested parties that the connection has been\n                // restored.\n                if (this.peerconnection.signalingState === 'stable') {\n                    if (this.isReconnect) {\n                        this.room.eventEmitter.emit(\n                            XMPPEvents.CONNECTION_RESTORED, this);\n                    }\n                }\n\n                if (!this.wasConnected && this.wasstable) {\n\n                    Statistics.sendAnalytics(\n                        ICE_DURATION,\n                        {\n                            phase: 'checking',\n                            value: now - this._iceCheckingStartedTimestamp,\n                            p2p: this.isP2P,\n                            initiator: this.isInitiator\n                        });\n\n                    // Switch between ICE gathering and ICE checking whichever\n                    // started first (scenarios are different for initiator\n                    // vs responder)\n                    const iceStarted\n                        = Math.min(\n                            this._iceCheckingStartedTimestamp,\n                            this._gatheringStartedTimestamp);\n\n                    this.establishmentDuration = now - iceStarted;\n\n                    Statistics.sendAnalytics(\n                        ICE_DURATION,\n                        {\n                            phase: 'establishment',\n                            value: this.establishmentDuration,\n                            p2p: this.isP2P,\n                            initiator: this.isInitiator\n                        });\n\n                    this.wasConnected = true;\n                    this.room.eventEmitter.emit(\n                        XMPPEvents.CONNECTION_ESTABLISHED, this);\n                }\n                this.isReconnect = false;\n                break;\n            case 'disconnected':\n                if (this.closed) {\n                    break;\n                }\n                this.isReconnect = true;\n\n                // Informs interested parties that the connection has been\n                // interrupted.\n                if (this.wasstable) {\n                    this.room.eventEmitter.emit(\n                        XMPPEvents.CONNECTION_INTERRUPTED, this);\n                }\n                break;\n            case 'failed':\n                this.room.eventEmitter.emit(\n                    XMPPEvents.CONNECTION_ICE_FAILED, this);\n                this.room.eventEmitter.emit(\n                    XMPPEvents.CONFERENCE_SETUP_FAILED,\n                    this,\n                    new Error('ICE fail'));\n                break;\n            }\n        };\n        this.peerconnection.onnegotiationneeded = () => {\n            this.room.eventEmitter.emit(XMPPEvents.PEERCONNECTION_READY, this);\n        };\n\n        // The signaling layer will bind it's listeners at this point\n        this.signalingLayer.setChatRoom(this.room);\n\n        if (!this.isP2P && options.enableLayerSuspension) {\n            // If this is the bridge session, we'll listen for\n            // IS_SELECTED_CHANGED events and notify the peer connection\n            this.rtc.addListener(RTCEvents.IS_SELECTED_CHANGED,\n                isSelected => {\n                    this.peerconnection.setIsSelected(isSelected);\n                    logger.info('Doing local O/A due to '\n                        + 'IS_SELECTED_CHANGED event');\n                    this.modificationQueue.push(finishedCallback => {\n                        this._renegotiate()\n                            .then(finishedCallback)\n                            .catch(finishedCallback);\n                    });\n                }\n            );\n        }\n    }\n\n    /**\n     * Sends given candidate in Jingle 'transport-info' message.\n     * @param {RTCIceCandidate} candidate the WebRTC ICE candidate instance\n     * @private\n     */\n    sendIceCandidate(candidate) {\n        const localSDP = new SDP(this.peerconnection.localDescription.sdp);\n\n        if (candidate && !this.lasticecandidate) {\n            const ice\n                = SDPUtil.iceparams(\n                    localSDP.media[candidate.sdpMLineIndex], localSDP.session);\n            const jcand = SDPUtil.candidateToJingle(candidate.candidate);\n\n            if (!(ice && jcand)) {\n                const errorMesssage = 'failed to get ice && jcand';\n\n                GlobalOnErrorHandler.callErrorHandler(new Error(errorMesssage));\n                logger.error(errorMesssage);\n\n                return;\n            }\n            ice.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\n\n            if (this.usedrip) {\n                if (this.dripContainer.length === 0) {\n                    // start 20ms callout\n                    setTimeout(() => {\n                        if (this.dripContainer.length === 0) {\n                            return;\n                        }\n                        this.sendIceCandidates(this.dripContainer);\n                        this.dripContainer = [];\n                    }, 20);\n                }\n                this.dripContainer.push(candidate);\n            } else {\n                this.sendIceCandidates([ candidate ]);\n            }\n        } else {\n            logger.log('sendIceCandidate: last candidate.');\n\n            // FIXME: remember to re-think in ICE-restart\n            this.lasticecandidate = true;\n        }\n    }\n\n    /**\n     * Sends given candidates in Jingle 'transport-info' message.\n     * @param {Array<RTCIceCandidate>} candidates an array of the WebRTC ICE\n     * candidate instances\n     * @private\n     */\n    sendIceCandidates(candidates) {\n        if (!this._assertNotEnded('sendIceCandidates')) {\n\n            return;\n        }\n\n        logger.log('sendIceCandidates', candidates);\n        const cand = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', { xmlns: 'urn:xmpp:jingle:1',\n                action: 'transport-info',\n                initiator: this.initiatorJid,\n                sid: this.sid });\n\n        const localSDP = new SDP(this.peerconnection.localDescription.sdp);\n\n        for (let mid = 0; mid < localSDP.media.length; mid++) {\n            const cands = candidates.filter(el => el.sdpMLineIndex === mid);\n            const mline\n                = SDPUtil.parseMLine(localSDP.media[mid].split('\\r\\n')[0]);\n\n            if (cands.length > 0) {\n                const ice\n                    = SDPUtil.iceparams(localSDP.media[mid], localSDP.session);\n\n                ice.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\n                cand.c('content', {\n                    creator: this.initiatorJid === this.localJid\n                        ? 'initiator' : 'responder',\n                    name: cands[0].sdpMid ? cands[0].sdpMid : mline.media\n                }).c('transport', ice);\n                for (let i = 0; i < cands.length; i++) {\n                    const candidate\n                        = SDPUtil.candidateToJingle(cands[i].candidate);\n\n                    // Mangle ICE candidate if 'failICE' test option is enabled\n\n                    if (this.failICE) {\n                        candidate.ip = '1.1.1.1';\n                    }\n                    cand.c('candidate', candidate).up();\n                }\n\n                // add fingerprint\n                const fingerprintLine\n                    = SDPUtil.findLine(\n                        localSDP.media[mid],\n                        'a=fingerprint:', localSDP.session);\n\n                if (fingerprintLine) {\n                    const tmp = SDPUtil.parseFingerprint(fingerprintLine);\n\n                    tmp.required = true;\n                    cand.c(\n                        'fingerprint',\n                        { xmlns: 'urn:xmpp:jingle:apps:dtls:0' })\n                        .t(tmp.fingerprint);\n                    delete tmp.fingerprint;\n                    cand.attrs(tmp);\n                    cand.up();\n                }\n                cand.up(); // transport\n                cand.up(); // content\n            }\n        }\n\n        // might merge last-candidate notification into this, but it is called\n        // a lot later. See webrtc issue #2340\n        // logger.log('was this the last candidate', this.lasticecandidate);\n        this.connection.sendIQ(\n            cand, null, this.newJingleErrorHandler(cand), IQ_TIMEOUT);\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    addIceCandidates(elem) {\n        if (this.peerconnection.signalingState === 'closed') {\n            logger.warn('Ignored add ICE candidate when in closed state');\n\n            return;\n        }\n\n        const iceCandidates = [];\n\n        elem.find('>content>transport>candidate')\n            .each((idx, candidate) => {\n                let line = SDPUtil.candidateFromJingle(candidate);\n\n                line = line.replace('\\r\\n', '').replace('a=', '');\n\n                // FIXME this code does not care to handle\n                // non-bundle transport\n                const rtcCandidate = new RTCIceCandidate({\n                    sdpMLineIndex: 0,\n\n                    // FF comes up with more complex names like audio-23423,\n                    // Given that it works on both Chrome and FF without\n                    // providing it, let's leave it like this for the time\n                    // being...\n                    // sdpMid: 'audio',\n                    sdpMid: '',\n                    candidate: line\n                });\n\n                iceCandidates.push(rtcCandidate);\n            });\n\n        if (!iceCandidates.length) {\n            logger.error(\n                'No ICE candidates to add ?', elem[0] && elem[0].outerHTML);\n\n            return;\n        }\n\n        // We want to have this task queued, so that we know it is executed,\n        // after the initial sRD/sLD offer/answer cycle was done (based on\n        // the assumption that candidates are spawned after the offer/answer\n        // and XMPP preserves order).\n        const workFunction = finishedCallback => {\n            for (const iceCandidate of iceCandidates) {\n                this.peerconnection.addIceCandidate(iceCandidate)\n                    .then(\n                        () => logger.debug('addIceCandidate ok!'),\n                        err => logger.error('addIceCandidate failed!', err));\n            }\n\n            finishedCallback();\n        };\n\n        logger.debug(\n            `Queued add (${iceCandidates.length}) ICE candidates task...`);\n        this.modificationQueue.push(workFunction);\n    }\n\n    /**\n     *\n     * @param contents\n     */\n    readSsrcInfo(contents) {\n        const ssrcs\n            = $(contents).find(\n                '>description>'\n                    + 'source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]');\n\n        ssrcs.each((i, ssrcElement) => {\n            const ssrc = Number(ssrcElement.getAttribute('ssrc'));\n\n            if (this.isP2P) {\n                // In P2P all SSRCs are owner by the remote peer\n                this.signalingLayer.setSSRCOwner(\n                    ssrc, Strophe.getResourceFromJid(this.remoteJid));\n            } else {\n                $(ssrcElement)\n                    .find('>ssrc-info[xmlns=\"http://jitsi.org/jitmeet\"]')\n                    .each((i3, ssrcInfoElement) => {\n                        const owner = ssrcInfoElement.getAttribute('owner');\n\n                        if (owner && owner.length) {\n                            if (isNaN(ssrc) || ssrc < 0) {\n                                logger.warn(\n                                    `Invalid SSRC ${ssrc} value received`\n                                        + ` for ${owner}`);\n                            } else {\n                                this.signalingLayer.setSSRCOwner(\n                                    ssrc,\n                                    Strophe.getResourceFromJid(owner));\n                            }\n                        }\n                    });\n            }\n        });\n    }\n\n    /**\n     * Makes the underlying TraceablePeerConnection generate new SSRC for\n     * the recvonly video stream.\n     * @deprecated\n     */\n    generateRecvonlySsrc() {\n        if (this.peerconnection) {\n            this.peerconnection.generateRecvonlySsrc();\n        } else {\n            logger.error(\n                'Unable to generate recvonly SSRC - no peerconnection');\n        }\n    }\n\n    /* eslint-disable max-params */\n    /**\n     * Accepts incoming Jingle 'session-initiate' and should send\n     * 'session-accept' in result.\n     * @param jingleOffer jQuery selector pointing to the jingle element of\n     * the offer IQ\n     * @param success callback called when we accept incoming session\n     * successfully and receive RESULT packet to 'session-accept' sent.\n     * @param failure function(error) called if for any reason we fail to accept\n     * the incoming offer. 'error' argument can be used to log some details\n     * about the error.\n     * @param {Array<JitsiLocalTrack>} [localTracks] the optional list of\n     * the local tracks that will be added, before the offer/answer cycle\n     * executes. We allow the localTracks to optionally be passed in so that\n     * the addition of the local tracks and the processing of the initial offer\n     * can all be done atomically. We want to make sure that any other\n     * operations which originate in the XMPP Jingle messages related with\n     * this session to be executed with an assumption that the initial\n     * offer/answer cycle has been executed already.\n     */\n    acceptOffer(jingleOffer, success, failure, localTracks) {\n        this.setOfferAnswerCycle(\n            jingleOffer,\n            () => {\n                // FIXME we may not care about RESULT packet for session-accept\n                // then we should either call 'success' here immediately or\n                // modify sendSessionAccept method to do that\n                this.sendSessionAccept(success, failure);\n            },\n            failure,\n            localTracks);\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Creates an offer and sends Jingle 'session-initiate' to the remote peer.\n     * @param {Array<JitsiLocalTrack>} localTracks the local tracks that will be\n     * added, before the offer/answer cycle executes (for the local track\n     * addition to be an atomic operation together with the offer/answer).\n     */\n    invite(localTracks) {\n        if (!this.isInitiator) {\n            throw new Error('Trying to invite from the responder session');\n        }\n        const workFunction = finishedCallback => {\n            for (const localTrack of localTracks) {\n                this.peerconnection.addTrack(localTrack);\n            }\n            this.peerconnection.createOffer(this.mediaConstraints)\n                .then(offerSdp => {\n                    this.peerconnection.setLocalDescription(offerSdp)\n                        .then(() => {\n                            // NOTE that the offer is obtained from\n                            // the localDescription getter as it needs to go\n                            // though the transformation chain.\n                            this.sendSessionInitiate(\n                                this.peerconnection.localDescription.sdp);\n                            finishedCallback();\n                        }, error => {\n                            logger.error(\n                                'Failed to set local SDP', error, offerSdp);\n                            finishedCallback(error);\n                        });\n                }, error => {\n                    logger.error(\n                        'Failed to create an offer',\n                        error,\n                        this.mediaConstraints);\n                    finishedCallback(error);\n                });\n        };\n\n        this.modificationQueue.push(\n            workFunction,\n            error => {\n                if (error) {\n                    logger.error('invite error', error);\n                } else {\n                    logger.debug('invite executed - OK');\n                }\n            });\n    }\n\n    /**\n     * Sends 'session-initiate' to the remote peer.\n     *\n     * NOTE this method is synchronous and we're not waiting for the RESULT\n     * response which would delay the startup process.\n     *\n     * @param {string} offerSdp  - The local session description which will be\n     * used to generate an offer.\n     * @private\n     */\n    sendSessionInitiate(offerSdp) {\n        let init = $iq({\n            to: this.remoteJid,\n            type: 'set'\n        }).c('jingle', {\n            xmlns: 'urn:xmpp:jingle:1',\n            action: 'session-initiate',\n            initiator: this.initiatorJid,\n            sid: this.sid\n        });\n\n        new SDP(offerSdp).toJingle(\n            init,\n            this.isInitiator ? 'initiator' : 'responder');\n        init = init.tree();\n        logger.info('Session-initiate: ', init);\n        this.connection.sendIQ(init,\n            () => {\n                logger.info('Got RESULT for \"session-initiate\"');\n            },\n            error => {\n                logger.error('\"session-initiate\" error', error);\n            },\n            IQ_TIMEOUT);\n    }\n\n    /**\n     * Sets the answer received from the remote peer.\n     * @param jingleAnswer\n     */\n    setAnswer(jingleAnswer) {\n        if (!this.isInitiator) {\n            throw new Error('Trying to set an answer on the responder session');\n        }\n        this.setOfferAnswerCycle(\n            jingleAnswer,\n            () => {\n                logger.info('setAnswer - succeeded');\n            },\n            error => {\n                logger.error('setAnswer failed: ', error);\n            });\n    }\n\n    /* eslint-disable max-params */\n    /**\n     * This is a setRemoteDescription/setLocalDescription cycle which starts at\n     * converting Strophe Jingle IQ into remote offer SDP. Once converted\n     * setRemoteDescription, createAnswer and setLocalDescription calls follow.\n     * @param jingleOfferAnswerIq jQuery selector pointing to the jingle element\n     *        of the offer (or answer) IQ\n     * @param success callback called when sRD/sLD cycle finishes successfully.\n     * @param failure callback called with an error object as an argument if we\n     *        fail at any point during setRD, createAnswer, setLD.\n     * @param {Array<JitsiLocalTrack>} [localTracks] the optional list of\n     * the local tracks that will be added, before the offer/answer cycle\n     * executes (for the local track addition to be an atomic operation together\n     * with the offer/answer).\n     */\n    setOfferAnswerCycle(jingleOfferAnswerIq, success, failure, localTracks) {\n        const workFunction = finishedCallback => {\n\n            if (localTracks) {\n                for (const track of localTracks) {\n                    this.peerconnection.addTrack(track);\n                }\n            }\n\n            const newRemoteSdp\n                = this._processNewJingleOfferIq(jingleOfferAnswerIq);\n            const oldLocalSdp\n                = this.peerconnection.localDescription.sdp;\n\n            this._renegotiate(newRemoteSdp.raw)\n                .then(() => {\n                    if (this.state === JingleSessionState.PENDING) {\n                        this.state = JingleSessionState.ACTIVE;\n\n                        // Sync up video transfer active/inactive only after\n                        // the initial O/A cycle. We want to adjust the video\n                        // media direction only in the local SDP and the Jingle\n                        // contents direction included in the initial\n                        // offer/answer is mapped to the remote SDP. Jingle\n                        // 'content-modify' IQ is processed in a way that it\n                        // will only modify local SDP when remote peer is no\n                        // longer interested in receiving video content.\n                        // Changing media direction in the remote SDP will mess\n                        // up our SDP translation chain (simulcast, video mute,\n                        // RTX etc.)\n                        if (this.isP2P && !this._localVideoActive) {\n                            this.sendContentModify(this._localVideoActive);\n                        }\n                    }\n\n                    // Old local SDP will be available when we're setting answer\n                    // for the first time, but not when offer and it's fine\n                    // since we're generating an answer now it will contain all\n                    // our SSRCs\n                    if (oldLocalSdp) {\n                        const newLocalSdp\n                            = new SDP(this.peerconnection.localDescription.sdp);\n\n                        this.notifyMySSRCUpdate(\n                            new SDP(oldLocalSdp), newLocalSdp);\n                    }\n\n                    finishedCallback();\n                }, error => {\n                    logger.error(\n                        `Error renegotiating after setting new remote ${\n                            this.isInitiator ? 'answer: ' : 'offer: '}${error}`,\n                        newRemoteSdp);\n\n                    this._onJingleFatalError(error);\n                    finishedCallback(error);\n                });\n        };\n\n        this.modificationQueue.push(\n            workFunction,\n            error => {\n                error ? failure(error) : success();\n            });\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Although it states \"replace transport\" it does accept full Jingle offer\n     * which should contain new ICE transport details.\n     * @param jingleOfferElem an element Jingle IQ that contains new offer and\n     *        transport info.\n     * @param success callback called when we succeed to accept new offer.\n     * @param failure function(error) called when we fail to accept new offer.\n     */\n    replaceTransport(jingleOfferElem, success, failure) {\n        this.room.eventEmitter.emit(XMPPEvents.ICE_RESTARTING, this);\n\n        // We need to first reject the 'data' section to have the SCTP stack\n        // cleaned up to signal the known data channel is now invalid. After\n        // that the original offer is set to have the SCTP connection\n        // established with the new bridge.\n        const originalOffer = jingleOfferElem.clone();\n\n        jingleOfferElem\n            .find('>content[name=\\'data\\']')\n            .attr('senders', 'rejected');\n\n        // First set an offer with a rejected 'data' section\n        this.setOfferAnswerCycle(\n            jingleOfferElem,\n            () => {\n                // Now set the original offer(with the 'data' section)\n                this.setOfferAnswerCycle(\n                    originalOffer,\n                    () => {\n                        const localSDP\n                            = new SDP(this.peerconnection.localDescription.sdp);\n\n                        this.sendTransportAccept(localSDP, success, failure);\n                    },\n                    failure);\n            },\n            failure\n        );\n    }\n\n    /**\n     * Sends Jingle 'session-accept' message.\n     * @param {function()} success callback called when we receive 'RESULT'\n     *        packet for the 'session-accept'\n     * @param {function(error)} failure called when we receive an error response\n     *        or when the request has timed out.\n     * @private\n     */\n    sendSessionAccept(success, failure) {\n        // NOTE: since we're just reading from it, we don't need to be within\n        //  the modification queue to access the local description\n        const localSDP = new SDP(this.peerconnection.localDescription.sdp);\n        let accept = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', { xmlns: 'urn:xmpp:jingle:1',\n                action: 'session-accept',\n                initiator: this.initiatorJid,\n                responder: this.responderJid,\n                sid: this.sid });\n\n        if (this.webrtcIceTcpDisable) {\n            localSDP.removeTcpCandidates = true;\n        }\n        if (this.webrtcIceUdpDisable) {\n            localSDP.removeUdpCandidates = true;\n        }\n        if (this.failICE) {\n            localSDP.failICE = true;\n        }\n        localSDP.toJingle(\n            accept,\n            this.initiatorJid === this.localJid ? 'initiator' : 'responder',\n            null);\n\n        // Calling tree() to print something useful\n        accept = accept.tree();\n        logger.info('Sending session-accept', accept);\n        this.connection.sendIQ(accept,\n            success,\n            this.newJingleErrorHandler(accept, error => {\n                failure(error);\n\n                // 'session-accept' is a critical timeout and we'll\n                // have to restart\n                this.room.eventEmitter.emit(\n                    XMPPEvents.SESSION_ACCEPT_TIMEOUT, this);\n            }),\n            IQ_TIMEOUT);\n\n        // XXX Videobridge needs WebRTC's answer (ICE ufrag and pwd, DTLS\n        // fingerprint and setup) ASAP in order to start the connection\n        // establishment.\n        //\n        // FIXME Flushing the connection at this point triggers an issue with\n        // BOSH request handling in Prosody on slow connections.\n        //\n        // The problem is that this request will be quite large and it may take\n        // time before it reaches Prosody. In the meantime Strophe may decide\n        // to send the next one. And it was observed that a small request with\n        // 'transport-info' usually follows this one. It does reach Prosody\n        // before the previous one was completely received. 'rid' on the server\n        // is increased and Prosody ignores the request with 'session-accept'.\n        // It will never reach Jicofo and everything in the request table is\n        // lost. Removing the flush does not guarantee it will never happen, but\n        // makes it much less likely('transport-info' is bundled with\n        // 'session-accept' and any immediate requests).\n        //\n        // this.connection.flush();\n    }\n\n    /**\n     * Will send 'content-modify' IQ in order to ask the remote peer to\n     * either stop or resume sending video media.\n     * @param {boolean} videoTransferActive <tt>false</tt> to let the other peer\n     * know that we're not sending nor interested in receiving video contents.\n     * When set to <tt>true</tt> remote peer will be asked to resume video\n     * transfer.\n     * @private\n     */\n    sendContentModify(videoTransferActive) {\n        const newSendersValue = videoTransferActive ? 'both' : 'none';\n\n        const sessionModify\n            = $iq({\n                to: this.remoteJid,\n                type: 'set'\n            })\n                .c('jingle', {\n                    xmlns: 'urn:xmpp:jingle:1',\n                    action: 'content-modify',\n                    initiator: this.initiatorJid,\n                    sid: this.sid\n                })\n                .c('content', {\n                    name: 'video',\n                    senders: newSendersValue\n                });\n\n        logger.info(\n            `Sending content-modify, video senders: ${newSendersValue}`);\n\n        this.connection.sendIQ(\n            sessionModify,\n            null,\n            this.newJingleErrorHandler(sessionModify),\n            IQ_TIMEOUT);\n    }\n\n    /**\n     * Sends Jingle 'transport-accept' message which is a response to\n     * 'transport-replace'.\n     * @param localSDP the 'SDP' object with local session description\n     * @param success callback called when we receive 'RESULT' packet for\n     *        'transport-replace'\n     * @param failure function(error) called when we receive an error response\n     *        or when the request has timed out.\n     * @private\n     */\n    sendTransportAccept(localSDP, success, failure) {\n        let transportAccept = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', {\n                xmlns: 'urn:xmpp:jingle:1',\n                action: 'transport-accept',\n                initiator: this.initiatorJid,\n                sid: this.sid\n            });\n\n        localSDP.media.forEach((medialines, idx) => {\n            const mline = SDPUtil.parseMLine(medialines.split('\\r\\n')[0]);\n\n            transportAccept.c('content',\n                {\n                    creator:\n                        this.initiatorJid === this.localJid\n                            ? 'initiator'\n                            : 'responder',\n                    name: mline.media\n                }\n            );\n            localSDP.transportToJingle(idx, transportAccept);\n            transportAccept.up();\n        });\n\n        // Calling tree() to print something useful to the logger\n        transportAccept = transportAccept.tree();\n        logger.info('Sending transport-accept: ', transportAccept);\n\n        this.connection.sendIQ(transportAccept,\n            success,\n            this.newJingleErrorHandler(transportAccept, failure),\n            IQ_TIMEOUT);\n    }\n\n    /**\n     * Sends Jingle 'transport-reject' message which is a response to\n     * 'transport-replace'.\n     * @param success callback called when we receive 'RESULT' packet for\n     *        'transport-replace'\n     * @param failure function(error) called when we receive an error response\n     *        or when the request has timed out.\n     *\n     * FIXME method should be marked as private, but there's some spaghetti that\n     *       needs to be fixed prior doing that\n     */\n    sendTransportReject(success, failure) {\n        // Send 'transport-reject', so that the focus will\n        // know that we've failed\n        let transportReject = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', {\n                xmlns: 'urn:xmpp:jingle:1',\n                action: 'transport-reject',\n                initiator: this.initiatorJid,\n                sid: this.sid\n            });\n\n        transportReject = transportReject.tree();\n        logger.info('Sending \\'transport-reject', transportReject);\n\n        this.connection.sendIQ(transportReject,\n            success,\n            this.newJingleErrorHandler(transportReject, failure),\n            IQ_TIMEOUT);\n    }\n\n    /**\n     * @inheritDoc\n     */\n    terminate(success, failure, options) {\n        if (this.state === JingleSessionState.ENDED) {\n            return;\n        }\n\n        if (!options || Boolean(options.sendSessionTerminate)) {\n            let sessionTerminate\n                = $iq({\n                    to: this.remoteJid,\n                    type: 'set'\n                })\n                    .c('jingle', {\n                        xmlns: 'urn:xmpp:jingle:1',\n                        action: 'session-terminate',\n                        initiator: this.initiatorJid,\n                        sid: this.sid\n                    })\n                    .c('reason')\n                    .c((options && options.reason) || 'success');\n\n            if (options && options.reasonDescription) {\n                sessionTerminate.up()\n                    .c('text')\n                    .t(options.reasonDescription);\n            }\n\n            // Calling tree() to print something useful\n            sessionTerminate = sessionTerminate.tree();\n            logger.info('Sending session-terminate', sessionTerminate);\n            this.connection.sendIQ(\n                sessionTerminate,\n                success,\n                this.newJingleErrorHandler(sessionTerminate, failure),\n                IQ_TIMEOUT);\n        } else {\n            logger.info(`Skipped sending session-terminate for ${this}`);\n        }\n\n        // this should result in 'onTerminated' being called by strope.jingle.js\n        this.connection.jingle.terminate(this.sid);\n    }\n\n    /**\n     *\n     * @param reasonCondition\n     * @param reasonText\n     */\n    onTerminated(reasonCondition, reasonText) {\n        this.state = JingleSessionState.ENDED;\n        this.establishmentDuration = undefined;\n\n        // Do something with reason and reasonCondition when we start to care\n        // this.reasonCondition = reasonCondition;\n        // this.reasonText = reasonText;\n        logger.info(`Session terminated ${this}`, reasonCondition, reasonText);\n\n        this.close();\n    }\n\n    /**\n     * Parse the information from the xml sourceAddElem and translate it\n     *  into sdp lines\n     * @param {jquery xml element} sourceAddElem the source-add\n     *  element from jingle\n     * @param {SDP object} currentRemoteSdp the current remote\n     *  sdp (as of this new source-add)\n     * @returns {list} a list of SDP line strings that should\n     *  be added to the remote SDP\n     */\n    _parseSsrcInfoFromSourceAdd(sourceAddElem, currentRemoteSdp) {\n        const addSsrcInfo = [];\n\n        $(sourceAddElem).each((i1, content) => {\n            const name = $(content).attr('name');\n            let lines = '';\n\n            $(content)\n                .find('ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')\n                .each(function() {\n                    // eslint-disable-next-line no-invalid-this\n                    const semantics = this.getAttribute('semantics');\n                    const ssrcs\n                        = $(this) // eslint-disable-line no-invalid-this\n                            .find('>source')\n                            .map(function() {\n                                // eslint-disable-next-line no-invalid-this\n                                return this.getAttribute('ssrc');\n                            })\n                            .get();\n\n                    if (ssrcs.length) {\n                        lines\n                            += `a=ssrc-group:${semantics} ${\n                                ssrcs.join(' ')}\\r\\n`;\n                    }\n                });\n\n            // handles both >source and >description>source\n            const tmp\n                = $(content).find(\n                    'source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]');\n\n            /* eslint-disable no-invalid-this */\n            tmp.each(function() {\n                const ssrc = $(this).attr('ssrc');\n\n                if (currentRemoteSdp.containsSSRC(ssrc)) {\n                    logger.warn(\n                        `Source-add request for existing SSRC: ${ssrc}`);\n\n                    return;\n                }\n\n                // eslint-disable-next-line newline-per-chained-call\n                $(this).find('>parameter').each(function() {\n                    lines += `a=ssrc:${ssrc} ${$(this).attr('name')}`;\n                    if ($(this).attr('value') && $(this).attr('value').length) {\n                        lines += `:${$(this).attr('value')}`;\n                    }\n                    lines += '\\r\\n';\n                });\n            });\n\n            /* eslint-enable no-invalid-this */\n            currentRemoteSdp.media.forEach((media, i2) => {\n                if (!SDPUtil.findLine(media, `a=mid:${name}`)) {\n                    return;\n                }\n                if (!addSsrcInfo[i2]) {\n                    addSsrcInfo[i2] = '';\n                }\n                addSsrcInfo[i2] += lines;\n            });\n        });\n\n        return addSsrcInfo;\n    }\n\n    /**\n     * Handles a Jingle source-add message for this Jingle session.\n     * @param elem An array of Jingle \"content\" elements.\n     */\n    addRemoteStream(elem) {\n        this._addOrRemoveRemoteStream(true /* add */, elem);\n    }\n\n    /**\n     * Handles a Jingle source-remove message for this Jingle session.\n     * @param elem An array of Jingle \"content\" elements.\n     */\n    removeRemoteStream(elem) {\n        this._addOrRemoveRemoteStream(false /* remove */, elem);\n    }\n\n    /**\n     * Handles either Jingle 'source-add' or 'source-remove' message for this\n     * Jingle session.\n     * @param {boolean} isAdd <tt>true</tt> for 'source-add' or <tt>false</tt>\n     * otherwise.\n     * @param {Array<Element>} elem an array of Jingle \"content\" elements.\n     * @private\n     */\n    _addOrRemoveRemoteStream(isAdd, elem) {\n        const logPrefix = isAdd ? 'addRemoteStream' : 'removeRemoteStream';\n\n        if (isAdd) {\n            this.readSsrcInfo(elem);\n        }\n\n        const workFunction = finishedCallback => {\n            if (!this.peerconnection.localDescription\n                || !this.peerconnection.localDescription.sdp) {\n                const errMsg = `${logPrefix} - localDescription not ready yet`;\n\n                logger.error(errMsg);\n                finishedCallback(errMsg);\n\n                return;\n            }\n\n            logger.log(`Processing ${logPrefix}`);\n            logger.log(\n                'ICE connection state: ',\n                this.peerconnection.iceConnectionState);\n\n            const oldLocalSdp\n                = new SDP(this.peerconnection.localDescription.sdp);\n            const sdp = new SDP(this.peerconnection.remoteDescription.sdp);\n            const addOrRemoveSsrcInfo\n                = isAdd\n                    ? this._parseSsrcInfoFromSourceAdd(elem, sdp)\n                    : this._parseSsrcInfoFromSourceRemove(elem, sdp);\n            const newRemoteSdp\n                = isAdd\n                    ? this._processRemoteAddSource(addOrRemoveSsrcInfo)\n                    : this._processRemoteRemoveSource(addOrRemoveSsrcInfo);\n\n            this._renegotiate(newRemoteSdp.raw)\n                .then(() => {\n                    const newLocalSdp\n                        = new SDP(this.peerconnection.localDescription.sdp);\n\n                    logger.log(\n                        `${logPrefix} - OK, SDPs: `, oldLocalSdp, newLocalSdp);\n                    this.notifyMySSRCUpdate(oldLocalSdp, newLocalSdp);\n                    finishedCallback();\n                }, error => {\n                    logger.error(`${logPrefix} failed:`, error);\n                    finishedCallback(error);\n                });\n        };\n\n        // Queue and execute\n        this.modificationQueue.push(workFunction);\n    }\n\n    /**\n     * The 'task' function will be given a callback it MUST call with either:\n     *  1) No arguments if it was successful or\n     *  2) An error argument if there was an error\n     * If the task wants to process the success or failure of the task, it\n     * should pass a handler to the .push function, e.g.:\n     * queue.push(task, (err) => {\n     *     if (err) {\n     *         // error handling\n     *     } else {\n     *         // success handling\n     *     }\n     * });\n     */\n    _processQueueTasks(task, finishedCallback) {\n        task(finishedCallback);\n    }\n\n    /**\n     * Takes in a jingle offer iq, returns the new sdp offer\n     * @param {jquery xml element} offerIq the incoming offer\n     * @returns {SDP object} the jingle offer translated to SDP\n     */\n    _processNewJingleOfferIq(offerIq) {\n        const remoteSdp = new SDP('');\n\n        if (this.webrtcIceTcpDisable) {\n            remoteSdp.removeTcpCandidates = true;\n        }\n        if (this.webrtcIceUdpDisable) {\n            remoteSdp.removeUdpCandidates = true;\n        }\n        if (this.failICE) {\n            remoteSdp.failICE = true;\n        }\n\n        remoteSdp.fromJingle(offerIq);\n        this.readSsrcInfo($(offerIq).find('>content'));\n\n        return remoteSdp;\n    }\n\n    /**\n     * Remove the given ssrc lines from the current remote sdp\n     * @param {list} removeSsrcInfo a list of SDP line strings that\n     *  should be removed from the remote SDP\n     * @returns type {SDP Object} the new remote SDP (after removing the lines\n     *  in removeSsrcInfo\n     */\n    _processRemoteRemoveSource(removeSsrcInfo) {\n        const remoteSdp = new SDP(this.peerconnection.remoteDescription.sdp);\n\n        removeSsrcInfo.forEach((lines, idx) => {\n            // eslint-disable-next-line no-param-reassign\n            lines = lines.split('\\r\\n');\n            lines.pop(); // remove empty last element;\n            lines.forEach(line => {\n                remoteSdp.media[idx]\n                    = remoteSdp.media[idx].replace(`${line}\\r\\n`, '');\n            });\n        });\n        remoteSdp.raw = remoteSdp.session + remoteSdp.media.join('');\n\n        return remoteSdp;\n    }\n\n    /**\n     * Add the given ssrc lines to the current remote sdp\n     * @param {list} addSsrcInfo a list of SDP line strings that\n     *  should be added to the remote SDP\n     * @returns type {SDP Object} the new remote SDP (after removing the lines\n     *  in removeSsrcInfo\n     */\n    _processRemoteAddSource(addSsrcInfo) {\n        const remoteSdp = new SDP(this.peerconnection.remoteDescription.sdp);\n\n        addSsrcInfo.forEach((lines, idx) => {\n            remoteSdp.media[idx] += lines;\n        });\n        remoteSdp.raw = remoteSdp.session + remoteSdp.media.join('');\n\n        return remoteSdp;\n    }\n\n    /**\n     * Do a new o/a flow using the existing remote description\n     * @param {string} [optionalRemoteSdp] optional, raw remote sdp\n     *  to use.  If not provided, the remote sdp from the\n     *  peerconnection will be used\n     * @returns {Promise} promise which resolves when the\n     *  o/a flow is complete with no arguments or\n     *  rejects with an error {string}\n     */\n    _renegotiate(optionalRemoteSdp) {\n        if (this.peerconnection.signalingState === 'closed') {\n            return Promise.reject('Attempted to renegotiate in state closed');\n        }\n\n        const remoteSdp\n            = optionalRemoteSdp || this.peerconnection.remoteDescription.sdp;\n\n        if (!remoteSdp) {\n            return Promise.reject(\n                'Can not renegotiate without remote description,'\n                    + `- current state: ${this.state}`);\n        }\n\n        const remoteDescription = new RTCSessionDescription({\n            type: this.isInitiator ? 'answer' : 'offer',\n            sdp: remoteSdp\n        });\n\n        if (this.isInitiator) {\n            return this._initiatorRenegotiate(remoteDescription);\n        }\n\n        return this._responderRenegotiate(remoteDescription);\n    }\n\n    /**\n     * Renegotiate cycle implementation for the responder case.\n     * @param {object} remoteDescription the SDP object as defined by the WebRTC\n     * which will be used as remote description in the cycle.\n     * @private\n     */\n    _responderRenegotiate(remoteDescription) {\n        logger.debug('Renegotiate: setting remote description');\n\n        return this.peerconnection.setRemoteDescription(remoteDescription)\n            .then(() => {\n                logger.debug('Renegotiate: creating answer');\n\n                return this.peerconnection.createAnswer(this.mediaConstraints)\n                    .then(answer => {\n                        logger.debug('Renegotiate: setting local description');\n\n                        return this.peerconnection.setLocalDescription(answer);\n                    });\n            });\n    }\n\n    /**\n     * Renegotiate cycle implementation for the initiator's case.\n     * @param {object} remoteDescription the SDP object as defined by the WebRTC\n     * which will be used as remote description in the cycle.\n     * @private\n     */\n    _initiatorRenegotiate(remoteDescription) {\n        if (this.peerconnection.signalingState === 'have-local-offer') {\n            // Skip createOffer and setLocalDescription or FF will fail\n            logger.debug(\n                'Renegotiate: setting remote description');\n\n            /* eslint-disable arrow-body-style */\n\n            return this.peerconnection.setRemoteDescription(remoteDescription)\n                .then(() => {\n                    // In case when the answer is being set for the first time,\n                    // full sRD/sLD cycle is required to have the local\n                    // description updated and SSRCs synchronized correctly.\n                    // Otherwise SSRCs for streams added after invite, but\n                    // before the answer was accepted will not be detected.\n                    // The reason for that is that renegotiate can not be called\n                    // when adding tracks and they will not be reflected in\n                    // the local SDP.\n                    return this._initiatorRenegotiate(remoteDescription);\n                });\n            /* eslint-enable arrow-body-style */\n        }\n\n        logger.debug('Renegotiate: creating offer');\n\n        return this.peerconnection.createOffer(this.mediaConstraints)\n            .then(offer => {\n                logger.debug('Renegotiate: setting local description');\n\n                return this.peerconnection.setLocalDescription(offer)\n                    .then(() => {\n                        logger.debug(\n                            'Renegotiate: setting remote description');\n\n                        // eslint-disable-next-line max-len\n                        return this.peerconnection.setRemoteDescription(remoteDescription);\n                    });\n            });\n    }\n\n    /**\n     * Replaces <tt>oldTrack</tt> with <tt>newTrack</tt> and performs a single\n     * offer/answer cycle after both operations are done. Either\n     * <tt>oldTrack</tt> or <tt>newTrack</tt> can be null; replacing a valid\n     * <tt>oldTrack</tt> with a null <tt>newTrack</tt> effectively just removes\n     * <tt>oldTrack</tt>\n     * @param {JitsiLocalTrack|null} oldTrack the current track in use to be\n     * replaced\n     * @param {JitsiLocalTrack|null} newTrack the new track to use\n     * @returns {Promise} which resolves once the replacement is complete\n     *  with no arguments or rejects with an error {string}\n     */\n    replaceTrack(oldTrack, newTrack) {\n        const workFunction = finishedCallback => {\n            // Check if the connection was closed and pretend everything is OK.\n            // This can happen if a track removal is scheduled but takes place\n            // after the connection is closed.\n            if (this.peerconnection.signalingState === 'closed'\n                || this.peerconnection.connectionState === 'closed'\n                || this.closed) {\n\n                finishedCallback();\n\n                return;\n            }\n\n            const oldLocalSdp = this.peerconnection.localDescription.sdp;\n\n            // NOTE the code below assumes that no more than 1 video track\n            // can be added to the peer connection.\n            // Transition from no video to video (possibly screen sharing)\n            if (!oldTrack && newTrack && newTrack.isVideoTrack()) {\n                // Clearing current primary SSRC will make\n                // the SdpConsistency generate a new one which will result\n                // with:\n                // 1. source-remove for the recvonly\n                // 2. source-add for the new video stream\n                this.peerconnection.clearRecvonlySsrc();\n\n            // Transition from video to no video\n            } else if (oldTrack && oldTrack.isVideoTrack() && !newTrack) {\n                // Clearing current primary SSRC and generating the recvonly\n                // will result in:\n                // 1. source-remove for the old video stream\n                // 2. source-add for the recvonly stream\n                this.peerconnection.clearRecvonlySsrc();\n                this.peerconnection.generateRecvonlySsrc();\n            }\n\n            this.peerconnection.replaceTrack(oldTrack, newTrack)\n            .then(shouldRenegotiate => {\n                if (shouldRenegotiate\n                    && (oldTrack || newTrack)\n                    && this.state === JingleSessionState.ACTIVE) {\n                    this._renegotiate()\n                        .then(() => {\n                            const newLocalSDP\n                                = new SDP(\n                                    this.peerconnection.localDescription.sdp);\n\n                            this.notifyMySSRCUpdate(\n                                new SDP(oldLocalSdp), newLocalSDP);\n                            finishedCallback();\n                        },\n                        finishedCallback /* will be called with en error */);\n                } else {\n                    finishedCallback();\n                }\n            });\n        };\n\n        return new Promise((resolve, reject) => {\n            this.modificationQueue.push(\n                workFunction,\n                error => {\n                    if (error) {\n                        logger.error('Replace track error:', error);\n                        reject(error);\n                    } else {\n                        logger.info('Replace track done!');\n                        resolve();\n                    }\n                });\n        });\n    }\n\n    /**\n     * Parse the information from the xml sourceRemoveElem and translate it\n     *  into sdp lines\n     * @param {jquery xml element} sourceRemoveElem the source-remove\n     *  element from jingle\n     * @param {SDP object} currentRemoteSdp the current remote\n     *  sdp (as of this new source-remove)\n     * @returns {list} a list of SDP line strings that should\n     *  be removed from the remote SDP\n     */\n    _parseSsrcInfoFromSourceRemove(sourceRemoveElem, currentRemoteSdp) {\n        const removeSsrcInfo = [];\n\n        $(sourceRemoveElem).each((i1, content) => {\n            const name = $(content).attr('name');\n            let lines = '';\n\n            $(content)\n                .find('ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')\n                .each(function() {\n                    /* eslint-disable no-invalid-this */\n                    const semantics = this.getAttribute('semantics');\n                    const ssrcs\n                        = $(this)\n                            .find('>source')\n                            .map(function() {\n                                return this.getAttribute('ssrc');\n                            })\n                            .get();\n\n                    if (ssrcs.length) {\n                        lines\n                            += `a=ssrc-group:${semantics} ${\n                                ssrcs.join(' ')}\\r\\n`;\n                    }\n\n                    /* eslint-enable no-invalid-this */\n                });\n            const ssrcs = [];\n\n            // handles both >source and >description>source versions\n            const tmp\n                = $(content).find(\n                    'source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]');\n\n            tmp.each(function() {\n                // eslint-disable-next-line no-invalid-this\n                const ssrc = $(this).attr('ssrc');\n\n                ssrcs.push(ssrc);\n            });\n            currentRemoteSdp.media.forEach((media, i2) => {\n                if (!SDPUtil.findLine(media, `a=mid:${name}`)) {\n                    return;\n                }\n                if (!removeSsrcInfo[i2]) {\n                    removeSsrcInfo[i2] = '';\n                }\n                ssrcs.forEach(ssrc => {\n                    const ssrcLines\n                        = SDPUtil.findLines(media, `a=ssrc:${ssrc}`);\n\n                    if (ssrcLines.length) {\n                        removeSsrcInfo[i2] += `${ssrcLines.join('\\r\\n')}\\r\\n`;\n                    }\n                });\n                removeSsrcInfo[i2] += lines;\n            });\n        });\n\n        return removeSsrcInfo;\n    }\n\n    /**\n     * Will print an error if there is any difference, between the SSRCs given\n     * in the <tt>oldSDP</tt> and the ones currently described in\n     * the peerconnection's local description.\n     * @param {string} operationName the operation's name which will be printed\n     * in the error message.\n     * @param {SDP} oldSDP the old local SDP which will be compared with\n     * the current one.\n     * @return {boolean} <tt>true</tt> if there was any change or <tt>false</tt>\n     * otherwise.\n     * @private\n     */\n    _verifyNoSSRCChanged(operationName, oldSDP) {\n        const currentLocalSDP\n            = new SDP(this.peerconnection.localDescription.sdp);\n        let sdpDiff = new SDPDiffer(oldSDP, currentLocalSDP);\n        const addedMedia = sdpDiff.getNewMedia();\n\n        if (Object.keys(addedMedia).length) {\n            logger.error(\n                `${this} - some SSRC were added on ${operationName}`,\n                addedMedia);\n\n            return false;\n        }\n\n        sdpDiff = new SDPDiffer(currentLocalSDP, oldSDP);\n        const removedMedia = sdpDiff.getNewMedia();\n\n        if (Object.keys(removedMedia).length) {\n            logger.error(\n                `${this} - some SSRCs were removed on ${operationName}`,\n                removedMedia);\n\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Adds local track back to this session, as part of the unmute operation.\n     * @param {JitsiLocalTrack} track\n     * @return {Promise} a promise that will resolve once the local track is\n     * added back to this session and renegotiation succeeds. Will be rejected\n     * with a <tt>string</tt> that provides some error details in case something\n     * goes wrong.\n     */\n    addTrackAsUnmute(track) {\n        return this._addRemoveTrackAsMuteUnmute(\n            false /* add as unmute */, track);\n    }\n\n    /**\n     * Remove local track as part of the mute operation.\n     * @param {JitsiLocalTrack} track the local track to be removed\n     * @return {Promise} a promise which will be resolved once the local track\n     * is removed from this session and the renegotiation is performed.\n     * The promise will be rejected with a <tt>string</tt> that the describes\n     * the error if anything goes wrong.\n     */\n    removeTrackAsMute(track) {\n        return this._addRemoveTrackAsMuteUnmute(\n            true /* remove as mute */, track);\n    }\n\n    /**\n     * See {@link addTrackAsUnmute} and {@link removeTrackAsMute}.\n     * @param {boolean} isMute <tt>true</tt> for \"remove as mute\" or\n     * <tt>false</tt> for \"add as unmute\".\n     * @param {JitsiLocalTrack} track the track that will be added/removed\n     * @private\n     */\n    _addRemoveTrackAsMuteUnmute(isMute, track) {\n        if (!track) {\n            return Promise.reject('invalid \"track\" argument value');\n        }\n        const operationName = isMute ? 'removeTrackMute' : 'addTrackUnmute';\n        const workFunction = finishedCallback => {\n            const tpc = this.peerconnection;\n\n            if (!tpc) {\n                finishedCallback(\n                    `Error:  tried ${operationName} track with no active peer`\n                        + 'connection');\n\n                return;\n            }\n            const oldLocalSDP = tpc.localDescription.sdp;\n            const tpcOperation\n                = isMute\n                    ? tpc.removeTrackMute.bind(tpc, track)\n                    : tpc.addTrackUnmute.bind(tpc, track);\n\n            if (!tpcOperation()) {\n                finishedCallback(`${operationName} failed!`);\n            } else if (!oldLocalSDP || !tpc.remoteDescription.sdp) {\n                finishedCallback();\n            } else {\n                this._renegotiate()\n                    .then(() => {\n                        // The results are ignored, as this check failure is not\n                        // enough to fail the whole operation. It will log\n                        // an error inside.\n                        this._verifyNoSSRCChanged(\n                            operationName, new SDP(oldLocalSDP));\n                        finishedCallback();\n                    },\n                    finishedCallback /* will be called with an error */);\n            }\n        };\n\n        return new Promise((resolve, reject) => {\n            this.modificationQueue.push(\n                workFunction,\n                error => {\n                    if (error) {\n                        reject(error);\n                    } else {\n                        resolve();\n                    }\n                });\n        });\n    }\n\n    /**\n     * Resumes or suspends media transfer over the underlying peer connection.\n     * @param {boolean} audioActive <tt>true</tt> to enable audio media\n     * transfer or <tt>false</tt> to suspend audio media transmission.\n     * @param {boolean} videoActive <tt>true</tt> to enable video media\n     * transfer or <tt>false</tt> to suspend video media transmission.\n     * @return {Promise} a <tt>Promise</tt> which will resolve once\n     * the operation is done. It will be rejected with an error description as\n     * a string in case anything goes wrong.\n     */\n    setMediaTransferActive(audioActive, videoActive) {\n        if (!this.peerconnection) {\n            return Promise.reject(\n                'Can not modify transfer active state,'\n                    + ' before \"initialize\" is called');\n        }\n\n        const logAudioStr = audioActive ? 'audio active' : 'audio inactive';\n        const logVideoStr = videoActive ? 'video active' : 'video inactive';\n\n        logger.info(`Queued make ${logVideoStr}, ${logAudioStr} task...`);\n\n        const workFunction = finishedCallback => {\n            const isSessionActive = this.state === JingleSessionState.ACTIVE;\n\n            // Because the value is modified on the queue it's impossible to\n            // check it's final value reliably prior to submitting the task.\n            // The rule here is that the last submitted state counts.\n            // Check the values here to avoid unnecessary renegotiation cycle.\n            const audioActiveChanged\n                = this.peerconnection.setAudioTransferActive(audioActive);\n\n            if (this._localVideoActive !== videoActive) {\n                this._localVideoActive = videoActive;\n\n                // Do only for P2P - Jicofo will reply with 'bad-request'\n                // We don't want to send 'content-modify', before the initial\n                // O/A (state === JingleSessionState.ACTIVE), because that will\n                // mess up video media direction in the remote SDP.\n                // 'content-modify' when processed only affects the media\n                // direction in the local SDP. We're doing that, because setting\n                // 'inactive' on video media in remote SDP will mess up our SDP\n                // translation chain (simulcast, RTX, video mute etc.).\n                if (this.isP2P && isSessionActive) {\n                    this.sendContentModify(videoActive);\n                }\n            }\n\n            const pcVideoActiveChanged\n                = this.peerconnection.setVideoTransferActive(\n                    this._localVideoActive && this._remoteVideoActive);\n\n            // Will do the sRD/sLD cycle to update SDPs and adjust the media\n            // direction\n            if (isSessionActive\n                    && (audioActiveChanged || pcVideoActiveChanged)) {\n                this._renegotiate()\n                    .then(\n                        finishedCallback,\n                        finishedCallback /* will be called with an error */);\n            } else {\n                finishedCallback();\n            }\n        };\n\n        return new Promise((resolve, reject) => {\n            this.modificationQueue.push(\n                workFunction,\n                error => {\n                    if (error) {\n                        reject(error);\n                    } else {\n                        resolve();\n                    }\n                });\n        });\n    }\n\n    /**\n     * Will put and execute on the queue a session modify task. Currently it\n     * only checks the senders attribute of the video content in order to figure\n     * out if the remote peer has video in the inactive state (stored locally\n     * in {@link _remoteVideoActive} - see field description for more info).\n     * @param {jQuery} jingleContents jQuery selector pointing to the jingle\n     * element of the session modify IQ.\n     * @see {@link _remoteVideoActive}\n     * @see {@link _localVideoActive}\n     */\n    modifyContents(jingleContents) {\n        const newVideoSenders\n            = JingleSessionPC.parseVideoSenders(jingleContents);\n\n        if (newVideoSenders === null) {\n            logger.error(\n                `${this} - failed to parse video \"senders\" attribute in`\n                    + '\"content-modify\" action');\n\n            return;\n        }\n\n        const workFunction = finishedCallback => {\n            if (this._assertNotEnded('content-modify')\n                    && this._modifyRemoteVideoActive(newVideoSenders)) {\n                // Will do the sRD/sLD cycle to update SDPs and adjust\n                // the media direction\n                this._renegotiate()\n                    .then(finishedCallback, finishedCallback /* (error) */);\n            } else {\n                finishedCallback();\n            }\n        };\n\n        logger.debug(\n            `${this} queued \"content-modify\" task`\n                + `(video senders=\"${newVideoSenders}\")`);\n\n        this.modificationQueue.push(\n            workFunction,\n            error => {\n                if (error) {\n                    logger.error('\"content-modify\" failed', error);\n                }\n            });\n    }\n\n    /**\n     * Processes new value of remote video \"senders\" Jingle attribute and tries\n     * to apply it for {@link _remoteVideoActive}.\n     * @param {string} remoteVideoSenders the value of \"senders\" attribute of\n     * Jingle video content element advertised by remote peer.\n     * @return {boolean} <tt>true</tt> if the change affected state of\n     * the underlying peerconnection and renegotiation is required for\n     * the changes to take effect.\n     * @private\n     */\n    _modifyRemoteVideoActive(remoteVideoSenders) {\n        const isRemoteVideoActive\n            = remoteVideoSenders === 'both'\n                || (remoteVideoSenders === 'initiator' && this.isInitiator)\n                || (remoteVideoSenders === 'responder' && !this.isInitiator);\n\n        if (isRemoteVideoActive !== this._remoteVideoActive) {\n            logger.debug(\n                `${this} new remote video active: ${isRemoteVideoActive}`);\n            this._remoteVideoActive = isRemoteVideoActive;\n        }\n\n        return this.peerconnection.setVideoTransferActive(\n            this._localVideoActive && this._remoteVideoActive);\n    }\n\n    /**\n     * Figures out added/removed ssrcs and send update IQs.\n     * @param oldSDP SDP object for old description.\n     * @param newSDP SDP object for new description.\n     */\n    notifyMySSRCUpdate(oldSDP, newSDP) {\n\n        if (this.state !== JingleSessionState.ACTIVE) {\n            logger.warn(`Skipping SSRC update in '${this.state} ' state.`);\n\n            return;\n        }\n\n        // send source-remove IQ.\n        let sdpDiffer = new SDPDiffer(newSDP, oldSDP);\n        const remove = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', {\n                xmlns: 'urn:xmpp:jingle:1',\n                action: 'source-remove',\n                initiator: this.initiatorJid,\n                sid: this.sid\n            }\n            );\n        const removedAnySSRCs = sdpDiffer.toJingle(remove);\n\n        if (removedAnySSRCs) {\n            logger.info('Sending source-remove', remove.tree());\n            this.connection.sendIQ(\n                remove, null,\n                this.newJingleErrorHandler(remove), IQ_TIMEOUT);\n        } else {\n            logger.log('removal not necessary');\n        }\n\n        // send source-add IQ.\n        sdpDiffer = new SDPDiffer(oldSDP, newSDP);\n        const add = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', {\n                xmlns: 'urn:xmpp:jingle:1',\n                action: 'source-add',\n                initiator: this.initiatorJid,\n                sid: this.sid\n            }\n            );\n\n        const containsNewSSRCs = sdpDiffer.toJingle(add);\n\n        if (containsNewSSRCs) {\n            logger.info('Sending source-add', add.tree());\n            this.connection.sendIQ(\n                add, null, this.newJingleErrorHandler(add), IQ_TIMEOUT);\n        } else {\n            logger.log('addition not necessary');\n        }\n    }\n\n    /**\n     * Method returns function(errorResponse) which is a callback to be passed\n     * to Strophe connection.sendIQ method. An 'error' structure is created that\n     * is passed as 1st argument to given <tt>failureCb</tt>. The format of this\n     * structure is as follows:\n     * {\n     *  code: {XMPP error response code}\n     *  reason: {the name of XMPP error reason element or 'timeout' if the\n      *          request has timed out within <tt>IQ_TIMEOUT</tt> milliseconds}\n     *  source: {request.tree() that provides original request}\n     *  session: {this JingleSessionPC.toString()}\n     * }\n     * @param request Strophe IQ instance which is the request to be dumped into\n     *        the error structure\n     * @param failureCb function(error) called when error response was returned\n     *        or when a timeout has occurred.\n     * @returns {function(this:JingleSessionPC)}\n     */\n    newJingleErrorHandler(request, failureCb) {\n        return errResponse => {\n\n            const error = {};\n\n            // Get XMPP error code and condition(reason)\n            const errorElSel = $(errResponse).find('error');\n\n            if (errorElSel.length) {\n                error.code = errorElSel.attr('code');\n                const errorReasonSel = $(errResponse).find('error :first');\n\n                if (errorReasonSel.length) {\n                    error.reason = errorReasonSel[0].tagName;\n                }\n\n                const errorMsgSel = errorElSel.find('>text');\n\n                if (errorMsgSel.length) {\n                    error.msg = errorMsgSel.text();\n                }\n            }\n\n            if (!errResponse) {\n                error.reason = 'timeout';\n            }\n\n            error.session = this.toString();\n\n            if (failureCb) {\n                failureCb(error);\n            } else if (this.state === JingleSessionState.ENDED\n                        && error.reason === 'item-not-found') {\n                // When remote peer decides to terminate the session, but it\n                // still have few messages on the queue for processing,\n                // it will first send us 'session-terminate' (we enter ENDED)\n                // and then follow with 'item-not-found' for the queued requests\n                // We don't want to have that logged on error level.\n                logger.debug(`Jingle error: ${JSON.stringify(error)}`);\n            } else {\n                GlobalOnErrorHandler.callErrorHandler(\n                    new Error(\n                        `Jingle error: ${JSON.stringify(error)}`));\n            }\n        };\n    }\n\n    /**\n     *\n     * @param error\n     * @private\n     */\n    _onJingleFatalError(error) {\n        if (this.room) {\n            this.room.eventEmitter.emit(\n                XMPPEvents.CONFERENCE_SETUP_FAILED, this, error);\n            this.room.eventEmitter.emit(\n                XMPPEvents.JINGLE_FATAL_ERROR, this, error);\n        }\n    }\n\n    /**\n     * Returns the ice connection state for the peer connection.\n     * @returns the ice connection state for the peer connection.\n     */\n    getIceConnectionState() {\n        return this.peerconnection.iceConnectionState;\n    }\n\n    /**\n     * Closes the peerconnection.\n     */\n    close() {\n        this.closed = true;\n\n        // The signaling layer will remove it's listeners\n        this.signalingLayer.setChatRoom(null);\n\n        // do not try to close if already closed.\n        this.peerconnection\n            && ((this.peerconnection.signalingState\n                    && this.peerconnection.signalingState !== 'closed')\n                || (this.peerconnection.connectionState\n                    && this.peerconnection.connectionState !== 'closed'))\n            && this.peerconnection.close();\n    }\n\n    /**\n     * Converts to string with minor summary.\n     * @return {string}\n     */\n    toString() {\n        return `JingleSessionPC[p2p=${this.isP2P},`\n                    + `initiator=${this.isInitiator},sid=${this.sid}]`;\n    }\n\n    /**\n     * If the A/B test for suspend video is disabled according to the room's\n     * configuration, returns undefined. Otherwise returns a boolean which\n     * indicates whether the suspend video option should be enabled or disabled.\n     * @param {JingleSessionPCOptions} options - The config options.\n     */\n    _abtestSuspendVideoEnabled({ abTesting }) {\n        if (!abTesting || !abTesting.enableSuspendVideoTest) {\n            return;\n        }\n\n        // We want the two participants in a P2P call to agree on the value of\n        // the \"suspend\" option. We use the JID of the initiator, because it is\n        // both randomly selected and agreed upon by both participants.\n        const jid = this._getInitiatorJid();\n\n        return integerHash(jid) % 2 === 0;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/JingleSessionPC.js","/*!\n * async\n * https://github.com/caolan/async\n *\n * Copyright 2010-2014 Caolan McMahon\n * Released under the MIT license\n */\n/*jshint onevar: false, indent:4 */\n/*global setImmediate: false, setTimeout: false, console: false */\n(function () {\n\n    var async = {};\n\n    // global on the server, window in the browser\n    var root, previous_async;\n\n    root = this;\n    if (root != null) {\n      previous_async = root.async;\n    }\n\n    async.noConflict = function () {\n        root.async = previous_async;\n        return async;\n    };\n\n    function only_once(fn) {\n        var called = false;\n        return function() {\n            if (called) throw new Error(\"Callback was already called.\");\n            called = true;\n            fn.apply(root, arguments);\n        }\n    }\n\n    //// cross-browser compatiblity functions ////\n\n    var _toString = Object.prototype.toString;\n\n    var _isArray = Array.isArray || function (obj) {\n        return _toString.call(obj) === '[object Array]';\n    };\n\n    var _each = function (arr, iterator) {\n        if (arr.forEach) {\n            return arr.forEach(iterator);\n        }\n        for (var i = 0; i < arr.length; i += 1) {\n            iterator(arr[i], i, arr);\n        }\n    };\n\n    var _map = function (arr, iterator) {\n        if (arr.map) {\n            return arr.map(iterator);\n        }\n        var results = [];\n        _each(arr, function (x, i, a) {\n            results.push(iterator(x, i, a));\n        });\n        return results;\n    };\n\n    var _reduce = function (arr, iterator, memo) {\n        if (arr.reduce) {\n            return arr.reduce(iterator, memo);\n        }\n        _each(arr, function (x, i, a) {\n            memo = iterator(memo, x, i, a);\n        });\n        return memo;\n    };\n\n    var _keys = function (obj) {\n        if (Object.keys) {\n            return Object.keys(obj);\n        }\n        var keys = [];\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                keys.push(k);\n            }\n        }\n        return keys;\n    };\n\n    //// exported async module functions ////\n\n    //// nextTick implementation with browser-compatible fallback ////\n    if (typeof process === 'undefined' || !(process.nextTick)) {\n        if (typeof setImmediate === 'function') {\n            async.nextTick = function (fn) {\n                // not a direct alias for IE10 compatibility\n                setImmediate(fn);\n            };\n            async.setImmediate = async.nextTick;\n        }\n        else {\n            async.nextTick = function (fn) {\n                setTimeout(fn, 0);\n            };\n            async.setImmediate = async.nextTick;\n        }\n    }\n    else {\n        async.nextTick = process.nextTick;\n        if (typeof setImmediate !== 'undefined') {\n            async.setImmediate = function (fn) {\n              // not a direct alias for IE10 compatibility\n              setImmediate(fn);\n            };\n        }\n        else {\n            async.setImmediate = async.nextTick;\n        }\n    }\n\n    async.each = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        _each(arr, function (x) {\n            iterator(x, only_once(done) );\n        });\n        function done(err) {\n          if (err) {\n              callback(err);\n              callback = function () {};\n          }\n          else {\n              completed += 1;\n              if (completed >= arr.length) {\n                  callback();\n              }\n          }\n        }\n    };\n    async.forEach = async.each;\n\n    async.eachSeries = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        var iterate = function () {\n            iterator(arr[completed], function (err) {\n                if (err) {\n                    callback(err);\n                    callback = function () {};\n                }\n                else {\n                    completed += 1;\n                    if (completed >= arr.length) {\n                        callback();\n                    }\n                    else {\n                        iterate();\n                    }\n                }\n            });\n        };\n        iterate();\n    };\n    async.forEachSeries = async.eachSeries;\n\n    async.eachLimit = function (arr, limit, iterator, callback) {\n        var fn = _eachLimit(limit);\n        fn.apply(null, [arr, iterator, callback]);\n    };\n    async.forEachLimit = async.eachLimit;\n\n    var _eachLimit = function (limit) {\n\n        return function (arr, iterator, callback) {\n            callback = callback || function () {};\n            if (!arr.length || limit <= 0) {\n                return callback();\n            }\n            var completed = 0;\n            var started = 0;\n            var running = 0;\n\n            (function replenish () {\n                if (completed >= arr.length) {\n                    return callback();\n                }\n\n                while (running < limit && started < arr.length) {\n                    started += 1;\n                    running += 1;\n                    iterator(arr[started - 1], function (err) {\n                        if (err) {\n                            callback(err);\n                            callback = function () {};\n                        }\n                        else {\n                            completed += 1;\n                            running -= 1;\n                            if (completed >= arr.length) {\n                                callback();\n                            }\n                            else {\n                                replenish();\n                            }\n                        }\n                    });\n                }\n            })();\n        };\n    };\n\n\n    var doParallel = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.each].concat(args));\n        };\n    };\n    var doParallelLimit = function(limit, fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [_eachLimit(limit)].concat(args));\n        };\n    };\n    var doSeries = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.eachSeries].concat(args));\n        };\n    };\n\n\n    var _asyncMap = function (eachfn, arr, iterator, callback) {\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        if (!callback) {\n            eachfn(arr, function (x, callback) {\n                iterator(x.value, function (err) {\n                    callback(err);\n                });\n            });\n        } else {\n            var results = [];\n            eachfn(arr, function (x, callback) {\n                iterator(x.value, function (err, v) {\n                    results[x.index] = v;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n    async.map = doParallel(_asyncMap);\n    async.mapSeries = doSeries(_asyncMap);\n    async.mapLimit = function (arr, limit, iterator, callback) {\n        return _mapLimit(limit)(arr, iterator, callback);\n    };\n\n    var _mapLimit = function(limit) {\n        return doParallelLimit(limit, _asyncMap);\n    };\n\n    // reduce only has a series version, as doing reduce in parallel won't\n    // work in many situations.\n    async.reduce = function (arr, memo, iterator, callback) {\n        async.eachSeries(arr, function (x, callback) {\n            iterator(memo, x, function (err, v) {\n                memo = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, memo);\n        });\n    };\n    // inject alias\n    async.inject = async.reduce;\n    // foldl alias\n    async.foldl = async.reduce;\n\n    async.reduceRight = function (arr, memo, iterator, callback) {\n        var reversed = _map(arr, function (x) {\n            return x;\n        }).reverse();\n        async.reduce(reversed, memo, iterator, callback);\n    };\n    // foldr alias\n    async.foldr = async.reduceRight;\n\n    var _filter = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.filter = doParallel(_filter);\n    async.filterSeries = doSeries(_filter);\n    // select alias\n    async.select = async.filter;\n    async.selectSeries = async.filterSeries;\n\n    var _reject = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (!v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.reject = doParallel(_reject);\n    async.rejectSeries = doSeries(_reject);\n\n    var _detect = function (eachfn, arr, iterator, main_callback) {\n        eachfn(arr, function (x, callback) {\n            iterator(x, function (result) {\n                if (result) {\n                    main_callback(x);\n                    main_callback = function () {};\n                }\n                else {\n                    callback();\n                }\n            });\n        }, function (err) {\n            main_callback();\n        });\n    };\n    async.detect = doParallel(_detect);\n    async.detectSeries = doSeries(_detect);\n\n    async.some = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (v) {\n                    main_callback(true);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(false);\n        });\n    };\n    // any alias\n    async.any = async.some;\n\n    async.every = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (!v) {\n                    main_callback(false);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(true);\n        });\n    };\n    // all alias\n    async.all = async.every;\n\n    async.sortBy = function (arr, iterator, callback) {\n        async.map(arr, function (x, callback) {\n            iterator(x, function (err, criteria) {\n                if (err) {\n                    callback(err);\n                }\n                else {\n                    callback(null, {value: x, criteria: criteria});\n                }\n            });\n        }, function (err, results) {\n            if (err) {\n                return callback(err);\n            }\n            else {\n                var fn = function (left, right) {\n                    var a = left.criteria, b = right.criteria;\n                    return a < b ? -1 : a > b ? 1 : 0;\n                };\n                callback(null, _map(results.sort(fn), function (x) {\n                    return x.value;\n                }));\n            }\n        });\n    };\n\n    async.auto = function (tasks, callback) {\n        callback = callback || function () {};\n        var keys = _keys(tasks);\n        var remainingTasks = keys.length\n        if (!remainingTasks) {\n            return callback();\n        }\n\n        var results = {};\n\n        var listeners = [];\n        var addListener = function (fn) {\n            listeners.unshift(fn);\n        };\n        var removeListener = function (fn) {\n            for (var i = 0; i < listeners.length; i += 1) {\n                if (listeners[i] === fn) {\n                    listeners.splice(i, 1);\n                    return;\n                }\n            }\n        };\n        var taskComplete = function () {\n            remainingTasks--\n            _each(listeners.slice(0), function (fn) {\n                fn();\n            });\n        };\n\n        addListener(function () {\n            if (!remainingTasks) {\n                var theCallback = callback;\n                // prevent final callback from calling itself if it errors\n                callback = function () {};\n\n                theCallback(null, results);\n            }\n        });\n\n        _each(keys, function (k) {\n            var task = _isArray(tasks[k]) ? tasks[k]: [tasks[k]];\n            var taskCallback = function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                if (err) {\n                    var safeResults = {};\n                    _each(_keys(results), function(rkey) {\n                        safeResults[rkey] = results[rkey];\n                    });\n                    safeResults[k] = args;\n                    callback(err, safeResults);\n                    // stop subsequent errors hitting callback multiple times\n                    callback = function () {};\n                }\n                else {\n                    results[k] = args;\n                    async.setImmediate(taskComplete);\n                }\n            };\n            var requires = task.slice(0, Math.abs(task.length - 1)) || [];\n            var ready = function () {\n                return _reduce(requires, function (a, x) {\n                    return (a && results.hasOwnProperty(x));\n                }, true) && !results.hasOwnProperty(k);\n            };\n            if (ready()) {\n                task[task.length - 1](taskCallback, results);\n            }\n            else {\n                var listener = function () {\n                    if (ready()) {\n                        removeListener(listener);\n                        task[task.length - 1](taskCallback, results);\n                    }\n                };\n                addListener(listener);\n            }\n        });\n    };\n\n    async.retry = function(times, task, callback) {\n        var DEFAULT_TIMES = 5;\n        var attempts = [];\n        // Use defaults if times not passed\n        if (typeof times === 'function') {\n            callback = task;\n            task = times;\n            times = DEFAULT_TIMES;\n        }\n        // Make sure times is a number\n        times = parseInt(times, 10) || DEFAULT_TIMES;\n        var wrappedTask = function(wrappedCallback, wrappedResults) {\n            var retryAttempt = function(task, finalAttempt) {\n                return function(seriesCallback) {\n                    task(function(err, result){\n                        seriesCallback(!err || finalAttempt, {err: err, result: result});\n                    }, wrappedResults);\n                };\n            };\n            while (times) {\n                attempts.push(retryAttempt(task, !(times-=1)));\n            }\n            async.series(attempts, function(done, data){\n                data = data[data.length - 1];\n                (wrappedCallback || callback)(data.err, data.result);\n            });\n        }\n        // If a callback is passed, run this as a controll flow\n        return callback ? wrappedTask() : wrappedTask\n    };\n\n    async.waterfall = function (tasks, callback) {\n        callback = callback || function () {};\n        if (!_isArray(tasks)) {\n          var err = new Error('First argument to waterfall must be an array of functions');\n          return callback(err);\n        }\n        if (!tasks.length) {\n            return callback();\n        }\n        var wrapIterator = function (iterator) {\n            return function (err) {\n                if (err) {\n                    callback.apply(null, arguments);\n                    callback = function () {};\n                }\n                else {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    var next = iterator.next();\n                    if (next) {\n                        args.push(wrapIterator(next));\n                    }\n                    else {\n                        args.push(callback);\n                    }\n                    async.setImmediate(function () {\n                        iterator.apply(null, args);\n                    });\n                }\n            };\n        };\n        wrapIterator(async.iterator(tasks))();\n    };\n\n    var _parallel = function(eachfn, tasks, callback) {\n        callback = callback || function () {};\n        if (_isArray(tasks)) {\n            eachfn.map(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            eachfn.each(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.parallel = function (tasks, callback) {\n        _parallel({ map: async.map, each: async.each }, tasks, callback);\n    };\n\n    async.parallelLimit = function(tasks, limit, callback) {\n        _parallel({ map: _mapLimit(limit), each: _eachLimit(limit) }, tasks, callback);\n    };\n\n    async.series = function (tasks, callback) {\n        callback = callback || function () {};\n        if (_isArray(tasks)) {\n            async.mapSeries(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            async.eachSeries(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.iterator = function (tasks) {\n        var makeCallback = function (index) {\n            var fn = function () {\n                if (tasks.length) {\n                    tasks[index].apply(null, arguments);\n                }\n                return fn.next();\n            };\n            fn.next = function () {\n                return (index < tasks.length - 1) ? makeCallback(index + 1): null;\n            };\n            return fn;\n        };\n        return makeCallback(0);\n    };\n\n    async.apply = function (fn) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return function () {\n            return fn.apply(\n                null, args.concat(Array.prototype.slice.call(arguments))\n            );\n        };\n    };\n\n    var _concat = function (eachfn, arr, fn, callback) {\n        var r = [];\n        eachfn(arr, function (x, cb) {\n            fn(x, function (err, y) {\n                r = r.concat(y || []);\n                cb(err);\n            });\n        }, function (err) {\n            callback(err, r);\n        });\n    };\n    async.concat = doParallel(_concat);\n    async.concatSeries = doSeries(_concat);\n\n    async.whilst = function (test, iterator, callback) {\n        if (test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.whilst(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doWhilst = function (iterator, test, callback) {\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if (test.apply(null, args)) {\n                async.doWhilst(iterator, test, callback);\n            }\n            else {\n                callback();\n            }\n        });\n    };\n\n    async.until = function (test, iterator, callback) {\n        if (!test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.until(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doUntil = function (iterator, test, callback) {\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if (!test.apply(null, args)) {\n                async.doUntil(iterator, test, callback);\n            }\n            else {\n                callback();\n            }\n        });\n    };\n\n    async.queue = function (worker, concurrency) {\n        if (concurrency === undefined) {\n            concurrency = 1;\n        }\n        function _insert(q, data, pos, callback) {\n          if (!q.started){\n            q.started = true;\n          }\n          if (!_isArray(data)) {\n              data = [data];\n          }\n          if(data.length == 0) {\n             // call drain immediately if there are no tasks\n             return async.setImmediate(function() {\n                 if (q.drain) {\n                     q.drain();\n                 }\n             });\n          }\n          _each(data, function(task) {\n              var item = {\n                  data: task,\n                  callback: typeof callback === 'function' ? callback : null\n              };\n\n              if (pos) {\n                q.tasks.unshift(item);\n              } else {\n                q.tasks.push(item);\n              }\n\n              if (q.saturated && q.tasks.length === q.concurrency) {\n                  q.saturated();\n              }\n              async.setImmediate(q.process);\n          });\n        }\n\n        var workers = 0;\n        var q = {\n            tasks: [],\n            concurrency: concurrency,\n            saturated: null,\n            empty: null,\n            drain: null,\n            started: false,\n            paused: false,\n            push: function (data, callback) {\n              _insert(q, data, false, callback);\n            },\n            kill: function () {\n              q.drain = null;\n              q.tasks = [];\n            },\n            unshift: function (data, callback) {\n              _insert(q, data, true, callback);\n            },\n            process: function () {\n                if (!q.paused && workers < q.concurrency && q.tasks.length) {\n                    var task = q.tasks.shift();\n                    if (q.empty && q.tasks.length === 0) {\n                        q.empty();\n                    }\n                    workers += 1;\n                    var next = function () {\n                        workers -= 1;\n                        if (task.callback) {\n                            task.callback.apply(task, arguments);\n                        }\n                        if (q.drain && q.tasks.length + workers === 0) {\n                            q.drain();\n                        }\n                        q.process();\n                    };\n                    var cb = only_once(next);\n                    worker(task.data, cb);\n                }\n            },\n            length: function () {\n                return q.tasks.length;\n            },\n            running: function () {\n                return workers;\n            },\n            idle: function() {\n                return q.tasks.length + workers === 0;\n            },\n            pause: function () {\n                if (q.paused === true) { return; }\n                q.paused = true;\n                q.process();\n            },\n            resume: function () {\n                if (q.paused === false) { return; }\n                q.paused = false;\n                q.process();\n            }\n        };\n        return q;\n    };\n    \n    async.priorityQueue = function (worker, concurrency) {\n        \n        function _compareTasks(a, b){\n          return a.priority - b.priority;\n        };\n        \n        function _binarySearch(sequence, item, compare) {\n          var beg = -1,\n              end = sequence.length - 1;\n          while (beg < end) {\n            var mid = beg + ((end - beg + 1) >>> 1);\n            if (compare(item, sequence[mid]) >= 0) {\n              beg = mid;\n            } else {\n              end = mid - 1;\n            }\n          }\n          return beg;\n        }\n        \n        function _insert(q, data, priority, callback) {\n          if (!q.started){\n            q.started = true;\n          }\n          if (!_isArray(data)) {\n              data = [data];\n          }\n          if(data.length == 0) {\n             // call drain immediately if there are no tasks\n             return async.setImmediate(function() {\n                 if (q.drain) {\n                     q.drain();\n                 }\n             });\n          }\n          _each(data, function(task) {\n              var item = {\n                  data: task,\n                  priority: priority,\n                  callback: typeof callback === 'function' ? callback : null\n              };\n              \n              q.tasks.splice(_binarySearch(q.tasks, item, _compareTasks) + 1, 0, item);\n\n              if (q.saturated && q.tasks.length === q.concurrency) {\n                  q.saturated();\n              }\n              async.setImmediate(q.process);\n          });\n        }\n        \n        // Start with a normal queue\n        var q = async.queue(worker, concurrency);\n        \n        // Override push to accept second parameter representing priority\n        q.push = function (data, priority, callback) {\n          _insert(q, data, priority, callback);\n        };\n        \n        // Remove unshift function\n        delete q.unshift;\n\n        return q;\n    };\n\n    async.cargo = function (worker, payload) {\n        var working     = false,\n            tasks       = [];\n\n        var cargo = {\n            tasks: tasks,\n            payload: payload,\n            saturated: null,\n            empty: null,\n            drain: null,\n            drained: true,\n            push: function (data, callback) {\n                if (!_isArray(data)) {\n                    data = [data];\n                }\n                _each(data, function(task) {\n                    tasks.push({\n                        data: task,\n                        callback: typeof callback === 'function' ? callback : null\n                    });\n                    cargo.drained = false;\n                    if (cargo.saturated && tasks.length === payload) {\n                        cargo.saturated();\n                    }\n                });\n                async.setImmediate(cargo.process);\n            },\n            process: function process() {\n                if (working) return;\n                if (tasks.length === 0) {\n                    if(cargo.drain && !cargo.drained) cargo.drain();\n                    cargo.drained = true;\n                    return;\n                }\n\n                var ts = typeof payload === 'number'\n                            ? tasks.splice(0, payload)\n                            : tasks.splice(0, tasks.length);\n\n                var ds = _map(ts, function (task) {\n                    return task.data;\n                });\n\n                if(cargo.empty) cargo.empty();\n                working = true;\n                worker(ds, function () {\n                    working = false;\n\n                    var args = arguments;\n                    _each(ts, function (data) {\n                        if (data.callback) {\n                            data.callback.apply(null, args);\n                        }\n                    });\n\n                    process();\n                });\n            },\n            length: function () {\n                return tasks.length;\n            },\n            running: function () {\n                return working;\n            }\n        };\n        return cargo;\n    };\n\n    var _console_fn = function (name) {\n        return function (fn) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            fn.apply(null, args.concat([function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (typeof console !== 'undefined') {\n                    if (err) {\n                        if (console.error) {\n                            console.error(err);\n                        }\n                    }\n                    else if (console[name]) {\n                        _each(args, function (x) {\n                            console[name](x);\n                        });\n                    }\n                }\n            }]));\n        };\n    };\n    async.log = _console_fn('log');\n    async.dir = _console_fn('dir');\n    /*async.info = _console_fn('info');\n    async.warn = _console_fn('warn');\n    async.error = _console_fn('error');*/\n\n    async.memoize = function (fn, hasher) {\n        var memo = {};\n        var queues = {};\n        hasher = hasher || function (x) {\n            return x;\n        };\n        var memoized = function () {\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            var key = hasher.apply(null, args);\n            if (key in memo) {\n                async.nextTick(function () {\n                    callback.apply(null, memo[key]);\n                });\n            }\n            else if (key in queues) {\n                queues[key].push(callback);\n            }\n            else {\n                queues[key] = [callback];\n                fn.apply(null, args.concat([function () {\n                    memo[key] = arguments;\n                    var q = queues[key];\n                    delete queues[key];\n                    for (var i = 0, l = q.length; i < l; i++) {\n                      q[i].apply(null, arguments);\n                    }\n                }]));\n            }\n        };\n        memoized.memo = memo;\n        memoized.unmemoized = fn;\n        return memoized;\n    };\n\n    async.unmemoize = function (fn) {\n      return function () {\n        return (fn.unmemoized || fn).apply(null, arguments);\n      };\n    };\n\n    async.times = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.map(counter, iterator, callback);\n    };\n\n    async.timesSeries = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.mapSeries(counter, iterator, callback);\n    };\n\n    async.seq = function (/* functions... */) {\n        var fns = arguments;\n        return function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            async.reduce(fns, args, function (newargs, fn, cb) {\n                fn.apply(that, newargs.concat([function () {\n                    var err = arguments[0];\n                    var nextargs = Array.prototype.slice.call(arguments, 1);\n                    cb(err, nextargs);\n                }]))\n            },\n            function (err, results) {\n                callback.apply(that, [err].concat(results));\n            });\n        };\n    };\n\n    async.compose = function (/* functions... */) {\n      return async.seq.apply(null, Array.prototype.reverse.call(arguments));\n    };\n\n    var _applyEach = function (eachfn, fns /*args...*/) {\n        var go = function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            return eachfn(fns, function (fn, cb) {\n                fn.apply(that, args.concat([cb]));\n            },\n            callback);\n        };\n        if (arguments.length > 2) {\n            var args = Array.prototype.slice.call(arguments, 2);\n            return go.apply(this, args);\n        }\n        else {\n            return go;\n        }\n    };\n    async.applyEach = doParallel(_applyEach);\n    async.applyEachSeries = doSeries(_applyEach);\n\n    async.forever = function (fn, callback) {\n        function next(err) {\n            if (err) {\n                if (callback) {\n                    return callback(err);\n                }\n                throw err;\n            }\n            fn(next);\n        }\n        next();\n    };\n\n    // Node.js\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = async;\n    }\n    // AMD / RequireJS\n    else if (typeof define !== 'undefined' && define.amd) {\n        define([], function () {\n            return async;\n        });\n    }\n    // included directly via <script> tag\n    else {\n        root.async = async;\n    }\n\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/async/lib/async.js\n// module id = 85\n// module chunks = 0","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/timers-browserify/main.js\n// module id = 86\n// module chunks = 0","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/setimmediate/setImmediate.js\n// module id = 87\n// module chunks = 0","/**\n * Implements a simple hash code for a string (see\n * https://en.wikipedia.org/wiki/Java_hashCode()).\n *\n * @param {string} The string to return a hash of.\n * @return {Number} the integer hash code of the string.\n */\nfunction integerHash(string) {\n    if (!string) {\n        return 0;\n    }\n\n    let char, hash = 0, i;\n\n    for (i = 0; i < string.length; i++) {\n        char = string.charCodeAt(i);\n        hash += char * Math.pow(31, string.length - 1 - i);\n        hash = Math.abs(hash | 0); // eslint-disable-line no-bitwise\n    }\n\n    return hash;\n}\n\nmodule.exports = { integerHash };\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/StringUtils.js","/* global __filename */\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as JingleSessionState from './JingleSessionState';\n\nconst logger = getLogger(__filename);\n\n/**\n * JingleSession provides an API to manage a single Jingle session. We will\n * have different implementations depending on the underlying interface used\n * (i.e. WebRTC and ORTC) and here we hold the code common to all of them.\n */\nexport default class JingleSession {\n\n    /* eslint-disable max-params */\n\n    /**\n     * Creates new <tt>JingleSession</tt>.\n     * @param {string} sid the Jingle session identifier\n     * @param {string} localJid our JID\n     * @param {string} remoteJid the JID of the remote peer\n     * @param {Strophe.Connection} connection the XMPP connection\n     * @param {Object} mediaConstraints the media constraints object passed to\n     * the PeerConnection onCreateAnswer/Offer as defined by the WebRTC.\n     * @param {Object} iceConfig the ICE servers config object as defined by\n     * the WebRTC. Passed to the PeerConnection's constructor.\n     * @param {boolean} isInitiator indicates if it will be the side which\n     * initiates the session.\n     */\n    constructor(\n            sid,\n            localJid,\n            remoteJid,\n            connection,\n            mediaConstraints,\n            iceConfig,\n            isInitiator) {\n        this.sid = sid;\n        this.localJid = localJid;\n        this.remoteJid = remoteJid;\n        this.connection = connection;\n        this.mediaConstraints = mediaConstraints;\n        this.iceConfig = iceConfig;\n\n        /**\n         * Indicates whether this instance is an initiator or an answerer of\n         * the Jingle session.\n         * @type {boolean}\n         */\n        this.isInitiator = isInitiator;\n\n        /**\n         * Whether to use dripping or not. Dripping is sending trickle\n         * candidates not one-by-one.\n         */\n        this.usedrip = true;\n\n        /**\n         *  When dripping is used, stores ICE candidates which are to be sent.\n         */\n        this.dripContainer = [];\n\n        /**\n         * The chat room instance associated with the session.\n         * @type {ChatRoom}\n         */\n        this.room = null;\n\n        /**\n         * Jingle session state - uninitialized until {@link initialize} is\n         * called @type {JingleSessionState}\n         */\n        this.state = null;\n\n        /**\n         * The RTC service instance\n         * @type {RTC}\n         */\n        this.rtc = null;\n    }\n\n    /**\n     * Returns XMPP address of this session's initiator.\n     * @return {string}\n     */\n    get initiatorJid() {\n        return this.isInitiator ? this.localJid : this.remoteJid;\n    }\n\n    /**\n     * Returns XMPP address of this session's responder.\n     * @return {string}\n     */\n    get responderJid() {\n        return this.isInitiator ? this.remoteJid : this.localJid;\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Prepares this object to initiate a session.\n     * @param {ChatRoom} room the chat room for the conference associated with\n     * this session\n     * @param {RTC} rtc the RTC service instance\n     * @param {object} options - the options, see implementing class's\n     * {@link #doInitialize} description for more details.\n     */\n    initialize(room, rtc, options) {\n        if (this.state !== null) {\n            const errmsg\n                = `attempt to initiate on session ${this.sid}\n                   in state ${this.state}`;\n\n            logger.error(errmsg);\n            throw new Error(errmsg);\n        }\n        this.room = room;\n        this.rtc = rtc;\n        this.state = JingleSessionState.PENDING;\n        this.doInitialize(options);\n    }\n\n    /**\n     * The implementing class finishes initialization here. Called at the end of\n     * {@link initialize}.\n     * @param {Object} options - The options specific to the implementing class.\n     * @protected\n     */\n    doInitialize(options) { } // eslint-disable-line no-unused-vars, no-empty-function, max-len\n\n    /* eslint-disable no-unused-vars, no-empty-function */\n\n    /**\n     * Adds the ICE candidates found in the 'contents' array as remote\n     * candidates?\n     * Note: currently only used on transport-info\n     *\n     * @param contents\n     */\n    addIceCandidates(contents) {}\n\n    /* eslint-enable no-unused-vars, no-empty-function */\n\n    /**\n     * Returns current state of this <tt>JingleSession</tt> instance.\n     * @returns {JingleSessionState} the current state of this session instance.\n     */\n    getState() {\n        return this.state;\n    }\n\n    /* eslint-disable no-unused-vars, no-empty-function */\n\n    /**\n     * Handles an 'add-source' event.\n     *\n     * @param contents an array of Jingle 'content' elements.\n     */\n    addSources(contents) {}\n\n    /**\n     * Handles a 'remove-source' event.\n     *\n     * @param contents an array of Jingle 'content' elements.\n     */\n    removeSources(contents) {}\n\n    /**\n     * Terminates this Jingle session by sending session-terminate\n     * @param success a callback called once the 'session-terminate' packet has\n     * been acknowledged with RESULT.\n     * @param failure a callback called when either timeout occurs or ERROR\n     * response is received.\n     * @param {Object} options\n     * @param {string} [options.reason] XMPP Jingle error condition\n     * @param {string} [options.reasonDescription] some meaningful error message\n     * @param {boolean} [options.sendSessionTerminate=true] set to false to skip\n     * sending session-terminate. It may not make sense to send it if the XMPP\n     * connection has been closed already or if the remote peer has disconnected\n     */\n    terminate(success, failure, options) {}\n\n    /**\n     * Handles an offer from the remote peer (prepares to accept a session).\n     * @param jingle the 'jingle' XML element.\n     * @param success callback called when we the incoming session has been\n     * accepted\n     * @param failure callback called when we fail for any reason, will supply\n     * error object with details(which is meant more to be printed to the logger\n     * than analysed in the code, as the error is unrecoverable anyway)\n     */\n    acceptOffer(jingle, success, failure) {}\n\n    /**\n     * Returns the JID of the initiator of the jingle session.\n     */\n    _getInitiatorJid() {\n        return this.isInitiator ? this.localJid : this.remoteJid;\n    }\n\n    /* eslint-enable no-unused-vars, no-empty-function */\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/JingleSession.js","import SDPUtil from './SDPUtil';\n\n// this could be useful in Array.prototype.\n/**\n *\n * @param array1\n * @param array2\n */\nfunction arrayEquals(array1, array2) {\n    // if the other array is a falsy value, return\n    if (!array2) {\n        return false;\n    }\n\n    // compare lengths - can save a lot of time\n    if (array1.length !== array2.length) {\n        return false;\n    }\n\n    for (let i = 0, l = array1.length; i < l; i++) {\n        // Check if we have nested arrays\n        if (array1[i] instanceof Array && array2[i] instanceof Array) {\n            // recurse into the nested arrays\n            if (!array1[i].equals(array2[i])) {\n                return false;\n            }\n        } else if (array1[i] !== array2[i]) {\n            // Warning - two different object instances will never be\n            // equal: {x:20} != {x:20}\n            return false;\n        }\n    }\n\n    return true;\n}\n\n/**\n *\n * @param mySDP\n * @param otherSDP\n */\nexport default function SDPDiffer(mySDP, otherSDP) {\n    this.mySDP = mySDP;\n    this.otherSDP = otherSDP;\n    if (!mySDP) {\n        throw new Error('\"mySDP\" is undefined!');\n    } else if (!otherSDP) {\n        throw new Error('\"otherSDP\" is undefined!');\n    }\n}\n\n/**\n * Returns map of MediaChannel that contains media contained in\n * 'mySDP', but not contained in 'otherSdp'. Mapped by channel idx.\n */\nSDPDiffer.prototype.getNewMedia = function() {\n\n    const myMedias = this.mySDP.getMediaSsrcMap();\n    const othersMedias = this.otherSDP.getMediaSsrcMap();\n    const newMedia = {};\n\n    Object.keys(othersMedias).forEach(othersMediaIdx => {\n        const myMedia = myMedias[othersMediaIdx];\n        const othersMedia = othersMedias[othersMediaIdx];\n\n        if (!myMedia && othersMedia) {\n            // Add whole channel\n            newMedia[othersMediaIdx] = othersMedia;\n\n            return;\n        }\n\n        // Look for new ssrcs across the channel\n        Object.keys(othersMedia.ssrcs).forEach(ssrc => {\n            if (Object.keys(myMedia.ssrcs).indexOf(ssrc) === -1) {\n                // Allocate channel if we've found ssrc that doesn't exist in\n                // our channel\n                if (!newMedia[othersMediaIdx]) {\n                    newMedia[othersMediaIdx] = {\n                        mediaindex: othersMedia.mediaindex,\n                        mid: othersMedia.mid,\n                        ssrcs: {},\n                        ssrcGroups: []\n                    };\n                }\n                newMedia[othersMediaIdx].ssrcs[ssrc] = othersMedia.ssrcs[ssrc];\n            } else if (othersMedia.ssrcs[ssrc].lines\n                        && myMedia.ssrcs[ssrc].lines) {\n                // we want to detect just changes in adding/removing msid\n                const myContainMsid = myMedia.ssrcs[ssrc].lines.find(\n                    line => line.indexOf('msid') !== -1) !== undefined;\n                const newContainMsid = othersMedia.ssrcs[ssrc].lines.find(\n                    line => line.indexOf('msid') !== -1) !== undefined;\n\n                if (myContainMsid !== newContainMsid) {\n                    if (!newMedia[othersMediaIdx]) {\n                        newMedia[othersMediaIdx] = {\n                            mediaindex: othersMedia.mediaindex,\n                            mid: othersMedia.mid,\n                            ssrcs: {},\n                            ssrcGroups: []\n                        };\n                    }\n                    newMedia[othersMediaIdx].ssrcs[ssrc]\n                        = othersMedia.ssrcs[ssrc];\n                }\n            }\n        });\n\n        // Look for new ssrc groups across the channels\n        othersMedia.ssrcGroups.forEach(otherSsrcGroup => {\n\n            // try to match the other ssrc-group with an ssrc-group of ours\n            let matched = false;\n\n            for (let i = 0; i < myMedia.ssrcGroups.length; i++) {\n                const mySsrcGroup = myMedia.ssrcGroups[i];\n\n                if (otherSsrcGroup.semantics === mySsrcGroup.semantics\n                    && arrayEquals(otherSsrcGroup.ssrcs, mySsrcGroup.ssrcs)) {\n\n                    matched = true;\n                    break;\n                }\n            }\n\n            if (!matched) {\n                // Allocate channel if we've found an ssrc-group that doesn't\n                // exist in our channel\n\n                if (!newMedia[othersMediaIdx]) {\n                    newMedia[othersMediaIdx] = {\n                        mediaindex: othersMedia.mediaindex,\n                        mid: othersMedia.mid,\n                        ssrcs: {},\n                        ssrcGroups: []\n                    };\n                }\n                newMedia[othersMediaIdx].ssrcGroups.push(otherSsrcGroup);\n            }\n        });\n    });\n\n    return newMedia;\n};\n\n/**\n * TODO: document!\n */\nSDPDiffer.prototype.toJingle = function(modify) {\n    const sdpMediaSsrcs = this.getNewMedia();\n\n    let modified = false;\n\n    Object.keys(sdpMediaSsrcs).forEach(mediaindex => {\n        modified = true;\n        const media = sdpMediaSsrcs[mediaindex];\n\n        modify.c('content', { name: media.mid });\n\n        modify.c('description',\n            { xmlns: 'urn:xmpp:jingle:apps:rtp:1',\n                media: media.mid });\n\n        // FIXME: not completely sure this operates on blocks and / or handles\n        // different ssrcs correctly\n        // generate sources from lines\n        Object.keys(media.ssrcs).forEach(ssrcNum => {\n            const mediaSsrc = media.ssrcs[ssrcNum];\n\n            modify.c('source', { xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0' });\n            modify.attrs({ ssrc: mediaSsrc.ssrc });\n\n            // iterate over ssrc lines\n            mediaSsrc.lines.forEach(line => {\n                const idx = line.indexOf(' ');\n                const kv = line.substr(idx + 1);\n\n                modify.c('parameter');\n                if (kv.indexOf(':') === -1) {\n                    modify.attrs({ name: kv });\n                } else {\n                    const nv = kv.split(':', 2);\n                    const name = nv[0];\n                    const value = SDPUtil.filterSpecialChars(nv[1]);\n\n                    modify.attrs({ name });\n                    modify.attrs({ value });\n                }\n                modify.up(); // end of parameter\n            });\n            modify.up(); // end of source\n        });\n\n        // generate source groups from lines\n        media.ssrcGroups.forEach(ssrcGroup => {\n            if (ssrcGroup.ssrcs.length) {\n\n                modify.c('ssrc-group', {\n                    semantics: ssrcGroup.semantics,\n                    xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'\n                });\n\n                ssrcGroup.ssrcs.forEach(ssrc => {\n                    modify.c('source', { ssrc })\n                        .up(); // end of source\n                });\n                modify.up(); // end of ssrc-group\n            }\n        });\n\n        modify.up(); // end of description\n        modify.up(); // end of content\n    });\n\n    return modified;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SDPDiffer.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport * as SignalingEvents from '../../service/RTC/SignalingEvents';\nimport SignalingLayer from '../../service/RTC/SignalingLayer';\n\nconst logger = getLogger(__filename);\n\n/**\n * Default XMPP implementation of the {@link SignalingLayer} interface. Obtains\n * the data from the MUC presence.\n */\nexport default class SignalingLayerImpl extends SignalingLayer {\n    /**\n     * Creates new instance.\n     */\n    constructor() {\n        super();\n\n        /**\n         * A map that stores SSRCs of remote streams. And is used only locally\n         * We store the mapping when jingle is received, and later is used\n         * onaddstream webrtc event where we have only the ssrc\n         * FIXME: This map got filled and never cleaned and can grow during long\n         * conference\n         * @type {Map<number, string>} maps SSRC number to jid\n         */\n        this.ssrcOwners = new Map();\n\n        /**\n         *\n         * @type {ChatRoom|null}\n         */\n        this.chatRoom = null;\n    }\n\n    /**\n     * Sets the <tt>ChatRoom</tt> instance used and binds presence listeners.\n     * @param {ChatRoom} room\n     */\n    setChatRoom(room) {\n        const oldChatRoom = this.chatRoom;\n\n        this.chatRoom = room;\n        if (oldChatRoom) {\n            oldChatRoom.removePresenceListener(\n                'audiomuted', this._audioMuteHandler);\n            oldChatRoom.removePresenceListener(\n                'videomuted', this._videoMuteHandler);\n            oldChatRoom.removePresenceListener(\n                'videoType', this._videoTypeHandler);\n        }\n        if (room) {\n            // SignalingEvents\n            this._audioMuteHandler = (node, from) => {\n                this.eventEmitter.emit(\n                    SignalingEvents.PEER_MUTED_CHANGED,\n                    from, MediaType.AUDIO, node.value === 'true');\n            };\n            room.addPresenceListener('audiomuted', this._audioMuteHandler);\n\n            this._videoMuteHandler = (node, from) => {\n                this.eventEmitter.emit(\n                    SignalingEvents.PEER_MUTED_CHANGED,\n                    from, MediaType.VIDEO, node.value === 'true');\n            };\n            room.addPresenceListener('videomuted', this._videoMuteHandler);\n\n            this._videoTypeHandler = (node, from) => {\n                this.eventEmitter.emit(\n                    SignalingEvents.PEER_VIDEO_TYPE_CHANGED,\n                    from, node.value);\n            };\n            room.addPresenceListener('videoType', this._videoTypeHandler);\n        }\n    }\n\n    /**\n     * @inheritDoc\n     */\n    getPeerMediaInfo(owner, mediaType) {\n        if (this.chatRoom) {\n            return this.chatRoom.getMediaPresenceInfo(owner, mediaType);\n        }\n        logger.error('Requested peer media info, before room was set');\n    }\n\n    /**\n     * @inheritDoc\n     */\n    getSSRCOwner(ssrc) {\n        return this.ssrcOwners.get(ssrc);\n    }\n\n    /**\n     * Set an SSRC owner.\n     * @param {number} ssrc an SSRC to be owned\n     * @param {string} endpointId owner's ID (MUC nickname)\n     * @throws TypeError if <tt>ssrc</tt> is not a number\n     */\n    setSSRCOwner(ssrc, endpointId) {\n        if (typeof ssrc !== 'number') {\n            throw new TypeError(`SSRC(${ssrc}) must be a number`);\n        }\n        this.ssrcOwners.set(ssrc, endpointId);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SignalingLayerImpl.js","\nimport Listenable from '../../modules/util/Listenable';\n\n/**\n * An object that carries the info about specific media type advertised by\n * participant in the signaling channel.\n * @typedef {Object} PeerMediaInfo\n * @property {boolean} muted indicates if the media is currently muted\n * @property {VideoType|undefined} videoType the type of the video if applicable\n */\n\n/**\n * Interface used to expose the information carried over the signaling channel\n * which is not available to the RTC module in the media SDP.\n *\n * @interface SignalingLayer\n */\nexport default class SignalingLayer extends Listenable {\n\n    /**\n     * Obtains the endpoint ID for given SSRC.\n     * @param {number} ssrc the SSRC number.\n     * @return {string|null} the endpoint ID for given media SSRC.\n     */\n    getSSRCOwner(ssrc) { // eslint-disable-line no-unused-vars\n        throw new Error('not implemented');\n    }\n\n    /**\n     * Obtains the info about given media advertised in the MUC presence of\n     * the participant identified by the given MUC JID.\n     * @param {string} owner the MUC jid of the participant for whom\n     * {@link PeerMediaInfo} will be obtained.\n     * @param {MediaType} mediaType the type of the media for which presence\n     * info will be obtained.\n     * @return {PeerMediaInfo|null} presenceInfo an object with media presence\n     * info or <tt>null</tt> either if there is no presence available for given\n     * JID or if the media type given is invalid.\n     */\n    getPeerMediaInfo(owner, mediaType) { // eslint-disable-line no-unused-vars\n        throw new Error('not implemented');\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/SignalingLayer.js","/* global __filename */\n/**\n * Strophe logger implementation. Logs from level WARN and above.\n */\nimport { getLogger } from 'jitsi-meet-logger';\nimport { Strophe } from 'strophe.js';\n\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\n\nconst logger = getLogger(__filename);\n\n/**\n * This is the last HTTP error status captured from Strophe debug logs.\n * The purpose of storing it is to distinguish between the network and\n * infrastructure reason for connection being dropped (see connectionHandler in\n * xmpp.js). The value will be cleared (-1) if the subsequent request succeeds\n * which means that the failure could be transient.\n *\n * FIXME in the latest Strophe (not released on npm) there is API to handle\n * particular HTTP errors, but there is no way to learn if the subsequent\n * request succeeded in order to tell if the error was one time incident or if\n * it was the reason for dropping the connection by Strophe (the connection is\n * dropped after 5 subsequent failures). Ideally Strophe should provide more\n * details about the reason on why the connection stopped.\n *\n * @type {number}\n */\nlet lastErrorStatus = -1;\n\n/**\n * A regular expression used to catch Strophe's log message indicating that the\n * last BOSH request was successful. When there is such message seen the\n * {@link lastErrorStatus} will be set back to '-1'.\n * @type {RegExp}\n */\nconst resetLastErrorStatusRegExpr = /request id \\d+.\\d+ got 200/;\n\n/**\n * A regular expression used to capture the current value of the BOSH request\n * error status (HTTP error code or '0' or something else).\n * @type {RegExp}\n */\nconst lastErrorStatusRegExpr\n    = /request errored, status: (\\d+), number of errors: \\d+/;\n\n/**\n *\n */\nexport default function() {\n\n    Strophe.log = function(level, msg) {\n        // Our global handler reports uncaught errors to the stats which may\n        // interpret those as partial call failure.\n        // Strophe log entry about secondary request timeout does not mean that\n        // it's a final failure(the request will be restarted), so we lower it's\n        // level here to a warning.\n        logger.trace('Strophe', level, msg);\n        if (typeof msg === 'string'\n                && msg.indexOf('Request ') !== -1\n                && msg.indexOf('timed out (secondary), restarting') !== -1) {\n            // eslint-disable-next-line no-param-reassign\n            level = Strophe.LogLevel.WARN;\n        }\n\n        /* eslint-disable no-case-declarations */\n        switch (level) {\n        case Strophe.LogLevel.DEBUG:\n            // The log message which reports successful status is logged on\n            // Strophe's DEBUG level.\n            if (lastErrorStatus !== -1\n                    && resetLastErrorStatusRegExpr.test(msg)) {\n                logger.debug('Reset lastErrorStatus');\n                lastErrorStatus = -1;\n            }\n            break;\n        case Strophe.LogLevel.WARN:\n            logger.warn(`Strophe: ${msg}`);\n            const errStatusCapture = lastErrorStatusRegExpr.exec(msg);\n\n            if (errStatusCapture && errStatusCapture.length === 2) {\n                lastErrorStatus = parseInt(errStatusCapture[1], 10);\n                logger.debug(`lastErrorStatus set to: ${lastErrorStatus}`);\n            }\n            break;\n        case Strophe.LogLevel.ERROR:\n        case Strophe.LogLevel.FATAL:\n            // eslint-disable-next-line no-param-reassign\n            msg = `Strophe: ${msg}`;\n            GlobalOnErrorHandler.callErrorHandler(new Error(msg));\n            logger.error(msg);\n            break;\n        }\n\n        /* eslint-enable no-case-declarations */\n    };\n\n    /**\n     * Returns error status (HTTP error code) of the last BOSH request.\n     *\n     * @return {number} HTTP error code, '0' for unknown or \"god knows what\"\n     * (this is a hack).\n     */\n    Strophe.getLastErrorStatus = function() {\n        return lastErrorStatus;\n    };\n\n    Strophe.getStatusString = function(status) {\n        switch (status) {\n        case Strophe.Status.ERROR:\n            return 'ERROR';\n        case Strophe.Status.CONNECTING:\n            return 'CONNECTING';\n        case Strophe.Status.CONNFAIL:\n            return 'CONNFAIL';\n        case Strophe.Status.AUTHENTICATING:\n            return 'AUTHENTICATING';\n        case Strophe.Status.AUTHFAIL:\n            return 'AUTHFAIL';\n        case Strophe.Status.CONNECTED:\n            return 'CONNECTED';\n        case Strophe.Status.DISCONNECTED:\n            return 'DISCONNECTED';\n        case Strophe.Status.DISCONNECTING:\n            return 'DISCONNECTING';\n        case Strophe.Status.ATTACHED:\n            return 'ATTACHED';\n        default:\n            return 'unknown';\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.util.js","import { getLogger } from 'jitsi-meet-logger';\nimport { $iq, Strophe } from 'strophe.js';\n\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\n\nimport ConnectionPlugin from './ConnectionPlugin';\n\n\nconst logger = getLogger(__filename);\n\n/**\n * Ping every 10 sec\n */\nconst PING_INTERVAL = 10000;\n\n/**\n * Ping timeout error after 15 sec of waiting.\n */\nconst PING_TIMEOUT = 15000;\n\n/**\n * Will close the connection after 3 consecutive ping errors.\n */\nconst PING_THRESHOLD = 3;\n\n/**\n * The number of timestamps of send pings to keep.\n * The current value is 2 minutes.\n * @type {number} number of timestamps.\n */\nconst PING_TIMESTAMPS_TO_KEEP = 120000 / PING_INTERVAL;\n\n/**\n * XEP-0199 ping plugin.\n *\n * Registers \"urn:xmpp:ping\" namespace under Strophe.NS.PING.\n */\nclass PingConnectionPlugin extends ConnectionPlugin {\n    /**\n     * Contructs new object\n     * @param {XMPP} xmpp the xmpp module.\n     * @constructor\n     */\n    constructor(xmpp) {\n        super();\n        this.failedPings = 0;\n        this.xmpp = xmpp;\n        this.pingExecIntervals = new Array(PING_TIMESTAMPS_TO_KEEP);\n    }\n\n    /**\n     * Initializes the plugin. Method called by Strophe.\n     * @param connection Strophe connection instance.\n     */\n    init(connection) {\n        super.init(connection);\n        Strophe.addNamespace('PING', 'urn:xmpp:ping');\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     * Sends \"ping\" to given <tt>jid</tt>\n     * @param jid the JID to which ping request will be sent.\n     * @param success callback called on success.\n     * @param error callback called on error.\n     * @param timeout ms how long are we going to wait for the response. On\n     * timeout <tt>error<//t> callback is called with undefined error argument.\n     */\n    ping(jid, success, error, timeout) {\n        this._addPingExecutionTimestamp();\n\n        const iq = $iq({\n            type: 'get',\n            to: jid\n        });\n\n        iq.c('ping', { xmlns: Strophe.NS.PING });\n        this.connection.sendIQ(iq, success, error, timeout);\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Checks if given <tt>jid</tt> has XEP-0199 ping support.\n     * @param jid the JID to be checked for ping support.\n     * @param callback function with boolean argument which will be\n     * <tt>true</tt> if XEP-0199 ping is supported by given <tt>jid</tt>\n     */\n    hasPingSupport(jid, callback) {\n        this.xmpp.caps.getFeatures(jid).then(features =>\n            callback(features.has('urn:xmpp:ping')), error => {\n            const errmsg = 'Ping feature discovery error';\n\n            GlobalOnErrorHandler.callErrorHandler(\n                new Error(`${errmsg}: ${error}`));\n            logger.error(errmsg, error);\n            callback(false);\n        });\n    }\n\n    /**\n     * Starts to send ping in given interval to specified remote JID.\n     * This plugin supports only one such task and <tt>stopInterval</tt>\n     * must be called before starting a new one.\n     * @param remoteJid remote JID to which ping requests will be sent to.\n     * @param interval task interval in ms.\n     */\n    startInterval(remoteJid, interval = PING_INTERVAL) {\n        if (this.intervalId) {\n            const errmsg = 'Ping task scheduled already';\n\n            GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n            logger.error(errmsg);\n\n            return;\n        }\n        this.intervalId = window.setInterval(() => {\n            this.ping(remoteJid, () => {\n                this.failedPings = 0;\n            }, error => {\n                this.failedPings += 1;\n                const errmsg = `Ping ${error ? 'error' : 'timeout'}`;\n\n                if (this.failedPings >= PING_THRESHOLD) {\n                    GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n                    logger.error(errmsg, error);\n\n                    // FIXME it doesn't help to disconnect when 3rd PING\n                    // times out, it only stops Strophe from retrying.\n                    // Not really sure what's the right thing to do in that\n                    // situation, but just closing the connection makes no\n                    // sense.\n                    // self.connection.disconnect();\n                } else {\n                    logger.warn(errmsg, error);\n                }\n            }, PING_TIMEOUT);\n        }, interval);\n        logger.info(`XMPP pings will be sent every ${interval} ms`);\n    }\n\n    /**\n     * Stops current \"ping\"  interval task.\n     */\n    stopInterval() {\n        if (this.intervalId) {\n            window.clearInterval(this.intervalId);\n            this.intervalId = null;\n            this.failedPings = 0;\n            logger.info('Ping interval cleared');\n        }\n    }\n\n    /**\n     * Adds the current time to the array of send ping timestamps.\n     * @private\n     */\n    _addPingExecutionTimestamp() {\n        this.pingExecIntervals.push(new Date().getTime());\n\n        // keep array length to PING_TIMESTAMPS_TO_KEEP\n        if (this.pingExecIntervals.length > PING_TIMESTAMPS_TO_KEEP) {\n            this.pingExecIntervals.shift();\n        }\n    }\n\n    /**\n     * Returns the maximum time between the recent sent pings, if there is a\n     * big value it means the computer was inactive for some time(suspended).\n     * Checks the maximum gap between sending pings, considering and the\n     * current time. Trying to detect computer inactivity (sleep).\n     *\n     * @returns {int} the time ping was suspended, if it was not 0 is returned.\n     */\n    getPingSuspendTime() {\n        const pingIntervals = this.pingExecIntervals.slice();\n\n        // we need current time, as if ping was sent now\n        // if computer sleeps we will get correct interval after next\n        // scheduled ping, bet we sometimes need that interval before waiting\n        // for the next ping, on closing the connection on error.\n        pingIntervals.push(new Date().getTime());\n\n        let maxInterval = 0;\n        let previousTS = pingIntervals[0];\n\n        pingIntervals.forEach(e => {\n            const currentInterval = e - previousTS;\n\n            if (currentInterval > maxInterval) {\n                maxInterval = currentInterval;\n            }\n\n            previousTS = e;\n        });\n\n        // remove the interval between the ping sent\n        // this way in normal execution there is no suspend and the return\n        // will be 0 or close to 0.\n        maxInterval -= PING_INTERVAL;\n\n        // make sure we do not return less than 0\n        return Math.max(maxInterval, 0);\n    }\n}\n\n/**\n *\n * @param xmpp\n */\nexport default function(xmpp) {\n    Strophe.addConnectionPlugin('ping', new PingConnectionPlugin(xmpp));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.ping.js","/* global $ */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport { $iq, Strophe } from 'strophe.js';\n\nimport ConnectionPlugin from './ConnectionPlugin';\n\nconst logger = getLogger(__filename);\n\nconst RAYO_XMLNS = 'urn:xmpp:rayo:1';\n\n/**\n *\n */\nclass RayoConnectionPlugin extends ConnectionPlugin {\n    /**\n     *\n     * @param connection\n     */\n    init(connection) {\n        super.init(connection);\n\n        this.connection.addHandler(\n            this.onRayo.bind(this), RAYO_XMLNS, 'iq', 'set', null, null);\n    }\n\n    /**\n     *\n     * @param iq\n     */\n    onRayo(iq) {\n        logger.info('Rayo IQ', iq);\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     *\n     * @param to\n     * @param from\n     * @param roomName\n     * @param roomPass\n     * @param focusMucJid\n     */\n    dial(to, from, roomName, roomPass, focusMucJid) {\n        return new Promise((resolve, reject) => {\n            if (!focusMucJid) {\n                reject(new Error('Internal error!'));\n\n                return;\n            }\n            const req = $iq({\n                type: 'set',\n                to: focusMucJid\n            });\n\n            req.c('dial', {\n                xmlns: RAYO_XMLNS,\n                to,\n                from\n            });\n            req.c('header', {\n                name: 'JvbRoomName',\n                value: roomName\n            }).up();\n\n            if (roomPass && roomPass.length) {\n                req.c('header', {\n                    name: 'JvbRoomPassword',\n                    value: roomPass\n                }).up();\n            }\n\n            this.connection.sendIQ(\n                req,\n                result => {\n                    logger.info('Dial result ', result);\n\n                    // eslint-disable-next-line newline-per-chained-call\n                    const resource = $(result).find('ref').attr('uri');\n\n                    this.callResource = resource.substr('xmpp:'.length);\n                    logger.info(`Received call resource: ${this.callResource}`);\n                    resolve();\n                },\n                error => {\n                    logger.info('Dial error ', error);\n                    reject(error);\n                });\n        });\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     *\n     */\n    hangup() {\n        return new Promise((resolve, reject) => {\n            if (!this.callResource) {\n                reject(new Error('No call in progress'));\n                logger.warn('No call in progress');\n\n                return;\n            }\n\n            const req = $iq({\n                type: 'set',\n                to: this.callResource\n            });\n\n            req.c('hangup', {\n                xmlns: RAYO_XMLNS\n            });\n\n            this.connection.sendIQ(req, result => {\n                logger.info('Hangup result ', result);\n                this.callResource = null;\n                resolve();\n            }, error => {\n                logger.info('Hangup error ', error);\n                this.callResource = null;\n                reject(new Error('Hangup error '));\n            });\n        });\n    }\n}\n\n/**\n *\n */\nexport default function() {\n    Strophe.addConnectionPlugin('rayo', new RayoConnectionPlugin());\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.rayo.js","import { Strophe } from 'strophe.js';\n\nimport ConnectionPlugin from './ConnectionPlugin';\n\n/**\n *  Logs raw stanzas and makes them available for download as JSON\n */\nclass StropheLogger extends ConnectionPlugin {\n    /**\n     *\n     */\n    constructor() {\n        super();\n        this.log = [];\n    }\n\n    /**\n     *\n     * @param connection\n     */\n    init(connection) {\n        super.init(connection);\n        this.connection.rawInput = this.logIncoming.bind(this);\n        this.connection.rawOutput = this.logOutgoing.bind(this);\n    }\n\n    /**\n     *\n     * @param stanza\n     */\n    logIncoming(stanza) {\n        this.log.push([ new Date().getTime(), 'incoming', stanza ]);\n    }\n\n    /**\n     *\n     * @param stanza\n     */\n    logOutgoing(stanza) {\n        this.log.push([ new Date().getTime(), 'outgoing', stanza ]);\n    }\n}\n\n/**\n *\n */\nexport default function() {\n    Strophe.addConnectionPlugin('logger', new StropheLogger());\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.logger.js","/* global $ */\n\nimport { b64_sha1, Strophe } from 'strophe.js'; // eslint-disable-line camelcase\n\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\nimport Listenable from '../util/Listenable';\n\n/**\n * The property\n */\nconst IDENTITY_PROPERTIES = [ 'category', 'type', 'lang', 'name' ];\nconst IDENTITY_PROPERTIES_FOR_COMPARE = [ 'category', 'type', 'lang' ];\nconst HASH = 'sha-1';\n\n/**\n *\n * @param a\n * @param b\n */\nfunction compareIdentities(a, b) {\n    let res = 0;\n\n    IDENTITY_PROPERTIES_FOR_COMPARE.some(key =>\n        (res = ((a[key] > b[key]) && 1) || ((a[key] < b[key]) && -1)) !== 0\n    );\n\n    return res;\n}\n\n/**\n * Implements xep-0115 ( http://xmpp.org/extensions/xep-0115.html )\n */\nexport default class Caps extends Listenable {\n    /**\n     * Constructs new Caps instance.\n     * @param {Strophe.Connection} connection the strophe connection object\n     * @param {String} node the value of the node attribute of the \"c\" xml node\n     * that will be sent to the other participants\n     */\n    constructor(connection = {}, node = 'http://jitsi.org/jitsimeet') {\n        super();\n        this.node = node;\n        this.disco = connection.disco;\n        if (!this.disco) {\n            throw new Error(\n                'Missing strophe-plugins '\n                + '(disco plugin is required)!');\n        }\n\n        this.versionToCapabilities = Object.create(null);\n        this.jidToVersion = Object.create(null);\n        this.version = '';\n        this.rooms = new Set();\n\n        const emuc = connection.emuc;\n\n        emuc.addListener(XMPPEvents.EMUC_ROOM_ADDED,\n            room => this._addChatRoom(room));\n        emuc.addListener(XMPPEvents.EMUC_ROOM_REMOVED,\n            room => this._removeChatRoom(room));\n        Object.keys(emuc.rooms).forEach(jid => {\n            this._addChatRoom(emuc.rooms[jid]);\n        });\n\n        Strophe.addNamespace('CAPS', 'http://jabber.org/protocol/caps');\n        this.disco.addFeature(Strophe.NS.CAPS);\n        connection.addHandler(this._handleCaps.bind(this), Strophe.NS.CAPS);\n\n        this._onMucMemberLeft = this._removeJidToVersionEntry.bind(this);\n    }\n\n    /**\n     * Adds new feature to the list of supported features for the local\n     * participant\n     * @param {String} feature the name of the feature.\n     * @param {boolean} submit if true - new presence with updated \"c\" node\n     * will be sent.\n     */\n    addFeature(feature, submit = false) {\n        this.disco.addFeature(feature);\n        this._generateVersion();\n        if (submit) {\n            this.submit();\n        }\n    }\n\n    /**\n     * Removes a feature from the list of supported features for the local\n     * participant\n     * @param {String} feature the name of the feature.\n     * @param {boolean} submit if true - new presence with updated \"c\" node\n     * will be sent.\n     */\n    removeFeature(feature, submit = false) {\n        this.disco.removeFeature(feature);\n        this._generateVersion();\n        if (submit) {\n            this.submit();\n        }\n    }\n\n    /**\n     * Sends new presence stanza for every room from the list of rooms.\n     */\n    submit() {\n        this.rooms.forEach(room => room.sendPresence());\n    }\n\n    /**\n     * Returns a set with the features for a participant.\n     * @param {String} jid the jid of the participant\n     * @param {int} timeout the timeout in ms for reply from the participant.\n     * @returns {Promise<Set<String>, Error>}\n     */\n    getFeatures(jid, timeout = 5000) {\n        const user\n            = jid in this.jidToVersion ? this.jidToVersion[jid] : null;\n\n        if (!user || !(user.version in this.versionToCapabilities)) {\n            const node = user ? `${user.node}#${user.version}` : null;\n\n\n            return new Promise((resolve, reject) =>\n                this.disco.info(jid, node, response => {\n                    const features = new Set();\n\n                    $(response)\n                        .find('>query>feature')\n                        .each(\n                            (idx, el) => features.add(el.getAttribute('var')));\n                    if (user) {\n                        // TODO: Maybe use the version + node + hash as keys?\n                        this.versionToCapabilities[user.version] = features;\n                    }\n                    resolve(features);\n                }, reject, timeout)\n            );\n        }\n\n        return Promise.resolve(this.versionToCapabilities[user.version]);\n    }\n\n    /**\n     * Adds ChatRoom instance to the list of rooms. Adds listeners to the room\n     * and adds \"c\" element to the presences of the room.\n     * @param {ChatRoom} room the room.\n     */\n    _addChatRoom(room) {\n        this.rooms.add(room);\n        room.addListener(XMPPEvents.MUC_MEMBER_LEFT, this._onMucMemberLeft);\n        this._fixChatRoomPresenceMap(room);\n    }\n\n    /**\n     * Removes ChatRoom instance from the list of rooms. Removes listeners\n     * added from the Caps class.\n     * @param {ChatRoom} room the room.\n     */\n    _removeChatRoom(room) {\n        this.rooms.delete(room);\n        room.removeListener(XMPPEvents.MUC_MEMBER_LEFT, this._onMucMemberLeft);\n    }\n\n    /**\n     * Creates/updates the \"c\" xml node into the presence of the passed room.\n     * @param {ChatRoom} room the room.\n     */\n    _fixChatRoomPresenceMap(room) {\n        room.addToPresence('c', {\n            attributes: {\n                xmlns: Strophe.NS.CAPS,\n                hash: HASH,\n                node: this.node,\n                ver: this.version\n            }\n        });\n    }\n\n    /**\n     * Handles this.version changes.\n     */\n    _notifyVersionChanged() {\n        // update the version for all rooms\n        this.rooms.forEach(room => this._fixChatRoomPresenceMap(room));\n        this.submit();\n    }\n\n    /**\n     * Generates the value for the \"ver\" attribute.\n     */\n    _generateVersion() {\n        const identities\n          = this.disco._identities.sort(compareIdentities).reduce(\n              (accumulatedValue, identity) =>\n                  `${\n                      IDENTITY_PROPERTIES.reduce(\n                          (tmp, key, idx) =>\n                              tmp\n                                  + (idx === 0 ? '' : '/')\n                                  + identity[key],\n                          '')\n                  }<`,\n              '');\n        const features\n            = this.disco._features.sort().reduce(\n                (tmp, feature) => `${tmp + feature}<`, '');\n\n        this.version = b64_sha1(identities + features);\n        this._notifyVersionChanged();\n    }\n\n    /**\n     * Parses the \"c\" xml node from presence.\n     * @param {DOMElement} stanza the presence packet\n     */\n    _handleCaps(stanza) {\n        const from = stanza.getAttribute('from');\n        const caps = stanza.querySelector('c');\n        const version = caps.getAttribute('ver');\n        const node = caps.getAttribute('node');\n        const oldVersion = this.jidToVersion[from];\n\n        this.jidToVersion[from] = { version,\n            node };\n        if (oldVersion && oldVersion.version !== version) {\n            this.eventEmitter.emit(XMPPEvents.PARTCIPANT_FEATURES_CHANGED,\n                from);\n        }\n\n        // return true to not remove the handler from Strophe\n        return true;\n    }\n\n    /**\n     * Removes entry from this.jidToVersion map.\n     * @param {String} jid the jid to be removed.\n     */\n    _removeJidToVersionEntry(jid) {\n        if (jid in this.jidToVersion) {\n            delete this.jidToVersion[jid];\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/Caps.js","/* global __filename */\nimport { Strophe } from 'strophe.js';\n\nimport {\n    ACTION_JINGLE_SA_TIMEOUT,\n    createBridgeDownEvent,\n    createConnectionStageReachedEvent,\n    createFocusLeftEvent,\n    createJingleEvent,\n    createRemotelyMutedEvent\n} from './service/statistics/AnalyticsEvents';\nimport AuthenticationEvents\n    from './service/authentication/AuthenticationEvents';\nimport EventEmitterForwarder from './modules/util/EventEmitterForwarder';\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as JitsiConferenceErrors from './JitsiConferenceErrors';\nimport * as JitsiConferenceEvents from './JitsiConferenceEvents';\nimport * as MediaType from './service/RTC/MediaType';\nimport RTCEvents from './service/RTC/RTCEvents';\nimport VideoType from './service/RTC/VideoType';\nimport Statistics from './modules/statistics/statistics';\nimport XMPPEvents from './service/xmpp/XMPPEvents';\n\nconst logger = getLogger(__filename);\n\n/**\n * Setups all event listeners related to conference\n * @param conference {JitsiConference} the conference\n */\nexport default function JitsiConferenceEventManager(conference) {\n    this.conference = conference;\n\n    // Listeners related to the conference only\n    conference.on(JitsiConferenceEvents.TRACK_MUTE_CHANGED,\n        track => {\n            if (!track.isLocal() || !conference.statistics) {\n                return;\n            }\n            const session\n                = track.isP2P\n                    ? conference.p2pJingleSession : conference.jvbJingleSession;\n\n            // TPC will be null, before the conference starts, but the event\n            // still should be queued\n            const tpc = (session && session.peerconnection) || null;\n\n            conference.statistics.sendMuteEvent(\n                tpc,\n                track.isMuted(),\n                track.getType());\n        });\n}\n\n/**\n * Setups event listeners related to conference.chatRoom\n */\nJitsiConferenceEventManager.prototype.setupChatRoomListeners = function() {\n    const conference = this.conference;\n    const chatRoom = conference.room;\n\n    this.chatRoomForwarder = new EventEmitterForwarder(chatRoom,\n        this.conference.eventEmitter);\n\n    chatRoom.addListener(XMPPEvents.ICE_RESTARTING, jingleSession => {\n        if (!jingleSession.isP2P) {\n            // If using DataChannel as bridge channel, it must be closed\n            // before ICE restart, otherwise Chrome will not trigger \"opened\"\n            // event for the channel established with the new bridge.\n            // TODO: This may be bypassed when using a WebSocket as bridge\n            // channel.\n            conference.rtc.closeBridgeChannel();\n        }\n\n        // else: there are no DataChannels in P2P session (at least for now)\n    });\n\n    chatRoom.addListener(XMPPEvents.AUDIO_MUTED_BY_FOCUS,\n        () => {\n            // TODO: Add a way to differentiate between commands which caused\n            // us to mute and those that did not change our state (i.e. we were\n            // already muted).\n            Statistics.sendAnalytics(createRemotelyMutedEvent());\n\n            // set isMutedByFocus when setAudioMute Promise ends\n            conference.rtc.setAudioMute(true).then(\n                () => {\n                    conference.isMutedByFocus = true;\n                },\n                () =>\n                    logger.warn(\n                        'Error while audio muting due to focus request'));\n        }\n    );\n\n    this.chatRoomForwarder.forward(XMPPEvents.SUBJECT_CHANGED,\n        JitsiConferenceEvents.SUBJECT_CHANGED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.MUC_JOINED,\n        JitsiConferenceEvents.CONFERENCE_JOINED);\n\n    // send some analytics events\n    chatRoom.addListener(XMPPEvents.MUC_JOINED,\n        () => {\n            this.conference.isJvbConnectionInterrupted = false;\n\n            // TODO: Move all of the 'connectionTimes' logic to its own module.\n            Object.keys(chatRoom.connectionTimes).forEach(key => {\n                const event\n                    = createConnectionStageReachedEvent(\n                        `conference_${key}`,\n                        { value: chatRoom.connectionTimes[key] });\n\n                Statistics.sendAnalytics(event);\n            });\n\n            // TODO: Move all of the 'connectionTimes' logic to its own module.\n            Object.keys(chatRoom.xmpp.connectionTimes).forEach(key => {\n                const event\n                    = createConnectionStageReachedEvent(\n                        `xmpp_${key}`,\n                        { value: chatRoom.xmpp.connectionTimes[key] });\n\n                Statistics.sendAnalytics(event);\n            });\n        });\n\n    this.chatRoomForwarder.forward(XMPPEvents.ROOM_JOIN_ERROR,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.CONNECTION_ERROR);\n\n    this.chatRoomForwarder.forward(XMPPEvents.ROOM_CONNECT_ERROR,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.CONNECTION_ERROR);\n    this.chatRoomForwarder.forward(XMPPEvents.ROOM_CONNECT_NOT_ALLOWED_ERROR,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.NOT_ALLOWED_ERROR);\n\n    this.chatRoomForwarder.forward(XMPPEvents.ROOM_MAX_USERS_ERROR,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.CONFERENCE_MAX_USERS);\n\n    this.chatRoomForwarder.forward(XMPPEvents.PASSWORD_REQUIRED,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.PASSWORD_REQUIRED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.AUTHENTICATION_REQUIRED,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.AUTHENTICATION_REQUIRED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.BRIDGE_DOWN,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.VIDEOBRIDGE_NOT_AVAILABLE);\n    chatRoom.addListener(\n        XMPPEvents.BRIDGE_DOWN,\n        () => Statistics.sendAnalytics(createBridgeDownEvent()));\n\n    this.chatRoomForwarder.forward(XMPPEvents.RESERVATION_ERROR,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.RESERVATION_ERROR);\n\n    this.chatRoomForwarder.forward(XMPPEvents.GRACEFUL_SHUTDOWN,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.GRACEFUL_SHUTDOWN);\n\n    chatRoom.addListener(XMPPEvents.JINGLE_FATAL_ERROR,\n        (session, error) => {\n            if (!session.isP2P) {\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.CONFERENCE_FAILED,\n                    JitsiConferenceErrors.JINGLE_FATAL_ERROR, error);\n            }\n        });\n\n    chatRoom.addListener(XMPPEvents.CONNECTION_ICE_FAILED,\n        jingleSession => {\n            conference._onIceConnectionFailed(jingleSession);\n        });\n\n    this.chatRoomForwarder.forward(XMPPEvents.MUC_DESTROYED,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.CONFERENCE_DESTROYED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.CHAT_ERROR_RECEIVED,\n        JitsiConferenceEvents.CONFERENCE_ERROR,\n        JitsiConferenceErrors.CHAT_ERROR);\n\n    this.chatRoomForwarder.forward(XMPPEvents.FOCUS_DISCONNECTED,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.FOCUS_DISCONNECTED);\n\n    chatRoom.addListener(XMPPEvents.FOCUS_LEFT,\n        () => {\n            Statistics.sendAnalytics(createFocusLeftEvent());\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.CONFERENCE_FAILED,\n                JitsiConferenceErrors.FOCUS_LEFT);\n        });\n\n    chatRoom.addListener(XMPPEvents.SESSION_ACCEPT_TIMEOUT,\n        jingleSession => {\n            Statistics.sendAnalyticsAndLog(\n                createJingleEvent(\n                    ACTION_JINGLE_SA_TIMEOUT,\n                    { p2p: jingleSession.isP2P }));\n        });\n\n    this.chatRoomForwarder.forward(XMPPEvents.RECORDER_STATE_CHANGED,\n        JitsiConferenceEvents.RECORDER_STATE_CHANGED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.TRANSCRIPTION_STATUS_CHANGED,\n        JitsiConferenceEvents.TRANSCRIPTION_STATUS_CHANGED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.VIDEO_SIP_GW_AVAILABILITY_CHANGED,\n        JitsiConferenceEvents.VIDEO_SIP_GW_AVAILABILITY_CHANGED);\n\n    this.chatRoomForwarder.forward(\n        XMPPEvents.VIDEO_SIP_GW_SESSION_STATE_CHANGED,\n        JitsiConferenceEvents.VIDEO_SIP_GW_SESSION_STATE_CHANGED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.PHONE_NUMBER_CHANGED,\n        JitsiConferenceEvents.PHONE_NUMBER_CHANGED);\n\n    chatRoom.addListener(\n        XMPPEvents.CONFERENCE_SETUP_FAILED,\n        (jingleSession, error) => {\n            if (!jingleSession.isP2P) {\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.CONFERENCE_FAILED,\n                    JitsiConferenceErrors.SETUP_FAILED,\n                    error);\n            }\n        });\n\n    chatRoom.setParticipantPropertyListener((node, from) => {\n        const participant = conference.getParticipantById(from);\n\n        if (!participant) {\n            return;\n        }\n\n        participant.setProperty(\n            node.tagName.substring('jitsi_participant_'.length),\n            node.value);\n    });\n\n    this.chatRoomForwarder.forward(XMPPEvents.KICKED,\n        JitsiConferenceEvents.KICKED);\n    chatRoom.addListener(XMPPEvents.KICKED,\n        () => {\n            conference.leave();\n        });\n    chatRoom.addListener(XMPPEvents.SUSPEND_DETECTED,\n        conference.onSuspendDetected.bind(conference));\n\n    this.chatRoomForwarder.forward(XMPPEvents.MUC_LOCK_CHANGED,\n        JitsiConferenceEvents.LOCK_STATE_CHANGED);\n\n    chatRoom.addListener(XMPPEvents.MUC_MEMBER_JOINED,\n        conference.onMemberJoined.bind(conference));\n    chatRoom.addListener(XMPPEvents.MUC_MEMBER_BOT_TYPE_CHANGED,\n        conference._onMemberBotTypeChanged.bind(conference));\n    chatRoom.addListener(XMPPEvents.MUC_MEMBER_LEFT,\n        conference.onMemberLeft.bind(conference));\n    this.chatRoomForwarder.forward(XMPPEvents.MUC_LEFT,\n        JitsiConferenceEvents.CONFERENCE_LEFT);\n\n    chatRoom.addListener(XMPPEvents.DISPLAY_NAME_CHANGED,\n        conference.onDisplayNameChanged.bind(conference));\n\n    chatRoom.addListener(XMPPEvents.LOCAL_ROLE_CHANGED, role => {\n        conference.onLocalRoleChanged(role);\n\n        // log all events for the recorder operated by the moderator\n        if (conference.statistics && conference.isModerator()) {\n            conference.on(JitsiConferenceEvents.RECORDER_STATE_CHANGED,\n                recorderSession => {\n                    const logObject = {\n                        error: recorderSession.getError(),\n                        id: 'recorder_status',\n                        status: recorderSession.getStatus()\n                    };\n\n                    Statistics.sendLog(JSON.stringify(logObject));\n                });\n        }\n    });\n\n    chatRoom.addListener(XMPPEvents.MUC_ROLE_CHANGED,\n        conference.onUserRoleChanged.bind(conference));\n\n    chatRoom.addListener(AuthenticationEvents.IDENTITY_UPDATED,\n        (authEnabled, authIdentity) => {\n            conference.authEnabled = authEnabled;\n            conference.authIdentity = authIdentity;\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.AUTH_STATUS_CHANGED, authEnabled,\n                authIdentity);\n        });\n\n    chatRoom.addListener(\n        XMPPEvents.MESSAGE_RECEIVED,\n\n        // eslint-disable-next-line max-params\n        (jid, displayName, txt, myJid, ts) => {\n            const id = Strophe.getResourceFromJid(jid);\n\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.MESSAGE_RECEIVED,\n                id, txt, ts);\n        });\n\n    chatRoom.addListener(\n        XMPPEvents.PRIVATE_MESSAGE_RECEIVED,\n\n        // eslint-disable-next-line max-params\n        (jid, displayName, txt, myJid, ts) => {\n            const id = Strophe.getResourceFromJid(jid);\n\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.PRIVATE_MESSAGE_RECEIVED,\n                id, txt, ts);\n        });\n\n    chatRoom.addListener(XMPPEvents.PRESENCE_STATUS,\n        (jid, status) => {\n            const id = Strophe.getResourceFromJid(jid);\n            const participant = conference.getParticipantById(id);\n\n            if (!participant || participant._status === status) {\n                return;\n            }\n            participant._status = status;\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.USER_STATUS_CHANGED, id, status);\n        });\n\n    chatRoom.addListener(XMPPEvents.JSON_MESSAGE_RECEIVED,\n        (from, payload) => {\n            const id = Strophe.getResourceFromJid(from);\n            const participant = conference.getParticipantById(id);\n\n            if (participant) {\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.ENDPOINT_MESSAGE_RECEIVED,\n                    participant, payload);\n            } else {\n                logger.warn(\n                    'Ignored XMPPEvents.JSON_MESSAGE_RECEIVED for not existing '\n                    + `participant: ${from}`,\n                    payload);\n            }\n        });\n\n    chatRoom.addPresenceListener('startmuted', (data, from) => {\n        let isModerator = false;\n\n        if (conference.myUserId() === from && conference.isModerator()) {\n            isModerator = true;\n        } else {\n            const participant = conference.getParticipantById(from);\n\n            if (participant && participant.isModerator()) {\n                isModerator = true;\n            }\n        }\n\n        if (!isModerator) {\n            return;\n        }\n\n        const startAudioMuted = data.attributes.audio === 'true';\n        const startVideoMuted = data.attributes.video === 'true';\n\n        let updated = false;\n\n        if (startAudioMuted !== conference.startMutedPolicy.audio) {\n            conference.startMutedPolicy.audio = startAudioMuted;\n            updated = true;\n        }\n\n        if (startVideoMuted !== conference.startMutedPolicy.video) {\n            conference.startMutedPolicy.video = startVideoMuted;\n            updated = true;\n        }\n\n        if (updated) {\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.START_MUTED_POLICY_CHANGED,\n                conference.startMutedPolicy\n            );\n        }\n    });\n\n    chatRoom.addPresenceListener('devices', (data, from) => {\n        let isAudioAvailable = false;\n        let isVideoAvailable = false;\n\n        data.children.forEach(config => {\n            if (config.tagName === 'audio') {\n                isAudioAvailable = config.value === 'true';\n            }\n            if (config.tagName === 'video') {\n                isVideoAvailable = config.value === 'true';\n            }\n        });\n\n        let availableDevices;\n\n        if (conference.myUserId() === from) {\n            availableDevices = conference.availableDevices;\n        } else {\n            const participant = conference.getParticipantById(from);\n\n            if (!participant) {\n                return;\n            }\n\n            availableDevices = participant._availableDevices;\n        }\n\n        let updated = false;\n\n        if (availableDevices.audio !== isAudioAvailable) {\n            updated = true;\n            availableDevices.audio = isAudioAvailable;\n        }\n\n        if (availableDevices.video !== isVideoAvailable) {\n            updated = true;\n            availableDevices.video = isVideoAvailable;\n        }\n\n        if (updated) {\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.AVAILABLE_DEVICES_CHANGED,\n                from, availableDevices);\n        }\n    });\n\n    if (conference.statistics) {\n        // FIXME ICE related events should end up in RTCEvents eventually\n        chatRoom.addListener(XMPPEvents.CONNECTION_ICE_FAILED,\n            session => {\n                conference.statistics.sendIceConnectionFailedEvent(\n                    session.peerconnection);\n            });\n\n        // FIXME XMPPEvents.ADD_ICE_CANDIDATE_FAILED is never emitted\n        chatRoom.addListener(XMPPEvents.ADD_ICE_CANDIDATE_FAILED,\n            (e, pc) => {\n                conference.statistics.sendAddIceCandidateFailed(e, pc);\n            });\n    }\n};\n\n/**\n * Setups event listeners related to conference.rtc\n */\nJitsiConferenceEventManager.prototype.setupRTCListeners = function() {\n    const conference = this.conference;\n    const rtc = conference.rtc;\n\n    rtc.addListener(\n        RTCEvents.REMOTE_TRACK_ADDED,\n        conference.onRemoteTrackAdded.bind(conference));\n\n    rtc.addListener(\n        RTCEvents.REMOTE_TRACK_REMOVED,\n        conference.onRemoteTrackRemoved.bind(conference));\n\n    rtc.addListener(RTCEvents.DOMINANT_SPEAKER_CHANGED,\n        id => {\n            if (conference.lastDominantSpeaker !== id && conference.room) {\n                conference.lastDominantSpeaker = id;\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.DOMINANT_SPEAKER_CHANGED, id);\n            }\n            if (conference.statistics && conference.myUserId() === id) {\n                // We are the new dominant speaker.\n                conference.statistics.sendDominantSpeakerEvent();\n            }\n        });\n\n    rtc.addListener(RTCEvents.DATA_CHANNEL_OPEN, () => {\n        const now = window.performance.now();\n        const key = 'data.channel.opened';\n\n        // TODO: Move all of the 'connectionTimes' logic to its own module.\n        logger.log(`(TIME) ${key}`, now);\n        conference.room.connectionTimes[key] = now;\n        Statistics.sendAnalytics(\n            createConnectionStageReachedEvent(key, { value: now }));\n\n        conference.eventEmitter.emit(JitsiConferenceEvents.DATA_CHANNEL_OPENED);\n    });\n\n    rtc.addListener(\n        RTCEvents.AVAILABLE_DEVICES_CHANGED,\n        devices => conference.room.updateDeviceAvailability(devices));\n\n    rtc.addListener(RTCEvents.ENDPOINT_MESSAGE_RECEIVED,\n        (from, payload) => {\n            const participant = conference.getParticipantById(from);\n\n            if (participant) {\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.ENDPOINT_MESSAGE_RECEIVED,\n                    participant, payload);\n            } else {\n                logger.warn(\n                    'Ignored ENDPOINT_MESSAGE_RECEIVED for not existing '\n                        + `participant: ${from}`,\n                    payload);\n            }\n        });\n\n    rtc.addListener(RTCEvents.LOCAL_UFRAG_CHANGED,\n        (tpc, ufrag) => {\n            if (!tpc.isP2P) {\n                Statistics.sendLog(\n                    JSON.stringify({\n                        id: 'local_ufrag',\n                        value: ufrag\n                    }));\n            }\n        });\n    rtc.addListener(RTCEvents.REMOTE_UFRAG_CHANGED,\n        (tpc, ufrag) => {\n            if (!tpc.isP2P) {\n                Statistics.sendLog(\n                    JSON.stringify({\n                        id: 'remote_ufrag',\n                        value: ufrag\n                    }));\n            }\n        });\n\n    rtc.addListener(RTCEvents.CREATE_ANSWER_FAILED,\n        (e, tpc) => {\n            conference.statistics.sendCreateAnswerFailed(e, tpc);\n        });\n\n    rtc.addListener(RTCEvents.CREATE_OFFER_FAILED,\n        (e, tpc) => {\n            conference.statistics.sendCreateOfferFailed(e, tpc);\n        });\n\n    rtc.addListener(RTCEvents.SET_LOCAL_DESCRIPTION_FAILED,\n        (e, tpc) => {\n            conference.statistics.sendSetLocalDescFailed(e, tpc);\n        });\n\n    rtc.addListener(RTCEvents.SET_REMOTE_DESCRIPTION_FAILED,\n        (e, tpc) => {\n            conference.statistics.sendSetRemoteDescFailed(e, tpc);\n        });\n\n    rtc.addListener(RTCEvents.LOCAL_TRACK_SSRC_UPDATED,\n        (track, ssrc) => {\n            // when starting screen sharing, the track is created and when\n            // we do set local description and we process the ssrc we\n            // will be notified for it and we will report it with the event\n            // for screen sharing\n            if (track.isVideoTrack() && track.videoType === VideoType.DESKTOP) {\n                conference.statistics.sendScreenSharingEvent(true, ssrc);\n            }\n        });\n};\n\n/**\n * Setups event listeners related to conference.xmpp\n */\nJitsiConferenceEventManager.prototype.setupXMPPListeners = function() {\n    const conference = this.conference;\n\n    conference.xmpp.caps.addListener(XMPPEvents.PARTCIPANT_FEATURES_CHANGED,\n        from => {\n            const participant\n                = conference.getParticipantById(\n                    Strophe.getResourceFromJid(from));\n\n            if (participant) {\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.PARTCIPANT_FEATURES_CHANGED,\n                    participant);\n            }\n        });\n    conference.xmpp.addListener(\n        XMPPEvents.CALL_INCOMING,\n        conference.onIncomingCall.bind(conference));\n    conference.xmpp.addListener(\n        XMPPEvents.CALL_ACCEPTED,\n        conference.onCallAccepted.bind(conference));\n    conference.xmpp.addListener(\n        XMPPEvents.TRANSPORT_INFO,\n        conference.onTransportInfo.bind(conference));\n    conference.xmpp.addListener(\n        XMPPEvents.CALL_ENDED,\n        conference.onCallEnded.bind(conference));\n\n    conference.xmpp.addListener(XMPPEvents.START_MUTED_FROM_FOCUS,\n        (audioMuted, videoMuted) => {\n            if (conference.options.config.ignoreStartMuted) {\n                return;\n            }\n\n            conference.startAudioMuted = audioMuted;\n            conference.startVideoMuted = videoMuted;\n\n            // mute existing local tracks because this is initial mute from\n            // Jicofo\n            conference.getLocalTracks().forEach(track => {\n                switch (track.getType()) {\n                case MediaType.AUDIO:\n                    conference.startAudioMuted && track.mute();\n                    break;\n                case MediaType.VIDEO:\n                    conference.startVideoMuted && track.mute();\n                    break;\n                }\n            });\n\n            conference.eventEmitter.emit(JitsiConferenceEvents.STARTED_MUTED);\n        });\n};\n\n/**\n * Setups event listeners related to conference.statistics\n */\nJitsiConferenceEventManager.prototype.setupStatisticsListeners = function() {\n    const conference = this.conference;\n\n    if (!conference.statistics) {\n        return;\n    }\n\n    /* eslint-disable max-params */\n    conference.statistics.addAudioLevelListener((tpc, ssrc, level, isLocal) => {\n        conference.rtc.setAudioLevel(tpc, ssrc, level, isLocal);\n    });\n\n    /* eslint-enable max-params */\n\n    // Forward the \"before stats disposed\" event\n    conference.statistics.addBeforeDisposedListener(() => {\n        conference.eventEmitter.emit(\n            JitsiConferenceEvents.BEFORE_STATISTICS_DISPOSED);\n    });\n    conference.statistics.addByteSentStatsListener((tpc, stats) => {\n        conference.getLocalTracks(MediaType.AUDIO).forEach(track => {\n            const ssrc = tpc.getLocalSSRC(track);\n\n            if (!ssrc || !stats.hasOwnProperty(ssrc)) {\n                return;\n            }\n\n            track._onByteSentStatsReceived(tpc, stats[ssrc]);\n        });\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConferenceEventManager.js","/**\n * Implements utility to forward events from one eventEmitter to another.\n * @param src {object} instance of EventEmitter or another class that implements\n * addListener method which will register listener to EventEmitter instance.\n * @param dest {object} instance of EventEmitter or another class that\n * implements emit method which will emit an event.\n */\nfunction EventEmitterForwarder(src, dest) {\n    if (!src || !dest || typeof src.addListener !== 'function'\n        || typeof dest.emit !== 'function') {\n        throw new Error('Invalid arguments passed to EventEmitterForwarder');\n    }\n    this.src = src;\n    this.dest = dest;\n}\n\n/**\n * Adds event to be forwarded from src to dest.\n * @param srcEvent {string} the event that EventEmitterForwarder is listening\n * for.\n * @param dstEvent {string} the event that will be fired from dest.\n * @param arguments all other passed arguments are going to be fired with\n * dstEvent.\n */\nEventEmitterForwarder.prototype.forward = function(...args) {\n    const srcEvent = args[0];\n\n    // This will be the \"this\" value for emit function.\n\n    args[0] = this.dest;\n\n    // Using bind.apply to pass the arguments as Array-like object (\"arguments\")\n    this.src.addListener(\n        srcEvent,\n        Function.prototype.bind.apply(this.dest.emit, args));\n};\n\nmodule.exports = EventEmitterForwarder;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/EventEmitterForwarder.js","const logger = require('jitsi-meet-logger').getLogger(__filename);\n\n/**\n *\n * @param localAudio\n * @param peerConnection\n */\nfunction JitsiDTMFManager(localAudio, peerConnection) {\n    const audioTrack = localAudio.getTrack();\n\n    if (!audioTrack) {\n        throw new Error('Failed to initialize DTMFSender: no audio track.');\n    }\n    this.dtmfSender\n        = peerConnection.peerconnection.createDTMFSender(audioTrack);\n    logger.debug('Initialized DTMFSender');\n}\n\nJitsiDTMFManager.prototype.sendTones = function(tones, duration, pause) {\n    this.dtmfSender.insertDTMF(tones, duration || 200, pause || 200);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/DTMF/JitsiDTMFManager.js","\nimport { Strophe } from 'strophe.js';\n\nimport * as JitsiConferenceEvents from './JitsiConferenceEvents';\nimport { ParticipantConnectionStatus }\n    from './modules/connectivity/ParticipantConnectionStatus';\nimport * as MediaType from './service/RTC/MediaType';\n\n/**\n * Represents a participant in (i.e. a member of) a conference.\n */\nexport default class JitsiParticipant {\n\n    /* eslint-disable max-params */\n\n    /**\n     * Initializes a new JitsiParticipant instance.\n     *\n     * @constructor\n     * @param jid the conference XMPP jid\n     * @param conference\n     * @param displayName\n     * @param {Boolean} hidden - True if the new JitsiParticipant instance is to\n     * represent a hidden participant; otherwise, false.\n     * @param {string} statsID - optional participant statsID\n     * @param {string} status - the initial status if any.\n     */\n    constructor(jid, conference, displayName, hidden, statsID, status) {\n        this._jid = jid;\n        this._id = Strophe.getResourceFromJid(jid);\n        this._conference = conference;\n        this._displayName = displayName;\n        this._supportsDTMF = false;\n        this._tracks = [];\n        this._role = 'none';\n        this._status = status;\n        this._availableDevices = {\n            audio: undefined,\n            video: undefined\n        };\n        this._hidden = hidden;\n        this._statsID = statsID;\n        this._connectionStatus = ParticipantConnectionStatus.ACTIVE;\n        this._properties = {};\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * @returns {JitsiConference} The conference that this participant belongs\n     * to.\n     */\n    getConference() {\n        return this._conference;\n    }\n\n    /**\n     * Gets the value of a property of this participant.\n     */\n    getProperty(name) {\n        return this._properties[name];\n    }\n\n    /**\n     * Checks whether this <tt>JitsiParticipant</tt> has any video tracks which\n     * are muted according to their underlying WebRTC <tt>MediaStreamTrack</tt>\n     * muted status.\n     * @return {boolean} <tt>true</tt> if this <tt>participant</tt> contains any\n     * video <tt>JitsiTrack</tt>s which are muted as defined in\n     * {@link JitsiTrack.isWebRTCTrackMuted}.\n     */\n    hasAnyVideoTrackWebRTCMuted() {\n        return (\n            this.getTracks().some(\n                jitsiTrack =>\n                    jitsiTrack.getType() === MediaType.VIDEO\n                        && jitsiTrack.isWebRTCTrackMuted()));\n    }\n\n    /**\n     * Updates participant's connection status.\n     * @param {string} state the current participant connection state.\n     * {@link ParticipantConnectionStatus}.\n     * @private\n     */\n    _setConnectionStatus(status) {\n        this._connectionStatus = status;\n    }\n\n    /**\n     * Return participant's connectivity status.\n     *\n     * @returns {string} the connection status\n     * <tt>ParticipantConnectionStatus</tt> of the user.\n     * {@link ParticipantConnectionStatus}.\n     */\n    getConnectionStatus() {\n        return this._connectionStatus;\n    }\n\n    /**\n     * Sets the value of a property of this participant, and fires an event if\n     * the value has changed.\n     * @name the name of the property.\n     * @value the value to set.\n     */\n    setProperty(name, value) {\n        const oldValue = this._properties[name];\n\n        if (value !== oldValue) {\n            this._properties[name] = value;\n            this._conference.eventEmitter.emit(\n                JitsiConferenceEvents.PARTICIPANT_PROPERTY_CHANGED,\n                this,\n                name,\n                oldValue,\n                value);\n        }\n    }\n\n    /**\n     * @returns {Array.<JitsiTrack>} The list of media tracks for this\n     * participant.\n     */\n    getTracks() {\n        return this._tracks.slice();\n    }\n\n    /**\n     * @param {MediaType} mediaType\n     * @returns {Array.<JitsiTrack>} an array of media tracks for this\n     * participant, for given media type.\n     */\n    getTracksByMediaType(mediaType) {\n        return this.getTracks().filter(track => track.getType() === mediaType);\n    }\n\n    /**\n     * @returns {String} The ID of this participant.\n     */\n    getId() {\n        return this._id;\n    }\n\n    /**\n     * @returns {String} The JID of this participant.\n     */\n    getJid() {\n        return this._jid;\n    }\n\n    /**\n     * @returns {String} The human-readable display name of this participant.\n     */\n    getDisplayName() {\n        return this._displayName;\n    }\n\n    /**\n     * @returns {String} The stats ID of this participant.\n     */\n    getStatsID() {\n        return this._statsID;\n    }\n\n    /**\n     * @returns {String} The status of the participant.\n     */\n    getStatus() {\n        return this._status;\n    }\n\n    /**\n     * @returns {Boolean} Whether this participant is a moderator or not.\n     */\n    isModerator() {\n        return this._role === 'moderator';\n    }\n\n    /**\n     * @returns {Boolean} Whether this participant is a hidden participant. Some\n     * special system participants may want to join hidden (like for example the\n     * recorder).\n     */\n    isHidden() {\n        return this._hidden;\n    }\n\n    /**\n     * @returns {Boolean} Whether this participant has muted their audio.\n     */\n    isAudioMuted() {\n        return this._isMediaTypeMuted(MediaType.AUDIO);\n    }\n\n    /**\n     * Determines whether all JitsiTracks which are of a specific MediaType and\n     * which belong to this JitsiParticipant are muted.\n     *\n     * @param {MediaType} mediaType - The MediaType of the JitsiTracks to be\n     * checked.\n     * @private\n     * @returns {Boolean} True if all JitsiTracks which are of the specified\n     * mediaType and which belong to this JitsiParticipant are muted; otherwise,\n     * false.\n     */\n    _isMediaTypeMuted(mediaType) {\n        return this.getTracks().reduce(\n            (muted, track) =>\n                muted && (track.getType() !== mediaType || track.isMuted()),\n            true);\n    }\n\n    /**\n     * @returns {Boolean} Whether this participant has muted their video.\n     */\n    isVideoMuted() {\n        return this._isMediaTypeMuted(MediaType.VIDEO);\n    }\n\n    /**\n     * @returns {String} The role of this participant.\n     */\n    getRole() {\n        return this._role;\n    }\n\n    /**\n     *\n     */\n    supportsDTMF() {\n        return this._supportsDTMF;\n    }\n\n    /**\n     * Returns a set with the features for the participant.\n     * @param {int} timeout the timeout in ms for reply from the participant.\n     * @returns {Promise<Set<String>, Error>}\n     */\n    getFeatures(timeout = 5000) {\n        return this._conference.xmpp.caps.getFeatures(this._jid, timeout);\n    }\n\n    /**\n     * Returns the bot type for the participant.\n     *\n     * @returns {string|undefined} - The bot type of the participant.\n     */\n    getBotType() {\n        return this._botType;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiParticipant.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as JitsiConferenceEvents from '../../JitsiConferenceEvents';\n\nconst logger = getLogger(__filename);\n\n/**\n * Emits {@link JitsiConferenceEvents.JVB121_STATUS} events based on the current\n * P2P status and the conference participants count. See the event description\n * for more info.\n */\nexport default class Jvb121EventGenerator {\n    /**\n     * Creates new <tt>Jvb121EventGenerator</tt> for the given conference.\n     * @param {JitsiConference} conference\n     */\n    constructor(conference) {\n        this._conference = conference;\n\n        /**\n         * Indicates whether it's a one to one JVB conference (<tt>true</tt>)\n         * or a multiparty (<tt>false</tt>). Will be also <tt>false</tt> if\n         * the conference is currently in the P2P mode.\n         * @type {boolean}\n         * @private\n         */\n        this._jvb121 = true;\n\n        this._conference.addEventListener(\n            JitsiConferenceEvents.USER_JOINED, () => this.evaluateStatus());\n        this._conference.addEventListener(\n            JitsiConferenceEvents.USER_LEFT, () => this.evaluateStatus());\n        this._conference.addEventListener(\n            JitsiConferenceEvents.P2P_STATUS, () => this.evaluateStatus());\n    }\n\n    /**\n     * Checks whether the JVB121 value should be updated and a new event\n     * emitted.\n     */\n    evaluateStatus() {\n        const oldStatus = this._jvb121;\n        const newStatus\n            = !this._conference.isP2PActive()\n                && this._conference.getParticipantCount() <= 2;\n\n        if (oldStatus !== newStatus) {\n            this._jvb121 = newStatus;\n            logger.debug(`JVB121 status ${oldStatus} => ${newStatus}`);\n            this._conference.eventEmitter.emit(\n                JitsiConferenceEvents.JVB121_STATUS, oldStatus, newStatus);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/event/Jvb121EventGenerator.js","import * as JitsiConferenceEvents from '../JitsiConferenceEvents';\n\n/**\n * The value which we use to say, every sound over this threshold\n * is talking on the mic.\n * @type {number}\n */\nconst SPEECH_DETECT_THRESHOLD = 0.6;\n\n/**\n * The <tt>P2PDominantSpeakerDetection</tt> is activated only when p2p is\n * currently used.\n * Listens for changes in the audio level changes of the local p2p audio track\n * or remote p2p one and fires dominant speaker events to be able to use\n * features depending on those events (speaker stats), to make them work without\n * the video bridge.\n */\nexport default class P2PDominantSpeakerDetection {\n    /**\n     * Creates P2PDominantSpeakerDetection\n     * @param conference the JitsiConference instance that created us.\n     * @constructor\n     */\n    constructor(conference) {\n        this.conference = conference;\n\n        conference.addEventListener(\n            JitsiConferenceEvents.TRACK_AUDIO_LEVEL_CHANGED,\n            this._audioLevel.bind(this));\n\n        this.myUserID = this.conference.myUserId();\n    }\n\n    /**\n     * Receives audio level events for all streams in the conference.\n     *\n     * @param {String} id - The participant id\n     * @param {number} audioLevel - The audio level.\n     */\n    _audioLevel(id, audioLevel) {\n\n        // we do not process if p2p is not active\n        // or audio level is under certain threshold\n        // or if the audio level is for local audio track which is muted\n        if (!this.conference.isP2PActive()\n            || audioLevel <= SPEECH_DETECT_THRESHOLD\n            || (id === this.myUserID\n                    && this.conference.getLocalAudioTrack().isMuted())) {\n            return;\n        }\n\n        this.conference.eventEmitter.emit(\n            JitsiConferenceEvents.DOMINANT_SPEAKER_CHANGED,\n            id);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/P2PDominantSpeakerDetection.js","import { getLogger } from 'jitsi-meet-logger';\n\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\n\nconst logger = getLogger(__filename);\n\n/**\n * Handles a WebRTC RTCPeerConnection or a WebSocket instance to communicate\n * with the videobridge.\n */\nexport default class BridgeChannel {\n    /**\n     * Binds \"ondatachannel\" event listener on the given RTCPeerConnection\n     * instance, or creates a WebSocket connection with the videobridge.\n     * At least one of both, peerconnection or wsUrl parameters, must be\n     * given.\n     * @param {RTCPeerConnection} [peerconnection] WebRTC peer connection\n     * instance.\n     * @param {string} [wsUrl] WebSocket URL.\n     * @param {EventEmitter} eventEmitter EventEmitter instance.\n     */\n    constructor(peerconnection, wsUrl, emitter) {\n        if (!peerconnection && !wsUrl) {\n            throw new TypeError(\n                'At least peerconnection or wsUrl must be given');\n        } else if (peerconnection && wsUrl) {\n            throw new TypeError(\n                'Just one of peerconnection or wsUrl must be given');\n        }\n\n        if (peerconnection) {\n            logger.debug('constructor() with peerconnection');\n        } else {\n            logger.debug(`constructor() with wsUrl:\"${wsUrl}\"`);\n        }\n\n        // The underlying WebRTC RTCDataChannel or WebSocket instance.\n        // @type {RTCDataChannel|WebSocket}\n        this._channel = null;\n\n        // @type {EventEmitter}\n        this._eventEmitter = emitter;\n\n        // Whether a RTCDataChannel or WebSocket is internally used.\n        // @type {string} \"datachannel\" / \"websocket\"\n        this._mode = null;\n\n        // If a RTCPeerConnection is given, listen for new RTCDataChannel\n        // event.\n        if (peerconnection) {\n            peerconnection.ondatachannel = event => {\n                // NOTE: We assume that the \"onDataChannel\" event just fires\n                // once.\n\n                const datachannel = event.channel;\n\n                // Handle the RTCDataChannel.\n                this._handleChannel(datachannel);\n                this._mode = 'datachannel';\n            };\n\n        // Otherwise create a WebSocket connection.\n        } else if (wsUrl) {\n            // Create a WebSocket instance.\n            const ws = new WebSocket(wsUrl);\n\n            // Handle the WebSocket.\n            this._handleChannel(ws);\n            this._mode = 'websocket';\n        }\n    }\n\n    /**\n     * The channel mode.\n     * @return {string} \"datachannel\" or \"websocket\" (or null if not yet set).\n     */\n    get mode() {\n        return this._mode;\n    }\n\n    /**\n     * Closes the currently opened channel.\n     */\n    close() {\n        if (this._channel) {\n            try {\n                this._channel.close();\n            } catch (error) {} // eslint-disable-line no-empty\n\n            this._channel = null;\n        }\n    }\n\n    /**\n     * Whether there is an underlying RTCDataChannel or WebSocket and it's\n     * open.\n     * @return {boolean}\n     */\n    isOpen() {\n        return this._channel && (this._channel.readyState === 'open'\n            || this._channel.readyState === WebSocket.OPEN);\n    }\n\n    /**\n     * Sends message via the channel.\n     * @param {string} to The id of the endpoint that should receive the\n     * message. If \"\" the message will be sent to all participants.\n     * @param  {object} payload The payload of the message.\n     * @throws NetworkError or InvalidStateError from RTCDataChannel#send (@see\n     * {@link https://developer.mozilla.org/docs/Web/API/RTCDataChannel/send})\n     * or from WebSocket#send or Error with \"No opened channel\" message.\n     */\n    sendMessage(to, payload) {\n        this._send({\n            colibriClass: 'EndpointMessage',\n            msgPayload: payload,\n            to\n        });\n    }\n\n    /**\n     * Sends a \"lastN value changed\" message via the channel.\n     * @param {number} value The new value for lastN. -1 means unlimited.\n     */\n    sendSetLastNMessage(value) {\n        const jsonObject = {\n            colibriClass: 'LastNChangedEvent',\n            lastN: value\n        };\n\n        this._send(jsonObject);\n        logger.log(`Channel lastN set to: ${value}`);\n    }\n\n    /**\n     * Sends a \"pinned endpoint changed\" message via the channel.\n     * @param {string} endpointId The id of the pinned endpoint.\n     * @throws NetworkError or InvalidStateError from RTCDataChannel#send (@see\n     * {@link https://developer.mozilla.org/docs/Web/API/RTCDataChannel/send})\n     * or from WebSocket#send or Error with \"No opened channel\" message.\n     */\n    sendPinnedEndpointMessage(endpointId) {\n        logger.log(\n            'sending pinned changed notification to the bridge for endpoint ',\n            endpointId);\n\n        this._send({\n            colibriClass: 'PinnedEndpointChangedEvent',\n            pinnedEndpoint: endpointId || null\n        });\n    }\n\n    /**\n     * Sends a \"selected endpoints changed\" message via the channel.\n     *\n     * @param {Array<string>} endpointIds - The ids of the selected endpoints.\n     * @throws NetworkError or InvalidStateError from RTCDataChannel#send (@see\n     * {@link https://developer.mozilla.org/docs/Web/API/RTCDataChannel/send})\n     * or from WebSocket#send or Error with \"No opened channel\" message.\n     */\n    sendSelectedEndpointsMessage(endpointIds) {\n        logger.log(\n            'sending selected changed notification to the bridge for endpoints',\n            endpointIds);\n\n        this._send({\n            colibriClass: 'SelectedEndpointsChangedEvent',\n            selectedEndpoints: endpointIds\n        });\n    }\n\n    /**\n     * Sends a \"receiver video constraint\" message via the channel.\n     * @param {Number} maxFrameHeightPixels the maximum frame height,\n     * in pixels, this receiver is willing to receive\n     */\n    sendReceiverVideoConstraintMessage(maxFrameHeightPixels) {\n        logger.log('sending a ReceiverVideoConstraint message with '\n            + `a maxFrameHeight of ${maxFrameHeightPixels} pixels`);\n        this._send({\n            colibriClass: 'ReceiverVideoConstraint',\n            maxFrameHeight: maxFrameHeightPixels\n        });\n    }\n\n    /**\n     * Set events on the given RTCDataChannel or WebSocket instance.\n     */\n    _handleChannel(channel) {\n        const emitter = this._eventEmitter;\n\n        channel.onopen = () => {\n            logger.info(`${this._mode} channel opened`);\n\n            // Code sample for sending string and/or binary data.\n            // Sends string message to the bridge:\n            //     channel.send(\"Hello bridge!\");\n            // Sends 12 bytes binary message to the bridge:\n            //     channel.send(new ArrayBuffer(12));\n\n            emitter.emit(RTCEvents.DATA_CHANNEL_OPEN);\n        };\n\n        channel.onerror = error => {\n            logger.error('Channel error:', error);\n        };\n\n        channel.onmessage = ({ data }) => {\n            // JSON object.\n            let obj;\n\n            try {\n                obj = JSON.parse(data);\n            } catch (error) {\n                GlobalOnErrorHandler.callErrorHandler(error);\n                logger.error(\n                    'Failed to parse channel message as JSON: ',\n                    data, error);\n\n                return;\n            }\n\n            const colibriClass = obj.colibriClass;\n\n            switch (colibriClass) {\n            case 'DominantSpeakerEndpointChangeEvent': {\n                // Endpoint ID from the Videobridge.\n                const dominantSpeakerEndpoint = obj.dominantSpeakerEndpoint;\n\n                logger.info(\n                    'Channel new dominant speaker event: ',\n                    dominantSpeakerEndpoint);\n                emitter.emit(\n                    RTCEvents.DOMINANT_SPEAKER_CHANGED,\n                    dominantSpeakerEndpoint);\n                break;\n            }\n            case 'EndpointConnectivityStatusChangeEvent': {\n                const endpoint = obj.endpoint;\n                const isActive = obj.active === 'true';\n\n                logger.info(\n                    `Endpoint connection status changed: ${endpoint} active ? ${\n                        isActive}`);\n                emitter.emit(RTCEvents.ENDPOINT_CONN_STATUS_CHANGED,\n                    endpoint, isActive);\n\n                break;\n            }\n            case 'EndpointMessage': {\n                emitter.emit(\n                    RTCEvents.ENDPOINT_MESSAGE_RECEIVED, obj.from,\n                    obj.msgPayload);\n\n                break;\n            }\n            case 'LastNEndpointsChangeEvent': {\n                // The new/latest list of last-n endpoint IDs.\n                const lastNEndpoints = obj.lastNEndpoints;\n\n                logger.info('Channel new last-n event: ',\n                    lastNEndpoints, obj);\n                emitter.emit(RTCEvents.LASTN_ENDPOINT_CHANGED,\n                    lastNEndpoints, obj);\n\n                break;\n            }\n            case 'SelectedUpdateEvent': {\n                const isSelected = obj.isSelected;\n\n                logger.info(`SelectedUpdateEvent isSelected? ${isSelected}`);\n                emitter.emit(RTCEvents.IS_SELECTED_CHANGED, isSelected);\n                break;\n            }\n            default: {\n                logger.debug('Channel JSON-formatted message: ', obj);\n\n                // The received message appears to be appropriately formatted\n                // (i.e. is a JSON object which assigns a value to the\n                // mandatory property colibriClass) so don't just swallow it,\n                // expose it to public consumption.\n                emitter.emit(`rtc.datachannel.${colibriClass}`, obj);\n            }\n            }\n        };\n\n        channel.onclose = () => {\n            logger.info('Channel closed');\n\n            // Remove the channel.\n            this._channel = null;\n        };\n\n        // Store the channel.\n        this._channel = channel;\n    }\n\n    /**\n     * Sends passed object via the channel.\n     * @param {object} jsonObject The object that will be sent.\n     * @throws NetworkError or InvalidStateError from RTCDataChannel#send (@see\n     * {@link https://developer.mozilla.org/docs/Web/API/RTCDataChannel/send})\n     * or from WebSocket#send or Error with \"No opened channel\" message.\n     */\n    _send(jsonObject) {\n        const channel = this._channel;\n\n        if (!this.isOpen()) {\n            throw new Error('No opened channel');\n        }\n\n        channel.send(JSON.stringify(jsonObject));\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/BridgeChannel.js","/* global __filename, Promise */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport JitsiTrack from './JitsiTrack';\nimport JitsiTrackError from '../../JitsiTrackError';\nimport {\n    TRACK_IS_DISPOSED,\n    TRACK_NO_STREAM_FOUND\n} from '../../JitsiTrackErrors';\nimport {\n    LOCAL_TRACK_STOPPED,\n    NO_DATA_FROM_SOURCE,\n    TRACK_MUTE_CHANGED\n} from '../../JitsiTrackEvents';\nimport browser from '../browser';\nimport RTCUtils from './RTCUtils';\nimport CameraFacingMode from '../../service/RTC/CameraFacingMode';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport VideoType from '../../service/RTC/VideoType';\nimport {\n    TRACK_UNMUTED,\n    createNoDataFromSourceEvent\n} from '../../service/statistics/AnalyticsEvents';\nimport Statistics from '../statistics/statistics';\n\nconst logger = getLogger(__filename);\n\n/**\n * Represents a single media track(either audio or video).\n * One <tt>JitsiLocalTrack</tt> corresponds to one WebRTC MediaStreamTrack.\n */\nexport default class JitsiLocalTrack extends JitsiTrack {\n    /**\n     * Constructs new JitsiLocalTrack instance.\n     *\n     * @constructor\n     * @param {Object} trackInfo\n     * @param {number} trackInfo.rtcId the ID assigned by the RTC module\n     * @param trackInfo.stream WebRTC MediaStream, parent of the track\n     * @param trackInfo.track underlying WebRTC MediaStreamTrack for new\n     * JitsiRemoteTrack\n     * @param trackInfo.mediaType the MediaType of the JitsiRemoteTrack\n     * @param trackInfo.videoType the VideoType of the JitsiRemoteTrack\n     * @param trackInfo.resolution the video resolution if it's a video track\n     * @param trackInfo.deviceId the ID of the local device for this track\n     * @param trackInfo.facingMode the camera facing mode used in getUserMedia\n     * call\n     * @param {sourceId} trackInfo.sourceId - The id of the desktop sharing\n     * source. NOTE: defined for desktop sharing tracks only.\n     */\n    constructor({\n        deviceId,\n        facingMode,\n        mediaType,\n        resolution,\n        rtcId,\n        sourceId,\n        sourceType,\n        stream,\n        track,\n        videoType\n    }) {\n        super(\n            /* conference */ null,\n            stream,\n            track,\n            /* streamInactiveHandler */ () => this.emit(LOCAL_TRACK_STOPPED),\n            mediaType,\n            videoType);\n\n        /**\n         * The ID assigned by the RTC module on instance creation.\n         *\n         * @type {number}\n         */\n        this.rtcId = rtcId;\n        this.sourceId = sourceId;\n        this.sourceType = sourceType;\n\n        if (browser.usesNewGumFlow()) {\n            // Get the resolution from the track itself because it cannot be\n            // certain which resolution webrtc has fallen back to using.\n            this.resolution = track.getSettings().height;\n\n            // Cache the constraints of the track in case of any this track\n            // model needs to call getUserMedia again, such as when unmuting.\n            this._constraints = track.getConstraints();\n        } else {\n            // FIXME Currently, Firefox is ignoring our constraints about\n            // resolutions so we do not store it, to avoid wrong reporting of\n            // local track resolution.\n            this.resolution = browser.isFirefox() ? null : resolution;\n        }\n\n        this.deviceId = deviceId;\n\n        /**\n         * The <tt>Promise</tt> which represents the progress of a previously\n         * queued/scheduled {@link _setMuted} (from the point of view of\n         * {@link _queueSetMuted}).\n         *\n         * @private\n         * @type {Promise}\n         */\n        this._prevSetMuted = Promise.resolve();\n\n        /**\n         * The facing mode of the camera from which this JitsiLocalTrack\n         * instance was obtained.\n         *\n         * @private\n         * @type {CameraFacingMode|undefined}\n         */\n        this._facingMode = facingMode;\n\n        // Currently there is no way to know the MediaStreamTrack ended due to\n        // to device disconnect in Firefox through e.g. \"readyState\" property.\n        // Instead we will compare current track's label with device labels from\n        // enumerateDevices() list.\n        this._trackEnded = false;\n\n        /**\n         * Indicates whether data has been sent or not.\n         */\n        this._hasSentData = false;\n\n        /**\n         * Used only for detection of audio problems. We want to check only once\n         * whether the track is sending data ot not. This flag is set to false\n         * after the check.\n         */\n        this._testDataSent = true;\n\n        // Currently there is no way to determine with what device track was\n        // created (until getConstraints() support), however we can associate\n        // tracks with real devices obtained from enumerateDevices() call as\n        // soon as it's called.\n        this._realDeviceId = this.deviceId === '' ? undefined : this.deviceId;\n\n        /**\n         * On mute event we are waiting for 3s to check if the stream is going\n         * to be still muted before firing the event for camera issue detected\n         * (NO_DATA_FROM_SOURCE).\n         */\n        this._noDataFromSourceTimeout = null;\n\n        this._onDeviceListChanged = devices => {\n            this._setRealDeviceIdFromDeviceList(devices);\n\n            // Mark track as ended for those browsers that do not support\n            // \"readyState\" property. We do not touch tracks created with\n            // default device ID \"\".\n            if (typeof this.getTrack().readyState === 'undefined'\n                    && typeof this._realDeviceId !== 'undefined'\n                    && !devices.find(d => d.deviceId === this._realDeviceId)) {\n                this._trackEnded = true;\n            }\n        };\n\n        // Subscribe each created local audio track to\n        // RTCEvents.AUDIO_OUTPUT_DEVICE_CHANGED event. This is different from\n        // handling this event for remote tracks (which are handled in RTC.js),\n        // because there might be local tracks not attached to a conference.\n        if (this.isAudioTrack() && RTCUtils.isDeviceChangeAvailable('output')) {\n            this._onAudioOutputDeviceChanged = this.setAudioOutput.bind(this);\n            RTCUtils.addListener(\n                RTCEvents.AUDIO_OUTPUT_DEVICE_CHANGED,\n                this._onAudioOutputDeviceChanged);\n        }\n\n        RTCUtils.addListener(\n            RTCEvents.DEVICE_LIST_CHANGED,\n            this._onDeviceListChanged);\n\n        this._initNoDataFromSourceHandlers();\n    }\n\n    /**\n     * Returns if associated MediaStreamTrack is in the 'ended' state\n     *\n     * @returns {boolean}\n     */\n    isEnded() {\n        return this.getTrack().readyState === 'ended' || this._trackEnded;\n    }\n\n    /**\n     * Sets handlers to the MediaStreamTrack object that will detect camera\n     * issues.\n     */\n    _initNoDataFromSourceHandlers() {\n        if (this.isVideoTrack() && this.videoType === VideoType.CAMERA) {\n            const _onNoDataFromSourceError\n                = this._onNoDataFromSourceError.bind(this);\n\n            this._setHandler('track_mute', () => {\n                if (this._checkForCameraIssues()) {\n                    const now = window.performance.now();\n\n                    this._noDataFromSourceTimeout\n                        = setTimeout(_onNoDataFromSourceError, 3000);\n                    this._setHandler('track_unmute', () => {\n                        this._clearNoDataFromSourceMuteResources();\n                        Statistics.sendAnalyticsAndLog(\n                            TRACK_UNMUTED,\n                            {\n                                'media_type': this.getType(),\n                                'track_type': 'local',\n                                value: window.performance.now() - now\n                            });\n                    });\n                }\n            });\n            this._setHandler('track_ended', _onNoDataFromSourceError);\n        }\n    }\n\n    /**\n     * Clears all timeouts and handlers set on MediaStreamTrack mute event.\n     * FIXME: Change the name of the method with better one.\n     */\n    _clearNoDataFromSourceMuteResources() {\n        if (this._noDataFromSourceTimeout) {\n            clearTimeout(this._noDataFromSourceTimeout);\n            this._noDataFromSourceTimeout = null;\n        }\n        this._setHandler('track_unmute', undefined);\n    }\n\n    /**\n     * Called when potential camera issue is detected. Clears the handlers and\n     * timeouts set on MediaStreamTrack muted event. Verifies that the camera\n     * issue persists and fires NO_DATA_FROM_SOURCE event.\n     */\n    _onNoDataFromSourceError() {\n        this._clearNoDataFromSourceMuteResources();\n        if (this._checkForCameraIssues()) {\n            this._fireNoDataFromSourceEvent();\n        }\n    }\n\n    /**\n     * Fires NO_DATA_FROM_SOURCE event and logs it to analytics and callstats.\n     */\n    _fireNoDataFromSourceEvent() {\n        this.emit(NO_DATA_FROM_SOURCE);\n\n        Statistics.sendAnalytics(createNoDataFromSourceEvent(this.getType()));\n        const log = { name: NO_DATA_FROM_SOURCE };\n\n        if (this.isAudioTrack()) {\n            log.isReceivingData = this._isReceivingData();\n        }\n        Statistics.sendLog(JSON.stringify(log));\n    }\n\n    /**\n     * Sets real device ID by comparing track information with device\n     * information. This is temporary solution until getConstraints() method\n     * will be implemented in browsers.\n     *\n     * @param {MediaDeviceInfo[]} devices - list of devices obtained from\n     * enumerateDevices() call\n     */\n    _setRealDeviceIdFromDeviceList(devices) {\n        const track = this.getTrack();\n        const device = devices.find(\n            d => d.kind === `${track.kind}input` && d.label === track.label);\n\n        if (device) {\n            this._realDeviceId = device.deviceId;\n        }\n    }\n\n    /**\n     * Sets the stream property of JitsiLocalTrack object and sets all stored\n     * handlers to it.\n     *\n     * @param {MediaStream} stream the new stream.\n     * @protected\n     */\n    _setStream(stream) {\n        super._setStream(stream);\n\n        if (stream) {\n            // Store the MSID for video mute/unmute purposes.\n            this.storedMSID = this.getMSID();\n            logger.debug(`Setting new MSID: ${this.storedMSID} on ${this}`);\n        } else {\n            logger.debug(`Setting 'null' stream on ${this}`);\n        }\n    }\n\n    /**\n     * Asynchronously mutes this track.\n     *\n     * @returns {Promise}\n     */\n    mute() {\n        return this._queueSetMuted(true);\n    }\n\n    /**\n     * Asynchronously unmutes this track.\n     *\n     * @returns {Promise}\n     */\n    unmute() {\n        return this._queueSetMuted(false);\n    }\n\n    /**\n     * Initializes a new Promise to execute {@link #_setMuted}. May be called\n     * multiple times in a row and the invocations of {@link #_setMuted} and,\n     * consequently, {@link #mute} and/or {@link #unmute} will be resolved in a\n     * serialized fashion.\n     *\n     * @param {boolean} muted - The value to invoke <tt>_setMuted</tt> with.\n     * @returns {Promise}\n     */\n    _queueSetMuted(muted) {\n        const setMuted = this._setMuted.bind(this, muted);\n\n        this._prevSetMuted = this._prevSetMuted.then(setMuted, setMuted);\n\n        return this._prevSetMuted;\n    }\n\n    /**\n     * Mutes / unmutes this track.\n     *\n     * @param {boolean} muted - If <tt>true</tt>, this track will be muted;\n     * otherwise, this track will be unmuted.\n     * @private\n     * @returns {Promise}\n     */\n    _setMuted(muted) {\n        if (this.isMuted() === muted) {\n            return Promise.resolve();\n        }\n\n        if (this.disposed) {\n            return Promise.reject(new JitsiTrackError(TRACK_IS_DISPOSED));\n        }\n\n        let promise = Promise.resolve();\n\n        // A function that will print info about muted status transition\n        const logMuteInfo = () => logger.info(`Mute ${this}: ${muted}`);\n\n        if (this.isAudioTrack()\n                || this.videoType === VideoType.DESKTOP\n                || !browser.doesVideoMuteByStreamRemove()) {\n            logMuteInfo();\n            if (this.track) {\n                this.track.enabled = !muted;\n            }\n        } else if (muted) {\n            promise = new Promise((resolve, reject) => {\n                logMuteInfo();\n                this._removeStreamFromConferenceAsMute(\n                    () => {\n                        // FIXME: Maybe here we should set the SRC for the\n                        // containers to something\n                        // We don't want any events to be fired on this stream\n                        this._unregisterHandlers();\n                        this._stopStream();\n                        this._setStream(null);\n                        resolve();\n                    },\n                    reject);\n            });\n        } else {\n            logMuteInfo();\n\n            // This path is only for camera.\n            const streamOptions = {\n                cameraDeviceId: this.getDeviceId(),\n                devices: [ MediaType.VIDEO ],\n                facingMode: this.getCameraFacingMode()\n            };\n\n            if (browser.usesNewGumFlow()) {\n                promise\n                    = RTCUtils.newObtainAudioAndVideoPermissions(Object.assign(\n                        {},\n                        streamOptions,\n                        { constraints: { video: this._constraints } }));\n            } else {\n                if (this.resolution) {\n                    streamOptions.resolution = this.resolution;\n                }\n\n                promise\n                    = RTCUtils.obtainAudioAndVideoPermissions(streamOptions);\n            }\n\n            promise.then(streamsInfo => {\n                const mediaType = this.getType();\n                const streamInfo\n                    = browser.usesNewGumFlow()\n                        ? streamsInfo.find(\n                            info => info.track.kind === mediaType)\n                        : streamsInfo.find(\n                            info => info.mediaType === mediaType);\n\n                if (streamInfo) {\n                    this._setStream(streamInfo.stream);\n                    this.track = streamInfo.track;\n\n                    // This is not good when video type changes after\n                    // unmute, but let's not crash here\n                    if (this.videoType !== streamInfo.videoType) {\n                        logger.warn(\n                            `${this}: video type has changed after unmute!`,\n                            this.videoType, streamInfo.videoType);\n                        this.videoType = streamInfo.videoType;\n                    }\n                } else {\n                    throw new JitsiTrackError(TRACK_NO_STREAM_FOUND);\n                }\n\n                this.containers.map(\n                    cont => RTCUtils.attachMediaStream(cont, this.stream));\n\n                return this._addStreamToConferenceAsUnmute();\n            });\n        }\n\n        return promise\n            .then(() => this._sendMuteStatus(muted))\n            .then(() => this.emit(TRACK_MUTE_CHANGED, this));\n    }\n\n    /**\n     * Adds stream to conference and marks it as \"unmute\" operation.\n     *\n     * @private\n     * @returns {Promise}\n     */\n    _addStreamToConferenceAsUnmute() {\n        if (!this.conference) {\n            return Promise.resolve();\n        }\n\n        // FIXME it would be good to not included conference as part of this\n        // process. Only TraceablePeerConnections to which the track is attached\n        // should care about this action. The TPCs to which the track is not\n        // attached can sync up when track is re-attached.\n        // A problem with that is that the \"modify sources\" queue is part of\n        // the JingleSessionPC and it would be excluded from the process. One\n        // solution would be to extract class between TPC and JingleSessionPC\n        // which would contain the queue and would notify the signaling layer\n        // when local SSRCs are changed. This would help to separate XMPP from\n        // the RTC module.\n        return new Promise((resolve, reject) => {\n            this.conference._addLocalTrackAsUnmute(this)\n                .then(resolve, error => reject(new Error(error)));\n        });\n    }\n\n    /**\n     * Removes stream from conference and marks it as \"mute\" operation.\n     *\n     * @param {Function} successCallback will be called on success\n     * @param {Function} errorCallback will be called on error\n     * @private\n     */\n    _removeStreamFromConferenceAsMute(successCallback, errorCallback) {\n        if (!this.conference) {\n            successCallback();\n\n            return;\n        }\n        this.conference._removeLocalTrackAsMute(this).then(\n            successCallback,\n            error => errorCallback(new Error(error)));\n    }\n\n    /**\n     * Sends mute status for a track to conference if any.\n     *\n     * @param {boolean} mute - If track is muted.\n     * @private\n     * @returns {Promise}\n     */\n    _sendMuteStatus(mute) {\n        if (!this.conference || !this.conference.room) {\n            return Promise.resolve();\n        }\n\n        return new Promise(resolve => {\n            this.conference.room[\n                this.isAudioTrack()\n                    ? 'setAudioMute'\n                    : 'setVideoMute'](mute, resolve);\n        });\n    }\n\n    /**\n     * @inheritdoc\n     *\n     * Stops sending the media track. And removes it from the HTML.\n     * NOTE: Works for local tracks only.\n     *\n     * @extends JitsiTrack#dispose\n     * @returns {Promise}\n     */\n    dispose() {\n        let promise = Promise.resolve();\n\n        if (this.conference) {\n            promise = this.conference.removeTrack(this);\n        }\n\n        if (this.stream) {\n            this._stopStream();\n            this.detach();\n        }\n\n        RTCUtils.removeListener(RTCEvents.DEVICE_LIST_CHANGED,\n            this._onDeviceListChanged);\n\n        if (this._onAudioOutputDeviceChanged) {\n            RTCUtils.removeListener(RTCEvents.AUDIO_OUTPUT_DEVICE_CHANGED,\n                this._onAudioOutputDeviceChanged);\n        }\n\n        return promise.then(() => super.dispose());\n    }\n\n    /**\n     * Returns <tt>true</tt> - if the stream is muted and <tt>false</tt>\n     * otherwise.\n     *\n     * @returns {boolean} <tt>true</tt> - if the stream is muted and\n     * <tt>false</tt> otherwise.\n     */\n    isMuted() {\n        // this.stream will be null when we mute local video on Chrome\n        if (!this.stream) {\n            return true;\n        }\n        if (this.isVideoTrack() && !this.isActive()) {\n            return true;\n        }\n\n        return !this.track || !this.track.enabled;\n    }\n\n    /**\n     * Sets the JitsiConference object associated with the track. This is temp\n     * solution.\n     *\n     * @param conference the JitsiConference object\n     */\n    _setConference(conference) {\n        this.conference = conference;\n\n        // We want to keep up with postponed events which should have been fired\n        // on \"attach\" call, but for local track we not always have the\n        // conference before attaching. However this may result in duplicated\n        // events if they have been triggered on \"attach\" already.\n        for (let i = 0; i < this.containers.length; i++) {\n            this._maybeFireTrackAttached(this.containers[i]);\n        }\n    }\n\n    /**\n     * Returns <tt>true</tt>.\n     *\n     * @returns {boolean} <tt>true</tt>\n     */\n    isLocal() {\n        return true;\n    }\n\n    /**\n     * Returns device id associated with track.\n     *\n     * @returns {string}\n     */\n    getDeviceId() {\n        return this._realDeviceId || this.deviceId;\n    }\n\n    /**\n     * Returns the participant id which owns the track.\n     *\n     * @returns {string} the id of the participants. It corresponds to the\n     * Colibri endpoint id/MUC nickname in case of Jitsi-meet.\n     */\n    getParticipantId() {\n        return this.conference && this.conference.myUserId();\n    }\n\n    /**\n     * Handles bytes sent statistics.\n     *\n     * @param {TraceablePeerConnection} tpc the source of the \"bytes sent\" stat\n     * @param {number} bytesSent the new value\n     * NOTE: used only for audio tracks to detect audio issues.\n     */\n    _onByteSentStatsReceived(tpc, bytesSent) {\n        if (bytesSent > 0) {\n            this._hasSentData = true;\n        }\n        const iceConnectionState = tpc.getConnectionState();\n\n        if (this._testDataSent && iceConnectionState === 'connected') {\n            setTimeout(() => {\n                if (!this._hasSentData) {\n                    logger.warn(`${this} 'bytes sent' <= 0: \\\n                        ${this._bytesSent}`);\n\n                    // we are not receiving anything from the microphone\n                    this._fireNoDataFromSourceEvent();\n                }\n            }, 3000);\n            this._testDataSent = false;\n        }\n    }\n\n    /**\n     * Returns facing mode for video track from camera. For other cases (e.g.\n     * audio track or 'desktop' video track) returns undefined.\n     *\n     * @returns {CameraFacingMode|undefined}\n     */\n    getCameraFacingMode() {\n        if (this.isVideoTrack() && this.videoType === VideoType.CAMERA) {\n            // MediaStreamTrack#getSettings() is not implemented in many\n            // browsers, so we need feature checking here. Progress on the\n            // respective browser's implementation can be tracked at\n            // https://bugs.chromium.org/p/webrtc/issues/detail?id=2481 for\n            // Chromium and https://bugzilla.mozilla.org/show_bug.cgi?id=1213517\n            // for Firefox. Even if a browser implements getSettings() already,\n            // it might still not return anything for 'facingMode'.\n            let trackSettings;\n\n            try {\n                trackSettings = this.track.getSettings();\n            } catch (e) {\n                // XXX React-native-webrtc, for example, defines\n                // MediaStreamTrack#getSettings() but the implementation throws\n                // a \"Not implemented\" Error.\n            }\n            if (trackSettings && 'facingMode' in trackSettings) {\n                return trackSettings.facingMode;\n            }\n\n            if (typeof this._facingMode !== 'undefined') {\n                return this._facingMode;\n            }\n\n            // In most cases we are showing a webcam. So if we've gotten here,\n            // it should be relatively safe to assume that we are probably\n            // showing the user-facing camera.\n            return CameraFacingMode.USER;\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Stops the associated MediaStream.\n     */\n    _stopStream() {\n\n        /**\n         * Indicates that we are executing {@link #_stopStream} i.e.\n         * {@link RTCUtils#stopMediaStream} for the <tt>MediaStream</tt>\n         * associated with this <tt>JitsiTrack</tt> instance.\n         *\n         * @private\n         * @type {boolean}\n         */\n        this._stopStreamInProgress = true;\n\n        try {\n            RTCUtils.stopMediaStream(this.stream);\n        } finally {\n            this._stopStreamInProgress = false;\n        }\n    }\n\n    /**\n     * Switches the camera facing mode if the WebRTC implementation supports the\n     * custom MediaStreamTrack._switchCamera method. Currently, the method in\n     * question is implemented in react-native-webrtc only. When such a WebRTC\n     * implementation is executing, the method is the preferred way to switch\n     * between the front/user-facing and the back/environment-facing cameras\n     * because it will likely be (as is the case of react-native-webrtc)\n     * noticeably faster that creating a new MediaStreamTrack via a new\n     * getUserMedia call with the switched facingMode constraint value.\n     * Moreover, the approach with a new getUserMedia call may not even work:\n     * WebRTC on Android and iOS is either very slow to open the camera a second\n     * time or plainly freezes attempting to do that.\n     */\n    _switchCamera() {\n        if (this.isVideoTrack()\n                && this.videoType === VideoType.CAMERA\n                && typeof this.track._switchCamera === 'function') {\n            this.track._switchCamera();\n\n            this._facingMode\n                = this._facingMode === CameraFacingMode.ENVIRONMENT\n                    ? CameraFacingMode.USER\n                    : CameraFacingMode.ENVIRONMENT;\n        }\n    }\n\n    /**\n     * Detects camera issues, i.e. returns true if we expect this track to be\n     * receiving data from its source, but it isn't receiving data.\n     *\n     * @returns {boolean} true if an issue is detected and false otherwise\n     */\n    _checkForCameraIssues() {\n        if (!this.isVideoTrack()\n                || this._stopStreamInProgress\n                || this.videoType === VideoType.DESKTOP) {\n            return false;\n        }\n\n        return !this._isReceivingData();\n    }\n\n    /**\n     * Checks whether the attached MediaStream is receiving data from source or\n     * not. If the stream property is null(because of mute or another reason)\n     * this method will return false.\n     * NOTE: This method doesn't indicate problem with the streams directly.\n     * For example in case of video mute the method will return false or if the\n     * user has disposed the track.\n     *\n     * @returns {boolean} true if the stream is receiving data and false\n     * this otherwise.\n     */\n    _isReceivingData() {\n        if (!this.stream) {\n            return false;\n        }\n\n        // In older version of the spec there is no muted property and\n        // readyState can have value muted. In the latest versions\n        // readyState can have values \"live\" and \"ended\" and there is\n        // muted boolean property. If the stream is muted that means that\n        // we aren't receiving any data from the source. We want to notify\n        // the users for error if the stream is muted or ended on it's\n        // creation.\n        return this.stream.getTracks().some(track =>\n            (!('readyState' in track) || track.readyState === 'live')\n                && (!('muted' in track) || track.muted !== true));\n    }\n\n    /**\n     * Creates a text representation of this local track instance.\n     *\n     * @return {string}\n     */\n    toString() {\n        return `LocalTrack[${this.rtcId},${this.getType()}]`;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/JitsiLocalTrack.js","/* global __filename, RTCIceGatherer, RTCIceTransport, RTCDtlsTransport,\nRTCRtpSender, RTCRtpReceiver */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport yaeti from 'yaeti';\n\nimport RTCSessionDescription from './RTCSessionDescription';\nimport * as utils from './utils';\nimport { InvalidStateError } from './errors';\nimport RandomUtil from '../../util/RandomUtil';\nimport SDPUtil from '../../xmpp/SDPUtil';\n\nconst logger = getLogger(__filename);\n\nconst RTCSignalingState = {\n    stable: 'stable',\n    haveLocalOffer: 'have-local-offer',\n    haveRemoteOffer: 'have-remote-offer',\n    closed: 'closed'\n};\n\nconst RTCIceGatheringState = {\n    new: 'new',\n    gathering: 'gathering',\n    complete: 'complete'\n};\n\nconst CNAME = `jitsi-ortc-cname-${RandomUtil.randomInt(10000, 99999)}`;\n\n/**\n * RTCPeerConnection shim for ORTC based endpoints (such as Edge).\n *\n * The interface is based on the W3C specification of 2015, which matches\n * the implementation of Chrome nowadays:\n *\n *   https://www.w3.org/TR/2015/WD-webrtc-20150210/\n *\n * It also implements Plan-B for multi-stream, and assumes single BUNDLEd\n * transport and rtcp-mux.\n */\nexport default class ortcRTCPeerConnection extends yaeti.EventTarget {\n    /**\n     */\n    constructor(pcConfig) {\n        super();\n\n        logger.debug('constructor() pcConfig:', pcConfig);\n\n        // Buffered local ICE candidates (in WebRTC format).\n        // @type {sequence<RTCIceCandidate>}\n        this._bufferedIceCandidates = [];\n\n        // Closed flag.\n        // @type {Boolean}\n        this._closed = false;\n\n        // RTCDtlsTransport.\n        // @type {RTCDtlsTransport}\n        this._dtlsTransport = null;\n\n        // RTCIceGatherer.\n        // @type {RTCIceGatherer}\n        this._iceGatherer = null;\n\n        // RTCPeerConnection iceGatheringState.\n        // NOTE: This should not be needed, but Edge does not implement\n        // iceGatherer.state.\n        // @type {RTCIceGatheringState}\n        this._iceGatheringState = RTCIceGatheringState.new;\n\n        // Use a promise to signify when the local client has finished gathering\n        // ice candidates. This is needed to prevent errors on offer creation.\n        this._resolveLocalIceGatheringPromise = null;\n        this._iceGatheringCompletePromise = new Promise(resolve => {\n            this._resolveLocalIceGatheringPromise = resolve;\n        });\n\n        // RTCIceTransport.\n        // @type {RTCIceTransport}\n        this._iceTransport = null;\n\n        // Local RTP capabilities (filtered with remote ones).\n        // @type {RTCRtpCapabilities}\n        this._localCapabilities = null;\n\n        // Local RTCSessionDescription.\n        // @type {RTCSessionDescription}\n        this._localDescription = null;\n\n        // Map with info regarding local media.\n        // - index: MediaStreamTrack.id\n        // - value: Object\n        //   - rtpSender: Associated RTCRtpSender instance\n        //   - stream: Associated MediaStream instance\n        //   - ssrc: Provisional or definitive SSRC\n        //   - rtxSsrc: Provisional or definitive SSRC for RTX\n        //   - sending: Boolean indicating whether rtpSender.send() was called.\n        this._localTrackInfos = new Map();\n\n        // Ordered Map with MID as key and kind as value.\n        // @type {map<String, String>}\n        this._mids = new Map();\n\n        // Remote RTCSessionDescription.\n        // @type {RTCSessionDescription}\n        this._remoteDescription = null;\n\n        // Map of remote streams.\n        // - index: MediaStream.jitsiRemoteId (as signaled in remote SDP)\n        // - value: MediaStream (locally generated so id does not match)\n        // @type {map<Number, MediaStream>}\n        this._remoteStreams = new Map();\n\n        // Map with info about receiving media.\n        // - index: Media SSRC\n        // - value: Object\n        //   - kind: 'audio' / 'video'\n        //   - ssrc: Media SSRC\n        //   - rtxSsrc: RTX SSRC (may be unset)\n        //   - streamId: MediaStream.jitsiRemoteId\n        //   - trackId: MediaStreamTrack.jitsiRemoteId\n        //   - cname: CNAME\n        //   - stream: MediaStream\n        //   - track: MediaStreamTrack\n        //   - rtpReceiver: Associated RTCRtpReceiver instance\n        // @type {map<Number, Object>}\n        this._remoteTrackInfos = new Map();\n\n        // Local SDP global fields.\n        this._sdpGlobalFields = {\n            id: SDPUtil.generateSsrc(),\n            version: 0\n        };\n\n        // RTCPeerConnection signalingState.\n        // @type {RTCSignalingState}\n        this._signalingState = RTCSignalingState.stable;\n\n        // Create the RTCIceGatherer.\n        this._setIceGatherer(pcConfig);\n\n        // Create the RTCIceTransport.\n        this._setIceTransport(this._iceGatherer);\n\n        // Create the RTCDtlsTransport.\n        this._setDtlsTransport(this._iceTransport);\n    }\n\n    /**\n     * Current ICE+DTLS connection state.\n     * @return {RTCPeerConnectionState}\n     */\n    get connectionState() {\n        return this._dtlsTransport.state;\n    }\n\n    /**\n     * Current ICE connection state.\n     * @return {RTCIceConnectionState}\n     */\n    get iceConnectionState() {\n        return this._iceTransport.state;\n    }\n\n    /**\n     * Current ICE gathering state.\n     * @return {RTCIceGatheringState}\n     */\n    get iceGatheringState() {\n        return this._iceGatheringState;\n    }\n\n    /**\n     * Gets the local description.\n     * @return {RTCSessionDescription}\n     */\n    get localDescription() {\n        return this._localDescription;\n    }\n\n    /**\n     * Gets the remote description.\n     * @return {RTCSessionDescription}\n     */\n    get remoteDescription() {\n        return this._remoteDescription;\n    }\n\n    /**\n     * Current signaling state.\n     * @return {RTCSignalingState}\n     */\n    get signalingState() {\n        return this._signalingState;\n    }\n\n    /**\n     * Adds a remote ICE candidate. Implements both the old callbacks based\n     * signature and the new Promise based style.\n     *\n     * Arguments in Promise mode:\n     * @param {RTCIceCandidate} candidate\n     *\n     * Arguments in callbacks mode:\n     * @param {RTCIceCandidate} candidate\n     */\n    addIceCandidate(candidate) { // eslint-disable-line no-unused-vars\n        if (!candidate) {\n            throw new TypeError('candidate missing');\n        }\n\n        logger.debug('addIceCandidate() candidate:', candidate);\n\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        // NOTE: Edge does not support Trickle-ICE so just candidates in the\n        // remote SDP are applied. Candidates given later would be just\n        // ignored, so notify the called about that.\n        return Promise.reject(new Error('addIceCandidate() not supported'));\n    }\n\n    /**\n     * Adds a local MediaStream.\n     * @param {MediaStream} stream.\n     * NOTE: Deprecated API.\n     */\n    addStream(stream) {\n        logger.debug('addStream()');\n\n        if (this._closed) {\n            throw new InvalidStateError('RTCPeerConnection closed');\n        }\n\n        // Create a RTCRtpSender for each track.\n        for (const track of stream.getTracks()) {\n            // Ignore if ended.\n            if (track.readyState === 'ended') {\n                logger.warn('ignoring ended MediaStreamTrack');\n\n                continue; // eslint-disable-line no-continue\n            }\n\n            // Ignore if track is already present.\n            if (this._localTrackInfos.has(track.id)) {\n                logger.warn('ignoring already handled MediaStreamTrack');\n\n                continue; // eslint-disable-line no-continue\n            }\n\n            const rtpSender = new RTCRtpSender(track, this._dtlsTransport);\n\n            // Store it in the map.\n            this._localTrackInfos.set(track.id, {\n                rtpSender,\n                stream\n            });\n        }\n\n        // Check for local tracks removal.\n        for (const [ trackId, info ] of this._localTrackInfos) {\n            const track = info.rtpSender.track;\n\n            // Check if any of the local tracks has been stopped.\n            if (track.readyState === 'ended') {\n                logger.warn(\n                    'addStream() an already handled track was stopped, '\n                    + `track.id:${track.id}`);\n\n                try {\n                    info.rtpSender.stop();\n                } catch (error) {\n                    logger.warn(`rtpSender.stop() failed:${error}`);\n                }\n\n                // Remove from the map.\n                this._localTrackInfos.delete(track.id);\n\n            // Also, if the stream was already handled, check whether tracks\n            // have been removed via stream.removeTrack() and, if so, stop\n            // their RtpSenders.\n            } else if (info.stream === stream\n                && !stream.getTrackById(trackId)) {\n                logger.warn(\n                    'addStream() a track in this stream was removed, '\n                    + `track.id:${trackId}`);\n\n                try {\n                    info.rtpSender.stop();\n                } catch (error) {\n                    logger.warn(`rtpSender.stop() failed:${error}`);\n                }\n\n                // Remove from the map.\n                this._localTrackInfos.delete(track.id);\n            }\n        }\n\n        // It may need to renegotiate.\n        this._emitNegotiationNeeded();\n    }\n\n    /**\n     * Closes the RTCPeerConnection and all the underlying ORTC objects.\n     */\n    close() {\n        if (this._closed) {\n            return;\n        }\n\n        this._closed = true;\n\n        logger.debug('close()');\n\n        this._updateAndEmitSignalingStateChange(RTCSignalingState.closed);\n\n        // Close RTCIceGatherer.\n        // NOTE: Not yet implemented by Edge.\n        try {\n            this._iceGatherer.close();\n        } catch (error) {\n            logger.warn(`iceGatherer.close() failed:${error}`);\n        }\n\n        // Close RTCIceTransport.\n        try {\n            this._iceTransport.stop();\n        } catch (error) {\n            logger.warn(`iceTransport.stop() failed:${error}`);\n        }\n\n        // Close RTCDtlsTransport.\n        try {\n            this._dtlsTransport.stop();\n        } catch (error) {\n            logger.warn(`dtlsTransport.stop() failed:${error}`);\n        }\n\n        // Close and clear RTCRtpSenders.\n        for (const info of this._localTrackInfos.values()) {\n            const rtpSender = info.rtpSender;\n\n            try {\n                rtpSender.stop();\n            } catch (error) {\n                logger.warn(`rtpSender.stop() failed:${error}`);\n            }\n        }\n\n        this._localTrackInfos.clear();\n\n        // Close and clear RTCRtpReceivers.\n        for (const info of this._remoteTrackInfos.values()) {\n            const rtpReceiver = info.rtpReceiver;\n\n            try {\n                rtpReceiver.stop();\n            } catch (error) {\n                logger.warn(`rtpReceiver.stop() failed:${error}`);\n            }\n        }\n\n        this._remoteTrackInfos.clear();\n\n        // Clear remote streams.\n        this._remoteStreams.clear();\n    }\n\n    /**\n     * Creates a local answer.\n     *\n     * @param {RTCOfferOptions} [options]\n     */\n    createAnswer(options) {\n        logger.debug('createAnswer() options:', options);\n\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        if (this.signalingState !== RTCSignalingState.haveRemoteOffer) {\n            return Promise.reject(new InvalidStateError(\n                `invalid signalingState \"${this.signalingState}\"`));\n        }\n\n        // Create an answer.\n        const localDescription = this._createLocalDescription('answer');\n\n        // Resolve with it.\n        return Promise.resolve(localDescription);\n    }\n\n    /**\n     * Creates a RTCDataChannel.\n     */\n    createDataChannel() {\n        logger.debug('createDataChannel()');\n\n        // NOTE: DataChannels not implemented in Edge.\n        throw new Error('createDataChannel() not supported in Edge');\n    }\n\n    /**\n     * Creates a local offer.\n     *\n     * @param {RTCOfferOptions} [options]\n     */\n    createOffer(options) {\n        logger.debug('createOffer() options:', options);\n\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        if (this.signalingState !== RTCSignalingState.stable) {\n            return Promise.reject(new InvalidStateError(\n                `invalid signalingState \"${this.signalingState}\"`));\n        }\n\n        // Use ice gathering complete promise an invalid state error occurs if\n        // creating a local description before it is complete.\n        return this._iceGatheringCompletePromise\n            .then(() => {\n                // Stub out _mids and _localCapabilities if creating an offer\n                // as they are normally set on answer and will cause errors in\n                // create a local description if falsy.\n                if (!this.hasAttemptedOffer) {\n                    if (!this._mids.size) {\n                        this._mids = new Map([\n                            [ 'audio', 'audio' ],\n                            [ 'video', 'video' ]\n                        ]);\n                    }\n\n                    if (!this._localCapabilities) {\n                        this._localCapabilities\n                            = utils.getLocalCapabilities(\n                                RTCRtpSender.getCapabilities());\n                    }\n\n                    this.hasAttemptedOffer = true;\n                }\n\n                return this._createLocalDescription('offer');\n            });\n    }\n\n    /**\n     * Gets a sequence of local MediaStreams.\n     * @return {sequence<MediaStream>}\n     */\n    getLocalStreams() {\n        return Array.from(this._localTrackInfos.values())\n            .map(info => info.stream)\n            .filter((elem, pos, arr) => arr.indexOf(elem) === pos);\n    }\n\n    /**\n     * Gets a sequence of remote MediaStreams.\n     * @return {sequence<MediaStream>}\n     */\n    getRemoteStreams() {\n        return Array.from(this._remoteStreams.values());\n    }\n\n    /**\n     * Get RTP statistics. Implements both the old callbacks based signature\n     * and the new Promise based style.\n     *\n     * Arguments in Promise mode:\n     * @param {MediaStreamTrack} [selector]\n     *\n     * Arguments in callbacks mode:\n     * @param {MediaStreamTrack} [selector]\n     * @param {function(desc)} callback\n     * @param {function(error)} errback\n     */\n    getStats(...args) {\n        let usePromise;\n        let selector;\n        let callback;\n        let errback;\n\n        if (typeof args[0] === 'function') {\n            usePromise = false;\n            callback = args[0];\n            errback = args[1];\n        } else if (typeof args[1] === 'function') {\n            usePromise = false;\n            selector = args[0];\n            callback = args[1];\n            errback = args[2];\n        } else {\n            usePromise = true;\n            selector = args[0];\n        }\n\n        if (!usePromise && !errback) {\n            errback = error => {\n                logger.error(`getStats() failed: ${error}`);\n                logger.error(error.stack);\n            };\n        }\n\n        if (usePromise) {\n            return this._getStats(selector);\n        }\n\n        this._getStats(selector)\n            .then(stats => callback(stats))\n            .catch(error => errback(error));\n    }\n\n    /**\n     * Removes a local MediaStream.\n     * @param {MediaStream} stream.\n     * NOTE: Deprecated API.\n     */\n    removeStream(stream) {\n        logger.debug('removeStream()');\n\n        if (this._closed) {\n            throw new InvalidStateError('RTCPeerConnection closed');\n        }\n\n        // Stop and remove the RTCRtpSender associated to each track.\n        for (const track of stream.getTracks()) {\n            // Ignore if track not present.\n            if (!this._localTrackInfos.has(track.id)) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            const rtpSender = this._localTrackInfos.get(track.id).rtpSender;\n\n            try {\n                rtpSender.stop();\n            } catch (error) {\n                logger.warn(`rtpSender.stop() failed:${error}`);\n            }\n\n            // Remove from the map.\n            this._localTrackInfos.delete(track.id);\n        }\n\n        // It may need to renegotiate.\n        this._emitNegotiationNeeded();\n    }\n\n    /**\n     * Applies a local description.\n     *\n     * Arguments in Promise mode:\n     * @param {RTCSessionDescriptionInit} desc\n     */\n    setLocalDescription(desc) {\n        if (!desc) {\n            throw new TypeError('description missing');\n        }\n\n        logger.debug('setLocalDescription() desc:', desc);\n\n        return this._setLocalDescription(desc);\n    }\n\n    /**\n     * Applies a remote description.\n     *\n     * Arguments in Promise mode:\n     * @param {RTCSessionDescriptionInit} desc\n     */\n    setRemoteDescription(desc) {\n        if (!desc) {\n            throw new TypeError('description missing');\n        }\n\n        logger.debug('setRemoteDescription() desc:', desc);\n\n        return this._setRemoteDescription(desc);\n    }\n\n    /**\n     * Creates the local RTCSessionDescription.\n     * @param {String} type - 'offer' / 'answer'.\n     * @return {RTCSessionDescription}\n     */\n    _createLocalDescription(type) {\n        const sdpObject = {};\n        const localIceParameters = this._iceGatherer.getLocalParameters();\n        const localIceCandidates = this._iceGatherer.getLocalCandidates();\n        const localDtlsParameters = this._dtlsTransport.getLocalParameters();\n\n        // remoteDtlsParameters are not needed for offers.\n        const remoteDtlsParameters = type === 'answer'\n            ? this._dtlsTransport.getRemoteParameters() : null;\n        const localCapabilities = this._localCapabilities;\n        const localTrackInfos = this._localTrackInfos;\n\n        // Increase SDP version if an offer.\n        if (type === 'offer') {\n            this._sdpGlobalFields.version++;\n        }\n\n        // SDP global fields.\n        sdpObject.version = 0;\n        sdpObject.origin = {\n            address: '127.0.0.1',\n            ipVer: 4,\n            netType: 'IN',\n            sessionId: this._sdpGlobalFields.id,\n            sessionVersion: this._sdpGlobalFields.version,\n            username: 'jitsi-ortc-webrtc-shim'\n        };\n        sdpObject.name = '-';\n        sdpObject.timing = {\n            start: 0,\n            stop: 0\n        };\n        sdpObject.msidSemantic = {\n            semantic: 'WMS',\n            token: '*'\n        };\n        sdpObject.groups = [\n            {\n                mids: Array.from(this._mids.keys()).join(' '),\n                type: 'BUNDLE'\n            }\n        ];\n        sdpObject.media = [];\n\n        // DTLS fingerprint.\n        sdpObject.fingerprint = {\n            hash: localDtlsParameters.fingerprints[0].value,\n            type: localDtlsParameters.fingerprints[0].algorithm\n        };\n\n        // Let's check whether there is video RTX.\n        let hasVideoRtx = false;\n\n        for (const codec of localCapabilities.codecs) {\n            if (codec.kind === 'video' && codec.name === 'rtx') {\n                hasVideoRtx = true;\n                break;\n            }\n        }\n\n        // Add m= sections.\n        for (const [ mid, kind ] of this._mids) {\n            addMediaSection.call(this, mid, kind);\n        }\n\n        // Create a RTCSessionDescription.\n        const localDescription = new RTCSessionDescription({\n            type,\n            _sdpObject: sdpObject\n        });\n\n        logger.debug('_createLocalDescription():', localDescription);\n\n        return localDescription;\n\n        /**\n         * Add a m= section.\n         */\n        function addMediaSection(mid, kind) {\n            const mediaObject = {};\n\n            // m= line.\n            mediaObject.type = kind;\n\n            switch (kind) {\n            case 'audio':\n            case 'video':\n                mediaObject.protocol = 'RTP/SAVPF';\n                mediaObject.port = 9;\n                mediaObject.direction = 'sendrecv';\n                break;\n            case 'application':\n                mediaObject.protocol = 'DTLS/SCTP';\n                mediaObject.port = 0; // Reject m section.\n                mediaObject.payloads = '0'; // Just put something.\n                mediaObject.direction = 'inactive';\n                break;\n            }\n\n            // c= line.\n            mediaObject.connection = {\n                ip: '127.0.0.1',\n                version: 4\n            };\n\n            // a=mid attribute.\n            mediaObject.mid = mid;\n\n            // ICE.\n            mediaObject.iceUfrag = localIceParameters.usernameFragment;\n            mediaObject.icePwd = localIceParameters.password;\n            mediaObject.candidates = [];\n\n            for (const candidate of localIceCandidates) {\n                const candidateObject = {};\n\n                // rtcp-mux is assumed, so component is always 1 (RTP).\n                candidateObject.component = 1;\n                candidateObject.foundation = candidate.foundation;\n                candidateObject.ip = candidate.ip;\n                candidateObject.port = candidate.port;\n                candidateObject.priority = candidate.priority;\n                candidateObject.transport\n                    = candidate.protocol.toLowerCase();\n                candidateObject.type = candidate.type;\n                if (candidateObject.transport === 'tcp') {\n                    candidateObject.tcptype = candidate.tcpType;\n                }\n\n                mediaObject.candidates.push(candidateObject);\n            }\n\n            mediaObject.endOfCandidates = 'end-of-candidates';\n\n            // DTLS.\n            // If 'offer' always use 'actpass'.\n            if (type === 'offer') {\n                mediaObject.setup = 'actpass';\n            } else {\n                mediaObject.setup = remoteDtlsParameters.role === 'server'\n                    ? 'active' : 'passive';\n            }\n\n            if (kind === 'audio' || kind === 'video') {\n                mediaObject.rtp = [];\n                mediaObject.rtcpFb = [];\n                mediaObject.fmtp = [];\n\n                // Array of payload types.\n                const payloads = [];\n\n                // Add codecs.\n                for (const codec of localCapabilities.codecs) {\n                    if (codec.kind && codec.kind !== kind) {\n                        continue; // eslint-disable-line no-continue\n                    }\n\n                    payloads.push(codec.preferredPayloadType);\n\n                    const rtpObject = {\n                        codec: codec.name,\n                        payload: codec.preferredPayloadType,\n                        rate: codec.clockRate\n                    };\n\n                    if (codec.numChannels > 1) {\n                        rtpObject.encoding = codec.numChannels;\n                    }\n\n                    mediaObject.rtp.push(rtpObject);\n\n                    // If codec has parameters add them into a=fmtp attributes.\n                    if (codec.parameters) {\n                        const paramFmtp = {\n                            config: '',\n                            payload: codec.preferredPayloadType\n                        };\n\n                        for (const name of Object.keys(codec.parameters)) {\n                            /* eslint-disable max-depth */\n                            if (paramFmtp.config) {\n                                paramFmtp.config += ';';\n                            }\n                            /* eslint-enable max-depth */\n\n                            paramFmtp.config\n                                += `${name}=${codec.parameters[name]}`;\n                        }\n\n                        if (paramFmtp.config) {\n                            mediaObject.fmtp.push(paramFmtp);\n                        }\n                    }\n\n                    // Set RTCP feedback.\n                    for (const fb of codec.rtcpFeedback || []) {\n                        mediaObject.rtcpFb.push({\n                            payload: codec.preferredPayloadType,\n                            subtype: fb.parameter || undefined,\n                            type: fb.type\n                        });\n                    }\n                }\n\n                // If there are no codecs, set this m section as unavailable.\n                if (payloads.length === 0) {\n                    mediaObject.payloads = '9'; // Just put something.\n                    mediaObject.port = 0;\n                    mediaObject.direction = 'inactive';\n                } else {\n                    mediaObject.payloads = payloads.join(' ');\n                }\n\n                // SSRCs.\n                mediaObject.ssrcs = [];\n                mediaObject.ssrcGroups = [];\n\n                // Add RTP sending stuff.\n                for (const info of localTrackInfos.values()) {\n                    const rtpSender = info.rtpSender;\n                    const streamId = info.stream.id;\n                    const track = rtpSender.track;\n\n                    // Ignore if ended.\n                    if (track.readyState === 'ended') {\n                        continue; // eslint-disable-line no-continue\n                    }\n\n                    if (track.kind !== kind) {\n                        continue; // eslint-disable-line no-continue\n                    }\n\n                    // Set a random provisional SSRC if not set.\n                    if (!info.ssrc) {\n                        info.ssrc = SDPUtil.generateSsrc();\n                    }\n\n                    // Whether RTX should be enabled.\n                    const enableRtx = hasVideoRtx && track.kind === 'video';\n\n                    // Set a random provisional RTX SSRC if not set.\n                    if (enableRtx && !info.rtxSsrc) {\n                        info.rtxSsrc = info.ssrc + 1;\n                    }\n\n                    mediaObject.ssrcs.push({\n                        attribute: 'cname',\n                        id: info.ssrc,\n                        value: CNAME\n                    });\n\n                    mediaObject.ssrcs.push({\n                        attribute: 'msid',\n                        id: info.ssrc,\n                        value: `${streamId} ${track.id}`\n                    });\n\n                    mediaObject.ssrcs.push({\n                        attribute: 'mslabel',\n                        id: info.ssrc,\n                        value: streamId\n                    });\n\n                    mediaObject.ssrcs.push({\n                        attribute: 'label',\n                        id: info.ssrc,\n                        value: track.id\n                    });\n\n                    if (enableRtx) {\n                        mediaObject.ssrcs.push({\n                            attribute: 'cname',\n                            id: info.rtxSsrc,\n                            value: CNAME\n                        });\n\n                        mediaObject.ssrcs.push({\n                            attribute: 'msid',\n                            id: info.rtxSsrc,\n                            value: `${streamId} ${track.id}`\n                        });\n\n                        mediaObject.ssrcs.push({\n                            attribute: 'mslabel',\n                            id: info.rtxSsrc,\n                            value: streamId\n                        });\n\n                        mediaObject.ssrcs.push({\n                            attribute: 'label',\n                            id: info.rtxSsrc,\n                            value: track.id\n                        });\n\n                        mediaObject.ssrcGroups.push({\n                            semantics: 'FID',\n                            ssrcs: `${info.ssrc} ${info.rtxSsrc}`\n                        });\n                    }\n                }\n\n                // RTP header extensions.\n                mediaObject.ext = [];\n\n                for (const extension of localCapabilities.headerExtensions) {\n                    if (extension.kind && extension.kind !== kind) {\n                        continue; // eslint-disable-line no-continue\n                    }\n\n                    mediaObject.ext.push({\n                        value: extension.preferredId,\n                        uri: extension.uri\n                    });\n                }\n\n                // a=rtcp-mux attribute.\n                mediaObject.rtcpMux = 'rtcp-mux';\n\n                // a=rtcp-rsize.\n                mediaObject.rtcpRsize = 'rtcp-rsize';\n            }\n\n            // Add the media section.\n            sdpObject.media.push(mediaObject);\n        }\n    }\n\n    /**\n     * Emit 'addstream' event.\n     * @private\n     */\n    _emitAddStream(stream) {\n        if (this._closed) {\n            return;\n        }\n\n        logger.debug('emitting \"addstream\"');\n\n        const event = new yaeti.Event('addstream');\n\n        event.stream = stream;\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * May emit buffered ICE candidates.\n     * @private\n     */\n    _emitBufferedIceCandidates() {\n        if (this._closed) {\n            return;\n        }\n\n        for (const sdpCandidate of this._bufferedIceCandidates) {\n            if (!sdpCandidate) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            // Now we have set the MID values of the SDP O/A, so let's fill the\n            // sdpMIndex of the candidate.\n            sdpCandidate.sdpMIndex = this._mids.keys().next().value;\n\n            logger.debug(\n                'emitting buffered \"icecandidate\", candidate:', sdpCandidate);\n\n            const event = new yaeti.Event('icecandidate');\n\n            event.candidate = sdpCandidate;\n            this.dispatchEvent(event);\n        }\n\n        this._bufferedIceCandidates = [];\n    }\n\n    /**\n     * May emit 'connectionstatechange' event.\n     * @private\n     */\n    _emitConnectionStateChange() {\n        if (this._closed && this.connectionState !== 'closed') {\n            return;\n        }\n\n        logger.debug(\n            'emitting \"connectionstatechange\", connectionState:',\n            this.connectionState);\n\n        const event = new yaeti.Event('connectionstatechange');\n\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * May emit 'icecandidate' event.\n     * @private\n     */\n    _emitIceCandidate(candidate) {\n        if (this._closed) {\n            return;\n        }\n\n        let sdpCandidate = null;\n\n        if (candidate) {\n            // NOTE: We assume BUNDLE so let's just emit candidates for the\n            // first m= section.\n            const sdpMIndex = this._mids.keys().next().value;\n            const sdpMLineIndex = 0;\n            let sdpAttribute\n                = `candidate:${candidate.foundation} 1 ${candidate.protocol}`\n                + ` ${candidate.priority} ${candidate.ip} ${candidate.port}`\n                + ` typ ${candidate.type}`;\n\n            if (candidate.relatedAddress) {\n                sdpAttribute += ` raddr ${candidate.relatedAddress}`;\n            }\n            if (candidate.relatedPort) {\n                sdpAttribute += ` rport ${candidate.relatedPort}`;\n            }\n            if (candidate.protocol === 'tcp') {\n                sdpAttribute += ` tcptype ${candidate.tcpType}`;\n            }\n\n            sdpCandidate = {\n                candidate: sdpAttribute,\n                component: 1, // rtcp-mux assumed, so always 1 (RTP).\n                foundation: candidate.foundation,\n                ip: candidate.ip,\n                port: candidate.port,\n                priority: candidate.priority,\n                protocol: candidate.protocol,\n                type: candidate.type,\n                sdpMIndex,\n                sdpMLineIndex\n            };\n\n            if (candidate.protocol === 'tcp') {\n                sdpCandidate.tcptype = candidate.tcpType;\n            }\n            if (candidate.relatedAddress) {\n                sdpCandidate.relatedAddress = candidate.relatedAddress;\n            }\n            if (candidate.relatedPort) {\n                sdpCandidate.relatedPort = candidate.relatedPort;\n            }\n        }\n\n        // If we don't have yet a local description, buffer the candidate.\n        if (this._localDescription) {\n            logger.debug(\n                'emitting \"icecandidate\", candidate:', sdpCandidate);\n\n            const event = new yaeti.Event('icecandidate');\n\n            event.candidate = sdpCandidate;\n            this.dispatchEvent(event);\n        } else {\n            logger.debug(\n                'buffering gathered ICE candidate:', sdpCandidate);\n\n            this._bufferedIceCandidates.push(sdpCandidate);\n        }\n    }\n\n    /**\n     * May emit 'iceconnectionstatechange' event.\n     * @private\n     */\n    _emitIceConnectionStateChange() {\n        if (this._closed && this.iceConnectionState !== 'closed') {\n            return;\n        }\n\n        logger.debug(\n            'emitting \"iceconnectionstatechange\", iceConnectionState:',\n            this.iceConnectionState);\n\n        const event = new yaeti.Event('iceconnectionstatechange');\n\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * May emit 'negotiationneeded' event.\n     * @private\n     */\n    _emitNegotiationNeeded() {\n        // Ignore if signalingState is not 'stable'.\n        if (this.signalingState !== RTCSignalingState.stable) {\n            return;\n        }\n\n        logger.debug('emitting \"negotiationneeded\"');\n\n        const event = new yaeti.Event('negotiationneeded');\n\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * Emit 'removestream' event.\n     * @private\n     */\n    _emitRemoveStream(stream) {\n        if (this._closed) {\n            return;\n        }\n\n        logger.debug('emitting \"removestream\"');\n\n        const event = new yaeti.Event('removestream');\n\n        event.stream = stream;\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * Get RTP parameters for a RTCRtpReceiver.\n     * @private\n     * @return {RTCRtpParameters}\n     */\n    _getParametersForRtpReceiver(kind, data) {\n        const ssrc = data.ssrc;\n        const rtxSsrc = data.rtxSsrc;\n        const cname = data.cname;\n        const localCapabilities = this._localCapabilities;\n        const parameters = {\n            codecs: [],\n            degradationPreference: 'balanced',\n            encodings: [],\n            headerExtensions: [],\n            muxId: '',\n            rtcp: {\n                cname,\n                compound: true, // NOTE: Implemented in Edge.\n                mux: true,\n                reducedSize: true // NOTE: Not yet implemented in Edge.\n            }\n        };\n\n        const codecs = [];\n        let codecPayloadType;\n\n        for (const codecCapability of localCapabilities.codecs) {\n            if (codecCapability.kind !== kind\n                || codecCapability.name === 'rtx') {\n                continue; // eslint-disable-line no-continue\n            }\n\n            codecPayloadType = codecCapability.preferredPayloadType;\n            codecs.push({\n                clockRate: codecCapability.clockRate,\n                maxptime: codecCapability.maxptime,\n                mimeType: codecCapability.mimeType,\n                name: codecCapability.name,\n                numChannels: codecCapability.numChannels,\n                parameters: codecCapability.parameters,\n                payloadType: codecCapability.preferredPayloadType,\n                ptime: codecCapability.ptime,\n                rtcpFeedback: codecCapability.rtcpFeedback\n            });\n\n            break;\n        }\n\n        if (rtxSsrc) {\n            for (const codecCapability of localCapabilities.codecs) {\n                if (codecCapability.kind !== kind\n                    || codecCapability.name !== 'rtx') {\n                    continue; // eslint-disable-line no-continue\n                }\n\n                codecs.push({\n                    clockRate: codecCapability.clockRate,\n                    mimeType: codecCapability.mimeType,\n                    name: 'rtx',\n                    parameters: codecCapability.parameters,\n                    payloadType: codecCapability.preferredPayloadType,\n                    rtcpFeedback: codecCapability.rtcpFeedback\n                });\n\n                break;\n            }\n        }\n\n        parameters.codecs = codecs;\n\n        const encoding = {\n            active: true,\n            codecPayloadType,\n            ssrc\n        };\n\n        if (rtxSsrc) {\n            encoding.rtx = {\n                ssrc: rtxSsrc\n            };\n        }\n\n        parameters.encodings.push(encoding);\n\n        for (const extension of localCapabilities.headerExtensions) {\n            if (extension.kind !== kind) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            parameters.headerExtensions.push({\n                encrypt: extension.preferredEncrypt,\n                id: extension.preferredId,\n                uri: extension.uri\n            });\n        }\n\n        return parameters;\n    }\n\n    /**\n     * Get RTP parameters for a RTCRtpSender.\n     * @private\n     * @return {RTCRtpParameters}\n     */\n    _getParametersForRtpSender(kind, data) {\n        const ssrc = data.ssrc;\n        const rtxSsrc = data.rtxSsrc;\n        const cname = CNAME;\n        const localCapabilities = this._localCapabilities;\n        const parameters = {\n            codecs: [],\n            degradationPreference: 'balanced',\n            encodings: [],\n            headerExtensions: [],\n            muxId: '',\n            rtcp: {\n                cname,\n                compound: true, // NOTE: Implemented in Edge.\n                mux: true,\n                reducedSize: true // NOTE: Not yet implemented in Edge.\n            }\n        };\n\n        const codecs = [];\n        let codecPayloadType;\n\n        for (const codecCapability of localCapabilities.codecs) {\n            if (codecCapability.kind !== kind\n                || codecCapability.name === 'rtx') {\n                continue; // eslint-disable-line no-continue\n            }\n\n            codecPayloadType = codecCapability.preferredPayloadType;\n            codecs.push({\n                clockRate: codecCapability.clockRate,\n                maxptime: codecCapability.maxptime,\n                mimeType: codecCapability.mimeType,\n                name: codecCapability.name,\n                numChannels: codecCapability.numChannels,\n                parameters: codecCapability.parameters,\n                payloadType: codecCapability.preferredPayloadType,\n                ptime: codecCapability.ptime,\n                rtcpFeedback: codecCapability.rtcpFeedback\n            });\n\n            break;\n        }\n\n        if (rtxSsrc) {\n            for (const codecCapability of localCapabilities.codecs) {\n                if (codecCapability.kind !== kind\n                    || codecCapability.name !== 'rtx') {\n                    continue; // eslint-disable-line no-continue\n                }\n\n                codecs.push({\n                    clockRate: codecCapability.clockRate,\n                    mimeType: codecCapability.mimeType,\n                    name: 'rtx',\n                    parameters: codecCapability.parameters,\n                    payloadType: codecCapability.preferredPayloadType,\n                    rtcpFeedback: codecCapability.rtcpFeedback\n                });\n\n                break;\n            }\n        }\n\n        parameters.codecs = codecs;\n\n        const encoding = {\n            active: true,\n            codecPayloadType,\n            ssrc\n        };\n\n        if (rtxSsrc) {\n            encoding.rtx = {\n                ssrc: rtxSsrc\n            };\n        }\n\n        parameters.encodings.push(encoding);\n\n        for (const extension of localCapabilities.headerExtensions) {\n            if (extension.kind !== kind) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            parameters.headerExtensions.push({\n                encrypt: extension.preferredEncrypt,\n                id: extension.preferredId,\n                uri: extension.uri\n            });\n        }\n\n        return parameters;\n    }\n\n    /**\n     * Promise based implementation for getStats().\n     * @return {Promise} RTCStats dictionary.\n     * @private\n     */\n    _getStats(selector) { // eslint-disable-line no-unused-vars\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        const iceGatherer = this._iceGatherer;\n        const iceTransport = this._iceTransport;\n        const rtpSenders = [];\n        const rtpReceivers = [];\n        const promises = [];\n\n        // Get RtpSenders.\n        for (const info of this._localTrackInfos.values()) {\n            const { rtpSender, sending } = info;\n\n            if (sending) {\n                rtpSenders.push(rtpSender);\n            }\n        }\n\n        // Get RtpReceivers.\n        for (const info of this._remoteTrackInfos.values()) {\n            const { rtpReceiver } = info;\n\n            rtpReceivers.push(rtpReceiver);\n        }\n\n        // Collect all the stats.\n\n        if (iceGatherer) {\n            promises.push(\n                iceGatherer.getStats()\n                    .catch(() => null));\n        }\n\n        if (iceTransport) {\n            promises.push(\n                iceTransport.getStats()\n                    .catch(() => null));\n\n            // NOTE: Proprietary stuff in Edge.\n            if (typeof iceTransport.msGetStats === 'function') {\n                promises.push(\n                    iceTransport.msGetStats()\n                        .catch(() => null));\n            }\n        }\n\n        for (const rtpSender of rtpSenders) {\n            const isAudio = rtpSender.track.kind === 'audio';\n\n            promises.push(rtpSender.getStats()\n                .then(data => {\n                    // Remove audioLevel from type=\"track\" stats if this is\n                    // not an audio sender.\n                    if (!isAudio) {\n                        for (const key of Object.keys(data)) {\n                            const stat = data[key];\n\n                            if (stat.type === 'track') {\n                                delete stat.audioLevel;\n                            }\n                        }\n                    }\n\n                    return data;\n                })\n                .catch(() => null));\n        }\n\n        for (const rtpReceiver of rtpReceivers) {\n            const isAudio = rtpReceiver.track.kind === 'audio';\n\n            promises.push(rtpReceiver.getStats()\n                .then(data => {\n                    // Remove audioLevel from type=\"track\" stats if this is\n                    // not an audio receiver.\n                    if (!isAudio) {\n                        for (const key of Object.keys(data)) {\n                            const stat = data[key];\n\n                            if (stat.type === 'track') {\n                                delete stat.audioLevel;\n                            }\n                        }\n                    }\n\n                    return data;\n                })\n                .catch(() => null));\n        }\n\n        return Promise.all(promises)\n            .then(datas => {\n                const stats = {};\n\n                for (const data of datas) {\n                    if (!data) {\n                        continue; // eslint-disable-line no-continue\n                    }\n\n                    for (const key of Object.keys(data)) {\n                        stats[key] = data[key];\n                    }\n                }\n\n                return stats;\n            });\n    }\n\n    /**\n     * Handles the local initial answer.\n     * @return {Promise}\n     * @private\n     */\n    _handleLocalInitialAnswer(desc) {\n        logger.debug('_handleLocalInitialAnswer(), desc:', desc);\n\n        const sdpObject = desc.sdpObject;\n\n        // Update local capabilities as decided by the app.\n        this._localCapabilities = utils.extractCapabilities(sdpObject);\n\n        logger.debug('local capabilities:', this._localCapabilities);\n\n        // NOTE: We assume that the answer given by the app does not change\n        // SSRC or PT values. If so, things won't work as expected.\n    }\n\n    /**\n     * Handles a local re-answer.\n     * @return {Promise}\n     * @private\n     */\n    _handleLocalReAnswer(desc) {\n        logger.debug('_handleLocalReAnswer(), desc:', desc);\n\n        const sdpObject = desc.sdpObject;\n\n        // Update local capabilities as decided by the app.\n        this._localCapabilities = utils.extractCapabilities(sdpObject);\n\n        logger.debug('local capabilities:', this._localCapabilities);\n\n        // NOTE: We assume that the answer given by the app does not change\n        // SSRC or PT values. If so, things won't work as expected.\n    }\n\n    /**\n     * Handles the remote initial offer.\n     * @return {Promise}\n     * @private\n     */\n    _handleRemoteInitialOffer(desc) {\n        logger.debug('_handleRemoteInitialOffer(), desc:', desc);\n\n        const sdpObject = desc.sdpObject;\n\n        // Set MID values.\n        this._mids = utils.extractMids(sdpObject);\n\n        // Get remote RTP capabilities.\n        const remoteCapabilities = utils.extractCapabilities(sdpObject);\n\n        logger.debug('remote capabilities:', remoteCapabilities);\n\n        // Get local RTP capabilities (filter them with remote capabilities).\n        this._localCapabilities\n            = utils.getLocalCapabilities(remoteCapabilities);\n\n        // Start ICE and DTLS.\n        this._startIceAndDtls(desc);\n    }\n\n    /**\n     * Handles a remote re-offer.\n     * @return {Promise}\n     * @private\n     */\n    _handleRemoteReOffer(desc) {\n        logger.debug('_handleRemoteReOffer(), desc:', desc);\n\n        const sdpObject = desc.sdpObject;\n\n        // Update MID values (just in case).\n        this._mids = utils.extractMids(sdpObject);\n\n        // Get remote RTP capabilities (filter them with remote capabilities).\n        const remoteCapabilities = utils.extractCapabilities(sdpObject);\n\n        logger.debug('remote capabilities:', remoteCapabilities);\n\n        // Update local RTP capabilities (just in case).\n        this._localCapabilities\n            = utils.getLocalCapabilities(remoteCapabilities);\n    }\n\n    /**\n     * Start receiving remote media.\n     */\n    _receiveMedia() {\n        logger.debug('_receiveMedia()');\n\n        const currentRemoteSsrcs = new Set(this._remoteTrackInfos.keys());\n        const newRemoteTrackInfos\n            = utils.extractTrackInfos(this._remoteDescription.sdpObject);\n\n        // Map of new remote MediaStream indexed by MediaStream.jitsiRemoteId.\n        const addedRemoteStreams = new Map();\n\n        // Map of remote MediaStream indexed by added MediaStreamTrack.\n        // NOTE: Just filled for already existing streams.\n        const addedRemoteTracks = new Map();\n\n        // Map of remote MediaStream indexed by removed MediaStreamTrack.\n        const removedRemoteTracks = new Map();\n\n        logger.debug(\n            '_receiveMedia() remote track infos:', newRemoteTrackInfos);\n\n        // Check new tracks.\n        for (const [ ssrc, info ] of newRemoteTrackInfos) {\n            // If already handled, ignore it.\n            if (currentRemoteSsrcs.has(ssrc)) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            logger.debug(`_receiveMedia() new remote track, ssrc:${ssrc}`);\n\n            // Otherwise append to the map.\n            this._remoteTrackInfos.set(ssrc, info);\n\n            const kind = info.kind;\n            const rtxSsrc = info.rtxSsrc;\n            const streamRemoteId = info.streamId;\n            const trackRemoteId = info.trackId;\n            const cname = info.cname;\n            const isNewStream = !this._remoteStreams.has(streamRemoteId);\n            let stream;\n\n            if (isNewStream) {\n                logger.debug(\n                    `_receiveMedia() new remote stream, id:${streamRemoteId}`);\n\n                // Create a new MediaStream.\n                stream = new MediaStream();\n\n                // Set custom property with the remote id.\n                stream.jitsiRemoteId = streamRemoteId;\n\n                addedRemoteStreams.set(streamRemoteId, stream);\n                this._remoteStreams.set(streamRemoteId, stream);\n            } else {\n                stream = this._remoteStreams.get(streamRemoteId);\n            }\n\n            const rtpReceiver = new RTCRtpReceiver(this._dtlsTransport, kind);\n            const parameters = this._getParametersForRtpReceiver(kind, {\n                ssrc,\n                rtxSsrc,\n                cname\n            });\n\n            // Store the track into the info object.\n            // NOTE: This should not be needed, but Edge has a bug:\n            //   https://developer.microsoft.com/en-us/microsoft-edge/platform/\n            //   issues/12399497/\n            info.track = rtpReceiver.track;\n\n            // Set error handler.\n            rtpReceiver.onerror = ev => {\n                logger.error('rtpReceiver \"error\" event, event:');\n                logger.error(ev);\n            };\n\n            // Fill the info with the stream and rtpReceiver.\n            info.stream = stream;\n            info.rtpReceiver = rtpReceiver;\n\n            logger.debug(\n                'calling rtpReceiver.receive(), parameters:', parameters);\n\n            // Start receiving media.\n            try {\n                rtpReceiver.receive(parameters);\n\n                // Get the associated MediaStreamTrack.\n                const track = info.track;\n\n                // Set custom property with the remote id.\n                track.jitsiRemoteId = trackRemoteId;\n\n                // Add the track to the stream.\n                stream.addTrack(track);\n\n                if (!addedRemoteStreams.has(streamRemoteId)) {\n                    addedRemoteTracks.set(track, stream);\n                }\n            } catch (error) {\n                logger.error(`rtpReceiver.receive() failed:${error.message}`);\n                logger.error(error);\n            }\n        }\n\n        // Check track removal.\n        for (const ssrc of currentRemoteSsrcs) {\n            if (newRemoteTrackInfos.has(ssrc)) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            logger.debug(`_receiveMedia() remote track removed, ssrc:${ssrc}`);\n\n            const info = this._remoteTrackInfos.get(ssrc);\n            const stream = info.stream;\n            const track = info.track;\n            const rtpReceiver = info.rtpReceiver;\n\n            try {\n                rtpReceiver.stop();\n            } catch (error) {\n                logger.warn(`rtpReceiver.stop() failed:${error}`);\n            }\n\n            removedRemoteTracks.set(track, stream);\n            stream.removeTrack(track);\n            this._remoteTrackInfos.delete(ssrc);\n        }\n\n        // Emit MediaStream 'addtrack' for new tracks in already existing\n        // streams.\n        for (const [ track, stream ] of addedRemoteTracks) {\n            const event = new Event('addtrack');\n\n            event.track = track;\n            stream.dispatchEvent(event);\n        }\n\n        // Emit MediaStream 'removetrack' for removed tracks.\n        for (const [ track, stream ] of removedRemoteTracks) {\n            const event = new Event('removetrack');\n\n            event.track = track;\n            stream.dispatchEvent(event);\n        }\n\n        // Emit RTCPeerConnection 'addstream' for new remote streams.\n        for (const stream of addedRemoteStreams.values()) {\n            // Check whether at least a track was added, otherwise ignore it.\n            if (stream.getTracks().length === 0) {\n                logger.warn(\n                    'ignoring new stream for which no track could be added');\n\n                addedRemoteStreams.delete(stream.jitsiRemoteId);\n                this._remoteStreams.delete(stream.jitsiRemoteId);\n            } else {\n                this._emitAddStream(stream);\n            }\n        }\n\n        // Emit RTCPeerConnection 'removestream' for removed remote streams.\n        for (const [ streamRemoteId, stream ] of this._remoteStreams) {\n            if (stream.getTracks().length > 0) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            this._remoteStreams.delete(streamRemoteId);\n            this._emitRemoveStream(stream);\n        }\n    }\n\n    /**\n     * Start sending our media to the remote.\n     */\n    _sendMedia() {\n        logger.debug('_sendMedia()');\n\n        for (const info of this._localTrackInfos.values()) {\n            // Ignore if already sending.\n            if (info.sending) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            const rtpSender = info.rtpSender;\n            const ssrc = info.ssrc;\n            const rtxSsrc = info.rtxSsrc;\n            const track = rtpSender.track;\n            const kind = track.kind;\n\n            const parameters = this._getParametersForRtpSender(kind, {\n                ssrc,\n                rtxSsrc\n            });\n\n            logger.debug(\n                'calling rtpSender.send(), parameters:', parameters);\n\n            // Start sending media.\n            try {\n                rtpSender.send(parameters);\n\n                // Update sending field.\n                info.sending = true;\n            } catch (error) {\n                logger.error(`rtpSender.send() failed:${error.message}`);\n                logger.error(error);\n            }\n        }\n    }\n\n    /**\n     * Creates the RTCDtlsTransport.\n     * @private\n     */\n    _setDtlsTransport(iceTransport) {\n        const dtlsTransport = new RTCDtlsTransport(iceTransport);\n\n        // NOTE: Not yet implemented by Edge.\n        dtlsTransport.onstatechange = () => {\n            logger.debug(\n                'dtlsTransport \"statechange\" event, '\n                + `state:${dtlsTransport.state}`);\n\n            this._emitConnectionStateChange();\n        };\n\n        // NOTE: Not standard, but implemented by Edge.\n        dtlsTransport.ondtlsstatechange = () => {\n            logger.debug(\n                'dtlsTransport \"dtlsstatechange\" event, '\n                + `state:${dtlsTransport.state}`);\n\n            this._emitConnectionStateChange();\n        };\n\n        dtlsTransport.onerror = ev => {\n            let message;\n\n            if (ev.message) {\n                message = ev.message;\n            } else if (ev.error) {\n                message = ev.error.message;\n            }\n\n            logger.error(`dtlsTransport \"error\" event, message:${message}`);\n\n            // TODO: Edge does not set state to 'failed' on error. We may\n            // hack it.\n\n            this._emitConnectionStateChange();\n        };\n\n        this._dtlsTransport = dtlsTransport;\n    }\n\n    /**\n     * Creates the RTCIceGatherer.\n     * @private\n     */\n    _setIceGatherer(pcConfig) {\n        const iceGatherOptions = {\n            gatherPolicy: pcConfig.iceTransportPolicy || 'all',\n            iceServers: pcConfig.iceServers\n        };\n        const iceGatherer = new RTCIceGatherer(iceGatherOptions);\n\n        // NOTE: Not yet implemented by Edge.\n        iceGatherer.onstatechange = () => {\n            logger.debug(\n                `iceGatherer \"statechange\" event, state:${iceGatherer.state}`);\n\n            this._updateAndEmitIceGatheringStateChange(iceGatherer.state);\n        };\n\n        iceGatherer.onlocalcandidate = ev => {\n            let candidate = ev.candidate;\n\n            // NOTE: Not yet implemented by Edge.\n            const complete = ev.complete;\n\n            logger.debug(\n                'iceGatherer \"localcandidate\" event, candidate:', candidate);\n\n            // NOTE: Instead of null candidate or complete:true, current Edge\n            // signals end of gathering with an empty candidate object.\n            if (complete\n                || !candidate\n                || Object.keys(candidate).length === 0) {\n\n                candidate = null;\n\n                this._updateAndEmitIceGatheringStateChange(\n                    RTCIceGatheringState.complete);\n                this._resolveLocalIceGatheringPromise();\n                this._emitIceCandidate(null);\n            } else {\n                this._emitIceCandidate(candidate);\n            }\n        };\n\n        iceGatherer.onerror = ev => {\n            const errorCode = ev.errorCode;\n            const errorText = ev.errorText;\n\n            logger.error(\n                `iceGatherer \"error\" event, errorCode:${errorCode}, `\n                + `errorText:${errorText}`);\n        };\n\n        // NOTE: Not yet implemented by Edge, which starts gathering\n        // automatically.\n        try {\n            iceGatherer.gather();\n        } catch (error) {\n            logger.warn(`iceGatherer.gather() failed:${error}`);\n        }\n\n        this._iceGatherer = iceGatherer;\n    }\n\n    /**\n     * Creates the RTCIceTransport.\n     * @private\n     */\n    _setIceTransport(iceGatherer) {\n        const iceTransport = new RTCIceTransport(iceGatherer);\n\n        // NOTE: Not yet implemented by Edge.\n        iceTransport.onstatechange = () => {\n            logger.debug(\n                'iceTransport \"statechange\" event, '\n                + `state:${iceTransport.state}`);\n\n            this._emitIceConnectionStateChange();\n        };\n\n        // NOTE: Not standard, but implemented by Edge.\n        iceTransport.onicestatechange = () => {\n            logger.debug(\n                'iceTransport \"icestatechange\" event, '\n                + `state:${iceTransport.state}`);\n\n            if (iceTransport.state === 'completed') {\n                logger.debug(\n                    'nominated candidate pair:',\n                    iceTransport.getNominatedCandidatePair());\n            }\n\n            this._emitIceConnectionStateChange();\n        };\n\n        iceTransport.oncandidatepairchange = ev => {\n            logger.debug(\n                'iceTransport \"candidatepairchange\" event, '\n                + `pair:${ev.pair}`);\n        };\n\n        this._iceTransport = iceTransport;\n    }\n\n    /**\n     * Promise based implementation for setLocalDescription().\n     * @returns {Promise}\n     * @private\n     */\n    _setLocalDescription(desc) {\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        let localDescription;\n\n        try {\n            localDescription = new RTCSessionDescription(desc);\n        } catch (error) {\n            return Promise.reject(new TypeError(\n                `invalid RTCSessionDescriptionInit: ${error}`));\n        }\n\n        switch (desc.type) {\n        case 'offer': {\n            if (this.signalingState !== RTCSignalingState.stable) {\n                return Promise.reject(new InvalidStateError(\n                    `invalid signalingState \"${this.signalingState}\"`));\n            }\n\n            return Promise.resolve()\n                .then(() => {\n                    const sdpObject = localDescription.sdpObject;\n\n                    // Update local values? Needed?\n                    this._localCapabilities\n                        = utils.extractCapabilities(sdpObject);\n                    this._localDescription = localDescription;\n\n                    // Update signaling state.\n                    this._updateAndEmitSignalingStateChange(\n                        RTCSignalingState.haveLocalOffer);\n                })\n                .catch(error => {\n                    logger.error(\n                        `setLocalDescription() failed: ${error.message}`);\n                    logger.error(error);\n\n                    throw error;\n                });\n        }\n        case 'answer': {\n            if (this.signalingState !== RTCSignalingState.haveRemoteOffer) {\n                return Promise.reject(new InvalidStateError(\n                    `invalid signalingState \"${this.signalingState}\"`));\n            }\n\n            const isLocalInitialAnswer = Boolean(!this._localDescription);\n\n            return Promise.resolve()\n                .then(() => {\n                    // Different handling for initial answer and re-answer.\n                    if (isLocalInitialAnswer) {\n                        return this._handleLocalInitialAnswer(localDescription);\n                    } else { // eslint-disable-line no-else-return\n                        return this._handleLocalReAnswer(localDescription);\n                    }\n                })\n                .then(() => {\n                    logger.debug('setLocalDescription() succeed');\n\n                    // Update local description.\n                    this._localDescription = localDescription;\n\n                    // Update signaling state.\n                    this._updateAndEmitSignalingStateChange(\n                        RTCSignalingState.stable);\n\n                    // If initial answer, emit buffered ICE candidates.\n                    if (isLocalInitialAnswer) {\n                        this._emitBufferedIceCandidates();\n                    }\n\n                    // Send our RTP.\n                    this._sendMedia();\n\n                    // Receive remote RTP.\n                    this._receiveMedia();\n                })\n                .catch(error => {\n                    logger.error(\n                        `setLocalDescription() failed: ${error.message}`);\n                    logger.error(error);\n\n                    throw error;\n                });\n        }\n        default:\n            return Promise.reject(new TypeError(\n                `unsupported description.type \"${desc.type}\"`));\n        }\n    }\n\n    /**\n     * Promise based implementation for setRemoteDescription().\n     * @returns {Promise}\n     * @private\n     */\n    _setRemoteDescription(desc) {\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        let remoteDescription;\n\n        try {\n            remoteDescription = new RTCSessionDescription(desc);\n        } catch (error) {\n            return Promise.reject(new TypeError(\n                `invalid RTCSessionDescriptionInit: ${error}`));\n        }\n\n        switch (desc.type) {\n        case 'offer': {\n            if (this.signalingState !== RTCSignalingState.stable) {\n                return Promise.reject(new InvalidStateError(\n                    `invalid signalingState \"${this.signalingState}\"`));\n            }\n\n            const isRemoteInitialOffer = Boolean(!this._remoteDescription);\n\n            return Promise.resolve()\n                .then(() => {\n                    // Different handling for initial answer and re-answer.\n                    if (isRemoteInitialOffer) {\n                        return this._handleRemoteInitialOffer(\n                            remoteDescription);\n                    } else { // eslint-disable-line no-else-return\n                        return this._handleRemoteReOffer(remoteDescription);\n                    }\n                })\n                .then(() => {\n                    logger.debug('setRemoteDescription() succeed');\n\n                    this._remoteDescription = remoteDescription;\n\n                    this._updateAndEmitSignalingStateChange(\n                        RTCSignalingState.haveRemoteOffer);\n                })\n                .catch(error => {\n                    logger.error(`setRemoteDescription() failed: ${error}`);\n\n                    throw error;\n                });\n        }\n        case 'answer': {\n            if (this.signalingState !== RTCSignalingState.haveLocalOffer) {\n                return Promise.reject(new InvalidStateError(\n                    `invalid signalingState \"${this.signalingState}\"`));\n            }\n\n            return Promise.resolve()\n                .then(() => {\n                    // Update remote description.\n                    this._remoteDescription = remoteDescription;\n\n                    // Update signaling state.\n                    this._updateAndEmitSignalingStateChange(\n                        RTCSignalingState.stable);\n                })\n                .catch(error => {\n                    logger.error(`setRemoteDescription() failed: ${error}`);\n\n                    throw error;\n                });\n        }\n        default:\n            return Promise.reject(new TypeError(\n                `unsupported description.type \"${desc.type}\"`));\n        }\n    }\n\n    /**\n     * Start ICE and DTLS connection procedures.\n     * @param {RTCSessionDescription} desc - Remote description.\n     */\n    _startIceAndDtls(desc) {\n        const sdpObject = desc.sdpObject;\n        const remoteIceParameters\n            = utils.extractIceParameters(sdpObject);\n        const remoteIceCandidates\n            = utils.extractIceCandidates(sdpObject);\n        const remoteDtlsParameters\n            = utils.extractDtlsParameters(sdpObject);\n\n        // Start the RTCIceTransport.\n        switch (desc.type) {\n        case 'offer':\n            this._iceTransport.start(\n                this._iceGatherer, remoteIceParameters, 'controlled');\n            break;\n        case 'answer':\n            this._iceTransport.start(\n                this._iceGatherer, remoteIceParameters, 'controlling');\n            break;\n        }\n\n        // Add remote ICE candidates.\n        // NOTE: Remove candidates that Edge doesn't like.\n        for (const candidate of remoteIceCandidates) {\n            if (candidate.port === 0 || candidate.port === 9) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            this._iceTransport.addRemoteCandidate(candidate);\n        }\n\n        // Also signal a 'complete' candidate as per spec.\n        // NOTE: It should be {complete: true} but Edge prefers {}.\n        // NOTE: We know that addCandidate() is never used so we need to signal\n        // end of candidates (otherwise the RTCIceTransport never enters the\n        // 'completed' state).\n        this._iceTransport.addRemoteCandidate({});\n\n        // Set desired remote DTLS role (as we receive the offer).\n        switch (desc.type) {\n        case 'offer':\n            remoteDtlsParameters.role = 'server';\n            break;\n        case 'answer':\n            remoteDtlsParameters.role = 'client';\n            break;\n        }\n\n        // Start RTCDtlsTransport.\n        this._dtlsTransport.start(remoteDtlsParameters);\n    }\n\n    /**\n     * May update iceGatheringState and emit 'icegatheringstatechange' event.\n     * @private\n     */\n    _updateAndEmitIceGatheringStateChange(state) {\n        if (this._closed || state === this.iceGatheringState) {\n            return;\n        }\n\n        this._iceGatheringState = state;\n\n        logger.debug(\n            'emitting \"icegatheringstatechange\", iceGatheringState:',\n            this.iceGatheringState);\n\n        const event = new yaeti.Event('icegatheringstatechange');\n\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * May update signalingState and emit 'signalingstatechange' event.\n     * @private\n     */\n    _updateAndEmitSignalingStateChange(state) {\n        if (state === this.signalingState) {\n            return;\n        }\n\n        this._signalingState = state;\n\n        logger.debug(\n            'emitting \"signalingstatechange\", signalingState:',\n            this.signalingState);\n\n        const event = new yaeti.Event('signalingstatechange');\n\n        this.dispatchEvent(event);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/ortc/RTCPeerConnection.js","module.exports =\n{\n\tEventTarget : require('./lib/EventTarget'),\n\tEvent       : require('./lib/Event')\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/yaeti/index.js\n// module id = 107\n// module chunks = 0","function yaetiEventTarget()\n{\n\tthis._listeners = {};\n}\n\nObject.defineProperties(yaetiEventTarget.prototype,\n\t{\n\t\tlisteners:\n\t\t{\n\t\t\tget: function()\n\t\t\t{\n\t\t\t\treturn this._listeners;\n\t\t\t}\n\t\t}\n\t});\n\nyaetiEventTarget.prototype.addEventListener = function(type, newListener)\n{\n\tvar listenersType;\n\tvar i;\n\tvar listener;\n\n\tif (!type || !newListener)\n\t\treturn;\n\n\tlistenersType = this._listeners[type];\n\n\tif (listenersType === undefined)\n\t\tthis._listeners[type] = listenersType = [];\n\n\tfor (i = 0; !!(listener = listenersType[i]); i++)\n\t{\n\t\tif (listener === newListener)\n\t\t\treturn;\n\t}\n\n\tlistenersType.push(newListener);\n};\n\nyaetiEventTarget.prototype.removeEventListener = function(type, oldListener)\n{\n\tvar listenersType;\n\tvar i;\n\tvar listener;\n\n\tif (!type || !oldListener)\n\t\treturn;\n\n\tlistenersType = this._listeners[type];\n\n\tif (listenersType === undefined)\n\t\treturn;\n\n\tfor (i = 0; !!(listener = listenersType[i]); i++)\n\t{\n\t\tif (listener === oldListener)\n\t\t{\n\t\t\tlistenersType.splice(i, 1);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (listenersType.length === 0)\n\t\tdelete this._listeners[type];\n};\n\nyaetiEventTarget.prototype.dispatchEvent = function(event)\n{\n\tvar type;\n\tvar listenersType;\n\tvar dummyListener;\n\tvar stopImmediatePropagation = false;\n\tvar i;\n\tvar listener;\n\n\tif (!event || typeof event.type !== 'string')\n\t\tthrow new Error('`event` must have a valid `type` property');\n\n\t// Do some stuff to emulate DOM Event behavior (just if this is not a\n\t// DOM Event object).\n\tif (event._yaeti)\n\t{\n\t\tevent.target = this;\n\t\tevent.cancelable = true;\n\t}\n\n\t// Attempt to override the stopImmediatePropagation() method.\n\ttry\n\t{\n\t\tevent.stopImmediatePropagation = function()\n\t\t{\n\t\t\tstopImmediatePropagation = true;\n\t\t};\n\t}\n\tcatch (error)\n\t{}\n\n\ttype = event.type;\n\tlistenersType = (this._listeners[type] || []);\n\n\tdummyListener = this['on' + type];\n\n\tif (typeof dummyListener === 'function')\n\t{\n\t\ttry\n\t\t{\n\t\t\tdummyListener.call(this, event);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error(error);\n\t\t}\n\t}\n\n\tfor (i = 0; !!(listener = listenersType[i]); i++)\n\t{\n\t\tif (stopImmediatePropagation)\n\t\t\tbreak;\n\n\t\ttry\n\t\t{\n\t\t\tlistener.call(this, event);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error(error);\n\t\t}\n\t}\n\n\treturn !event.defaultPrevented;\n};\n\nmodule.exports = yaetiEventTarget;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/yaeti/lib/EventTarget.js\n// module id = 108\n// module chunks = 0","/**\n * In browsers export the native Event interface.\n */\n\nmodule.exports = global.Event;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/yaeti/lib/Event.browser.js\n// module id = 109\n// module chunks = 0","import sdpTransform from 'sdp-transform';\n\n/**\n * RTCSessionDescription implementation.\n */\nexport default class RTCSessionDescription {\n    /**\n     * RTCSessionDescription constructor.\n     * @param {Object} [data]\n     * @param {String} [data.type] - 'offer' / 'answer'.\n     * @param {String} [data.sdp] - SDP string.\n     * @param {Object} [data._sdpObject] - SDP object generated by the\n     * sdp-transform library.\n     */\n    constructor(data) {\n        // @type {String}\n        this._sdp = null;\n\n        // @type {Object}\n        this._sdpObject = null;\n\n        // @type {String}\n        this._type = null;\n\n        switch (data.type) {\n        case 'offer':\n            break;\n        case 'answer':\n            break;\n        default:\n            throw new TypeError(`invalid type \"${data.type}\"`);\n        }\n\n        this._type = data.type;\n\n        if (typeof data.sdp === 'string') {\n            this._sdp = data.sdp;\n            try {\n                this._sdpObject = sdpTransform.parse(data.sdp);\n            } catch (error) {\n                throw new Error(`invalid sdp: ${error}`);\n            }\n        } else if (typeof data._sdpObject === 'object') {\n            this._sdpObject = data._sdpObject;\n            try {\n                this._sdp = sdpTransform.write(data._sdpObject);\n            } catch (error) {\n                throw new Error(`invalid sdp object: ${error}`);\n            }\n        } else {\n            throw new TypeError('invalid sdp or _sdpObject');\n        }\n    }\n\n    /**\n     * Get sdp field.\n     * @return {String}\n     */\n    get sdp() {\n        return this._sdp;\n    }\n\n    /**\n     * Set sdp field.\n     * NOTE: This is not allowed per spec, but lib-jitsi-meet uses it.\n     * @param {String} sdp\n     */\n    set sdp(sdp) {\n        try {\n            this._sdpObject = sdpTransform.parse(sdp);\n        } catch (error) {\n            throw new Error(`invalid sdp: ${error}`);\n        }\n\n        this._sdp = sdp;\n    }\n\n    /**\n     * Gets the internal sdp object.\n     * @return {Object}\n     * @private\n     */\n    get sdpObject() {\n        return this._sdpObject;\n    }\n\n    /**\n     * Get type field.\n     * @return {String}\n     */\n    get type() {\n        return this._type;\n    }\n\n    /**\n     * Returns an object with type and sdp fields.\n     * @return {Object}\n     */\n    toJSON() {\n        return {\n            sdp: this._sdp,\n            type: this._type\n        };\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/ortc/RTCSessionDescription.js","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/\\;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/sdp-transform/lib/parser.js\n// module id = 111\n// module chunks = 0","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/sdp-transform/lib/writer.js\n// module id = 112\n// module chunks = 0","/* global RTCRtpReceiver */\n\nimport sdpTransform from 'sdp-transform';\n\n/**\n * Extract RTP capabilities from remote description.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {RTCRtpCapabilities}\n */\nexport function extractCapabilities(sdpObject) {\n    // Map of RtpCodecParameters indexed by payload type.\n    const codecsMap = new Map();\n\n    // Array of RtpHeaderExtensions.\n    const headerExtensions = [];\n\n    for (const m of sdpObject.media) {\n        // Media kind.\n        const kind = m.type;\n\n        if (kind !== 'audio' && kind !== 'video') {\n            continue; // eslint-disable-line no-continue\n        }\n\n        // Get codecs.\n        for (const rtp of m.rtp) {\n            const codec = {\n                clockRate: rtp.rate,\n                kind,\n                mimeType: `${kind}/${rtp.codec}`,\n                name: rtp.codec,\n                numChannels: rtp.encoding || 1,\n                parameters: {},\n                preferredPayloadType: rtp.payload,\n                rtcpFeedback: []\n            };\n\n            codecsMap.set(codec.preferredPayloadType, codec);\n        }\n\n        // Get codec parameters.\n        for (const fmtp of m.fmtp || []) {\n            const parameters = sdpTransform.parseFmtpConfig(fmtp.config);\n            const codec = codecsMap.get(fmtp.payload);\n\n            if (!codec) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            codec.parameters = parameters;\n        }\n\n        // Get RTCP feedback for each codec.\n        for (const fb of m.rtcpFb || []) {\n            const codec = codecsMap.get(fb.payload);\n\n            if (!codec) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            codec.rtcpFeedback.push({\n                parameter: fb.subtype || '',\n                type: fb.type\n            });\n        }\n\n        // Get RTP header extensions.\n        for (const ext of m.ext || []) {\n            const preferredId = ext.value;\n            const uri = ext.uri;\n            const headerExtension = {\n                kind,\n                uri,\n                preferredId\n            };\n\n            // Check if already present.\n            const duplicated = headerExtensions.find(savedHeaderExtension =>\n                headerExtension.kind === savedHeaderExtension.kind\n                    && headerExtension.uri === savedHeaderExtension.uri\n            );\n\n            if (!duplicated) {\n                headerExtensions.push(headerExtension);\n            }\n        }\n    }\n\n    return {\n        codecs: Array.from(codecsMap.values()),\n        fecMechanisms: [], // TODO\n        headerExtensions\n    };\n}\n\n/**\n * Extract DTLS parameters from remote description.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {RTCDtlsParameters}\n */\nexport function extractDtlsParameters(sdpObject) {\n    const media = getFirstActiveMediaSection(sdpObject);\n    const fingerprint = media.fingerprint || sdpObject.fingerprint;\n    let role;\n\n    switch (media.setup) {\n    case 'active':\n        role = 'client';\n        break;\n    case 'passive':\n        role = 'server';\n        break;\n    case 'actpass':\n        role = 'auto';\n        break;\n    }\n\n    return {\n        role,\n        fingerprints: [\n            {\n                algorithm: fingerprint.type,\n                value: fingerprint.hash\n            }\n        ]\n    };\n}\n\n/**\n * Extract ICE candidates from remote description.\n * NOTE: This implementation assumes a single BUNDLEd transport and rtcp-mux.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {sequence<RTCIceCandidate>}\n */\nexport function extractIceCandidates(sdpObject) {\n    const media = getFirstActiveMediaSection(sdpObject);\n    const candidates = [];\n\n    for (const c of media.candidates) {\n        // Ignore RTCP candidates (we assume rtcp-mux).\n        if (c.component !== 1) {\n            continue; // eslint-disable-line no-continue\n        }\n\n        const candidate = {\n            foundation: c.foundation,\n            ip: c.ip,\n            port: c.port,\n            priority: c.priority,\n            protocol: c.transport.toLowerCase(),\n            type: c.type\n        };\n\n        candidates.push(candidate);\n    }\n\n    return candidates;\n}\n\n/**\n * Extract ICE parameters from remote description.\n * NOTE: This implementation assumes a single BUNDLEd transport.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {RTCIceParameters}\n */\nexport function extractIceParameters(sdpObject) {\n    const media = getFirstActiveMediaSection(sdpObject);\n    const usernameFragment = media.iceUfrag;\n    const password = media.icePwd;\n    const icelite = sdpObject.icelite === 'ice-lite';\n\n    return {\n        icelite,\n        password,\n        usernameFragment\n    };\n}\n\n/**\n * Extract MID values from remote description.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {map<String, String>} Ordered Map with MID as key and kind as value.\n */\nexport function extractMids(sdpObject) {\n    const midToKind = new Map();\n\n    // Ignore disabled media sections.\n    for (const m of sdpObject.media) {\n        midToKind.set(m.mid, m.type);\n    }\n\n    return midToKind;\n}\n\n/**\n * Extract tracks information.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {Map}\n */\nexport function extractTrackInfos(sdpObject) {\n    // Map with info about receiving media.\n    // - index: Media SSRC\n    // - value: Object\n    //   - kind: 'audio' / 'video'\n    //   - ssrc: Media SSRC\n    //   - rtxSsrc: RTX SSRC (may be unset)\n    //   - streamId: MediaStream.jitsiRemoteId\n    //   - trackId: MediaStreamTrack.jitsiRemoteId\n    //   - cname: CNAME\n    // @type {map<Number, Object>}\n    const infos = new Map();\n\n    // Map with stream SSRC as index and associated RTX SSRC as value.\n    // @type {map<Number, Number>}\n    const rtxMap = new Map();\n\n    // Set of RTX SSRC values.\n    const rtxSet = new Set();\n\n    for (const m of sdpObject.media) {\n        const kind = m.type;\n\n        if (kind !== 'audio' && kind !== 'video') {\n            continue; // eslint-disable-line no-continue\n        }\n\n        // Get RTX information.\n        for (const ssrcGroup of m.ssrcGroups || []) {\n            // Just consider FID.\n            if (ssrcGroup.semantics !== 'FID') {\n                continue; // eslint-disable-line no-continue\n            }\n\n            const ssrcs\n                = ssrcGroup.ssrcs.split(' ').map(ssrc => Number(ssrc));\n            const ssrc = ssrcs[0];\n            const rtxSsrc = ssrcs[1];\n\n            rtxMap.set(ssrc, rtxSsrc);\n            rtxSet.add(rtxSsrc);\n        }\n\n        for (const ssrcObject of m.ssrcs || []) {\n            const ssrc = ssrcObject.id;\n\n            // Ignore RTX.\n            if (rtxSet.has(ssrc)) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            let info = infos.get(ssrc);\n\n            if (!info) {\n                info = {\n                    kind,\n                    rtxSsrc: rtxMap.get(ssrc),\n                    ssrc\n                };\n\n                infos.set(ssrc, info);\n            }\n\n            switch (ssrcObject.attribute) {\n            case 'cname': {\n                info.cname = ssrcObject.value;\n                break;\n            }\n            case 'msid': {\n                const values = ssrcObject.value.split(' ');\n                const streamId = values[0];\n                const trackId = values[1];\n\n                info.streamId = streamId;\n                info.trackId = trackId;\n                break;\n            }\n            case 'mslabel': {\n                const streamId = ssrcObject.value;\n\n                info.streamId = streamId;\n                break;\n            }\n            case 'label': {\n                const trackId = ssrcObject.value;\n\n                info.trackId = trackId;\n                break;\n            }\n            }\n        }\n    }\n\n    return infos;\n}\n\n/**\n * Get local ORTC RTP capabilities filtered and adapted to the given remote RTP\n * capabilities.\n * @param {RTCRtpCapabilities} filterWithCapabilities - RTP capabilities to\n * filter with.\n * @return {RTCRtpCapabilities}\n */\nexport function getLocalCapabilities(filterWithCapabilities) {\n    const localFullCapabilities = RTCRtpReceiver.getCapabilities();\n    const localCapabilities = {\n        codecs: [],\n        fecMechanisms: [],\n        headerExtensions: []\n    };\n\n    // Map of RTX and codec payloads.\n    // - index: Codec payloadType\n    // - value: Associated RTX payloadType\n    // @type {map<Number, Number>}\n    const remoteRtxMap = new Map();\n\n    // Set codecs.\n    for (const remoteCodec of filterWithCapabilities.codecs) {\n        const remoteCodecName = remoteCodec.name.toLowerCase();\n\n        if (remoteCodecName === 'rtx') {\n            remoteRtxMap.set(\n                remoteCodec.parameters.apt, remoteCodec.preferredPayloadType);\n\n            continue; // eslint-disable-line no-continue\n        }\n\n        const localCodec = localFullCapabilities.codecs.find(codec =>\n            codec.name.toLowerCase() === remoteCodecName\n                && codec.kind === remoteCodec.kind\n                && codec.clockRate === remoteCodec.clockRate\n        );\n\n        if (!localCodec) {\n            continue; // eslint-disable-line no-continue\n        }\n\n        const codec = {\n            clockRate: localCodec.clockRate,\n            kind: localCodec.kind,\n            mimeType: `${localCodec.kind}/${localCodec.name}`,\n            name: localCodec.name,\n            numChannels: localCodec.numChannels || 1,\n            parameters: {},\n            preferredPayloadType: remoteCodec.preferredPayloadType,\n            rtcpFeedback: []\n        };\n\n        for (const remoteParamName of Object.keys(remoteCodec.parameters)) {\n            const remoteParamValue\n                = remoteCodec.parameters[remoteParamName];\n\n            for (const localParamName of Object.keys(localCodec.parameters)) {\n                const localParamValue\n                    = localCodec.parameters[localParamName];\n\n                if (localParamName !== remoteParamName) {\n                    continue; // eslint-disable-line no-continue\n                }\n\n                // TODO: We should consider much more cases here, but Edge\n                // does not support many codec parameters.\n                if (localParamValue === remoteParamValue) {\n                    // Use this RTP parameter.\n                    codec.parameters[localParamName] = localParamValue;\n                    break;\n                }\n            }\n        }\n\n        for (const remoteFb of remoteCodec.rtcpFeedback) {\n            const localFb = localCodec.rtcpFeedback.find(fb =>\n                fb.type === remoteFb.type\n                    && fb.parameter === remoteFb.parameter\n            );\n\n            if (localFb) {\n                // Use this RTCP feedback.\n                codec.rtcpFeedback.push(localFb);\n            }\n        }\n\n        // Use this codec.\n        localCapabilities.codecs.push(codec);\n    }\n\n    // Add RTX for video codecs.\n    for (const codec of localCapabilities.codecs) {\n        const payloadType = codec.preferredPayloadType;\n\n        if (!remoteRtxMap.has(payloadType)) {\n            continue; // eslint-disable-line no-continue\n        }\n\n        const rtxCodec = {\n            clockRate: codec.clockRate,\n            kind: codec.kind,\n            mimeType: `${codec.kind}/rtx`,\n            name: 'rtx',\n            parameters: {\n                apt: payloadType\n            },\n            preferredPayloadType: remoteRtxMap.get(payloadType),\n            rtcpFeedback: []\n        };\n\n        // Add RTX codec.\n        localCapabilities.codecs.push(rtxCodec);\n    }\n\n    // Add RTP header extensions.\n    for (const remoteExtension of filterWithCapabilities.headerExtensions) {\n        const localExtension\n            = localFullCapabilities.headerExtensions.find(extension =>\n                extension.kind === remoteExtension.kind\n                    && extension.uri === remoteExtension.uri\n            );\n\n        if (localExtension) {\n            const extension = {\n                kind: localExtension.kind,\n                preferredEncrypt: Boolean(remoteExtension.preferredEncrypt),\n                preferredId: remoteExtension.preferredId,\n                uri: localExtension.uri\n            };\n\n            // Use this RTP header extension.\n            localCapabilities.headerExtensions.push(extension);\n        }\n    }\n\n    // Add FEC mechanisms.\n    // NOTE: We don't support FEC yet and, in fact, neither does Edge.\n    for (const remoteFecMechanism of filterWithCapabilities.fecMechanisms) {\n        const localFecMechanism\n            = localFullCapabilities.fecMechanisms.find(fec =>\n                fec === remoteFecMechanism\n            );\n\n        if (localFecMechanism) {\n            // Use this FEC mechanism.\n            localCapabilities.fecMechanisms.push(localFecMechanism);\n        }\n    }\n\n    return localCapabilities;\n}\n\n/**\n * Get the first acive media section.\n * @param {Object} sdpObject - SDP object generated by sdp-transform.\n * @return {Object} SDP media section as parsed by sdp-transform.\n */\nfunction getFirstActiveMediaSection(sdpObject) {\n    return sdpObject.media.find(m =>\n        m.iceUfrag && m.port !== 0\n    );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/ortc/utils.js","/**\n * Create a class inheriting from Error.\n */\nfunction createErrorClass(name) {\n    const klass = class extends Error {\n        /**\n         * Custom error class constructor.\n         * @param {string} message\n         */\n        constructor(message) {\n            super(message);\n\n            // Override `name` property value and make it non enumerable.\n            Object.defineProperty(this, 'name', { value: name });\n        }\n    };\n\n    return klass;\n}\n\nexport const InvalidStateError = createErrorClass('InvalidStateError');\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/ortc/errors.js","/* global chrome, $, alert */\n\nimport JitsiTrackError from '../../JitsiTrackError';\nimport * as JitsiTrackErrors from '../../JitsiTrackErrors';\nimport browser from '../browser';\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\nconst GlobalOnErrorHandler = require('../util/GlobalOnErrorHandler');\n\n/**\n * Indicates whether the Chrome desktop sharing extension is installed.\n * @type {boolean}\n */\nlet chromeExtInstalled = false;\n\n/**\n * Indicates whether an update of the Chrome desktop sharing extension is\n * required.\n * @type {boolean}\n */\nlet chromeExtUpdateRequired = false;\n\nlet gumFunction = null;\n\n/**\n * The error returned by chrome when trying to start inline installation from\n * popup.\n */\nconst CHROME_EXTENSION_POPUP_ERROR\n    = 'Inline installs can not be initiated from pop-up windows.';\n\n/**\n * The error returned by chrome when trying to start inline installation from\n * iframe.\n */\nconst CHROME_EXTENSION_IFRAME_ERROR\n    = 'Chrome Web Store installations can only be started by the top frame.';\n\n/**\n * The error returned by chrome when trying to start inline installation\n * not from the \"main\" whitelisted site.\n * @type {string}\n */\nconst CHROME_EXTENSION_INLINE_ERROR\n    = 'Installs can only be initiated by one of'\n        + ' the Chrome Web Store item\\'s verified sites.';\n\n/**\n * The error returned by chrome when trying to start inline installation\n * with extension that doesn't support inline installation.\n *\n * @type {string}\n */\nconst CHROME_EXTENSION_INLINE_NOT_SUPPORTED_ERROR\n    = 'Inline installation is not supported for this item. '\n        + 'The user will be redirected to the Chrome Web Store.';\n\n/**\n * The error message returned by chrome when the extension is installed.\n */\nconst CHROME_NO_EXTENSION_ERROR_MSG // eslint-disable-line no-unused-vars\n    = 'Could not establish connection. Receiving end does not exist.';\n\n/**\n * The error message returned by chrome when the extension install action needs\n * to be initiated by a user gesture.\n * @type {string}\n */\nconst CHROME_USER_GESTURE_REQ_ERROR\n    = 'Chrome Web Store installations can only be initated by a user gesture.';\n\n/**\n * The error message returned by chrome when the extension install has been\n * cancelled by the user.\n * @type {string}\n */\nconst CHROME_USER_CANCEL_EXTENSION_INSTALL = 'User cancelled install';\n\n/**\n * Handles obtaining a stream from a screen capture on different browsers.\n */\nconst ScreenObtainer = {\n    /**\n     * If not <tt>null</tt> it means that the initialization process is still in\n     * progress. It is used to make desktop stream request wait and continue\n     * after it's done.\n     * {@type Promise|null}\n     */\n    intChromeExtPromise: null,\n\n    obtainStream: null,\n\n    /**\n     * Initializes the function used to obtain a screen capture\n     * (this.obtainStream).\n     *\n     * @param {object} options\n     * @param {boolean} [options.desktopSharingChromeDisabled]\n     * @param {boolean} [options.desktopSharingChromeExtId]\n     * @param {boolean} [options.desktopSharingFirefoxDisabled]\n     * @param {Function} gum GUM method\n     */\n    init(options = {\n        desktopSharingChromeDisabled: false,\n        desktopSharingChromeExtId: null,\n        desktopSharingFirefoxDisabled: false\n    }, gum) {\n        this.options = options;\n        gumFunction = gum;\n\n        this.obtainStream = this._createObtainStreamMethod(options);\n\n        if (!this.obtainStream) {\n            logger.info('Desktop sharing disabled');\n        }\n    },\n\n    /**\n     * Returns a method which will be used to obtain the screen sharing stream\n     * (based on the browser type).\n     *\n     * @param {object} options passed from {@link init} - check description\n     * there\n     * @returns {Function}\n     * @private\n     */\n    _createObtainStreamMethod(options) {\n        if (browser.isNWJS()) {\n            return (_, onSuccess, onFailure) => {\n                window.JitsiMeetNW.obtainDesktopStream(\n                    onSuccess,\n                    (error, constraints) => {\n                        let jitsiError;\n\n                        // FIXME:\n                        // This is very very dirty fix for recognising that the\n                        // user have clicked the cancel button from the Desktop\n                        // sharing pick window. The proper solution would be to\n                        // detect this in the NWJS application by checking the\n                        // streamId === \"\". Even better solution would be to\n                        // stop calling GUM from the NWJS app and just pass the\n                        // streamId to lib-jitsi-meet. This way the desktop\n                        // sharing implementation for NWJS and chrome extension\n                        // will be the same and lib-jitsi-meet will be able to\n                        // control the constraints, check the streamId, etc.\n                        //\n                        // I cannot find documentation about \"InvalidStateError\"\n                        // but this is what we are receiving from GUM when the\n                        // streamId for the desktop sharing is \"\".\n\n                        if (error && error.name === 'InvalidStateError') {\n                            jitsiError = new JitsiTrackError(\n                                JitsiTrackErrors.CHROME_EXTENSION_USER_CANCELED\n                            );\n                        } else {\n                            jitsiError = new JitsiTrackError(\n                                error, constraints, [ 'desktop' ]);\n                        }\n                        (typeof onFailure === 'function')\n                            && onFailure(jitsiError);\n                    });\n            };\n        } else if (browser.isElectron()) {\n            return this.obtainScreenOnElectron;\n        } else if (browser.isChrome() || browser.isOpera()) {\n            if (browser.isVersionLessThan('34')) {\n                logger.info('Chrome extension not supported until ver 34');\n\n                return null;\n            } else if (browser.supportsGetDisplayMedia()\n                        && !options.desktopSharingChromeDisabled) {\n\n                return this.obtainScreenFromGetDisplayMedia;\n            } else if (options.desktopSharingChromeDisabled\n                || !options.desktopSharingChromeExtId) {\n\n                return null;\n            }\n\n            logger.info('Using Chrome extension for desktop sharing');\n            this.intChromeExtPromise\n                = initChromeExtension(options).then(() => {\n                    this.intChromeExtPromise = null;\n                });\n\n            return this.obtainScreenFromExtension;\n        } else if (browser.isFirefox()) {\n            if (options.desktopSharingFirefoxDisabled) {\n                return null;\n            } else if (window.location.protocol === 'http:') {\n                logger.log('Screen sharing is not supported over HTTP. '\n                    + 'Use of HTTPS is required.');\n\n                return null;\n            }\n\n            return this.obtainScreenOnFirefox;\n        } else if (browser.isEdge() && browser.supportsGetDisplayMedia()) {\n            return this.obtainScreenFromGetDisplayMedia;\n        }\n\n        logger.log(\n            'Screen sharing not supported by the current browser: ',\n            browser.getName());\n\n        return null;\n    },\n\n    /**\n     * Checks whether obtaining a screen capture is supported in the current\n     * environment.\n     * @returns {boolean}\n     */\n    isSupported() {\n        return this.obtainStream !== null;\n    },\n\n    /**\n     * Obtains a screen capture stream on Firefox.\n     * @param callback\n     * @param errorCallback\n     */\n    obtainScreenOnFirefox(options, callback, errorCallback) {\n        obtainWebRTCScreen(options.gumOptions, callback, errorCallback);\n    },\n\n    /**\n     * Obtains a screen capture stream on Electron.\n     *\n     * @param {Object} [options] - Screen sharing options.\n     * @param {Array<string>} [options.desktopSharingSources] - Array with the\n     * sources that have to be displayed in the desktop picker window ('screen',\n     * 'window', etc.).\n     * @param onSuccess - Success callback.\n     * @param onFailure - Failure callback.\n     */\n    obtainScreenOnElectron(options = {}, onSuccess, onFailure) {\n        if (window.JitsiMeetScreenObtainer\n            && window.JitsiMeetScreenObtainer.openDesktopPicker) {\n            const { desktopSharingSources, gumOptions } = options;\n\n            window.JitsiMeetScreenObtainer.openDesktopPicker(\n                {\n                    desktopSharingSources: desktopSharingSources\n                        || this.options.desktopSharingChromeSources\n                },\n                (streamId, streamType) =>\n                    onGetStreamResponse(\n                        {\n                            response: {\n                                streamId,\n                                streamType\n                            },\n                            gumOptions\n                        },\n                        onSuccess,\n                        onFailure\n                    ),\n                err => onFailure(new JitsiTrackError(\n                    JitsiTrackErrors.ELECTRON_DESKTOP_PICKER_ERROR,\n                    err\n                ))\n            );\n        } else {\n            onFailure(new JitsiTrackError(\n                JitsiTrackErrors.ELECTRON_DESKTOP_PICKER_NOT_FOUND));\n        }\n    },\n\n    /**\n     * Asks Chrome extension to call chooseDesktopMedia and gets chrome\n     * 'desktop' stream for returned stream token.\n     */\n    obtainScreenFromExtension(options, streamCallback, failCallback) {\n        if (this.intChromeExtPromise !== null) {\n            this.intChromeExtPromise.then(() => {\n                this.obtainScreenFromExtension(\n                    options, streamCallback, failCallback);\n            });\n\n            return;\n        }\n\n        const {\n            desktopSharingChromeExtId,\n            desktopSharingChromeSources\n        } = this.options;\n\n        const {\n            gumOptions\n        } = options;\n\n        const doGetStreamFromExtensionOptions = {\n            desktopSharingChromeExtId,\n            desktopSharingChromeSources:\n                options.desktopSharingSources || desktopSharingChromeSources,\n            gumOptions\n        };\n\n        if (chromeExtInstalled) {\n            doGetStreamFromExtension(\n                doGetStreamFromExtensionOptions,\n                streamCallback,\n                failCallback);\n        } else {\n            if (chromeExtUpdateRequired) {\n                /* eslint-disable no-alert */\n                alert(\n                    'Jitsi Desktop Streamer requires update. '\n                    + 'Changes will take effect after next Chrome restart.');\n\n                /* eslint-enable no-alert */\n            }\n\n            // for opera there is no inline install\n            // extension \"Download Chrome Extension\" allows us to open\n            // the chrome webstore and install from there and then activate our\n            // extension\n            if (browser.isOpera()) {\n                this.handleExternalInstall(options, streamCallback,\n                    failCallback);\n\n                return;\n            }\n\n            try {\n                chrome.webstore.install(\n                    getWebStoreInstallUrl(this.options),\n                    arg => {\n                        logger.log('Extension installed successfully', arg);\n                        chromeExtInstalled = true;\n\n                        // We need to give a moment to the endpoint to become\n                        // available.\n                        waitForExtensionAfterInstall(this.options, 200, 10)\n                            .then(() => {\n                                doGetStreamFromExtension(\n                                    doGetStreamFromExtensionOptions,\n                                    streamCallback,\n                                    failCallback);\n                            })\n                            .catch(() => {\n                                this.handleExtensionInstallationError(options,\n                                    streamCallback, failCallback);\n                            });\n                    },\n                    this.handleExtensionInstallationError.bind(this,\n                        options, streamCallback, failCallback)\n                );\n            } catch (e) {\n                this.handleExtensionInstallationError(options, streamCallback,\n                    failCallback, e);\n            }\n        }\n    },\n\n    /* eslint-disable max-params */\n\n    handleExternalInstall(options, streamCallback, failCallback, e) {\n        const webStoreInstallUrl = getWebStoreInstallUrl(this.options);\n\n        options.listener('waitingForExtension', webStoreInstallUrl);\n        this.checkForChromeExtensionOnInterval(options, streamCallback,\n            failCallback, e);\n    },\n\n    handleExtensionInstallationError(options, streamCallback, failCallback, e) {\n        const webStoreInstallUrl = getWebStoreInstallUrl(this.options);\n\n        if ((CHROME_EXTENSION_POPUP_ERROR === e\n             || CHROME_EXTENSION_IFRAME_ERROR === e\n             || CHROME_EXTENSION_INLINE_ERROR === e\n             || CHROME_EXTENSION_INLINE_NOT_SUPPORTED_ERROR === e)\n                && options.interval > 0\n                && typeof options.checkAgain === 'function'\n                && typeof options.listener === 'function') {\n            this.handleExternalInstall(options, streamCallback,\n                failCallback, e);\n\n            return;\n        }\n\n        const msg\n            = `Failed to install the extension from ${webStoreInstallUrl}`;\n\n        logger.log(msg, e);\n\n        let error;\n\n        if (e === CHROME_USER_CANCEL_EXTENSION_INSTALL) {\n            error = JitsiTrackErrors.CHROME_EXTENSION_USER_CANCELED;\n        } else if (e === CHROME_USER_GESTURE_REQ_ERROR) {\n            error = JitsiTrackErrors.CHROME_EXTENSION_USER_GESTURE_REQUIRED;\n        } else {\n            error = JitsiTrackErrors.CHROME_EXTENSION_INSTALLATION_ERROR;\n        }\n\n        failCallback(new JitsiTrackError(error, msg));\n    },\n\n    /* eslint-enable max-params */\n\n    checkForChromeExtensionOnInterval(options, streamCallback, failCallback) {\n        if (options.checkAgain() === false) {\n            failCallback(new JitsiTrackError(\n                JitsiTrackErrors.CHROME_EXTENSION_INSTALLATION_ERROR));\n\n            return;\n        }\n        waitForExtensionAfterInstall(this.options, options.interval, 1)\n            .then(() => {\n                chromeExtInstalled = true;\n                options.listener('extensionFound');\n                this.obtainScreenFromExtension(options,\n                    streamCallback, failCallback);\n            })\n            .catch(() => {\n                this.checkForChromeExtensionOnInterval(options,\n                    streamCallback, failCallback);\n            });\n    },\n\n    /**\n     * Obtains a screen capture stream using getDisplayMedia.\n     *\n     * @param callback - The success callback.\n     * @param errorCallback - The error callback.\n     */\n    obtainScreenFromGetDisplayMedia(options, callback, errorCallback) {\n        navigator.getDisplayMedia({ video: true })\n            .then(stream => {\n                let applyConstraintsPromise;\n\n                if (stream\n                    && stream.getTracks()\n                    && stream.getTracks().length > 0) {\n                    applyConstraintsPromise = stream.getTracks()[0]\n                        .applyConstraints(options.trackOptions);\n                } else {\n                    applyConstraintsPromise = Promise.resolve();\n                }\n\n                applyConstraintsPromise.then(() =>\n                    callback({\n                        stream,\n                        sourceId: stream.id\n                    }));\n            })\n            .catch(() =>\n                errorCallback(new JitsiTrackError(JitsiTrackErrors\n                    .CHROME_EXTENSION_USER_CANCELED)));\n    }\n};\n\n/**\n * Obtains a desktop stream using getUserMedia.\n * For this to work on Chrome, the\n * 'chrome://flags/#enable-usermedia-screen-capture' flag must be enabled.\n *\n * On firefox, the document's domain must be white-listed in the\n * 'media.getusermedia.screensharing.allowed_domains' preference in\n * 'about:config'.\n */\nfunction obtainWebRTCScreen(options, streamCallback, failCallback) {\n    gumFunction([ 'screen' ], options)\n        .then(stream => streamCallback({ stream }), failCallback);\n}\n\n/**\n * Constructs inline install URL for Chrome desktop streaming extension.\n * The 'chromeExtensionId' must be defined in options parameter.\n * @param options supports \"desktopSharingChromeExtId\"\n * @returns {string}\n */\nfunction getWebStoreInstallUrl(options) {\n    return (\n        `https://chrome.google.com/webstore/detail/${\n            options.desktopSharingChromeExtId}`);\n}\n\n/**\n * Checks whether an update of the Chrome extension is required.\n * @param minVersion minimal required version\n * @param extVersion current extension version\n * @returns {boolean}\n */\nfunction isUpdateRequired(minVersion, extVersion) {\n    try {\n        const s1 = minVersion.split('.');\n        const s2 = extVersion.split('.');\n\n        const len = Math.max(s1.length, s2.length);\n\n        for (let i = 0; i < len; i++) {\n            let n1 = 0,\n                n2 = 0;\n\n            if (i < s1.length) {\n                n1 = parseInt(s1[i], 10);\n            }\n            if (i < s2.length) {\n                n2 = parseInt(s2[i], 10);\n            }\n\n            if (isNaN(n1) || isNaN(n2)) {\n                return true;\n            } else if (n1 !== n2) {\n                return n1 > n2;\n            }\n        }\n\n        // will happen if both versions have identical numbers in\n        // their components (even if one of them is longer, has more components)\n        return false;\n    } catch (e) {\n        GlobalOnErrorHandler.callErrorHandler(e);\n        logger.error('Failed to parse extension version', e);\n\n        return true;\n    }\n}\n\n/**\n *\n * @param callback\n * @param options\n */\nfunction checkChromeExtInstalled(callback, options) {\n    if (typeof chrome === 'undefined' || !chrome || !chrome.runtime) {\n        // No API, so no extension for sure\n        callback(false, false);\n\n        return;\n    }\n    chrome.runtime.sendMessage(\n        options.desktopSharingChromeExtId,\n        { getVersion: true },\n        response => {\n            if (!response || !response.version) {\n                // Communication failure - assume that no endpoint exists\n                logger.warn(\n                    'Extension not installed?: ', chrome.runtime.lastError);\n                callback(false, false);\n\n                return;\n            }\n\n            // Check installed extension version\n            const extVersion = response.version;\n\n            logger.log(`Extension version is: ${extVersion}`);\n            const updateRequired\n                = isUpdateRequired(\n                    options.desktopSharingChromeMinExtVersion,\n                    extVersion);\n\n            callback(!updateRequired, updateRequired);\n        }\n    );\n}\n\n/**\n *\n * @param options\n * @param streamCallback\n * @param failCallback\n */\nfunction doGetStreamFromExtension(options, streamCallback, failCallback) {\n    const {\n        desktopSharingChromeSources,\n        desktopSharingChromeExtId,\n        gumOptions\n    } = options;\n\n    // Sends 'getStream' msg to the extension.\n    // Extension id must be defined in the config.\n    chrome.runtime.sendMessage(\n        desktopSharingChromeExtId,\n        {\n            getStream: true,\n            sources: desktopSharingChromeSources\n        },\n        response => {\n            if (!response) {\n                // possibly re-wraping error message to make code consistent\n                const lastError = chrome.runtime.lastError;\n\n                failCallback(lastError instanceof Error\n                    ? lastError\n                    : new JitsiTrackError(\n                        JitsiTrackErrors.CHROME_EXTENSION_GENERIC_ERROR,\n                        lastError));\n\n                return;\n            }\n            logger.log('Response from extension: ', response);\n            onGetStreamResponse(\n                {\n                    response,\n                    gumOptions\n                },\n                streamCallback,\n                failCallback\n            );\n        }\n    );\n}\n\n/**\n * Initializes <link rel=chrome-webstore-item /> with extension id set in\n * config.js to support inline installs. Host site must be selected as main\n * website of published extension.\n * @param options supports \"desktopSharingChromeExtId\"\n */\nfunction initInlineInstalls(options) {\n    if ($('link[rel=chrome-webstore-item]').length === 0) {\n        $('head').append('<link rel=\"chrome-webstore-item\">');\n    }\n    $('link[rel=chrome-webstore-item]').attr('href',\n        getWebStoreInstallUrl(options));\n}\n\n/**\n *\n * @param options\n *\n * @return {Promise} - a Promise resolved once the initialization process is\n * finished.\n */\nfunction initChromeExtension(options) {\n    // Initialize Chrome extension inline installs\n    initInlineInstalls(options);\n\n    return new Promise(resolve => {\n        // Check if extension is installed\n        checkChromeExtInstalled((installed, updateRequired) => {\n            chromeExtInstalled = installed;\n            chromeExtUpdateRequired = updateRequired;\n            logger.info(\n                `Chrome extension installed: ${\n                    chromeExtInstalled} updateRequired: ${\n                    chromeExtUpdateRequired}`);\n            resolve();\n        }, options);\n    });\n}\n\n/**\n * Checks \"retries\" times on every \"waitInterval\"ms whether the ext is alive.\n * @param {Object} options the options passed to ScreanObtainer.obtainStream\n * @param {int} waitInterval the number of ms between retries\n * @param {int} retries the number of retries\n * @returns {Promise} returns promise that will be resolved when the extension\n * is alive and rejected if the extension is not alive even after \"retries\"\n * checks\n */\nfunction waitForExtensionAfterInstall(options, waitInterval, retries) {\n    if (retries === 0) {\n        return Promise.reject();\n    }\n\n    return new Promise((resolve, reject) => {\n        let currentRetries = retries;\n        const interval = window.setInterval(() => {\n            checkChromeExtInstalled(installed => {\n                if (installed) {\n                    window.clearInterval(interval);\n                    resolve();\n                } else {\n                    currentRetries--;\n                    if (currentRetries === 0) {\n                        reject();\n                        window.clearInterval(interval);\n                    }\n                }\n            }, options);\n        }, waitInterval);\n    });\n}\n\n/**\n * Handles response from external application / extension and calls GUM to\n * receive the desktop streams or reports error.\n * @param {object} options\n * @param {object} options.response\n * @param {string} options.response.streamId - the streamId for the desktop\n * stream.\n * @param {string} options.response.error - error to be reported.\n * @param {object} options.gumOptions - options passed to GUM.\n * @param {Function} onSuccess - callback for success.\n * @param {Function} onFailure - callback for failure.\n * @param {object} gumOptions - options passed to GUM.\n */\nfunction onGetStreamResponse(\n        options = {\n            response: {},\n            gumOptions: {}\n        },\n        onSuccess,\n        onFailure) {\n    const { streamId, streamType, error } = options.response || {};\n\n    if (streamId) {\n        const gumOptions = {\n            desktopStream: streamId,\n            ...options.gumOptions\n        };\n\n        gumFunction([ 'desktop' ], gumOptions)\n            .then(stream => onSuccess({\n                stream,\n                sourceId: streamId,\n                sourceType: streamType\n            }), onFailure);\n    } else {\n        // As noted in Chrome Desktop Capture API:\n        // If user didn't select any source (i.e. canceled the prompt)\n        // then the callback is called with an empty streamId.\n        if (streamId === '') {\n            onFailure(new JitsiTrackError(\n                JitsiTrackErrors.CHROME_EXTENSION_USER_CANCELED));\n\n            return;\n        }\n\n        onFailure(new JitsiTrackError(\n            JitsiTrackErrors.CHROME_EXTENSION_GENERIC_ERROR,\n            error));\n    }\n}\n\nexport default ScreenObtainer;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/ScreenObtainer.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\nvar adapterFactory = require('./adapter_factory.js');\nmodule.exports = adapterFactory({window: global.window});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webrtc-adapter/src/js/adapter_core.js\n// module id = 116\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\nvar utils = require('./utils');\n// Shimming starts here.\nmodule.exports = function(dependencies, opts) {\n  var window = dependencies && dependencies.window;\n\n  var options = {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true,\n  };\n\n  for (var key in opts) {\n    if (hasOwnProperty.call(opts, key)) {\n      options[key] = opts[key];\n    }\n  }\n\n  // Utils.\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n\n  // Export to the adapter global object visible in the browser.\n  var adapter = {\n    browserDetails: browserDetails,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n  var commonShim = require('./common_shim') || null;\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimSourceObject(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n      commonShim.shimCreateObjectURL(window);\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimSourceObject(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n      commonShim.shimCreateObjectURL(window);\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n      safariShim.shimCreateOfferLegacy(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webrtc-adapter/src/js/adapter_factory.js\n// module id = 117\n// module chunks = 0","\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\nvar chromeShim = {\n  shimMediaStream: function(window) {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  },\n\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n          }\n          this.addEventListener('track', this._ontrack = f);\n        }\n      });\n      var origSetRemoteDescription =\n          window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n        var pc = this;\n        if (!pc._ontrackpoly) {\n          pc._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track && r.track.id === te.track.id;\n                });\n              } else {\n                receiver = {track: te.track};\n              }\n\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver: receiver};\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track && r.track.id === track.id;\n                });\n              } else {\n                receiver = {track: track};\n              }\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver: receiver};\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n          };\n          pc.addEventListener('addstream', pc._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n    }\n  },\n\n  shimGetSendersWithDtmf: function(window) {\n    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('getSenders' in window.RTCPeerConnection.prototype) &&\n        'createDTMFSender' in window.RTCPeerConnection.prototype) {\n      var shimSenderWithDtmf = function(pc, track) {\n        return {\n          track: track,\n          get dtmf() {\n            if (this._dtmf === undefined) {\n              if (track.kind === 'audio') {\n                this._dtmf = pc.createDTMFSender(track);\n              } else {\n                this._dtmf = null;\n              }\n            }\n            return this._dtmf;\n          },\n          _pc: pc\n        };\n      };\n\n      // augment addTrack when getSenders is not available.\n      if (!window.RTCPeerConnection.prototype.getSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function() {\n          this._senders = this._senders || [];\n          return this._senders.slice(); // return a copy of the internal state.\n        };\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n          var pc = this;\n          var sender = origAddTrack.apply(pc, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(pc, track);\n            pc._senders.push(sender);\n          }\n          return sender;\n        };\n\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n          var pc = this;\n          origRemoveTrack.apply(pc, arguments);\n          var idx = pc._senders.indexOf(sender);\n          if (idx !== -1) {\n            pc._senders.splice(idx, 1);\n          }\n        };\n      }\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origAddStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          pc._senders.push(shimSenderWithDtmf(pc, track));\n        });\n      };\n\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origRemoveStream.apply(pc, [stream]);\n\n        stream.getTracks().forEach(function(track) {\n          var sender = pc._senders.find(function(s) {\n            return s.track === track;\n          });\n          if (sender) {\n            pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n          }\n        });\n      };\n    } else if (typeof window === 'object' && window.RTCPeerConnection &&\n               'getSenders' in window.RTCPeerConnection.prototype &&\n               'createDTMFSender' in window.RTCPeerConnection.prototype &&\n               window.RTCRtpSender &&\n               !('dtmf' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        var pc = this;\n        var senders = origGetSenders.apply(pc, []);\n        senders.forEach(function(sender) {\n          sender._pc = pc;\n        });\n        return senders;\n      };\n\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = this._pc.createDTMFSender(this.track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    var URL = window && window.URL;\n\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return undefined;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimAddTrackRemoveTrack: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n    // shim addTrack and removeTrack.\n    if (window.RTCPeerConnection.prototype.addTrack &&\n        browserDetails.version >= 63) {\n      return;\n    }\n\n    // also shim pc.getLocalStreams when addTrack is shimmed\n    // to return the original streams.\n    var origGetLocalStreams = window.RTCPeerConnection.prototype\n        .getLocalStreams;\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n      var self = this;\n      var nativeStreams = origGetLocalStreams.apply(this);\n      self._reverseStreams = self._reverseStreams || {};\n      return nativeStreams.map(function(stream) {\n        return self._reverseStreams[stream.id];\n      });\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      stream.getTracks().forEach(function(track) {\n        var alreadyExists = pc.getSenders().find(function(s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.',\n              'InvalidAccessError');\n        }\n      });\n      // Add identity mapping for consistency with addTrack.\n      // Unless this is being used with a stream from addTrack.\n      if (!pc._reverseStreams[stream.id]) {\n        var newStream = new window.MediaStream(stream.getTracks());\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        stream = newStream;\n      }\n      origAddStream.apply(pc, [stream]);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n      delete pc._reverseStreams[(pc._streams[stream.id] ?\n          pc._streams[stream.id].id : stream.id)];\n      delete pc._streams[stream.id];\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      var streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(function(t) {\n            return t === track;\n          })) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      var alreadyExists = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n      var oldStream = pc._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(function() {\n          pc.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        var newStream = new window.MediaStream([track]);\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        pc.addStream(newStream);\n      }\n      return pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n    };\n\n    // replace the internal stream id with the external one and\n    // vice versa.\n    function replaceInternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n            externalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    function replaceExternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n            internalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    ['createOffer', 'createAnswer'].forEach(function(method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      window.RTCPeerConnection.prototype[method] = function() {\n        var pc = this;\n        var args = arguments;\n        var isLegacyCall = arguments.length &&\n            typeof arguments[0] === 'function';\n        if (isLegacyCall) {\n          return nativeMethod.apply(pc, [\n            function(description) {\n              var desc = replaceInternalStreamId(pc, description);\n              args[0].apply(null, [desc]);\n            },\n            function(err) {\n              if (args[1]) {\n                args[1].apply(null, err);\n              }\n            }, arguments[2]\n          ]);\n        }\n        return nativeMethod.apply(pc, arguments)\n        .then(function(description) {\n          return replaceInternalStreamId(pc, description);\n        });\n      };\n    });\n\n    var origSetLocalDescription =\n        window.RTCPeerConnection.prototype.setLocalDescription;\n    window.RTCPeerConnection.prototype.setLocalDescription = function() {\n      var pc = this;\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(pc, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(pc, arguments[0]);\n      return origSetLocalDescription.apply(pc, arguments);\n    };\n\n    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n    var origLocalDescription = Object.getOwnPropertyDescriptor(\n        window.RTCPeerConnection.prototype, 'localDescription');\n    Object.defineProperty(window.RTCPeerConnection.prototype,\n        'localDescription', {\n          get: function() {\n            var pc = this;\n            var description = origLocalDescription.get.apply(this);\n            if (description.type === '') {\n              return description;\n            }\n            return replaceInternalStreamId(pc, description);\n          }\n        });\n\n    window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      var isLocal = sender._pc === pc;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      pc._streams = pc._streams || {};\n      var stream;\n      Object.keys(pc._streams).forEach(function(streamid) {\n        var hasTrack = pc._streams[streamid].getTracks().find(function(track) {\n          return sender.track === track;\n        });\n        if (hasTrack) {\n          stream = pc._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          pc.removeStream(pc._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        pc.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        // Translate iceTransportPolicy to iceTransports,\n        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n        logging('PeerConnection');\n        if (pcConfig && pcConfig.iceTransportPolicy) {\n          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n        }\n\n        return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.webkitRTCPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      if (window.webkitRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.webkitRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n    } else {\n      // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n      var OrigPeerConnection = window.RTCPeerConnection;\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (pcConfig && pcConfig.iceServers) {\n          var newIceServers = [];\n          for (var i = 0; i < pcConfig.iceServers.length; i++) {\n            var server = pcConfig.iceServers[i];\n            if (!server.hasOwnProperty('urls') &&\n                server.hasOwnProperty('url')) {\n              utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n              server = JSON.parse(JSON.stringify(server));\n              server.urls = server.url;\n              newIceServers.push(server);\n            } else {\n              newIceServers.push(pcConfig.iceServers[i]);\n            }\n          }\n          pcConfig.iceServers = newIceServers;\n        }\n        return new OrigPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(selector,\n        successCallback, errorCallback) {\n      var self = this;\n      var args = arguments;\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 ||\n          typeof arguments[0] !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function(report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function(name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function(stats) {\n        return new Map(Object.keys(stats).map(function(key) {\n          return [key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function(response) {\n          args[1](makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_,\n          arguments[0]]);\n      }\n\n      // promise-support\n      return new Promise(function(resolve, reject) {\n        origGetStats.apply(self, [\n          function(response) {\n            resolve(makeMapStats(fixChromeStats_(response)));\n          }, reject]);\n      }).then(successCallback, errorCallback);\n    };\n\n    // add promise support -- natively available in Chrome 51\n    if (browserDetails.version < 51) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = window.RTCPeerConnection.prototype[method];\n            window.RTCPeerConnection.prototype[method] = function() {\n              var args = arguments;\n              var self = this;\n              var promise = new Promise(function(resolve, reject) {\n                nativeMethod.apply(self, [args[0], resolve, reject]);\n              });\n              if (args.length < 2) {\n                return promise;\n              }\n              return promise.then(function() {\n                args[1].apply(null, []);\n              },\n              function(err) {\n                if (args.length >= 3) {\n                  args[2].apply(null, [err]);\n                }\n              });\n            };\n          });\n    }\n\n    // promise support for createOffer and createAnswer. Available (without\n    // bugs) since M52: crbug/619289\n    if (browserDetails.version < 52) {\n      ['createOffer', 'createAnswer'].forEach(function(method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          var self = this;\n          if (arguments.length < 1 || (arguments.length === 1 &&\n              typeof arguments[0] === 'object')) {\n            var opts = arguments.length === 1 ? arguments[0] : undefined;\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(self, [resolve, reject, opts]);\n            });\n          }\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n};\n\n\n// Expose public methods.\nmodule.exports = {\n  shimMediaStream: chromeShim.shimMediaStream,\n  shimOnTrack: chromeShim.shimOnTrack,\n  shimAddTrackRemoveTrack: chromeShim.shimAddTrackRemoveTrack,\n  shimGetSendersWithDtmf: chromeShim.shimGetSendersWithDtmf,\n  shimSourceObject: chromeShim.shimSourceObject,\n  shimPeerConnection: chromeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js\n// module id = 118\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      var remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      var getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(function(devices) {\n            devices = devices.filter(function(d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function(d) {\n              return matches.some(function(match) {\n                return d.label.toLowerCase().indexOf(match) !== -1;\n              });\n            });\n            if (!dev && devices.length && matches.indexOf('back') !== -1) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        InvalidStateError: 'NotReadableError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotReadableError',\n        MediaDeviceKillSwitchOn: 'NotReadableError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraintName,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function(c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return window.MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                kind: kinds[device.kind],\n                deviceId: device.id,\n                groupId: ''};\n            }));\n          });\n        });\n      },\n      getSupportedConstraints: function() {\n        return {\n          deviceId: true, echoCancellation: true, facingMode: true,\n          frameRate: true, height: true, width: true\n        };\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, function(c) {\n        return origGetUserMedia(c).then(function(stream) {\n          if (c.audio && !stream.getAudioTracks().length ||\n              c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function(track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function(e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js\n// module id = 119\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar shimRTCPeerConnection = require('rtcpeerconnection-shim');\n\nmodule.exports = {\n  shimGetUserMedia: require('./getusermedia'),\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (window.RTCIceGatherer) {\n      // ORTC defines an RTCIceCandidate object but no constructor.\n      // Not implemented in Edge.\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      // ORTC does not have a session description object but\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\n      // in the future might have this defined already.\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n      // this adds an additional event listener to MediaStrackTrack that signals\n      // when a tracks enabled property was changed. Workaround for a bug in\n      // addStream, see below. No longer required in 15025+\n      if (browserDetails.version < 15025) {\n        var origMSTEnabled = Object.getOwnPropertyDescriptor(\n            window.MediaStreamTrack.prototype, 'enabled');\n        Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n          set: function(value) {\n            origMSTEnabled.set.call(this, value);\n            var ev = new Event('enabled');\n            ev.enabled = value;\n            this.dispatchEvent(ev);\n          }\n        });\n      }\n    }\n\n    // ORTC defines the DTMF sender a bit different.\n    // https://github.com/w3c/ortc/issues/714\n    if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = new window.RTCDtmfSender(this);\n            } else if (this.track.kind === 'video') {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n\n    window.RTCPeerConnection =\n        shimRTCPeerConnection(window, browserDetails.version);\n  },\n  shimReplaceTrack: function(window) {\n    // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n    if (window.RTCRtpSender &&\n        !('replaceTrack' in window.RTCRtpSender.prototype)) {\n      window.RTCRtpSender.prototype.replaceTrack =\n          window.RTCRtpSender.prototype.setTrack;\n    }\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webrtc-adapter/src/js/edge/edge_shim.js\n// module id = 120\n// module chunks = 0","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all field are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // dpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      states[transceiver.iceTransport.state]++;\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      states[transceiver.iceTransport.state]++;\n      states[transceiver.dtlsTransport.state]++;\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js\n// module id = 121\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var navigator = window && window.navigator;\n\n  var shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(function(e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webrtc-adapter/src/js/edge/getusermedia.js\n// module id = 122\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\n\nvar firefoxShim = {\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.transceiver = {receiver: event.receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n    if (typeof window === 'object' && window.RTCTrackEvent &&\n        ('receiver' in window.RTCTrackEvent.prototype) &&\n        !('transceiver' in window.RTCTrackEvent.prototype)) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function() {\n          return {receiver: this.receiver};\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n        window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (window.mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = window.mozRTCSessionDescription;\n      window.RTCIceCandidate = window.mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function(stats) {\n      var map = new Map();\n      Object.keys(stats).forEach(function(key) {\n        map.set(key, stats[key]);\n        map[key] = stats[key];\n      });\n      return map;\n    };\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(\n      selector,\n      onSucc,\n      onErr\n    ) {\n      return nativeGetStats.apply(this, [selector || null])\n        .then(function(stats) {\n          if (browserDetails.version < 48) {\n            stats = makeMapStats(stats);\n          }\n          if (browserDetails.version < 53 && !onSucc) {\n            // Shim only promise getStats with spec-hyphens in type names\n            // Leave callback version alone; misc old uses of forEach before Map\n            try {\n              stats.forEach(function(stat) {\n                stat.type = modernStatsTypes[stat.type] || stat.type;\n              });\n            } catch (e) {\n              if (e.name !== 'TypeError') {\n                throw e;\n              }\n              // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n              stats.forEach(function(stat, i) {\n                stats.set(i, Object.assign({}, stat, {\n                  type: modernStatsTypes[stat.type] || stat.type\n                }));\n              });\n            }\n          }\n          return stats;\n        })\n        .then(onSucc, onErr);\n    };\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: firefoxShim.shimOnTrack,\n  shimSourceObject: firefoxShim.shimSourceObject,\n  shimPeerConnection: firefoxShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js\n// module id = 123\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        InternalError: 'NotReadableError',\n        NotSupportedError: 'TypeError',\n        PermissionDeniedError: 'NotAllowedError',\n        SecurityError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: {\n        'The operation is insecure.': 'The request is not allowed by the ' +\n        'user agent or the platform in the current context.'\n      }[e.message] || e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n      onError(shimError_(e));\n    });\n  };\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      getUserMedia_(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n  if (browserDetails.version < 49) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      return origGetUserMedia(c).then(function(stream) {\n        // Work around https://bugzil.la/802326\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(function(track) {\n            track.stop();\n          });\n          throw new DOMException('The object can not be found here.',\n                                 'NotFoundError');\n        }\n        return stream;\n      }, function(e) {\n        return Promise.reject(shimError_(e));\n      });\n    };\n  }\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    if (browserDetails.version < 44) {\n      return getUserMedia_(constraints, onSuccess, onError);\n    }\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js\n// module id = 124\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar utils = require('../utils');\n\nvar safariShim = {\n  // TODO: DrAlex, should be here, double check against LayoutTests\n\n  // TODO: once the back-end for the mac port is done, add.\n  // TODO: check for webkitGTK+\n  // shimPeerConnection: function() { },\n\n  shimLocalStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getLocalStreams = function() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n    }\n    if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getStreamById = function(id) {\n        var result = null;\n        if (this._localStreams) {\n          this._localStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        if (this._remoteStreams) {\n          this._remoteStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        return result;\n      };\n    }\n    if (!('addStream' in window.RTCPeerConnection.prototype)) {\n      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        if (this._localStreams.indexOf(stream) === -1) {\n          this._localStreams.push(stream);\n        }\n        var self = this;\n        stream.getTracks().forEach(function(track) {\n          _addTrack.call(self, track, stream);\n        });\n      };\n\n      window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n        if (stream) {\n          if (!this._localStreams) {\n            this._localStreams = [stream];\n          } else if (this._localStreams.indexOf(stream) === -1) {\n            this._localStreams.push(stream);\n          }\n        }\n        _addTrack.call(this, track, stream);\n      };\n    }\n    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        var index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        var self = this;\n        var tracks = stream.getTracks();\n        this.getSenders().forEach(function(sender) {\n          if (tracks.indexOf(sender.track) !== -1) {\n            self.removeTrack(sender);\n          }\n        });\n      };\n    }\n  },\n  shimRemoteStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n    }\n    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n        get: function() {\n          return this._onaddstream;\n        },\n        set: function(f) {\n          if (this._onaddstream) {\n            this.removeEventListener('addstream', this._onaddstream);\n            this.removeEventListener('track', this._onaddstreampoly);\n          }\n          this.addEventListener('addstream', this._onaddstream = f);\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            var stream = e.streams[0];\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = e.streams[0];\n            this.dispatchEvent(event);\n          }.bind(this));\n        }\n      });\n    }\n  },\n  shimCallbacksAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    var prototype = window.RTCPeerConnection.prototype;\n    var createOffer = prototype.createOffer;\n    var createAnswer = prototype.createAnswer;\n    var setLocalDescription = prototype.setLocalDescription;\n    var setRemoteDescription = prototype.setRemoteDescription;\n    var addIceCandidate = prototype.addIceCandidate;\n\n    prototype.createOffer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    prototype.createAnswer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    var withCallback = function(description, successCallback, failureCallback) {\n      var promise = setLocalDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setLocalDescription = withCallback;\n\n    withCallback = function(description, successCallback, failureCallback) {\n      var promise = setRemoteDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setRemoteDescription = withCallback;\n\n    withCallback = function(candidate, successCallback, failureCallback) {\n      var promise = addIceCandidate.apply(this, [candidate]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.addIceCandidate = withCallback;\n  },\n  shimGetUserMedia: function(window) {\n    var navigator = window && window.navigator;\n\n    if (!navigator.getUserMedia) {\n      if (navigator.webkitGetUserMedia) {\n        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n      } else if (navigator.mediaDevices &&\n          navigator.mediaDevices.getUserMedia) {\n        navigator.getUserMedia = function(constraints, cb, errcb) {\n          navigator.mediaDevices.getUserMedia(constraints)\n          .then(cb, errcb);\n        }.bind(navigator);\n      }\n    }\n  },\n  shimRTCIceServerUrls: function(window) {\n    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n    var OrigPeerConnection = window.RTCPeerConnection;\n    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        var newIceServers = [];\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n          var server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n    // wrap static methods. Currently just generateCertificate.\n    if ('generateCertificate' in window.RTCPeerConnection) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n  },\n  shimTrackEventTransceiver: function(window) {\n    // Add event.transceiver member over deprecated event.receiver\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        ('receiver' in window.RTCTrackEvent.prototype) &&\n        // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n        // defined for some reason even when window.RTCTransceiver is not.\n        !window.RTCTransceiver) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function() {\n          return {receiver: this.receiver};\n        }\n      });\n    }\n  },\n\n  shimCreateOfferLegacy: function(window) {\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n    window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\n      var pc = this;\n      if (offerOptions) {\n        var audioTransceiver = pc.getTransceivers().find(function(transceiver) {\n          return transceiver.sender.track &&\n              transceiver.sender.track.kind === 'audio';\n        });\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            audioTransceiver.setDirection('sendonly');\n          } else if (audioTransceiver.direction === 'recvonly') {\n            audioTransceiver.setDirection('inactive');\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          pc.addTransceiver('audio');\n        }\n\n        var videoTransceiver = pc.getTransceivers().find(function(transceiver) {\n          return transceiver.sender.track &&\n              transceiver.sender.track.kind === 'video';\n        });\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            videoTransceiver.setDirection('sendonly');\n          } else if (videoTransceiver.direction === 'recvonly') {\n            videoTransceiver.setDirection('inactive');\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          pc.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(pc, arguments);\n    };\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimCallbacksAPI: safariShim.shimCallbacksAPI,\n  shimLocalStreamsAPI: safariShim.shimLocalStreamsAPI,\n  shimRemoteStreamsAPI: safariShim.shimRemoteStreamsAPI,\n  shimGetUserMedia: safariShim.shimGetUserMedia,\n  shimRTCIceServerUrls: safariShim.shimRTCIceServerUrls,\n  shimTrackEventTransceiver: safariShim.shimTrackEventTransceiver,\n  shimCreateOfferLegacy: safariShim.shimCreateOfferLegacy\n  // TODO\n  // shimPeerConnection: safariShim.shimPeerConnection\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webrtc-adapter/src/js/safari/safari_shim.js\n// module id = 125\n// module chunks = 0","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\nvar utils = require('./utils');\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object.\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var proto = window.RTCPeerConnection.prototype;\n  var nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    var wrappedCallback = function(e) {\n      cb(wrapper(e));\n    };\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  var nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    var unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get: function() {\n      return this['_on' + eventNameToWrap];\n    },\n    set: function(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    }\n  });\n}\n\nmodule.exports = {\n  shimRTCIceCandidate: function(window) {\n    // foundation is arbitrarily chosen as an indicator for full support for\n    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n    if (window.RTCIceCandidate && 'foundation' in\n        window.RTCIceCandidate.prototype) {\n      return;\n    }\n\n    var NativeRTCIceCandidate = window.RTCIceCandidate;\n    window.RTCIceCandidate = function(args) {\n      // Remove the a= which shouldn't be part of the candidate string.\n      if (typeof args === 'object' && args.candidate &&\n          args.candidate.indexOf('a=') === 0) {\n        args = JSON.parse(JSON.stringify(args));\n        args.candidate = args.candidate.substr(2);\n      }\n\n      // Augment the native candidate with the parsed fields.\n      var nativeCandidate = new NativeRTCIceCandidate(args);\n      var parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      var augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    };\n\n    // Hook up the augmented candidate in onicecandidate and\n    // addEventListener('icecandidate', ...)\n    wrapPeerConnectionEvent(window, 'icecandidate', function(e) {\n      if (e.candidate) {\n        Object.defineProperty(e, 'candidate', {\n          value: new window.RTCIceCandidate(e.candidate),\n          writable: 'false'\n        });\n      }\n      return e;\n    });\n  },\n\n  // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n  shimCreateObjectURL: function(window) {\n    var URL = window && window.URL;\n\n    if (!(typeof window === 'object' && window.HTMLMediaElement &&\n          'srcObject' in window.HTMLMediaElement.prototype &&\n        URL.createObjectURL && URL.revokeObjectURL)) {\n      // Only shim CreateObjectURL using srcObject if srcObject exists.\n      return undefined;\n    }\n\n    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n    var streams = new Map(), newId = 0;\n\n    URL.createObjectURL = function(stream) {\n      if ('getTracks' in stream) {\n        var url = 'polyblob:' + (++newId);\n        streams.set(url, stream);\n        utils.deprecated('URL.createObjectURL(stream)',\n            'elem.srcObject = stream');\n        return url;\n      }\n      return nativeCreateObjectURL(stream);\n    };\n    URL.revokeObjectURL = function(url) {\n      nativeRevokeObjectURL(url);\n      streams.delete(url);\n    };\n\n    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                                              'src');\n    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n      get: function() {\n        return dsc.get.apply(this);\n      },\n      set: function(url) {\n        this.srcObject = streams.get(url) || null;\n        return dsc.set.apply(this, [url]);\n      }\n    });\n\n    var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n    window.HTMLMediaElement.prototype.setAttribute = function() {\n      if (arguments.length === 2 &&\n          ('' + arguments[0]).toLowerCase() === 'src') {\n        this.srcObject = streams.get(arguments[1]) || null;\n      }\n      return nativeSetAttribute.apply(this, arguments);\n    };\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webrtc-adapter/src/js/common_shim.js\n// module id = 126\n// module chunks = 0","\n\n/**\n * The method will increase the given number by 1. If the given counter is equal\n * or greater to {@link Number.MAX_SAFE_INTEGER} then it will be rolled back to\n * 1.\n * @param {number} number - An integer counter value to be incremented.\n * @return {number} the next counter value increased by 1 (see the description\n * above for exception).\n */\nexport function safeCounterIncrement(number) {\n    let nextValue = number;\n\n    if (number >= Number.MAX_SAFE_INTEGER) {\n        nextValue = 0;\n    }\n\n    return nextValue + 1;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/MathUtil.js","/* global __filename, RTCSessionDescription */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport transform from 'sdp-transform';\n\nimport * as GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\nimport JitsiRemoteTrack from './JitsiRemoteTrack';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport LocalSdpMunger from './LocalSdpMunger';\nimport RTC from './RTC';\nimport RTCUtils from './RTCUtils';\nimport browser from '../browser';\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport RtxModifier from '../xmpp/RtxModifier';\n\n// FIXME SDP tools should end up in some kind of util module\nimport SDP from '../xmpp/SDP';\nimport SdpConsistency from '../xmpp/SdpConsistency';\nimport { SdpTransformWrap } from '../xmpp/SdpTransformUtil';\nimport SDPUtil from '../xmpp/SDPUtil';\nimport * as SignalingEvents from '../../service/RTC/SignalingEvents';\n\nconst logger = getLogger(__filename);\nconst SIMULCAST_LAYERS = 3;\nconst SIM_LAYER_1_RID = '1';\nconst SIM_LAYER_2_RID = '2';\nconst SIM_LAYER_3_RID = '3';\nconst SIM_LAYER_RIDS = [ SIM_LAYER_1_RID, SIM_LAYER_2_RID, SIM_LAYER_3_RID ];\n\n/* eslint-disable max-params */\n\n/**\n * Creates new instance of 'TraceablePeerConnection'.\n *\n * @param {RTC} rtc the instance of <tt>RTC</tt> service\n * @param {number} id the peer connection id assigned by the parent RTC module.\n * @param {SignalingLayer} signalingLayer the signaling layer instance\n * @param {object} iceConfig WebRTC 'PeerConnection' ICE config\n * @param {object} constraints WebRTC 'PeerConnection' constraints\n * @param {boolean} isP2P indicates whether or not the new instance will be used\n * in a peer to peer connection\n * @param {object} options <tt>TracablePeerConnection</tt> config options.\n * @param {boolean} options.disableSimulcast if set to 'true' will disable\n * the simulcast.\n * @param {boolean} options.disableRtx if set to 'true' will disable the RTX\n * @param {boolean} options.enableFirefoxSimulcast if set to 'true' will enable\n * experimental simulcast support on Firefox.\n * @param {boolean} options.disableH264 If set to 'true' H264 will be\n *      disabled by removing it from the SDP.\n * @param {boolean} options.preferH264 if set to 'true' H264 will be preferred\n * over other video codecs.\n * @param {boolean} options.enableLayerSuspension if set to 'true', we will\n * cap the video send bitrate when we are told we have not been selected by\n * any endpoints (and therefore the non-thumbnail streams are not in use).\n *\n * FIXME: initially the purpose of TraceablePeerConnection was to be able to\n * debug the peer connection. Since many other responsibilities have been added\n * it would make sense to extract a separate class from it and come up with\n * a more suitable name.\n *\n * @constructor\n */\nexport default function TraceablePeerConnection(\n        rtc,\n        id,\n        signalingLayer,\n        iceConfig,\n        constraints,\n        isP2P,\n        options) {\n\n    /**\n     * Indicates whether or not this peer connection instance is actively\n     * sending/receiving audio media. When set to <tt>false</tt> the SDP audio\n     * media direction will be adjusted to 'inactive' in order to suspend\n     * the transmission.\n     * @type {boolean}\n     * @private\n     */\n    this.audioTransferActive = true;\n\n    /**\n     * Indicates whether or not this peer connection instance is actively\n     * sending/receiving video media. When set to <tt>false</tt> the SDP video\n     * media direction will be adjusted to 'inactive' in order to suspend\n     * the transmission.\n     * @type {boolean}\n     * @private\n     */\n    this.videoTransferActive = true;\n\n    /**\n     * The parent instance of RTC service which created this\n     * <tt>TracablePeerConnection</tt>.\n     * @type {RTC}\n     */\n    this.rtc = rtc;\n\n    /**\n     * The peer connection identifier assigned by the RTC module.\n     * @type {number}\n     */\n    this.id = id;\n\n    /**\n     * Indicates whether or not this instance is used in a peer to peer\n     * connection.\n     * @type {boolean}\n     */\n    this.isP2P = isP2P;\n\n    // FIXME: We should support multiple streams per jid.\n    /**\n     * The map holds remote tracks associated with this peer connection.\n     * It maps user's JID to media type and remote track\n     * (one track per media type per user's JID).\n     * @type {Map<string, Map<MediaType, JitsiRemoteTrack>>}\n     */\n    this.remoteTracks = new Map();\n\n    /**\n     * A map which stores local tracks mapped by {@link JitsiLocalTrack.rtcId}\n     * @type {Map<number, JitsiLocalTrack>}\n     */\n    this.localTracks = new Map();\n\n    /**\n     * Keeps tracks of the WebRTC <tt>MediaStream</tt>s that have been added to\n     * the underlying WebRTC PeerConnection.\n     * @type {Array}\n     * @private\n     */\n    this._addedStreams = [];\n\n    /**\n     * @typedef {Object} TPCGroupInfo\n     * @property {string} semantics the SSRC groups semantics\n     * @property {Array<number>} ssrcs group's SSRCs in order where the first\n     * one is group's primary SSRC, the second one is secondary (RTX) and so\n     * on...\n     */\n    /**\n     * @typedef {Object} TPCSSRCInfo\n     * @property {Array<number>} ssrcs an array which holds all track's SSRCs\n     * @property {Array<TPCGroupInfo>} groups an array stores all track's SSRC\n     * groups\n     */\n    /**\n     * Holds the info about local track's SSRCs mapped per their\n     * {@link JitsiLocalTrack.rtcId}\n     * @type {Map<number, TPCSSRCInfo>}\n     */\n    this.localSSRCs = new Map();\n\n    /**\n     * The local ICE username fragment for this session.\n     */\n    this.localUfrag = null;\n\n    /**\n     * The remote ICE username fragment for this session.\n     */\n    this.remoteUfrag = null;\n\n    /**\n     * The signaling layer which operates this peer connection.\n     * @type {SignalingLayer}\n     */\n    this.signalingLayer = signalingLayer;\n\n    // SignalingLayer listeners\n    this._peerVideoTypeChanged = this._peerVideoTypeChanged.bind(this);\n    this.signalingLayer.on(\n        SignalingEvents.PEER_VIDEO_TYPE_CHANGED,\n        this._peerVideoTypeChanged);\n\n    this._peerMutedChanged = this._peerMutedChanged.bind(this);\n    this.signalingLayer.on(\n        SignalingEvents.PEER_MUTED_CHANGED,\n        this._peerMutedChanged);\n    this.options = options;\n\n    this.peerconnection\n        = new RTCUtils.RTCPeerConnectionType(iceConfig, constraints);\n    this.updateLog = [];\n    this.stats = {};\n    this.statsinterval = null;\n\n    /**\n     * @type {number} The max number of stats to keep in this.stats. Limit to\n     * 300 values, i.e. 5 minutes; set to 0 to disable\n     */\n    this.maxstats = options.maxstats;\n    const Interop = require('@jitsi/sdp-interop').Interop;\n\n    this.interop = new Interop();\n    const Simulcast = require('@jitsi/sdp-simulcast');\n\n    this.simulcast = new Simulcast({ numOfLayers: SIMULCAST_LAYERS,\n        explodeRemoteSimulcast: false });\n    this.sdpConsistency = new SdpConsistency(this.toString());\n\n    /**\n     * Munges local SDP provided to the Jingle Session in order to prevent from\n     * sending SSRC updates on attach/detach and mute/unmute (for video).\n     * @type {LocalSdpMunger}\n     */\n    this.localSdpMunger = new LocalSdpMunger(this);\n\n    /**\n     * TracablePeerConnection uses RTC's eventEmitter\n     * @type {EventEmitter}\n     */\n    this.eventEmitter = rtc.eventEmitter;\n    this.rtxModifier = new RtxModifier();\n\n    // override as desired\n    this.trace = (what, info) => {\n        logger.debug(what, info);\n\n        this.updateLog.push({\n            time: new Date(),\n            type: what,\n            value: info || ''\n        });\n    };\n    this.onicecandidate = null;\n    this.peerconnection.onicecandidate = event => {\n        this.trace(\n            'onicecandidate',\n            JSON.stringify(event.candidate, null, ' '));\n\n        if (this.onicecandidate !== null) {\n            this.onicecandidate(event);\n        }\n    };\n    this.peerconnection.onaddstream\n        = event => this._remoteStreamAdded(event.stream);\n    this.peerconnection.onremovestream\n        = event => this._remoteStreamRemoved(event.stream);\n    this.onsignalingstatechange = null;\n    this.peerconnection.onsignalingstatechange = event => {\n        this.trace('onsignalingstatechange', this.signalingState);\n        if (this.onsignalingstatechange !== null) {\n            this.onsignalingstatechange(event);\n        }\n    };\n    this.oniceconnectionstatechange = null;\n    this.peerconnection.oniceconnectionstatechange = event => {\n        this.trace('oniceconnectionstatechange', this.iceConnectionState);\n        if (this.oniceconnectionstatechange !== null) {\n            this.oniceconnectionstatechange(event);\n        }\n    };\n    this.onnegotiationneeded = null;\n    this.peerconnection.onnegotiationneeded = event => {\n        this.trace('onnegotiationneeded');\n        if (this.onnegotiationneeded !== null) {\n            this.onnegotiationneeded(event);\n        }\n    };\n    this.ondatachannel = null;\n    this.peerconnection.ondatachannel = event => {\n        this.trace('ondatachannel');\n        if (this.ondatachannel !== null) {\n            this.ondatachannel(event);\n        }\n    };\n\n    if (this.maxstats) {\n        this.statsinterval = window.setInterval(() => {\n            this.getStats(stats => {\n                if (stats.result\n                    && typeof stats.result === 'function') {\n                    const results = stats.result();\n\n                    for (let i = 0; i < results.length; ++i) {\n                        const res = results[i];\n\n                        res.names().forEach(name => {\n                            this._processStat(res, name, res.stat(name));\n                        });\n                    }\n                } else {\n                    stats.forEach(r => this._processStat(r, '', r));\n                }\n            }, () => {\n\n                // empty error callback\n            });\n        }, 1000);\n    }\n\n    logger.info(`Create new ${this}`);\n}\n\n/* eslint-enable max-params */\n\n/**\n * Process stat and adds it to the array of stats we store.\n * @param report the current stats report.\n * @param name the name of the report, if available\n * @param statValue the value to add.\n * @private\n */\nTraceablePeerConnection.prototype._processStat\n    = function(report, name, statValue) {\n        const id = `${report.id}-${name}`;\n        let s = this.stats[id];\n        const now = new Date();\n\n        if (!s) {\n            this.stats[id] = s = {\n                startTime: now,\n                endTime: now,\n                values: [],\n                times: []\n            };\n        }\n        s.values.push(statValue);\n        s.times.push(now.getTime());\n        if (s.values.length > this.maxstats) {\n            s.values.shift();\n            s.times.shift();\n        }\n        s.endTime = now;\n    };\n\n/**\n * Returns a string representation of a SessionDescription object.\n */\nconst dumpSDP = function(description) {\n    if (typeof description === 'undefined' || description === null) {\n        return '';\n    }\n\n    return `type: ${description.type}\\r\\n${description.sdp}`;\n};\n\n\n/**\n * Forwards the {@link peerconnection.iceConnectionState} state except that it\n * will convert \"completed\" into \"connected\" where both mean that the ICE has\n * succeeded and is up and running. We never see \"completed\" state for\n * the JVB connection, but it started appearing for the P2P one. This method\n * allows to adapt old logic to this new situation.\n * @return {string}\n */\nTraceablePeerConnection.prototype.getConnectionState = function() {\n    const state = this.peerconnection.iceConnectionState;\n\n    if (state === 'completed') {\n        return 'connected';\n    }\n\n    return state;\n};\n\n/**\n * Obtains the media direction for given {@link MediaType}. The method takes\n * into account whether or not there are any local tracks for media and\n * the {@link audioTransferActive} and {@link videoTransferActive} flags.\n * @param {MediaType} mediaType\n * @return {string} one of the SDP direction constants ('sendrecv, 'recvonly'\n * etc.) which should be used when setting local description on the peer\n * connection.\n * @private\n */\nTraceablePeerConnection.prototype._getDesiredMediaDirection = function(\n        mediaType) {\n    let mediaTransferActive = true;\n\n    if (mediaType === MediaType.AUDIO) {\n        mediaTransferActive = this.audioTransferActive;\n    } else if (mediaType === MediaType.VIDEO) {\n        mediaTransferActive = this.videoTransferActive;\n    }\n    if (mediaTransferActive) {\n        return this.hasAnyTracksOfType(mediaType) ? 'sendrecv' : 'recvonly';\n    }\n\n    return 'inactive';\n};\n\n/**\n * Tells whether or not this TPC instance is using Simulcast.\n * @return {boolean} <tt>true</tt> if simulcast is enabled and active or\n * <tt>false</tt> if it's turned off.\n */\nTraceablePeerConnection.prototype.isSimulcastOn = function() {\n    return !this.options.disableSimulcast\n        && browser.supportsSimulcast()\n\n        // Firefox has been added as supporting simulcast, but it is\n        // experimental so we only want to do it for firefox if the config\n        // option is set.  Unfortunately, browser::supportsSimulcast()\n        // doesn't have a reference to the config options, so we have\n        // to do it here\n        && (!browser.isFirefox()\n            || this.options.enableFirefoxSimulcast);\n};\n\n/**\n * Handles {@link SignalingEvents.PEER_VIDEO_TYPE_CHANGED}\n * @param {string} endpointId the video owner's ID (MUC nickname)\n * @param {VideoType} videoType the new value\n * @private\n */\nTraceablePeerConnection.prototype._peerVideoTypeChanged = function(\n        endpointId,\n        videoType) {\n    // Check if endpointId has a value to avoid action on random track\n    if (!endpointId) {\n        logger.error(`No endpointID on peerVideoTypeChanged ${this}`);\n\n        return;\n    }\n    const videoTrack = this.getRemoteTracks(endpointId, MediaType.VIDEO);\n\n    if (videoTrack.length) {\n        // NOTE 1 track per media type is assumed\n        videoTrack[0]._setVideoType(videoType);\n    }\n};\n\n/**\n * Handles remote track mute / unmute events.\n * @param {string} endpointId the track owner's identifier (MUC nickname)\n * @param {MediaType} mediaType \"audio\" or \"video\"\n * @param {boolean} isMuted the new mute state\n * @private\n */\nTraceablePeerConnection.prototype._peerMutedChanged = function(\n        endpointId,\n        mediaType,\n        isMuted) {\n    // Check if endpointId is a value to avoid doing action on all remote tracks\n    if (!endpointId) {\n        logger.error('On peerMuteChanged - no endpoint ID');\n\n        return;\n    }\n    const track = this.getRemoteTracks(endpointId, mediaType);\n\n    if (track.length) {\n        // NOTE 1 track per media type is assumed\n        track[0].setMute(isMuted);\n    }\n};\n\n/**\n * Obtains local tracks for given {@link MediaType}. If the <tt>mediaType</tt>\n * argument is omitted the list of all local tracks will be returned.\n * @param {MediaType} [mediaType]\n * @return {Array<JitsiLocalTrack>}\n */\nTraceablePeerConnection.prototype.getLocalTracks = function(mediaType) {\n    let tracks = Array.from(this.localTracks.values());\n\n    if (mediaType !== undefined) {\n        tracks = tracks.filter(track => track.getType() === mediaType);\n    }\n\n    return tracks;\n};\n\n/**\n * Checks whether or not this {@link TraceablePeerConnection} instance contains\n * any local tracks for given <tt>mediaType</tt>.\n * @param {MediaType} mediaType\n * @return {boolean}\n */\nTraceablePeerConnection.prototype.hasAnyTracksOfType = function(mediaType) {\n    if (!mediaType) {\n        throw new Error('\"mediaType\" is required');\n    }\n\n    return this.getLocalTracks(mediaType).length > 0;\n};\n\n/**\n * Obtains all remote tracks currently known to this PeerConnection instance.\n * @param {string} [endpointId] the track owner's identifier (MUC nickname)\n * @param {MediaType} [mediaType] the remote tracks will be filtered\n * by their media type if this argument is specified.\n * @return {Array<JitsiRemoteTrack>}\n */\nTraceablePeerConnection.prototype.getRemoteTracks = function(\n        endpointId,\n        mediaType) {\n    const remoteTracks = [];\n    const endpoints\n        = endpointId ? [ endpointId ] : this.remoteTracks.keys();\n\n    for (const endpoint of endpoints) {\n        const endpointTrackMap = this.remoteTracks.get(endpoint);\n\n        if (!endpointTrackMap) {\n\n            // Otherwise an empty Map() would have to be allocated above\n            // eslint-disable-next-line no-continue\n            continue;\n        }\n\n        for (const trackMediaType of endpointTrackMap.keys()) {\n            // per media type filtering\n            if (!mediaType || mediaType === trackMediaType) {\n                const mediaTrack = endpointTrackMap.get(trackMediaType);\n\n                if (mediaTrack) {\n                    remoteTracks.push(mediaTrack);\n                }\n            }\n        }\n    }\n\n    return remoteTracks;\n};\n\n/**\n * Tries to find {@link JitsiTrack} for given SSRC number. It will search both\n * local and remote tracks bound to this instance.\n * @param {number} ssrc\n * @return {JitsiTrack|null}\n */\nTraceablePeerConnection.prototype.getTrackBySSRC = function(ssrc) {\n    if (typeof ssrc !== 'number') {\n        throw new Error(`SSRC ${ssrc} is not a number`);\n    }\n    for (const localTrack of this.localTracks.values()) {\n        if (this.getLocalSSRC(localTrack) === ssrc) {\n            return localTrack;\n        }\n    }\n    for (const remoteTrack of this.getRemoteTracks()) {\n        if (remoteTrack.getSSRC() === ssrc) {\n            return remoteTrack;\n        }\n    }\n\n    return null;\n};\n\n/**\n * Tries to find SSRC number for given {@link JitsiTrack} id. It will search\n * both local and remote tracks bound to this instance.\n * @param {string} id\n * @return {number|null}\n */\nTraceablePeerConnection.prototype.getSsrcByTrackId = function(id) {\n\n    const findTrackById = track => track.getTrack().id === id;\n    const localTrack = this.getLocalTracks().find(findTrackById);\n\n    if (localTrack) {\n        return this.getLocalSSRC(localTrack);\n    }\n\n    const remoteTrack = this.getRemoteTracks().find(findTrackById);\n\n    if (remoteTrack) {\n        return remoteTrack.getSSRC();\n    }\n\n    return null;\n};\n\n/**\n * Called when new remote MediaStream is added to the PeerConnection.\n * @param {MediaStream} stream the WebRTC MediaStream for remote participant\n */\nTraceablePeerConnection.prototype._remoteStreamAdded = function(stream) {\n    const streamId = RTC.getStreamID(stream);\n\n    if (!RTC.isUserStreamById(streamId)) {\n        logger.info(\n            `${this} ignored remote 'stream added' event for non-user stream`\n             + `id: ${streamId}`);\n\n        return;\n    }\n\n    // Bind 'addtrack'/'removetrack' event handlers\n    if (browser.isChrome() || browser.isNWJS()\n        || browser.isElectron() || browser.isEdge()) {\n        stream.onaddtrack = event => {\n            this._remoteTrackAdded(stream, event.track);\n        };\n        stream.onremovetrack = event => {\n            this._remoteTrackRemoved(stream, event.track);\n        };\n    }\n\n    // Call remoteTrackAdded for each track in the stream\n    const streamAudioTracks = stream.getAudioTracks();\n\n    for (const audioTrack of streamAudioTracks) {\n        this._remoteTrackAdded(stream, audioTrack);\n    }\n    const streamVideoTracks = stream.getVideoTracks();\n\n    for (const videoTrack of streamVideoTracks) {\n        this._remoteTrackAdded(stream, videoTrack);\n    }\n};\n\n\n/**\n * Called on \"track added\" and \"stream added\" PeerConnection events (because we\n * handle streams on per track basis). Finds the owner and the SSRC for\n * the track and passes that to ChatRoom for further processing.\n * @param {MediaStream} stream the WebRTC MediaStream instance which is\n * the parent of the track\n * @param {MediaStreamTrack} track the WebRTC MediaStreamTrack added for remote\n * participant\n */\nTraceablePeerConnection.prototype._remoteTrackAdded = function(stream, track) {\n    const streamId = RTC.getStreamID(stream);\n    const mediaType = track.kind;\n\n    logger.info(`${this} remote track added:`, streamId, mediaType);\n\n    // look up an associated JID for a stream id\n    if (!mediaType) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `MediaType undefined for remote track, stream id: ${streamId}`\n            ));\n\n        // Abort\n        return;\n    }\n\n    const remoteSDP = new SDP(this.remoteDescription.sdp);\n    const mediaLines\n        = remoteSDP.media.filter(mls => mls.startsWith(`m=${mediaType}`));\n\n    if (!mediaLines.length) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `No media lines for type ${\n                    mediaType} found in remote SDP for remote track: ${\n                    streamId}`));\n\n        // Abort\n        return;\n    }\n\n    let ssrcLines = SDPUtil.findLines(mediaLines[0], 'a=ssrc:');\n\n    ssrcLines\n        = ssrcLines.filter(line => line.indexOf(`msid:${streamId}`) !== -1);\n    if (!ssrcLines.length) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `No SSRC lines for streamId ${\n                    streamId} for remote track, media type: ${mediaType}`));\n\n        // Abort\n        return;\n    }\n\n    // FIXME the length of ssrcLines[0] not verified, but it will fail\n    // with global error handler anyway\n    const ssrcStr = ssrcLines[0].substring(7).split(' ')[0];\n    const trackSsrc = Number(ssrcStr);\n    const ownerEndpointId = this.signalingLayer.getSSRCOwner(trackSsrc);\n\n    if (isNaN(trackSsrc) || trackSsrc < 0) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `Invalid SSRC: ${ssrcStr} for remote track, msid: ${\n                    streamId} media type: ${mediaType}`));\n\n        // Abort\n        return;\n    } else if (!ownerEndpointId) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `No SSRC owner known for: ${\n                    trackSsrc} for remote track, msid: ${\n                    streamId} media type: ${mediaType}`));\n\n        // Abort\n        return;\n    }\n\n    logger.log(`${this} associated ssrc`, ownerEndpointId, trackSsrc);\n\n    const peerMediaInfo\n        = this.signalingLayer.getPeerMediaInfo(ownerEndpointId, mediaType);\n\n    if (!peerMediaInfo) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `${this}: no peer media info available for ${\n                    ownerEndpointId}`));\n\n        return;\n    }\n\n    const muted = peerMediaInfo.muted;\n    const videoType = peerMediaInfo.videoType; // can be undefined\n\n    this._createRemoteTrack(\n        ownerEndpointId, stream, track, mediaType, videoType, trackSsrc, muted);\n};\n\n// FIXME cleanup params\n/* eslint-disable max-params */\n\n/**\n * Initializes a new JitsiRemoteTrack instance with the data provided by\n * the signaling layer and SDP.\n *\n * @param {string} ownerEndpointId the owner's endpoint ID (MUC nickname)\n * @param {MediaStream} stream the WebRTC stream instance\n * @param {MediaStreamTrack} track the WebRTC track instance\n * @param {MediaType} mediaType the track's type of the media\n * @param {VideoType} [videoType] the track's type of the video (if applicable)\n * @param {number} ssrc the track's main SSRC number\n * @param {boolean} muted the initial muted status\n */\nTraceablePeerConnection.prototype._createRemoteTrack = function(\n        ownerEndpointId,\n        stream,\n        track,\n        mediaType,\n        videoType,\n        ssrc,\n        muted) {\n    const remoteTrack\n        = new JitsiRemoteTrack(\n            this.rtc, this.rtc.conference,\n            ownerEndpointId,\n            stream, track, mediaType, videoType, ssrc, muted, this.isP2P);\n    let remoteTracksMap = this.remoteTracks.get(ownerEndpointId);\n\n    if (!remoteTracksMap) {\n        remoteTracksMap = new Map();\n        this.remoteTracks.set(ownerEndpointId, remoteTracksMap);\n    }\n\n    if (remoteTracksMap.has(mediaType)) {\n        logger.error(\n            `${this} overwriting remote track! ${remoteTrack}`,\n            ownerEndpointId, mediaType);\n    }\n    remoteTracksMap.set(mediaType, remoteTrack);\n\n    this.eventEmitter.emit(RTCEvents.REMOTE_TRACK_ADDED, remoteTrack);\n};\n\n/* eslint-enable max-params */\n\n/**\n * Handles remote stream removal.\n * @param stream the WebRTC MediaStream object which is being removed from the\n * PeerConnection\n */\nTraceablePeerConnection.prototype._remoteStreamRemoved = function(stream) {\n    if (!RTC.isUserStream(stream)) {\n        const id = RTC.getStreamID(stream);\n\n        logger.info(\n            `Ignored remote 'stream removed' event for non-user stream ${id}`);\n\n        return;\n    }\n\n    // Call remoteTrackRemoved for each track in the stream\n    const streamVideoTracks = stream.getVideoTracks();\n\n    for (const videoTrack of streamVideoTracks) {\n        this._remoteTrackRemoved(stream, videoTrack);\n    }\n    const streamAudioTracks = stream.getAudioTracks();\n\n    for (const audioTrack of streamAudioTracks) {\n        this._remoteTrackRemoved(stream, audioTrack);\n    }\n};\n\n/**\n * Handles remote media track removal.\n * @param {MediaStream} stream WebRTC MediaStream instance which is the parent\n * of the track.\n * @param {MediaStreamTrack} track the WebRTC MediaStreamTrack which has been\n * removed from the PeerConnection.\n */\nTraceablePeerConnection.prototype._remoteTrackRemoved = function(\n        stream,\n        track) {\n    const streamId = RTC.getStreamID(stream);\n    const trackId = track && RTC.getTrackID(track);\n\n    logger.info(`${this} - remote track removed: ${streamId}, ${trackId}`);\n\n    if (!streamId) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(`${this} remote track removal failed - no stream ID`));\n\n        return;\n    }\n\n    if (!trackId) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(`${this} remote track removal failed - no track ID`));\n\n        return;\n    }\n\n    if (!this._removeRemoteTrackById(streamId, trackId)) {\n        // NOTE this warning is always printed when user leaves the room,\n        // because we remove remote tracks manually on MUC member left event,\n        // before the SSRCs are removed by Jicofo. In most cases it is fine to\n        // ignore this warning, but still it's better to keep it printed for\n        // debugging purposes.\n        //\n        // We could change the behaviour to emit track removed only from here,\n        // but the order of the events will change and consuming apps could\n        // behave unexpectedly (the \"user left\" event would come before \"track\n        // removed\" events).\n        logger.warn(\n            `${this} Removed track not found for msid: ${streamId},\n             track id: ${trackId}`);\n    }\n};\n\n/**\n * Finds remote track by it's stream and track ids.\n * @param {string} streamId the media stream id as defined by the WebRTC\n * @param {string} trackId the media track id as defined by the WebRTC\n * @return {JitsiRemoteTrack|undefined} the track's instance or\n * <tt>undefined</tt> if not found.\n * @private\n */\nTraceablePeerConnection.prototype._getRemoteTrackById = function(\n        streamId,\n        trackId) {\n    // .find will break the loop once the first match is found\n    for (const endpointTrackMap of this.remoteTracks.values()) {\n        for (const mediaTrack of endpointTrackMap.values()) {\n            // FIXME verify and try to use ===\n            /* eslint-disable eqeqeq */\n            if (mediaTrack.getStreamId() == streamId\n                && mediaTrack.getTrackId() == trackId) {\n                return mediaTrack;\n            }\n\n            /* eslint-enable eqeqeq */\n        }\n    }\n\n    return undefined;\n};\n\n/**\n * Removes all JitsiRemoteTracks associated with given MUC nickname\n * (resource part of the JID). Returns array of removed tracks.\n *\n * @param {string} owner - The resource part of the MUC JID.\n * @returns {JitsiRemoteTrack[]}\n */\nTraceablePeerConnection.prototype.removeRemoteTracks = function(owner) {\n    const removedTracks = [];\n    const remoteTracksMap = this.remoteTracks.get(owner);\n\n    if (remoteTracksMap) {\n        const removedAudioTrack = remoteTracksMap.get(MediaType.AUDIO);\n        const removedVideoTrack = remoteTracksMap.get(MediaType.VIDEO);\n\n        removedAudioTrack && removedTracks.push(removedAudioTrack);\n        removedVideoTrack && removedTracks.push(removedVideoTrack);\n\n        this.remoteTracks.delete(owner);\n    }\n\n    logger.debug(\n        `${this} removed remote tracks for ${owner} count: ${\n            removedTracks.length}`);\n\n    return removedTracks;\n};\n\n/**\n * Removes and disposes given <tt>JitsiRemoteTrack</tt> instance. Emits\n * {@link RTCEvents.REMOTE_TRACK_REMOVED}.\n * @param {JitsiRemoteTrack} toBeRemoved\n */\nTraceablePeerConnection.prototype._removeRemoteTrack = function(toBeRemoved) {\n    toBeRemoved.dispose();\n    const participantId = toBeRemoved.getParticipantId();\n    const remoteTracksMap = this.remoteTracks.get(participantId);\n\n    if (!remoteTracksMap) {\n        logger.error(\n            `removeRemoteTrack: no remote tracks map for ${participantId}`);\n    } else if (!remoteTracksMap.delete(toBeRemoved.getType())) {\n        logger.error(\n            `Failed to remove ${toBeRemoved} - type mapping messed up ?`);\n    }\n    this.eventEmitter.emit(RTCEvents.REMOTE_TRACK_REMOVED, toBeRemoved);\n};\n\n/**\n * Removes and disposes <tt>JitsiRemoteTrack</tt> identified by given stream and\n * track ids.\n *\n * @param {string} streamId the media stream id as defined by the WebRTC\n * @param {string} trackId the media track id as defined by the WebRTC\n * @returns {JitsiRemoteTrack|undefined} the track which has been removed or\n * <tt>undefined</tt> if no track matching given stream and track ids was\n * found.\n */\nTraceablePeerConnection.prototype._removeRemoteTrackById = function(\n        streamId,\n        trackId) {\n    const toBeRemoved = this._getRemoteTrackById(streamId, trackId);\n\n    if (toBeRemoved) {\n        this._removeRemoteTrack(toBeRemoved);\n    }\n\n    return toBeRemoved;\n};\n\n/**\n * @typedef {Object} SSRCGroupInfo\n * @property {Array<number>} ssrcs group's SSRCs\n * @property {string} semantics\n */\n/**\n * @typedef {Object} TrackSSRCInfo\n * @property {Array<number>} ssrcs track's SSRCs\n * @property {Array<SSRCGroupInfo>} groups track's SSRC groups\n */\n/**\n * Returns map with keys msid and <tt>TrackSSRCInfo</tt> values.\n * @param {Object} desc the WebRTC SDP instance.\n * @return {Map<string,TrackSSRCInfo>}\n */\nfunction extractSSRCMap(desc) {\n    /**\n     * Track SSRC infos mapped by stream ID (msid)\n     * @type {Map<string,TrackSSRCInfo>}\n     */\n    const ssrcMap = new Map();\n\n    /**\n     * Groups mapped by primary SSRC number\n     * @type {Map<number,Array<SSRCGroupInfo>>}\n     */\n    const groupsMap = new Map();\n\n    if (typeof desc !== 'object' || desc === null\n        || typeof desc.sdp !== 'string') {\n        logger.warn('An empty description was passed as an argument.');\n\n        return ssrcMap;\n    }\n\n    const session = transform.parse(desc.sdp);\n\n    if (!Array.isArray(session.media)) {\n        return ssrcMap;\n    }\n\n    for (const mLine of session.media) {\n        if (!Array.isArray(mLine.ssrcs)) {\n            continue; // eslint-disable-line no-continue\n        }\n\n        if (Array.isArray(mLine.ssrcGroups)) {\n            for (const group of mLine.ssrcGroups) {\n                if (typeof group.semantics !== 'undefined'\n                    && typeof group.ssrcs !== 'undefined') {\n                    // Parse SSRCs and store as numbers\n                    const groupSSRCs\n                        = group.ssrcs.split(' ').map(\n                            ssrcStr => parseInt(ssrcStr, 10));\n                    const primarySSRC = groupSSRCs[0];\n\n                    // Note that group.semantics is already present\n\n                    group.ssrcs = groupSSRCs;\n\n                    // eslint-disable-next-line max-depth\n                    if (!groupsMap.has(primarySSRC)) {\n                        groupsMap.set(primarySSRC, []);\n                    }\n                    groupsMap.get(primarySSRC).push(group);\n                }\n            }\n        }\n        for (const ssrc of mLine.ssrcs) {\n            if (ssrc.attribute !== 'msid') {\n                continue; // eslint-disable-line no-continue\n            }\n\n            const msid = ssrc.value;\n            let ssrcInfo = ssrcMap.get(msid);\n\n            if (!ssrcInfo) {\n                ssrcInfo = {\n                    ssrcs: [],\n                    groups: [],\n                    msid\n                };\n                ssrcMap.set(msid, ssrcInfo);\n            }\n\n            const ssrcNumber = ssrc.id;\n\n            ssrcInfo.ssrcs.push(ssrcNumber);\n\n            if (groupsMap.has(ssrcNumber)) {\n                const ssrcGroups = groupsMap.get(ssrcNumber);\n\n                for (const group of ssrcGroups) {\n                    ssrcInfo.groups.push(group);\n                }\n            }\n        }\n    }\n\n    return ssrcMap;\n}\n\n/**\n * Takes a SessionDescription object and returns a \"normalized\" version.\n * Currently it only takes care of ordering the a=ssrc lines.\n */\nconst normalizePlanB = function(desc) {\n    if (typeof desc !== 'object' || desc === null\n        || typeof desc.sdp !== 'string') {\n        logger.warn('An empty description was passed as an argument.');\n\n        return desc;\n    }\n\n    // eslint-disable-next-line no-shadow\n    const transform = require('sdp-transform');\n    const session = transform.parse(desc.sdp);\n\n    if (typeof session !== 'undefined'\n            && typeof session.media !== 'undefined'\n            && Array.isArray(session.media)) {\n        session.media.forEach(mLine => {\n\n            // Chrome appears to be picky about the order in which a=ssrc lines\n            // are listed in an m-line when rtx is enabled (and thus there are\n            // a=ssrc-group lines with FID semantics). Specifically if we have\n            // \"a=ssrc-group:FID S1 S2\" and the \"a=ssrc:S2\" lines appear before\n            // the \"a=ssrc:S1\" lines, SRD fails.\n            // So, put SSRC which appear as the first SSRC in an FID ssrc-group\n            // first.\n            const firstSsrcs = [];\n            const newSsrcLines = [];\n\n            if (typeof mLine.ssrcGroups !== 'undefined'\n                && Array.isArray(mLine.ssrcGroups)) {\n                mLine.ssrcGroups.forEach(group => {\n                    if (typeof group.semantics !== 'undefined'\n                        && group.semantics === 'FID') {\n                        if (typeof group.ssrcs !== 'undefined') {\n                            firstSsrcs.push(Number(group.ssrcs.split(' ')[0]));\n                        }\n                    }\n                });\n            }\n\n            if (Array.isArray(mLine.ssrcs)) {\n                let i;\n\n                for (i = 0; i < mLine.ssrcs.length; i++) {\n                    if (typeof mLine.ssrcs[i] === 'object'\n                        && typeof mLine.ssrcs[i].id !== 'undefined'\n                        && firstSsrcs.indexOf(mLine.ssrcs[i].id) >= 0) {\n                        newSsrcLines.push(mLine.ssrcs[i]);\n                        delete mLine.ssrcs[i];\n                    }\n                }\n\n                for (i = 0; i < mLine.ssrcs.length; i++) {\n                    if (typeof mLine.ssrcs[i] !== 'undefined') {\n                        newSsrcLines.push(mLine.ssrcs[i]);\n                    }\n                }\n\n                mLine.ssrcs = newSsrcLines;\n            }\n        });\n    }\n\n    const resStr = transform.write(session);\n\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: resStr\n    });\n};\n\n/**\n * Makes sure that both audio and video directions are configured as 'sendrecv'.\n * @param {Object} localDescription the SDP object as defined by WebRTC.\n */\nconst enforceSendRecv = function(localDescription) {\n    if (!localDescription) {\n        throw new Error('No local description passed in.');\n    }\n\n    const transformer = new SdpTransformWrap(localDescription.sdp);\n    const audioMedia = transformer.selectMedia('audio');\n    let changed = false;\n\n    if (audioMedia && audioMedia.direction !== 'sendrecv') {\n        audioMedia.direction = 'sendrecv';\n        changed = true;\n    }\n\n    const videoMedia = transformer.selectMedia('video');\n\n    if (videoMedia && videoMedia.direction !== 'sendrecv') {\n        videoMedia.direction = 'sendrecv';\n        changed = true;\n    }\n\n    if (changed) {\n        return new RTCSessionDescription({\n            type: localDescription.type,\n            sdp: transformer.toRawSDP()\n        });\n    }\n\n    return localDescription;\n};\n\n/**\n *\n * @param {JitsiLocalTrack} localTrack\n */\nTraceablePeerConnection.prototype.getLocalSSRC = function(localTrack) {\n    const ssrcInfo = this._getSSRC(localTrack.rtcId);\n\n    return ssrcInfo && ssrcInfo.ssrcs[0];\n};\n\n/**\n * When doing unified plan simulcast, we'll have a set of ssrcs with the\n * same msid but no ssrc-group, since unified plan signals the simulcast\n * group via the a=simulcast line.  Unfortunately, Jicofo will complain\n * if it sees ssrcs with matching msids but no ssrc-group, so we'll inject\n * an ssrc-group line to make Jicofo happy.\n * NOTE: unlike plan B simulcast, the ssrcs in this inject ssrc-group will\n * NOT necessarily be in order of quality (low to high) because:\n * a) when translating between unified plan and plan b the order of the ssrcs\n * is not preserved and\n * b) it isn't guaranteed that firefox will give them to us in order to begin\n * with\n * @param desc A session description object (with 'type' and 'sdp' fields)\n * @return A session description object with its sdp field modified to\n * contain an inject ssrc-group for simulcast\n */\nTraceablePeerConnection.prototype._injectSsrcGroupForUnifiedSimulcast\n    = function(desc) {\n        const sdp = transform.parse(desc.sdp);\n        const video = sdp.media.find(mline => mline.type === 'video');\n\n        if (video.simulcast_03) {\n            const ssrcs = [];\n\n            video.ssrcs.forEach(ssrc => {\n                if (ssrc.attribute === 'msid') {\n                    ssrcs.push(ssrc.id);\n                }\n            });\n            video.ssrcGroups = video.ssrcGroups || [];\n            if (video.ssrcGroups.find(group => group.semantics === 'SIM')) {\n                // Group already exists, no need to do anything\n                return desc;\n            }\n            video.ssrcGroups.push({\n                semantics: 'SIM',\n                ssrcs: ssrcs.join(' ')\n            });\n        }\n\n        return new RTCSessionDescription({\n            type: desc.type,\n            sdp: transform.write(sdp)\n        });\n    };\n\n/* eslint-disable-next-line vars-on-top */\nconst getters = {\n    signalingState() {\n        return this.peerconnection.signalingState;\n    },\n    iceConnectionState() {\n        return this.peerconnection.iceConnectionState;\n    },\n    localDescription() {\n        let desc = this.peerconnection.localDescription;\n\n        if (!desc) {\n            logger.debug('getLocalDescription no localDescription found');\n\n            return {};\n        }\n\n        this.trace('getLocalDescription::preTransform', dumpSDP(desc));\n\n        // if we're running on FF, transform to Plan B first.\n        if (browser.usesUnifiedPlan()) {\n            desc = this.interop.toPlanB(desc);\n            this.trace('getLocalDescription::postTransform (Plan B)',\n                dumpSDP(desc));\n\n            desc = this._injectSsrcGroupForUnifiedSimulcast(desc);\n            this.trace('getLocalDescription::postTransform (inject ssrc group)',\n                dumpSDP(desc));\n        }\n\n        if (browser.doesVideoMuteByStreamRemove()) {\n            desc = this.localSdpMunger.maybeAddMutedLocalVideoTracksToSDP(desc);\n            logger.debug(\n                'getLocalDescription::postTransform (munge local SDP)', desc);\n        }\n\n        // What comes out of this getter will be signalled over Jingle to\n        // the other peer, so we need to make sure the media direction is\n        // 'sendrecv' because we won't change the direction later and don't want\n        // the other peer to think we can't send or receive.\n        //\n        // Note that the description we set in chrome does have the accurate\n        // direction (e.g. 'recvonly'), since that is technically what is\n        // happening (check setLocalDescription impl).\n        desc = enforceSendRecv(desc);\n\n        // See the method's doc for more info about this transformation.\n        desc = this.localSdpMunger.transformStreamIdentifiers(desc);\n\n        return desc;\n    },\n    remoteDescription() {\n        let desc = this.peerconnection.remoteDescription;\n\n        this.trace('getRemoteDescription::preTransform', dumpSDP(desc));\n\n        // if we're running on FF, transform to Plan B first.\n        if (browser.usesUnifiedPlan()) {\n            desc = this.interop.toPlanB(desc);\n            this.trace(\n                'getRemoteDescription::postTransform (Plan B)', dumpSDP(desc));\n        }\n\n        return desc || {};\n    }\n};\n\nObject.keys(getters).forEach(prop => {\n    Object.defineProperty(\n        TraceablePeerConnection.prototype,\n        prop, {\n            get: getters[prop]\n        }\n    );\n});\n\nTraceablePeerConnection.prototype._getSSRC = function(rtcId) {\n    return this.localSSRCs.get(rtcId);\n};\n\n/**\n * Add {@link JitsiLocalTrack} to this TPC.\n * @param {JitsiLocalTrack} track\n */\nTraceablePeerConnection.prototype.addTrack = function(track) {\n    const rtcId = track.rtcId;\n\n    logger.info(`add ${track} to: ${this}`);\n\n    if (this.localTracks.has(rtcId)) {\n        logger.error(`${track} is already in ${this}`);\n\n        return;\n    }\n\n    this.localTracks.set(rtcId, track);\n\n    const webrtcStream = track.getOriginalStream();\n\n    if (webrtcStream) {\n        this._addStream(webrtcStream);\n\n    // It's not ok for a track to not have a WebRTC stream if:\n    } else if (!browser.doesVideoMuteByStreamRemove()\n                || track.isAudioTrack()\n                || (track.isVideoTrack() && !track.isMuted())) {\n        logger.error(`${this} no WebRTC stream for: ${track}`);\n    }\n\n    // Muted video tracks do not have WebRTC stream\n    if (browser.doesVideoMuteByStreamRemove()\n            && track.isVideoTrack() && track.isMuted()) {\n        const ssrcInfo = this.generateNewStreamSSRCInfo(track);\n\n        this.sdpConsistency.setPrimarySsrc(ssrcInfo.ssrcs[0]);\n        const simGroup\n            = ssrcInfo.groups.find(groupInfo => groupInfo.semantics === 'SIM');\n\n        if (simGroup) {\n            this.simulcast.setSsrcCache(simGroup.ssrcs);\n        }\n        const fidGroups\n            = ssrcInfo.groups.filter(\n                groupInfo => groupInfo.semantics === 'FID');\n\n        if (fidGroups) {\n            const rtxSsrcMapping = new Map();\n\n            fidGroups.forEach(fidGroup => {\n                const primarySsrc = fidGroup.ssrcs[0];\n                const rtxSsrc = fidGroup.ssrcs[1];\n\n                rtxSsrcMapping.set(primarySsrc, rtxSsrc);\n            });\n            this.rtxModifier.setSsrcCache(rtxSsrcMapping);\n        }\n    }\n};\n\n/**\n * Adds local track as part of the unmute operation.\n * @param {JitsiLocalTrack} track the track to be added as part of the unmute\n * operation\n * @return {boolean} <tt>true</tt> if the state of underlying PC has changed and\n * the renegotiation is required or <tt>false</tt> otherwise.\n */\nTraceablePeerConnection.prototype.addTrackUnmute = function(track) {\n    if (!this._assertTrackBelongs('addTrackUnmute', track)) {\n        // Abort\n        return false;\n    }\n\n    logger.info(`Adding ${track} as unmute to ${this}`);\n    const webRtcStream = track.getOriginalStream();\n\n    if (!webRtcStream) {\n        logger.error(\n            `Unable to add ${track} as unmute to ${this} - no WebRTC stream`);\n\n        return false;\n    }\n    this._addStream(webRtcStream);\n\n    return true;\n};\n\n/**\n * Adds WebRTC media stream to the underlying PeerConnection\n * @param {MediaStream} mediaStream\n * @private\n */\nTraceablePeerConnection.prototype._addStream = function(mediaStream) {\n    this.peerconnection.addStream(mediaStream);\n    this._addedStreams.push(mediaStream);\n};\n\n/**\n * Removes WebRTC media stream from the underlying PeerConection\n * @param {MediaStream} mediaStream\n */\nTraceablePeerConnection.prototype._removeStream = function(mediaStream) {\n    if (browser.isFirefox()) {\n        this._handleFirefoxRemoveStream(mediaStream);\n    } else {\n        this.peerconnection.removeStream(mediaStream);\n    }\n    this._addedStreams\n        = this._addedStreams.filter(stream => stream !== mediaStream);\n};\n\n/**\n * This method when called will check if given <tt>localTrack</tt> belongs to\n * this TPC (that it has been previously added using {@link addTrack}). If the\n * track does not belong an error message will be logged.\n * @param {string} methodName the method name that will be logged in an error\n * message\n * @param {JitsiLocalTrack} localTrack\n * @return {boolean} <tt>true</tt> if given local track belongs to this TPC or\n * <tt>false</tt> otherwise.\n * @private\n */\nTraceablePeerConnection.prototype._assertTrackBelongs = function(\n        methodName,\n        localTrack) {\n    const doesBelong = this.localTracks.has(localTrack.rtcId);\n\n    if (!doesBelong) {\n        logger.error(\n            `${methodName}: ${localTrack} does not belong to ${this}`);\n    }\n\n    return doesBelong;\n};\n\n/**\n * Tells if the given WebRTC <tt>MediaStream</tt> has been added to\n * the underlying WebRTC PeerConnection.\n * @param {MediaStream} mediaStream\n * @returns {boolean}\n */\nTraceablePeerConnection.prototype.isMediaStreamInPc = function(mediaStream) {\n    return this._addedStreams.indexOf(mediaStream) > -1;\n};\n\n/**\n * Remove local track from this TPC.\n * @param {JitsiLocalTrack} localTrack the track to be removed from this TPC.\n *\n * FIXME It should probably remove a boolean just like {@link removeTrackMute}\n *       The same applies to addTrack.\n */\nTraceablePeerConnection.prototype.removeTrack = function(localTrack) {\n    const webRtcStream = localTrack.getOriginalStream();\n\n    this.trace(\n        'removeStream',\n        localTrack.rtcId, webRtcStream ? webRtcStream.id : undefined);\n\n    if (!this._assertTrackBelongs('removeStream', localTrack)) {\n        // Abort - nothing to be done here\n        return;\n    }\n    this.localTracks.delete(localTrack.rtcId);\n    this.localSSRCs.delete(localTrack.rtcId);\n\n    if (webRtcStream) {\n        if (browser.isFirefox()) {\n            this._handleFirefoxRemoveStream(webRtcStream);\n        } else {\n            this.peerconnection.removeStream(webRtcStream);\n        }\n    }\n};\n\n/**\n * Returns the sender corresponding to the given MediaStream.\n *\n * @param {MediaStream} stream - The media stream used for the search.\n * @returns {RTPSender|undefined} - The found sender or undefined if no sender\n * was found.\n */\nTraceablePeerConnection.prototype.findSenderByStream = function(stream) {\n    const track = stream.getTracks()[0];\n\n    if (!track) {\n        logger.error('Cannot find sender: no tracks.');\n\n        return;\n    }\n\n    // Find the right sender (for audio or video)\n    return this.peerconnection.getSenders().find(s => s.track === track);\n};\n\n/**\n * Replaces <tt>oldTrack</tt> with <tt>newTrack</tt> from the peer connection.\n * Either <tt>oldTrack</tt> or <tt>newTrack</tt> can be null; replacing a valid\n * <tt>oldTrack</tt> with a null <tt>newTrack</tt> effectively just removes\n * <tt>oldTrack</tt>\n *\n * @param {JitsiLocalTrack|null} oldTrack - The current track in use to be\n * replaced\n * @param {JitsiLocalTrack|null} newTrack - The new track to use\n * @returns {Promise<boolean>} - If the promise resolves with true,\n * renegotiation will be needed. Otherwise no renegotiation is needed.\n */\nTraceablePeerConnection.prototype.replaceTrack = function(oldTrack, newTrack) {\n    if (browser.isFirefox() && oldTrack && newTrack) {\n        // Add and than remove stream in FF leads to wrong local SDP. In order\n        // to workaround the issue we need to use sender.replaceTrack().\n        const sender = this.findSenderByStream(oldTrack.getOriginalStream());\n        const stream = newTrack.getOriginalStream();\n\n        if (sender && stream) {\n            const track = stream.getTracks()[0];\n\n            if (track) {\n                return sender.replaceTrack(track, stream).then(() => {\n                    // Since there is no need to do renegotiations we need to\n                    // fix all ssrc-msid mappings here.\n                    // NOTE: after sender.replaceTrack the sdp will remain the\n                    // same but the stream attach to the new JitsiLocalTrack\n                    // will have different msid. Luckily on FF we are not doing\n                    // all the transformations related to video mute.\n\n                    const ssrc = this.localSSRCs.get(oldTrack.rtcId);\n\n                    this.localTracks.delete(oldTrack.rtcId);\n                    this.localSSRCs.delete(oldTrack.rtcId);\n                    this._addedStreams\n                        = this._addedStreams.filter(s => s !== stream);\n\n                    this.localTracks.set(newTrack.rtcId, newTrack);\n\n                    // Override the msid of JitsiLocalTrack in order to be\n                    // consistent with the SDP values.\n                    newTrack.storedMSID = oldTrack.storedMSID;\n                    this._addedStreams.push(stream);\n\n                    this.localSSRCs.set(newTrack.rtcId, ssrc);\n                    this.eventEmitter.emit(\n                        RTCEvents.LOCAL_TRACK_SSRC_UPDATED,\n                        newTrack,\n                        extractPrimarySSRC(ssrc));\n\n                    return false;\n                });\n            }\n        }\n    }\n\n    if (oldTrack) {\n        this.removeTrack(oldTrack);\n    }\n    if (newTrack) {\n        this.addTrack(newTrack);\n    }\n\n    return Promise.resolve(true);\n};\n\n/**\n * Removes local track as part of the mute operation.\n * @param {JitsiLocalTrack} localTrack the local track to be remove as part of\n * the mute operation.\n * @return {boolean} <tt>true</tt> if the underlying PeerConnection's state has\n * changed and the renegotiation is required or <tt>false</tt> otherwise.\n */\nTraceablePeerConnection.prototype.removeTrackMute = function(localTrack) {\n    const webRtcStream = localTrack.getOriginalStream();\n\n    this.trace(\n        'removeStreamMute',\n        localTrack.rtcId, webRtcStream ? webRtcStream.id : null);\n\n    if (!this._assertTrackBelongs('removeStreamMute', localTrack)) {\n        // Abort - nothing to be done here\n        return false;\n    }\n\n    if (webRtcStream) {\n        logger.info(\n            `Removing ${localTrack} as mute from ${this}`);\n        this._removeStream(webRtcStream);\n\n        return true;\n    }\n\n    logger.error(`removeStreamMute - no WebRTC stream for ${localTrack}`);\n\n    return false;\n};\n\n/**\n * Remove stream handling for firefox\n * @param stream: webrtc media stream\n */\nTraceablePeerConnection.prototype._handleFirefoxRemoveStream = function(\n        stream) {\n    if (!stream) {\n        // There is nothing to be changed\n        return;\n    }\n\n    const sender = this.findSenderByStream(stream);\n\n    if (sender) {\n        this.peerconnection.removeTrack(sender);\n    } else {\n        logger.log('Cannot remove tracks: no RTPSender.');\n    }\n};\n\nTraceablePeerConnection.prototype.createDataChannel = function(label, opts) {\n    this.trace('createDataChannel', label, opts);\n\n    return this.peerconnection.createDataChannel(label, opts);\n};\n\n/**\n * Ensures that the simulcast ssrc-group appears after any other ssrc-groups\n * in the SDP so that simulcast is properly activated.\n *\n * @param {Object} localSdp the WebRTC session description instance for\n * the local description.\n * @private\n */\nTraceablePeerConnection.prototype._ensureSimulcastGroupIsLast = function(\n        localSdp) {\n    let sdpStr = localSdp.sdp;\n\n    const videoStartIndex = sdpStr.indexOf('m=video');\n    const simStartIndex = sdpStr.indexOf('a=ssrc-group:SIM', videoStartIndex);\n    let otherStartIndex = sdpStr.lastIndexOf('a=ssrc-group');\n\n    if (simStartIndex === -1\n        || otherStartIndex === -1\n        || otherStartIndex === simStartIndex) {\n        return localSdp;\n    }\n\n    const simEndIndex = sdpStr.indexOf('\\r\\n', simStartIndex);\n    const simStr = sdpStr.substring(simStartIndex, simEndIndex + 2);\n\n    sdpStr = sdpStr.replace(simStr, '');\n    otherStartIndex = sdpStr.lastIndexOf('a=ssrc-group');\n    const otherEndIndex = sdpStr.indexOf('\\r\\n', otherStartIndex);\n    const sdpHead = sdpStr.slice(0, otherEndIndex);\n    const simStrTrimmed = simStr.trim();\n    const sdpTail = sdpStr.slice(otherEndIndex);\n\n    sdpStr = `${sdpHead}\\r\\n${simStrTrimmed}${sdpTail}`;\n\n    return new RTCSessionDescription({\n        type: localSdp.type,\n        sdp: sdpStr\n    });\n};\n\n/**\n * Will adjust audio and video media direction in the given SDP object to\n * reflect the current status of the {@link audioTransferActive} and\n * {@link videoTransferActive} flags.\n * @param {Object} localDescription the WebRTC session description instance for\n * the local description.\n * @private\n */\nTraceablePeerConnection.prototype._adjustLocalMediaDirection = function(\n        localDescription) {\n    const transformer = new SdpTransformWrap(localDescription.sdp);\n    let modifiedDirection = false;\n    const audioMedia = transformer.selectMedia('audio');\n\n    if (audioMedia) {\n        const desiredAudioDirection\n            = this._getDesiredMediaDirection(MediaType.AUDIO);\n\n        if (audioMedia.direction !== desiredAudioDirection) {\n            audioMedia.direction = desiredAudioDirection;\n            logger.info(\n                `Adjusted local audio direction to ${desiredAudioDirection}`);\n            modifiedDirection = true;\n        }\n    } else {\n        logger.warn('No \"audio\" media found int the local description');\n    }\n\n    const videoMedia = transformer.selectMedia('video');\n\n    if (videoMedia) {\n        const desiredVideoDirection\n            = this._getDesiredMediaDirection(MediaType.VIDEO);\n\n        if (videoMedia.direction !== desiredVideoDirection) {\n            videoMedia.direction = desiredVideoDirection;\n            logger.info(\n                `Adjusted local video direction to ${desiredVideoDirection}`);\n            modifiedDirection = true;\n        }\n    } else {\n        logger.warn('No \"video\" media found in the local description');\n    }\n\n    if (modifiedDirection) {\n        return new RTCSessionDescription({\n            type: localDescription.type,\n            sdp: transformer.toRawSDP()\n        });\n    }\n\n    return localDescription;\n};\n\nTraceablePeerConnection.prototype.setLocalDescription = function(description) {\n    let localSdp = description;\n\n    this.trace('setLocalDescription::preTransform', dumpSDP(localSdp));\n\n    if (this.options.disableH264 || this.options.preferH264) {\n        const parsedSdp = transform.parse(localSdp.sdp);\n        const videoMLine = parsedSdp.media.find(m => m.type === 'video');\n\n        if (this.options.disableH264) {\n            SDPUtil.stripVideoCodec(videoMLine, 'h264');\n        } else {\n            SDPUtil.preferVideoCodec(videoMLine, 'h264');\n        }\n\n        localSdp = new RTCSessionDescription({\n            type: localSdp.type,\n            sdp: transform.write(parsedSdp)\n        });\n\n        this.trace('setLocalDescription::postTransform (H264)',\n            dumpSDP(localSdp));\n    }\n\n    localSdp = this._adjustLocalMediaDirection(localSdp);\n\n    localSdp = this._ensureSimulcastGroupIsLast(localSdp);\n\n    // if we're using unified plan, transform to it first.\n    if (browser.usesUnifiedPlan()) {\n        localSdp = this.interop.toUnifiedPlan(localSdp);\n        this.trace(\n            'setLocalDescription::postTransform (Unified Plan)',\n            dumpSDP(localSdp));\n    }\n\n    return new Promise((resolve, reject) => {\n        this.peerconnection.setLocalDescription(localSdp)\n            .then(() => {\n                this.trace('setLocalDescriptionOnSuccess');\n                const localUfrag = SDPUtil.getUfrag(localSdp.sdp);\n\n                if (localUfrag !== this.localUfrag) {\n                    this.localUfrag = localUfrag;\n                    this.eventEmitter.emit(\n                        RTCEvents.LOCAL_UFRAG_CHANGED, this, localUfrag);\n                }\n                resolve();\n            }, err => {\n                this.trace('setLocalDescriptionOnFailure', err);\n                this.eventEmitter.emit(\n                    RTCEvents.SET_LOCAL_DESCRIPTION_FAILED,\n                    err, this);\n                reject(err);\n            });\n    });\n};\n\n/**\n * Enables/disables audio media transmission on this peer connection. When\n * disabled the SDP audio media direction in the local SDP will be adjusted to\n * 'inactive' which means that no data will be sent nor accepted, but\n * the connection should be kept alive.\n * @param {boolean} active <tt>true</tt> to enable video media transmission or\n * <tt>false</tt> to disable. If the value is not a boolean the call will have\n * no effect.\n * @return {boolean} <tt>true</tt> if the value has changed and sRD/sLD cycle\n * needs to be executed in order for the changes to take effect or\n * <tt>false</tt> if the given value was the same as the previous one.\n * @public\n */\nTraceablePeerConnection.prototype.setAudioTransferActive = function(active) {\n    logger.debug(`${this} audio transfer active: ${active}`);\n    const changed = this.audioTransferActive !== active;\n\n    this.audioTransferActive = active;\n\n    return changed;\n};\n\n/**\n * Takes in a *unified plan* offer and inserts the appropriate\n * parameters for adding simulcast receive support.\n * @param {Object} desc - A session description object\n * @param {String} desc.type - the type (offer/answer)\n * @param {String} desc.sdp - the sdp content\n *\n * @return {Object} A session description (same format as above) object\n * with its sdp field modified to advertise simulcast receive support\n */\nTraceablePeerConnection.prototype._insertUnifiedPlanSimulcastReceive\n    = function(desc) {\n        const sdp = transform.parse(desc.sdp);\n        const video = sdp.media.find(mline => mline.type === 'video');\n\n        // In order of lowest to highest spatial quality\n        video.rids = [\n            {\n                id: SIM_LAYER_1_RID,\n                direction: 'recv'\n            },\n            {\n                id: SIM_LAYER_2_RID,\n                direction: 'recv'\n            },\n            {\n                id: SIM_LAYER_3_RID,\n                direction: 'recv'\n            }\n        ];\n        // eslint-disable-next-line camelcase\n        video.simulcast_03 = {\n            value: `recv rid=${SIM_LAYER_RIDS.join(';')}`\n        };\n\n        return new RTCSessionDescription({\n            type: desc.type,\n            sdp: transform.write(sdp)\n        });\n    };\n\nTraceablePeerConnection.prototype.setRemoteDescription = function(description) {\n    this.trace('setRemoteDescription::preTransform', dumpSDP(description));\n\n    // TODO the focus should squeze or explode the remote simulcast\n    // eslint-disable-next-line no-param-reassign\n    description = this.simulcast.mungeRemoteDescription(description);\n    this.trace(\n        'setRemoteDescription::postTransform (simulcast)',\n        dumpSDP(description));\n\n    if (this.options.preferH264) {\n        const parsedSdp = transform.parse(description.sdp);\n        const videoMLine = parsedSdp.media.find(m => m.type === 'video');\n\n        SDPUtil.preferVideoCodec(videoMLine, 'h264');\n\n        // eslint-disable-next-line no-param-reassign\n        description = new RTCSessionDescription({\n            type: description.type,\n            sdp: transform.write(parsedSdp)\n        });\n    }\n\n    // If the browser uses unified plan, transform to it first\n    if (browser.usesUnifiedPlan()) {\n        // eslint-disable-next-line no-param-reassign\n        description = new RTCSessionDescription({\n            type: description.type,\n            sdp: this.rtxModifier.stripRtx(description.sdp)\n        });\n\n        this.trace(\n            'setRemoteDescription::postTransform (stripRtx)',\n            dumpSDP(description));\n\n        // eslint-disable-next-line no-param-reassign\n        description = this.interop.toUnifiedPlan(description);\n        this.trace(\n            'setRemoteDescription::postTransform (Plan A)',\n            dumpSDP(description));\n\n        if (this.isSimulcastOn()) {\n            // eslint-disable-next-line no-param-reassign\n            description = this._insertUnifiedPlanSimulcastReceive(description);\n            this.trace(\n                'setRemoteDescription::postTransform (sim receive)',\n                dumpSDP(description));\n        }\n    } else {\n        // Plan B\n        // eslint-disable-next-line no-param-reassign\n        description = normalizePlanB(description);\n    }\n\n    // Safari WebRTC errors when no supported video codec is found in the offer.\n    // To prevent the error, inject H264 into the video mLine.\n    if (browser.isSafariWithWebrtc()) {\n        logger.debug('Maybe injecting H264 into the remote description');\n\n        // eslint-disable-next-line no-param-reassign\n        description = this._injectH264IfNotPresent(description);\n    }\n\n    return new Promise((resolve, reject) => {\n        this.peerconnection.setRemoteDescription(description)\n            .then(() => {\n                this.trace('setRemoteDescriptionOnSuccess');\n                const remoteUfrag = SDPUtil.getUfrag(description.sdp);\n\n                if (remoteUfrag !== this.remoteUfrag) {\n                    this.remoteUfrag = remoteUfrag;\n                    this.eventEmitter.emit(\n                        RTCEvents.REMOTE_UFRAG_CHANGED, this, remoteUfrag);\n                }\n                resolve();\n            }, err => {\n                this.trace('setRemoteDescriptionOnFailure', err);\n                this.eventEmitter.emit(\n                    RTCEvents.SET_REMOTE_DESCRIPTION_FAILED,\n                    err,\n                    this);\n                reject(err);\n            });\n    });\n};\n\n/**\n * Inserts an H264 payload into the description if not already present. This is\n * need for Safari WebRTC, which errors when no supported video codec is found\n * in the offer. Related bug reports:\n * https://bugs.webkit.org/show_bug.cgi?id=173141\n * https://bugs.chromium.org/p/webrtc/issues/detail?id=4957\n *\n * @param {RTCSessionDescription} description - An RTCSessionDescription\n * to inject with an H264 payload.\n * @private\n * @returns {RTCSessionDescription}\n */\nTraceablePeerConnection.prototype._injectH264IfNotPresent = function(\n        description) {\n    const parsedSdp = transform.parse(description.sdp);\n    const videoMLine = parsedSdp.media.find(m => m.type === 'video');\n\n    if (!videoMLine) {\n        logger.debug('No videoMLine found, no need to inject H264.');\n\n        return description;\n    }\n\n    if (videoMLine.rtp.some(rtp => rtp.codec.toLowerCase() === 'h264')) {\n        logger.debug('H264 codec found in video mLine, no need to inject.');\n\n        return description;\n    }\n\n    const { fmtp, payloads, rtp } = videoMLine;\n    const payloadsArray = payloads.toString().split(' ');\n    let dummyPayloadType;\n\n    for (let i = 127; i >= 96; i--) {\n        if (!payloadsArray.includes(i)) {\n            dummyPayloadType = i;\n            payloadsArray.push(i);\n            videoMLine.payloads = payloadsArray.join(' ');\n            break;\n        }\n    }\n\n    if (typeof dummyPayloadType === 'undefined') {\n        logger.error('Could not find valid payload type to inject.');\n\n        return description;\n    }\n\n    rtp.push({\n        codec: 'H264',\n        payload: dummyPayloadType,\n        rate: 90000\n    });\n\n    fmtp.push({\n        config: 'level-asymmetry-allowed=1;'\n            + 'packetization-mode=1;'\n            + 'profile-level-id=42e01f',\n        payload: dummyPayloadType\n    });\n\n    logger.debug(\n        `Injecting H264 payload type ${dummyPayloadType} into video mLine.`);\n\n    return new RTCSessionDescription({\n        type: description.type,\n        sdp: transform.write(parsedSdp)\n    });\n};\n\n/**\n * Enables/disables video media transmission on this peer connection. When\n * disabled the SDP video media direction in the local SDP will be adjusted to\n * 'inactive' which means that no data will be sent nor accepted, but\n * the connection should be kept alive.\n * @param {boolean} active <tt>true</tt> to enable video media transmission or\n * <tt>false</tt> to disable. If the value is not a boolean the call will have\n * no effect.\n * @return {boolean} <tt>true</tt> if the value has changed and sRD/sLD cycle\n * needs to be executed in order for the changes to take effect or\n * <tt>false</tt> if the given value was the same as the previous one.\n * @public\n */\nTraceablePeerConnection.prototype.setVideoTransferActive = function(active) {\n    logger.debug(`${this} video transfer active: ${active}`);\n    const changed = this.videoTransferActive !== active;\n\n    this.videoTransferActive = active;\n\n    return changed;\n};\n\n/**\n * Makes the underlying TraceablePeerConnection generate new SSRC for\n * the recvonly video stream.\n */\nTraceablePeerConnection.prototype.generateRecvonlySsrc = function() {\n    const newSSRC = SDPUtil.generateSsrc();\n\n    logger.info(`${this} generated new recvonly SSRC: ${newSSRC}`);\n    this.sdpConsistency.setPrimarySsrc(newSSRC);\n};\n\n/**\n * Makes the underlying TraceablePeerConnection forget the current primary video\n * SSRC.\n */\nTraceablePeerConnection.prototype.clearRecvonlySsrc = function() {\n    logger.info('Clearing primary video SSRC!');\n    this.sdpConsistency.clearVideoSsrcCache();\n};\n\n/**\n * Closes underlying WebRTC PeerConnection instance and removes all remote\n * tracks by emitting {@link RTCEvents.REMOTE_TRACK_REMOVED} for each one of\n * them.\n */\nTraceablePeerConnection.prototype.close = function() {\n    this.trace('stop');\n\n    // Off SignalingEvents\n    this.signalingLayer.off(\n        SignalingEvents.PEER_MUTED_CHANGED, this._peerMutedChanged);\n    this.signalingLayer.off(\n        SignalingEvents.PEER_VIDEO_TYPE_CHANGED, this._peerVideoTypeChanged);\n\n    for (const peerTracks of this.remoteTracks.values()) {\n        for (const remoteTrack of peerTracks.values()) {\n            this._removeRemoteTrack(remoteTrack);\n        }\n    }\n    this.remoteTracks.clear();\n\n    this._addedStreams = [];\n\n    if (!this.rtc._removePeerConnection(this)) {\n        logger.error('RTC._removePeerConnection returned false');\n    }\n    if (this.statsinterval !== null) {\n        window.clearInterval(this.statsinterval);\n        this.statsinterval = null;\n    }\n    logger.info(`Closing ${this}...`);\n    this.peerconnection.close();\n};\n\n/**\n * Modifies the values of the setup attributes (defined by\n * {@link http://tools.ietf.org/html/rfc4145#section-4}) of a specific SDP\n * answer in order to overcome a delay of 1 second in the connection\n * establishment between Chrome and Videobridge.\n *\n * @param {SDP} offer - the SDP offer to which the specified SDP answer is\n * being prepared to respond\n * @param {SDP} answer - the SDP to modify\n * @private\n */\nconst _fixAnswerRFC4145Setup = function(offer, answer) {\n    if (!browser.isChrome()) {\n        // It looks like Firefox doesn't agree with the fix (at least in its\n        // current implementation) because it effectively remains active even\n        // after we tell it to become passive. Apart from Firefox which I tested\n        // after the fix was deployed, I tested Chrome only. In order to prevent\n        // issues with other browsers, limit the fix to Chrome for the time\n        // being.\n        return;\n    }\n\n    // XXX Videobridge is the (SDP) offerer and WebRTC (e.g. Chrome) is the\n    // answerer (as orchestrated by Jicofo). In accord with\n    // http://tools.ietf.org/html/rfc5245#section-5.2 and because both peers\n    // are ICE FULL agents, Videobridge will take on the controlling role and\n    // WebRTC will take on the controlled role. In accord with\n    // https://tools.ietf.org/html/rfc5763#section-5, Videobridge will use the\n    // setup attribute value of setup:actpass and WebRTC will be allowed to\n    // choose either the setup attribute value of setup:active or\n    // setup:passive. Chrome will by default choose setup:active because it is\n    // RECOMMENDED by the respective RFC since setup:passive adds additional\n    // latency. The case of setup:active allows WebRTC to send a DTLS\n    // ClientHello as soon as an ICE connectivity check of its succeeds.\n    // Unfortunately, Videobridge will be unable to respond immediately because\n    // may not have WebRTC's answer or may have not completed the ICE\n    // connectivity establishment. Even more unfortunate is that in the\n    // described scenario Chrome's DTLS implementation will insist on\n    // retransmitting its ClientHello after a second (the time is in accord\n    // with the respective RFC) and will thus cause the whole connection\n    // establishment to exceed at least 1 second. To work around Chrome's\n    // idiosyncracy, don't allow it to send a ClientHello i.e. change its\n    // default choice of setup:active to setup:passive.\n    if (offer && answer\n            && offer.media && answer.media\n            && offer.media.length === answer.media.length) {\n        answer.media.forEach((a, i) => {\n            if (SDPUtil.findLine(\n                    offer.media[i],\n                    'a=setup:actpass',\n                    offer.session)) {\n                answer.media[i]\n                    = a.replace(/a=setup:active/g, 'a=setup:passive');\n            }\n        });\n        answer.raw = answer.session + answer.media.join('');\n    }\n};\n\nTraceablePeerConnection.prototype.createAnswer = function(constraints) {\n    if (browser.supportsRtpSender() && this.isSimulcastOn()) {\n        const videoSender\n            = this.peerconnection.getSenders().find(sender =>\n                sender.track.kind === 'video');\n        const simParams = {\n            encodings: [\n                {\n                    rid: SIM_LAYER_1_RID,\n                    scaleResolutionDownBy: 4\n                },\n                {\n                    rid: SIM_LAYER_2_RID,\n                    scaleResolutionDownBy: 2\n                },\n                {\n                    rid: SIM_LAYER_3_RID\n                }\n            ]\n        };\n\n        videoSender.setParameters(simParams);\n    }\n\n    return this._createOfferOrAnswer(false /* answer */, constraints);\n};\n\nTraceablePeerConnection.prototype.createOffer = function(constraints) {\n    return this._createOfferOrAnswer(true /* offer */, constraints);\n};\n\nTraceablePeerConnection.prototype._createOfferOrAnswer = function(\n        isOffer,\n        constraints) {\n    const logName = isOffer ? 'Offer' : 'Answer';\n\n    this.trace(`create${logName}`, JSON.stringify(constraints, null, ' '));\n\n    const handleSuccess = (resultSdp, resolveFn, rejectFn) => {\n        try {\n            this.trace(\n                `create${logName}OnSuccess::preTransform`, dumpSDP(resultSdp));\n\n            // if we're using unified plan, transform to Plan B.\n            if (browser.usesUnifiedPlan()) {\n                // eslint-disable-next-line no-param-reassign\n                resultSdp = this.interop.toPlanB(resultSdp);\n                this.trace(\n                    `create${logName}OnSuccess::postTransform (Plan B)`,\n                    dumpSDP(resultSdp));\n                if (this.isSimulcastOn()) {\n                    // eslint-disable-next-line no-param-reassign\n                    resultSdp\n                        = this._injectSsrcGroupForUnifiedSimulcast(resultSdp);\n                    this.trace(\n                        `create${logName}OnSuccess::postTransform`\n                        + '(inject ssrc group)', dumpSDP(resultSdp));\n                }\n            }\n\n            /**\n             * We don't keep ssrcs consitent for Firefox because rewriting\n             *  the ssrcs between createAnswer and setLocalDescription breaks\n             *  the caching in sdp-interop (sdp-interop must know about all\n             *  ssrcs, and it updates its cache in toPlanB so if we rewrite them\n             *  after that, when we try and go back to unified plan it will\n             *  complain about unmapped ssrcs)\n             */\n            if (!browser.isFirefox()) {\n                // If there are no local video tracks, then a \"recvonly\"\n                // SSRC needs to be generated\n                if (!this.hasAnyTracksOfType(MediaType.VIDEO)\n                    && !this.sdpConsistency.hasPrimarySsrcCached()) {\n                    this.generateRecvonlySsrc();\n                }\n\n                // eslint-disable-next-line no-param-reassign\n                resultSdp = new RTCSessionDescription({\n                    type: resultSdp.type,\n                    sdp: this.sdpConsistency.makeVideoPrimarySsrcsConsistent(\n                        resultSdp.sdp)\n                });\n\n                this.trace(\n                    `create${logName}OnSuccess::postTransform `\n                         + '(make primary audio/video ssrcs consistent)',\n                    dumpSDP(resultSdp));\n            }\n\n            // Add simulcast streams if simulcast is enabled\n            if (this.isSimulcastOn()) {\n                // eslint-disable-next-line no-param-reassign\n                resultSdp = this.simulcast.mungeLocalDescription(resultSdp);\n                this.trace(\n                    `create${logName}`\n                        + 'OnSuccess::postTransform (simulcast)',\n                    dumpSDP(resultSdp));\n            }\n\n            if (!this.options.disableRtx && browser.supportsRtx()) {\n                // eslint-disable-next-line no-param-reassign\n                resultSdp = new RTCSessionDescription({\n                    type: resultSdp.type,\n                    sdp: this.rtxModifier.modifyRtxSsrcs(resultSdp.sdp)\n                });\n\n                this.trace(\n                    `create${logName}`\n                         + 'OnSuccess::postTransform (rtx modifier)',\n                    dumpSDP(resultSdp));\n            }\n\n            // Fix the setup attribute (see _fixAnswerRFC4145Setup for\n            //  details)\n            if (!isOffer) {\n                const remoteDescription\n                    = new SDP(this.remoteDescription.sdp);\n                const localDescription = new SDP(resultSdp.sdp);\n\n                _fixAnswerRFC4145Setup(remoteDescription, localDescription);\n\n                // eslint-disable-next-line no-param-reassign\n                resultSdp = new RTCSessionDescription({\n                    type: resultSdp.type,\n                    sdp: localDescription.raw\n                });\n            }\n\n            const ssrcMap = extractSSRCMap(resultSdp);\n\n            logger.debug('Got local SSRCs MAP: ', ssrcMap);\n            this._processLocalSSRCsMap(ssrcMap);\n\n            resolveFn(resultSdp);\n        } catch (e) {\n            this.trace(`create${logName}OnError`, e);\n            this.trace(`create${logName}OnError`, dumpSDP(resultSdp));\n            logger.error(`create${logName}OnError`, e, dumpSDP(resultSdp));\n\n            rejectFn(e);\n        }\n    };\n\n    const handleFailure = (err, rejectFn) => {\n        this.trace(`create${logName}OnFailure`, err);\n        const eventType\n            = isOffer\n                ? RTCEvents.CREATE_OFFER_FAILED\n                : RTCEvents.CREATE_ANSWER_FAILED;\n\n        this.eventEmitter.emit(eventType, err, this);\n\n        rejectFn(err);\n    };\n\n    return new Promise((resolve, reject) => {\n        let oaPromise;\n\n        if (isOffer) {\n            oaPromise = this.peerconnection.createOffer(constraints);\n        } else {\n            oaPromise = this.peerconnection.createAnswer(constraints);\n        }\n\n        oaPromise\n            .then(\n                sdp => handleSuccess(sdp, resolve, reject),\n                error => handleFailure(error, reject));\n    });\n};\n\n/**\n * Extract primary SSRC from given {@link TrackSSRCInfo} object.\n * @param {TrackSSRCInfo} ssrcObj\n * @return {number|null} the primary SSRC or <tt>null</tt>\n */\nfunction extractPrimarySSRC(ssrcObj) {\n    if (ssrcObj && ssrcObj.groups && ssrcObj.groups.length) {\n        return ssrcObj.groups[0].ssrcs[0];\n    } else if (ssrcObj && ssrcObj.ssrcs && ssrcObj.ssrcs.length) {\n        return ssrcObj.ssrcs[0];\n    }\n\n    return null;\n}\n\n/**\n * Goes over the SSRC map extracted from the latest local description and tries\n * to match them with the local tracks (by MSID). Will update the values\n * currently stored in the {@link TraceablePeerConnection.localSSRCs} map.\n * @param {Map<string,TrackSSRCInfo>} ssrcMap\n * @private\n */\nTraceablePeerConnection.prototype._processLocalSSRCsMap = function(ssrcMap) {\n    for (const track of this.localTracks.values()) {\n        const trackMSID = track.storedMSID;\n\n        if (ssrcMap.has(trackMSID)) {\n            const newSSRC = ssrcMap.get(trackMSID);\n\n            if (!newSSRC) {\n                logger.error(`No SSRC found for: ${trackMSID} in ${this}`);\n\n                return;\n            }\n            const oldSSRC = this.localSSRCs.get(track.rtcId);\n            const newSSRCNum = extractPrimarySSRC(newSSRC);\n            const oldSSRCNum = extractPrimarySSRC(oldSSRC);\n\n            // eslint-disable-next-line no-negated-condition\n            if (newSSRCNum !== oldSSRCNum) {\n                if (oldSSRCNum === null) {\n                    logger.info(\n                        `Storing new local SSRC for ${track} in ${this}`,\n                        newSSRC);\n                } else {\n                    logger.error(\n                        `Overwriting SSRC for ${track} ${trackMSID} in ${this\n                        } with: `, newSSRC);\n                }\n                this.localSSRCs.set(track.rtcId, newSSRC);\n\n                this.eventEmitter.emit(\n                    RTCEvents.LOCAL_TRACK_SSRC_UPDATED, track, newSSRCNum);\n            } else {\n                logger.debug(\n                    `The local SSRC(${newSSRCNum}) for ${track} ${trackMSID}`\n                     + `is still up to date in ${this}`);\n            }\n        } else {\n            logger.warn(`No local track matched with: ${trackMSID} in ${this}`);\n        }\n    }\n};\n\nTraceablePeerConnection.prototype.addIceCandidate = function(candidate) {\n    this.trace('addIceCandidate', JSON.stringify({\n        candidate: candidate.candidate,\n        sdpMid: candidate.sdpMid,\n        sdpMLineIndex: candidate.sdpMLineIndex,\n        usernameFragment: candidate.usernameFragment\n    }, null, ' '));\n\n    return this.peerconnection.addIceCandidate(candidate);\n};\n\n/**\n * Obtains call-related stats from the peer connection.\n *\n * @param {Function} callback - The function to invoke after successfully\n * obtaining stats.\n * @param {Function} errback - The function to invoke after failing to obtain\n * stats.\n * @returns {void}\n */\nTraceablePeerConnection.prototype.getStats = function(callback, errback) {\n    // TODO (brian): After moving all browsers to adapter, check if adapter is\n    // accounting for different getStats apis, making the browser-checking-if\n    // unnecessary.\n    if (browser.isSafariWithWebrtc() || browser.isFirefox()\n            || browser.isReactNative()) {\n        // uses the new Promise based getStats\n        this.peerconnection.getStats()\n            .then(callback)\n            .catch(errback || (() => {\n\n                // Making sure that getStats won't fail if error callback is\n                // not passed.\n            }));\n    } else {\n        this.peerconnection.getStats(callback);\n    }\n};\n\n/**\n * Generates and stores new SSRC info object for given local track.\n * The method should be called only for a video track being added to this TPC\n * in the muted state (given that the current browser uses this strategy).\n * @param {JitsiLocalTrack} track\n * @return {TPCSSRCInfo}\n */\nTraceablePeerConnection.prototype.generateNewStreamSSRCInfo = function(track) {\n    const rtcId = track.rtcId;\n    let ssrcInfo = this._getSSRC(rtcId);\n\n    if (ssrcInfo) {\n        logger.error(`Will overwrite local SSRCs for track ID: ${rtcId}`);\n    }\n    if (this.isSimulcastOn()) {\n        ssrcInfo = {\n            ssrcs: [],\n            groups: []\n        };\n        for (let i = 0; i < SIMULCAST_LAYERS; i++) {\n            ssrcInfo.ssrcs.push(SDPUtil.generateSsrc());\n        }\n        ssrcInfo.groups.push({\n            ssrcs: ssrcInfo.ssrcs.slice(),\n            semantics: 'SIM'\n        });\n    } else {\n        ssrcInfo = {\n            ssrcs: [ SDPUtil.generateSsrc() ],\n            groups: []\n        };\n    }\n    if (!this.options.disableRtx && browser.supportsRtx()) {\n        // Specifically use a for loop here because we'll\n        //  be adding to the list we're iterating over, so we\n        //  only want to iterate through the items originally\n        //  on the list\n        const currNumSsrcs = ssrcInfo.ssrcs.length;\n\n        for (let i = 0; i < currNumSsrcs; ++i) {\n            const primarySsrc = ssrcInfo.ssrcs[i];\n            const rtxSsrc = SDPUtil.generateSsrc();\n\n            ssrcInfo.ssrcs.push(rtxSsrc);\n            ssrcInfo.groups.push({\n                ssrcs: [ primarySsrc, rtxSsrc ],\n                semantics: 'FID'\n            });\n        }\n    }\n    ssrcInfo.msid = track.storedMSID;\n    this.localSSRCs.set(rtcId, ssrcInfo);\n\n    return ssrcInfo;\n};\n\nconst handleLayerSuspension = function(peerConnection, isSelected) {\n    const videoSender = peerConnection.getSenders()\n        .find(sender => sender.track.kind === 'video');\n\n    if (!videoSender) {\n        logger.warn('handleLayerSuspension unable to find video sender');\n\n        return;\n    }\n    if (!videoSender.getParameters) {\n        logger.debug('Browser doesn\\'t support RTPSender parameters');\n\n        return;\n    }\n    const parameters = videoSender.getParameters();\n\n    if (isSelected) {\n        logger.debug('Currently selected, enabling all sim layers');\n\n        // Make sure all encodings are enabled\n        parameters.encodings.forEach(e => {\n            e.active = true;\n        });\n    } else {\n        logger.debug('Not currently selected, disabling upper layers');\n\n        // Turn off the upper simulcast layers\n        [ 1, 2 ].forEach(simIndex => {\n            if (parameters.encodings[simIndex]) {\n                parameters.encodings[simIndex].active = false;\n            }\n        });\n    }\n    videoSender.setParameters(parameters);\n};\n\n/**\n * Set whether or not the endpoint is 'selected' by other endpoints, meaning\n * it appears on their main stage\n */\nTraceablePeerConnection.prototype.setIsSelected = function(isSelected) {\n    if (this.options.enableLayerSuspension) {\n        logger.debug('Layer suspension enabled,'\n            + `currently selected? ${isSelected}`);\n        handleLayerSuspension(this.peerconnection, isSelected);\n    }\n};\n\n/**\n * Creates a text representation of this <tt>TraceablePeerConnection</tt>\n * instance.\n * @return {string}\n */\nTraceablePeerConnection.prototype.toString = function() {\n    return `TPC[${this.id},p2p:${this.isP2P}]`;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/TraceablePeerConnection.js","import { createTtfmEvent } from '../../service/statistics/AnalyticsEvents';\nimport JitsiTrack from './JitsiTrack';\nimport * as JitsiTrackEvents from '../../JitsiTrackEvents';\nimport Statistics from '../statistics/statistics';\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\nconst RTCEvents = require('../../service/RTC/RTCEvents');\n\nlet ttfmTrackerAudioAttached = false;\nlet ttfmTrackerVideoAttached = false;\n\n/* eslint-disable max-params */\n\n/**\n * Represents a single media track (either audio or video).\n */\nexport default class JitsiRemoteTrack extends JitsiTrack {\n    /**\n     * Creates new JitsiRemoteTrack instance.\n     * @param {RTC} rtc the RTC service instance.\n     * @param {JitsiConference} conference the conference to which this track\n     *        belongs to\n     * @param {string} ownerEndpointId the endpoint ID of the track owner\n     * @param {MediaStream} stream WebRTC MediaStream, parent of the track\n     * @param {MediaStreamTrack} track underlying WebRTC MediaStreamTrack for\n     *        the new JitsiRemoteTrack\n     * @param {MediaType} mediaType the type of the media\n     * @param {VideoType} videoType the type of the video if applicable\n     * @param {number} ssrc the SSRC number of the Media Stream\n     * @param {boolean} muted the initial muted state\n     * @param {boolean} isP2P indicates whether or not this track belongs to a\n     * P2P session\n     * @throws {TypeError} if <tt>ssrc</tt> is not a number.\n     * @constructor\n     */\n    constructor(\n            rtc,\n            conference,\n            ownerEndpointId,\n            stream,\n            track,\n            mediaType,\n            videoType,\n            ssrc,\n            muted,\n            isP2P) {\n        super(\n            conference,\n            stream,\n            track,\n            () => {\n                // Nothing to do if the track is inactive.\n            },\n            mediaType,\n            videoType);\n        this.rtc = rtc;\n\n        // Prevent from mixing up type of SSRC which should be a number\n        if (typeof ssrc !== 'number') {\n            throw new TypeError(`SSRC ${ssrc} is not a number`);\n        }\n        this.ssrc = ssrc;\n        this.ownerEndpointId = ownerEndpointId;\n        this.muted = muted;\n        this.isP2P = isP2P;\n\n        // we want to mark whether the track has been ever muted\n        // to detect ttfm events for startmuted conferences, as it can\n        // significantly increase ttfm values\n        this.hasBeenMuted = muted;\n\n        // Bind 'onmute' and 'onunmute' event handlers\n        if (this.rtc && this.track) {\n            this._bindMuteHandlers();\n        }\n    }\n\n    /* eslint-enable max-params */\n    /**\n     * Attaches the track muted handlers.\n     *\n     * @returns {void}\n     */\n    _bindMuteHandlers() {\n        this.track.addEventListener('mute', () => this._onTrackMute());\n        this.track.addEventListener('unmute', () => this._onTrackUnmute());\n    }\n\n    /**\n     * Callback invoked when the track is muted. Emits an event notifying\n     * listeners of the mute event.\n     *\n     * @private\n     * @returns {void}\n     */\n    _onTrackMute() {\n        logger.debug(\n            `\"onmute\" event(${Date.now()}): `,\n            this.getParticipantId(), this.getType(), this.getSSRC());\n\n        this.rtc.eventEmitter.emit(RTCEvents.REMOTE_TRACK_MUTE, this);\n    }\n\n    /**\n     * Callback invoked when the track is unmuted. Emits an event notifying\n     * listeners of the mute event.\n     *\n     * @private\n     * @returns {void}\n     */\n    _onTrackUnmute() {\n        logger.debug(\n            `\"onunmute\" event(${Date.now()}): `,\n            this.getParticipantId(), this.getType(), this.getSSRC());\n\n        this.rtc.eventEmitter.emit(RTCEvents.REMOTE_TRACK_UNMUTE, this);\n    }\n\n    /**\n     * Sets current muted status and fires an events for the change.\n     * @param value the muted status.\n     */\n    setMute(value) {\n        if (this.muted === value) {\n            return;\n        }\n\n        if (value) {\n            this.hasBeenMuted = true;\n        }\n\n        // we can have a fake video stream\n        if (this.stream) {\n            this.stream.muted = value;\n        }\n\n        this.muted = value;\n        this.emit(JitsiTrackEvents.TRACK_MUTE_CHANGED, this);\n    }\n\n    /**\n     * Returns the current muted status of the track.\n     * @returns {boolean|*|JitsiRemoteTrack.muted} <tt>true</tt> if the track is\n     * muted and <tt>false</tt> otherwise.\n     */\n    isMuted() {\n        return this.muted;\n    }\n\n    /**\n     * Returns the participant id which owns the track.\n     *\n     * @returns {string} the id of the participants. It corresponds to the\n     * Colibri endpoint id/MUC nickname in case of Jitsi-meet.\n     */\n    getParticipantId() {\n        return this.ownerEndpointId;\n    }\n\n    /**\n     * Return false;\n     */\n    isLocal() {\n        return false;\n    }\n\n    /**\n     * Returns the synchronization source identifier (SSRC) of this remote\n     * track.\n     *\n     * @returns {number} the SSRC of this remote track.\n     */\n    getSSRC() {\n        return this.ssrc;\n    }\n\n    /**\n     * Changes the video type of the track.\n     *\n     * @param {string} type - The new video type(\"camera\", \"desktop\").\n     */\n    _setVideoType(type) {\n        if (this.videoType === type) {\n            return;\n        }\n        this.videoType = type;\n        this.emit(JitsiTrackEvents.TRACK_VIDEOTYPE_CHANGED, type);\n    }\n\n    /**\n     * Handles track play events.\n     */\n    _playCallback() {\n        const type = this.isVideoTrack() ? 'video' : 'audio';\n\n        const now = window.performance.now();\n\n        console.log(`(TIME) Render ${type}:\\t`, now);\n        this.conference.getConnectionTimes()[`${type}.render`] = now;\n\n        // The conference can be started without calling GUM\n        // FIXME if there would be a module for connection times this kind\n        // of logic (gumDuration or ttfm) should end up there\n        const gumStart = window.connectionTimes['obtainPermissions.start'];\n        const gumEnd = window.connectionTimes['obtainPermissions.end'];\n        const gumDuration\n            = !isNaN(gumEnd) && !isNaN(gumStart) ? gumEnd - gumStart : 0;\n\n        // Subtract the muc.joined-to-session-initiate duration because jicofo\n        // waits until there are 2 participants to start Jingle sessions.\n        const ttfm = now\n            - (this.conference.getConnectionTimes()['session.initiate']\n                - this.conference.getConnectionTimes()['muc.joined'])\n            - gumDuration;\n\n        this.conference.getConnectionTimes()[`${type}.ttfm`] = ttfm;\n        console.log(`(TIME) TTFM ${type}:\\t`, ttfm);\n\n        Statistics.sendAnalytics(createTtfmEvent(\n            {\n                'media_type': type,\n                muted: this.hasBeenMuted,\n                value: ttfm\n            }));\n\n    }\n\n    /**\n     * Attach time to first media tracker only if there is conference and only\n     * for the first element.\n     * @param container the HTML container which can be 'video' or 'audio'\n     * element.\n     * @private\n     */\n    _attachTTFMTracker(container) {\n        if ((ttfmTrackerAudioAttached && this.isAudioTrack())\n            || (ttfmTrackerVideoAttached && this.isVideoTrack())) {\n            return;\n        }\n\n        if (this.isAudioTrack()) {\n            ttfmTrackerAudioAttached = true;\n        }\n        if (this.isVideoTrack()) {\n            ttfmTrackerVideoAttached = true;\n        }\n\n        container.addEventListener('canplay', this._playCallback.bind(this));\n    }\n\n    /**\n     * Creates a text representation of this remote track instance.\n     * @return {string}\n     */\n    toString() {\n        return `RemoteTrack[${\n            this.ownerEndpointId}, ${\n            this.getType()}, p2p: ${\n            this.isP2P}]`;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/JitsiRemoteTrack.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport { SdpTransformWrap } from '../xmpp/SdpTransformUtil';\n\nconst logger = getLogger(__filename);\n\n/**\n * Fakes local SDP exposed to {@link JingleSessionPC} through the local\n * description getter. Modifies the SDP, so that it will contain muted local\n * video tracks description, even though their underlying {MediaStreamTrack}s\n * are no longer in the WebRTC peerconnection. That prevents from SSRC updates\n * being sent to Jicofo/remote peer and prevents sRD/sLD cycle on the remote\n * side.\n */\nexport default class LocalSdpMunger {\n\n    /**\n     * Creates new <tt>LocalSdpMunger</tt> instance.\n     *\n     * @param {TraceablePeerConnection} tpc\n     */\n    constructor(tpc) {\n        this.tpc = tpc;\n    }\n\n    /**\n     * Makes sure that muted local video tracks associated with the parent\n     * {@link TraceablePeerConnection} are described in the local SDP. It's done\n     * in order to prevent from sending 'source-remove'/'source-add' Jingle\n     * notifications when local video track is muted (<tt>MediaStream</tt> is\n     * removed from the peerconnection).\n     *\n     * NOTE 1 video track is assumed\n     *\n     * @param {SdpTransformWrap} transformer the transformer instance which will\n     * be used to process the SDP.\n     * @return {boolean} <tt>true</tt> if there were any modifications to\n     * the SDP wrapped by <tt>transformer</tt>.\n     * @private\n     */\n    _addMutedLocalVideoTracksToSDP(transformer) {\n        // Go over each video tracks and check if the SDP has to be changed\n        const localVideos = this.tpc.getLocalTracks(MediaType.VIDEO);\n\n        if (!localVideos.length) {\n            return false;\n        } else if (localVideos.length !== 1) {\n            logger.error(\n                `${this.tpc} there is more than 1 video track ! `\n                    + 'Strange things may happen !', localVideos);\n        }\n\n        const videoMLine = transformer.selectMedia('video');\n\n        if (!videoMLine) {\n            logger.debug(\n                `${this.tpc} unable to hack local video track SDP`\n                    + '- no \"video\" media');\n\n            return false;\n        }\n\n        let modified = false;\n\n        for (const videoTrack of localVideos) {\n            const muted = videoTrack.isMuted();\n            const mediaStream = videoTrack.getOriginalStream();\n\n            // During the mute/unmute operation there are periods of time when\n            // the track's underlying MediaStream is not added yet to\n            // the PeerConnection. The SDP needs to be munged in such case.\n            const isInPeerConnection\n                = mediaStream && this.tpc.isMediaStreamInPc(mediaStream);\n            const shouldFakeSdp = muted || !isInPeerConnection;\n\n            logger.debug(\n                `${this.tpc} ${videoTrack} muted: ${\n                    muted}, is in PeerConnection: ${\n                    isInPeerConnection} => should fake sdp ? : ${\n                    shouldFakeSdp}`);\n\n            if (!shouldFakeSdp) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            // Inject removed SSRCs\n            const requiredSSRCs\n                = this.tpc.isSimulcastOn()\n                    ? this.tpc.simulcast.ssrcCache\n                    : [ this.tpc.sdpConsistency.cachedPrimarySsrc ];\n\n            if (!requiredSSRCs.length) {\n                logger.error(\n                    `No SSRCs stored for: ${videoTrack} in ${this.tpc}`);\n\n                continue; // eslint-disable-line no-continue\n            }\n\n            modified = true;\n\n            // We need to fake sendrecv.\n            // NOTE the SDP produced here goes only to Jicofo and is never set\n            // as localDescription. That's why\n            // TraceablePeerConnection.mediaTransferActive is ignored here.\n            videoMLine.direction = 'sendrecv';\n\n            // Check if the recvonly has MSID\n            const primarySSRC = requiredSSRCs[0];\n\n            // FIXME The cname could come from the stream, but may turn out to\n            // be too complex. It is fine to come up with any value, as long as\n            // we only care about the actual SSRC values when deciding whether\n            // or not an update should be sent.\n            const primaryCname = `injected-${primarySSRC}`;\n\n            for (const ssrcNum of requiredSSRCs) {\n                // Remove old attributes\n                videoMLine.removeSSRC(ssrcNum);\n\n                // Inject\n                logger.debug(\n                    `${this.tpc} injecting video SSRC: ${ssrcNum} for ${\n                        videoTrack}`);\n                videoMLine.addSSRCAttribute({\n                    id: ssrcNum,\n                    attribute: 'cname',\n                    value: primaryCname\n                });\n                videoMLine.addSSRCAttribute({\n                    id: ssrcNum,\n                    attribute: 'msid',\n                    value: videoTrack.storedMSID\n                });\n            }\n            if (requiredSSRCs.length > 1) {\n                const group = {\n                    ssrcs: requiredSSRCs.join(' '),\n                    semantics: 'SIM'\n                };\n\n                if (!videoMLine.findGroup(group.semantics, group.ssrcs)) {\n                    // Inject the group\n                    logger.debug(\n                        `${this.tpc} injecting SIM group for ${videoTrack}`,\n                        group);\n                    videoMLine.addSSRCGroup(group);\n                }\n            }\n\n            // Insert RTX\n            // FIXME in P2P RTX is used by Chrome regardless of config option\n            // status. Because of that 'source-remove'/'source-add'\n            // notifications are still sent to remove/add RTX SSRC and FID group\n            if (!this.tpc.options.disableRtx) {\n                this.tpc.rtxModifier.modifyRtxSsrcs2(videoMLine);\n            }\n        }\n\n        return modified;\n    }\n\n    /**\n     * Modifies 'cname', 'msid', 'label' and 'mslabel' by appending\n     * the id of {@link LocalSdpMunger#tpc} at the end, preceding by a dash\n     * sign.\n     *\n     * @param {MLineWrap} mediaSection - The media part (audio or video) of the\n     * session description which will be modified in place.\n     * @returns {void}\n     * @private\n     */\n    _transformMediaIdentifiers(mediaSection) {\n        const pcId = this.tpc.id;\n\n        for (const ssrcLine of mediaSection.ssrcs) {\n            switch (ssrcLine.attribute) {\n            case 'cname':\n            case 'label':\n            case 'mslabel':\n                ssrcLine.value = ssrcLine.value && `${ssrcLine.value}-${pcId}`;\n                break;\n            case 'msid': {\n                if (ssrcLine.value) {\n                    const streamAndTrackIDs = ssrcLine.value.split(' ');\n\n                    if (streamAndTrackIDs.length === 2) {\n                        const streamId = streamAndTrackIDs[0];\n                        const trackId = streamAndTrackIDs[1];\n\n                        ssrcLine.value\n                            = `${streamId}-${pcId} ${trackId}-${pcId}`;\n                    } else {\n                        logger.warn(\n                            'Unable to munge local MSID'\n                                + `- weird format detected: ${ssrcLine.value}`);\n                    }\n                }\n                break;\n            }\n            }\n        }\n    }\n\n    /**\n     * Maybe modifies local description to fake local video tracks SDP when\n     * those are muted.\n     *\n     * @param {object} desc the WebRTC SDP object instance for the local\n     * description.\n     * @returns {RTCSessionDescription}\n     */\n    maybeAddMutedLocalVideoTracksToSDP(desc) {\n        if (!desc) {\n            throw new Error('No local description passed in.');\n        }\n\n        const transformer = new SdpTransformWrap(desc.sdp);\n\n        if (this._addMutedLocalVideoTracksToSDP(transformer)) {\n            return new RTCSessionDescription({\n                type: desc.type,\n                sdp: transformer.toRawSDP()\n            });\n        }\n\n        return desc;\n    }\n\n    /**\n     * This transformation will make sure that stream identifiers are unique\n     * across all of the local PeerConnections even if the same stream is used\n     * by multiple instances at the same time.\n     * Each PeerConnection assigns different SSRCs to the same local\n     * MediaStream, but the MSID remains the same as it's used to identify\n     * the stream by the WebRTC backend. The transformation will append\n     * {@link TraceablePeerConnection#id} at the end of each stream's identifier\n     * (\"cname\", \"msid\", \"label\" and \"mslabel\").\n     *\n     * @param {RTCSessionDescription} sessionDesc - The local session\n     * description (this instance remains unchanged).\n     * @return {RTCSessionDescription} - Transformed local session description\n     * (a modified copy of the one given as the input).\n     */\n    transformStreamIdentifiers(sessionDesc) {\n        // FIXME similar check is probably duplicated in all other transformers\n        if (!sessionDesc || !sessionDesc.sdp || !sessionDesc.type) {\n            return sessionDesc;\n        }\n\n        const transformer = new SdpTransformWrap(sessionDesc.sdp);\n        const audioMLine = transformer.selectMedia('audio');\n\n        if (audioMLine) {\n            this._transformMediaIdentifiers(audioMLine);\n        }\n\n        const videoMLine = transformer.selectMedia('video');\n\n        if (videoMLine) {\n            this._transformMediaIdentifiers(videoMLine);\n        }\n\n        return new RTCSessionDescription({\n            type: sessionDesc.type,\n            sdp: transformer.toRawSDP()\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/LocalSdpMunger.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport { parseSecondarySSRC, SdpTransformWrap } from './SdpTransformUtil';\nimport SDPUtil from './SDPUtil';\n\nconst logger = getLogger(__filename);\n\n/**\n * Begin helper functions\n */\n/**\n * Updates or inserts the appropriate rtx information for primarySsrc with\n *  the given rtxSsrc.  If no rtx ssrc for primarySsrc currently exists, it will\n *  add the appropriate ssrc and ssrc group lines.  If primarySsrc already has\n *  an rtx ssrc, the appropriate ssrc and group lines will be updated\n * @param {MLineWrap} mLine\n * @param {object} primarySsrcInfo the info (ssrc, msid & cname) for the\n *  primary ssrc\n * @param {number} rtxSsrc the rtx ssrc to associate with the primary ssrc\n */\nfunction updateAssociatedRtxStream(mLine, primarySsrcInfo, rtxSsrc) {\n    logger.debug(\n        `Updating mline to associate ${rtxSsrc}`\n        + `rtx ssrc with primary stream, ${primarySsrcInfo.id}`);\n    const primarySsrc = primarySsrcInfo.id;\n    const primarySsrcMsid = primarySsrcInfo.msid;\n    const primarySsrcCname = primarySsrcInfo.cname;\n\n    const previousRtxSSRC = mLine.getRtxSSRC(primarySsrc);\n\n    if (previousRtxSSRC === rtxSsrc) {\n        logger.debug(`${rtxSsrc} was already associated with ${primarySsrc}`);\n\n        return;\n    }\n    if (previousRtxSSRC) {\n        logger.debug(\n            `${primarySsrc} was previously associated with rtx`\n            + `${previousRtxSSRC}, removing all references to it`);\n\n        // Stream already had an rtx ssrc that is different than the one given,\n        //  remove all trace of the old one\n        mLine.removeSSRC(previousRtxSSRC);\n\n        logger.debug(`groups before filtering for ${previousRtxSSRC}`);\n        logger.debug(mLine.dumpSSRCGroups());\n\n        mLine.removeGroupsWithSSRC(previousRtxSSRC);\n    }\n    mLine.addSSRCAttribute({\n        id: rtxSsrc,\n        attribute: 'cname',\n        value: primarySsrcCname\n    });\n    mLine.addSSRCAttribute({\n        id: rtxSsrc,\n        attribute: 'msid',\n        value: primarySsrcMsid\n    });\n    mLine.addSSRCGroup({\n        semantics: 'FID',\n        ssrcs: `${primarySsrc} ${rtxSsrc}`\n    });\n}\n\n/**\n * End helper functions\n */\n\n/**\n * Adds any missing RTX streams for video streams\n *  and makes sure that they remain consistent\n */\nexport default class RtxModifier {\n    /**\n     * Constructor\n     */\n    constructor() {\n        /**\n         * Map of video ssrc to corresponding RTX\n         *  ssrc\n         */\n        this.correspondingRtxSsrcs = new Map();\n    }\n\n    /**\n     * Clear the cached map of primary video ssrcs to\n     *  their corresponding rtx ssrcs so that they will\n     *  not be used for the next call to modifyRtxSsrcs\n     */\n    clearSsrcCache() {\n        this.correspondingRtxSsrcs.clear();\n    }\n\n    /**\n     * Explicitly set the primary video ssrc -> rtx ssrc\n     *  mapping to be used in modifyRtxSsrcs\n     * @param {Map} ssrcMapping a mapping of primary video\n     *  ssrcs to their corresponding rtx ssrcs\n     */\n    setSsrcCache(ssrcMapping) {\n        logger.debug('Setting ssrc cache to ', ssrcMapping);\n        this.correspondingRtxSsrcs = ssrcMapping;\n    }\n\n    /**\n     * Adds RTX ssrcs for any video ssrcs that don't\n     *  already have them.  If the video ssrc has been\n     *  seen before, and already had an RTX ssrc generated,\n     *  the same RTX ssrc will be used again.\n     * @param {string} sdpStr sdp in raw string format\n     */\n    modifyRtxSsrcs(sdpStr) {\n        const sdpTransformer = new SdpTransformWrap(sdpStr);\n        const videoMLine = sdpTransformer.selectMedia('video');\n\n        if (!videoMLine) {\n            logger.debug(`No 'video' media found in the sdp: ${sdpStr}`);\n\n            return sdpStr;\n        }\n\n        return this.modifyRtxSsrcs2(videoMLine)\n            ? sdpTransformer.toRawSDP() : sdpStr;\n    }\n\n    /**\n     * Does the same thing as {@link modifyRtxSsrcs}, but takes the\n     *  {@link MLineWrap} instance wrapping video media as an argument.\n     * @param {MLineWrap} videoMLine\n     * @return {boolean} <tt>true</tt> if the SDP wrapped by\n     *  {@link SdpTransformWrap} has been modified or <tt>false</tt> otherwise.\n     */\n    modifyRtxSsrcs2(videoMLine) {\n        if (videoMLine.direction === 'recvonly') {\n            logger.debug('RtxModifier doing nothing, video m line is recvonly');\n\n            return false;\n        }\n        if (videoMLine.getSSRCCount() < 1) {\n            logger.debug('RtxModifier doing nothing, no video ssrcs present');\n\n            return false;\n        }\n        logger.debug('Current ssrc mapping: ', this.correspondingRtxSsrcs);\n        const primaryVideoSsrcs = videoMLine.getPrimaryVideoSSRCs();\n\n        logger.debug('Parsed primary video ssrcs ', primaryVideoSsrcs,\n            ' making sure all have rtx streams');\n        for (const ssrc of primaryVideoSsrcs) {\n            const msid = videoMLine.getSSRCAttrValue(ssrc, 'msid');\n            const cname = videoMLine.getSSRCAttrValue(ssrc, 'cname');\n            let correspondingRtxSsrc = this.correspondingRtxSsrcs.get(ssrc);\n\n            if (correspondingRtxSsrc) {\n                logger.debug(\n                    'Already have an associated rtx ssrc for'\n                    + `video ssrc ${ssrc}: ${correspondingRtxSsrc}`);\n            } else {\n                logger.debug(\n                    `No previously associated rtx ssrc for video ssrc ${ssrc}`);\n\n                // If there's one in the sdp already for it, we'll just set\n                //  that as the corresponding one\n                const previousAssociatedRtxStream = videoMLine.getRtxSSRC(ssrc);\n\n                if (previousAssociatedRtxStream) {\n                    logger.debug(\n                        `Rtx stream ${previousAssociatedRtxStream} `\n                        + 'already existed in the sdp as an rtx stream for '\n                        + `${ssrc}`);\n                    correspondingRtxSsrc = previousAssociatedRtxStream;\n                } else {\n                    correspondingRtxSsrc = SDPUtil.generateSsrc();\n                    logger.debug(`Generated rtx ssrc ${correspondingRtxSsrc} `\n                                 + `for ssrc ${ssrc}`);\n                }\n                logger.debug(`Caching rtx ssrc ${correspondingRtxSsrc} `\n                             + `for video ssrc ${ssrc}`);\n                this.correspondingRtxSsrcs.set(ssrc, correspondingRtxSsrc);\n            }\n            updateAssociatedRtxStream(\n                videoMLine,\n                {\n                    id: ssrc,\n                    cname,\n                    msid\n                },\n                correspondingRtxSsrc);\n        }\n\n        // FIXME we're not looking into much details whether the SDP has been\n        // modified or not once the precondition requirements are met.\n        return true;\n    }\n\n    /**\n     * Strip all rtx streams from the given sdp\n     * @param {string} sdpStr sdp in raw string format\n     * @returns {string} sdp string with all rtx streams stripped\n     */\n    stripRtx(sdpStr) {\n        const sdpTransformer = new SdpTransformWrap(sdpStr);\n        const videoMLine = sdpTransformer.selectMedia('video');\n\n        if (!videoMLine) {\n            logger.debug(`No 'video' media found in the sdp: ${sdpStr}`);\n\n            return sdpStr;\n        }\n        if (videoMLine.direction === 'recvonly') {\n            logger.debug('RtxModifier doing nothing, video m line is recvonly');\n\n            return sdpStr;\n        }\n        if (videoMLine.getSSRCCount() < 1) {\n            logger.debug('RtxModifier doing nothing, no video ssrcs present');\n\n            return sdpStr;\n        }\n        if (!videoMLine.containsAnySSRCGroups()) {\n            logger.debug('RtxModifier doing nothing, '\n              + 'no video ssrcGroups present');\n\n            return sdpStr;\n        }\n        const fidGroups = videoMLine.findGroups('FID');\n\n        // Remove the fid groups from the mline\n\n        videoMLine.removeGroupsBySemantics('FID');\n\n        // Get the rtx ssrcs and remove them from the mline\n        for (const fidGroup of fidGroups) {\n            const rtxSsrc = parseSecondarySSRC(fidGroup);\n\n            videoMLine.removeSSRC(rtxSsrc);\n        }\n\n        return sdpTransformer.toRawSDP();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/RtxModifier.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport {\n    parsePrimarySSRC,\n    parseSecondarySSRC,\n    SdpTransformWrap\n} from './SdpTransformUtil';\n\nconst logger = getLogger(__filename);\n\n/**\n * Handles the work of keeping video ssrcs consistent across multiple\n * o/a cycles, making it such that all stream operations can be\n * kept local and do not need to be signaled.\n * NOTE: This only keeps the 'primary' video ssrc consistent: meaning\n * the primary video stream\n */\nexport default class SdpConsistency {\n    /**\n     * Constructor\n     * @param {string} logPrefix the log prefix appended to every logged\n     * message, currently used to distinguish for which\n     * <tt>TraceablePeerConnection</tt> the instance works.\n     */\n    constructor(logPrefix) {\n        this.clearVideoSsrcCache();\n        this.logPrefix = logPrefix;\n    }\n\n    /**\n     * Clear the cached video primary and primary rtx ssrcs so that\n     *  they will not be used for the next call to\n     *  makeVideoPrimarySsrcsConsistent\n     */\n    clearVideoSsrcCache() {\n        this.cachedPrimarySsrc = null;\n        this.injectRecvOnly = false;\n    }\n\n    /**\n     * Explicitly set the primary ssrc to be used in\n     *  makeVideoPrimarySsrcsConsistent\n     * @param {number} primarySsrc the primarySsrc to be used\n     *  in future calls to makeVideoPrimarySsrcsConsistent\n     * @throws Error if <tt>primarySsrc</tt> is not a number\n     */\n    setPrimarySsrc(primarySsrc) {\n        if (typeof primarySsrc !== 'number') {\n            throw new Error('Primary SSRC must be a number!');\n        }\n        this.cachedPrimarySsrc = primarySsrc;\n    }\n\n    /**\n     * Checks whether or not there is a primary video SSRC cached already.\n     * @return {boolean}\n     */\n    hasPrimarySsrcCached() {\n        return Boolean(this.cachedPrimarySsrc);\n    }\n\n    /**\n     * Given an sdp string, either:\n     *  1) record the primary video and primary rtx ssrcs to be\n     *   used in future calls to makeVideoPrimarySsrcsConsistent or\n     *  2) change the primary and primary rtx ssrcs in the given sdp\n     *   to match the ones previously cached\n     * @param {string} sdpStr the sdp string to (potentially)\n     *  change to make the video ssrcs consistent\n     * @returns {string} a (potentially) modified sdp string\n     *  with ssrcs consistent with this class' cache\n     */\n    makeVideoPrimarySsrcsConsistent(sdpStr) {\n        const sdpTransformer = new SdpTransformWrap(sdpStr);\n        const videoMLine = sdpTransformer.selectMedia('video');\n\n        if (!videoMLine) {\n            logger.debug(\n                `${this.logPrefix} no 'video' media found in the sdp: `\n                    + `${sdpStr}`);\n\n            return sdpStr;\n        }\n\n        if (videoMLine.direction === 'recvonly') {\n            // If the mline is recvonly, we'll add the primary\n            //  ssrc as a recvonly ssrc\n            if (this.cachedPrimarySsrc && this.injectRecvOnly) {\n                videoMLine.addSSRCAttribute({\n                    id: this.cachedPrimarySsrc,\n                    attribute: 'cname',\n                    value: `recvonly-${this.cachedPrimarySsrc}`\n                });\n            } else {\n                logger.info(\n                    `${this.logPrefix} no SSRC found for the recvonly video`\n                        + 'stream!');\n            }\n        } else {\n            const newPrimarySsrc = videoMLine.getPrimaryVideoSsrc();\n\n            if (!newPrimarySsrc) {\n                logger.info(\n                    `${this.logPrefix} sdp-consistency couldn't`\n                        + ' parse new primary ssrc');\n\n                return sdpStr;\n            }\n            if (this.cachedPrimarySsrc) {\n                logger.info(\n                    `${this.logPrefix} sdp-consistency replacing new ssrc`\n                        + `${newPrimarySsrc} with cached `\n                        + `${this.cachedPrimarySsrc}`);\n                videoMLine.replaceSSRC(newPrimarySsrc, this.cachedPrimarySsrc);\n                for (const group of videoMLine.ssrcGroups) {\n                    if (group.semantics === 'FID') {\n                        const primarySsrc = parsePrimarySSRC(group);\n                        const rtxSsrc = parseSecondarySSRC(group);\n\n                        // eslint-disable-next-line max-depth\n                        if (primarySsrc === newPrimarySsrc) {\n                            group.ssrcs\n                                = `${this.cachedPrimarySsrc} ${rtxSsrc}`;\n                        }\n                    }\n                }\n            } else {\n                this.cachedPrimarySsrc = newPrimarySsrc;\n                logger.info(\n                    `${this.logPrefix} sdp-consistency caching primary ssrc`\n                        + `${this.cachedPrimarySsrc}`);\n            }\n\n            this.injectRecvOnly = true;\n        }\n\n        return sdpTransformer.toRawSDP();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SdpConsistency.js","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexports.Interop = require('./interop');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@jitsi/sdp-interop/lib/index.js\n// module id = 133\n// module chunks = 0","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* global RTCSessionDescription */\n/* global RTCIceCandidate */\n/* jshint -W097 */\n\"use strict\";\n\nvar transform = require('./transform');\nvar arrayEquals = require('./array-equals');\n\nfunction Interop() {\n\n    /**\n     * This map holds the most recent Unified Plan offer/answer SDP that was\n     * converted to Plan B, with the SDP type ('offer' or 'answer') as keys and\n     * the SDP string as values.\n     *\n     * @type {{}}\n     */\n    this.cache = {\n        mlB2UMap : {},\n        mlU2BMap : {}\n    };\n}\n\nmodule.exports = Interop;\n\n/**\n * Changes the candidate args to match with the related Unified Plan\n */\nInterop.prototype.candidateToUnifiedPlan = function(candidate) {\n    var cand = new RTCIceCandidate(candidate);\n\n    cand.sdpMLineIndex = this.cache.mlB2UMap[cand.sdpMLineIndex];\n    /* TODO: change sdpMid to (audio|video)-SSRC */\n\n    return cand;\n};\n\n/**\n * Changes the candidate args to match with the related Plan B\n */\nInterop.prototype.candidateToPlanB = function(candidate) {\n    var cand = new RTCIceCandidate(candidate);\n\n    if (cand.sdpMid.indexOf('audio') === 0) {\n      cand.sdpMid = 'audio';\n    } else if (cand.sdpMid.indexOf('video') === 0) {\n      cand.sdpMid = 'video';\n    } else {\n      throw new Error('candidate with ' + cand.sdpMid + ' not allowed');\n    }\n\n    cand.sdpMLineIndex = this.cache.mlU2BMap[cand.sdpMLineIndex];\n\n    return cand;\n};\n\n/**\n * Returns the index of the first m-line with the given media type and with a\n * direction which allows sending, in the last Unified Plan description with\n * type \"answer\" converted to Plan B. Returns {null} if there is no saved\n * answer, or if none of its m-lines with the given type allow sending.\n * @param type the media type (\"audio\" or \"video\").\n * @returns {*}\n */\nInterop.prototype.getFirstSendingIndexFromAnswer = function(type) {\n    if (!this.cache.answer) {\n        return null;\n    }\n\n    var session = transform.parse(this.cache.answer);\n    if (session && session.media && Array.isArray(session.media)){\n        for (var i = 0; i < session.media.length; i++) {\n            if (session.media[i].type == type &&\n                (!session.media[i].direction /* default to sendrecv */ ||\n                    session.media[i].direction === 'sendrecv' ||\n                    session.media[i].direction === 'sendonly')){\n                return i;\n            }\n        }\n    }\n\n    return null;\n};\n\n/**\n * This method transforms a Unified Plan SDP to an equivalent Plan B SDP. A\n * PeerConnection wrapper transforms the SDP to Plan B before passing it to the\n * application.\n *\n * @param desc\n * @returns {*}\n */\nInterop.prototype.toPlanB = function(desc) {\n    var self = this;\n    //#region Preliminary input validation.\n\n    if (typeof desc !== 'object' || desc === null ||\n        typeof desc.sdp !== 'string') {\n        console.warn('An empty description was passed as an argument.');\n        return desc;\n    }\n\n    // Objectify the SDP for easier manipulation.\n    var session = transform.parse(desc.sdp);\n\n    // If the SDP contains no media, there's nothing to transform.\n    if (typeof session.media === 'undefined' ||\n        !Array.isArray(session.media) || session.media.length === 0) {\n        console.warn('The description has no media.');\n        return desc;\n    }\n\n    // Try some heuristics to \"make sure\" this is a Unified Plan SDP. Plan B\n    // SDP has a video, an audio and a data \"channel\" at most.\n    if (session.media.length <= 3 && session.media.every(function(m) {\n            return ['video', 'audio', 'data'].indexOf(m.mid) !== -1;\n        })) {\n        console.warn('This description does not look like Unified Plan.');\n        return desc;\n    }\n\n    //#endregion\n\n    // HACK https://bugzilla.mozilla.org/show_bug.cgi?id=1113443\n    var sdp = desc.sdp;\n    var rewrite = false;\n    for (var i = 0; i < session.media.length; i++) {\n        var uLine = session.media[i];\n        uLine.rtp.forEach(function(rtp) {\n            if (rtp.codec === 'NULL')\n            {\n                rewrite = true;\n                var offer = transform.parse(self.cache.offer);\n                rtp.codec = offer.media[i].rtp[0].codec;\n            }\n        });\n    }\n    if (rewrite) {\n        sdp = transform.write(session);\n    }\n\n    // Unified Plan SDP is our \"precious\". Cache it for later use in the Plan B\n    // -> Unified Plan transformation.\n    this.cache[desc.type] = sdp;\n\n    //#region Convert from Unified Plan to Plan B.\n\n    // We rebuild the session.media array.\n    var media = session.media;\n    session.media = [];\n\n    // Associative array that maps channel types to channel objects for fast\n    // access to channel objects by their type, e.g. type2bl['audio']->channel\n    // obj.\n    var type2bl = {};\n\n    // Used to build the group:BUNDLE value after the channels construction\n    // loop.\n    var types = [];\n\n    // Used to aggregate the directions of the m-lines.\n    var directionResult = {};\n\n    media.forEach(function(uLine) {\n        // rtcp-mux is required in the Plan B SDP.\n        if ((typeof uLine.rtcpMux !== 'string' ||\n            uLine.rtcpMux !== 'rtcp-mux') &&\n            uLine.direction !== 'inactive') {\n            throw new Error('Cannot convert to Plan B because m-lines ' +\n                'without the rtcp-mux attribute were found.');\n        }\n\n        // If we don't have a channel for this uLine.type OR the selected is\n        // inactive, then select this uLine as the channel basis.\n        if (typeof type2bl[uLine.type] === 'undefined' ||\n            type2bl[uLine.type].direction === 'inactive') {\n            type2bl[uLine.type] = uLine;\n        }\n    });\n\n    // Implode the Unified Plan m-lines/tracks into Plan B channels.\n    media.forEach(function(uLine) {\n        var type = uLine.type;\n\n        if (type === 'application') {\n            session.media.push(uLine);\n            types.push(uLine.mid);\n            return;\n        }\n\n        // Add sources to the channel and handle a=msid.\n        if (typeof uLine.sources === 'object') {\n            Object.keys(uLine.sources).forEach(function(ssrc) {\n                if (typeof type2bl[type].sources !== 'object')\n                    type2bl[type].sources = {};\n\n                // Assign the sources to the channel.\n                type2bl[type].sources[ssrc] = uLine.sources[ssrc];\n\n                if (typeof uLine.msid !== 'undefined') {\n                    // In Plan B the msid is an SSRC attribute. Also, we don't\n                    // care about the obsolete label and mslabel attributes.\n                    //\n                    // Note that it is not guaranteed that the uLine will\n                    // have an msid. recvonly channels in particular don't have\n                    // one.\n                    type2bl[type].sources[ssrc].msid = uLine.msid;\n                }\n                // NOTE ssrcs in ssrc groups will share msids, as\n                // draft-uberti-rtcweb-plan-00 mandates.\n            });\n        }\n\n        // Add ssrc groups to the channel.\n        if (typeof uLine.ssrcGroups !== 'undefined' &&\n                Array.isArray(uLine.ssrcGroups)) {\n\n            // Create the ssrcGroups array, if it's not defined.\n            if (typeof type2bl[type].ssrcGroups === 'undefined' ||\n                    !Array.isArray(type2bl[type].ssrcGroups)) {\n                type2bl[type].ssrcGroups = [];\n            }\n\n            type2bl[type].ssrcGroups\n                = type2bl[type].ssrcGroups.concat(uLine.ssrcGroups);\n        }\n\n        var direction = uLine.direction;\n\n        directionResult[type]\n            = (directionResult[type] || 0 /* inactive */)\n                | directionMasks[direction || 'inactive'];\n\n        if (type2bl[type] === uLine) {\n            // Plan B mids are in ['audio', 'video', 'data']\n            uLine.mid = type;\n\n            // Plan B doesn't support/need the bundle-only attribute.\n            delete uLine.bundleOnly;\n\n            // In Plan B the msid is an SSRC attribute.\n            delete uLine.msid;\n\n            if (direction !== 'inactive') {\n              // Used to build the group:BUNDLE value after this loop.\n              types.push(type);\n            }\n\n            // Add the channel to the new media array.\n            session.media.push(uLine);\n        }\n    });\n\n    // We regenerate the BUNDLE group with the new mids.\n    session.groups.some(function(group) {\n        if (group.type === 'BUNDLE') {\n            group.mids = types.join(' ');\n            return true;\n        }\n    });\n\n    // msid semantic\n    session.msidSemantic = {\n        semantic: 'WMS',\n        token: '*'\n    };\n\n    var resStr = transform.write(session);\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: resStr\n    });\n\n    //#endregion\n};\n\n/**\n * This method transforms a Plan B SDP to an equivalent Unified Plan SDP. A\n * PeerConnection wrapper transforms the SDP to Unified Plan before passing it\n * to FF.\n *\n * @param desc\n * @returns {*}\n */\nInterop.prototype.toUnifiedPlan = function(desc) {\n    var self = this;\n    //#region Preliminary input validation.\n\n    if (typeof desc !== 'object' || desc === null ||\n        typeof desc.sdp !== 'string') {\n        console.warn('An empty description was passed as an argument.');\n        return desc;\n    }\n\n    var session = transform.parse(desc.sdp);\n\n    // If the SDP contains no media, there's nothing to transform.\n    if (typeof session.media === 'undefined' ||\n        !Array.isArray(session.media) || session.media.length === 0) {\n        console.warn('The description has no media.');\n        return desc;\n    }\n\n    // Try some heuristics to \"make sure\" this is a Plan B SDP. Plan B SDP has\n    // a video, an audio and a data \"channel\" at most.\n    if (session.media.length > 3 || !session.media.every(function(m) {\n            return ['video', 'audio', 'data'].indexOf(m.mid) !== -1;\n        })) {\n        console.warn('This description does not look like Plan B.');\n        return desc;\n    }\n\n    // Make sure this Plan B SDP can be converted to a Unified Plan SDP.\n    var mids = [];\n    session.media.forEach(function(m) {\n        mids.push(m.mid);\n    });\n\n    var hasBundle = false;\n    if (typeof session.groups !== 'undefined' &&\n        Array.isArray(session.groups)) {\n        hasBundle = session.groups.every(function(g) {\n            return g.type !== 'BUNDLE' ||\n                arrayEquals.apply(g.mids.sort(), [mids.sort()]);\n        });\n    }\n\n    if (!hasBundle) {\n        throw new Error(\"Cannot convert to Unified Plan because m-lines that\" +\n            \" are not bundled were found.\");\n    }\n\n    //#endregion\n\n\n    //#region Convert from Plan B to Unified Plan.\n\n    // Unfortunately, a Plan B offer/answer doesn't have enough information to\n    // rebuild an equivalent Unified Plan offer/answer.\n    //\n    // For example, if this is a local answer (in Unified Plan style) that we\n    // convert to Plan B prior to handing it over to the application (the\n    // PeerConnection wrapper called us, for instance, after a successful\n    // createAnswer), we want to remember the m-line at which we've seen the\n    // (local) SSRC. That's because when the application wants to do call the\n    // SLD method, forcing us to do the inverse transformation (from Plan B to\n    // Unified Plan), we need to know to which m-line to assign the (local)\n    // SSRC. We also need to know all the other m-lines that the original\n    // answer had and include them in the transformed answer as well.\n    //\n    // Another example is if this is a remote offer that we convert to Plan B\n    // prior to giving it to the application, we want to remember the mid at\n    // which we've seen the (remote) SSRC.\n    //\n    // In the iteration that follows, we use the cached Unified Plan (if it\n    // exists) to assign mids to ssrcs.\n\n    var cached;\n    if (typeof this.cache[desc.type] !== 'undefined') {\n        cached = transform.parse(this.cache[desc.type]);\n    }\n\n    var recvonlySsrcs = {\n        audio: {},\n        video: {}\n    };\n\n    // A helper map that sends mids to m-line objects. We use it later to\n    // rebuild the Unified Plan style session.media array.\n    var mid2ul = {};\n    var bIdx = 0;\n    var uIdx = 0;\n\n    session.media.forEach(function(bLine) {\n        if ((typeof bLine.rtcpMux !== 'string' ||\n            bLine.rtcpMux !== 'rtcp-mux') &&\n            bLine.direction !== 'inactive') {\n            throw new Error(\"Cannot convert to Unified Plan because m-lines \" +\n                \"without the rtcp-mux attribute were found.\");\n        }\n\n        if (bLine.type === 'application') {\n            mid2ul[bLine.mid] = bLine;\n            return;\n        }\n\n        // With rtcp-mux and bundle all the channels should have the same ICE\n        // stuff.\n        var sources = bLine.sources;\n        var ssrcGroups = bLine.ssrcGroups;\n        var candidates = bLine.candidates;\n        var iceUfrag = bLine.iceUfrag;\n        var icePwd = bLine.icePwd;\n        var fingerprint = bLine.fingerprint;\n        var port = bLine.port;\n\n        // We'll use the \"bLine\" object as a prototype for each new \"mLine\"\n        // that we create, but first we need to clean it up a bit.\n        delete bLine.sources;\n        delete bLine.ssrcGroups;\n        delete bLine.candidates;\n        delete bLine.iceUfrag;\n        delete bLine.icePwd;\n        delete bLine.fingerprint;\n        delete bLine.port;\n        delete bLine.mid;\n\n        // inverted ssrc group map\n        var ssrc2group = {};\n        if (typeof ssrcGroups !== 'undefined' && Array.isArray(ssrcGroups)) {\n            ssrcGroups.forEach(function (ssrcGroup) {\n\n                // TODO(gp) find out how to receive simulcast with FF. For the\n                // time being, hide it.\n                if (ssrcGroup.semantics === 'SIM') {\n                    return;\n                }\n\n                // XXX This might brake if an SSRC is in more than one group\n                // for some reason.\n                if (typeof ssrcGroup.ssrcs !== 'undefined' &&\n                    Array.isArray(ssrcGroup.ssrcs)) {\n                    ssrcGroup.ssrcs.forEach(function (ssrc) {\n                        if (typeof ssrc2group[ssrc] === 'undefined') {\n                            ssrc2group[ssrc] = [];\n                        }\n\n                        ssrc2group[ssrc].push(ssrcGroup);\n                    });\n                }\n            });\n        }\n\n        // ssrc to m-line index.\n        var ssrc2ml = {};\n\n        if (typeof sources === 'object') {\n\n            // Explode the Plan B channel sources with one m-line per source.\n            Object.keys(sources).forEach(function(ssrc) {\n\n                // The (unified) m-line for this SSRC. We either create it from\n                // scratch or, if it's a grouped SSRC, we re-use a related\n                // mline. In other words, if the source is grouped with another\n                // source, put the two together in the same m-line.\n                var uLine;\n\n                // We assume here that we are the answerer in the O/A, so any\n                // offers which we translate come from the remote side, while\n                // answers are local. So the check below is to make that we\n                // handle receive-only SSRCs in a special way only if they come\n                // from the remote side.\n                if (desc.type==='offer') {\n                    // We want to detect SSRCs which are used by a remote peer\n                    // in an m-line with direction=recvonly (i.e. they are\n                    // being used for RTCP only).\n                    // This information would have gotten lost if the remote\n                    // peer used Unified Plan and their local description was\n                    // translated to Plan B. So we use the lack of an MSID\n                    // attribute to deduce a \"receive only\" SSRC.\n                    if (!sources[ssrc].msid) {\n                        recvonlySsrcs[bLine.type][ssrc] = sources[ssrc];\n                        // Receive-only SSRCs must not create new m-lines. We\n                        // will assign them to an existing m-line later.\n                        return;\n                    }\n                }\n\n                if (typeof ssrc2group[ssrc] !== 'undefined' &&\n                    Array.isArray(ssrc2group[ssrc])) {\n                    ssrc2group[ssrc].some(function (ssrcGroup) {\n                        // ssrcGroup.ssrcs *is* an Array, no need to check\n                        // again here.\n                        return ssrcGroup.ssrcs.some(function (related) {\n                            if (typeof ssrc2ml[related] === 'object') {\n                                uLine = ssrc2ml[related];\n                                return true;\n                            }\n                        });\n                    });\n                }\n\n                if (typeof uLine === 'object') {\n                    // the m-line already exists. Just add the source.\n                    uLine.sources[ssrc] = sources[ssrc];\n                    delete sources[ssrc].msid;\n                } else {\n                    // Use the \"bLine\" as a prototype for the \"uLine\".\n                    uLine = Object.create(bLine);\n                    ssrc2ml[ssrc] = uLine;\n\n                    if (typeof sources[ssrc].msid !== 'undefined') {\n                        // Assign the msid of the source to the m-line. Note\n                        // that it is not guaranteed that the source will have\n                        // msid. In particular \"recvonly\" sources don't have an\n                        // msid. Note that \"recvonly\" is a term only defined\n                        // for m-lines.\n                        uLine.msid = sources[ssrc].msid;\n                        delete sources[ssrc].msid;\n                    }\n\n                    // We assign one SSRC per media line.\n                    uLine.sources = {};\n                    uLine.sources[ssrc] = sources[ssrc];\n                    uLine.ssrcGroups = ssrc2group[ssrc];\n\n                    // Use the cached Unified Plan SDP (if it exists) to assign\n                    // SSRCs to mids.\n                    if (typeof cached !== 'undefined' &&\n                        typeof cached.media !== 'undefined' &&\n                        Array.isArray(cached.media)) {\n\n                        cached.media.forEach(function (m) {\n                            if (typeof m.sources === 'object') {\n                                Object.keys(m.sources).forEach(function (s) {\n                                    if (s === ssrc) {\n                                        uLine.mid = m.mid;\n                                    }\n                                });\n                            }\n                        });\n                    }\n\n                    if (typeof uLine.mid === 'undefined') {\n\n                        // If this is an SSRC that we see for the first time\n                        // assign it a new mid. This is typically the case when\n                        // this method is called to transform a remote\n                        // description for the first time or when there is a\n                        // new SSRC in the remote description because a new\n                        // peer has joined the conference. Local SSRCs should\n                        // have already been added to the map in the toPlanB\n                        // method.\n                        //\n                        // Because FF generates answers in Unified Plan style,\n                        // we MUST already have a cached answer with all the\n                        // local SSRCs mapped to some m-line/mid.\n\n                        if (desc.type === 'answer') {\n                            throw new Error(\"An unmapped SSRC was found.\");\n                        }\n\n                        uLine.mid = [bLine.type, '-', ssrc].join('');\n                    }\n\n                    // Include the candidates in the 1st media line.\n                    uLine.candidates = candidates;\n                    uLine.iceUfrag = iceUfrag;\n                    uLine.icePwd = icePwd;\n                    uLine.fingerprint = fingerprint;\n                    uLine.port = port;\n\n                    mid2ul[uLine.mid] = uLine;\n\n                    self.cache.mlU2BMap[uIdx] = bIdx;\n                    if (typeof self.cache.mlB2UMap[bIdx] === 'undefined') {\n                      self.cache.mlB2UMap[bIdx] = uIdx;\n                    }\n                    uIdx++;\n                }\n            });\n        }\n\n        bIdx++;\n    });\n\n    // Rebuild the media array in the right order and add the missing mLines\n    // (missing from the Plan B SDP).\n    session.media = [];\n    mids = []; // reuse\n\n    if (desc.type === 'answer') {\n\n        // The media lines in the answer must match the media lines in the\n        // offer. The order is important too. Here we assume that Firefox is\n        // the answerer, so we merely have to use the reconstructed (unified)\n        // answer to update the cached (unified) answer accordingly.\n        //\n        // In the general case, one would have to use the cached (unified)\n        // offer to find the m-lines that are missing from the reconstructed\n        // answer, potentially grabbing them from the cached (unified) answer.\n        // One has to be careful with this approach because inactive m-lines do\n        // not always have an mid, making it tricky (impossible?) to find where\n        // exactly and which m-lines are missing from the reconstructed answer.\n\n        for (var i = 0; i < cached.media.length; i++) {\n            var uLine = cached.media[i];\n\n            if (typeof mid2ul[uLine.mid] === 'undefined') {\n\n                // The mid isn't in the reconstructed (unified) answer.\n                // This is either a (unified) m-line containing a remote\n                // track only, or a (unified) m-line containing a remote\n                // track and a local track that has been removed.\n                // In either case, it MUST exist in the cached\n                // (unified) answer.\n                //\n                // In case this is a removed local track, clean-up\n                // the (unified) m-line and make sure it's 'recvonly' or\n                // 'inactive'.\n\n                delete uLine.msid;\n                delete uLine.sources;\n                delete uLine.ssrcGroups;\n                if (!uLine.direction\n                    || uLine.direction === 'sendrecv')\n                    uLine.direction = 'recvonly';\n                else if (uLine.direction === 'sendonly')\n                    uLine.direction = 'inactive';\n            } else {\n                // This is an (unified) m-line/channel that contains a local\n                // track (sendrecv or sendonly channel) or it's a unified\n                // recvonly m-line/channel. In either case, since we're\n                // going from PlanB -> Unified Plan this m-line MUST\n                // exist in the cached answer.\n            }\n\n            session.media.push(uLine);\n\n            if (typeof uLine.mid === 'string') {\n                // inactive lines don't/may not have an mid.\n                mids.push(uLine.mid);\n            }\n        }\n    } else {\n\n        // SDP offer/answer (and the JSEP spec) forbids removing an m-section\n        // under any circumstances. If we are no longer interested in sending a\n        // track, we just remove the msid and ssrc attributes and set it to\n        // either a=recvonly (as the reofferer, we must use recvonly if the\n        // other side was previously sending on the m-section, but we can also\n        // leave the possibility open if it wasn't previously in use), or\n        // a=inactive.\n\n        if (typeof cached !== 'undefined' &&\n            typeof cached.media !== 'undefined' &&\n            Array.isArray(cached.media)) {\n            cached.media.forEach(function(uLine) {\n                mids.push(uLine.mid);\n                if (typeof mid2ul[uLine.mid] !== 'undefined') {\n                    session.media.push(mid2ul[uLine.mid]);\n                } else {\n                    delete uLine.msid;\n                    delete uLine.sources;\n                    delete uLine.ssrcGroups;\n                    if (!uLine.direction\n                        || uLine.direction === 'sendrecv')\n                        uLine.direction = 'recvonly';\n                    if (!uLine.direction\n                        || uLine.direction === 'sendonly')\n                        uLine.direction = 'inactive';\n                    session.media.push(uLine);\n                }\n            });\n        }\n\n        // Add all the remaining (new) m-lines of the transformed SDP.\n        Object.keys(mid2ul).forEach(function(mid) {\n            if (mids.indexOf(mid) === -1) {\n                mids.push(mid);\n                if (mid2ul[mid].direction === 'recvonly') {\n                    // This is a remote recvonly channel. Add its SSRC to the\n                    // appropriate sendrecv or sendonly channel.\n                    // TODO(gp) what if we don't have sendrecv/sendonly\n                    // channel?\n\n                    session.media.some(function (uLine) {\n                        if ((uLine.direction === 'sendrecv' ||\n                            uLine.direction === 'sendonly') &&\n                            uLine.type === mid2ul[mid].type) {\n\n                            // mid2ul[mid] shouldn't have any ssrc-groups\n                            Object.keys(mid2ul[mid].sources).forEach(\n                                function (ssrc) {\n                                uLine.sources[ssrc] =\n                                    mid2ul[mid].sources[ssrc];\n                            });\n\n                            return true;\n                        }\n                    });\n                } else {\n                    session.media.push(mid2ul[mid]);\n                }\n            }\n        });\n    }\n\n    // After we have constructed the Plan Unified m-lines we can figure out\n    // where (in which m-line) to place the 'recvonly SSRCs'.\n    // Note: we assume here that we are the answerer in the O/A, so any offers\n    // which we translate come from the remote side, while answers are local\n    // (and so our last local description is cached as an 'answer').\n    [\"audio\", \"video\"].forEach(function (type) {\n        if (!session || !session.media || !Array.isArray(session.media))\n            return;\n\n        var idx = null;\n        if (Object.keys(recvonlySsrcs[type]).length > 0) {\n            idx = self.getFirstSendingIndexFromAnswer(type);\n            if (idx === null){\n                // If this is the first offer we receive, we don't have a\n                // cached answer. Assume that we will be sending media using\n                // the first m-line for each media type.\n\n                for (var i = 0; i < session.media.length; i++) {\n                    if (session.media[i].type === type) {\n                        idx = i;\n                        break;\n                    }\n                }\n            }\n        }\n\n        if (idx && session.media.length > idx) {\n            var mLine = session.media[idx];\n            Object.keys(recvonlySsrcs[type]).forEach(function(ssrc) {\n                if (mLine.sources && mLine.sources[ssrc]) {\n                    console.warn(\"Replacing an existing SSRC.\");\n                }\n                if (!mLine.sources) {\n                    mLine.sources = {};\n                }\n\n                mLine.sources[ssrc] = recvonlySsrcs[type][ssrc];\n            });\n        }\n    });\n\n    // We regenerate the BUNDLE group (since we regenerated the mids)\n    session.groups.some(function(group) {\n        if (group.type === 'BUNDLE') {\n            group.mids = mids.join(' ');\n            return true;\n        }\n    });\n\n    // msid semantic\n    session.msidSemantic = {\n        semantic: 'WMS',\n        token: '*'\n    };\n\n    var resStr = transform.write(session);\n\n    // Cache the transformed SDP (Unified Plan) for later re-use in this\n    // function.\n    this.cache[desc.type] = resStr;\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: resStr\n    });\n\n    //#endregion\n};\n\n/**\n * Maps the direction strings to their binary representation. The binary\n * representation of the directions will contain only 2 bits. The least\n * significant bit will indicate the receiving direction and the other bit will\n * indicate the sending direction.\n *\n * @type {Map<string, number>}\n */\nvar directionMasks = {\n    'inactive': 0, // 00\n    'recvonly': 1, // 01\n    'sendonly': 2, // 10\n    'sendrecv': 3  // 11\n}\n\n/**\n * Parses a number into direction string.\n *\n * @param {number} direction - The number to be parsed.\n * @returns {string} - The parsed direction string.\n */\nfunction parseDirection(direction) {\n    // Filter all other bits except the 2 less significant.\n    var directionMask = direction & 3;\n\n    switch (directionMask) {\n    case 0:\n        return 'inactive';\n    case 1:\n        return 'recvonly';\n    case 2:\n        return 'sendonly';\n    case 3:\n        return 'sendrecv';\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@jitsi/sdp-interop/lib/interop.js\n// module id = 134\n// module chunks = 0","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar transform = require('sdp-transform');\n\nexports.write = function(session, opts) {\n\n  if (typeof session !== 'undefined' &&\n      typeof session.media !== 'undefined' &&\n      Array.isArray(session.media)) {\n\n    session.media.forEach(function (mLine) {\n      // expand sources to ssrcs\n      if (typeof mLine.sources !== 'undefined' &&\n        Object.keys(mLine.sources).length !== 0) {\n          mLine.ssrcs = [];\n          Object.keys(mLine.sources).forEach(function (ssrc) {\n            var source = mLine.sources[ssrc];\n            Object.keys(source).forEach(function (attribute) {\n              mLine.ssrcs.push({\n                id: ssrc,\n                attribute: attribute,\n                value: source[attribute]\n              });\n            });\n          });\n          delete mLine.sources;\n        }\n\n      // join ssrcs in ssrc groups\n      if (typeof mLine.ssrcGroups !== 'undefined' &&\n        Array.isArray(mLine.ssrcGroups)) {\n          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n            if (typeof ssrcGroup.ssrcs !== 'undefined' &&\n                Array.isArray(ssrcGroup.ssrcs)) {\n              ssrcGroup.ssrcs = ssrcGroup.ssrcs.join(' ');\n            }\n          });\n        }\n    });\n  }\n\n  // join group mids\n  if (typeof session !== 'undefined' &&\n      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\n    session.groups.forEach(function (g) {\n      if (typeof g.mids !== 'undefined' && Array.isArray(g.mids)) {\n        g.mids = g.mids.join(' ');\n      }\n    });\n  }\n\n  return transform.write(session, opts);\n};\n\nexports.parse = function(sdp) {\n  var session = transform.parse(sdp);\n\n  if (typeof session !== 'undefined' && typeof session.media !== 'undefined' &&\n      Array.isArray(session.media)) {\n\n    session.media.forEach(function (mLine) {\n      // group sources attributes by ssrc\n      if (typeof mLine.ssrcs !== 'undefined' && Array.isArray(mLine.ssrcs)) {\n        mLine.sources = {};\n        mLine.ssrcs.forEach(function (ssrc) {\n          if (!mLine.sources[ssrc.id])\n          mLine.sources[ssrc.id] = {};\n        mLine.sources[ssrc.id][ssrc.attribute] = ssrc.value;\n        });\n\n        delete mLine.ssrcs;\n      }\n\n      // split ssrcs in ssrc groups\n      if (typeof mLine.ssrcGroups !== 'undefined' &&\n        Array.isArray(mLine.ssrcGroups)) {\n          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n            if (typeof ssrcGroup.ssrcs === 'string') {\n              ssrcGroup.ssrcs = ssrcGroup.ssrcs.split(' ');\n            }\n          });\n        }\n    });\n  }\n  // split group mids\n  if (typeof session !== 'undefined' &&\n      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\n    session.groups.forEach(function (g) {\n      if (typeof g.mids === 'string') {\n        g.mids = g.mids.split(' ');\n      }\n    });\n  }\n\n  return session;\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@jitsi/sdp-interop/lib/transform.js\n// module id = 135\n// module chunks = 0","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = function arrayEquals(array) {\n    // if the other array is a falsy value, return\n    if (!array)\n        return false;\n\n    // compare lengths - can save a lot of time\n    if (this.length != array.length)\n        return false;\n\n    for (var i = 0, l = this.length; i < l; i++) {\n        // Check if we have nested arrays\n        if (this[i] instanceof Array && array[i] instanceof Array) {\n            // recurse into the nested arrays\n            if (!arrayEquals.apply(this[i], [array[i]]))\n                return false;\n        } else if (this[i] != array[i]) {\n            // Warning - two different object instances will never be equal:\n            // {x:20} != {x:20}\n            return false;\n        }\n    }\n    return true;\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@jitsi/sdp-interop/lib/array-equals.js\n// module id = 136\n// module chunks = 0","/* Copyright @ 2016 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar transform = require('sdp-transform');\nvar transformUtils = require('./transform-utils');\nvar parseSsrcs = transformUtils.parseSsrcs;\nvar writeSsrcs = transformUtils.writeSsrcs;\n\n//region Constants\n\nvar DEFAULT_NUM_OF_LAYERS = 3;\n\n//endregion\n\nfunction getSsrcAttribute (mLine, ssrc, attributeName) {\n    return mLine\n        .ssrcs\n        .filter(function(ssrcInfo) { return ssrcInfo.id === ssrc; })\n        .filter(function(ssrcInfo) { return ssrcInfo.attribute === attributeName; })\n        .map(function(ssrcInfo) { return ssrcInfo.value; })[0];\n}\n\n//region Ctor\n\nfunction Simulcast(options) {\n\n    this.options = options ? options : {};\n\n    if (!this.options.numOfLayers) {\n        this.options.numOfLayers = DEFAULT_NUM_OF_LAYERS;\n    }\n    console.log(\"SdpSimulcast: using \" + this.options.numOfLayers + \" layers\");\n\n    /**\n     * An IN-ORDER list of the simulcast ssrcs\n     * @type {list<number>}\n     */\n    this.ssrcCache = [];\n}\n\n//endregion\n\n//region Stateless private utility functions\n\n/**\n * Returns a random integer between min (included) and max (excluded)\n * Using Math.round() gives a non-uniform distribution!\n * @returns {number}\n */\nfunction generateSSRC() {\n    var min = 0, max = 0xffffffff;\n    return Math.floor(Math.random() * (max - min)) + min;\n};\n\nfunction processVideo(session, action) {\n    if (session == null || !Array.isArray(session.media)) {\n        return;\n    }\n\n    session.media.forEach(function (mLine) {\n        if (mLine.type === 'video') {\n            action(mLine);\n        }\n    });\n};\n\nfunction validateDescription(desc)\n{\n    return desc && desc != null\n        && desc.type && desc.type != ''\n        && desc.sdp && desc.sdp != '';\n}\n\nfunction explodeRemoteSimulcast(mLine) {\n\n    if (!mLine || !Array.isArray(mLine.ssrcGroups)) {\n        return;\n    }\n\n    var sources = parseSsrcs(mLine);\n    var order = [];\n\n    // Find the SIM group and explode its sources.\n    var j = mLine.ssrcGroups.length;\n    while (j--) {\n\n        if (mLine.ssrcGroups[j].semantics !== 'SIM') {\n            continue;\n        }\n\n        var simulcastSsrcs = mLine.ssrcGroups[j].ssrcs.split(' ');\n\n        for (var i = 0; i < simulcastSsrcs.length; i++) {\n\n            var ssrc = simulcastSsrcs[i];\n            order.push(ssrc);\n\n            var parts = sources[ssrc].msid.split(' ');\n            sources[ssrc].msid = [parts[0], '/', i, ' ', parts[1], '/', i].join('');\n            sources[ssrc].cname = [sources[ssrc].cname, '/', i].join('');\n\n            // Remove all the groups that this SSRC participates in.\n            mLine.ssrcGroups.forEach(function (relatedGroup) {\n                if (relatedGroup.semantics === 'SIM') {\n                    return;\n                }\n\n                var relatedSsrcs = relatedGroup.ssrcs.split(' ');\n                if (relatedSsrcs.indexOf(ssrc) === -1) {\n                    return;\n                }\n\n                // Nuke all the related SSRCs.\n                relatedSsrcs.forEach(function (relatedSSRC) {\n                    sources[relatedSSRC].msid = sources[ssrc].msid;\n                    sources[relatedSSRC].cname = sources[ssrc].cname;\n                    if (relatedSSRC !== ssrc) {\n                        order.push(relatedSSRC);\n                    }\n                });\n\n                // Schedule the related group for nuking.\n            })\n        }\n\n        mLine.ssrcs = writeSsrcs(sources, order);\n        mLine.ssrcGroups.splice(j, 1);\n    };\n}\n\nfunction implodeRemoteSimulcast(mLine) {\n\n    if (!mLine || !Array.isArray(mLine.ssrcGroups)) {\n        console.info('Halt: There are no SSRC groups in the remote ' +\n                'description.');\n        return;\n    }\n\n    var sources = parseSsrcs(mLine);\n\n    // Find the SIM group and nuke it.\n    mLine.ssrcGroups.forEach(function (simulcastGroup) {\n        if (simulcastGroup.semantics !== 'SIM') {\n            return;\n        }\n\n        console.info(\"Imploding SIM group: \" + simulcastGroup.ssrcs);\n        // Schedule the SIM group for nuking.\n        simulcastGroup.nuke = true;\n\n        var simulcastSsrcs = simulcastGroup.ssrcs.split(' ');\n\n        // Nuke all the higher layer SSRCs.\n        for (var i = 1; i < simulcastSsrcs.length; i++) {\n\n            var ssrc = simulcastSsrcs[i];\n            delete sources[ssrc];\n\n            // Remove all the groups that this SSRC participates in.\n            mLine.ssrcGroups.forEach(function (relatedGroup) {\n                if (relatedGroup.semantics === 'SIM') {\n                    return;\n                }\n\n                var relatedSsrcs = relatedGroup.ssrcs.split(' ');\n                if (relatedSsrcs.indexOf(ssrc) === -1) {\n                    return;\n                }\n\n                // Nuke all the related SSRCs.\n                relatedSsrcs.forEach(function (relatedSSRC) {\n                    delete sources[relatedSSRC];\n                });\n\n                // Schedule the related group for nuking.\n                relatedGroup.nuke = true;\n            })\n        }\n\n        return;\n    });\n\n    mLine.ssrcs = writeSsrcs(sources);\n\n    // Nuke all the scheduled groups.\n    var i = mLine.ssrcGroups.length;\n    while (i--) {\n        if (mLine.ssrcGroups[i].nuke) {\n            mLine.ssrcGroups.splice(i, 1);\n        }\n    }\n}\n\nfunction removeGoogConference(mLine) {\n    if (!mLine || !Array.isArray(mLine.invalid)) {\n        return;\n    }\n\n    var i = mLine.invalid.length;\n    while (i--) {\n        if (mLine.invalid[i].value == 'x-google-flag:conference') {\n            mLine.invalid.splice(i, 1);\n        }\n    }\n}\n\nfunction assertGoogConference(mLine) {\n    if (!mLine) {\n        return;\n    }\n\n    if (!Array.isArray(mLine.invalid)) {\n        mLine.invalid = [];\n    }\n\n    if (!mLine.invalid.some(\n            function (i) { return i.value === 'x-google-flag:conference' })) {\n        mLine.invalid.push({'value': 'x-google-flag:conference'});\n    }\n}\n\nSimulcast.prototype.clearSsrcCache = function() {\n    this.ssrcCache = [];\n}\n\n/**\n * When we start as video muted, all of the video\n *  ssrcs get generated so we can include them as part\n *  of the original session-accept.  That means we\n *  need this library to restore to those same ssrcs\n *  the first time we unmute, so we need the ability to\n *  force its cache\n */\nSimulcast.prototype.setSsrcCache = function(ssrcs) {\n    this.ssrcCache = ssrcs;\n}\n\n//endregion\n\n//region \"Private\" functions\n\n/**\n * Given a video mLine, return a list of the video ssrcs\n *  in simulcast layer order (returns a list of just\n *  the primary ssrc if there are no simulcast layers)\n */\nSimulcast.prototype._parseSimLayers = function (mLine) {\n    var simGroup = mLine.ssrcGroups &&\n        mLine.ssrcGroups.find(function(group) { return group.semantics === \"SIM\"; });\n    if (simGroup) {\n        return simGroup.ssrcs\n            .split(\" \")\n            .map(function(ssrcStr) { return parseInt(ssrcStr) });\n    } else {\n        return [mLine.ssrcs[0].id];\n    }\n}\n\nSimulcast.prototype._buildNewToOldSsrcMap = function (newSsrcList, oldSsrcList) {\n    var ssrcMap = {};\n    for (var i = 0; i < newSsrcList.length; ++i) {\n        var newSsrc = newSsrcList[i];\n        var oldSsrc = oldSsrcList[i] || null;\n        ssrcMap[newSsrc] = oldSsrc;\n    }\n    return ssrcMap;\n}\n\nSimulcast.prototype._fillInSourceDataFromCache = function(mLine) {\n    console.log(\"SdpSimulcast restoring from cache: \", this.ssrcCache);\n    var newSimSsrcs = this._parseSimLayers(mLine);\n    console.log(\"SdpSimulcast Parsed new sim ssrcs: \", newSimSsrcs);\n    var newMsid = getSsrcAttribute(mLine, newSimSsrcs[0], \"msid\");\n    var newCname = getSsrcAttribute(mLine, newSimSsrcs[0], \"cname\");\n    var ssrcsToReplace = this._buildNewToOldSsrcMap(newSimSsrcs, this.ssrcCache);\n    console.log(\"SdpSimulcast built replacement map: \", ssrcsToReplace);\n    // New sdp might only have 1 layer, so not every cached ssrc will have a new one\n    //  to replace directly\n    var ssrcsToAdd = this.ssrcCache\n        .filter(function(ssrc) { return Object.values(ssrcsToReplace).indexOf(ssrc) === -1; });\n    console.log(\"SdpSimulcast built ssrcs to add: \", ssrcsToAdd);\n\n    // First do the replacements\n    mLine.ssrcs.forEach(function(ssrc) {\n        if (ssrcsToReplace[ssrc.id]) {\n            ssrc.id = ssrcsToReplace[ssrc.id];\n        }\n    });\n    // Now the adds\n    ssrcsToAdd.forEach(function(ssrc) {\n        mLine.ssrcs.push({\n            id: ssrc,\n            attribute: \"msid\",\n            value: newMsid\n        });\n        mLine.ssrcs.push({\n            id: ssrc,\n            attribute: \"cname\",\n            value: newCname\n        });\n    });\n    mLine.ssrcGroups = mLine.ssrcGroups || [];\n    mLine.ssrcGroups.push({\n        semantics: \"SIM\",\n        ssrcs: this.ssrcCache.join(\" \")\n    });\n    return mLine;\n}\n\nSimulcast.prototype._generateSourceData = function(mLine, primarySsrc) {\n    var addAssociatedStream = function(mLine, ssrc) {\n        mLine.ssrcs.push({\n            id: ssrc,\n            attribute: \"cname\",\n            value: primarySsrcCname\n        });\n        mLine.ssrcs.push({\n            id: ssrc,\n            attribute: \"msid\",\n            value: primarySsrcMsid\n        });\n    }\n    var primarySsrcMsid = getSsrcAttribute(mLine, primarySsrc, \"msid\");\n    var primarySsrcCname = getSsrcAttribute(mLine, primarySsrc, \"cname\");\n\n    // Generate sim layers\n    var simSsrcs = [];\n    for (var i = 0; i < this.options.numOfLayers - 1; ++i) {\n        var simSsrc = generateSSRC();\n        addAssociatedStream(mLine, simSsrc);\n        simSsrcs.push(simSsrc);\n    }\n    mLine.ssrcGroups = mLine.ssrcGroups || [];\n    mLine.ssrcGroups.push({\n        semantics: \"SIM\",\n        ssrcs: primarySsrc + \" \" + simSsrcs.join(\" \")\n    });\n    return mLine;\n}\n\n\n\n// Assumptions:\n//  1) 'mLine' contains only a single primary video source\n//   (i.e. it will not already have simulcast streams inserted)\n//  2) 'mLine' MAY already contain an RTX stream for its video source\n//  3) 'mLine' is in sendrecv or sendonly state\n// Guarantees:\n//  1) return mLine will contain 2 additional simulcast layers\n//   generated\n//  2) if the base video ssrc in mLine has been seen before,\n//   then the same generated simulcast streams from before will\n//   be used again\n//  3) if rtx is enabled for the mLine, all generated simulcast\n//   streams will have rtx streams generated as well\n//  4) if rtx has been generated for a src before, we will generate\n//   the same rtx stream again\nSimulcast.prototype._restoreSimulcast = function(mLine) {\n    // First, find the primary video source in the given\n    // mLine and see if we've seen it before.\n    var primarySsrc;\n    var numSsrcs = mLine.ssrcs && mLine.ssrcs\n        .map(function(ssrcInfo) { return ssrcInfo.id; })\n        .filter(function(ssrc, index, array) {\n            return array.indexOf(ssrc) === index;\n        })\n        .length || 0;\n    var numGroups = (mLine.ssrcGroups && mLine.ssrcGroups.length) || 0;\n\n    if (numSsrcs === 0 || numSsrcs > 2) {\n        // Unsupported scenario\n        return mLine;\n    }\n    if (numSsrcs == 2 && numGroups === 0) {\n        // Unsupported scenario\n        return mLine;\n    }\n\n    if (numSsrcs === 1) {\n        primarySsrc = mLine.ssrcs[0].id;\n    } else {\n        // There must be an FID group, so parse\n        //  that and pull the primary ssrc from there\n        var fidGroup = mLine.ssrcGroups.filter(function(group) { return group.semantics === \"FID\"; })[0];\n        if (fidGroup) {\n            primarySsrc = parseInt(fidGroup.ssrcs.split(\" \")[0]);\n        } else {\n            // Unsupported scenario\n            return mLine;\n        }\n    }\n    console.log(\"SdpSimulcast: current ssrc cache: \", this.ssrcCache);\n    console.log(\"SdpSimulcast: parsed primary ssrc \" + primarySsrc);\n\n    var seenPrimarySsrc = this.ssrcCache.indexOf(primarySsrc) !== -1;\n\n    if (seenPrimarySsrc) {\n        console.log(\"SdpSimulcast: Have seen primary ssrc before, \" +\n            \"filling in data from cache\");\n        mLine = this._fillInSourceDataFromCache(mLine);\n    } else {\n        console.log(\"SdpSimulcast: Have not seen primary ssrc before, \" +\n            \"generating source data\");\n        mLine = this._generateSourceData(mLine, primarySsrc);\n    }\n    // Now update the cache to match whatever we've just put into this sdp\n    this.ssrcCache = this._parseSimLayers(mLine);\n    return mLine;\n}\n\n//endregion\n\n//region \"Public\" functions\n\n/**\n *\n * @param desc\n * @returns {RTCSessionDescription}\n */\nSimulcast.prototype.mungeRemoteDescription = function (desc) {\n\n    if (!validateDescription(desc)) {\n        return desc;\n    }\n\n    var session = transform.parse(desc.sdp);\n\n    var self = this;\n    processVideo(session, function (mLine) {\n\n        // Handle simulcast reception.\n        if (self.options.explodeRemoteSimulcast) {\n            explodeRemoteSimulcast(mLine);\n        } else {\n            implodeRemoteSimulcast(mLine);\n        }\n\n        // If native simulcast is enabled, we must append the x-goog-conference\n        // attribute to the SDP.\n        if (self.ssrcCache.length < 1) {\n            removeGoogConference(mLine);\n        } else {\n            assertGoogConference(mLine);\n        }\n    });\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: transform.write(session)\n    });\n};\n\n/**\n *\n * NOTE this method should be called only if simulcast is supported by\n * the current browser, otherwise local SDP should not be munged.\n * @param desc\n * @returns {RTCSessionDescription}\n */\nSimulcast.prototype.mungeLocalDescription = function (desc) {\n\n    if (!validateDescription(desc)) {\n        return desc;\n    }\n\n    var session = transform.parse(desc.sdp);\n\n    var self = this;\n    processVideo(session, function (mLine) {\n        if (mLine.direction == 'recvonly' || mLine.direction == 'inactive')\n        {\n            return;\n        }\n        self._restoreSimulcast(mLine);\n    });\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: transform.write(session)\n    });\n};\n\n//endregion\n\nmodule.exports = Simulcast;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@jitsi/sdp-simulcast/lib/index.js\n// module id = 137\n// module chunks = 0","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * FIXME\n * @param sources FIXME\n * @param order An array of SSRCs which will be used to order the entries in\n * the returned array. Sources whose SSRC appears in 'order' will be added first,\n * in the specified order, and all other sources will be added afterwards (in\n * no specific order).\n * @returns {Array} FIXME\n */\nexports.writeSsrcs = function(sources, order) {\n  var ssrcs = [];\n\n  // expand sources to ssrcs\n  if (typeof sources !== 'undefined' &&\n      Object.keys(sources).length !== 0) {\n\n    if (!Array.isArray(order)) {\n      order = []\n    }\n\n    // Add the sources that appear in 'order' first.\n    for (var i = 0; i < order.length; i++) {\n      var ssrc = order[i];\n      var source = sources[ssrc];\n      Object.keys(source).forEach(function (attribute) {\n        ssrcs.push({\n          id: ssrc,\n          attribute: attribute,\n          value: source[attribute]\n        });\n      });\n    }\n\n    // Now add the rest of the sources.\n    Object.keys(sources).forEach(function (ssrc) {\n      ssrc = parseInt(ssrc); // Object.keys() returns string\n      if (order.indexOf(ssrc) >= 0) {\n        // Already added.\n        return;\n      }\n\n      var source = sources[ssrc];\n      Object.keys(source).forEach(function (attribute) {\n        ssrcs.push({\n          id: ssrc,\n          attribute: attribute,\n          value: source[attribute]\n        });\n      });\n    });\n  }\n\n  return ssrcs;\n};\n\nexports.parseSsrcs = function (mLine) {\n  var sources = {};\n  // group sources attributes by ssrc.\n  if (typeof mLine.ssrcs !== 'undefined' && Array.isArray(mLine.ssrcs)) {\n    mLine.ssrcs.forEach(function (ssrc) {\n      if (!sources[ssrc.id])\n        sources[ssrc.id] = {};\n      sources[ssrc.id][ssrc.attribute] = ssrc.value;\n    });\n  }\n  return sources;\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@jitsi/sdp-simulcast/lib/transform-utils.js\n// module id = 138\n// module chunks = 0","import * as JitsiConferenceEvents from '../JitsiConferenceEvents';\n\n/**\n * The value which we use to say, every sound over this threshold\n * is talking on the mic.\n * @type {number}\n */\nconst SPEECH_DETECT_THRESHOLD = 0.6;\n\n/**\n * Detect user trying to speek while is locally muted and fires an event.\n */\nexport default class TalkMutedDetection {\n    /**\n     * Creates TalkMutedDetection\n     * @param conference the JitsiConference instance that created us.\n     * @param callback the callback to call when detected that the local user is\n     * talking while her microphone is muted.\n     * @constructor\n     */\n    constructor(conference, callback) {\n        /**\n         * The callback to call when detected that the local user is talking\n         * while her microphone is muted.\n         *\n         * @private\n         */\n        this._callback = callback;\n\n        /**\n         * The indicator which determines whether <tt>callback</tt> has been\n         * invoked for the current local audio track of <tt>conference</tt> so\n         * that it is invoked once only.\n         *\n         * @private\n         */\n        this._eventFired = false;\n\n        // XXX I went back and forth on the subject of where to put the access\n        // to statistics. On the one had, (1) statistics is likely intended to\n        // be private to conference and (2) there is a desire to keep the\n        // dependencies of modules to the minimum (i.e. not have\n        // TalkMutedDetection depend on statistics). On the other hand, (1)\n        // statistics is technically not private because\n        // JitsiConferenceEventManager accesses it and (2) TalkMutedDetection\n        // works exactly because it knows that there are no audio levels for\n        // JitsiLocalTrack but there are audio levels for the local participant\n        // through statistics.\n        conference.statistics.addAudioLevelListener(\n            this._audioLevel.bind(this));\n\n        conference.on(\n            JitsiConferenceEvents.TRACK_MUTE_CHANGED,\n            this._trackMuteChanged.bind(this));\n        conference.on(\n            JitsiConferenceEvents.TRACK_ADDED,\n            this._trackAdded.bind(this));\n    }\n\n    /* eslint-disable max-params */\n    /**\n     * Receives audio level events for all send and receive streams.\n     *\n     * @param {TraceablePeerConnection} pc - WebRTC PeerConnection object of the\n     * @param {number} ssrc - The synchronization source identifier (SSRC) of\n     * the endpoint/participant/stream being reported.\n     * @param {number} audioLevel - The audio level of <tt>ssrc</tt>.\n     * @param {boolean} isLocal - <tt>true</tt> if <tt>ssrc</tt> represents a\n     * local/send stream or <tt>false</tt> for a remote/receive stream.\n     */\n    _audioLevel(tpc, ssrc, audioLevel, isLocal) {\n        // We are interested in the local audio stream only and if event is not\n        // sent yet.\n        if (!isLocal || !this.audioTrack || this._eventFired) {\n            return;\n        }\n\n        if (this.audioTrack.isMuted()\n            && audioLevel > SPEECH_DETECT_THRESHOLD) {\n            this._eventFired = true;\n            this._callback();\n        }\n    }\n    /* eslint-enable max-params */\n\n    /**\n     * Determines whether a specific {@link JitsiTrack} represents a local audio\n     * track.\n     *\n     * @param {JitsiTrack} track - The <tt>JitsiTrack</tt> to be checked whether\n     * it represents a local audio track.\n     * @private\n     * @return {boolean} - <tt>true</tt> if the specified <tt>track</tt>\n     * represents a local audio track; otherwise, <tt>false</tt>.\n     */\n    _isLocalAudioTrack(track) {\n        return track.isAudioTrack() && track.isLocal();\n    }\n\n    /**\n     * Notifies this <tt>TalkMutedDetection</tt> that a {@link JitsiTrack} was\n     * added to the associated {@link JitsiConference}. Looks for the local\n     * audio track only.\n     *\n     * @param {JitsiTrack} track - The added <tt>JitsiTrack</tt>.\n     * @private\n     */\n    _trackAdded(track) {\n        if (this._isLocalAudioTrack(track)) {\n            this.audioTrack = track;\n        }\n    }\n\n    /**\n     * Notifies this <tt>TalkMutedDetection</tt> that the mute state of a\n     * {@link JitsiTrack} has changed. Looks for the local audio track only.\n     *\n     * @param {JitsiTrack} track - The <tt>JitsiTrack</tt> whose mute state has\n     * changed.\n     * @private\n     */\n    _trackMuteChanged(track) {\n        if (this._isLocalAudioTrack(track) && track.isMuted()) {\n            this._eventFired = false;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/TalkMutedDetection.js","const AudioRecorder = require('./audioRecorder');\nconst SphinxService = require(\n    './transcriptionServices/SphinxTranscriptionService');\n\nconst BEFORE_STATE = 'before';\nconst RECORDING_STATE = 'recording';\nconst TRANSCRIBING_STATE = 'transcribing';\nconst FINISHED_STATE = 'finished';\n\n// the amount of characters each line in the transcription will have\nconst MAXIMUM_SENTENCE_LENGTH = 80;\n\n/**\n * This is the main object for handing the Transcription. It interacts with\n * the audioRecorder to record every person in a conference and sends the\n * recorder audio to a transcriptionService. The returned speech-to-text result\n * will be merged to create a transcript\n * @param {AudioRecorder} audioRecorder An audioRecorder recording a conference\n */\nfunction Transcriber() {\n    // the object which can record all audio in the conference\n    this.audioRecorder = new AudioRecorder();\n\n    // this object can send the recorder audio to a speech-to-text service\n    this.transcriptionService = new SphinxService();\n\n    // holds a counter to keep track if merging can start\n    this.counter = null;\n\n    // holds the date when transcription started which makes it possible\n    // to calculate the offset between recordings\n    this.startTime = null;\n\n    // will hold the transcription once it is completed\n    this.transcription = null;\n\n    // this will be a method which will be called once the transcription is done\n    // with the transcription as parameter\n    this.callback = null;\n\n    // stores all the retrieved speech-to-text results to merge together\n    // this value will store an Array<Word> object\n    this.results = [];\n\n    // Stores the current state of the transcription process\n    this.state = BEFORE_STATE;\n\n    // Used in the updateTranscription method to add a new line when the\n    // sentence becomes to long\n    this.lineLength = 0;\n}\n\n/**\n * Method to start the transcription process. It will tell the audioRecorder\n * to start storing all audio streams and record the start time for merging\n * purposes\n */\nTranscriber.prototype.start = function start() {\n    if (this.state !== BEFORE_STATE) {\n        throw new Error(\n            `The transcription can only start when it's in the \"${\n                BEFORE_STATE}\" state. It's currently in the \"${\n                this.state}\" state`);\n    }\n    this.state = RECORDING_STATE;\n    this.audioRecorder.start();\n    this.startTime = new Date();\n};\n\n/**\n * Method to stop the transcription process. It will tell the audioRecorder to\n * stop, and get all the recorded audio to send it to the transcription service\n\n * @param callback a callback which will receive the transcription\n */\nTranscriber.prototype.stop = function stop(callback) {\n    if (this.state !== RECORDING_STATE) {\n        throw new Error(\n            `The transcription can only stop when it's in the \"${\n                RECORDING_STATE}\" state. It's currently in the \"${\n                this.state}\" state`);\n    }\n\n    // stop the recording\n    console.log('stopping recording and sending audio files');\n    this.audioRecorder.stop();\n\n    // and send all recorded audio the the transcription service\n    const callBack = blobCallBack.bind(null, this);\n\n    this.audioRecorder.getRecordingResults().forEach(recordingResult => {\n        this.transcriptionService.send(recordingResult, callBack);\n        this.counter++;\n    });\n\n    // set the state to \"transcribing\" so that maybeMerge() functions correctly\n    this.state = TRANSCRIBING_STATE;\n\n    // and store the callback for later\n    this.callback = callback;\n};\n\n/**\n * This method gets the answer from the transcription service, calculates the\n * offset and adds is to every Word object. It will also start the merging\n * when every send request has been received\n *\n * note: Make sure to bind this as a Transcription object\n * @param {Transcriber} transcriber the transcriber instance\n * @param {RecordingResult} answer a RecordingResult object with a defined\n * WordArray\n */\nfunction blobCallBack(transcriber, answer) {\n    console.log(\n        'retrieved an answer from the transcription service. The answer has an'\n            + ` array of length: ${answer.wordArray.length}`);\n\n    // first add the offset between the start of the transcription and\n    // the start of the recording to all start and end times\n    if (answer.wordArray.length > 0) {\n        let offset = answer.startTime.getUTCMilliseconds()\n            - transcriber.startTime.getUTCMilliseconds();\n\n        // transcriber time will always be earlier\n\n        if (offset < 0) {\n            offset = 0; // presume 0 if it somehow not earlier\n        }\n\n        let array = '[';\n\n        answer.wordArray.forEach(wordObject => {\n            wordObject.begin += offset;\n            wordObject.end += offset;\n            array += `${wordObject.word},`;\n        });\n        array += ']';\n        console.log(array);\n\n        // give a name value to the Array object so that the merging can access\n        // the name value without having to use the whole recordingResult object\n        // in the algorithm\n        answer.wordArray.name = answer.name;\n    }\n\n    // then store the array and decrease the counter\n    transcriber.results.push(answer.wordArray);\n    transcriber.counter--;\n    console.log(`current counter: ${transcriber.counter}`);\n\n    // and check if all results have been received.\n    transcriber.maybeMerge();\n}\n\n/**\n * this method will check if the counter is zero. If it is, it will call\n * the merging method\n */\nTranscriber.prototype.maybeMerge = function() {\n    if (this.state === TRANSCRIBING_STATE && this.counter === 0) {\n        // make sure to include the events in the result arrays before\n        // merging starts\n        this.merge();\n    }\n};\n\n/**\n * This method will merge all speech-to-text arrays together in one\n * readable transcription string\n */\nTranscriber.prototype.merge = function() {\n    console.log(\n        `starting merge process!\\n The length of the array: ${\n            this.results.length}`);\n    this.transcription = '';\n\n    // the merging algorithm will look over all Word objects who are at pos 0 in\n    // every array. It will then select the one closest in time to the\n    // previously placed word, while removing the selected word from its array\n    // note: words can be skipped the skipped word's begin and end time somehow\n    // end up between the closest word start and end time\n    const arrays = this.results;\n\n    // arrays of Word objects\n    const potentialWords = []; // array of the first Word objects\n    // check if any arrays are already empty and remove them\n\n    hasPopulatedArrays(arrays);\n\n    // populate all the potential Words for a first time\n    arrays.forEach(array => pushWordToSortedArray(potentialWords, array));\n\n    // keep adding words to transcription until all arrays are exhausted\n    while (hasPopulatedArrays(arrays)) {\n        // first select the lowest array;\n        let lowestWordArray = arrays[0];\n\n        arrays.forEach(wordArray => {\n            if (wordArray[0].begin < lowestWordArray[0].begin) {\n                lowestWordArray = wordArray;\n            }\n        });\n\n        // put the word in the transcription\n        let wordToAdd = lowestWordArray.shift();\n\n        this.updateTranscription(wordToAdd, lowestWordArray.name);\n\n        // keep going until a word in another array has a smaller time\n        // or the array is empty\n        while (lowestWordArray.length > 0) {\n            let foundSmaller = false;\n            const wordToCompare = lowestWordArray[0].begin;\n\n            arrays.forEach(wordArray => {\n                if (wordArray[0].begin < wordToCompare) {\n                    foundSmaller = true;\n                }\n            });\n\n            // add next word if no smaller time has been found\n            if (foundSmaller) {\n                break;\n            }\n\n            wordToAdd = lowestWordArray.shift();\n            this.updateTranscription(wordToAdd, null);\n        }\n\n    }\n\n    // set the state to finished and do the necessary left-over tasks\n    this.state = FINISHED_STATE;\n    if (this.callback) {\n        this.callback(this.transcription);\n    }\n};\n\n/**\n * Appends a word object to the transcription. It will make a new line with a\n * name if a name is specified\n * @param {Word} word the Word object holding the word to append\n * @param {String|null} name the name of a new speaker. Null if not applicable\n */\nTranscriber.prototype.updateTranscription = function(word, name) {\n    if (name !== undefined && name !== null) {\n        this.transcription += `\\n${name}:`;\n        this.lineLength = name.length + 1; // +1 for the semi-colon\n    }\n    if (this.lineLength + word.word.length > MAXIMUM_SENTENCE_LENGTH) {\n        this.transcription += '\\n    ';\n        this.lineLength = 4; // because of the 4 spaces after the new line\n    }\n    this.transcription += ` ${word.word}`;\n    this.lineLength += word.word.length + 1; // +1 for the space\n};\n\n/**\n * Check if the given 2 dimensional array has any non-zero Word-arrays in them.\n * All zero-element arrays inside will be removed\n * If any non-zero-element arrays are found, the method will return true.\n * otherwise it will return false\n * @param {Array<Array>} twoDimensionalArray the array to check\n * @returns {boolean} true if any non-zero arrays inside, otherwise false\n */\nfunction hasPopulatedArrays(twoDimensionalArray) {\n    for (let i = 0; i < twoDimensionalArray.length; i++) {\n        if (twoDimensionalArray[i].length === 0) {\n            twoDimensionalArray.splice(i, 1);\n        }\n    }\n\n    return twoDimensionalArray.length > 0;\n}\n\n/**\n * Push a word to the right location in a sorted array. The array is sorted\n * from lowest to highest start time. Every word is stored in an object which\n * includes the name of the person saying the word.\n *\n * @param {Array<Word>} array the sorted array to push to\n * @param {Word} word the word to push into the array\n */\nfunction pushWordToSortedArray(array, word) {\n    if (array.length === 0) {\n        array.push(word);\n    } else {\n        if (array[array.length - 1].begin <= word.begin) {\n            array.push(word);\n\n            return;\n        }\n\n        for (let i = 0; i < array.length; i++) {\n            if (word.begin < array[i].begin) {\n                array.splice(i, 0, word);\n\n                return;\n            }\n        }\n        array.push(word); // fail safe\n    }\n}\n\n/**\n * Gives the transcriber a JitsiTrack holding an audioStream to transcribe.\n * The JitsiTrack is given to the audioRecorder. If it doesn't hold an\n * audiostream, it will not be added by the audioRecorder\n * @param {JitsiTrack} track the track to give to the audioRecorder\n */\nTranscriber.prototype.addTrack = function(track) {\n    this.audioRecorder.addTrack(track);\n};\n\n/**\n * Remove the given track from the auioRecorder\n * @param track\n */\nTranscriber.prototype.removeTrack = function(track) {\n    this.audioRecorder.removeTrack(track);\n};\n\n/**\n * Will return the created transcription if it's avialable or throw an error\n * when it's not done yet\n * @returns {String} the transcription as a String\n */\nTranscriber.prototype.getTranscription = function() {\n    if (this.state !== FINISHED_STATE) {\n        throw new Error(\n            `The transcription can only be retrieved when it's in the \"${\n                FINISHED_STATE}\" state. It's currently in the \"${\n                this.state}\" state`);\n    }\n\n    return this.transcription;\n};\n\n/**\n * Returns the current state of the transcription process\n */\nTranscriber.prototype.getState = function() {\n    return this.state;\n};\n\n/**\n * Resets the state to the \"before\" state, such that it's again possible to\n * call the start method\n */\nTranscriber.prototype.reset = function() {\n    this.state = BEFORE_STATE;\n    this.counter = null;\n    this.transcription = null;\n    this.startTime = null;\n    this.callback = null;\n    this.results = [];\n    this.lineLength = 0;\n};\n\nmodule.exports = Transcriber;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/transcriber.js","/* eslint-disable max-params */\n\n/**\n * This object stores variables needed around the recording of an audio stream\n * and passing this recording along with additional information along to\n * different processes\n * @param blob the recording audio stream as a single blob\n * @param name the name of the person of the audio stream\n * @param startTime the time in UTC when recording of the audiostream started\n * @param wordArray the recorder audio stream transcribed as an array of Word\n *                  objects\n */\nconst RecordingResult = function(blob, name, startTime, wordArray) {\n    this.blob = blob;\n    this.name = name;\n    this.startTime = startTime;\n    this.wordArray = wordArray;\n};\n\n/* eslint-enable max-params */\n\nmodule.exports = RecordingResult;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/recordingResult.js","/* global config */\n\nconst TranscriptionService = require('./AbstractTranscriptionService');\nconst Word = require('../word');\nconst audioRecorder = require('./../audioRecorder');\n\n/**\n * Implements a TranscriptionService for a Sphinx4 http server\n */\nconst SphinxService = function() {\n    // set the correct url\n    this.url = getURL();\n};\n\n/**\n * Subclass of AbstractTranscriptionService\n */\nSphinxService.prototype = Object.create(TranscriptionService.prototype);\n\n/**\n * Set the right constructor\n */\nSphinxService.constructor = SphinxService;\n\n/**\n * Overrides the sendRequest method from AbstractTranscriptionService\n * it will send the audio stream the a Sphinx4 server to get the transcription\n *\n * @param audioFileBlob the recorder audio stream an a single Blob\n * @param callback the callback function retrieving the server response\n */\nSphinxService.prototype.sendRequest = function(audioFileBlob, callback) {\n    console.log(`sending an audio file  to ${this.url}`);\n    console.log(`the audio file being sent: ${audioFileBlob}`);\n    const request = new XMLHttpRequest();\n\n    request.onreadystatechange = function() {\n        if (request.readyState === XMLHttpRequest.DONE\n            && request.status === 200) {\n            callback(request.responseText);\n        } else if (request.readyState === XMLHttpRequest.DONE) {\n            throw new Error(\n                `unable to accept response from sphinx server. status: ${\n                    request.status}`);\n        }\n\n        // if not ready no point to throw an error\n    };\n    request.open('POST', this.url);\n    request.setRequestHeader('Content-Type',\n        audioRecorder.determineCorrectFileType());\n    request.send(audioFileBlob);\n    console.log(`send ${audioFileBlob}`);\n};\n\n/**\n * Overrides the formatResponse method from AbstractTranscriptionService\n * It will parse the answer from the server in the expected format\n *\n * @param response the JSON body retrieved from the Sphinx4 server\n */\nSphinxService.prototype.formatResponse = function(response) {\n    const result = JSON.parse(response).objects;\n\n    // make sure to delete the session id object, which is always\n    // the first value in the JSON array\n\n    result.shift();\n    const array = [];\n\n    result.forEach(\n        word =>\n            word.filler\n                || array.push(new Word(word.word, word.start, word.end)));\n\n    return array;\n};\n\n/**\n * checks wether the reply is empty, or doesn't contain a correct JSON object\n * @param response the server response\n * @return {boolean} whether the response is valid\n */\nSphinxService.prototype.verify = function(response) {\n    console.log(`response from server:${response.toString()}`);\n\n    // test if server responded with a string object\n    if (typeof response !== 'string') {\n        return false;\n    }\n\n    // test if the string can be parsed into valid JSON\n    let json;\n\n    try {\n        json = JSON.parse(response);\n    } catch (error) {\n        console.log(error);\n\n        return false;\n    }\n\n    // check if the JSON has a \"objects\" value\n    if (json.objects === undefined) {\n        return false;\n    }\n\n    // get the \"objects\" value and check for a session ID\n    const array = json.objects;\n\n    if (!(array[0] && array[0]['session-id'])) {\n        return false;\n    }\n\n    // everything seems to be in order\n    return true;\n};\n\n/**\n * Gets the URL to the Sphinx4 server from the config file. If it's not there,\n * it will throw an error\n *\n * @returns {string} the URL to the sphinx4 server\n */\nfunction getURL() {\n    const message = 'config does not contain an url to a Sphinx4 https server';\n\n    if (config.sphinxURL === undefined) {\n        console.log(message);\n    } else {\n        const toReturn = config.sphinxURL;\n\n        if (toReturn.includes !== undefined && toReturn.includes('https://')) {\n            return toReturn;\n        }\n        console.log(message);\n\n    }\n}\n\nmodule.exports = SphinxService;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/transcriptionServices/SphinxTranscriptionService.js","/**\n * Abstract class representing an interface to implement a speech-to-text\n * service on.\n */\nconst TranscriptionService = function() {\n    throw new Error('TranscriptionService is abstract and cannot be'\n        + 'created');\n};\n\n/**\n * This method can be used to send the recorder audio stream and\n * retrieve the answer from the transcription service from the callback\n *\n * @param {RecordingResult} recordingResult a recordingResult object which\n * includes the recorded audio stream as a blob\n * @param {Function} callback  which will retrieve the a RecordingResult with\n *        the answer as a WordArray\n */\nTranscriptionService.prototype.send = function send(recordingResult, callback) {\n    this.sendRequest(recordingResult.blob, response => {\n        if (this.verify(response)) {\n            recordingResult.wordArray = this.formatResponse(response);\n        } else {\n            console.log('the retrieved response from the server is not valid!');\n            recordingResult.wordArray = [];\n        }\n        callback(recordingResult);\n    });\n};\n\n/**\n * Abstract method which will rend the recorder audio stream to the implemented\n * transcription service and will retrieve an answer, which will be\n * called on the given callback method\n *\n * @param {Blob} audioBlob the recorded audio stream as a single Blob\n * @param {function} callback function which will retrieve the answer\n *                            from the service\n */\n// eslint-disable-next-line no-unused-vars\nTranscriptionService.prototype.sendRequest = function(audioBlob, callback) {\n    throw new Error('TranscriptionService.sendRequest is abstract');\n};\n\n/**\n * Abstract method which will parse the output from the implemented\n * transcription service to the expected format\n *\n * The transcriber class expect an array of word objects, where each word\n * object is one transcribed word by the service.\n *\n * The expected output of this method is an array of word objects, in\n * the correct order. That is, the first object in the array is the first word\n * being said, and the last word in the array is the last word being said\n *\n * @param response the answer from the speech-to-text server which needs to be\n *                 formatted\n * @return {Array<Word>} an array of Word objects\n */\n// eslint-disable-next-line no-unused-vars\nTranscriptionService.prototype.formatResponse = function(response) {\n    throw new Error('TranscriptionService.format is abstract');\n};\n\n/**\n * Abstract method which will verify that the response from the server is valid\n *\n * @param response the response from the server\n * @return {boolean} true if response is valid, false otherwise\n */\n// eslint-disable-next-line no-unused-vars\nTranscriptionService.prototype.verify = function(response) {\n    throw new Error('TranscriptionService.verify is abstract');\n};\n\nmodule.exports = TranscriptionService;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/transcriptionServices/AbstractTranscriptionService.js","/**\n * An object representing a transcribed word, with some additional information\n * @param word the word\n * @param begin the time the word was started being uttered\n * @param end the time the word stopped being uttered\n */\nconst Word = function(word, begin, end) {\n    this.word = word;\n    this.begin = begin;\n    this.end = end;\n};\n\n/**\n * Get the string representation of the word\n * @returns {*} the word as a string\n */\nWord.prototype.getWord = function() {\n    return this.word;\n};\n\n/**\n * Get the time the word started being uttered\n * @returns {*} the start time as an integer\n */\nWord.prototype.getBeginTime = function() {\n    return this.begin;\n};\n\n/**\n * Get the time the word stopped being uttered\n * @returns {*} the end time as an integer\n */\nWord.prototype.getEndTime = function() {\n    return this.end;\n};\n\nmodule.exports = Word;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/word.js","import { getLogger } from 'jitsi-meet-logger';\n\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\n\nimport JibriSession from './JibriSession';\nimport recordingXMLUtils from './recordingXMLUtils';\n\nconst logger = getLogger(__filename);\n\n/**\n * A class responsible for starting and stopping recording sessions and emitting\n * state updates for them.\n */\nclass RecordingManager {\n    /**\n     * Initialize {@code RecordingManager} with other objects that are necessary\n     * for starting a recording.\n     *\n     * @param {ChatRoom} chatRoom - The chat room to handle.\n     * @returns {void}\n     */\n    constructor(chatRoom) {\n        /**\n         * All known recording sessions from the current conference.\n         */\n        this._sessions = {};\n\n        this._chatRoom = chatRoom;\n\n        this.onPresence = this.onPresence.bind(this);\n\n        this._chatRoom.eventEmitter.addListener(\n            XMPPEvents.PRESENCE_RECEIVED, this.onPresence);\n    }\n\n    /**\n     * Finds an existing recording session by session ID.\n     *\n     * @param {string} sessionID - The session ID associated with the recording.\n     * @returns {JibriSession|undefined}\n     */\n    getSession(sessionID) {\n        return this._sessions[sessionID];\n    }\n\n    /**\n     * Callback to invoke to parse through a presence update to find recording\n     * related updates (from Jibri participant doing the recording and the\n     * focus which controls recording).\n     *\n     * @param {Object} event - The presence data from the pubsub event.\n     * @param {Node} event.presence - An XMPP presence update.\n     * @param {boolean} event.fromHiddenDomain - Whether or not the update comes\n     * from a participant that is trusted but not visible, as would be the case\n     * with the Jibri recorder participant.\n     * @returns {void}\n     */\n    onPresence({ fromHiddenDomain, presence }) {\n        if (recordingXMLUtils.isFromFocus(presence)) {\n            this._handleFocusPresence(presence);\n        } else if (fromHiddenDomain) {\n            this._handleJibriPresence(presence);\n        }\n    }\n\n    /**\n     * Start a recording session.\n     *\n     * @param {Object} options - Configuration for the recording.\n     * @param {string} [options.appData] - Data specific to the app/service that\n     * the result file will be uploaded.\n     * @param {string} [optional] options.broadcastId - The channel on which a\n     * live stream will occur.\n     * @param {string} options.mode - The mode in which recording should be\n     * started. Recognized values are \"file\" and \"stream\".\n     * @param {string} [optional] options.streamId - The stream key to be used\n     * for live stream broadcasting. Required for live streaming.\n     * @returns {Promise} A promise for starting a recording, which will pass\n     * back the session on success. The promise resolves after receiving an\n     * acknowledgment of the start request success or fail.\n     */\n    startRecording(options) {\n        const session = new JibriSession({\n            ...options,\n            connection: this._chatRoom.connection\n        });\n\n        return session.start({\n            appData: options.appData,\n            broadcastId: options.broadcastId,\n            focusMucJid: this._chatRoom.focusMucJid,\n            streamId: options.streamId\n        })\n            .then(() => {\n                // Only store the session and emit if the session has not been\n                // added already. This is a workaround for the session getting\n                // created due to a presence update to announce a \"pending\"\n                // recording being received before JibriSession#start finishes.\n                if (!this.getSession(session.getID())) {\n                    this._addSession(session);\n                    this._emitSessionUpdate(session);\n                }\n\n                return session;\n            })\n            .catch(error => {\n                this._emitSessionUpdate(session);\n\n                return Promise.reject(error);\n            });\n    }\n\n    /**\n     * Stop a recording session.\n     *\n     * @param {string} sessionID - The ID associated with the recording session\n     * to be stopped.\n     * @returns {Promise} The promise resolves after receiving an\n     * acknowledgment of the stop request success or fail.\n     */\n    stopRecording(sessionID) {\n        const session = this.getSession(sessionID);\n\n        if (session) {\n            return session.stop({ focusMucJid: this._chatRoom.focusMucJid });\n        }\n\n        return Promise.reject(new Error('Could not find session'));\n    }\n\n    /**\n     * Stores a reference to the passed in JibriSession.\n     *\n     * @param {string} session - The JibriSession instance to store.\n     * @returns {void}\n     */\n    _addSession(session) {\n        this._sessions[session.getID()] = session;\n    }\n\n    /**\n     * Create a new instance of a recording session and stores a reference to\n     * it.\n     *\n     * @param {string} sessionID - The session ID of the recording in progress.\n     * @param {string} status - The current status of the recording session.\n     * @param {string} mode - The recording mode of the session.\n     * @returns {JibriSession}\n     */\n    _createSession(sessionID, status, mode) {\n        const session = new JibriSession({\n            connection: this._chatRoom.connection,\n            focusMucJid: this._chatRoom.focusMucJid,\n            mode,\n            sessionID,\n            status\n        });\n\n        this._addSession(session);\n\n        return session;\n    }\n\n    /**\n     * Notifies listeners of an update to a recording session.\n     *\n     * @param {JibriSession} session - The session that has been updated.\n     */\n    _emitSessionUpdate(session) {\n        this._chatRoom.eventEmitter.emit(\n            XMPPEvents.RECORDER_STATE_CHANGED, session);\n    }\n\n    /**\n     * Parses presence to update an existing JibriSession or to create a new\n     * JibriSession.\n     *\n     * @param {Node} presence - An XMPP presence update.\n     * @returns {void}\n     */\n    _handleFocusPresence(presence) {\n        const jibriStatus = recordingXMLUtils.getFocusRecordingUpdate(presence);\n\n        if (!jibriStatus) {\n            return;\n        }\n\n        const { sessionID, status, error, recordingMode } = jibriStatus;\n\n        // We'll look for an existing session or create one (in case we're a\n        // participant joining a call with an existing recording going on).\n        let session = this.getSession(sessionID);\n\n        // Handle the case where a status update is received in presence but\n        // the local participant has joined while the JibriSession has already\n        // ended.\n        if (!session && status === 'off') {\n            logger.warn(\n                'Ignoring recording presence update',\n                'Received a new session with status off.');\n\n            return;\n        }\n\n        if (!session) {\n            session = this._createSession(sessionID, status, recordingMode);\n        }\n\n        session.setStatus(status);\n\n        if (error) {\n            session.setError(error);\n        }\n\n        this._emitSessionUpdate(session);\n    }\n\n    /**\n     * Handles updates from the Jibri which can broadcast a YouTube URL that\n     * needs to be updated in a JibriSession.\n     *\n     * @param {Node} presence - An XMPP presence update.\n     * @returns {void}\n     */\n    _handleJibriPresence(presence) {\n        const { liveStreamViewURL, mode, sessionID }\n            = recordingXMLUtils.getHiddenDomainUpdate(presence);\n\n        if (!sessionID) {\n            logger.warn(\n                'Ignoring potential jibri presence due to no session id.');\n\n            return;\n        }\n\n        let session = this.getSession(sessionID);\n\n        if (!session) {\n            session = this._createSession(sessionID, '', mode);\n        }\n\n        session.setLiveStreamViewURL(liveStreamViewURL);\n\n        this._emitSessionUpdate(session);\n    }\n}\n\nexport default RecordingManager;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/recording/RecordingManager.js","import { $iq } from 'strophe.js';\n\nimport recordingXMLUtils from './recordingXMLUtils';\n\n/**\n * Represents a recording session.\n */\nexport default class JibriSession {\n    /**\n     * Initializes a new JibriSession instance.\n     *\n     * @constructor\n     */\n    constructor(options = {}) {\n        this._connection = options.connection;\n        this._mode = options.mode;\n\n        this._setSessionID(options.sessionID);\n        this.setStatus(options.status);\n    }\n\n    /**\n     * Returns the error related to the session instance, if any.\n     *\n     * @returns {string|undefined}\n     */\n    getError() {\n        return this._error;\n    }\n\n    /**\n     * Returns the session ID of the session instance.\n     *\n     * @returns {string|undefined}\n     */\n    getID() {\n        return this._sessionID;\n    }\n\n    /**\n     * Returns the streaming URL of the session.\n     *\n     * @returns {string|undefined}\n     */\n    getLiveStreamViewURL() {\n        return this._liveStreamViewURL;\n    }\n\n    /**\n     * Returns the current status of the session.\n     *\n     * @returns {string|undefined}\n     */\n    getStatus() {\n        return this._status;\n    }\n\n    /**\n     * Returns the current recording mode of the session, such as \"file\".\n     *\n     * @returns {string}\n     */\n    getMode() {\n        return this._mode;\n    }\n\n    /**\n     * Sets the last known error message related to the session.\n     *\n     * @param {string} error - The error string explaining why the session\n     * entered an error state.\n     * @returns {void}\n     */\n    setError(error) {\n        this._error = error;\n    }\n\n    /**\n     * Sets the last live stream URL for the session instance. Usually this is\n     * a YouTube URL and usually this is only set for \"stream\" sessions.\n     *\n     * @param {string} url - The live stream URL associated with the session.\n     * @returns {void}\n     */\n    setLiveStreamViewURL(url) {\n        this._liveStreamViewURL = url;\n    }\n\n    /**\n     * Sets the last known status for this recording session.\n     *\n     * @param {string} status - The new status to set.\n     * @returns {void}\n     */\n    setStatus(status) {\n        this._status = status;\n    }\n\n    /**\n     * Sends a message to start the actual recording.\n     *\n     * @param {Object} options - Additional arguments for starting the\n     * recording.\n     * @param {string} [options.appData] - Data specific to the app/service that\n     * the result file will be uploaded.\n     * @param {string} [options.broadcastId] - The broadcast ID of an\n     * associated YouTube stream, used for knowing the URL from which the stream\n     * can be viewed.\n     * @param {string} options.focusMucJid - The JID of the focus participant\n     * that controls recording.\n     * @param {streamId} options.streamId - Necessary for live streaming, this\n     * is the the stream key needed to start a live streaming session with the\n     * streaming service provider.\n     * @returns Promise\n     */\n    start({ appData, broadcastId, focusMucJid, streamId }) {\n        return new Promise((resolve, reject) => {\n            this._connection.sendIQ(\n                this._createIQ({\n                    action: 'start',\n                    appData,\n                    focusMucJid,\n                    broadcastId,\n                    streamId\n                }),\n                result => {\n                    // All users will eventually receive the 'pending' status\n                    // from the backend, but for the user initiating the session\n                    // it's better to give some instant feedback that recording\n                    // is starting so fire 'pending' here manually.\n                    this.setStatus('pending');\n                    this._setSessionID(\n                        recordingXMLUtils.getSessionIdFromIq(result));\n\n                    resolve();\n                },\n                error => {\n                    this._setErrorFromIq(error);\n\n                    reject(error);\n                });\n        });\n    }\n\n    /**\n     * Sends a message to actually stop the recording session.\n     *\n     * @param {Object} options - Additional arguments for stopping the\n     * recording.\n     * @param {Object} options.focusMucJid - The JID of the focus participant\n     * that controls recording.\n     * @returns Promise\n     */\n    stop({ focusMucJid }) {\n        return new Promise((resolve, reject) => {\n            this._connection.sendIQ(\n                this._createIQ({\n                    action: 'stop',\n                    focusMucJid\n                }),\n                resolve,\n                reject);\n        });\n    }\n\n    /**\n     * Generates the message to change the status of the recording session.\n     *\n     * @param {string} status - The new status to which the recording session\n     * should transition.\n     * @param {string} [options.appData] - Data specific to the app/service that\n     * the result file will be uploaded.\n     * @param {string} [options.broadcastId] - The broadcast ID of an\n     * associated YouTube stream, used for knowing the URL from which the stream\n     * can be viewed.\n     * @param {string} options.focusMucJid - The JID of the focus participant\n     * that controls recording.\n     * @param {streamId} options.streamId - Necessary for live streaming, this\n     * is the the stream key needed to start a live streaming session with the\n     * streaming service provider.\n     * @returns Object - The XMPP IQ message.\n     */\n    _createIQ({ action, appData, broadcastId, focusMucJid, streamId }) {\n        return $iq({\n            to: focusMucJid,\n            type: 'set'\n        })\n        .c('jibri', {\n            'xmlns': 'http://jitsi.org/protocol/jibri',\n            'action': action,\n            'app_data': appData,\n            'recording_mode': this._mode,\n            'streamid': streamId,\n            'you_tube_broadcast_id': broadcastId\n        })\n        .up();\n    }\n\n    /**\n     * Handles the error from an iq and stores the error.\n     *\n     * @param {Node} errorIq - The error response from an Iq.\n     * @private\n     * @returns {void}\n     */\n    _setErrorFromIq(errorIq) {\n        const error = errorIq.getElementsByTagName('error')[0];\n\n        this.setError(error.children[0].tagName);\n    }\n\n    /**\n     * Sets the known session ID for this recording session.\n     *\n     * @param {string} sessionID\n     * @private\n     * @returns {void}\n     */\n    _setSessionID(sessionID) {\n        this._sessionID = sessionID;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/recording/JibriSession.js","import { getLogger } from 'jitsi-meet-logger';\nconst logger = getLogger(__filename);\n\nimport JitsiVideoSIPGWSession from './JitsiVideoSIPGWSession';\nimport * as Constants from './VideoSIPGWConstants';\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\n\n/**\n * Main video SIP GW handler. Stores references of all created sessions.\n */\nexport default class VideoSIPGW {\n\n    /**\n     * Creates new handler.\n     *\n     * @param {ChatRoom} chatRoom - Tha chat room to handle.\n     */\n    constructor(chatRoom) {\n        this.chatRoom = chatRoom;\n        this.eventEmitter = chatRoom.eventEmitter;\n        logger.debug('creating VideoSIPGW');\n        this.sessions = {};\n\n        this.sessionStateChangeListener = this.sessionStateChanged.bind(this);\n\n        // VideoSIPGW, JitsiConference and ChatRoom are not reusable and no\n        // more than one VideoSIPGW can be created per JitsiConference,\n        // so we don't bother to cleanup\n        chatRoom.addPresenceListener('jibri-sip-call-state',\n            this.handleJibriSIPState.bind(this));\n    }\n\n    /**\n     * Handles presence nodes with name: jibri-sip-call-state.\n     *\n     * @param {Object} node the presence node Object to handle.\n     * Object representing part of the presence received over xmpp.\n     */\n    handleJibriSIPState(node) {\n        const attributes = node.attributes;\n\n        if (!attributes) {\n            return;\n        }\n\n        logger.debug('Handle video sip gw state : ', attributes);\n\n        const newState = attributes.state;\n\n        if (newState === this.state) {\n            return;\n        }\n\n        switch (newState) {\n        case Constants.STATE_ON:\n        case Constants.STATE_OFF:\n        case Constants.STATE_PENDING:\n        case Constants.STATE_RETRYING:\n        case Constants.STATE_FAILED: {\n            const address = attributes.sipaddress;\n\n            if (!address) {\n                return;\n            }\n\n            // find the corresponding session and set its state\n            const session = this.sessions[address];\n\n            if (session) {\n                session.setState(newState, attributes.failure_reason);\n            } else {\n                logger.warn('Video SIP GW session not found:', address);\n            }\n        }\n        }\n    }\n\n    /**\n     * Creates new session and stores its reference if it does not exist or\n     * returns an error otherwise.\n     *\n     * @param {string} sipAddress - The sip address to use.\n     * @param {string} displayName - The display name to use.\n     * @returns {JitsiVideoSIPGWSession|Error}\n     */\n    createVideoSIPGWSession(sipAddress, displayName) {\n        if (this.sessions[sipAddress]) {\n            logger.warn('There was already a Video SIP GW session for address',\n                sipAddress);\n\n            return new Error(Constants.ERROR_SESSION_EXISTS);\n        }\n\n        const session = new JitsiVideoSIPGWSession(\n            sipAddress, displayName, this.chatRoom);\n\n        session.addStateListener(this.sessionStateChangeListener);\n\n        this.sessions[sipAddress] = session;\n\n        return session;\n    }\n\n    /**\n     * Listener for session state changed. When a session goes to off or failed\n     * we delete its reference.\n     *\n     * @param {options} event - { address, oldState, newState, displayName }\n     */\n    sessionStateChanged(event) {\n        const address = event.address;\n\n        if (event.newState === Constants.STATE_OFF\n            || event.newState === Constants.STATE_FAILED) {\n            const session = this.sessions[address];\n\n            if (!session) {\n                logger.error('Missing Video SIP GW session with address:',\n                    address);\n\n                return;\n            }\n\n            session.removeStateListener(this.sessionStateChangeListener);\n            delete this.sessions[address];\n        }\n\n        this.eventEmitter.emit(\n            XMPPEvents.VIDEO_SIP_GW_SESSION_STATE_CHANGED,\n            event);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/videosipgw/VideoSIPGW.js","import { getLogger } from 'jitsi-meet-logger';\nimport { $iq } from 'strophe.js';\n\nimport Listenable from '../util/Listenable';\n\nimport * as VideoSIPGWConstants from './VideoSIPGWConstants';\n\nconst logger = getLogger(__filename);\n\n/**\n * The event name for current sip video session state changed.\n * @type {string} event name for sip video session state changed.\n */\nconst STATE_CHANGED = 'STATE_CHANGED';\n\n/**\n * Jitsi video SIP GW session. Holding its state and able to start/stop it.\n * When session is in OFF or FAILED stated it cannot be used anymore.\n */\nexport default class JitsiVideoSIPGWSession extends Listenable {\n\n    /**\n     * Creates new session with the desired sip address and display name.\n     *\n     * @param {string} sipAddress - The sip address to use when\n     * starting the session.\n     * @param {string} displayName - The display name to use for\n     * that participant.\n     * @param {ChatRoom} chatRoom - The chat room this session is bound to.\n     */\n    constructor(sipAddress, displayName, chatRoom) {\n        super();\n\n        this.sipAddress = sipAddress;\n        this.displayName = displayName;\n        this.chatRoom = chatRoom;\n\n        /*\n         * The initial state is undefined. Initial state cannot be STATE_OFF,\n         * the session enters this state when it was in STATE_ON and was stopped\n         * and such session cannot be used anymore.\n         *\n         * @type {VideoSIPGWConstants|undefined}\n         */\n        this.state = undefined;\n    }\n\n    /**\n     * Stops the current session.\n     */\n    stop() {\n        if (this.state === VideoSIPGWConstants.STATE_OFF\n            || this.state === VideoSIPGWConstants.STATE_FAILED) {\n            logger.warn('Video SIP GW session already stopped or failed!');\n\n            return;\n        }\n\n        this._sendJibriIQ('stop');\n    }\n\n    /**\n     * Starts a new session. Sends an iq to the focus.\n     */\n    start() {\n        // if state is off, this session was active for some reason\n        // and we should create new one, rather than reusing it\n        if (this.state === VideoSIPGWConstants.STATE_ON\n            || this.state === VideoSIPGWConstants.STATE_OFF\n            || this.state === VideoSIPGWConstants.STATE_PENDING\n            || this.state === VideoSIPGWConstants.STATE_RETRYING) {\n            logger.warn('Video SIP GW session already started!');\n\n            return;\n        }\n\n        this._sendJibriIQ('start');\n    }\n\n    /**\n     * Changes the state of this session.\n     *\n     * @param {string} newState - The new {VideoSIPGWConstants} state to set.\n     * @param {string} [optional] failureReason - The reason why a failure state\n     * was entered.\n     * @returns {void}\n     */\n    setState(newState, failureReason) {\n        if (newState === this.state) {\n            return;\n        }\n\n        const oldState = this.state;\n\n        this.state = newState;\n        this.eventEmitter.emit(STATE_CHANGED,\n            {\n                address: this.sipAddress,\n                failureReason,\n                oldState,\n                newState: this.state,\n                displayName: this.displayName\n            }\n        );\n    }\n\n    /**\n     * Subscribes the passed listener to the event for state change of this\n     * session.\n     *\n     * @param {Function} listener - The function that will receive the event.\n     */\n    addStateListener(listener) {\n        this.addListener(STATE_CHANGED, listener);\n    }\n\n    /**\n     * Unsubscribes the passed handler.\n     *\n     * @param {Function} listener - The function to be removed.\n     */\n    removeStateListener(listener) {\n        this.removeListener(STATE_CHANGED, listener);\n    }\n\n    /**\n     * Sends a jibri command using an iq.\n     *\n     * @private\n     * @param {string} action - The action to send ('start' or 'stop').\n     */\n    _sendJibriIQ(action) {\n        const attributes = {\n            'xmlns': 'http://jitsi.org/protocol/jibri',\n            'action': action,\n            sipaddress: this.sipAddress\n        };\n\n        attributes.displayname = this.displayName;\n\n        const iq = $iq({\n            to: this.chatRoom.focusMucJid,\n            type: 'set' })\n            .c('jibri', attributes)\n            .up();\n\n        logger.debug(`${action} video SIP GW session`, iq.nodeTree);\n        this.chatRoom.connection.sendIQ(\n            iq,\n            () => {}, // eslint-disable-line no-empty-function\n            error => {\n                logger.error(\n                    `Failed to ${action} video SIP GW session, error: `, error);\n                this.setState(VideoSIPGWConstants.STATE_FAILED);\n            });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/videosipgw/JitsiVideoSIPGWSession.js","import browser from '../browser';\nimport { createRttByRegionEvent }\n    from '../../service/statistics/AnalyticsEvents';\nimport { getLogger } from 'jitsi-meet-logger';\nimport RTCUtils from '../RTC/RTCUtils';\nimport Statistics from '../statistics/statistics';\n\nconst logger = getLogger(__filename);\n\n/**\n * The options to pass to createOffer (we need to offer to receive *something*\n * for the PC to gather candidates.\n */\nconst offerOptions = {\n    offerToReceiveAudio: 1,\n    offerToReceiveVideo: 0\n};\n\n\n/**\n * The interval at which the webrtc engine sends STUN keep alive requests.\n * @type {number}\n */\nconst stunKeepAliveIntervalMs = 10000;\n\n/**\n * Wraps a PeerConnection with one specific STUN server and measures the RTT\n * to the STUN server.\n */\nclass PCMonitor {\n    /* eslint-disable max-params */\n    /**\n     *\n     * @param {String} region - The region of the STUN server.\n     * @param {String} address - The address of the STUN server.\n     * @param {number} getStatsIntervalMs how often to call getStats.\n     * @param {number} delay the delay after which the PeerConnection will be\n     * started (that is, createOffer and setLocalDescription will be invoked).\n     *\n     */\n    constructor(region, address, getStatsIntervalMs, delay) {\n        /* eslint-disable max-params */\n        this.region = region;\n        this.getStatsIntervalMs = getStatsIntervalMs;\n        this.getStatsInterval = null;\n\n        // What we consider the current RTT. It is Math.min(this.rtts).\n        this.rtt = Infinity;\n\n        // The RTT measurements we've made from the latest getStats() calls.\n        this.rtts = [];\n\n        const iceServers = [ { 'url': `stun:${address}` } ];\n\n        this.pc = new RTCUtils.RTCPeerConnectionType(\n            {\n                'iceServers': iceServers\n            });\n\n        // Maps a key consisting of the IP address, port and priority of a\n        // candidate to some state related to it. If we have more than one\n        // network interface we will might multiple srflx candidates and this\n        // helps to distinguish between then.\n        this.candidates = {};\n\n        this.stopped = false;\n\n        this.start = this.start.bind(this);\n        this.stop = this.stop.bind(this);\n        this.startStatsInterval = this.startStatsInterval.bind(this);\n        this.handleCandidateRtt = this.handleCandidateRtt.bind(this);\n\n        window.setTimeout(this.start, delay);\n    }\n\n    /**\n     * Starts this PCMonitor. That is, invokes createOffer and\n     * setLocalDescription on the PeerConnection and starts an interval which\n     * calls getStats.\n     */\n    start() {\n        if (this.stopped) {\n            return;\n        }\n\n        this.pc.createOffer(offerOptions).then(offer => {\n            this.pc.setLocalDescription(\n                offer,\n                () => {\n                    logger.info(\n                        `setLocalDescription success for ${this.region}`);\n                    this.startStatsInterval();\n                },\n                error => {\n                    logger.warn(\n                        `setLocalDescription failed for ${this.region}: ${\n                            error}`);\n                }\n            );\n        });\n    }\n\n    /**\n     * Starts an interval which invokes getStats on the PeerConnection and\n     * measures the RTTs for the different candidates.\n     */\n    startStatsInterval() {\n        this.getStatsInterval = window.setInterval(\n            () => {\n                // Note that the data that we use to measure the RTT is only\n                // available in the legacy (callback based) getStats API.\n                this.pc.getStats(stats => {\n                    const results = stats.result();\n\n                    for (let i = 0; i < results.length; ++i) {\n                        const res = results[i];\n                        const rttTotal\n                            = Number(res.stat('stunKeepaliveRttTotal'));\n\n                        // We recognize the results that we care for (local\n                        // candidates of type srflx) by the existance of the\n                        // stunKeepaliveRttTotal stat.\n                        if (rttTotal > 0) {\n                            const candidateKey\n                                = `${res.stat('ipAddress')}_${\n                                    res.stat('portNumber')}_${\n                                    res.stat('priority')}`;\n\n                            this.handleCandidateRtt(\n                                candidateKey,\n                                rttTotal,\n                                Number(\n                                    res.stat('stunKeepaliveResponsesReceived')),\n                                Number(\n                                    res.stat('stunKeepaliveRequestsSent')));\n                        }\n                    }\n\n                    // After we've measured the RTT for all candidates we,\n                    // update the state of the PC with the shortest one.\n                    let rtt = Infinity;\n\n                    for (const key in this.candidates) {\n                        if (this.candidates.hasOwnProperty(key)\n                            && this.candidates[key].rtt > 0) {\n                            rtt = Math.min(rtt, this.candidates[key].rtt);\n                        }\n                    }\n\n                    // We keep the last 6 measured RTTs and choose the shortest\n                    // one to export to analytics. This is because we often see\n                    // failures get a real measurement which end up as Infinity.\n                    this.rtts.push(rtt);\n                    if (this.rtts.length > 6) {\n                        this.rtts = this.rtts.splice(1, 7);\n                    }\n                    this.rtt = Math.min(...this.rtts);\n                });\n            },\n            this.getStatsIntervalMs\n        );\n    }\n\n    /* eslint-disable max-params */\n    /**\n     * Updates the RTT for a candidate identified by \"key\" based on the values\n     * from getStats() and the previously saved state (i.e. old values).\n     *\n     * @param {String} key the ID for the candidate\n     * @param {number} rttTotal the value of the 'stunKeepaliveRttTotal' just\n     * measured.\n     * @param {number} responsesReceived the value of the\n     * 'stunKeepaliveResponsesReceived' stat just measured.\n     * @param {number} requestsSent the value of the 'stunKeepaliveRequestsSent'\n     * stat just measured.\n     */\n    handleCandidateRtt(key, rttTotal, responsesReceived, requestsSent) {\n        /* eslist-enable max-params */\n        if (!this.candidates[key]) {\n            this.candidates[key] = {\n                rttTotal: 0,\n                responsesReceived: 0,\n                requestsSent: 0,\n                rtt: NaN\n            };\n        }\n\n        const rttTotalDiff = rttTotal - this.candidates[key].rttTotal;\n        const responsesReceivedDiff\n            = responsesReceived - this.candidates[key].responsesReceived;\n\n        // We observe that when the difference between the number of requests\n        // and responses has grown (i.q. when the value below is positive), the\n        // the RTT measurements are incorrect (too low). For this reason we\n        // ignore these measurement (setting rtt=NaN), but update our state.\n        const requestsResponsesDiff\n            = (requestsSent - responsesReceived)\n            - (this.candidates[key].requestsSent\n                - this.candidates[key].responsesReceived);\n        let rtt = NaN;\n\n        if (responsesReceivedDiff > 0 && requestsResponsesDiff === 0) {\n            rtt = rttTotalDiff / responsesReceivedDiff;\n        }\n\n        this.candidates[key].rttTotal = rttTotal;\n        this.candidates[key].responsesReceived = responsesReceived;\n        this.candidates[key].requestsSent = requestsSent;\n        this.candidates[key].rtt = rtt;\n    }\n\n\n    /**\n     * Stops this PCMonitor, clearing its intervals and stopping the\n     * PeerConnection.\n     */\n    stop() {\n        if (this.getStatsInterval) {\n            window.clearInterval(this.getStatsInterval);\n        }\n\n        this.pc.close();\n\n        this.stopped = true;\n    }\n}\n\n/**\n * A class which monitors the round-trip time (RTT) to a set of STUN servers.\n * The measured RTTs are sent as analytics events. It uses a separate\n * PeerConnection (represented as a PCMonitor) for each STUN server.\n */\nexport default class RttMonitor {\n    /**\n     * Initializes a new RttMonitor.\n     * @param {Object} config the object holding the configuration.\n     */\n    constructor(config) {\n        if (!config || !config.enabled\n            || !browser.supportsLocalCandidateRttStatistics()) {\n            return;\n        }\n\n        // Maps a region to the PCMonitor instance for that region.\n        this.pcMonitors = {};\n\n        this.startPCMonitors = this.startPCMonitors.bind(this);\n        this.sendAnalytics = this.sendAnalytics.bind(this);\n        this.stop = this.stop.bind(this);\n\n        this.analyticsInterval = null;\n        this.stopped = false;\n\n        const initialDelay = config.initialDelay || 60000;\n\n\n        logger.info(\n            `Starting RTT monitor with an initial delay of ${initialDelay}`);\n\n\n        window.setTimeout(\n            () => this.startPCMonitors(config),\n            initialDelay);\n    }\n\n    /**\n     * Starts the PCMonitors according to the configuration.\n     */\n    startPCMonitors(config) {\n        if (!config.stunServers) {\n            logger.warn('No stun servers configured.');\n\n            return;\n        }\n\n        if (this.stopped) {\n            return;\n        }\n\n        const getStatsIntervalMs\n            = config.getStatsInterval || stunKeepAliveIntervalMs;\n        const analyticsIntervalMs\n            = config.analyticsInterval || getStatsIntervalMs;\n        const count = Object.keys(config.stunServers).length;\n        const offset = getStatsIntervalMs / count;\n\n        // We delay the initialization of each PC so that they are uniformly\n        // distributed across the getStatsIntervalMs.\n        let i = 0;\n\n        for (const region in config.stunServers) {\n            if (config.stunServers.hasOwnProperty(region)) {\n                const address = config.stunServers[region];\n\n                this.pcMonitors[region]\n                    = new PCMonitor(\n                        region,\n                        address,\n                        getStatsIntervalMs,\n                        offset * i);\n                i++;\n            }\n        }\n\n        window.setTimeout(\n            () => {\n                if (!this.stopped) {\n                    this.analyticsInterval\n                        = window.setInterval(\n                        this.sendAnalytics, analyticsIntervalMs);\n                }\n            },\n            1000);\n    }\n\n    /**\n     * Sends an analytics event with the measured RTT to each region/STUN\n     * server.\n     */\n    sendAnalytics() {\n        const rtts = {};\n\n        for (const region in this.pcMonitors) {\n            if (this.pcMonitors.hasOwnProperty(region)) {\n                const rtt = this.pcMonitors[region].rtt;\n\n                if (!isNaN(rtt) && rtt !== Infinity) {\n                    rtts[region.replace('-', '_')] = rtt;\n                }\n            }\n        }\n\n        if (rtts) {\n            Statistics.sendAnalytics(createRttByRegionEvent(rtts));\n        }\n    }\n\n    /**\n     * Stops this RttMonitor, clearing all intervals and closing all\n     * PeerConnections.\n     */\n    stop() {\n        logger.info('Stopping RttMonitor.');\n        this.stopped = true;\n        for (const region in this.pcMonitors) {\n            if (this.pcMonitors.hasOwnProperty(region)) {\n                this.pcMonitors[region].stop();\n            }\n        }\n        this.pcMonitors = {};\n\n        if (this.analyticsInterval) {\n            window.clearInterval(this.analyticsInterval);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/rttmonitor/rttmonitor.js","import * as JitsiConferenceEvents from '../../JitsiConferenceEvents';\nimport SpeakerStats from './SpeakerStats';\n\n/**\n * A collection for tracking speaker stats. Attaches listeners\n * to the conference to automatically update on tracked events.\n */\nexport default class SpeakerStatsCollector {\n    /**\n     * Initializes a new SpeakerStatsCollector instance.\n     *\n     * @constructor\n     * @param {JitsiConference} conference - The conference to track.\n     * @returns {void}\n     */\n    constructor(conference) {\n        this.stats = {\n            users: {\n\n                // userId: SpeakerStats\n            },\n            dominantSpeakerId: null\n        };\n\n        const userId = conference.myUserId();\n\n        this.stats.users[userId] = new SpeakerStats(userId, null, true);\n\n        conference.addEventListener(\n            JitsiConferenceEvents.DOMINANT_SPEAKER_CHANGED,\n            this._onDominantSpeaker.bind(this));\n        conference.addEventListener(\n            JitsiConferenceEvents.USER_JOINED,\n            this._onUserJoin.bind(this));\n        conference.addEventListener(\n            JitsiConferenceEvents.USER_LEFT,\n            this._onUserLeave.bind(this));\n        conference.addEventListener(\n            JitsiConferenceEvents.DISPLAY_NAME_CHANGED,\n            this._onDisplayNameChange.bind(this));\n    }\n\n    /**\n     * Reacts to dominant speaker change events by changing its speaker stats\n     * models to reflect the current dominant speaker.\n     *\n     * @param {string} dominantSpeakerId - The user id of the new\n     * dominant speaker.\n     * @returns {void}\n     * @private\n     */\n    _onDominantSpeaker(dominantSpeakerId) {\n        const oldDominantSpeaker\n            = this.stats.users[this.stats.dominantSpeakerId];\n        const newDominantSpaker = this.stats.users[dominantSpeakerId];\n\n        oldDominantSpeaker && oldDominantSpeaker.setIsDominantSpeaker(false);\n        newDominantSpaker && newDominantSpaker.setIsDominantSpeaker(true);\n        this.stats.dominantSpeakerId = dominantSpeakerId;\n    }\n\n    /**\n     * Reacts to user join events by creating a new SpeakerStats model.\n     *\n     * @param {string} userId - The user id of the new user.\n     * @param {JitsiParticipant} - The JitsiParticipant model for the new user.\n     * @returns {void}\n     * @private\n     */\n    _onUserJoin(userId, participant) {\n        let savedUser = this.stats.users[userId];\n\n        if (!savedUser) {\n            savedUser = this.stats.users[userId]\n                = new SpeakerStats(userId, participant.getDisplayName());\n        }\n    }\n\n    /**\n     * Reacts to user leave events by updating the associated user's\n     * SpeakerStats model.\n     *\n     * @param {string} userId - The user id of the user that left.\n     * @returns {void}\n     * @private\n     */\n    _onUserLeave(userId) {\n        const savedUser = this.stats.users[userId];\n\n        if (savedUser) {\n            savedUser.markAsHasLeft();\n        }\n    }\n\n    /**\n     * Reacts to user name change events by updating the last known name\n     * tracked in the associated SpeakerStats model.\n     *\n     * @param {string} userId - The user id of the user that left.\n     * @returns {void}\n     * @private\n     */\n    _onDisplayNameChange(userId, newName) {\n        const savedUser = this.stats.users[userId];\n\n        if (savedUser) {\n            savedUser.setDisplayName(newName);\n        }\n    }\n\n    /**\n     * Return a copy of the tracked SpeakerStats models.\n     *\n     * @returns {Object} The keys are the user ids and the values are the\n     * associated user's SpeakerStats model.\n     * @private\n     */\n    getStats() {\n        return this.stats.users;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/SpeakerStatsCollector.js","/**\n * A model for keeping track of each user's total\n * time as a dominant speaker. The model also\n * keeps track of the user's last known name\n * in case the user has left the meeting,\n * which is also tracked.\n */\nclass SpeakerStats {\n    /**\n     * Initializes a new SpeakerStats instance.\n     *\n     * @constructor\n     * @param {string} userId - The id of the user being tracked.\n     * @param {string} displayName - The name of the user being tracked.\n     * @param {boolean} isLocalStats - True if the stats model tracks\n     * the local user.\n     * @returns {void}\n     */\n    constructor(userId, displayName, isLocalStats) {\n        this._userId = userId;\n        this.setDisplayName(displayName);\n        this._isLocalStats = isLocalStats || false;\n        this.setIsDominantSpeaker(false);\n        this.totalDominantSpeakerTime = 0;\n        this._dominantSpeakerStart = null;\n        this._hasLeft = false;\n    }\n\n    /**\n     * Get the user id being tracked.\n     *\n     * @returns {string} The user id.\n     */\n    getUserId() {\n        return this._userId;\n    }\n\n    /**\n     * Get the name of the user being tracked.\n     *\n     * @returns {string} The user name.\n     */\n    getDisplayName() {\n        return this.displayName;\n    }\n\n    /**\n     * Updates the last known name of the user being tracked.\n     *\n     * @param {string} - The user name.\n     * @returns {void}\n     */\n    setDisplayName(newName) {\n        this.displayName = newName;\n    }\n\n    /**\n     * Returns true if the stats are tracking the local user.\n     *\n     * @returns {boolean}\n     */\n    isLocalStats() {\n        return this._isLocalStats;\n    }\n\n    /**\n     * Returns true if the tracked user is currently a dominant speaker.\n     *\n     * @returns {boolean}\n     */\n    isDominantSpeaker() {\n        return this._isDominantSpeaker;\n    }\n\n    /**\n     * Returns true if the tracked user is currently a dominant speaker.\n     *\n     * @param {boolean} - If true, the user will being accumulating time\n     * as dominant speaker. If false, the user will not accumulate time\n     * and will record any time accumulated since starting as dominant speaker.\n     * @returns {void}\n     */\n    setIsDominantSpeaker(isNowDominantSpeaker) {\n        if (!this._isDominantSpeaker && isNowDominantSpeaker) {\n            this._dominantSpeakerStart = Date.now();\n        } else if (this._isDominantSpeaker && !isNowDominantSpeaker) {\n            const now = Date.now();\n            const timeElapsed = now - (this._dominantSpeakerStart || 0);\n\n            this.totalDominantSpeakerTime += timeElapsed;\n            this._dominantSpeakerStart = null;\n        }\n\n        this._isDominantSpeaker = isNowDominantSpeaker;\n    }\n\n    /**\n     * Get how long the tracked user has been dominant speaker.\n     *\n     * @returns {number} - The speaker time in milliseconds.\n     */\n    getTotalDominantSpeakerTime() {\n        let total = this.totalDominantSpeakerTime;\n\n        if (this._isDominantSpeaker) {\n            total += Date.now() - this._dominantSpeakerStart;\n        }\n\n        return total;\n    }\n\n    /**\n     * Get whether or not the user is still in the meeting.\n     *\n     * @returns {boolean} True if the user is no longer in the meeting.\n     */\n    hasLeft() {\n        return this._hasLeft;\n    }\n\n    /**\n     * Set the user as having left the meeting.\n     *\n     * @returns {void}\n     */\n    markAsHasLeft() {\n        this._hasLeft = true;\n        this.setIsDominantSpeaker(false);\n    }\n}\n\nmodule.exports = SpeakerStats;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/SpeakerStats.js","import EventEmitter from 'events';\n\nimport * as MediaType from './service/RTC/MediaType';\nimport browser from './modules/browser';\nimport RTC from './modules/RTC/RTC';\nimport RTCEvents from './service/RTC/RTCEvents';\nimport Statistics from './modules/statistics/statistics';\n\nimport * as JitsiMediaDevicesEvents from './JitsiMediaDevicesEvents';\n\nconst eventEmitter = new EventEmitter();\n\n/**\n * Gathers data and sends it to statistics.\n * @param deviceID the device id to log\n * @param devices list of devices\n */\nfunction logOutputDevice(deviceID, devices) {\n    const device\n        = devices.find(\n            d => d.kind === 'audiooutput' && d.deviceId === deviceID);\n\n    if (device) {\n        Statistics.sendActiveDeviceListEvent(\n            RTC.getEventDataForActiveDevice(device));\n    }\n}\n\nconst JitsiMediaDevices = {\n    /**\n     * Executes callback with list of media devices connected.\n     * @param {function} callback\n     */\n    enumerateDevices(callback) {\n        RTC.enumerateDevices(callback);\n    },\n\n    /**\n     * Checks if its possible to enumerate available cameras/micropones.\n     * @returns {Promise<boolean>} a Promise which will be resolved only once\n     * the WebRTC stack is ready, either with true if the device listing is\n     * available available or with false otherwise.\n     */\n    isDeviceListAvailable() {\n        return RTC.isDeviceListAvailable();\n    },\n\n    /**\n     * Returns true if changing the input (camera / microphone) or output\n     * (audio) device is supported and false if not.\n     * @param {string} [deviceType] - type of device to change. Default is\n     *      undefined or 'input', 'output' - for audio output device change.\n     * @returns {boolean} true if available, false otherwise.\n     */\n    isDeviceChangeAvailable(deviceType) {\n        return RTC.isDeviceChangeAvailable(deviceType);\n    },\n\n    /**\n     * Returns true if user granted permission to media devices.\n     * @param {'audio'|'video'} [type] - type of devices to check,\n     *      undefined stands for both 'audio' and 'video' together\n     * @returns {boolean}\n     */\n    isDevicePermissionGranted(type) {\n        const permissions = RTC.getDeviceAvailability();\n\n        switch (type) {\n        case MediaType.VIDEO:\n            return permissions.video === true;\n        case MediaType.AUDIO:\n            return permissions.audio === true;\n        default:\n            return permissions.video === true && permissions.audio === true;\n        }\n    },\n\n    /**\n     * Returns true if it is possible to be simultaneously capturing audio\n     * from more than one device.\n     *\n     * @returns {boolean}\n     */\n    isMultipleAudioInputSupported() {\n        return !browser.isFirefox();\n    },\n\n    /**\n     * Returns currently used audio output device id, 'default' stands\n     * for default device\n     * @returns {string}\n     */\n    getAudioOutputDevice() {\n        return RTC.getAudioOutputDevice();\n    },\n\n    /**\n     * Sets current audio output device.\n     * @param {string} deviceId - id of 'audiooutput' device from\n     *      navigator.mediaDevices.enumerateDevices(), 'default' is for\n     *      default device\n     * @returns {Promise} - resolves when audio output is changed, is rejected\n     *      otherwise\n     */\n    setAudioOutputDevice(deviceId) {\n\n        const availableDevices = RTC.getCurrentlyAvailableMediaDevices();\n\n        if (availableDevices && availableDevices.length > 0) {\n            // if we have devices info report device to stats\n            // normally this will not happen on startup as this method is called\n            // too early. This will happen only on user selection of new device\n            logOutputDevice(deviceId, RTC.getCurrentlyAvailableMediaDevices());\n        }\n\n        return RTC.setAudioOutputDevice(deviceId);\n    },\n\n    /**\n     * Adds an event handler.\n     * @param {string} event - event name\n     * @param {function} handler - event handler\n     */\n    addEventListener(event, handler) {\n        eventEmitter.addListener(event, handler);\n    },\n\n    /**\n     * Removes event handler.\n     * @param {string} event - event name\n     * @param {function} handler - event handler\n     */\n    removeEventListener(event, handler) {\n        eventEmitter.removeListener(event, handler);\n    },\n\n    /**\n     * Emits an event.\n     * @param {string} event - event name\n     */\n    emitEvent(event, ...args) {\n        eventEmitter.emit(event, ...args);\n    },\n\n    /**\n     * Returns whether or not the current browser can support capturing video,\n     * be it camera or desktop, and displaying received video.\n     *\n     * @returns {boolean}\n     */\n    supportsVideo() {\n        // Defer to the browser capabilities to allow exposure of the api to the\n        // consumer but prevent other files from having to import\n        // JitsiMediaDevices.\n        return browser.supportsVideo();\n    }\n};\n\n\nRTC.addListener(\n    RTCEvents.DEVICE_LIST_CHANGED,\n    devices =>\n        eventEmitter.emit(\n            JitsiMediaDevicesEvents.DEVICE_LIST_CHANGED,\n            devices));\nRTC.addListener(\n    RTCEvents.DEVICE_LIST_AVAILABLE,\n    devices =>\n        logOutputDevice(\n            JitsiMediaDevices.getAudioOutputDevice(),\n            devices));\n\nexport default JitsiMediaDevices;\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiMediaDevices.js","export default {\n    error: {\n        BUSY: 'busy',\n        ERROR: 'error',\n        RESOURCE_CONSTRAINT: 'resource-constraint',\n        SERVICE_UNAVAILABLE: 'service-unavailable'\n    },\n    mode: {\n        FILE: 'file',\n        STREAM: 'stream'\n    },\n    status: {\n        OFF: 'off',\n        ON: 'on',\n        PENDING: 'pending'\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/recording/recordingConstants.js"],"sourceRoot":""}